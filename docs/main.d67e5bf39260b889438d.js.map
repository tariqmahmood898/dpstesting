{"version":3,"file":"main.d67e5bf39260b889438d.js","mappings":"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","sources":["webpack://mytonwallet/webpack/runtime/create fake namespace object","webpack://mytonwallet/webpack/runtime/load script","webpack://mytonwallet/./node_modules/@capacitor-mlkit/barcode-scanning/dist/esm/definitions.js","webpack://mytonwallet/./node_modules/ieee754/index.js","webpack://mytonwallet/./src/util/decimals.ts","webpack://mytonwallet/./src/util/bigint.ts","webpack://mytonwallet/./src/util/environment.ts","webpack://mytonwallet/./src/util/handleError.ts","webpack://mytonwallet/./src/api/chains/ton/constants.ts","webpack://mytonwallet/./src/util/PostMessageConnector.ts","webpack://mytonwallet/./src/util/Deferred.ts","webpack://mytonwallet/./src/util/dateFormat.ts","webpack://mytonwallet/./src/api/types/misc.ts","webpack://mytonwallet/./src/util/generateUniqueId.ts","webpack://mytonwallet/./node_modules/@capacitor/core/dist/index.js","webpack://mytonwallet/./src/util/withCache.ts","webpack://mytonwallet/./src/util/animation.ts","webpack://mytonwallet/./node_modules/@capacitor/haptics/dist/esm/definitions.js","webpack://mytonwallet/./src/util/extensionMessageSerializer.ts","webpack://mytonwallet/./src/config.ts","webpack://mytonwallet/./src/util/getPlatform.ts","webpack://mytonwallet/./node_modules/@capacitor/filesystem/dist/esm/definitions.js","webpack://mytonwallet/./src/util/schedulers.ts","webpack://mytonwallet/./src/api/errors.ts","webpack://mytonwallet/./src/util/launchMediaWorkers.ts","webpack://mytonwallet/./node_modules/buffer/index.js","webpack://mytonwallet/./src/lib/big.js/index.js","webpack://mytonwallet/./src/util/safeExec.ts","webpack://mytonwallet/./src/util/ledger/tab.ts","webpack://mytonwallet/./src/util/createPostMessageInterface.ts","webpack://mytonwallet/./src/util/logs.ts","webpack://mytonwallet/./src/api/types/errors.ts","webpack://mytonwallet/./src/util/random.ts","webpack://mytonwallet/./src/util/assert.ts","webpack://mytonwallet/./src/api/chains/ton/contracts/JettonStaking/imports/constants.ts","webpack://mytonwallet/./node_modules/process/browser.js","webpack://mytonwallet/./src/lib/fasterdom/fasterdom.ts","webpack://mytonwallet/./src/util/dns.ts","webpack://mytonwallet/./node_modules/base64-js/index.js","webpack://mytonwallet/./src/lib/fasterdom/layoutCauses.ts","webpack://mytonwallet/./src/lib/fasterdom/stricterdom.ts","webpack://mytonwallet/./src/api/providers/extension/config.ts","webpack://mytonwallet/./src/api/providers/worker/connector.ts","webpack://mytonwallet/./src/util/windowProvider/index.ts","webpack://mytonwallet/./src/util/windowEnvironment.ts","webpack://mytonwallet/./src/util/account.ts","webpack://mytonwallet/./src/util/iteratees.ts","webpack://mytonwallet/./src/util/shortenAddress.ts","webpack://mytonwallet/./src/util/windowProvider/methods/capacitorStorage.ts","webpack://mytonwallet/./src/util/windowProvider/methods/localStorage.ts","webpack://mytonwallet/./src/util/ledger/utils.ts","webpack://mytonwallet/./src/util/stringFormat.ts","webpack://mytonwallet/webpack/bootstrap","webpack://mytonwallet/webpack/runtime/compat get default export","webpack://mytonwallet/webpack/runtime/define property getters","webpack://mytonwallet/webpack/runtime/ensure chunk","webpack://mytonwallet/webpack/runtime/get javascript chunk filename","webpack://mytonwallet/webpack/runtime/get mini-css chunk filename","webpack://mytonwallet/webpack/runtime/global","webpack://mytonwallet/webpack/runtime/hasOwnProperty shorthand","webpack://mytonwallet/webpack/runtime/make namespace object","webpack://mytonwallet/webpack/runtime/publicPath","webpack://mytonwallet/webpack/runtime/jsonp chunk loading","webpack://mytonwallet/./src/util/arePropsShallowEqual.ts","webpack://mytonwallet/./src/util/debugOverlay.ts","webpack://mytonwallet/./src/util/callbacks.ts","webpack://mytonwallet/./src/util/signals.ts","webpack://mytonwallet/./src/lib/teact/heavyAnimation.ts","webpack://mytonwallet/./src/lib/teact/teact.ts","webpack://mytonwallet/./src/hooks/useForceUpdate.ts","webpack://mytonwallet/./src/hooks/useEffectOnce.ts","webpack://mytonwallet/./src/hooks/usePrevious.ts","webpack://mytonwallet/./src/hooks/useSyncEffect.ts","webpack://mytonwallet/./src/hooks/useUniqueId.ts","webpack://mytonwallet/./src/lib/teact/teactn.tsx","webpack://mytonwallet/./src/global/index.ts","webpack://mytonwallet/./src/util/isEmptyObject.ts","webpack://mytonwallet/./src/util/isViewAccount.ts","webpack://mytonwallet/./src/util/memoize.ts","webpack://mytonwallet/./src/global/selectors/accounts.ts","webpack://mytonwallet/./src/util/ton/transfer.ts","webpack://mytonwallet/./src/global/selectors/dapp.ts","webpack://mytonwallet/./src/util/round.ts","webpack://mytonwallet/./src/global/selectors/tokens.ts","webpack://mytonwallet/./src/util/compareActivities.ts","webpack://mytonwallet/./src/util/poisoningHash.ts","webpack://mytonwallet/./src/util/activities/index.ts","webpack://mytonwallet/./src/global/selectors/activities.ts","webpack://mytonwallet/./src/global/types.ts","webpack://mytonwallet/./src/util/chain.ts","webpack://mytonwallet/./src/util/tokens.ts","webpack://mytonwallet/./src/global/selectors/swap.ts","webpack://mytonwallet/./src/util/fee/transferFee.ts","webpack://mytonwallet/./src/util/isValidAddressOrDomain.ts","webpack://mytonwallet/./src/global/selectors/transfer.ts","webpack://mytonwallet/./src/global/selectors/staking.ts","webpack://mytonwallet/./src/global/selectors/domains.ts","webpack://mytonwallet/./src/global/actions/api/initial.ts","webpack://mytonwallet/./node_modules/@capgo/capacitor-native-biometric/dist/esm/definitions.js","webpack://mytonwallet/./node_modules/@capgo/capacitor-native-biometric/dist/esm/index.js","webpack://mytonwallet/./src/util/windowSize.ts","webpack://mytonwallet/./src/util/telegram/index.ts","webpack://mytonwallet/./src/util/authApi/telegram.ts","webpack://mytonwallet/./src/util/authApi/webAuthn.ts","webpack://mytonwallet/./src/util/authApi/index.ts","webpack://mytonwallet/./node_modules/@capacitor/app/dist/esm/index.js","webpack://mytonwallet/./node_modules/@capacitor/splash-screen/dist/esm/index.js","webpack://mytonwallet/./node_modules/capacitor-plugin-safe-area/dist/esm/index.js","webpack://mytonwallet/./node_modules/@capacitor/app-launcher/dist/esm/index.js","webpack://mytonwallet/../../src/index.ts","webpack://mytonwallet/./src/util/domEvents.ts","webpack://mytonwallet/./src/util/tonConnectEnvironment.ts","webpack://mytonwallet/./src/util/embeddedDappBridge/connector/connector.ts","webpack://mytonwallet/./src/api/tonConnect/types/index.ts","webpack://mytonwallet/./src/util/embeddedDappBridge/provider/tonConnectBridgeApi.ts","webpack://mytonwallet/./src/util/embeddedDappBridge/provider/bridgeApi.ts","webpack://mytonwallet/./src/hooks/useStateRef.ts","webpack://mytonwallet/./src/hooks/useLastCallback.ts","webpack://mytonwallet/./src/util/embeddedDappBridge/provider/InAppBrowserPostMessageAdapter.ts","webpack://mytonwallet/./src/util/url.ts","webpack://mytonwallet/./src/util/base64toHex.ts","webpack://mytonwallet/./src/global/helpers/renderText.tsx","webpack://mytonwallet/./src/util/cacheApi.ts","webpack://mytonwallet/./src/util/formatNumber.ts","webpack://mytonwallet/./src/util/langProvider.ts","webpack://mytonwallet/./src/util/regex.ts","webpack://mytonwallet/./src/hooks/useLang.ts","webpack://mytonwallet/./src/util/buildClassName.ts","webpack://mytonwallet/./src/util/math.ts","webpack://mytonwallet/./src/util/captureEvents.ts","webpack://mytonwallet/./src/util/lethargy.ts","webpack://mytonwallet/./src/util/captureKeyboardListeners.ts","webpack://mytonwallet/./src/util/modalSwipeManager.ts","webpack://mytonwallet/./src/util/trapFocus.ts","webpack://mytonwallet/./src/util/cssColorToHex.ts","webpack://mytonwallet/./node_modules/@capacitor/status-bar/dist/esm/definitions.js","webpack://mytonwallet/./node_modules/@capacitor/status-bar/dist/esm/index.js","webpack://mytonwallet/./node_modules/@mauricewegner/capacitor-navigation-bar/dist/esm/navigationbar.events.js","webpack://mytonwallet/./node_modules/@mauricewegner/capacitor-navigation-bar/dist/esm/index.js","webpack://mytonwallet/./src/util/switchTheme.ts","webpack://mytonwallet/./src/util/capacitor/switchStatusBar.ts","webpack://mytonwallet/./src/hooks/useMediaQuery.ts","webpack://mytonwallet/./src/hooks/useDeviceScreen.ts","webpack://mytonwallet/./src/hooks/useEffectWithPrevDeps.ts","webpack://mytonwallet/./src/hooks/useDelegatedBottomSheet.ts","webpack://mytonwallet/./src/hooks/useDelegatingBottomSheet.ts","webpack://mytonwallet/./src/util/telegram/backButtonManager.ts","webpack://mytonwallet/./src/hooks/useHistoryBack.ts","webpack://mytonwallet/./src/lib/teact/dom-events.ts","webpack://mytonwallet/./src/lib/teact/teact-dom.ts","webpack://mytonwallet/./src/hooks/useSignal.ts","webpack://mytonwallet/./src/hooks/useSignalEffect.ts","webpack://mytonwallet/./src/hooks/useDerivedSignal.ts","webpack://mytonwallet/./src/hooks/useDerivedState.ts","webpack://mytonwallet/./src/hooks/useSyncEffectWithPrevDeps.ts","webpack://mytonwallet/./src/hooks/useShowTransition.ts","webpack://mytonwallet/./src/hooks/useToggleClass.ts","webpack://mytonwallet/./src/components/ui/LoadingDots.module.scss?6dd6","webpack://mytonwallet/./src/components/ui/LoadingDots.tsx","webpack://mytonwallet/./src/components/ui/Button.module.scss?78d5","webpack://mytonwallet/./src/components/ui/Button.tsx","webpack://mytonwallet/./src/components/ui/Portal.ts","webpack://mytonwallet/./src/components/ui/Modal.module.scss?b689","webpack://mytonwallet/./src/components/ui/Modal.tsx","webpack://mytonwallet/./src/hooks/freezeWhenClosed.ts","webpack://mytonwallet/./src/hooks/useHideBrowser.ts","webpack://mytonwallet/./src/components/ui/InAppBrowser.tsx","webpack://mytonwallet/./src/util/embeddedDappBridge/provider/useInAppBrowserBridgeProvider.ts","webpack://mytonwallet/./src/util/embeddedDappBridge/connector/inAppBrowserConnector.ts","webpack://mytonwallet/./src/global/helpers/misc.ts","webpack://mytonwallet/./src/util/openUrl.ts","webpack://mytonwallet/./src/util/renderPromise.ts","webpack://mytonwallet/./src/util/deeplink/constants.ts","webpack://mytonwallet/./src/util/deeplink/index.ts","webpack://mytonwallet/./node_modules/@capacitor/push-notifications/dist/esm/index.js","webpack://mytonwallet/./src/global/selectors/notifications.ts","webpack://mytonwallet/./src/util/capacitor/platform.ts","webpack://mytonwallet/./src/util/capacitor/notifications.ts","webpack://mytonwallet/./src/util/capacitor/index.ts","webpack://mytonwallet/./src/util/biometrics.ts","webpack://mytonwallet/./node_modules/@capacitor/clipboard/dist/esm/web.js","webpack://mytonwallet/./node_modules/@capacitor/clipboard/dist/esm/index.js","webpack://mytonwallet/./node_modules/@capacitor/haptics/dist/esm/index.js","webpack://mytonwallet/./src/util/haptics.ts","webpack://mytonwallet/./src/util/clipboard.ts","webpack://mytonwallet/./src/util/isMnemonicPrivateKey.ts","webpack://mytonwallet/./src/util/deepDiff.ts","webpack://mytonwallet/./src/util/deepMerge.ts","webpack://mytonwallet/./src/hooks/useBackgroundMode.ts","webpack://mytonwallet/./src/util/multitab.ts","webpack://mytonwallet/./src/global/initialState.ts","webpack://mytonwallet/./src/util/areDeepEqual.ts","webpack://mytonwallet/./src/util/isPartialDeepEqual.ts","webpack://mytonwallet/./src/global/reducers/misc.ts","webpack://mytonwallet/./src/global/helpers/swap.ts","webpack://mytonwallet/./src/global/reducers/swap.ts","webpack://mytonwallet/./src/global/reducers/transfer.ts","webpack://mytonwallet/./src/global/reducers/wallet.ts","webpack://mytonwallet/./src/global/reducers/staking.ts","webpack://mytonwallet/./src/global/reducers/dapp.ts","webpack://mytonwallet/./src/global/reducers/activities.ts","webpack://mytonwallet/./src/global/reducers/nfts.ts","webpack://mytonwallet/./src/global/reducers/vesting.ts","webpack://mytonwallet/./src/global/reducers/cards.ts","webpack://mytonwallet/./src/global/reducers/domains.ts","webpack://mytonwallet/./src/global/reducers/hardware.ts","webpack://mytonwallet/./src/global/actions/api/auth.ts","webpack://mytonwallet/./src/global/helpers/index.ts","webpack://mytonwallet/./src/global/reducers/tokens.ts","webpack://mytonwallet/./src/global/actions/api/wallet.ts","webpack://mytonwallet/./src/api/constants.ts","webpack://mytonwallet/./src/util/fee/getTonOperationFees.ts","webpack://mytonwallet/./src/util/staking/index.ts","webpack://mytonwallet/./src/util/getDappConnectionUniqueId.ts","webpack://mytonwallet/./src/global/actions/api/dapps.ts","webpack://mytonwallet/./src/util/fee/swapFee.ts","webpack://mytonwallet/./src/util/bigNumber.ts","webpack://mytonwallet/./src/global/actions/api/staking.ts","webpack://mytonwallet/./src/global/actions/api/swap.ts","webpack://mytonwallet/./src/global/actions/api/tokens.ts","webpack://mytonwallet/./src/util/scamDetection.ts","webpack://mytonwallet/./src/global/actions/api/transfer.tsx","webpack://mytonwallet/./src/global/actions/api/nfts.ts","webpack://mytonwallet/./src/global/actions/api/cards.ts","webpack://mytonwallet/./src/global/actions/api/vesting.ts","webpack://mytonwallet/./src/util/createAbortableFunction.ts","webpack://mytonwallet/./src/global/reducers/notifications.ts","webpack://mytonwallet/./src/global/actions/api/notifications.ts","webpack://mytonwallet/./src/global/actions/api/domains.ts","webpack://mytonwallet/./src/global/actions/api/activity.ts","webpack://mytonwallet/./src/global/actions/apiUpdates/initial.ts","webpack://mytonwallet/./node_modules/@capgo/native-audio/dist/esm/index.js","webpack://mytonwallet/./src/util/notificationSound.ts","webpack://mytonwallet/./src/global/actions/apiUpdates/activities.ts","webpack://mytonwallet/./src/global/actions/apiUpdates/dapp.ts","webpack://mytonwallet/./src/util/switchAnimationLevel.ts","webpack://mytonwallet/./src/global/actions/ui/initial.ts","webpack://mytonwallet/./node_modules/@capacitor-mlkit/barcode-scanning/dist/esm/index.js","webpack://mytonwallet/./src/util/getIsAppUpdateNeeded.ts","webpack://mytonwallet/./src/hooks/useFlag.ts","webpack://mytonwallet/./src/hooks/useHotkeys.ts","webpack://mytonwallet/./src/util/parseHotkey.ts","webpack://mytonwallet/./src/hooks/useThrottledCallback.ts","webpack://mytonwallet/./src/hooks/useDebouncedCallback.ts","webpack://mytonwallet/./src/hooks/useWindowSize.ts","webpack://mytonwallet/./src/util/authApi/inMemoryPasswordStore.ts","webpack://mytonwallet/./src/util/setReliableTimeout.ts","webpack://mytonwallet/./src/components/ui/helpers/animatedAssets.ts","webpack://mytonwallet/./src/hooks/useFocusAfterAnimation.tsx","webpack://mytonwallet/./src/hooks/useMatchCount.ts","webpack://mytonwallet/./src/components/ui/Checkbox.module.scss?4964","webpack://mytonwallet/./src/components/ui/Checkbox.tsx","webpack://mytonwallet/./src/components/main/modals/LogOutModal.module.scss?5651","webpack://mytonwallet/./src/components/main/modals/LogOutModal.tsx","webpack://mytonwallet/./src/util/buildStyle.ts","webpack://mytonwallet/./src/hooks/useMediaTransition.ts","webpack://mytonwallet/./src/lib/rlottie/RLottie.async.ts","webpack://mytonwallet/./src/util/colors.ts","webpack://mytonwallet/./src/hooks/useHeavyAnimation.ts","webpack://mytonwallet/./src/hooks/usePriorityPlaybackCheck.ts","webpack://mytonwallet/./src/hooks/useSharedIntersectionObserver.ts","webpack://mytonwallet/./src/components/ui/AnimatedSticker.tsx","webpack://mytonwallet/./src/components/ui/AnimatedIcon.tsx","webpack://mytonwallet/./src/components/ui/AnimatedIconWithPreview.module.scss?9243","webpack://mytonwallet/./src/components/ui/AnimatedIconWithPreview.tsx","webpack://mytonwallet/./src/components/ui/Input.module.scss?4fb9","webpack://mytonwallet/./src/components/ui/Input.tsx","webpack://mytonwallet/./src/util/cssAnimationEndListeners.ts","webpack://mytonwallet/./src/util/swipeController.ts","webpack://mytonwallet/./src/components/ui/PinPad.module.scss?228e","webpack://mytonwallet/./src/components/ui/PinPadButton.tsx","webpack://mytonwallet/./src/components/ui/Transition.tsx","webpack://mytonwallet/./src/util/forceReflow.ts","webpack://mytonwallet/./src/components/ui/PinPad.tsx","webpack://mytonwallet/./src/components/ui/PasswordForm.module.scss?0d24","webpack://mytonwallet/./src/components/ui/PasswordForm.tsx","webpack://mytonwallet/./src/hooks/useAppTheme.ts","webpack://mytonwallet/./src/util/preloadImage.ts","webpack://mytonwallet/./src/components/ui/Image.tsx","webpack://mytonwallet/./src/components/appLocked/AppLocked.module.scss?8d6b","webpack://mytonwallet/./src/components/appLocked/Logo.tsx","webpack://mytonwallet/./src/components/appLocked/PasswordFormSlide.tsx","webpack://mytonwallet/./src/components/appLocked/UnlockButtonSlide.tsx","webpack://mytonwallet/./src/components/appLocked/AppLocked.tsx","webpack://mytonwallet/./src/global/actions/ui/misc.ts","webpack://mytonwallet/./src/global/actions/ui/dapps.ts","webpack://mytonwallet/./src/global/actions/ui/hardware.ts","webpack://mytonwallet/./src/global/actions/ui/settings.ts","webpack://mytonwallet/./src/global/actions/ui/nfts.ts","webpack://mytonwallet/./src/global/actions/ui/vesting.ts","webpack://mytonwallet/./src/global/actions/ui/tokens.ts","webpack://mytonwallet/./src/global/actions/ui/transfer.ts","webpack://mytonwallet/./src/global/actions/ui/shared.ts","webpack://mytonwallet/./src/global/actions/ui/notifications.ts","webpack://mytonwallet/./src/util/accentColor/constants.ts","webpack://mytonwallet/./src/util/accentColor/index.ts","webpack://mytonwallet/./src/global/actions/ui/cards.ts","webpack://mytonwallet/./src/global/actions/ui/domains.ts","webpack://mytonwallet/./src/global/cache.ts","webpack://mytonwallet/./src/global/init.ts","webpack://mytonwallet/./src/util/bigintPatch.ts","webpack://mytonwallet/./src/util/betterView.ts","webpack://mytonwallet/./src/electron/types.ts","webpack://mytonwallet/./src/util/focusScroll.ts","webpack://mytonwallet/./src/util/activeTabMonitor.ts","webpack://mytonwallet/./node_modules/@capacitor/filesystem/dist/esm/index.js","webpack://mytonwallet/./node_modules/@capacitor/share/dist/esm/index.js","webpack://mytonwallet/./src/util/share.ts","webpack://mytonwallet/./src/hooks/useCurrentOrPrev.ts","webpack://mytonwallet/./src/components/ui/Dropdown.module.scss?3afe","webpack://mytonwallet/./src/components/ui/DropdownItemContent.tsx","webpack://mytonwallet/./src/util/captureEscKeyListener.ts","webpack://mytonwallet/./src/components/ui/Menu.module.scss?ed87","webpack://mytonwallet/./src/hooks/useMenuPosition.ts","webpack://mytonwallet/./src/components/ui/Menu.tsx","webpack://mytonwallet/./src/hooks/useVirtualBackdrop.ts","webpack://mytonwallet/./src/components/ui/DropdownMenu.tsx","webpack://mytonwallet/./src/components/ui/ModalHeader.tsx","webpack://mytonwallet/./src/components/ui/IFrameBrowser.tsx","webpack://mytonwallet/./src/util/embeddedDappBridge/provider/useIFrameBridgeProvider.ts","webpack://mytonwallet/./src/components/ui/IFrameBrowser.module.scss?ece8","webpack://mytonwallet/./src/hooks/useIntersectionObserver.ts","webpack://mytonwallet/./src/hooks/useAppIntersectionObserver.ts","webpack://mytonwallet/./src/hooks/useInterval.ts","webpack://mytonwallet/./src/hooks/useTimeout.ts","webpack://mytonwallet/./src/components/AppInactive.module.scss?fa93","webpack://mytonwallet/./src/components/AppInactive.tsx","webpack://mytonwallet/./src/hooks/useScrolledState.ts","webpack://mytonwallet/./src/components/ui/Emoji.module.scss?1c66","webpack://mytonwallet/./src/components/ui/Emoji.tsx","webpack://mytonwallet/./src/components/settings/Settings.module.scss?98b7","webpack://mytonwallet/./src/components/settings/SettingsAbout.tsx","webpack://mytonwallet/./src/components/auth/Auth.module.scss?dc00","webpack://mytonwallet/./src/components/auth/AuthCheckPassword.tsx","webpack://mytonwallet/./src/components/ui/SuggestionList.module.scss?e7a6","webpack://mytonwallet/./src/components/ui/SuggestionList.tsx","webpack://mytonwallet/./src/components/common/InputMnemonic.module.scss?8c11","webpack://mytonwallet/./src/components/common/InputMnemonic.tsx","webpack://mytonwallet/./src/components/common/backup/BackUpContent.module.scss?30c9","webpack://mytonwallet/./src/components/common/backup/CheckWordsForm.tsx","webpack://mytonwallet/./src/components/common/backup/CheckWordsContent.tsx","webpack://mytonwallet/./src/components/auth/AuthCheckWords.tsx","webpack://mytonwallet/./src/components/auth/AuthConfirmBiometrics.tsx","webpack://mytonwallet/./src/components/auth/AuthConfirmPin.tsx","webpack://mytonwallet/./src/components/auth/AuthCreateBackup.tsx","webpack://mytonwallet/./src/components/auth/AuthCreateBiometrics.tsx","webpack://mytonwallet/./src/components/auth/AuthCreateNativeBiometrics.tsx","webpack://mytonwallet/./src/hooks/usePasswordValidation.ts","webpack://mytonwallet/./src/components/ui/CreatePasswordForm.tsx","webpack://mytonwallet/./src/components/auth/AuthCreatePassword.tsx","webpack://mytonwallet/./src/components/auth/AuthCreatePin.tsx","webpack://mytonwallet/./src/components/auth/AuthCreatingWallet.tsx","webpack://mytonwallet/./src/components/auth/AuthBackupWarning.tsx","webpack://mytonwallet/./src/components/auth/AuthDisclaimer.tsx","webpack://mytonwallet/./src/components/auth/AuthImportMnemonic.tsx","webpack://mytonwallet/./src/hooks/useClipboardPaste.ts","webpack://mytonwallet/./src/components/auth/AuthImportViewAccount.tsx","webpack://mytonwallet/./src/components/common/backup/SafetyRulesContent.tsx","webpack://mytonwallet/./src/components/auth/AuthSafetyRules.tsx","webpack://mytonwallet/./src/components/common/backup/SecretWordsList.tsx","webpack://mytonwallet/./src/components/common/backup/SecretWordsContent.tsx","webpack://mytonwallet/./src/components/auth/AuthSecretWords.tsx","webpack://mytonwallet/./src/components/auth/AuthStart.tsx","webpack://mytonwallet/./src/components/auth/Auth.tsx","webpack://mytonwallet/./src/components/ui/Spinner.module.scss?099b","webpack://mytonwallet/./src/components/ui/Spinner.tsx","webpack://mytonwallet/./src/components/ui/ListItem.module.scss?d4c4","webpack://mytonwallet/./src/components/ui/ListItem.tsx","webpack://mytonwallet/./src/components/auth/AuthImportWalletModal.tsx","webpack://mytonwallet/./src/util/resolveSlideTransitionName.ts","webpack://mytonwallet/./src/hooks/useModalTransitionKeys.ts","webpack://mytonwallet/./src/hooks/useCachedImage.ts","webpack://mytonwallet/./src/hooks/useAsync.ts","webpack://mytonwallet/./src/util/getCachedImageUrl.ts","webpack://mytonwallet/./src/hooks/useCardCustomization.ts","webpack://mytonwallet/./src/components/main/sections/Header/AccountButton.module.scss?95ab","webpack://mytonwallet/./src/components/main/sections/Header/AccountButton.tsx","webpack://mytonwallet/./src/components/common/AccountButton.module.scss?29d1","webpack://mytonwallet/./src/components/common/AccountButton.tsx","webpack://mytonwallet/./src/components/common/AccountButtonWrapper.tsx","webpack://mytonwallet/./src/components/ledger/LedgerModal.module.scss?bcee","webpack://mytonwallet/./src/components/ledger/LedgerConfirmOperation.tsx","webpack://mytonwallet/./src/components/ui/Dropdown.tsx","webpack://mytonwallet/./src/components/ledger/LedgerConnect.tsx","webpack://mytonwallet/./src/components/ui/Skeleton.tsx","webpack://mytonwallet/./src/components/ui/Skeleton.module.scss?021e","webpack://mytonwallet/./src/components/ui/IconWithTooltip.module.scss?91f0","webpack://mytonwallet/./src/components/ui/IconWithTooltip.tsx","webpack://mytonwallet/./src/components/dapps/Dapp.module.scss?bf14","webpack://mytonwallet/./src/components/dapps/DappInfo.tsx","webpack://mytonwallet/./src/components/dapps/DappPassword.tsx","webpack://mytonwallet/./src/components/dapps/DappConnectModal.tsx","webpack://mytonwallet/./src/components/dapps/DappInfoWithAccount.tsx","webpack://mytonwallet/./src/components/dapps/DappSkeletonWithContent.tsx","webpack://mytonwallet/./src/components/dapps/DappSignDataInitial.tsx","webpack://mytonwallet/./src/components/common/TransferResult.module.scss?a52a","webpack://mytonwallet/./src/components/dapps/DappTransferComplete.tsx","webpack://mytonwallet/./src/components/dapps/DappSignDataModal.tsx","webpack://mytonwallet/./src/util/getPseudoRandomNumber.ts","webpack://mytonwallet/./src/util/swap/getSwapRate.ts","webpack://mytonwallet/./src/util/swap/getChainNetworkIcon.ts","webpack://mytonwallet/./src/components/ui/helpers/assetLogos.ts","webpack://mytonwallet/./src/components/common/TokenIcon.module.scss?68c8","webpack://mytonwallet/./src/components/common/TokenIcon.tsx","webpack://mytonwallet/./src/components/common/SensitiveDataMask.tsx","webpack://mytonwallet/./src/components/common/SensitiveDataMask.module.scss?6696","webpack://mytonwallet/./src/components/ui/SensitiveData.module.scss?5be5","webpack://mytonwallet/./src/components/ui/SensitiveData.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Activity.module.scss?f503","webpack://mytonwallet/./src/components/main/sections/Content/ActivityStatusIcon.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Swap.tsx","webpack://mytonwallet/./src/util/getLocalAddressName.ts","webpack://mytonwallet/./src/components/main/sections/Content/Transaction.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Activity.tsx","webpack://mytonwallet/./src/components/dapps/DappLedgerWarning.tsx","webpack://mytonwallet/./src/components/transfer/NftInfo.module.scss?aa0a","webpack://mytonwallet/./src/components/transfer/NftInfo.tsx","webpack://mytonwallet/./src/hooks/useLongPress.ts","webpack://mytonwallet/./src/components/main/modals/DeleteSavedAddressModal.module.scss?f4ba","webpack://mytonwallet/./src/components/main/modals/DeleteSavedAddressModal.tsx","webpack://mytonwallet/./src/components/ui/MenuBackdrop.tsx","webpack://mytonwallet/./src/components/ui/MenuBackdrop.module.scss?85b7","webpack://mytonwallet/./src/components/ui/InteractiveTextField.module.scss?844c","webpack://mytonwallet/./src/components/ui/InteractiveTextField.tsx","webpack://mytonwallet/./src/components/dapps/DappAmountField.tsx","webpack://mytonwallet/./src/components/dapps/DappTransactionPayload.tsx","webpack://mytonwallet/./src/components/dapps/DappTransaction.tsx","webpack://mytonwallet/./src/components/ui/Fee.module.scss?5335","webpack://mytonwallet/./src/components/ui/Fee.tsx","webpack://mytonwallet/./src/components/ui/FeeLine.tsx","webpack://mytonwallet/./src/components/ui/FeeLine.module.scss?c0f3","webpack://mytonwallet/./src/components/dapps/DappTransferInitial.tsx","webpack://mytonwallet/./src/components/dapps/DappTransferModal.tsx","webpack://mytonwallet/./src/components/Dialogs.tsx","webpack://mytonwallet/./src/components/electron/UpdateApp.tsx","webpack://mytonwallet/./src/components/electron/UpdateApp.module.scss?0ba5","webpack://mytonwallet/./src/components/electron/ElectronHeader.module.scss?adc9","webpack://mytonwallet/./src/components/electron/ElectronHeader.tsx","webpack://mytonwallet/./src/hooks/useElectronDrag.ts","webpack://mytonwallet/./src/util/telegram/hooks/useTelegramMiniAppSwipeToClose.ts","webpack://mytonwallet/./src/components/explore/helpers/utils.ts","webpack://mytonwallet/./src/hooks/useHorizontalScroll.ts","webpack://mytonwallet/./src/hooks/usePrevious2.ts","webpack://mytonwallet/./src/components/explore/Category.module.scss?4c23","webpack://mytonwallet/./src/components/explore/Category.tsx","webpack://mytonwallet/./src/util/memo.ts","webpack://mytonwallet/./src/components/explore/DappFeed.module.scss?4d73","webpack://mytonwallet/./src/components/explore/DappFeedItem.tsx","webpack://mytonwallet/./src/components/explore/Explore.module.scss?3005","webpack://mytonwallet/./src/components/explore/DappFeed.tsx","webpack://mytonwallet/./src/components/ui/MenuItem.module.scss?fd35","webpack://mytonwallet/./src/components/ui/MenuItem.tsx","webpack://mytonwallet/./src/components/explore/Site.tsx","webpack://mytonwallet/./src/components/explore/ExploreSearchSuggestions.tsx","webpack://mytonwallet/./src/components/explore/CategoryHeader.tsx","webpack://mytonwallet/./src/components/explore/CategoryHeader.module.scss?9a46","webpack://mytonwallet/./src/components/explore/SiteList.tsx","webpack://mytonwallet/./src/components/explore/SiteList.module.scss?5590","webpack://mytonwallet/./src/components/explore/Explore.tsx","webpack://mytonwallet/./src/components/ledger/LedgerSelectWallets.tsx","webpack://mytonwallet/./src/components/ledger/LedgerModal.tsx","webpack://mytonwallet/./src/components/main/helpers/calcSafeAreaTop.ts","webpack://mytonwallet/./src/hooks/useElementVisibility.ts","webpack://mytonwallet/./src/hooks/usePreventPinchZoomGesture.ts","webpack://mytonwallet/./src/components/common/TransactionBanner.module.scss?99c4","webpack://mytonwallet/./src/components/common/TransactionBanner.tsx","webpack://mytonwallet/./src/hooks/useQrScannerSupport.ts","webpack://mytonwallet/./src/components/transfer/Transfer.module.scss?40cb","webpack://mytonwallet/./src/components/ui/AddressBookItem.tsx","webpack://mytonwallet/./src/components/ui/AddressBook.tsx","webpack://mytonwallet/./src/components/ui/AddressInput.module.scss?066a","webpack://mytonwallet/./src/components/ui/AddressInput.tsx","webpack://mytonwallet/./src/components/domain/RenewDomainModal.module.scss?bf4b","webpack://mytonwallet/./src/components/domain/LinkingDomainModal.tsx","webpack://mytonwallet/./src/components/transfer/NftChips.tsx","webpack://mytonwallet/./src/components/transfer/NftChips.module.scss?1471","webpack://mytonwallet/./src/components/domain/RenewDomainModal.tsx","webpack://mytonwallet/./src/util/ton/formatTransferUrl.ts","webpack://mytonwallet/./src/components/common/SelectTokenButton.module.scss?97ef","webpack://mytonwallet/./src/components/common/SelectTokenButton.tsx","webpack://mytonwallet/./src/util/swap/getChainNetworkName.ts","webpack://mytonwallet/./src/components/common/TokenSelector.module.scss?759b","webpack://mytonwallet/./src/components/common/TokenSelector.tsx","webpack://mytonwallet/./src/components/ui/helpers/buildContentHtml.ts","webpack://mytonwallet/./src/hooks/useFontScale.ts","webpack://mytonwallet/./src/components/ui/RichNumberInput.tsx","webpack://mytonwallet/./src/util/saveCaretPosition.ts","webpack://mytonwallet/./src/components/receive/ReceiveModal.module.scss?beea","webpack://mytonwallet/./src/components/receive/InvoiceModal.tsx","webpack://mytonwallet/./src/util/animateHorizontalScroll.ts","webpack://mytonwallet/./src/components/ui/Tab.tsx","webpack://mytonwallet/./src/components/ui/Tab.module.scss?eb4d","webpack://mytonwallet/./src/components/ui/TabList.tsx","webpack://mytonwallet/./src/components/ui/TabList.module.scss?8978","webpack://mytonwallet/./src/components/receive/content/TonActions.module.scss?fcb4","webpack://mytonwallet/./src/components/receive/content/TonActions.tsx","webpack://mytonwallet/./src/hooks/useQrCode.ts","webpack://mytonwallet/./src/components/receive/content/TonContent.tsx","webpack://mytonwallet/./src/components/receive/content/TronActions.tsx","webpack://mytonwallet/./src/components/receive/content/TronContent.tsx","webpack://mytonwallet/./src/components/receive/Content.tsx","webpack://mytonwallet/./src/components/receive/ReceiveModal.tsx","webpack://mytonwallet/./src/components/common/TransferResult.tsx","webpack://mytonwallet/./src/global/helpers/getHelpCenterUrl.ts","webpack://mytonwallet/./src/components/ui/hooks/useAmountInputState.ts","webpack://mytonwallet/./src/components/staking/hooks/useTokenDropdown.ts","webpack://mytonwallet/./src/hooks/useTransitionActiveKey.ts","webpack://mytonwallet/./src/components/ui/AmountInputMaxButton.module.scss?2744","webpack://mytonwallet/./src/components/ui/AmountInputMaxButton.tsx","webpack://mytonwallet/./src/components/ui/TokenDropdown.module.scss?d4fd","webpack://mytonwallet/./src/components/ui/TokenDropdown.tsx","webpack://mytonwallet/./src/components/ui/AmountInput.module.scss?1bdd","webpack://mytonwallet/./src/components/ui/AmountInput.tsx","webpack://mytonwallet/./src/global/helpers/number.ts","webpack://mytonwallet/./src/components/ui/RichNumberField.tsx","webpack://mytonwallet/./src/components/staking/Staking.module.scss?5f25","webpack://mytonwallet/./src/components/staking/StakingInitial.tsx","webpack://mytonwallet/./src/util/ton/calcJettonStakingApr.ts","webpack://mytonwallet/./src/components/staking/StakeModal.tsx","webpack://mytonwallet/./src/components/staking/StakingClaimModal.tsx","webpack://mytonwallet/./src/components/staking/StakingClaimModal.module.scss?734c","webpack://mytonwallet/./src/components/staking/StakingProfitItem.tsx","webpack://mytonwallet/./src/components/staking/StakingProfileItem.module.scss?092e","webpack://mytonwallet/./src/components/staking/StakingInfoContent.tsx","webpack://mytonwallet/./src/components/staking/StakingInfoModal.tsx","webpack://mytonwallet/./src/components/staking/UnstakeModal.tsx","webpack://mytonwallet/./src/components/ui/UpdateAvailable.tsx","webpack://mytonwallet/./src/components/ui/UpdateAvailable.module.scss?8e42","webpack://mytonwallet/./src/components/main/helpers/calcVestingAmountByStatus.ts","webpack://mytonwallet/./src/components/vesting/VestingModal.module.scss?2a82","webpack://mytonwallet/./src/components/vesting/VestingModal.tsx","webpack://mytonwallet/./src/components/vesting/VestingPasswordModal.tsx","webpack://mytonwallet/./src/components/main/sections/Actions/helpers/sendMenu.ts","webpack://mytonwallet/./src/components/common/FeeDetailsModal.module.scss?8cde","webpack://mytonwallet/./src/components/common/FeeDetailsModal.tsx","webpack://mytonwallet/./src/components/swap/Swap.module.scss?9ed7","webpack://mytonwallet/./src/components/swap/components/SwapSubmitButton.tsx","webpack://mytonwallet/./src/hooks/useAsyncResolvers.ts","webpack://mytonwallet/./src/components/swap/SwapDexChooser.module.scss?b649","webpack://mytonwallet/./src/components/swap/SwapDexChooser.tsx","webpack://mytonwallet/./src/components/swap/SwapSettingsModal.tsx","webpack://mytonwallet/./src/components/swap/SwapInitial.tsx","webpack://mytonwallet/./src/util/text.ts","webpack://mytonwallet/./src/components/transfer/CommentSection.tsx","webpack://mytonwallet/./src/components/transfer/TransferInitial.tsx","webpack://mytonwallet/./src/hooks/useContextMenuHandlers.ts","webpack://mytonwallet/./src/components/ui/WithContextMenu.tsx","webpack://mytonwallet/./src/components/main/sections/Actions/LandscapeActions.module.scss?b2d4","webpack://mytonwallet/./src/components/main/sections/Actions/LandscapeActions.tsx","webpack://mytonwallet/./src/components/main/sections/Actions/PortraitActions.module.scss?a3a8","webpack://mytonwallet/./src/components/main/sections/Actions/PortraitActions.tsx","webpack://mytonwallet/./src/util/calcChangeValue.ts","webpack://mytonwallet/./src/components/main/sections/Card/helpers/calculateFullBalance.ts","webpack://mytonwallet/./src/hooks/useUpdateIndicator.ts","webpack://mytonwallet/./src/components/ui/ClockIcon.module.scss?42cd","webpack://mytonwallet/./src/components/ui/ClockIcon.tsx","webpack://mytonwallet/./src/components/mintCard/MintCardButton.tsx","webpack://mytonwallet/./src/components/mintCard/MintCardButton.module.scss?f674","webpack://mytonwallet/./src/components/ui/AnimatedCounter.tsx","webpack://mytonwallet/./src/components/ui/AnimatedCounter.module.scss?5cb5","webpack://mytonwallet/./src/components/main/sections/Card/Card.module.scss?fdf3","webpack://mytonwallet/./src/components/main/sections/Card/CardAddress.tsx","webpack://mytonwallet/./src/components/main/sections/Card/CurrencySwitcherMenu.tsx","webpack://mytonwallet/./src/components/main/sections/Card/CustomCardBackground.module.scss?8b12","webpack://mytonwallet/./src/components/main/sections/Card/CustomCardBackground.tsx","webpack://mytonwallet/./src/components/main/sections/Card/CustomCardManager.tsx","webpack://mytonwallet/./src/components/main/helpers/cardColors.ts","webpack://mytonwallet/./src/components/common/TokenPriceChart.tsx","webpack://mytonwallet/./src/components/main/sections/Card/ChartHistorySwitcher.tsx","webpack://mytonwallet/./src/components/main/sections/Card/ChartHistorySwitcher.module.scss?014e","webpack://mytonwallet/./src/components/main/sections/Card/TokenCard.tsx","webpack://mytonwallet/./src/components/main/sections/Card/Card.tsx","webpack://mytonwallet/./src/components/main/sections/Card/helpers/getSensitiveDataMaskSkinFromCardNft.ts","webpack://mytonwallet/./src/components/main/helpers/scrollableContainer.ts","webpack://mytonwallet/./src/components/main/modals/HideNftModal.tsx","webpack://mytonwallet/./src/hooks/useInfiniteScroll.ts","webpack://mytonwallet/./src/hooks/useLayoutEffectWithPrevDeps.ts","webpack://mytonwallet/./src/components/ui/InfiniteScroll.tsx","webpack://mytonwallet/./src/util/resetScroll.ts","webpack://mytonwallet/./src/components/main/sections/Content/Activities.module.scss?215b","webpack://mytonwallet/./src/components/main/sections/Content/hooks/useActivityListEntry.ts","webpack://mytonwallet/./src/components/main/sections/Content/ActivityListItem.tsx","webpack://mytonwallet/./src/components/main/sections/Content/NewWalletGreeting.module.scss?1d3d","webpack://mytonwallet/./src/components/main/sections/Content/NewWalletGreeting.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Activities.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Token.module.scss?2972","webpack://mytonwallet/./src/components/main/sections/Content/Token.tsx","webpack://mytonwallet/./src/components/main/sections/Content/hooks/useTokenContextMenu.ts","webpack://mytonwallet/./src/components/main/sections/Content/Assets.module.scss?2b3b","webpack://mytonwallet/./src/components/main/sections/Content/Assets.tsx","webpack://mytonwallet/./src/hooks/useVesting.ts","webpack://mytonwallet/./src/components/main/sections/Content/NftCollectionHeader.module.scss?fecc","webpack://mytonwallet/./src/components/main/sections/Content/NftCollectionHeader.tsx","webpack://mytonwallet/./src/components/ui/Radio.tsx","webpack://mytonwallet/./src/components/ui/Radio.module.scss?1611","webpack://mytonwallet/./src/hooks/usePrevDuringAnimationSimple.ts","webpack://mytonwallet/./src/components/mediaViewer/hooks/useNftMenu.ts","webpack://mytonwallet/./src/components/main/sections/Content/NftMenu.module.scss?7d45","webpack://mytonwallet/./src/components/main/sections/Content/NftMenu.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Nft.module.scss?a2fa","webpack://mytonwallet/./src/components/main/sections/Content/Nft.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Nfts.tsx","webpack://mytonwallet/./src/components/main/sections/Content/NftSelectionHeader.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Content.module.scss?df0c","webpack://mytonwallet/./src/components/main/sections/Content/Content.tsx","webpack://mytonwallet/./src/components/main/sections/Header/AccountRenameModal.tsx","webpack://mytonwallet/./src/components/main/sections/Header/AccountSelector.module.scss?89af","webpack://mytonwallet/./src/components/main/sections/Header/AccountSelector.tsx","webpack://mytonwallet/./src/components/main/sections/Header/actionButtons/Buttons.module.scss?78bd","webpack://mytonwallet/./src/components/main/sections/Header/actionButtons/AppLockButton.tsx","webpack://mytonwallet/./src/components/main/sections/Header/actionButtons/QrScannerButton.tsx","webpack://mytonwallet/./src/components/main/sections/Header/actionButtons/SettingsButton.tsx","webpack://mytonwallet/./src/components/main/sections/Header/actionButtons/ToggleFullscreenButton.tsx","webpack://mytonwallet/./src/components/main/sections/Header/actionButtons/ToggleLayoutButton.tsx","webpack://mytonwallet/./src/components/main/sections/Header/actionButtons/ToggleSensitiveDataButton.tsx","webpack://mytonwallet/./src/components/main/sections/Header/Header.module.scss?b631","webpack://mytonwallet/./src/components/main/sections/Header/Header.tsx","webpack://mytonwallet/./src/hooks/useBrowserUiColor.ts","webpack://mytonwallet/./src/components/main/sections/Warnings/Warnings.module.scss?104f","webpack://mytonwallet/./src/components/main/sections/Warnings/BackupWarning.tsx","webpack://mytonwallet/./src/components/ui/Collapsible.tsx","webpack://mytonwallet/./src/components/main/sections/Warnings/RenewDomainWarning.tsx","webpack://mytonwallet/./src/components/main/sections/Warnings/SecurityWarning.tsx","webpack://mytonwallet/./src/components/main/sections/Warnings/Warnings.tsx","webpack://mytonwallet/./src/components/main/Main.tsx","webpack://mytonwallet/./src/components/main/Main.module.scss?6d95","webpack://mytonwallet/./src/components/main/modals/AddAccountPasswordModal.tsx","webpack://mytonwallet/./src/components/main/modals/AddAccountModal.module.scss?8d66","webpack://mytonwallet/./src/components/main/modals/AddAccountModal.tsx","webpack://mytonwallet/./src/components/auth/MnemonicCheck.tsx","webpack://mytonwallet/./src/components/auth/MnemonicList.tsx","webpack://mytonwallet/./src/components/auth/MnemonicPrivateKey.tsx","webpack://mytonwallet/./src/components/auth/SafetyRules.tsx","webpack://mytonwallet/./src/components/main/modals/BackupModal.tsx","webpack://mytonwallet/./src/components/main/modals/BackupModal.module.scss?7942","webpack://mytonwallet/./src/components/main/modals/NftAttributesModal.module.scss?d684","webpack://mytonwallet/./src/components/main/modals/NftAttributesModal.tsx","webpack://mytonwallet/./src/components/main/modals/OnRampWidgetModal.tsx","webpack://mytonwallet/./src/components/main/modals/OnRampWidgetModal.module.scss?8236","webpack://mytonwallet/./src/components/main/modals/QrScannerModal.module.scss?87fb","webpack://mytonwallet/./src/components/main/modals/QrScannerModal.tsx","webpack://mytonwallet/./src/components/main/modals/SignatureModal.tsx","webpack://mytonwallet/./src/components/main/modals/SignatureModal.module.scss?77a6","webpack://mytonwallet/./src/hooks/usePrevDuringAnimation.ts","webpack://mytonwallet/./src/components/common/Countdown.module.scss?d513","webpack://mytonwallet/./src/components/common/Countdown.tsx","webpack://mytonwallet/./src/components/common/SwapTokensInfo.module.scss?7d2b","webpack://mytonwallet/./src/components/common/SwapTokensInfo.tsx","webpack://mytonwallet/./src/components/common/TransactionFee.tsx","webpack://mytonwallet/./src/components/common/TransactionFee.module.scss?5d5d","webpack://mytonwallet/./src/components/main/modals/TransactionModal.module.scss?6dca","webpack://mytonwallet/./src/components/main/modals/SwapActivityModal.tsx","webpack://mytonwallet/./src/components/common/TransactionAmount.module.scss?8894","webpack://mytonwallet/./src/components/common/TransactionAmount.tsx","webpack://mytonwallet/./src/components/main/modals/TransactionModal.tsx","webpack://mytonwallet/./src/components/main/modals/UnhideNftModal.tsx","webpack://mytonwallet/./src/components/ui/Notification.tsx","webpack://mytonwallet/./src/components/ui/Notification.module.scss?743a","webpack://mytonwallet/./src/components/main/Notifications.tsx","webpack://mytonwallet/./src/hooks/useHideBottomBar.ts","webpack://mytonwallet/./src/components/main/sections/Actions/BottomBar.module.scss?e839","webpack://mytonwallet/./src/components/main/sections/Actions/BottomBar.tsx","webpack://mytonwallet/./src/components/mediaViewer/MediaViewer.module.scss?afa2","webpack://mytonwallet/./src/components/mediaViewer/helpers/ghostAnimation.ts","webpack://mytonwallet/./src/components/ui/ShowTransition.tsx","webpack://mytonwallet/./src/components/mediaViewer/Actions.tsx","webpack://mytonwallet/./src/components/mediaViewer/MediaInfo.tsx","webpack://mytonwallet/./src/hooks/useSignalRef.ts","webpack://mytonwallet/./src/components/mediaViewer/hooks/useZoomChangeSignal.ts","webpack://mytonwallet/./src/components/mediaViewer/Media.tsx","webpack://mytonwallet/./src/components/mediaViewer/Slides.tsx","webpack://mytonwallet/./src/components/mediaViewer/MediaViewer.tsx","webpack://mytonwallet/./src/util/isElementInViewport.ts","webpack://mytonwallet/./src/components/mintCard/CardPros.module.scss?2970","webpack://mytonwallet/./src/components/mintCard/CardPros.tsx","webpack://mytonwallet/./src/components/mintCard/MintCardModal.module.scss?777c","webpack://mytonwallet/./src/components/mintCard/CardRoster.tsx","webpack://mytonwallet/./src/components/mintCard/MintCardModal.tsx","webpack://mytonwallet/./src/components/ui/Switcher.tsx","webpack://mytonwallet/./src/components/ui/Switcher.module.scss?8b13","webpack://mytonwallet/./src/components/settings/biometrics/Biometrics.module.scss?14ce","webpack://mytonwallet/./src/components/settings/biometrics/TurnOff.tsx","webpack://mytonwallet/./src/components/settings/biometrics/TurnOffWarning.tsx","webpack://mytonwallet/./src/components/settings/biometrics/TurnOn.tsx","webpack://mytonwallet/./src/components/settings/biometrics/Biometrics.tsx","webpack://mytonwallet/./src/components/settings/biometrics/NativeBiometricsTurnOn.tsx","webpack://mytonwallet/./src/components/settings/SettingsAppearance.tsx","webpack://mytonwallet/./src/util/getAccentColorsFromNfts.ts","webpack://mytonwallet/./src/components/main/modals/DeleteTokenModal.tsx","webpack://mytonwallet/./src/components/main/modals/DeleteTokenModal.module.scss?34ea","webpack://mytonwallet/./src/components/ui/Draggable.tsx","webpack://mytonwallet/./src/components/ui/Draggable.module.scss?804f","webpack://mytonwallet/./src/components/settings/SettingsTokens.tsx","webpack://mytonwallet/./src/components/settings/SettingsAssets.tsx","webpack://mytonwallet/./src/components/main/modals/DisconnectDappModal.module.scss?141f","webpack://mytonwallet/./src/components/main/modals/DisconnectDappModal.tsx","webpack://mytonwallet/./src/components/settings/SettingsDapps.tsx","webpack://mytonwallet/./src/util/getBuildPlatform.ts","webpack://mytonwallet/./src/components/settings/SettingsDeveloperOptions.tsx","webpack://mytonwallet/./src/components/settings/SettingsDisclaimer.tsx","webpack://mytonwallet/./src/components/settings/nfts/HiddenByUserNft.tsx","webpack://mytonwallet/./src/components/settings/nfts/ProbablyScamNft.tsx","webpack://mytonwallet/./src/components/settings/SettingsHiddenNfts.tsx","webpack://mytonwallet/./src/components/settings/SettingsLanguage.tsx","webpack://mytonwallet/./src/components/settings/SettingsPushNotifications.tsx","webpack://mytonwallet/./node_modules/capacitor-native-settings/dist/esm/definitions.js","webpack://mytonwallet/./node_modules/capacitor-native-settings/dist/esm/index.js","webpack://mytonwallet/./src/components/settings/backup/Backup.tsx","webpack://mytonwallet/./src/components/common/backup/PrivateKeyContent.tsx","webpack://mytonwallet/./src/components/settings/backup/Backup.module.scss?612f","webpack://mytonwallet/./src/components/settings/backup/BackupPrivateKey.tsx","webpack://mytonwallet/./src/components/settings/backup/BackupSafetyRules.tsx","webpack://mytonwallet/./src/components/settings/backup/BackupSecretWords.tsx","webpack://mytonwallet/./src/components/settings/biometrics/NativeBiometricsToggle.tsx","webpack://mytonwallet/./src/components/settings/SettingsSecurity.tsx","webpack://mytonwallet/./src/components/settings/SettingsTokenList.tsx","webpack://mytonwallet/./src/components/settings/SettingsWalletVersion.tsx","webpack://mytonwallet/./src/components/settings/Settings.tsx","webpack://mytonwallet/./src/components/settings/SettingsModal.tsx","webpack://mytonwallet/./src/components/swap/SwapBlockchain.tsx","webpack://mytonwallet/./src/components/common/SwapResult.module.scss?5045","webpack://mytonwallet/./src/components/common/SwapResult.tsx","webpack://mytonwallet/./src/components/swap/SwapComplete.tsx","webpack://mytonwallet/./src/components/swap/SwapPassword.tsx","webpack://mytonwallet/./src/components/swap/SwapWaitTokens.tsx","webpack://mytonwallet/./src/components/swap/SwapModal.tsx","webpack://mytonwallet/./src/components/transfer/TransferComplete.tsx","webpack://mytonwallet/./src/components/ui/AmountWithFeeTextField.tsx","webpack://mytonwallet/./src/components/ui/AmountWithFeeTextField.module.scss?aa7f","webpack://mytonwallet/./src/components/transfer/TransferConfirm.tsx","webpack://mytonwallet/./src/components/transfer/TransferMultiNftProcess.tsx","webpack://mytonwallet/./src/components/transfer/TransferPassword.tsx","webpack://mytonwallet/./src/components/transfer/TransferModal.tsx","webpack://mytonwallet/./src/components/ui/ConfettiContainer.tsx","webpack://mytonwallet/./src/components/ui/ConfettiContainer.module.scss?8c12","webpack://mytonwallet/./src/components/ui/LoadingOverlay.tsx","webpack://mytonwallet/./src/components/ui/LoadingOverlay.module.scss?7efd","webpack://mytonwallet/./src/components/App.module.scss?a9d3","webpack://mytonwallet/./src/components/App.tsx","webpack://mytonwallet/./src/util/electron.ts","webpack://mytonwallet/./src/index.tsx","webpack://mytonwallet/./src/util/fonts.ts"],"sourcesContent":["var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"mytonwallet:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","/**\n * @since 0.0.1\n */\nexport var BarcodeFormat;\n(function (BarcodeFormat) {\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Aztec\"] = \"AZTEC\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Codabar\"] = \"CODABAR\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Code39\"] = \"CODE_39\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Code93\"] = \"CODE_93\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Code128\"] = \"CODE_128\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"DataMatrix\"] = \"DATA_MATRIX\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Ean8\"] = \"EAN_8\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Ean13\"] = \"EAN_13\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Itf\"] = \"ITF\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Pdf417\"] = \"PDF_417\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"QrCode\"] = \"QR_CODE\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"UpcA\"] = \"UPC_A\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"UpcE\"] = \"UPC_E\";\n})(BarcodeFormat || (BarcodeFormat = {}));\n/**\n * @since 0.0.1\n */\nexport var BarcodeValueType;\n(function (BarcodeValueType) {\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"CalendarEvent\"] = \"CALENDAR_EVENT\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"ContactInfo\"] = \"CONTACT_INFO\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"DriversLicense\"] = \"DRIVERS_LICENSE\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Email\"] = \"EMAIL\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Geo\"] = \"GEO\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Isbn\"] = \"ISBN\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Phone\"] = \"PHONE\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Product\"] = \"PRODUCT\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Sms\"] = \"SMS\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Text\"] = \"TEXT\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Url\"] = \"URL\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Wifi\"] = \"WIFI\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Unknown\"] = \"UNKNOWN\";\n})(BarcodeValueType || (BarcodeValueType = {}));\n/**\n * @since 7.0.0\n */\nexport var Resolution;\n(function (Resolution) {\n    /**\n     * @since 7.0.0\n     */\n    Resolution[Resolution[\"640x480\"] = 0] = \"640x480\";\n    /**\n     * @since 7.0.0\n     */\n    Resolution[Resolution[\"1280x720\"] = 1] = \"1280x720\";\n    /**\n     * @since 7.0.0\n     */\n    Resolution[Resolution[\"1920x1080\"] = 2] = \"1920x1080\";\n    /**\n     * @since 7.2.0\n     */\n    Resolution[Resolution[\"3840x2160\"] = 3] = \"3840x2160\";\n})(Resolution || (Resolution = {}));\n/**\n * @since 0.0.1\n */\nexport var LensFacing;\n(function (LensFacing) {\n    /**\n     * @since 0.0.1\n     */\n    LensFacing[\"Front\"] = \"FRONT\";\n    /**\n     * @since 0.0.1\n     */\n    LensFacing[\"Back\"] = \"BACK\";\n})(LensFacing || (LensFacing = {}));\n/**\n * @since 5.1.0\n */\nexport var GoogleBarcodeScannerModuleInstallState;\n(function (GoogleBarcodeScannerModuleInstallState) {\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"PENDING\"] = 1] = \"PENDING\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"DOWNLOADING\"] = 2] = \"DOWNLOADING\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"CANCELED\"] = 3] = \"CANCELED\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"COMPLETED\"] = 4] = \"COMPLETED\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"FAILED\"] = 5] = \"FAILED\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"INSTALLING\"] = 6] = \"INSTALLING\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"DOWNLOAD_PAUSED\"] = 7] = \"DOWNLOAD_PAUSED\";\n})(GoogleBarcodeScannerModuleInstallState || (GoogleBarcodeScannerModuleInstallState = {}));\n/**\n * @since 7.0.0\n */\nexport var AddressType;\n(function (AddressType) {\n    /**\n     * @since 7.0.0\n     */\n    AddressType[AddressType[\"HOME\"] = 0] = \"HOME\";\n    /**\n     * @since 7.0.0\n     */\n    AddressType[AddressType[\"UNKNOWN\"] = 1] = \"UNKNOWN\";\n    /**\n     * @since 7.0.0\n     */\n    AddressType[AddressType[\"WORK\"] = 2] = \"WORK\";\n})(AddressType || (AddressType = {}));\n/**\n * @since 7.0.0\n */\nexport var EmailFormatType;\n(function (EmailFormatType) {\n    /**\n     * @since 7.0.0\n     */\n    EmailFormatType[EmailFormatType[\"HOME\"] = 0] = \"HOME\";\n    /**\n     * @since 7.0.0\n     */\n    EmailFormatType[EmailFormatType[\"UNKNOWN\"] = 1] = \"UNKNOWN\";\n    /**\n     * @since 7.0.0\n     */\n    EmailFormatType[EmailFormatType[\"WORK\"] = 2] = \"WORK\";\n})(EmailFormatType || (EmailFormatType = {}));\n/**\n * @since 7.0.0\n */\nexport var PhoneFormatType;\n(function (PhoneFormatType) {\n    /**\n     * @since 7.0.0\n     */\n    PhoneFormatType[PhoneFormatType[\"FAX\"] = 0] = \"FAX\";\n    /**\n     * @since 7.0.0\n     */\n    PhoneFormatType[PhoneFormatType[\"HOME\"] = 1] = \"HOME\";\n    /**\n     * @since 7.0.0\n     */\n    PhoneFormatType[PhoneFormatType[\"MOBILE\"] = 2] = \"MOBILE\";\n    /**\n     * @since 7.0.0\n     */\n    PhoneFormatType[PhoneFormatType[\"UNKNOWN\"] = 3] = \"UNKNOWN\";\n    /**\n     * @since 7.0.0\n     */\n    PhoneFormatType[PhoneFormatType[\"WORK\"] = 4] = \"WORK\";\n})(PhoneFormatType || (PhoneFormatType = {}));\n/**\n * @since 7.0.0\n */\nexport var WifiEncryptionType;\n(function (WifiEncryptionType) {\n    /**\n     * @since 7.0.0\n     */\n    WifiEncryptionType[WifiEncryptionType[\"OPEN\"] = 1] = \"OPEN\";\n    /**\n     * @since 7.0.0\n     */\n    WifiEncryptionType[WifiEncryptionType[\"WEP\"] = 2] = \"WEP\";\n    /**\n     * @since 7.0.0\n     */\n    WifiEncryptionType[WifiEncryptionType[\"WPA\"] = 3] = \"WPA\";\n})(WifiEncryptionType || (WifiEncryptionType = {}));\n//# sourceMappingURL=definitions.js.map","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","import { TONCOIN } from '../config';\nimport { Big } from '../lib/big.js';\n\nBig.RM = 0; // RoundDown\nBig.NE = -100000; // Disable exponential form\nBig.PE = 100000; // Disable exponential form\n\nconst ten = Big(10);\n\nexport function fromDecimal(value: string | number, decimals?: number) {\n  return BigInt(Big(value).mul(ten.pow(decimals ?? TONCOIN.decimals)).round().toString());\n}\n\nexport function toDecimal(value: bigint | number, decimals?: number, noFloor = false) {\n  return toBig(value, decimals ?? TONCOIN.decimals, noFloor).toString();\n}\n\nexport function toBig(value: bigint | number, decimals: number = TONCOIN.decimals, noFloor = false) {\n  return Big(value.toString()).div(ten.pow(decimals)).round(decimals, noFloor ? Big.roundHalfUp : undefined);\n}\n\nexport function roundDecimal(value: string, decimals: number) {\n  return Big(value).round(decimals).toString();\n}\n","import { ONE_TON } from '../config';\nimport { fromDecimal } from './decimals';\nimport { randomBytes } from './random';\n\nexport const BIGINT_PREFIX = 'bigint:';\n\nexport function bigintReviver(this: any, key: string, value: any) {\n  if (typeof value === 'string' && value.startsWith(BIGINT_PREFIX)) {\n    return BigInt(value.slice(7));\n  }\n  return value;\n}\n\nexport function bigintAbs(value: bigint) {\n  return value === -0n || value < 0n ? -value : value;\n}\n\nexport function bigintSum(values: bigint[]) {\n  let result = 0n;\n  for (const value of values) result += value;\n  return result;\n}\n\nexport function bigintDivideToNumber(value: bigint, num: number) {\n  return (value * ONE_TON) / fromDecimal(num);\n}\n\nexport function bigintMultiplyToNumber(value: bigint, num: number) {\n  return (value * fromDecimal(num)) / ONE_TON;\n}\n\nexport function bigintRandom(bytes: number) {\n  let value = BigInt(0);\n  for (const randomNumber of randomBytes(bytes)) {\n    const randomBigInt = BigInt(randomNumber);\n    value = (value << BigInt(8)) + randomBigInt;\n  }\n  return value;\n}\n\nexport function bigintCountBits(value: bigint) {\n  const binaryString = value.toString(2);\n  return binaryString.length;\n}\n\nexport function bigintMax(value0: bigint, value1: bigint) {\n  return value0 > value1 ? value0 : value1;\n}\n\nexport function bigintMin(value0: bigint, value1: bigint) {\n  return value0 < value1 ? value0 : value1;\n}\n\nexport function bigintMultiplePercent(value: bigint, percent: number) {\n  return (value * fromDecimal(percent / 100)) / ONE_TON;\n}\n","import { IS_EXTENSION } from '../config';\n\nexport const IS_EXTENSION_PAGE_SCRIPT = IS_EXTENSION\n  && !['chrome-extension:', 'moz-extension:'].includes(self.location.protocol);\n","import { APP_ENV, DEBUG_ALERT_MSG } from '../config';\nimport { SECOND } from './dateFormat';\nimport { IS_EXTENSION_PAGE_SCRIPT } from './environment';\nimport { logDebugError } from './logs';\nimport { throttle } from './schedulers';\n\nconst shouldShowAlert = (APP_ENV === 'development' || APP_ENV === 'staging')\n  && typeof window === 'object'\n  && !IS_EXTENSION_PAGE_SCRIPT;\n\nconst throttledAlert = throttle((message) => window.alert(message), 10 * SECOND);\n\nself.addEventListener('error', handleErrorEvent);\nself.addEventListener('unhandledrejection', handleErrorEvent);\n\nfunction handleErrorEvent(e: ErrorEvent | PromiseRejectionEvent) {\n  // https://stackoverflow.com/questions/49384120/resizeobserver-loop-limit-exceeded\n  if (e instanceof ErrorEvent && e.message === 'ResizeObserver loop limit exceeded') {\n    return;\n  }\n\n  e.preventDefault();\n\n  handleError(e instanceof ErrorEvent ? (e.error || e.message) : e.reason);\n}\n\nexport function handleError(err: Error | string) {\n  logDebugError('handleError', err);\n\n  const message = typeof err === 'string' ? err : err.message;\n  const stack = typeof err === 'object' ? err.stack : undefined;\n\n  if (message.endsWith('Failed to import rlottie-wasm.js')) {\n    return;\n  }\n\n  if (shouldShowAlert) {\n    throttledAlert(`${DEBUG_ALERT_MSG}\\n\\n${(message) || err}\\n${stack}`);\n  }\n}\n","import type { ApiTonWalletVersion, ContractInfo, ContractName } from './types';\n\nimport { JettonStakingGas } from './contracts/JettonStaking/imports/constants';\n\nexport const TON_BIP39_PATH = 'm/44\\'/607\\'/0\\'';\n\nexport const ONE_TON = 1_000_000_000n;\nexport const TOKEN_TRANSFER_AMOUNT = 50000000n; // 0.05 TON\nexport const TINY_TOKEN_TRANSFER_AMOUNT = 18000000n; // 0.018 TON\nexport const TOKEN_TRANSFER_REAL_AMOUNT = 32100000n; // 0.0321 TON\nexport const TINY_TOKEN_TRANSFER_REAL_AMOUNT = 8000000n; // 0.008 TON\nexport const TINIEST_TOKEN_TRANSFER_REAL_AMOUNT = 3000000n; // 0.003 TON\nexport const TOKEN_TRANSFER_FORWARD_AMOUNT = 1n; // 0.000000001 TON\nexport const CLAIM_MINTLESS_AMOUNT = 20000000n; // 0.02 TON\n\n/** The amount that MyTonWallet attaches to NFT transfers */\nexport const NFT_TRANSFER_AMOUNT = 100000000n; // 0.1 TON\nexport const NFT_TRANSFER_REAL_AMOUNT = 5000000n; // 0.005 TON\nexport const NFT_TRANSFER_FORWARD_AMOUNT = 1n; // 0.000000001 TON\n/**\n * When the NFT contract handles the payload we send, it simply adds its data to the payload. If the resulting payload\n * size becomes greater than the cell capacity, the contract fails to send the NFT. To avoid that, we keep some free\n * space in the payload cell we send. This constant is the size of the free space in bits.\n */\nexport const NFT_PAYLOAD_SAFE_MARGIN = 14 * 8;\n\nexport const TON_GAS = {\n  stakeNominators: ONE_TON,\n  unstakeNominators: ONE_TON,\n  stakeLiquid: ONE_TON,\n  unstakeLiquid: ONE_TON,\n  stakeJettonsForward: JettonStakingGas.STAKE_JETTONS,\n  stakeJettons: JettonStakingGas.STAKE_JETTONS + TOKEN_TRANSFER_AMOUNT,\n  unstakeJettons: JettonStakingGas.UNSTAKE_JETTONS,\n  claimJettons: JettonStakingGas.JETTON_TRANSFER + JettonStakingGas.SIMPLE_UPDATE_REQUEST,\n  changeDns: 15_000_000n, // 0.015 TON\n  stakeEthena: TOKEN_TRANSFER_AMOUNT + 100_000_000n, // 0.15 TON\n  stakeEthenaForward: 100_000_000n, // 0.1 TON\n  unstakeEthena: TOKEN_TRANSFER_AMOUNT + 100_000_000n, // 0.15 TON\n  unstakeEthenaForward: 100_000_000n, // 0.1 TON\n  unstakeEthenaLocked: 150_000_000n, // 0.15 TON\n  unstakeEthenaLockedForward: 70_000_000n, // 0.07 TON\n} as const;\n\nexport const TON_GAS_REAL = {\n  stakeNominators: 1_000_052_853n,\n  unstakeNominators: 148_337_433n,\n  stakeLiquid: 20_251_387n,\n  unstakeLiquid: 18_625_604n,\n  stakeJettons: 74_879_996n,\n  unstakeJettons: 59_971_662n,\n  claimJettons: 57_053_859n,\n  stakeEthena: 116_690_790n,\n  unstakeEthena: 113_210_330n,\n  unstakeEthenaLocked: 37_612_000n,\n};\n\nexport const STAKE_COMMENT = 'd';\nexport const UNSTAKE_COMMENT = 'w';\n\nexport const ATTEMPTS = 5;\n\nexport const DEFAULT_DECIMALS = 9;\nexport const DEFAULT_IS_BOUNCEABLE = true;\nexport const WALLET_IS_BOUNCEABLE = false;\n\n// Fee may change, so we add 5% for more reliability. This is only safe for low-fee blockchains such as TON.\nexport const FEE_FACTOR = 1.05;\n\nexport const ALL_WALLET_VERSIONS: ApiTonWalletVersion[] = [\n  'simpleR1', 'simpleR2', 'simpleR3', 'v2R1', 'v2R2', 'v3R1', 'v3R2', 'v4R2', 'W5',\n];\n\nexport const OUR_FEE_PAYLOAD_BOC = 'te6cckEBAQEABgAACE0jhUPUcYAL';\n\nexport const RAW_ADDRESS_LENGTH = 66;\n\nexport enum Workchain {\n  MasterChain = -1,\n  BaseChain = 0,\n}\n\nexport const WORKCHAIN = Workchain.BaseChain;\nexport const TRANSFER_TIMEOUT_SEC = 600; // 10 min.\n\nexport const DEFAULT_MAX_MESSAGES = 4;\nexport const LEDGER_MAX_MESSAGES = 1;\nexport const W5_MAX_MESSAGES = 255;\n\nexport enum OpCode {\n  Comment = 0,\n  Encrypted = 0x2167da4b,\n  OurFee = 0x4d238543,\n  Bounced = 0xffffffff,\n}\n\nexport enum JettonOpCode {\n  Transfer = 0xf8a7ea5,\n  TransferNotification = 0x7362d09c,\n  InternalTransfer = 0x178d4519,\n  Excesses = 0xd53276db,\n  Burn = 0x595f07bc,\n  BurnNotification = 0x7bdd97de,\n}\n\nexport enum NftOpCode {\n  TransferOwnership = 0x5fcc3d14,\n  OwnershipAssigned = 0x05138d91,\n  Excesses = 0xd53276db,\n}\n\nexport enum LiquidStakingOpCode {\n  // Pool\n  RequestLoan = 0xe642c965,\n  LoanRepayment = 0xdfdca27b,\n  Deposit = 0x47d54391,\n  Withdraw = 0x319B0CDC,\n  Withdrawal = 0x0a77535c,\n  DeployController = 0xb27edcad,\n  Touch = 0x4bc7c2df,\n  Donate = 0x73affe21,\n  // NFT\n  DistributedAsset = 0xdb3b8abd,\n  // Jetton\n  Vote = 0x69fb306c,\n}\n\nexport enum JettonStakingOpCode {\n  UnstakeRequest = 0x499a9262,\n  ClaimRewards = 0x78d9f109,\n}\n\nexport enum VestingV1OpCode {\n  AddWhitelist = 0x7258a69b,\n}\n\nexport enum SingleNominatorOpCode {\n  Withdraw = 0x1000,\n  ChangeValidator = 0x1001,\n}\n\nexport enum DnsOpCode {\n  ChangeRecord = 0x4eb1f0f9,\n}\n\nexport enum TeleitemOpCode {\n  Ok = 0xa37a0983,\n}\n\nexport enum OtherOpCode {\n  TokenBridgePaySwap = 0x8,\n}\n\nexport enum ContractType {\n  Wallet = 'wallet',\n  Staking = 'staking',\n}\n\nexport enum DnsCategory {\n  DnsNextResolver = 'dns_next_resolver',\n  Wallet = 'wallet',\n  Site = 'site',\n  BagId = 'storage',\n  Unknown = 'unknown',\n}\n\nexport const EXCESS_OP_CODES = [\n  JettonOpCode.Excesses,\n  TeleitemOpCode.Ok,\n];\n\nexport const DNS_CATEGORY_HASH_MAP = {\n  dns_next_resolver: '19f02441ee588fdb26ee24b2568dd035c3c9206e11ab979be62e55558a1d17ff',\n  wallet: 'e8d44050873dba865aa7c170ab4cce64d90839a34dcfd6cf71d14e0205443b1b',\n  site: 'fbae041b02c41ed0fd8a4efb039bc780dd6af4a1f0c420f42561ae705dda43fe',\n  storage: '49a25f9feefaffecad0fcd30c50dc9331cff8b55ece53def6285c09e17e6f5d7',\n} as const;\n\nexport const KnownContracts: Record<ContractName, ContractInfo> = {\n  simpleR1: {\n    name: 'simpleR1',\n    hash: '3232dc55b02b3d2a9485adc151cf29c50b94c374d3571cb59390d761b87af8bd',\n    type: ContractType.Wallet,\n  },\n  simpleR2: {\n    name: 'simpleR2',\n    hash: '672ce2b01d2fd487a5e0528611e7e4fc11867148cc13ff772bd773b72fb368df',\n    type: ContractType.Wallet,\n  },\n  simpleR3: {\n    name: 'simpleR3',\n    hash: 'd95417233f66ae218317f533630cbbddc677d6d893d5722be6947c8fad8e9d52',\n    type: ContractType.Wallet,\n  },\n  v2R1: {\n    name: 'v2R1',\n    hash: 'fb3bd539b7e50166f1cfdc0bbd298b1c88f6b261fe5ee61343ea47ab4b256029',\n    type: ContractType.Wallet,\n  },\n  v2R2: {\n    name: 'v2R2',\n    hash: 'b584b6106753b7f34709df505be603e463a44ff6a85adf7fec4e26453c325983',\n    type: ContractType.Wallet,\n  },\n  v3R1: {\n    name: 'v3R1',\n    hash: '11d123ed5c2055128e75a9ef4cf1e837e6d14a9c079c39939885c78dc13626e6',\n    type: ContractType.Wallet,\n  },\n  v3R2: {\n    name: 'v3R2',\n    hash: 'df7bf014ee7ac0c38da19ef1b7fa054e2cc7a4513df1f1aa295109cf3606ac14',\n    type: ContractType.Wallet,\n  },\n  v4R1: {\n    name: 'v4R1',\n    hash: '1bc0dfa40956c911616f8a5db09ecc217601bae48d7d3f9311562c5afcb66dcf',\n    type: ContractType.Wallet,\n  },\n  v4R2: {\n    name: 'v4R2',\n    hash: '5659ce2300f4a09a37b0bdee41246ded52474f032c1d6ffce0d7d31b18b7b2b1',\n    type: ContractType.Wallet,\n  },\n  W5: {\n    name: 'W5',\n    hash: '7e94eaaeaaa423b9396e79747038c42edc4fe98dce65094071f0e0ad2df22fd5',\n    type: ContractType.Wallet,\n  },\n  highloadV2: {\n    name: 'highloadV2',\n    hash: 'fcd7d1f3b3847f0b9bd44bc64a2256c03450979dd1646a24fbc874b075392d6e',\n    type: ContractType.Wallet,\n  },\n  nominatorPool: {\n    name: 'nominatorPool',\n    hash: '26faa2d0fd2a8197ea36ded8dc50ad081cce5244207e9b05c08c1bb655527bff',\n    type: ContractType.Staking,\n  },\n  multisig: {\n    name: 'multisig',\n    hash: '45d890485cdd6b152bcbbe3fb2e16d2df82f6da840440a5b9f34ea13cb0b92d2',\n    type: ContractType.Wallet,\n  },\n  multisigV2: {\n    name: 'multisigV2',\n    hash: 'eb1323c5544d5bf26248dc427d108d722d5c2922dd97dd0bdf903c4cea73ca97',\n    type: ContractType.Wallet,\n  },\n  vesting: {\n    name: 'vesting',\n    hash: '69dc931958f7aa203c4a7bfcf263d25d2d828d573184b542a65dd55c8398ad83',\n    type: ContractType.Wallet,\n  },\n  multisigNew: {\n    name: 'multisigNew',\n    hash: '7cb3678880388acff45d74b2e7e7544caa8039d20b49f57c75b53c051b6fa30f',\n    type: ContractType.Wallet,\n  },\n  dedustPool: {\n    name: 'dedustPool',\n    hash: 'f216ded2b43d32e2d487db6fa6e4d2387f0ef1d7b53ec1ad85f0b4feb8e4ed62',\n    isSwapAllowed: true,\n  },\n  dedustVaultNative: {\n    name: 'dedustVaultNative',\n    hash: '64a42ad66688097422901ae6188670f0d6292ad3bdb4139289666f24187e86cb',\n    isSwapAllowed: true,\n  },\n  // Example: https://tonscan.org/address/EQAYqo4u7VF0fa4DPAebk4g9lBytj2VFny7pzXR0trjtXQaO\n  dedustVaultJetton: {\n    name: 'dedustVaultJetton',\n    hash: '5bc82f0c5972ccc6732e98cbe31ea4795da818f9e06c991331568182a8362307',\n    isSwapAllowed: true,\n  },\n  stonPtonWallet: {\n    name: 'stonPtonWallet',\n    hash: '6ccbf71a3ed9c7355f84a698a44a7406574bfb8aa34d4bbd86ab75ee9c994880',\n    isSwapAllowed: true,\n  },\n  stonRouter: {\n    name: 'stonRouter',\n    hash: '14ce618a0e9a94adc99fa6e975219ddd675425b30dfa9728f98714c8dc55f9da',\n    isSwapAllowed: true,\n  },\n  stonRouterV2_1: {\n    name: 'stonRouterV2_1',\n    hash: 'd61cb7fb7bee0cc414286a482fccdec53c3f8717e4aae4fc362d98ab6254e6cd',\n    isSwapAllowed: true,\n  },\n  stonPoolV2_1: {\n    name: 'stonPoolV2_1',\n    hash: '16cc513c380e329f45d54f294787e2030e289799eca138961c1cd7e26e882c7c',\n    isSwapAllowed: true,\n  },\n  // Example: https://tonscan.org/address/EQCS4UEa5UaJLzOyyKieqQOQ2P9M-7kXpkO5HnP3Bv250cN3\n  stonRouterV2_2: {\n    name: 'stonRouterV2_2',\n    hash: '094b5084111addda1b6fac7007c8a8f85ff4ccc63475815ab3dfa3b5b4c6b102',\n    isSwapAllowed: true,\n  },\n  // Example: https://tonscan.org/address/EQBSNX_5mSikBVttWhIaIb0f8jJU7fL6kvyyFVppd7dWRO6M\n  stonRouterV2_2_alt: {\n    name: 'stonRouterV2_2_alt',\n    hash: 'd41e7563afa05ee008655e190920d3f53de9cab4c2d4e10ee1d0f158e95e52e5',\n    isSwapAllowed: true,\n  },\n  stonPoolV2_2: {\n    name: 'stonPoolV2_2',\n    hash: '11eaf6db706e63adf9327897aaa845c77a631856abfc14375837f19b617cacb4',\n    isSwapAllowed: true,\n  },\n  // Example: https://tonscan.org/address/EQBiLHuQjDj4fNyCD7Ch5HwpNGldlb5g-LMwQ1kStQ4NM5kv\n  stonPtonWalletV2: {\n    name: 'stonPtonWalletV2',\n    hash: '2761042202032258de9eb1b672e1ec2e4f13b2af00700195801ada33f7ced1b6',\n    isSwapAllowed: true,\n  },\n};\n","import { decodeExtensionMessage, encodeExtensionMessage } from './extensionMessageSerializer';\nimport generateUniqueId from './generateUniqueId';\nimport { logDebugError } from './logs';\n\nexport interface CancellableCallback {\n  (\n    ...args: any[]\n  ): void;\n\n  isCanceled?: boolean;\n  acceptsBuffer?: boolean;\n}\n\ntype InitData = {\n  channel?: string;\n  type: 'init';\n  args: any[];\n};\n\ntype CallMethodData = {\n  channel?: string;\n  type: 'callMethod';\n  messageId?: string;\n  name: string;\n  args: any;\n  withCallback?: boolean;\n};\n\nexport type OriginMessageData = InitData | CallMethodData | {\n  channel?: string;\n  type: 'cancelProgress';\n  messageId: string;\n};\n\nexport interface OriginMessageEvent extends MessageEvent {\n  data: OriginMessageData;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\nexport type ApiUpdate = { type: string } & any;\n\nexport type WorkerMessageData = {\n  channel?: string;\n  type: 'update';\n  update: ApiUpdate;\n} | {\n  channel?: string;\n  type: 'methodResponse';\n  messageId: string;\n  response?: any;\n  error?: { message: string };\n} | {\n  channel?: string;\n  type: 'methodCallback';\n  messageId: string;\n  callbackArgs: any[];\n} | {\n  channel?: string;\n  type: 'unhandledError';\n  error?: { message: string; stack?: string };\n};\n\nexport interface WorkerMessageEvent {\n  data: WorkerMessageData;\n}\n\ninterface RequestStates {\n  messageId: string;\n  resolve: AnyToVoidFunction;\n  reject: AnyToVoidFunction;\n  callback: AnyToVoidFunction;\n}\n\ntype InputRequestTypes = Record<string, AnyFunction>;\n\ntype Values<T> = T[keyof T];\nexport type RequestTypes<T extends InputRequestTypes> = Values<{\n  [Name in keyof (T)]: {\n    name: Name & string;\n    args: Parameters<T[Name]>;\n  }\n}>;\n\nclass ConnectorClass<T extends InputRequestTypes> {\n  private requestStates = new Map<string, RequestStates>();\n\n  private requestStatesByCallback = new Map<AnyToVoidFunction, RequestStates>();\n\n  constructor(\n    public target: Worker | Window | chrome.runtime.Port | DedicatedWorkerGlobalScope,\n    private onUpdate?: (update: ApiUpdate) => void,\n    private channel?: string,\n    private shouldUseJson?: boolean,\n    private targetOrigin = '*',\n  ) {\n  }\n\n  public destroy() {\n  }\n\n  init(...args: any[]) {\n    this.postMessage({\n      type: 'init',\n      args,\n    });\n  }\n\n  request(messageData: RequestTypes<T>) {\n    const { requestStates, requestStatesByCallback } = this;\n\n    const messageId = generateUniqueId();\n    const payload: CallMethodData = {\n      type: 'callMethod',\n      messageId,\n      ...messageData,\n    };\n\n    const requestState = { messageId } as RequestStates;\n\n    // Re-wrap type because of `postMessage`\n    const promise = new Promise<any>((resolve, reject) => {\n      Object.assign(requestState, { resolve, reject });\n    });\n\n    if (typeof payload.args[payload.args.length - 1] === 'function') {\n      payload.withCallback = true;\n\n      const callback = payload.args.pop() as AnyToVoidFunction;\n      requestState.callback = callback;\n      requestStatesByCallback.set(callback, requestState);\n    }\n\n    requestStates.set(messageId, requestState);\n    promise\n      .catch(() => undefined)\n      .finally(() => {\n        requestStates.delete(messageId);\n\n        if (requestState.callback) {\n          requestStatesByCallback.delete(requestState.callback);\n        }\n      });\n\n    this.postMessage(payload);\n\n    return promise;\n  }\n\n  cancelCallback(progressCallback: CancellableCallback) {\n    progressCallback.isCanceled = true;\n\n    const { messageId } = this.requestStatesByCallback.get(progressCallback) || {};\n    if (!messageId) {\n      return;\n    }\n\n    this.postMessage({\n      type: 'cancelProgress',\n      messageId,\n    });\n  }\n\n  onMessage(data: WorkerMessageData | string) {\n    try {\n      data = decodeExtensionMessage(data);\n    } catch (err: any) {\n      logDebugError('PostMessageConnector: Failed to parse message', err);\n      return;\n    }\n\n    const { requestStates, channel } = this;\n    if (data.channel !== channel) {\n      return;\n    }\n\n    if (data.type === 'update' && this.onUpdate) {\n      this.onUpdate(data.update);\n    }\n    if (data.type === 'methodResponse') {\n      const requestState = requestStates.get(data.messageId);\n      if (requestState) {\n        if (data.error) {\n          requestState.reject(data.error);\n        } else {\n          requestState.resolve(data.response);\n        }\n      }\n    } else if (data.type === 'methodCallback') {\n      const requestState = requestStates.get(data.messageId);\n      requestState?.callback?.(...data.callbackArgs);\n    } else if (data.type === 'unhandledError') {\n      const error = new Error(data.error?.message);\n      if (data.error?.stack) {\n        error.stack = data.error.stack;\n      }\n      throw error;\n    }\n  }\n\n  private postMessage(data: OriginMessageData) {\n    data.channel = this.channel;\n\n    let rawData: OriginMessageData | string = data;\n    if (this.shouldUseJson) {\n      rawData = encodeExtensionMessage(data);\n    }\n\n    if ('open' in this.target) { // Is Window\n      this.target.postMessage(rawData, this.targetOrigin);\n    } else {\n      this.target.postMessage(rawData);\n    }\n  }\n}\n\n/**\n * Allows to call functions, provided by another messenger (a window, a worker), in this messenger.\n * The other messenger must provide the functions using `createPostMessageInterface`.\n */\nexport function createConnector<T extends InputRequestTypes>(\n  worker: Worker | Window | DedicatedWorkerGlobalScope,\n  onUpdate?: (update: ApiUpdate) => void,\n  channel?: string,\n  targetOrigin?: string,\n) {\n  const connector = new ConnectorClass<T>(worker, onUpdate, channel, undefined, targetOrigin);\n\n  function handleMessage({ data }: WorkerMessageEvent | MessageEvent) {\n    connector.onMessage(data);\n  }\n\n  worker.addEventListener('message', handleMessage as any); // TS weirdly complains here\n\n  connector.destroy = () => {\n    worker.removeEventListener('message', handleMessage as any);\n  };\n\n  return connector;\n}\n\n/**\n * Allows to call functions, provided by the extension service worker, in this window.\n * The service worker must provide the functions using `createExtensionInterface`.\n */\nexport function createExtensionConnector(\n  name: string,\n  onUpdate?: (update: ApiUpdate) => void,\n  getInitArgs?: () => any,\n  channel?: string,\n) {\n  const connector = new ConnectorClass(connect(), onUpdate, channel, true);\n\n  function connect() {\n    const port = self.chrome.runtime.connect({ name });\n\n    port.onMessage.addListener((data: string | WorkerMessageData) => {\n      connector.onMessage(data);\n    });\n\n    // For some reason port can suddenly get disconnected\n    port.onDisconnect.addListener(() => {\n      connector.target = connect();\n      connector.init(getInitArgs?.());\n    });\n\n    return port;\n  }\n\n  connector.init(getInitArgs?.());\n\n  return connector;\n}\n\n/**\n * Allows to call functions, provided by a window, in this service worker.\n * The window must provide the functions using `createReverseExtensionInterface`.\n *\n * Warning: the connector is able to send messages only when the popup window is open.\n */\nexport function createReverseExtensionConnector(portName: string) {\n  const nullWorker = {\n    postMessage() {\n      throw new Error('The popup window is not connected');\n    },\n  } as Pick<Worker, 'postMessage'> as Worker;\n\n  const connector = new ConnectorClass(nullWorker, undefined, undefined, true);\n\n  chrome.runtime.onConnect.addListener((port) => {\n    if (port.name !== portName) {\n      return;\n    }\n\n    connector.target = port;\n\n    port.onMessage.addListener((data: string | WorkerMessageData) => {\n      connector.onMessage(data);\n    });\n\n    port.onDisconnect.addListener(() => {\n      connector.target = nullWorker;\n    });\n  });\n\n  return connector;\n}\n\nexport type Connector<T extends InputRequestTypes = InputRequestTypes> = ReturnType<typeof createConnector<T>>;\n","export default class Deferred<T = void> {\n  promise: Promise<T>;\n\n  reject!: (reason?: any) => void;\n\n  resolve!: (value: T | PromiseLike<T>) => void;\n\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.reject = reject;\n      this.resolve = resolve;\n    });\n  }\n\n  static resolved(): Deferred<void>;\n  static resolved<T>(value: T): Deferred<T>;\n  static resolved<T>(value?: T): Deferred<T | void> {\n    const deferred = new Deferred<T | void>();\n    deferred.resolve(value);\n    return deferred;\n  }\n}\n","import type { LangCode } from '../global/types';\nimport type { LangFn } from './langProvider';\n\nimport withCache from './withCache';\n\nexport const SECOND = 1000;\nexport const MINUTE = SECOND * 60;\nexport const HOUR = MINUTE * 60;\nexport const DAY = HOUR * 24;\nexport const YEAR = 365 * DAY;\n\nconst formatDayToStringWithCache = withCache((\n  langCode: LangCode,\n  dayStartAt: number,\n  noYear?: boolean,\n  monthFormat: 'short' | 'long' | 'numeric' | false = 'short',\n  noDay?: boolean,\n  withTime = false,\n) => {\n  return new Date(dayStartAt).toLocaleString(\n    langCode,\n    {\n      year: noYear ? undefined : 'numeric',\n      month: monthFormat || undefined,\n      day: noDay ? undefined : 'numeric',\n      hour: withTime ? 'numeric' : undefined,\n      minute: withTime ? 'numeric' : undefined,\n      hourCycle: 'h23',\n    },\n  );\n});\n\nexport function formatRelativeHumanDateTime(\n  langCode: LangCode = 'en',\n  time: number,\n) {\n  const total = time - Date.now();\n  const minutes = Math.floor((total / 1000 / 60) % 60);\n  const hours = Math.floor((total / (1000 * 3600)) % 24);\n  const days = Math.floor(total / 1000 / 3600 / 24);\n\n  const rtf = new Intl.RelativeTimeFormat(langCode, {\n    localeMatcher: 'best fit',\n    numeric: 'always',\n    style: 'long',\n  });\n\n  const result: string[] = [];\n\n  if (days > 0) {\n    const [daysPlural, daysValue] = rtf.formatToParts(days, 'day').reverse();\n    result.push(`${daysValue.value}${daysPlural.value}`.replace(' ', '\\u00A0'));\n  }\n  if (hours > 0) {\n    const [hoursPlural, hoursValue] = rtf.formatToParts(hours, 'hour').reverse();\n    result.push(`${hoursValue.value}${hoursPlural.value}`.replace(' ', '\\u00A0'));\n  }\n  if (minutes > 0) {\n    const [minutesPlural, minutesValue] = rtf.formatToParts(minutes, 'minute').reverse();\n    result.push(`${minutesValue.value}${minutesPlural.value}`.replace(' ', '\\u00A0'));\n  }\n\n  return result.join(' ');\n}\n\nexport function formatHumanDay(lang: LangFn, datetime: string | number) {\n  if (isToday(datetime)) {\n    return lang('Today');\n  }\n\n  if (isYesterday(datetime)) {\n    return lang('Yesterday');\n  }\n\n  return formatFullDay(lang.code!, datetime);\n}\n\nexport function formatFullDay(langCode: LangCode, datetime: string | number | Date) {\n  const date = new Date(datetime);\n  const dayStartAt = getDayStartAt(date);\n  const today = getDayStart(new Date());\n  const noYear = date.getFullYear() === today.getFullYear();\n\n  return formatDayToStringWithCache(langCode, dayStartAt, noYear, 'long');\n}\n\nexport function formatShortDay(langCode: LangCode, datetime: string | number | Date, withTime = false, noYear = false) {\n  const date = new Date(datetime);\n  const dayStartAt = getDayStartAt(date);\n  const today = getDayStart(new Date());\n  const todayStartAt = getDayStartAt(today);\n  const noDate = withTime && dayStartAt === todayStartAt;\n  const targetAt = withTime ? getMinuteStart(date).getTime() : dayStartAt;\n\n  noYear ||= date.getFullYear() === today.getFullYear();\n\n  return formatDayToStringWithCache(langCode, targetAt, noYear, !noDate && 'short', noDate, withTime);\n}\n\nexport function formatTime(datetime: string | number) {\n  const date = new Date(datetime);\n\n  return `${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;\n}\n\nexport function getCountDaysToDate(datetime: string | number | Date) {\n  const today = new Date();\n  const date = datetime instanceof Date ? datetime\n    : new Date(datetime);\n\n  return Math.ceil((date.getTime() - today.getTime()) / DAY);\n}\n\nexport function getDayStart(datetime: number | Date) {\n  const date = new Date(datetime);\n  date.setHours(0, 0, 0, 0);\n  return date;\n}\n\nexport function getDayStartAt(datetime: number | Date) {\n  return getDayStart(datetime).getTime();\n}\n\nexport function getMinuteStart(datetime: number | Date) {\n  const date = new Date(datetime);\n  date.setSeconds(0, 0);\n  return date;\n}\n\nfunction isToday(datetime: string | number) {\n  return getDayStartAt(new Date()) === getDayStartAt(new Date(datetime));\n}\n\nfunction isYesterday(datetime: string | number) {\n  const yesterday = new Date();\n  yesterday.setDate(yesterday.getDate() - 1);\n\n  return getDayStartAt(yesterday) === getDayStartAt(new Date(datetime));\n}\n","import type { NftItem } from 'tonapi-sdk-js';\n\nimport type { ApiTonWalletVersion } from '../chains/ton/types';\nimport type { ApiTransactionActivity } from './activity';\nimport type { ApiParsedPayload } from './payload';\nimport type { ApiSseOptions } from './storage';\n\nexport type ApiChain = 'ton' | 'tron';\nexport type ApiNetwork = 'mainnet' | 'testnet';\nexport type ApiLedgerDriver = 'HID' | 'USB';\nexport type ApiTokenType = 'lp_token';\nexport type ApiDappConnectionType = 'connect' | 'sendTransaction' | 'signData';\n\nexport interface AccountIdParsed {\n  id: number;\n  network: ApiNetwork;\n}\n\nexport interface ApiInitArgs {\n  isElectron?: boolean;\n  isNativeBottomSheet?: boolean;\n  isIosApp?: boolean;\n  isAndroidApp?: boolean;\n  referrer?: string;\n  accountIds?: string[];\n}\n\nexport interface ApiToken {\n  name: string;\n  symbol: string;\n  slug: string;\n  decimals: number;\n  chain: ApiChain;\n  type?: ApiTokenType;\n  tokenAddress?: string;\n  image?: string;\n  isPopular?: boolean;\n  keywords?: string[];\n  cmcSlug?: string;\n  color?: string;\n  isGaslessEnabled?: boolean;\n  isStarsEnabled?: boolean;\n  isTiny?: boolean;\n  customPayloadApiUrl?: string;\n  codeHash?: string;\n  /* Means the token is fetched from the backend by default and already includes price\n  and other details (`ApiTokenDetails`), so no separate requests are needed. */\n  isFromBackend?: boolean;\n}\n\nexport type ApiTokenWithPrice = ApiToken & {\n  price: number;\n  priceUsd: number;\n  percentChange24h: number;\n};\n\nexport type ApiKnownAddresses = Record<string, ApiAddressInfo>;\n\nexport interface ApiAddressInfo {\n  name?: string;\n  isScam?: boolean;\n  isMemoRequired?: boolean;\n}\n\nexport interface ApiNftSuperCollection {\n  id: string;\n  name: string;\n  icon?: 'gift';\n}\n\nexport type ApiActivityTimestamps = Record<string, number | undefined>;\nexport type ApiTransactionType = 'stake' | 'unstake' | 'unstakeRequest'\n  | 'callContract' | 'excess' | 'contractDeploy' | 'bounced'\n  | 'mint' | 'burn' | 'auctionBid' | 'nftTrade'\n  | 'dnsChangeAddress' | 'dnsChangeSite' | 'dnsChangeSubdomains' | 'dnsChangeStorage' | 'dnsDelete' | 'dnsRenew'\n  | 'liquidityDeposit' | 'liquidityWithdraw'\n  | undefined;\n\nexport interface ApiTransaction {\n  txId: string;\n  timestamp: number;\n  /** The amount to show in the UI (may mismatch the actual attached TON amount) */\n  amount: bigint;\n  fromAddress: string;\n  toAddress: string;\n  comment?: string;\n  encryptedComment?: string;\n  /**\n   * The fee to show in the UI (not the same as the network fee). When not 0, should be shown even for incoming\n   * transactions. It means that there was a hidden outgoing transaction with the given fee.\n   */\n  fee: bigint;\n  slug: string;\n  isIncoming: boolean;\n  normalizedAddress: string; // Only for TON now\n  /** Trace external message hash normalized. Only for TON. */\n  externalMsgHashNorm?: string;\n  shouldHide?: boolean;\n  type?: ApiTransactionType;\n  metadata?: ApiTransactionMetadata;\n  nft?: ApiNft;\n  /** 'pending' if awaiting confirmation by the blockchain */\n  status: 'pending' | 'completed' | 'failed';\n}\n\nexport type ApiTransactionMetadata = ApiAddressInfo;\n\nexport type ApiMtwCardType = 'black' | 'platinum' | 'gold' | 'silver' | 'standard';\nexport type ApiMtwCardTextType = 'light' | 'dark';\nexport type ApiMtwCardBorderShineType = 'up' | 'down' | 'left' | 'right' | 'radioactive';\n\nexport interface ApiNftAttribute {\n  trait_type: string;\n  value: string;\n}\n\nexport interface ApiNftMetadata {\n  attributes?: ApiNftAttribute[];\n  lottie?: string;\n  imageUrl?: string;\n  fragmentUrl?: string;\n  mtwCardId?: number;\n  mtwCardType?: ApiMtwCardType;\n  mtwCardTextType?: ApiMtwCardTextType;\n  mtwCardBorderShineType?: ApiMtwCardBorderShineType;\n}\n\nexport interface ApiNft {\n  index: number;\n  ownerAddress?: string;\n  name?: string;\n  address: string;\n  thumbnail: string;\n  image: string;\n  description?: string;\n  collectionName?: string;\n  collectionAddress?: string;\n  isOnSale: boolean;\n  isHidden?: boolean;\n  isOnFragment?: boolean;\n  isTelegramGift?: boolean;\n  isScam?: boolean;\n  metadata: ApiNftMetadata;\n}\n\nexport interface ApiDomainData {\n  domain: string;\n  linkedAddress?: string;\n  lastFillUpTime: string;\n  nft: NftItem;\n}\n\nexport type ApiHistoryList = Array<[number, number]>;\n\nexport type ApiStakingType = ApiStakingState['type'];\nexport type ApiBackendStakingType = 'nominators' | 'liquid';\n\ntype BaseStakingState = {\n  id: string;\n  tokenSlug: string;\n  annualYield: number;\n  yieldType: ApiYieldType;\n  balance: bigint;\n  pool: string;\n  unstakeRequestAmount?: bigint;\n};\n\nexport type ApiNominatorsStakingState = BaseStakingState & {\n  type: 'nominators';\n  start: number;\n  end: number;\n  pendingDepositAmount: bigint;\n};\n\nexport type ApiLiquidStakingState = BaseStakingState & {\n  type: 'liquid';\n  tokenBalance: bigint;\n  instantAvailable: bigint;\n  start: number;\n  end: number;\n};\n\nexport type ApiJettonStakingState = BaseStakingState & {\n  type: 'jetton';\n  tokenAddress: string;\n  unclaimedRewards: bigint;\n  stakeWalletAddress: string;\n  tokenAmount: bigint;\n  period: number;\n  tvl: bigint;\n  dailyReward: bigint;\n  poolWallets?: string[];\n};\n\nexport type ApiEthenaStakingState = BaseStakingState & {\n  type: 'ethena';\n  tokenBalance: bigint;\n  tsUsdeWalletAddress: string;\n  unstakeRequestAmount: bigint;\n  unlockTime?: number;\n  annualYieldStandard?: number;\n  annualYieldVerified?: number;\n};\n\nexport type ApiYieldType = 'APY' | 'APR';\nexport type ApiStakingState = ApiNominatorsStakingState\n  | ApiLiquidStakingState\n  | ApiJettonStakingState\n  | ApiEthenaStakingState;\nexport type ApiToncoinStakingState = ApiNominatorsStakingState | ApiLiquidStakingState;\n\nexport interface ApiNominatorsPool {\n  address: string;\n  apy: number;\n  start: number;\n  end: number;\n}\n\nexport interface ApiBackendStakingState {\n  balance: bigint;\n  totalProfit: bigint;\n  type?: ApiBackendStakingType;\n  nominatorsPool: ApiNominatorsPool;\n  loyaltyType?: ApiLoyaltyType;\n  shouldUseNominators?: boolean;\n  stakedAt?: number;\n  ethena: {\n    /**\n     * - undefined  never passed the verification;\n     * - true  passed the verification and eligible for the boosted APY;\n     * - false  passed the verification and not eligible for the boosted APY;\n     */\n    isVerified?: boolean;\n  };\n  liquid?: {\n    unstakeRequestAmount?: string;\n  };\n}\n\nexport type ApiStakingHistory = {\n  timestamp: number;\n  profit: string;\n}[];\n\nexport interface ApiDappPermissions {\n  isAddressRequired?: boolean;\n  isPasswordRequired?: boolean;\n}\n\nexport type ApiDappRequest = {\n  url: string | undefined; // `undefined` is a special case for SSE connect request\n  isUrlEnsured?: boolean;\n  accountId?: string;\n  identifier?: string;\n  sseOptions?: ApiSseOptions;\n};\n\nexport interface ApiTransferToSign {\n  toAddress: string;\n  amount: bigint;\n  rawPayload?: string;\n  payload?: ApiParsedPayload;\n  stateInit?: string;\n}\n\nexport interface ApiDappTransfer extends ApiTransferToSign {\n  isScam?: boolean;\n  /** Whether the transfer should be treated with cautiousness, because its payload is unclear */\n  isDangerous: boolean;\n  normalizedAddress: string;\n  /** The transfer address to show in the UI */\n  displayedToAddress: string;\n  networkFee: bigint;\n}\n\nexport interface ApiSignedTransfer {\n  base64: string;\n  seqno: number;\n  /** Will be used to create a local activity in the global state after the transfer is sent */\n  localActivity: Omit<ApiLocalTransactionParams, 'externalMsgHashNorm' | 'txId'>;\n}\n\n/**\n * The `fee` field should contain the final (real) fee, because we want to show the real fee in local transactions\n */\nexport type ApiLocalTransactionParams = Omit<\n  ApiTransactionActivity,\n  'id' | 'timestamp' | 'isIncoming' | 'normalizedAddress' | 'kind' | 'shouldLoadDetails' | 'status'\n> & {\n  normalizedAddress?: string;\n  isIncoming?: boolean;\n  status?: ApiTransactionActivity['status'];\n};\n\nexport type ApiBaseCurrency = 'USD' | 'EUR' | 'RUB' | 'CNY' | 'BTC' | 'TON';\n\nexport enum ApiLiquidUnstakeMode {\n  Default,\n  Instant,\n  BestRate,\n}\n\nexport type ApiLoyaltyType = 'black' | 'platinum' | 'gold' | 'silver' | 'standard';\n\nexport type ApiBalanceBySlug = Record<string, bigint>;\n\nexport type ApiWalletInfo = {\n  /** The user-friendly address of this wallet (may differ from the requested address) */\n  address: string;\n  /** Undefined when the address is not initialized or not a wallet */\n  version?: ApiTonWalletVersion;\n  balance: bigint;\n  isInitialized: boolean;\n  seqno: number;\n  lastTxId?: string;\n  domain?: string;\n};\n\nexport type ApiWalletWithVersionInfo = ApiWalletInfo & Required<Pick<ApiWalletInfo, 'version'>>;\n\n// Country codes from ISO-3166-1 spec\nexport type ApiCountryCode = 'AF' | 'AX' | 'AL' | 'DZ' | 'AS' | 'AD' | 'AO' | 'AI' | 'AQ' | 'AG' | 'AR'\n  | 'AM' | 'AW' | 'AU' | 'AT' | 'AZ' | 'BS' | 'BH' | 'BD' | 'BB' | 'BY' | 'BE' | 'BZ' | 'BJ' | 'BM'\n  | 'BT' | 'BO' | 'BQ' | 'BA' | 'BW' | 'BV' | 'BR' | 'IO' | 'BN' | 'BG' | 'BF' | 'BI' | 'CV' | 'KH'\n  | 'CM' | 'CA' | 'KY' | 'CF' | 'TD' | 'CL' | 'CN' | 'CX' | 'CC' | 'CO' | 'KM' | 'CG' | 'CD' | 'CK'\n  | 'CR' | 'CI' | 'HR' | 'CU' | 'CW' | 'CY' | 'CZ' | 'DK' | 'DJ' | 'DM' | 'DO' | 'EC' | 'EG' | 'SV'\n  | 'GQ' | 'ER' | 'EE' | 'SZ' | 'ET' | 'FK' | 'FO' | 'FJ' | 'FI' | 'FR' | 'GF' | 'PF' | 'TF' | 'GA'\n  | 'GM' | 'GE' | 'DE' | 'GH' | 'GI' | 'GR' | 'GL' | 'GD' | 'GP' | 'GU' | 'GT' | 'GG' | 'GN' | 'GW'\n  | 'GY' | 'HT' | 'HM' | 'VA' | 'HN' | 'HK' | 'HU' | 'IS' | 'IN' | 'ID' | 'IR' | 'IQ' | 'IE' | 'IM'\n  | 'IL' | 'IT' | 'JM' | 'JP' | 'JE' | 'JO' | 'KZ' | 'KE' | 'KI' | 'KP' | 'KR' | 'KW' | 'KG' | 'LA'\n  | 'LV' | 'LB' | 'LS' | 'LR' | 'LY' | 'LI' | 'LT' | 'LU' | 'MO' | 'MG' | 'MW' | 'MY' | 'MV' | 'ML'\n  | 'MT' | 'MH' | 'MQ' | 'MR' | 'MU' | 'YT' | 'MX' | 'FM' | 'MD' | 'MC' | 'MN' | 'ME' | 'MS' | 'MA'\n  | 'MZ' | 'MM' | 'NA' | 'NR' | 'NP' | 'NL' | 'NC' | 'NZ' | 'NI' | 'NE' | 'NG' | 'NU' | 'NF' | 'MP'\n  | 'NO' | 'OM' | 'PK' | 'PW' | 'PS' | 'PA' | 'PG' | 'PY' | 'PE' | 'PH' | 'PN' | 'PL' | 'PT' | 'PR'\n  | 'QA' | 'MK' | 'RO' | 'RU' | 'RW' | 'RE' | 'BL' | 'SH' | 'KN' | 'LC' | 'MF' | 'PM' | 'VC' | 'WS'\n  | 'SM' | 'ST' | 'SA' | 'SN' | 'RS' | 'SC' | 'SL' | 'SG' | 'SX' | 'SK' | 'SI' | 'SB' | 'SO' | 'ZA'\n  | 'GS' | 'SS' | 'ES' | 'LK' | 'SD' | 'SR' | 'SJ' | 'SE' | 'CH' | 'SY' | 'TW' | 'TJ' | 'TZ' | 'TH'\n  | 'TL' | 'TG' | 'TK' | 'TO' | 'TT' | 'TN' | 'TR' | 'TM' | 'TC' | 'TV' | 'UG' | 'UA' | 'AE' | 'GB'\n  | 'US' | 'UM' | 'UY' | 'UZ' | 'VU' | 'VE' | 'VN' | 'VG' | 'VI' | 'WF' | 'EH' | 'YE' | 'ZM' | 'ZW';\n\n/** Each string value can be either an address or a domain name */\nexport type ApiImportAddressByChain = Partial<Record<ApiChain, string>>;\n\nexport type ApiNftMarketplace = 'fragment' | 'getgems';\n","export default function generateUniqueId() {\n  return Date.now().toString(36) + Math.random().toString(36).slice(2);\n}\n","/*! Capacitor: https://capacitorjs.com/ - MIT License */\nvar ExceptionCode;\n(function (ExceptionCode) {\n    /**\n     * API is not implemented.\n     *\n     * This usually means the API can't be used because it is not implemented for\n     * the current platform.\n     */\n    ExceptionCode[\"Unimplemented\"] = \"UNIMPLEMENTED\";\n    /**\n     * API is not available.\n     *\n     * This means the API can't be used right now because:\n     *   - it is currently missing a prerequisite, such as network connectivity\n     *   - it requires a particular platform or browser version\n     */\n    ExceptionCode[\"Unavailable\"] = \"UNAVAILABLE\";\n})(ExceptionCode || (ExceptionCode = {}));\nclass CapacitorException extends Error {\n    constructor(message, code, data) {\n        super(message);\n        this.message = message;\n        this.code = code;\n        this.data = data;\n    }\n}\nconst getPlatformId = (win) => {\n    var _a, _b;\n    if (win === null || win === void 0 ? void 0 : win.androidBridge) {\n        return 'android';\n    }\n    else if ((_b = (_a = win === null || win === void 0 ? void 0 : win.webkit) === null || _a === void 0 ? void 0 : _a.messageHandlers) === null || _b === void 0 ? void 0 : _b.bridge) {\n        return 'ios';\n    }\n    else {\n        return 'web';\n    }\n};\n\nconst createCapacitor = (win) => {\n    const capCustomPlatform = win.CapacitorCustomPlatform || null;\n    const cap = win.Capacitor || {};\n    const Plugins = (cap.Plugins = cap.Plugins || {});\n    const getPlatform = () => {\n        return capCustomPlatform !== null ? capCustomPlatform.name : getPlatformId(win);\n    };\n    const isNativePlatform = () => getPlatform() !== 'web';\n    const isPluginAvailable = (pluginName) => {\n        const plugin = registeredPlugins.get(pluginName);\n        if (plugin === null || plugin === void 0 ? void 0 : plugin.platforms.has(getPlatform())) {\n            // JS implementation available for the current platform.\n            return true;\n        }\n        if (getPluginHeader(pluginName)) {\n            // Native implementation available.\n            return true;\n        }\n        return false;\n    };\n    const getPluginHeader = (pluginName) => { var _a; return (_a = cap.PluginHeaders) === null || _a === void 0 ? void 0 : _a.find((h) => h.name === pluginName); };\n    const handleError = (err) => win.console.error(err);\n    const registeredPlugins = new Map();\n    const registerPlugin = (pluginName, jsImplementations = {}) => {\n        const registeredPlugin = registeredPlugins.get(pluginName);\n        if (registeredPlugin) {\n            console.warn(`Capacitor plugin \"${pluginName}\" already registered. Cannot register plugins twice.`);\n            return registeredPlugin.proxy;\n        }\n        const platform = getPlatform();\n        const pluginHeader = getPluginHeader(pluginName);\n        let jsImplementation;\n        const loadPluginImplementation = async () => {\n            if (!jsImplementation && platform in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations[platform] === 'function'\n                        ? (jsImplementation = await jsImplementations[platform]())\n                        : (jsImplementation = jsImplementations[platform]);\n            }\n            else if (capCustomPlatform !== null && !jsImplementation && 'web' in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations['web'] === 'function'\n                        ? (jsImplementation = await jsImplementations['web']())\n                        : (jsImplementation = jsImplementations['web']);\n            }\n            return jsImplementation;\n        };\n        const createPluginMethod = (impl, prop) => {\n            var _a, _b;\n            if (pluginHeader) {\n                const methodHeader = pluginHeader === null || pluginHeader === void 0 ? void 0 : pluginHeader.methods.find((m) => prop === m.name);\n                if (methodHeader) {\n                    if (methodHeader.rtype === 'promise') {\n                        return (options) => cap.nativePromise(pluginName, prop.toString(), options);\n                    }\n                    else {\n                        return (options, callback) => cap.nativeCallback(pluginName, prop.toString(), options, callback);\n                    }\n                }\n                else if (impl) {\n                    return (_a = impl[prop]) === null || _a === void 0 ? void 0 : _a.bind(impl);\n                }\n            }\n            else if (impl) {\n                return (_b = impl[prop]) === null || _b === void 0 ? void 0 : _b.bind(impl);\n            }\n            else {\n                throw new CapacitorException(`\"${pluginName}\" plugin is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n            }\n        };\n        const createPluginMethodWrapper = (prop) => {\n            let remove;\n            const wrapper = (...args) => {\n                const p = loadPluginImplementation().then((impl) => {\n                    const fn = createPluginMethod(impl, prop);\n                    if (fn) {\n                        const p = fn(...args);\n                        remove = p === null || p === void 0 ? void 0 : p.remove;\n                        return p;\n                    }\n                    else {\n                        throw new CapacitorException(`\"${pluginName}.${prop}()\" is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n                    }\n                });\n                if (prop === 'addListener') {\n                    p.remove = async () => remove();\n                }\n                return p;\n            };\n            // Some flair \n            wrapper.toString = () => `${prop.toString()}() { [capacitor code] }`;\n            Object.defineProperty(wrapper, 'name', {\n                value: prop,\n                writable: false,\n                configurable: false,\n            });\n            return wrapper;\n        };\n        const addListener = createPluginMethodWrapper('addListener');\n        const removeListener = createPluginMethodWrapper('removeListener');\n        const addListenerNative = (eventName, callback) => {\n            const call = addListener({ eventName }, callback);\n            const remove = async () => {\n                const callbackId = await call;\n                removeListener({\n                    eventName,\n                    callbackId,\n                }, callback);\n            };\n            const p = new Promise((resolve) => call.then(() => resolve({ remove })));\n            p.remove = async () => {\n                console.warn(`Using addListener() without 'await' is deprecated.`);\n                await remove();\n            };\n            return p;\n        };\n        const proxy = new Proxy({}, {\n            get(_, prop) {\n                switch (prop) {\n                    // https://github.com/facebook/react/issues/20030\n                    case '$$typeof':\n                        return undefined;\n                    case 'toJSON':\n                        return () => ({});\n                    case 'addListener':\n                        return pluginHeader ? addListenerNative : addListener;\n                    case 'removeListener':\n                        return removeListener;\n                    default:\n                        return createPluginMethodWrapper(prop);\n                }\n            },\n        });\n        Plugins[pluginName] = proxy;\n        registeredPlugins.set(pluginName, {\n            name: pluginName,\n            proxy,\n            platforms: new Set([...Object.keys(jsImplementations), ...(pluginHeader ? [platform] : [])]),\n        });\n        return proxy;\n    };\n    // Add in convertFileSrc for web, it will already be available in native context\n    if (!cap.convertFileSrc) {\n        cap.convertFileSrc = (filePath) => filePath;\n    }\n    cap.getPlatform = getPlatform;\n    cap.handleError = handleError;\n    cap.isNativePlatform = isNativePlatform;\n    cap.isPluginAvailable = isPluginAvailable;\n    cap.registerPlugin = registerPlugin;\n    cap.Exception = CapacitorException;\n    cap.DEBUG = !!cap.DEBUG;\n    cap.isLoggingEnabled = !!cap.isLoggingEnabled;\n    return cap;\n};\nconst initCapacitorGlobal = (win) => (win.Capacitor = createCapacitor(win));\n\nconst Capacitor = /*#__PURE__*/ initCapacitorGlobal(typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n        ? self\n        : typeof window !== 'undefined'\n            ? window\n            : typeof global !== 'undefined'\n                ? global\n                : {});\nconst registerPlugin = Capacitor.registerPlugin;\n\n/**\n * Base class web plugins should extend.\n */\nclass WebPlugin {\n    constructor() {\n        this.listeners = {};\n        this.retainedEventArguments = {};\n        this.windowListeners = {};\n    }\n    addListener(eventName, listenerFunc) {\n        let firstListener = false;\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            this.listeners[eventName] = [];\n            firstListener = true;\n        }\n        this.listeners[eventName].push(listenerFunc);\n        // If we haven't added a window listener for this event and it requires one,\n        // go ahead and add it\n        const windowListener = this.windowListeners[eventName];\n        if (windowListener && !windowListener.registered) {\n            this.addWindowListener(windowListener);\n        }\n        if (firstListener) {\n            this.sendRetainedArgumentsForEvent(eventName);\n        }\n        const remove = async () => this.removeListener(eventName, listenerFunc);\n        const p = Promise.resolve({ remove });\n        return p;\n    }\n    async removeAllListeners() {\n        this.listeners = {};\n        for (const listener in this.windowListeners) {\n            this.removeWindowListener(this.windowListeners[listener]);\n        }\n        this.windowListeners = {};\n    }\n    notifyListeners(eventName, data, retainUntilConsumed) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            if (retainUntilConsumed) {\n                let args = this.retainedEventArguments[eventName];\n                if (!args) {\n                    args = [];\n                }\n                args.push(data);\n                this.retainedEventArguments[eventName] = args;\n            }\n            return;\n        }\n        listeners.forEach((listener) => listener(data));\n    }\n    hasListeners(eventName) {\n        return !!this.listeners[eventName].length;\n    }\n    registerWindowListener(windowEventName, pluginEventName) {\n        this.windowListeners[pluginEventName] = {\n            registered: false,\n            windowEventName,\n            pluginEventName,\n            handler: (event) => {\n                this.notifyListeners(pluginEventName, event);\n            },\n        };\n    }\n    unimplemented(msg = 'not implemented') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unimplemented);\n    }\n    unavailable(msg = 'not available') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unavailable);\n    }\n    async removeListener(eventName, listenerFunc) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            return;\n        }\n        const index = listeners.indexOf(listenerFunc);\n        this.listeners[eventName].splice(index, 1);\n        // If there are no more listeners for this type of event,\n        // remove the window listener\n        if (!this.listeners[eventName].length) {\n            this.removeWindowListener(this.windowListeners[eventName]);\n        }\n    }\n    addWindowListener(handle) {\n        window.addEventListener(handle.windowEventName, handle.handler);\n        handle.registered = true;\n    }\n    removeWindowListener(handle) {\n        if (!handle) {\n            return;\n        }\n        window.removeEventListener(handle.windowEventName, handle.handler);\n        handle.registered = false;\n    }\n    sendRetainedArgumentsForEvent(eventName) {\n        const args = this.retainedEventArguments[eventName];\n        if (!args) {\n            return;\n        }\n        delete this.retainedEventArguments[eventName];\n        args.forEach((arg) => {\n            this.notifyListeners(eventName, arg);\n        });\n    }\n}\n\nconst WebView = /*#__PURE__*/ registerPlugin('WebView');\n/******** END WEB VIEW PLUGIN ********/\n/******** COOKIES PLUGIN ********/\n/**\n * Safely web encode a string value (inspired by js-cookie)\n * @param str The string value to encode\n */\nconst encode = (str) => encodeURIComponent(str)\n    .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n    .replace(/[()]/g, escape);\n/**\n * Safely web decode a string value (inspired by js-cookie)\n * @param str The string value to decode\n */\nconst decode = (str) => str.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent);\nclass CapacitorCookiesPluginWeb extends WebPlugin {\n    async getCookies() {\n        const cookies = document.cookie;\n        const cookieMap = {};\n        cookies.split(';').forEach((cookie) => {\n            if (cookie.length <= 0)\n                return;\n            // Replace first \"=\" with CAP_COOKIE to prevent splitting on additional \"=\"\n            let [key, value] = cookie.replace(/=/, 'CAP_COOKIE').split('CAP_COOKIE');\n            key = decode(key).trim();\n            value = decode(value).trim();\n            cookieMap[key] = value;\n        });\n        return cookieMap;\n    }\n    async setCookie(options) {\n        try {\n            // Safely Encoded Key/Value\n            const encodedKey = encode(options.key);\n            const encodedValue = encode(options.value);\n            // Clean & sanitize options\n            const expires = `; expires=${(options.expires || '').replace('expires=', '')}`; // Default is \"; expires=\"\n            const path = (options.path || '/').replace('path=', ''); // Default is \"path=/\"\n            const domain = options.url != null && options.url.length > 0 ? `domain=${options.url}` : '';\n            document.cookie = `${encodedKey}=${encodedValue || ''}${expires}; path=${path}; ${domain};`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async deleteCookie(options) {\n        try {\n            document.cookie = `${options.key}=; Max-Age=0`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearCookies() {\n        try {\n            const cookies = document.cookie.split(';') || [];\n            for (const cookie of cookies) {\n                document.cookie = cookie.replace(/^ +/, '').replace(/=.*/, `=;expires=${new Date().toUTCString()};path=/`);\n            }\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearAllCookies() {\n        try {\n            await this.clearCookies();\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n}\nconst CapacitorCookies = registerPlugin('CapacitorCookies', {\n    web: () => new CapacitorCookiesPluginWeb(),\n});\n// UTILITY FUNCTIONS\n/**\n * Read in a Blob value and return it as a base64 string\n * @param blob The blob value to convert to a base64 string\n */\nconst readBlobAsBase64 = async (blob) => new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n        const base64String = reader.result;\n        // remove prefix \"data:application/pdf;base64,\"\n        resolve(base64String.indexOf(',') >= 0 ? base64String.split(',')[1] : base64String);\n    };\n    reader.onerror = (error) => reject(error);\n    reader.readAsDataURL(blob);\n});\n/**\n * Normalize an HttpHeaders map by lowercasing all of the values\n * @param headers The HttpHeaders object to normalize\n */\nconst normalizeHttpHeaders = (headers = {}) => {\n    const originalKeys = Object.keys(headers);\n    const loweredKeys = Object.keys(headers).map((k) => k.toLocaleLowerCase());\n    const normalized = loweredKeys.reduce((acc, key, index) => {\n        acc[key] = headers[originalKeys[index]];\n        return acc;\n    }, {});\n    return normalized;\n};\n/**\n * Builds a string of url parameters that\n * @param params A map of url parameters\n * @param shouldEncode true if you should encodeURIComponent() the values (true by default)\n */\nconst buildUrlParams = (params, shouldEncode = true) => {\n    if (!params)\n        return null;\n    const output = Object.entries(params).reduce((accumulator, entry) => {\n        const [key, value] = entry;\n        let encodedValue;\n        let item;\n        if (Array.isArray(value)) {\n            item = '';\n            value.forEach((str) => {\n                encodedValue = shouldEncode ? encodeURIComponent(str) : str;\n                item += `${key}=${encodedValue}&`;\n            });\n            // last character will always be \"&\" so slice it off\n            item.slice(0, -1);\n        }\n        else {\n            encodedValue = shouldEncode ? encodeURIComponent(value) : value;\n            item = `${key}=${encodedValue}`;\n        }\n        return `${accumulator}&${item}`;\n    }, '');\n    // Remove initial \"&\" from the reduce\n    return output.substr(1);\n};\n/**\n * Build the RequestInit object based on the options passed into the initial request\n * @param options The Http plugin options\n * @param extra Any extra RequestInit values\n */\nconst buildRequestInit = (options, extra = {}) => {\n    const output = Object.assign({ method: options.method || 'GET', headers: options.headers }, extra);\n    // Get the content-type\n    const headers = normalizeHttpHeaders(options.headers);\n    const type = headers['content-type'] || '';\n    // If body is already a string, then pass it through as-is.\n    if (typeof options.data === 'string') {\n        output.body = options.data;\n    }\n    // Build request initializers based off of content-type\n    else if (type.includes('application/x-www-form-urlencoded')) {\n        const params = new URLSearchParams();\n        for (const [key, value] of Object.entries(options.data || {})) {\n            params.set(key, value);\n        }\n        output.body = params.toString();\n    }\n    else if (type.includes('multipart/form-data') || options.data instanceof FormData) {\n        const form = new FormData();\n        if (options.data instanceof FormData) {\n            options.data.forEach((value, key) => {\n                form.append(key, value);\n            });\n        }\n        else {\n            for (const key of Object.keys(options.data)) {\n                form.append(key, options.data[key]);\n            }\n        }\n        output.body = form;\n        const headers = new Headers(output.headers);\n        headers.delete('content-type'); // content-type will be set by `window.fetch` to includy boundary\n        output.headers = headers;\n    }\n    else if (type.includes('application/json') || typeof options.data === 'object') {\n        output.body = JSON.stringify(options.data);\n    }\n    return output;\n};\n// WEB IMPLEMENTATION\nclass CapacitorHttpPluginWeb extends WebPlugin {\n    /**\n     * Perform an Http request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async request(options) {\n        const requestInit = buildRequestInit(options, options.webFetchExtra);\n        const urlParams = buildUrlParams(options.params, options.shouldEncodeUrlParams);\n        const url = urlParams ? `${options.url}?${urlParams}` : options.url;\n        const response = await fetch(url, requestInit);\n        const contentType = response.headers.get('content-type') || '';\n        // Default to 'text' responseType so no parsing happens\n        let { responseType = 'text' } = response.ok ? options : {};\n        // If the response content-type is json, force the response to be json\n        if (contentType.includes('application/json')) {\n            responseType = 'json';\n        }\n        let data;\n        let blob;\n        switch (responseType) {\n            case 'arraybuffer':\n            case 'blob':\n                blob = await response.blob();\n                data = await readBlobAsBase64(blob);\n                break;\n            case 'json':\n                data = await response.json();\n                break;\n            case 'document':\n            case 'text':\n            default:\n                data = await response.text();\n        }\n        // Convert fetch headers to Capacitor HttpHeaders\n        const headers = {};\n        response.headers.forEach((value, key) => {\n            headers[key] = value;\n        });\n        return {\n            data,\n            headers,\n            status: response.status,\n            url: response.url,\n        };\n    }\n    /**\n     * Perform an Http GET request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async get(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'GET' }));\n    }\n    /**\n     * Perform an Http POST request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async post(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'POST' }));\n    }\n    /**\n     * Perform an Http PUT request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async put(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PUT' }));\n    }\n    /**\n     * Perform an Http PATCH request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async patch(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PATCH' }));\n    }\n    /**\n     * Perform an Http DELETE request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async delete(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'DELETE' }));\n    }\n}\nconst CapacitorHttp = registerPlugin('CapacitorHttp', {\n    web: () => new CapacitorHttpPluginWeb(),\n});\n/******** END HTTP PLUGIN ********/\n\nexport { Capacitor, CapacitorCookies, CapacitorException, CapacitorHttp, ExceptionCode, WebPlugin, WebView, buildRequestInit, registerPlugin };\n//# sourceMappingURL=index.js.map\n","const cache = new WeakMap<AnyFunction, Map<string, any>>();\n\nexport default function withCache<T extends AnyFunction>(fn: T) {\n  return (...args: Parameters<T>): ReturnType<T> => {\n    let fnCache = cache.get(fn);\n    const cacheKey = args.map(String).join('_');\n\n    if (fnCache) {\n      const cached = fnCache.get(cacheKey);\n      if (cached) {\n        return cached;\n      }\n    } else {\n      fnCache = new Map();\n      cache.set(fn, fnCache);\n    }\n\n    const newValue = fn(...args);\n\n    fnCache.set(cacheKey, newValue);\n\n    return newValue;\n  };\n}\n","import type { Scheduler } from './schedulers';\n\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\n\ninterface AnimationInstance {\n  isCancelled: boolean;\n}\n\ntype TickFunction = () => boolean | undefined;\n\nlet currentInstance: AnimationInstance | undefined;\n\nexport function animateSingle(tick: TickFunction, schedulerFn: Scheduler, instance?: AnimationInstance) {\n  if (!instance) {\n    if (currentInstance && !currentInstance.isCancelled) {\n      currentInstance.isCancelled = true;\n    }\n\n    instance = { isCancelled: false };\n    currentInstance = instance;\n  }\n\n  if (!instance.isCancelled && tick()) {\n    schedulerFn(() => {\n      animateSingle(tick, schedulerFn, instance);\n    });\n  }\n}\n\nexport function cancelSingleAnimation() {\n  const dumbScheduler = (cb: AnyFunction) => cb;\n  const dumbCb = () => undefined;\n\n  animateSingle(dumbCb, dumbScheduler);\n}\n\nexport function animate(tick: TickFunction, schedulerFn: Scheduler) {\n  schedulerFn(() => {\n    if (tick()) {\n      animate(tick, schedulerFn);\n    }\n  });\n}\n\nexport function animateInstantly(tick: TickFunction, schedulerFn: Scheduler) {\n  if (tick()) {\n    schedulerFn(() => {\n      animateInstantly(tick, schedulerFn);\n    });\n  }\n}\n\ntype TimingFn = (t: number) => number;\n\ntype AnimateNumberProps<T extends number | number[]> = {\n  to: T;\n  from: T;\n  duration: number;\n  onUpdate: (value: T) => void;\n  timing?: TimingFn;\n  onEnd?: (isCanceled?: boolean) => void;\n};\n\nexport const timingFunctions = {\n  linear: (t: number) => t,\n  easeIn: (t: number) => t ** 1.675,\n  easeOut: (t: number) => -1 * t ** 1.675,\n  easeInOut: (t: number) => 0.5 * (Math.sin((t - 0.5) * Math.PI) + 1),\n  easeInQuad: (t: number) => t * t,\n  easeOutQuad: (t: number) => t * (2 - t),\n  easeInOutQuad: (t: number) => (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t),\n  easeInCubic: (t: number) => t ** 3,\n  easeOutCubic: (t: number) => (--t) * t * t + 1,\n  easeInOutCubic: (t: number) => (t < 0.5 ? 4 * t ** 3 : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1),\n  easeInQuart: (t: number) => t ** 4,\n  easeOutQuart: (t: number) => 1 - (--t) * t ** 3,\n  easeInOutQuart: (t: number) => (t < 0.5 ? 8 * t ** 4 : 1 - 8 * (--t) * t ** 3),\n  easeInQuint: (t: number) => t ** 5,\n  easeOutQuint: (t: number) => 1 + (--t) * t ** 4,\n  easeInOutQuint: (t: number) => (t < 0.5 ? 16 * t ** 5 : 1 + 16 * (--t) * t ** 4),\n};\n\nexport function animateNumber<T extends number | number[]>({\n  timing = timingFunctions.linear,\n  onUpdate,\n  duration,\n  onEnd,\n  from,\n  to,\n}: AnimateNumberProps<T>) {\n  const t0 = Date.now();\n\n  let isCanceled = false;\n\n  animateInstantly(() => {\n    if (isCanceled) return false;\n\n    const t1 = Date.now();\n    const t = Math.min((t1 - t0) / duration, 1);\n\n    const progress = timing(t);\n    if (typeof from === 'number' && typeof to === 'number') {\n      onUpdate((from + ((to - from) * progress)) as T);\n    } else if (Array.isArray(from) && Array.isArray(to)) {\n      const result = from.map((f, i) => f + ((to[i] - f) * progress));\n      onUpdate(result as T);\n    }\n\n    if (t === 1) {\n      onEnd?.();\n    }\n\n    return t < 1;\n  }, requestMeasure);\n\n  return () => {\n    isCanceled = true;\n    onEnd?.(true);\n  };\n}\n\nexport function applyStyles(element: HTMLElement, css: Record<string, string>) {\n  Object.assign(element.style, css);\n}\n","export var ImpactStyle;\n(function (ImpactStyle) {\n    /**\n     * A collision between large, heavy user interface elements\n     *\n     * @since 1.0.0\n     */\n    ImpactStyle[\"Heavy\"] = \"HEAVY\";\n    /**\n     * A collision between moderately sized user interface elements\n     *\n     * @since 1.0.0\n     */\n    ImpactStyle[\"Medium\"] = \"MEDIUM\";\n    /**\n     * A collision between small, light user interface elements\n     *\n     * @since 1.0.0\n     */\n    ImpactStyle[\"Light\"] = \"LIGHT\";\n})(ImpactStyle || (ImpactStyle = {}));\nexport var NotificationType;\n(function (NotificationType) {\n    /**\n     * A notification feedback type indicating that a task has completed successfully\n     *\n     * @since 1.0.0\n     */\n    NotificationType[\"Success\"] = \"SUCCESS\";\n    /**\n     * A notification feedback type indicating that a task has produced a warning\n     *\n     * @since 1.0.0\n     */\n    NotificationType[\"Warning\"] = \"WARNING\";\n    /**\n     * A notification feedback type indicating that a task has failed\n     *\n     * @since 1.0.0\n     */\n    NotificationType[\"Error\"] = \"ERROR\";\n})(NotificationType || (NotificationType = {}));\n//# sourceMappingURL=definitions.js.map","import type { OriginMessageData, WorkerMessageData } from './PostMessageConnector';\n\nimport { BIGINT_PREFIX } from './bigint';\n\nexport const UNDEFINED_PREFIX = 'undefined:';\n\nfunction extensionMessageReplacer(this: any, key: string, value: any) {\n  if (value === undefined) {\n    return `${UNDEFINED_PREFIX}marker`;\n  }\n\n  // Bigint is replaced by patching `toJSON` method\n\n  return value;\n}\n\nfunction extensionMessageReviver(this: any, key: string, value: any) {\n  // Handle bigint values\n  if (typeof value === 'string' && value.startsWith(BIGINT_PREFIX)) {\n    return BigInt(value.slice(BIGINT_PREFIX.length));\n  }\n\n  // Handle undefined values\n  if (typeof value === 'string' && value.startsWith(UNDEFINED_PREFIX)) {\n    return undefined;\n  }\n\n  return value;\n}\n\nexport function encodeExtensionMessage(data: OriginMessageData | WorkerMessageData) {\n  return JSON.stringify(data, extensionMessageReplacer);\n}\n\nexport function decodeExtensionMessage<T extends OriginMessageData | WorkerMessageData>(data: string | T): T {\n  if (typeof data === 'string') {\n    return JSON.parse(data, extensionMessageReviver);\n  }\n  return data;\n}\n","import type { ApiTonWalletVersion } from './api/chains/ton/types';\nimport type {\n  ApiBaseCurrency,\n  ApiLiquidStakingState,\n  ApiNftMarketplace,\n  ApiNominatorsStakingState,\n  ApiSwapAsset,\n  ApiSwapDexLabel,\n  ApiTokenWithPrice,\n} from './api/types';\nimport type { AutolockValueType, LangCode, LangItem, TokenPeriod } from './global/types';\n\nexport const APP_ENV = process.env.APP_ENV;\n\nexport const IS_CORE_WALLET = process.env.IS_CORE_WALLET === '1';\nexport const APP_NAME = process.env.APP_NAME || (IS_CORE_WALLET ? 'TON Wallet' : 'MyTonWallet');\nexport const APP_VERSION = process.env.APP_VERSION!;\nexport const APP_COMMIT_HASH = process.env.APP_COMMIT_HASH!;\nexport const APP_ENV_MARKER = APP_ENV === 'staging' ? 'Beta' : APP_ENV === 'development' ? 'Dev' : undefined;\nexport const EXTENSION_NAME = IS_CORE_WALLET ? 'TON Wallet' : 'MyTonWallet  My TON Wallet';\nexport const EXTENSION_DESCRIPTION = IS_CORE_WALLET\n  ? 'Set up your own TON Wallet on The Open Network'\n  // eslint-disable-next-line @stylistic/max-len\n  : 'The most feature-rich TON+TRON wallet: multi-accounts, multi-send, Telegram Gifts and other collectibles, TON DNS+Proxy, and more.';\n\nexport const DEBUG = APP_ENV !== 'production' && APP_ENV !== 'perf' && APP_ENV !== 'test';\nexport const DEBUG_MORE = false;\nexport const DEBUG_API = false;\nexport const DEBUG_VIEW_ACCOUNTS = false;\n\nexport const IS_PRODUCTION = APP_ENV === 'production';\nexport const IS_TEST = APP_ENV === 'test';\nexport const IS_PERF = APP_ENV === 'perf';\nexport const IS_EXTENSION = process.env.IS_EXTENSION === '1';\nexport const IS_FIREFOX_EXTENSION = process.env.IS_FIREFOX_EXTENSION === '1';\nexport const IS_OPERA_EXTENSION = process.env.IS_OPERA_EXTENSION === '1';\nexport const IS_PACKAGED_ELECTRON = process.env.IS_PACKAGED_ELECTRON === '1';\nexport const IS_CAPACITOR = process.env.IS_CAPACITOR === '1';\nexport const IS_ANDROID_DIRECT = process.env.IS_ANDROID_DIRECT === '1';\nexport const IS_AIR_APP = process.env.IS_AIR_APP === '1';\nexport const IS_TELEGRAM_APP = process.env.IS_TELEGRAM_APP === '1';\n\nexport const ELECTRON_HOST_URL = 'https://dumb-host';\nexport const INACTIVE_MARKER = '[Inactive]';\nexport const PRODUCTION_URL = IS_CORE_WALLET ? 'https://wallet.ton.org' : 'https://mytonwallet.app';\nexport const BETA_URL = IS_CORE_WALLET ? 'https://beta.wallet.ton.org' : 'https://beta.mytonwallet.app';\nexport const APP_INSTALL_URL = 'https://get.mytonwallet.io/';\nexport const APP_REPO_URL = 'https://github.com/mytonwallet-org/mytonwallet';\nexport const BASE_URL = process.env.BASE_URL;\n\nexport const BOT_USERNAME = process.env.BOT_USERNAME || 'MyTonWalletBot';\n\nexport const SWAP_FEE_ADDRESS = process.env.SWAP_FEE_ADDRESS || 'UQDUkQbpTVIgt7v66-JTFR-3-eXRFz_4V66F-Ufn6vOg0GOp';\nexport const DIESEL_ADDRESS = process.env.DIESEL_ADDRESS || 'UQC9lQOaEHC6YASiJJ2NrKEOlITMMQmc8j0_iZEHy-4sl3tG';\n\nexport const STRICTERDOM_ENABLED = DEBUG && !IS_PACKAGED_ELECTRON;\n\nexport const DEBUG_ALERT_MSG = 'Shoot!\\nSomething went wrong, please see the error details in Dev Tools Console.';\n\nexport const PIN_LENGTH = 4;\nexport const NATIVE_BIOMETRICS_USERNAME = IS_CORE_WALLET ? 'TonWallet' : 'MyTonWallet';\nexport const NATIVE_BIOMETRICS_SERVER = IS_CORE_WALLET ? 'https://wallet.ton.org' : 'https://mytonwallet.app';\n\nexport const IS_BIP39_MNEMONIC_ENABLED = !IS_CORE_WALLET;\nexport const MNEMONIC_COUNT = 24;\nexport const MNEMONIC_COUNTS = IS_BIP39_MNEMONIC_ENABLED ? [12, 24] : [24];\n\nexport const PRIVATE_KEY_HEX_LENGTH = 64;\nexport const MNEMONIC_CHECK_COUNT = 3;\n\nexport const MOBILE_SCREEN_MAX_WIDTH = 700; // px\n\nexport const ANIMATION_END_DELAY = 50;\n\nexport const ANIMATED_STICKER_TINY_ICON_PX = 16;\nexport const ANIMATED_STICKER_ICON_PX = 30;\nexport const ANIMATED_STICKER_TINY_SIZE_PX = 70;\nexport const ANIMATED_STICKER_SMALL_SIZE_PX = 110;\nexport const ANIMATED_STICKER_MIDDLE_SIZE_PX = 120;\nexport const ANIMATED_STICKER_DEFAULT_PX = 150;\nexport const ANIMATED_STICKER_BIG_SIZE_PX = 156;\nexport const ANIMATED_STICKER_HUGE_SIZE_PX = 192;\n\nexport const DEFAULT_PORTRAIT_WINDOW_SIZE = { width: 368, height: 770 };\nexport const DEFAULT_LANDSCAPE_WINDOW_SIZE = { width: 980, height: 788 };\nexport const DEFAULT_LANDSCAPE_ACTION_TAB_ID = 0;\nexport const TRANSACTION_ADDRESS_SHIFT = 4;\n\nexport const WHOLE_PART_DELIMITER = ''; // https://www.compart.com/en/unicode/U+202F\n\nexport const DEFAULT_SLIPPAGE_VALUE = 5;\n\nexport const GLOBAL_STATE_CACHE_DISABLED = false;\nexport const GLOBAL_STATE_CACHE_KEY = IS_CORE_WALLET ? 'tonwallet-global-state' : 'mytonwallet-global-state';\n\nexport const ANIMATION_LEVEL_MIN = 0;\nexport const ANIMATION_LEVEL_MED = 1;\nexport const ANIMATION_LEVEL_MAX = 2;\nexport const ANIMATION_LEVEL_DEFAULT = ANIMATION_LEVEL_MAX;\nexport const THEME_DEFAULT = 'system';\n\nexport const MAIN_ACCOUNT_ID = '0-ton-mainnet';\n\nexport const TONCENTER_MAINNET_URL = process.env.TONCENTER_MAINNET_URL || 'https://toncenter.mytonwallet.org';\nexport const TONCENTER_MAINNET_KEY = process.env.TONCENTER_MAINNET_KEY;\nexport const ELECTRON_TONCENTER_MAINNET_KEY = process.env.ELECTRON_TONCENTER_MAINNET_KEY;\nexport const TONAPIIO_MAINNET_URL = process.env.TONAPIIO_MAINNET_URL || 'https://tonapiio.mytonwallet.org';\n\nexport const TONCENTER_TESTNET_URL = process.env.TONCENTER_TESTNET_URL || 'https://toncenter-testnet.mytonwallet.org';\nexport const TONCENTER_TESTNET_KEY = process.env.TONCENTER_TESTNET_KEY;\nexport const ELECTRON_TONCENTER_TESTNET_KEY = process.env.ELECTRON_TONCENTER_TESTNET_KEY;\nexport const TONAPIIO_TESTNET_URL = process.env.TONAPIIO_TESTNET_URL || 'https://tonapiio-testnet.mytonwallet.org';\n\nexport const BRILLIANT_API_BASE_URL = process.env.BRILLIANT_API_BASE_URL || 'https://api.mytonwallet.org';\nexport const PROXY_API_BASE_URL = process.env.PROXY_API_BASE_URL || 'https://api.mytonwallet.org/proxy';\nexport const IPFS_GATEWAY_BASE_URL = 'https://ipfs.io/ipfs/';\nexport const SSE_BRIDGE_URL = 'https://tonconnectbridge.mytonwallet.org/bridge/';\n\nexport const TRON_MAINNET_API_URL = process.env.TRON_MAINNET_API_URL || 'https://tronapi.mytonwallet.org';\nexport const TRON_TESTNET_API_URL = process.env.TRON_TESTNET_API_URL || 'https://api.shasta.trongrid.io';\n\nexport const FRACTION_DIGITS = 9;\nexport const SHORT_FRACTION_DIGITS = 2;\n\nexport const MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT = 3;\n\nexport const SUPPORT_USERNAME = 'mysupport';\nexport const MTW_TIPS_CHANNEL_NAME: Partial<Record<LangCode, string>> = {\n  en: 'MyTonWalletTips',\n  ru: 'MyTonWalletTipsRu',\n};\nexport const NFT_MARKETPLACE_TITLES: Record<ApiNftMarketplace, string> = {\n  getgems: 'Getgems',\n  fragment: 'Fragment',\n};\nexport const MTW_STATIC_BASE_URL = 'https://static.mytonwallet.org';\nexport const MTW_CARDS_BASE_URL = `${MTW_STATIC_BASE_URL}/cards/`;\nexport const MTW_CARDS_MINT_BASE_URL = `${MTW_STATIC_BASE_URL}/mint-cards/`;\nexport const MYTONWALLET_PROMO_URL = 'https://mytonwallet.io/';\nexport const MYTONWALLET_MULTISEND_DAPP_URL = 'https://multisend.mytonwallet.io/';\nexport const TELEGRAM_WEB_URL = 'https://web.telegram.org/a/';\nexport const NFT_MARKETPLACE_URL = 'https://getgems.io/';\nexport const NFT_MARKETPLACE_TITLE = NFT_MARKETPLACE_TITLES.getgems;\nexport const GETGEMS_BASE_MAINNET_URL = 'https://getgems.io/';\nexport const GETGEMS_BASE_TESTNET_URL = 'https://testnet.getgems.io/';\nexport const EMPTY_HASH_VALUE = 'NOHASH';\n\nexport const IFRAME_WHITELIST = [\n  'http://localhost:*', 'https://tonscan.org',\n];\nexport const SUBPROJECT_URL_MASK = 'https://*.mytonwallet.io';\n\nexport const CHANGELLY_SUPPORT_EMAIL = 'support@changelly.com';\nexport const CHANGELLY_LIVE_CHAT_URL = 'https://changelly.com/';\nexport const CHANGELLY_SECURITY_EMAIL = 'security@changelly.com';\nexport const CHANGELLY_TERMS_OF_USE = 'https://changelly.com/terms-of-use';\nexport const CHANGELLY_PRIVACY_POLICY = 'https://changelly.com/privacy-policy';\nexport const CHANGELLY_AML_KYC = 'https://changelly.com/aml-kyc';\nexport const CHANGELLY_WAITING_DEADLINE = 3 * 60 * 60 * 1000; // 3 hours\n\nexport const PROXY_HOSTS = process.env.PROXY_HOSTS;\n\nexport const TINY_TRANSFER_MAX_COST = 0.01;\n\nexport const IMAGE_CACHE_NAME = 'mtw-image';\nexport const LANG_CACHE_NAME = 'mtw-lang-226';\n\nexport const LANG_LIST: LangItem[] = [{\n  langCode: 'en',\n  name: 'English',\n  nativeName: 'English',\n  rtl: false,\n}, {\n  langCode: 'es',\n  name: 'Spanish',\n  nativeName: 'Espaol',\n  rtl: false,\n}, {\n  langCode: 'ru',\n  name: 'Russian',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'zh-Hans',\n  name: 'Chinese (Simplified)',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'zh-Hant',\n  name: 'Chinese (Traditional)',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'tr',\n  name: 'Turkish',\n  nativeName: 'Trke',\n  rtl: false,\n}, {\n  langCode: 'de',\n  name: 'German',\n  nativeName: 'Deutsch',\n  rtl: false,\n}, {\n  langCode: 'th',\n  name: 'Thai',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'uk',\n  name: 'Ukrainian',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'pl',\n  name: 'Polish',\n  nativeName: 'Polski',\n  rtl: false,\n}];\n\nexport const IS_STAKING_DISABLED = IS_CORE_WALLET;\nexport const VALIDATION_PERIOD_MS = 65_536_000; // 18.2 h.\nexport const ONE_TON = 1_000_000_000n;\nexport const DEFAULT_FEE = 15_000_000n; // 0.015 TON\nexport const UNSTAKE_TON_GRACE_PERIOD = 20 * 60 * 1000; // 20 m.\n\nexport const STAKING_POOLS = process.env.STAKING_POOLS ? process.env.STAKING_POOLS.split(' ') : [];\nexport const LIQUID_POOL = process.env.LIQUID_POOL || 'EQD2_4d91M4TVbEBVyBF8J1UwpMJc361LKVCz6bBlffMW05o';\nexport const LIQUID_JETTON = process.env.LIQUID_JETTON || 'EQCqC6EhRJ_tpWngKxL6dV0k6DSnRUrs9GSVkLbfdCqsj6TE';\nexport const STAKING_MIN_AMOUNT = ONE_TON;\nexport const NOMINATORS_STAKING_MIN_AMOUNT = 10_000n * ONE_TON;\nexport const MIN_ACTIVE_STAKING_REWARDS = 100_000_000n; // 0.1 MY\n\nexport const TONCONNECT_PROTOCOL_VERSION = 2;\nexport const TONCONNECT_WALLET_JSBRIDGE_KEY = IS_CORE_WALLET ? 'tonwallet' : 'mytonwallet';\nexport const EMBEDDED_DAPP_BRIDGE_CHANNEL = 'embedded-dapp-bridge';\n\nexport const NFT_FRAGMENT_COLLECTIONS = [\n  '0:0e41dc1dc3c9067ed24248580e12b3359818d83dee0304fabcf80845eafafdb2', // Anonymous Telegram Numbers\n  '0:80d78a35f955a14b679faa887ff4cd5bfc0f43b4a4eea2a7e6927f3701b273c2', // Telegram Usernames\n];\nexport const NFT_FRAGMENT_GIFT_IMAGE_TO_URL_REGEX = /^https?:\\/\\/nft\\.(fragment\\.com\\/gift\\/[\\w-]+-\\d+)\\.\\w+$/i;\nexport const TELEGRAM_GIFTS_SUPER_COLLECTION = 'super:telegram-gifts';\n\nexport const MTW_CARDS_WEBSITE = 'https://cards.mytonwallet.io';\nexport const MTW_CARDS_COLLECTION = 'EQCQE2L9hfwx1V8sgmF9keraHx1rNK9VmgR1ctVvINBGykyM';\nexport const TON_DNS_COLLECTION = 'EQC3dNlesgVD8YbAazcauIrXBPfiVhMMr5YYk2in0Mtsz0Bz';\nexport const TON_DNS_RENEWAL_WARNING_DAYS = 14;\nexport const TON_DNS_RENEWAL_NFT_WARNING_DAYS = 30;\n\nexport const TONCOIN = {\n  name: 'Toncoin',\n  symbol: 'TON',\n  slug: 'toncoin',\n  decimals: 9,\n  chain: 'ton',\n  cmcSlug: 'toncoin',\n} as const;\n\nexport const TRX = {\n  name: 'TRON',\n  symbol: 'TRX',\n  slug: 'trx',\n  decimals: 6,\n  chain: 'tron',\n  cmcSlug: 'tron',\n} as const;\n\nexport const MYCOIN = {\n  name: 'MyTonWallet Coin',\n  symbol: 'MY',\n  slug: 'ton-eqcfvnlrbn',\n  decimals: 9,\n  chain: 'ton',\n  minterAddress: 'EQCFVNlRb-NHHDQfv3Q9xvDXBLJlay855_xREsq5ZDX6KN-w',\n} as const;\n\nexport const MYCOIN_TESTNET = {\n  ...MYCOIN,\n  slug: 'ton-kqawlxpebw',\n  minterAddress: 'kQAWlxpEbwhCDFX9gp824ee2xVBhAh5VRSGWfbNFDddAbQoQ',\n} as const;\n\nexport const CHAIN_CONFIG = {\n  ton: {\n    isMemoSupported: true,\n    isDnsSupported: true,\n    addressRegex: /^([-\\w_]{48}|0:[\\da-h]{64})$/i,\n    addressPrefixRegex: /^([-\\w_]{1,48}|0:[\\da-h]{0,64})$/i,\n    nativeToken: TONCOIN,\n  },\n  tron: {\n    isMemoSupported: false,\n    isDnsSupported: false,\n    addressRegex: /^T[1-9A-HJ-NP-Za-km-z]{33}$/,\n    addressPrefixRegex: /^T[1-9A-HJ-NP-Za-km-z]{0,33}$/,\n    nativeToken: TRX,\n    mainnet: {\n      apiUrl: TRON_MAINNET_API_URL,\n      usdtAddress: 'TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t',\n    },\n    testnet: {\n      apiUrl: TRON_TESTNET_API_URL,\n      usdtAddress: 'TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs',\n    },\n  },\n} as const;\n\nexport const TRC20_USDT_MAINNET_SLUG = 'tron-tr7nhqjekq';\nexport const TRC20_USDT_TESTNET_SLUG = 'tron-tg3xxyexbk';\nexport const TON_USDT_SLUG = 'ton-eqcxe6mutq';\nexport const STAKED_TON_SLUG = 'ton-eqcqc6ehrj';\nexport const STAKED_MYCOIN_SLUG = 'ton-eqcbzvsfwq';\nexport const TRX_SWAP_COUNT_FEE_ADDRESS = 'TW2LXSebZ7Br1zHaiA2W1zRojDkDwjGmpw';\nexport const MYCOIN_STAKING_POOL = 'EQC3roTiRRsoLzfYVK7yVVoIZjTEqAjQU3ju7aQ7HWTVL5o5';\n\nexport const ETHENA_STAKING_VAULT = 'EQChGuD1u0e7KUWHH5FaYh_ygcLXhsdG2nSHPXHW8qqnpZXW';\nexport const ETHENA_STAKING_MIN_AMOUNT = 1_000_000; // 1 USDe\n// eslint-disable-next-line @stylistic/max-len\nexport const ETHENA_ELIGIBILITY_CHECK_URL = 'https://t.me/id_app/start?startapp=cQeewNnc3pVphUcwY63WruKMQDpgePd1E7eMVoqphMZAdGoU9jwS4qRqrM1kSeaqrAiiDiC3EYAJPwZDGWqxZpw5vtGxmHma59XEt';\n\n// In cross-chain swaps, only a few TON/TRON tokens are available.\n// Its not optimal to request swap history for all the others.\nexport const SWAP_CROSSCHAIN_SLUGS = new Set([\n  TONCOIN.slug,\n  TON_USDT_SLUG,\n  TRX.slug,\n  TRC20_USDT_MAINNET_SLUG,\n]);\n\nexport const STON_PTON_ADDRESS = 'EQCM3B12QK1e4yZSf8GtBRT0aLMNyEsBc_DhVfRRtOEffLez';\nexport const STON_PTON_SLUG = 'ton-eqcm3b12qk';\n\nexport const DNS_IMAGE_GEN_URL = 'https://dns-image.mytonwallet.org/img?d=';\n\nconst TRC20_USDT = {\n  name: 'Tether USD',\n  symbol: 'USDT',\n  decimals: 6,\n  chain: 'tron',\n} as const;\n\nexport const TON_USDT = {\n  name: 'Tether USD',\n  symbol: 'USD',\n  chain: 'ton',\n  slug: TON_USDT_SLUG,\n  decimals: 6,\n  tokenAddress: 'EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs',\n} as const;\n\nexport const TON_USDE = {\n  name: 'Ethena USDe',\n  symbol: 'USDe',\n  chain: 'ton',\n  tokenAddress: 'EQAIb6KmdfdDR7CN1GBqVJuP25iCnLKCvBlJ07Evuu2dzP5f',\n  slug: 'ton-eqaib6kmdf',\n  decimals: 6,\n  // eslint-disable-next-line @stylistic/max-len\n  image: 'https://imgproxy.toncenter.com/binMwUmcnFtjvgjp4wSEbsECXwfXUwbPkhVvsvpubNw/pr:small/aHR0cHM6Ly9tZXRhZGF0YS5sYXllcnplcm8tYXBpLmNvbS9hc3NldHMvVVNEZS5wbmc',\n} as const;\n\nexport const TON_TSUSDE = {\n  name: 'Ethena tsUSDe',\n  symbol: 'tsUSDe',\n  chain: 'ton',\n  tokenAddress: 'EQDQ5UUyPHrLcQJlPAczd_fjxn8SLrlNQwolBznxCdSlfQwr',\n  slug: 'ton-eqdq5uuyph',\n  decimals: 6,\n  // eslint-disable-next-line @stylistic/max-len\n  image: 'https://cache.tonapi.io/imgproxy/vGZJ7erwsWPo7DpVG_V7ygNn7VGs0szZXcNLHB_l0ms/rs:fill:200:200:1/g:no/aHR0cHM6Ly9tZXRhZGF0YS5sYXllcnplcm8tYXBpLmNvbS9hc3NldHMvdHNVU0RlLnBuZw.webp',\n} as const;\n\nexport const ALL_STAKING_POOLS = [\n  LIQUID_POOL,\n  MYCOIN_STAKING_POOL,\n  ETHENA_STAKING_VAULT,\n  TON_TSUSDE.tokenAddress,\n];\n\nexport const DEFAULT_ENABLED_TOKEN_SLUGS = [\n  TONCOIN.slug, TON_USDT_SLUG, TRX.slug, TRC20_USDT_TESTNET_SLUG, TRC20_USDT_MAINNET_SLUG,\n] as string[];\n\n// Toncoin, USDT TON, TRX, USDT TRC20\nexport const DEFAULT_ENABLED_TOKEN_COUNT = 4;\n\nexport const PRIORITY_TOKEN_SLUGS = [\n  TONCOIN.slug, TON_USDT_SLUG, TRX.slug,\n] as string[];\n\nconst COMMON_TOKEN = {\n  isFromBackend: true,\n  price: 0,\n  priceUsd: 0,\n  percentChange24h: 0,\n};\n\nexport const TOKEN_INFO: Record<string, ApiTokenWithPrice> = {\n  toncoin: {\n    ...TONCOIN,\n    isFromBackend: true,\n    price: 3.1,\n    priceUsd: 3.1,\n    percentChange24h: 0,\n  },\n  trx: {\n    ...TRX,\n    ...COMMON_TOKEN,\n  },\n  [TRC20_USDT_MAINNET_SLUG]: { // mainnet\n    ...TRC20_USDT,\n    slug: TRC20_USDT_MAINNET_SLUG,\n    tokenAddress: 'TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t',\n    ...COMMON_TOKEN,\n  },\n  [TRC20_USDT_TESTNET_SLUG]: { // testnet\n    ...TRC20_USDT,\n    slug: TRC20_USDT_TESTNET_SLUG,\n    tokenAddress: 'TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs',\n    ...COMMON_TOKEN,\n  },\n  [TON_USDT_SLUG]: {\n    ...TON_USDT,\n    // eslint-disable-next-line @stylistic/max-len\n    image: 'https://cache.tonapi.io/imgproxy/T3PB4s7oprNVaJkwqbGg54nexKE0zzKhcrPv8jcWYzU/rs:fill:200:200:1/g:no/aHR0cHM6Ly90ZXRoZXIudG8vaW1hZ2VzL2xvZ29DaXJjbGUucG5n.webp',\n    slug: TON_USDT_SLUG,\n    ...COMMON_TOKEN,\n  },\n  [MYCOIN.slug]: {\n    ...MYCOIN,\n    // eslint-disable-next-line @stylistic/max-len\n    image: 'https://cache.tonapi.io/imgproxy/Qy038wCBKISofJ0hYMlj6COWma330cx3Ju1ZSPM2LRU/rs:fill:200:200:1/g:no/aHR0cHM6Ly9teXRvbndhbGxldC5pby9sb2dvLTI1Ni1ibHVlLnBuZw.webp',\n    ...COMMON_TOKEN,\n  },\n  [TON_USDE.slug]: {\n    ...TON_USDE,\n    ...COMMON_TOKEN,\n  },\n  [TON_TSUSDE.slug]: {\n    ...TON_TSUSDE,\n    ...COMMON_TOKEN,\n  },\n};\n\nexport const TOKEN_WITH_LABEL: Record<string, string> = {\n  [TRC20_USDT_MAINNET_SLUG]: 'TRC-20',\n  [TRC20_USDT_TESTNET_SLUG]: 'TRC-20',\n  [TON_USDT_SLUG]: 'TON',\n};\n\nexport const INIT_SWAP_ASSETS: Record<string, ApiSwapAsset> = {\n  toncoin: {\n    name: 'Toncoin',\n    symbol: TONCOIN.symbol,\n    chain: TONCOIN.chain,\n    slug: TONCOIN.slug,\n    decimals: TONCOIN.decimals,\n    price: 0,\n    priceUsd: 0,\n    isPopular: true,\n  },\n  [TON_USDT_SLUG]: {\n    name: 'Tether USD',\n    symbol: 'USD',\n    chain: 'ton',\n    slug: TON_USDT_SLUG,\n    decimals: 9,\n    // eslint-disable-next-line @stylistic/max-len\n    image: 'https://cache.tonapi.io/imgproxy/T3PB4s7oprNVaJkwqbGg54nexKE0zzKhcrPv8jcWYzU/rs:fill:200:200:1/g:no/aHR0cHM6Ly90ZXRoZXIudG8vaW1hZ2VzL2xvZ29DaXJjbGUucG5n.webp',\n    tokenAddress: 'EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs',\n    price: 0,\n    priceUsd: 0,\n    isPopular: true,\n  },\n};\n\nexport const DEFAULT_TRX_SWAP_FIRST_TOKEN_SLUG = TONCOIN.slug;\nexport const DEFAULT_SWAP_FIRST_TOKEN_SLUG = TONCOIN.slug;\nexport const DEFAULT_SWAP_SECOND_TOKEN_SLUG = TON_USDT_SLUG;\nexport const DEFAULT_TRANSFER_TOKEN_SLUG = TONCOIN.slug;\nexport const DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG = TRC20_USDT_MAINNET_SLUG;\nexport const SWAP_DEX_LABELS: Record<ApiSwapDexLabel, string> = {\n  dedust: 'DeDust',\n  ston: 'STON.fi',\n};\n\nexport const MULTITAB_DATA_CHANNEL_NAME = IS_CORE_WALLET ? 'tw-multitab' : 'mtw-multitab';\nexport const ACTIVE_TAB_STORAGE_KEY = IS_CORE_WALLET ? 'tw-active-tab' : 'mtw-active-tab';\n\nexport const INDEXED_DB_NAME = 'keyval-store';\nexport const INDEXED_DB_STORE_NAME = 'keyval';\n\nexport const WINDOW_PROVIDER_CHANNEL = 'windowProvider';\nexport const WINDOW_PROVIDER_PORT = `${IS_CORE_WALLET ? 'TonWallet' : 'MyTonWallet'}_popup_reversed`;\n\nexport const SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY = IS_CORE_WALLET;\nexport const PORTRAIT_MIN_ASSETS_TAB_VIEW = 4;\nexport const LANDSCAPE_MIN_ASSETS_TAB_VIEW = 6;\n\nexport const DEFAULT_PRICE_CURRENCY = 'USD';\nexport const CURRENCIES: Record<ApiBaseCurrency, { name: string; decimals: number; shortSymbol?: string }> = {\n  USD: { name: 'US Dollar', decimals: 2, shortSymbol: '$' },\n  EUR: { name: 'Euro', decimals: 2, shortSymbol: '' },\n  RUB: { name: 'Ruble', decimals: 2, shortSymbol: '' },\n  CNY: { name: 'Yuan', decimals: 2, shortSymbol: '' },\n  BTC: { name: 'Bitcoin', decimals: 9 },\n  [TONCOIN.symbol]: { name: 'Toncoin', decimals: 9 },\n};\n\nexport const BURN_ADDRESS = 'UQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJKZ';\n\nexport const DEFAULT_WALLET_VERSION: ApiTonWalletVersion = 'W5';\nexport const POPULAR_WALLET_VERSIONS: ApiTonWalletVersion[] = ['v3R1', 'v3R2', 'v4R2', 'W5'];\nexport const LEDGER_WALLET_VERSIONS: ApiTonWalletVersion[] = ['v3R2', 'v4R2'];\n\nexport const DEFAULT_TIMEOUT = 10000;\nexport const DEFAULT_RETRIES = 3;\nexport const DEFAULT_ERROR_PAUSE = 500;\n\nexport const HISTORY_PERIODS: TokenPeriod[] = ['1D', '7D', '1M', '3M', '1Y', 'ALL'];\n\nexport const BROWSER_HISTORY_LIMIT = 10;\n\nexport const NFT_BATCH_SIZE = 4;\nexport const NOTCOIN_VOUCHERS_ADDRESS = 'EQDmkj65Ab_m0aZaW8IpKw4kYqIgITw_HRstYEkVQ6NIYCyW';\nexport const BURN_CHUNK_DURATION_APPROX_SEC = 30;\nexport const NOTCOIN_FORWARD_TON_AMOUNT = 30000000n; // 0.03 TON\nexport const NOTCOIN_EXCHANGERS = [\n  'EQAPZauWVPUcm2hUJT9n36pxznEhl46rEn1bzBXN0RY_yiy2',\n  'EQASgm0Qv3h2H2mF0W06ikPqYq2ctT3dyXMJH_svbEKKB3iZ',\n  'EQArlmP-RhVIG2yAFGZyPZfM3m0YccxmpvoRi6sgRzWnAA0s',\n  'EQA6pL-spYqZp1Ck6o3rpY45Cl-bvLMW_j3qdVejOkUWpLnm',\n  'EQBJ_ehYjumQKbXfWUue1KHKXdTm1GuYJB0Fj2ST_DwORvpd',\n  'EQBRmYSjxh9xlZpUqEmGjF5UjukI9v_Cm2kCTu4CoBn3XkOD',\n  'EQBkiqncd7AFT5_23H-RoA2Vynk-Nzq_dLoeMVRthAU9RF0p',\n  'EQB_OzTHXbztABe0QHgr4PtAV8T64LR6aDunXgaAoihOdxwO',\n  'EQCL-x5kLg6tKVNGryItTuj6tG3FH5mhUEu0xRqQc-kbEmbe',\n  'EQCZh2yJ46RaQH3AYmjEA8SMMXi77Oein4-3lvqkHseIAhD-',\n  'EQChKo5IK3iNqUHUGDB9gtzjCjMTPtmsFqekuCA2MdreVEyu',\n  'EQC6DNCBv076TIliRMfOt20RpbS7rNKDfSky3WrFEapFt8AH',\n  'EQDE_XFZOYae_rl3ZMsgBCtRSmYhl8B4y2BZEP7oiGBDhlgy',\n  'EQDddqpGA2ePXQF47A2DSL3GF6ZzIVmimfM2d16cdymy2noT',\n  'EQDv0hNNAamhYltCh3pTJrq3oRB9RW2ZhEYkTP6fhj5BtZNu',\n  'EQD2mP7zgO7-imUJhqYry3i07aJ_SR53DaokMupfAAobt0Xw',\n] as const;\n\nexport const CLAIM_ADDRESS = 'EQB3zOTvPi1PmwdcTpqSfFKZnhi1GNKEVJM-LdoAirdLtash';\nexport const CLAIM_AMOUNT = 30000000n; // 0.03 TON\nexport const CLAIM_COMMENT = 'claim';\n\nexport const MINT_CARD_ADDRESS = 'EQBpst3ZWJ9Dqq5gE2YH-yPsFK_BqMOmgi7Z_qK6v7WbrPWv';\nexport const MINT_CARD_COMMENT = 'Mint card';\nexport const MINT_CARD_REFUND_COMMENT = 'Refund';\n\n// eslint-disable-next-line @stylistic/max-len\nexport const RE_LINK_TEMPLATE = /((ftp|https?):\\/\\/)?(?<host>(www\\\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z][-a-zA-Z0-9]{1,62})\\b([-a-zA-Z0-9()@:%_+.,~#?&/=]*)/g;\n// eslint-disable-next-line @stylistic/max-len\nexport const RE_TG_BOT_MENTION = /telegram[:\\s-]*((@[a-z0-9_]+)|(https:\\/\\/)?(t\\.me|telegram\\.me|telegram\\.dog)\\/[a-z0-9_]+)/mig;\n\nexport const STARS_SYMBOL = '';\n\nexport const GIVEAWAY_CHECKIN_URL = process.env.GIVEAWAY_CHECKIN_URL || 'https://giveaway.mytonwallet.io';\n\nexport const AUTOLOCK_OPTIONS_LIST = [\n  {\n    value: 'never',\n    name: 'Disabled',\n    selectedName: 'Disabled',\n    period: 0,\n  },\n  {\n    value: '1',\n    name: '30 seconds',\n    selectedName: 'If away for 30 sec',\n    period: 30_000,\n  },\n  {\n    value: '2',\n    name: '3 minutes',\n    selectedName: 'If away for 3 min',\n    period: 60_000 * 3,\n  },\n  {\n    value: '3',\n    name: '10 minutes',\n    selectedName: 'If away for 10 min',\n    period: 60_000 * 10,\n  },\n] as const;\n\nexport const AUTO_CONFIRM_DURATION_MINUTES = 5;\n\nexport const PRICELESS_TOKEN_HASHES = new Set([\n  '173e31eee054cb0c76f77edc7956bed766bf48a1f63bd062d87040dcd3df700f', // FIVA SY tsTON EQAxGi9Al7hamLAORroxGkvfap6knGyzI50ThkP3CLPLTtOZ\n  '5226dd4e6db9af26b24d5ca822bc4053b7e08152f923932abf25030c7e38bb42', // FIVA PT tsTON EQAkxIRGXgs2vD2zjt334MBjD3mXg2GsyEZHfzuYX_trQkFL\n  'fea2c08a704e5192b7f37434927170440d445b87aab865c3ea2a68abe7168204', // FIVA YT tsTON EQAcy60qg22RCq87A_qgYK8hooEgjCZ44yxhdnKYdlWIfKXL\n  'e691cf9081a8aeb22ed4d94829f6626c9d822752e035800b5543c43f83d134b5', // FIVA LP tsTON EQD3BjCjxuf8mu5kvxajVbe-Ila1ScZZlAi03oS7lMmAJjM3\n  '301ce25925830d713b326824e552e962925c4ff45b1e3ea21fc363a459a49b43', // FIVA SY eUSDT EQDi9blCcyT-k8iMpFMYY0t7mHVyiCB50ZsRgyUECJDuGvIl\n  '02250f83fbb8624d859c2c045ac70ee2b3b959688c3d843aec773be9b36dbfc3', // FIVA PT eUSDT EQBzVrYkYPHx8D_HPfQacm1xONa4XSRxl826vHkx_laP2HOe\n  'dba3adb2c917db80fd71a6a68c1fc9e12976491a8309d5910f9722efc084ce4d', // FIVA YT eUSDT EQCwUSc2qrY5rn9BfFBG9ARAHePTUvITDl97UD0zOreWzLru\n  '7da9223b90984d6a144e71611a8d7c65a6298cad734faed79438dc0f7a8e53d1', // FIVA LP eUSDT EQBNlIZxIbQGQ78cXgG3VRcyl8A0kLn_6BM9kabiHHhWC4qY\n  'ddf80de336d580ab3c11d194f189c362e2ca1225cae224ea921deeaba7eca818', // tsUSDe EQDQ5UUyPHrLcQJlPAczd_fjxn8SLrlNQwolBznxCdSlfQwr\n  'eb9d9891a32ec94425c09735f6ade73f4c171da0091f874d6e9d25247d583990', // Affluent TON Lending Vault EQADQ6JcK0NMuNM5uwCcS9bjcn2RTvcxYIZjNlhIhywUrfBN\n  'f66c149de251ffd031bdb34b79abe43a062ba16b815433691e3ec40a77f01d71', // Affluent Ethena Multiply Vault EQDXmtbt1-WSP00tSh6N6FH-4lX7LbnrjORClmtmuZqg4Ymm\n  'bca42dbdcbc0d885aaffb1eeeb027d9f338c2dd68701a05641c1d1c3171a7400', // Affluent TON Multiply Vault EQDtxQqkgIRQQR5hWlrQxiJMtLwjR3rEYNUBbEcvPDwCs1Ng\n]);\n\nexport const STAKED_TOKEN_SLUGS = new Set([\n  STAKED_TON_SLUG,\n  STAKED_MYCOIN_SLUG,\n  TON_TSUSDE.slug,\n]);\n\nexport const DEFAULT_OUR_SWAP_FEE = 0.875;\n\nexport const DEFAULT_STAKING_STATE: ApiLiquidStakingState = {\n  type: 'liquid',\n  id: 'liquid',\n  tokenSlug: TONCOIN.slug,\n  annualYield: 3.9,\n  yieldType: 'APY',\n  balance: 0n,\n  pool: LIQUID_POOL,\n  tokenBalance: 0n,\n  unstakeRequestAmount: 0n,\n  instantAvailable: 0n,\n  start: 0,\n  end: 0,\n};\n\nexport const DEFAULT_NOMINATORS_STAKING_STATE: ApiNominatorsStakingState = {\n  type: 'nominators',\n  id: 'nominators',\n  tokenSlug: TONCOIN.slug,\n  annualYield: 3.9,\n  yieldType: 'APY',\n  balance: 0n,\n  pool: 'Ef8dgIOIRyCLU0NEvF8TD6Me3wrbrkS1z3Gpjk3ppd8m8-s_',\n  start: 0,\n  end: 0,\n  pendingDepositAmount: 0n,\n};\n\nexport const SWAP_API_VERSION = 2;\nexport const TONCENTER_ACTIONS_VERSION = 'v1';\n\nexport const JVAULT_URL = 'https://jvault.xyz';\n\nexport const HELP_CENTER_URL = {\n  home: {\n    en: 'https://help.mytonwallet.io/',\n    ru: 'https://help.mytonwallet.io/ru',\n  },\n  domainScam: {\n    en: 'https://help.mytonwallet.io/intro/scams/.ton-domain-scams',\n    // eslint-disable-next-line @stylistic/max-len\n    ru: 'https://help.mytonwallet.io/ru/baza-znanii/moshennichestvo-i-skamy/moshennichestvo-s-ispolzovaniem-domenov-.ton',\n  },\n  seedScam: {\n    en: 'https://help.mytonwallet.io/intro/scams/leaked-seed-phrases',\n    ru: 'https://help.mytonwallet.io/ru/baza-znanii/moshennichestvo-i-skamy/slitye-sid-frazy',\n  },\n  ethenaStaking: {\n    en: 'https://help.mytonwallet.io/intro/staking/what-is-usde-how-does-usde-staking-work',\n    ru: 'https://help.mytonwallet.io/ru/baza-znanii/steiking/chto-takoe-usde-kak-rabotaet-steiking-usde',\n  },\n};\n\nconst ALL_TON_DNS_ZONES = [\n  {\n    suffixes: ['ton'],\n    baseFormat: /^([-\\da-z]+\\.){0,2}[-\\da-z]{4,126}$/i,\n    resolver: 'EQC3dNlesgVD8YbAazcauIrXBPfiVhMMr5YYk2in0Mtsz0Bz',\n    collectionName: 'TON DNS Domains',\n  },\n  {\n    suffixes: ['t.me'],\n    baseFormat: /^([-\\da-z]+\\.){0,2}[-_\\da-z]{4,32}$/i,\n    resolver: 'EQCA14o1-VWhS2efqoh_9M1b_A9DtKTuoqfmkn83AbJzwnPi',\n    isTelemint: true,\n    collectionName: 'Telegram Usernames',\n  },\n  {\n    suffixes: ['vip', 'ton.vip', 'vip.ton'],\n    baseFormat: /^([-\\da-z]+\\.){0,2}?[\\da-z]{1,24}$/i,\n    resolver: 'EQBWG4EBbPDv4Xj7xlPwzxd7hSyHMzwwLB5O6rY-0BBeaixS',\n    collectionName: 'VIP DNS Domains',\n    isUnofficial: true,\n  },\n  {\n    suffixes: ['gram'],\n    baseFormat: /^([-\\da-z]+\\.){0,2}[\\da-z]{1,127}$/i,\n    resolver: 'EQAic3zPce496ukFDhbco28FVsKKl2WUX_iJwaL87CBxSiLQ',\n    collectionName: 'GRAM DNS Domains',\n    isUnofficial: true,\n  },\n];\n\nexport const TON_DNS_ZONES = IS_CORE_WALLET\n  ? ALL_TON_DNS_ZONES.filter(({ isUnofficial }) => !isUnofficial)\n  : ALL_TON_DNS_ZONES;\n\nexport const DEFAULT_AUTOLOCK_OPTION: AutolockValueType = '3';\nexport const WRONG_ATTEMPTS_BEFORE_LOG_OUT_SUGGESTION = 2;\n\nexport const UNKNOWN_TOKEN = {\n  symbol: '[Unknown]',\n  decimals: 9,\n} as const;\n","export function getPlatform() {\n  const { userAgent, platform } = window.navigator;\n\n  if (/Android/.test(userAgent)) return 'Android';\n\n  if (/Linux/.test(platform)) return 'Linux';\n\n  const iosPlatforms = ['iPhone', 'iPad', 'iPod'];\n  if (\n    iosPlatforms.indexOf(platform) !== -1\n    // For new IPads with M1 chip and IPadOS platform returns \"MacIntel\"\n    || (platform === 'MacIntel' && ('maxTouchPoints' in navigator && navigator.maxTouchPoints > 2))\n  ) {\n    return 'iOS';\n  }\n\n  const macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];\n  if (macosPlatforms.indexOf(platform) !== -1) return 'macOS';\n\n  const windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n  if (windowsPlatforms.indexOf(platform) !== -1) return 'Windows';\n\n  return undefined;\n}\n","export var Directory;\n(function (Directory) {\n    /**\n     * The Documents directory.\n     * On iOS it's the app's documents directory.\n     * Use this directory to store user-generated content.\n     * On Android it's the Public Documents folder, so it's accessible from other apps.\n     * It's not accesible on Android 10 unless the app enables legacy External Storage\n     * by adding `android:requestLegacyExternalStorage=\"true\"` in the `application` tag\n     * in the `AndroidManifest.xml`.\n     * On Android 11 or newer the app can only access the files/folders the app created.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"Documents\"] = \"DOCUMENTS\";\n    /**\n     * The Data directory.\n     * On iOS it will use the Documents directory.\n     * On Android it's the directory holding application files.\n     * Files will be deleted when the application is uninstalled.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"Data\"] = \"DATA\";\n    /**\n     * The Library directory.\n     * On iOS it will use the Library directory.\n     * On Android it's the directory holding application files.\n     * Files will be deleted when the application is uninstalled.\n     *\n     * @since 1.1.0\n     */\n    Directory[\"Library\"] = \"LIBRARY\";\n    /**\n     * The Cache directory.\n     * Can be deleted in cases of low memory, so use this directory to write app-specific files.\n     * that your app can re-create easily.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"Cache\"] = \"CACHE\";\n    /**\n     * The external directory.\n     * On iOS it will use the Documents directory.\n     * On Android it's the directory on the primary shared/external\n     * storage device where the application can place persistent files it owns.\n     * These files are internal to the applications, and not typically visible\n     * to the user as media.\n     * Files will be deleted when the application is uninstalled.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"External\"] = \"EXTERNAL\";\n    /**\n     * The external storage directory.\n     * On iOS it will use the Documents directory.\n     * On Android it's the primary shared/external storage directory.\n     * It's not accesible on Android 10 unless the app enables legacy External Storage\n     * by adding `android:requestLegacyExternalStorage=\"true\"` in the `application` tag\n     * in the `AndroidManifest.xml`.\n     * It's not accesible on Android 11 or newer.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"ExternalStorage\"] = \"EXTERNAL_STORAGE\";\n})(Directory || (Directory = {}));\nexport var Encoding;\n(function (Encoding) {\n    /**\n     * Eight-bit UCS Transformation Format\n     *\n     * @since 1.0.0\n     */\n    Encoding[\"UTF8\"] = \"utf8\";\n    /**\n     * Seven-bit ASCII, a.k.a. ISO646-US, a.k.a. the Basic Latin block of the\n     * Unicode character set\n     * This encoding is only supported on Android.\n     *\n     * @since 1.0.0\n     */\n    Encoding[\"ASCII\"] = \"ascii\";\n    /**\n     * Sixteen-bit UCS Transformation Format, byte order identified by an\n     * optional byte-order mark\n     * This encoding is only supported on Android.\n     *\n     * @since 1.0.0\n     */\n    Encoding[\"UTF16\"] = \"utf16\";\n})(Encoding || (Encoding = {}));\n/**\n * @deprecated Use `Directory`.\n * @since 1.0.0\n */\nexport const FilesystemDirectory = Directory;\n/**\n * @deprecated Use `Encoding`.\n * @since 1.0.0\n */\nexport const FilesystemEncoding = Encoding;\n//# sourceMappingURL=definitions.js.map","import Deferred from './Deferred';\n\nexport type Scheduler = typeof requestAnimationFrame | typeof onTickEnd;\n\nexport const pause = (ms: number) => new Promise<void>((resolve) => {\n  setTimeout(() => resolve(), ms);\n});\n\nexport function debounce<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n  shouldRunLast = true,\n) {\n  let waitingTimeout: number | undefined;\n\n  return (...args: Parameters<F>) => {\n    if (waitingTimeout) {\n      clearTimeout(waitingTimeout);\n      waitingTimeout = undefined;\n    } else if (shouldRunFirst) {\n      fn(...args);\n    }\n\n    waitingTimeout = self.setTimeout(() => {\n      if (shouldRunLast) {\n        fn(...args);\n      }\n\n      waitingTimeout = undefined;\n    }, ms);\n  };\n}\n\n/**\n * An important feature of this throttle implementation is that it waits for `fn` to finish before scheduling the new\n * execution. That is, `fn` never gets executed in parallel with itself.\n */\nexport function throttle<F extends AnyFunction>(\n  fn: F,\n  ms: number | (() => Promise<void>),\n  shouldRunFirst = true,\n) {\n  let args: Parameters<F> | undefined;\n  let isRunning = false;\n\n  async function scheduleFn() {\n    await (typeof ms === 'function' ? ms() : pause(ms));\n    void runFn();\n  }\n\n  async function runFn() {\n    if (!args) {\n      isRunning = false;\n      return;\n    }\n\n    try {\n      const localArgs = args;\n      args = undefined;\n      await fn(...localArgs);\n    } finally {\n      // Voiding the promise to let the error produced by `fn` be thrown immediately\n      void scheduleFn();\n    }\n  }\n\n  return (..._args: Parameters<F>) => {\n    args = _args;\n\n    if (!isRunning) {\n      isRunning = true;\n\n      if (shouldRunFirst) {\n        void runFn();\n      } else {\n        void scheduleFn();\n      }\n    }\n  };\n}\n\nexport function throttleWithTickEnd<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(onTickEnd, fn);\n}\n\nexport function throttleWith<F extends AnyToVoidFunction>(schedulerFn: Scheduler, fn: F) {\n  let waiting = false;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    args = _args;\n\n    if (!waiting) {\n      waiting = true;\n\n      schedulerFn(() => {\n        waiting = false;\n        fn(...args);\n      });\n    }\n  };\n}\n\nexport function rafPromise() {\n  return new Promise<void>((resolve) => {\n    fastRaf(resolve);\n  });\n}\n\nconst FAST_RAF_TIMEOUT_FALLBACK_MS = 35; // < 30 FPS\n\nlet fastRafCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackTimeout: number | undefined;\n\n// May result in an immediate execution if called from another RAF callback which was scheduled\n// (and therefore is executed) earlier than RAF callback scheduled by `fastRaf`\nexport function fastRaf(callback: NoneToVoidFunction, withTimeoutFallback = false) {\n  if (!fastRafCallbacks) {\n    fastRafCallbacks = new Set([callback]);\n\n    requestAnimationFrame(() => {\n      const currentCallbacks = fastRafCallbacks!;\n\n      fastRafCallbacks = undefined;\n      fastRafFallbackCallbacks = undefined;\n\n      if (fastRafFallbackTimeout) {\n        clearTimeout(fastRafFallbackTimeout);\n        fastRafFallbackTimeout = undefined;\n      }\n\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    fastRafCallbacks.add(callback);\n  }\n\n  if (withTimeoutFallback) {\n    if (!fastRafFallbackCallbacks) {\n      fastRafFallbackCallbacks = new Set([callback]);\n    } else {\n      fastRafFallbackCallbacks.add(callback);\n    }\n\n    if (!fastRafFallbackTimeout) {\n      fastRafFallbackTimeout = window.setTimeout(() => {\n        const currentTimeoutCallbacks = fastRafFallbackCallbacks!;\n\n        if (fastRafCallbacks) {\n          currentTimeoutCallbacks.forEach(fastRafCallbacks.delete, fastRafCallbacks);\n        }\n        fastRafFallbackCallbacks = undefined;\n\n        if (fastRafFallbackTimeout) {\n          clearTimeout(fastRafFallbackTimeout);\n          fastRafFallbackTimeout = undefined;\n        }\n\n        currentTimeoutCallbacks.forEach((cb) => cb());\n      }, FAST_RAF_TIMEOUT_FALLBACK_MS);\n    }\n  }\n}\n\nlet onTickEndCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onTickEnd(callback: NoneToVoidFunction) {\n  if (!onTickEndCallbacks) {\n    onTickEndCallbacks = [callback];\n\n    void Promise.resolve().then(() => {\n      const currentCallbacks = onTickEndCallbacks!;\n      onTickEndCallbacks = undefined;\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    onTickEndCallbacks.push(callback);\n  }\n}\n\nconst IDLE_TIMEOUT = 500;\n\nlet onIdleCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onIdle(callback: NoneToVoidFunction) {\n  if (!self.requestIdleCallback) {\n    onTickEnd(callback);\n    return;\n  }\n\n  if (!onIdleCallbacks) {\n    onIdleCallbacks = [callback];\n\n    requestIdleCallback((deadline) => {\n      const currentCallbacks = onIdleCallbacks!;\n      onIdleCallbacks = undefined;\n\n      while (currentCallbacks.length) {\n        const cb = currentCallbacks.shift()!;\n        cb();\n\n        if (!deadline.timeRemaining()) break;\n      }\n\n      if (currentCallbacks.length) {\n        if (onIdleCallbacks) {\n          // Prepend the remaining callbacks if the next pass is already planned\n          onIdleCallbacks = currentCallbacks.concat(onIdleCallbacks);\n        } else {\n          currentCallbacks.forEach(onIdle);\n        }\n      }\n    }, { timeout: IDLE_TIMEOUT });\n  } else {\n    onIdleCallbacks.push(callback);\n  }\n}\n\nlet beforeUnloadCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onBeforeUnload(callback: NoneToVoidFunction, isLast = false) {\n  if (!beforeUnloadCallbacks) {\n    beforeUnloadCallbacks = [];\n\n    self.addEventListener('beforeunload', () => {\n      beforeUnloadCallbacks!.forEach((cb) => cb());\n    });\n  }\n\n  if (isLast) {\n    beforeUnloadCallbacks.push(callback);\n  } else {\n    beforeUnloadCallbacks.unshift(callback);\n  }\n\n  return () => {\n    beforeUnloadCallbacks = beforeUnloadCallbacks!.filter((cb) => cb !== callback);\n  };\n}\n\nexport async function waitFor(cb: () => boolean, interval: number, attempts: number) {\n  let i = 0;\n  let result = cb();\n\n  while (!result && i < attempts) {\n    await pause(interval);\n\n    i++;\n    result = cb();\n  }\n\n  return result;\n}\n\nexport function setCancellableTimeout(ms: number, cb: NoneToVoidFunction) {\n  const timeoutId = setTimeout(cb, ms);\n  return () => clearTimeout(timeoutId);\n}\n\n/**\n * Returns a function that executes every given functions (tasks) with limited concurrency (not more than\n * `maxConcurrency` at a time). The tasks are executed in the same order that they are given. Unlike throttle, executes\n * every given task.\n */\nexport function createTaskQueue(maxConcurrency = 1) {\n  const queue: AnyAsyncFunction[] = [];\n  let concurrency = 0;\n\n  const runTasks = async () => {\n    concurrency++;\n    while (queue.length) {\n      const task = queue.shift()!;\n      await task(); // Expected never to throw, because the errors are caught below\n    }\n    concurrency--;\n  };\n\n  /** Schedules execution of the given function right now. The returned promise settles with the task result. */\n  const run = <T>(task: () => MaybePromise<T>): Promise<T> => {\n    const deferred = new Deferred<T>();\n    queue.push(async () => {\n      try {\n        deferred.resolve(await task());\n      } catch (err) {\n        deferred.reject(err);\n      }\n    });\n\n    if (concurrency < maxConcurrency) {\n      void runTasks();\n    }\n\n    return deferred.promise;\n  };\n\n  /** Returns the same task function, but with limited concurrency */\n  const wrap = <Args extends unknown[], Return>(\n    task: (...args: Args) => MaybePromise<Return>,\n  ): (...args: Args) => Promise<Return> => {\n    return (...args: Args) => run(() => task(...args));\n  };\n\n  return { run, wrap };\n}\n\n/**\n * Returns a function that prevents `actions` from running in parallel with itself. If the `action` is already running,\n * queues, the next call will be queued. Unlike `throttle`, never skips the calls.\n */\nexport function forbidConcurrency<Args extends unknown[], Return>(\n  action: (...args: Args) => MaybePromise<Return>,\n): (...args: Args) => Promise<Return> {\n  return createTaskQueue(1).wrap(action);\n}\n","import type { ApiAnyDisplayError } from './types';\nimport { ApiCommonError, ApiTransactionError } from './types';\n\nexport class ApiBaseError extends Error {\n  constructor(message?: string, public displayError?: ApiAnyDisplayError) {\n    super(message);\n    this.name = this.constructor.name;\n  }\n}\n\nexport class ApiUserRejectsError extends ApiBaseError {\n  constructor(message: string = 'Canceled by the user') {\n    super(message);\n  }\n}\n\nexport class ApiServerError extends ApiBaseError {\n  constructor(message: string, public statusCode?: number) {\n    super(message, ApiCommonError.ServerError);\n  }\n}\n\nexport class ApiUnsupportedVersionError extends ApiBaseError {\n  constructor(message: string) {\n    super(message, ApiCommonError.UnsupportedVersion);\n  }\n}\n\nexport class ApiHardwareBlindSigningNotEnabled extends ApiBaseError {\n  constructor(message: string = 'Blind signing not enabled') {\n    super(message, ApiTransactionError.HardwareBlindSigningNotEnabled);\n  }\n}\n\nexport class AbortOperationError extends ApiBaseError {\n  constructor(message: string = 'Abort operation') {\n    super(message);\n  }\n}\n\nexport class NotImplemented extends ApiBaseError {\n  constructor(message: string = 'Not implemented') {\n    super(message);\n  }\n}\n\nexport function maybeApiErrors(fn: AnyAsyncFunction) {\n  return async (...args: any) => {\n    try {\n      return await fn(...args);\n    } catch (err) {\n      return handleServerError(err);\n    }\n  };\n}\n\nexport function handleServerError(err: any) {\n  if (err instanceof ApiServerError) {\n    return { error: err.displayError! };\n  }\n  throw err;\n}\n","import type { MediaWorkerApi } from '../lib/mediaWorker/index.worker';\nimport type { Connector } from './PostMessageConnector';\n\nimport { IS_TEST } from '../config';\n\nimport { createConnector } from './PostMessageConnector';\n\nexport const MAX_WORKERS = Math.min(navigator.hardwareConcurrency || 4, 4);\n\nlet instances: {\n  worker: Worker;\n  connector: Connector<MediaWorkerApi>;\n}[] | undefined;\n\nexport default function launchMediaWorkers() {\n  if (IS_TEST) return [];\n  if (!instances) {\n    instances = new Array(MAX_WORKERS).fill(undefined).map(\n      () => {\n        const worker = new Worker(new URL('../lib/mediaWorker/index.worker.ts', import.meta.url));\n        const connector = createConnector<MediaWorkerApi>(worker);\n        return { worker, connector };\n      },\n    );\n  }\n\n  return instances;\n}\n\nexport function requestMediaWorker(payload: Parameters<Connector<MediaWorkerApi>['request']>[0], index: number) {\n  return launchMediaWorkers()[index].connector.request(payload);\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n","/*\n *  big.js v6.2.1\n *  A small, fast, easy-to-use library for arbitrary-precision decimal arithmetic.\n *  Copyright (c) 2022 Michael Mclaughlin\n *  https://github.com/MikeMcl/big.js/LICENCE.md\n */\n\n\n/************************************** EDITABLE DEFAULTS *****************************************/\n\n\n  // The default values below must be integers within the stated ranges.\n\n  /*\n   * The maximum number of decimal places (DP) of the results of operations involving division:\n   * div and sqrt, and pow with negative exponents.\n   */\nvar DP = 20,          // 0 to MAX_DP\n\n  /*\n   * The rounding mode (RM) used when rounding to the above decimal places.\n   *\n   *  0  Towards zero (i.e. truncate, no rounding).       (ROUND_DOWN)\n   *  1  To nearest neighbour. If equidistant, round up.  (ROUND_HALF_UP)\n   *  2  To nearest neighbour. If equidistant, to even.   (ROUND_HALF_EVEN)\n   *  3  Away from zero.                                  (ROUND_UP)\n   */\n  RM = 1,             // 0, 1, 2 or 3\n\n  // The maximum value of DP and Big.DP.\n  MAX_DP = 1E6,       // 0 to 1000000\n\n  // The maximum magnitude of the exponent argument to the pow method.\n  MAX_POWER = 1E6,    // 1 to 1000000\n\n  /*\n   * The negative exponent (NE) at and beneath which toString returns exponential notation.\n   * (JavaScript numbers: -7)\n   * -1000000 is the minimum recommended exponent value of a Big.\n   */\n  NE = -7,            // 0 to -1000000\n\n  /*\n   * The positive exponent (PE) at and above which toString returns exponential notation.\n   * (JavaScript numbers: 21)\n   * 1000000 is the maximum recommended exponent value of a Big, but this limit is not enforced.\n   */\n  PE = 21,            // 0 to 1000000\n\n  /*\n   * When true, an error will be thrown if a primitive number is passed to the Big constructor,\n   * or if valueOf is called, or if toNumber is called on a Big which cannot be converted to a\n   * primitive number without a loss of precision.\n   */\n  STRICT = false,     // true or false\n\n\n/**************************************************************************************************/\n\n\n  // Error messages.\n  NAME = '[big.js] ',\n  INVALID = NAME + 'Invalid ',\n  INVALID_DP = INVALID + 'decimal places',\n  INVALID_RM = INVALID + 'rounding mode',\n  DIV_BY_ZERO = NAME + 'Division by zero',\n\n  // The shared prototype object.\n  P = {},\n  UNDEFINED = void 0,\n  NUMERIC = /^-?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i;\n\n\n/*\n * Create and return a Big constructor.\n */\nfunction _Big_() {\n\n  /*\n   * The Big constructor and exported function.\n   * Create and return a new instance of a Big number object.\n   *\n   * n {number|string|Big} A numeric value.\n   */\n  function Big(n) {\n    var x = this;\n\n    // Enable constructor usage without new.\n    if (!(x instanceof Big)) return n === UNDEFINED ? _Big_() : new Big(n);\n\n    // Duplicate.\n    if (n instanceof Big) {\n      x.s = n.s;\n      x.e = n.e;\n      x.c = n.c.slice();\n    } else {\n      if (typeof n !== 'string') {\n        if (Big.strict === true && typeof n !== 'bigint') {\n          throw TypeError(INVALID + 'value');\n        }\n\n        // Minus zero?\n        n = n === 0 && 1 / n < 0 ? '-0' : String(n);\n      }\n\n      parse(x, n);\n    }\n\n    // Retain a reference to this Big constructor.\n    // Shadow Big.prototype.constructor which points to Object.\n    x.constructor = Big;\n  }\n\n  Big.prototype = P;\n  Big.DP = DP;\n  Big.RM = RM;\n  Big.NE = NE;\n  Big.PE = PE;\n  Big.strict = STRICT;\n  Big.roundDown = 0;\n  Big.roundHalfUp = 1;\n  Big.roundHalfEven = 2;\n  Big.roundUp = 3;\n\n  return Big;\n}\n\n\n/*\n * Parse the number or string value passed to a Big constructor.\n *\n * x {Big} A Big number instance.\n * n {number|string} A numeric value.\n */\nfunction parse(x, n) {\n  var e, i, nl;\n\n  if (!NUMERIC.test(n)) {\n    throw Error(INVALID + 'number');\n  }\n\n  // Determine sign.\n  x.s = n.charAt(0) == '-' ? (n = n.slice(1), -1) : 1;\n\n  // Decimal point?\n  if ((e = n.indexOf('.')) > -1) n = n.replace('.', '');\n\n  // Exponential form?\n  if ((i = n.search(/e/i)) > 0) {\n\n    // Determine exponent.\n    if (e < 0) e = i;\n    e += +n.slice(i + 1);\n    n = n.substring(0, i);\n  } else if (e < 0) {\n\n    // Integer.\n    e = n.length;\n  }\n\n  nl = n.length;\n\n  // Determine leading zeros.\n  for (i = 0; i < nl && n.charAt(i) == '0';) ++i;\n\n  if (i == nl) {\n\n    // Zero.\n    x.c = [x.e = 0];\n  } else {\n\n    // Determine trailing zeros.\n    for (; nl > 0 && n.charAt(--nl) == '0';);\n    x.e = e - i - 1;\n    x.c = [];\n\n    // Convert string to array of digits without leading/trailing zeros.\n    for (e = 0; i <= nl;) x.c[e++] = +n.charAt(i++);\n  }\n\n  return x;\n}\n\n\n/*\n * Round Big x to a maximum of sd significant digits using rounding mode rm.\n *\n * x {Big} The Big to round.\n * sd {number} Significant digits: integer, 0 to MAX_DP inclusive.\n * rm {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n * [more] {boolean} Whether the result of division was truncated.\n */\nfunction round(x, sd, rm, more) {\n  var xc = x.c;\n\n  if (rm === UNDEFINED) rm = x.constructor.RM;\n  if (rm !== 0 && rm !== 1 && rm !== 2 && rm !== 3) {\n    throw Error(INVALID_RM);\n  }\n\n  if (sd < 1) {\n    more =\n      rm === 3 && (more || !!xc[0]) || sd === 0 && (\n      rm === 1 && xc[0] >= 5 ||\n      rm === 2 && (xc[0] > 5 || xc[0] === 5 && (more || xc[1] !== UNDEFINED))\n    );\n\n    xc.length = 1;\n\n    if (more) {\n\n      // 1, 0.1, 0.01, 0.001, 0.0001 etc.\n      x.e = x.e - sd + 1;\n      xc[0] = 1;\n    } else {\n\n      // Zero.\n      xc[0] = x.e = 0;\n    }\n  } else if (sd < xc.length) {\n\n    // xc[sd] is the digit after the digit that may be rounded up.\n    more =\n      rm === 1 && xc[sd] >= 5 ||\n      rm === 2 && (xc[sd] > 5 || xc[sd] === 5 &&\n        (more || xc[sd + 1] !== UNDEFINED || xc[sd - 1] & 1)) ||\n      rm === 3 && (more || !!xc[0]);\n\n    // Remove any digits after the required precision.\n    xc.length = sd;\n\n    // Round up?\n    if (more) {\n\n      // Rounding up may mean the previous digit has to be rounded up.\n      for (; ++xc[--sd] > 9;) {\n        xc[sd] = 0;\n        if (sd === 0) {\n          ++x.e;\n          xc.unshift(1);\n          break;\n        }\n      }\n    }\n\n    // Remove trailing zeros.\n    for (sd = xc.length; !xc[--sd];) xc.pop();\n  }\n\n  return x;\n}\n\n\n/*\n * Return a string representing the value of Big x in normal or exponential notation.\n * Handles P.toExponential, P.toFixed, P.toJSON, P.toPrecision, P.toString and P.valueOf.\n */\nfunction stringify(x, doExponential, isNonzero) {\n  var e = x.e,\n    s = x.c.join(''),\n    n = s.length;\n\n  // Exponential notation?\n  if (doExponential) {\n    s = s.charAt(0) + (n > 1 ? '.' + s.slice(1) : '') + (e < 0 ? 'e' : 'e+') + e;\n\n  // Normal notation.\n  } else if (e < 0) {\n    for (; ++e;) s = '0' + s;\n    s = '0.' + s;\n  } else if (e > 0) {\n    if (++e > n) {\n      for (e -= n; e--;) s += '0';\n    } else if (e < n) {\n      s = s.slice(0, e) + '.' + s.slice(e);\n    }\n  } else if (n > 1) {\n    s = s.charAt(0) + '.' + s.slice(1);\n  }\n\n  return x.s < 0 && isNonzero ? '-' + s : s;\n}\n\n\n// Prototype/instance methods\n\n\n/*\n * Return a new Big whose value is the absolute value of this Big.\n */\nP.abs = function () {\n  var x = new this.constructor(this);\n  x.s = 1;\n  return x;\n};\n\n\n/*\n * Return 1 if the value of this Big is greater than the value of Big y,\n *       -1 if the value of this Big is less than the value of Big y, or\n *        0 if they have the same value.\n */\nP.cmp = function (y) {\n  var isneg,\n    x = this,\n    xc = x.c,\n    yc = (y = new x.constructor(y)).c,\n    i = x.s,\n    j = y.s,\n    k = x.e,\n    l = y.e;\n\n  // Either zero?\n  if (!xc[0] || !yc[0]) return !xc[0] ? !yc[0] ? 0 : -j : i;\n\n  // Signs differ?\n  if (i != j) return i;\n\n  isneg = i < 0;\n\n  // Compare exponents.\n  if (k != l) return k > l ^ isneg ? 1 : -1;\n\n  j = (k = xc.length) < (l = yc.length) ? k : l;\n\n  // Compare digit by digit.\n  for (i = -1; ++i < j;) {\n    if (xc[i] != yc[i]) return xc[i] > yc[i] ^ isneg ? 1 : -1;\n  }\n\n  // Compare lengths.\n  return k == l ? 0 : k > l ^ isneg ? 1 : -1;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big divided by the value of Big y, rounded,\n * if necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.\n */\nP.div = function (y) {\n  var x = this,\n    Big = x.constructor,\n    a = x.c,                  // dividend\n    b = (y = new Big(y)).c,   // divisor\n    k = x.s == y.s ? 1 : -1,\n    dp = Big.DP;\n\n  if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n    throw Error(INVALID_DP);\n  }\n\n  // Divisor is zero?\n  if (!b[0]) {\n    throw Error(DIV_BY_ZERO);\n  }\n\n  // Dividend is 0? Return +-0.\n  if (!a[0]) {\n    y.s = k;\n    y.c = [y.e = 0];\n    return y;\n  }\n\n  var bl, bt, n, cmp, ri,\n    bz = b.slice(),\n    ai = bl = b.length,\n    al = a.length,\n    r = a.slice(0, bl),   // remainder\n    rl = r.length,\n    q = y,                // quotient\n    qc = q.c = [],\n    qi = 0,\n    p = dp + (q.e = x.e - y.e) + 1;    // precision of the result\n\n  q.s = k;\n  k = p < 0 ? 0 : p;\n\n  // Create version of divisor with leading zero.\n  bz.unshift(0);\n\n  // Add zeros to make remainder as long as divisor.\n  for (; rl++ < bl;) r.push(0);\n\n  do {\n\n    // n is how many times the divisor goes into current remainder.\n    for (n = 0; n < 10; n++) {\n\n      // Compare divisor and remainder.\n      if (bl != (rl = r.length)) {\n        cmp = bl > rl ? 1 : -1;\n      } else {\n        for (ri = -1, cmp = 0; ++ri < bl;) {\n          if (b[ri] != r[ri]) {\n            cmp = b[ri] > r[ri] ? 1 : -1;\n            break;\n          }\n        }\n      }\n\n      // If divisor < remainder, subtract divisor from remainder.\n      if (cmp < 0) {\n\n        // Remainder can't be more than 1 digit longer than divisor.\n        // Equalise lengths using divisor with extra leading zero?\n        for (bt = rl == bl ? b : bz; rl;) {\n          if (r[--rl] < bt[rl]) {\n            ri = rl;\n            for (; ri && !r[--ri];) r[ri] = 9;\n            --r[ri];\n            r[rl] += 10;\n          }\n          r[rl] -= bt[rl];\n        }\n\n        for (; !r[0];) r.shift();\n      } else {\n        break;\n      }\n    }\n\n    // Add the digit n to the result array.\n    qc[qi++] = cmp ? n : ++n;\n\n    // Update the remainder.\n    if (r[0] && cmp) r[rl] = a[ai] || 0;\n    else r = [a[ai]];\n\n  } while ((ai++ < al || r[0] !== UNDEFINED) && k--);\n\n  // Leading zero? Do not remove if result is simply zero (qi == 1).\n  if (!qc[0] && qi != 1) {\n\n    // There can't be more than one zero.\n    qc.shift();\n    q.e--;\n    p--;\n  }\n\n  // Round?\n  if (qi > p) round(q, p, Big.RM, r[0] !== UNDEFINED);\n\n  return q;\n};\n\n\n/*\n * Return true if the value of this Big is equal to the value of Big y, otherwise return false.\n */\nP.eq = function (y) {\n  return this.cmp(y) === 0;\n};\n\n\n/*\n * Return true if the value of this Big is greater than the value of Big y, otherwise return\n * false.\n */\nP.gt = function (y) {\n  return this.cmp(y) > 0;\n};\n\n\n/*\n * Return true if the value of this Big is greater than or equal to the value of Big y, otherwise\n * return false.\n */\nP.gte = function (y) {\n  return this.cmp(y) > -1;\n};\n\n\n/*\n * Return true if the value of this Big is less than the value of Big y, otherwise return false.\n */\nP.lt = function (y) {\n  return this.cmp(y) < 0;\n};\n\n\n/*\n * Return true if the value of this Big is less than or equal to the value of Big y, otherwise\n * return false.\n */\nP.lte = function (y) {\n  return this.cmp(y) < 1;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big minus the value of Big y.\n */\nP.minus = P.sub = function (y) {\n  var i, j, t, xlty,\n    x = this,\n    Big = x.constructor,\n    a = x.s,\n    b = (y = new Big(y)).s;\n\n  // Signs differ?\n  if (a != b) {\n    y.s = -b;\n    return x.plus(y);\n  }\n\n  var xc = x.c.slice(),\n    xe = x.e,\n    yc = y.c,\n    ye = y.e;\n\n  // Either zero?\n  if (!xc[0] || !yc[0]) {\n    if (yc[0]) {\n      y.s = -b;\n    } else if (xc[0]) {\n      y = new Big(x);\n    } else {\n      y.s = 1;\n    }\n    return y;\n  }\n\n  // Determine which is the bigger number. Prepend zeros to equalise exponents.\n  if (a = xe - ye) {\n\n    if (xlty = a < 0) {\n      a = -a;\n      t = xc;\n    } else {\n      ye = xe;\n      t = yc;\n    }\n\n    t.reverse();\n    for (b = a; b--;) t.push(0);\n    t.reverse();\n  } else {\n\n    // Exponents equal. Check digit by digit.\n    j = ((xlty = xc.length < yc.length) ? xc : yc).length;\n\n    for (a = b = 0; b < j; b++) {\n      if (xc[b] != yc[b]) {\n        xlty = xc[b] < yc[b];\n        break;\n      }\n    }\n  }\n\n  // x < y? Point xc to the array of the bigger number.\n  if (xlty) {\n    t = xc;\n    xc = yc;\n    yc = t;\n    y.s = -y.s;\n  }\n\n  /*\n   * Append zeros to xc if shorter. No need to add zeros to yc if shorter as subtraction only\n   * needs to start at yc.length.\n   */\n  if ((b = (j = yc.length) - (i = xc.length)) > 0) for (; b--;) xc[i++] = 0;\n\n  // Subtract yc from xc.\n  for (b = i; j > a;) {\n    if (xc[--j] < yc[j]) {\n      for (i = j; i && !xc[--i];) xc[i] = 9;\n      --xc[i];\n      xc[j] += 10;\n    }\n\n    xc[j] -= yc[j];\n  }\n\n  // Remove trailing zeros.\n  for (; xc[--b] === 0;) xc.pop();\n\n  // Remove leading zeros and adjust exponent accordingly.\n  for (; xc[0] === 0;) {\n    xc.shift();\n    --ye;\n  }\n\n  if (!xc[0]) {\n\n    // n - n = +0\n    y.s = 1;\n\n    // Result must be zero.\n    xc = [ye = 0];\n  }\n\n  y.c = xc;\n  y.e = ye;\n\n  return y;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big modulo the value of Big y.\n */\nP.mod = function (y) {\n  var ygtx,\n    x = this,\n    Big = x.constructor,\n    a = x.s,\n    b = (y = new Big(y)).s;\n\n  if (!y.c[0]) {\n    throw Error(DIV_BY_ZERO);\n  }\n\n  x.s = y.s = 1;\n  ygtx = y.cmp(x) == 1;\n  x.s = a;\n  y.s = b;\n\n  if (ygtx) return new Big(x);\n\n  a = Big.DP;\n  b = Big.RM;\n  Big.DP = Big.RM = 0;\n  x = x.div(y);\n  Big.DP = a;\n  Big.RM = b;\n\n  return this.minus(x.times(y));\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big negated.\n */\nP.neg = function () {\n  var x = new this.constructor(this);\n  x.s = -x.s;\n  return x;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big plus the value of Big y.\n */\nP.plus = P.add = function (y) {\n  var e, k, t,\n    x = this,\n    Big = x.constructor;\n\n  y = new Big(y);\n\n  // Signs differ?\n  if (x.s != y.s) {\n    y.s = -y.s;\n    return x.minus(y);\n  }\n\n  var xe = x.e,\n    xc = x.c,\n    ye = y.e,\n    yc = y.c;\n\n  // Either zero?\n  if (!xc[0] || !yc[0]) {\n    if (!yc[0]) {\n      if (xc[0]) {\n        y = new Big(x);\n      } else {\n        y.s = x.s;\n      }\n    }\n    return y;\n  }\n\n  xc = xc.slice();\n\n  // Prepend zeros to equalise exponents.\n  // Note: reverse faster than unshifts.\n  if (e = xe - ye) {\n    if (e > 0) {\n      ye = xe;\n      t = yc;\n    } else {\n      e = -e;\n      t = xc;\n    }\n\n    t.reverse();\n    for (; e--;) t.push(0);\n    t.reverse();\n  }\n\n  // Point xc to the longer array.\n  if (xc.length - yc.length < 0) {\n    t = yc;\n    yc = xc;\n    xc = t;\n  }\n\n  e = yc.length;\n\n  // Only start adding at yc.length - 1 as the further digits of xc can be left as they are.\n  for (k = 0; e; xc[e] %= 10) k = (xc[--e] = xc[e] + yc[e] + k) / 10 | 0;\n\n  // No need to check for zero, as +x + +y != 0 && -x + -y != 0\n\n  if (k) {\n    xc.unshift(k);\n    ++ye;\n  }\n\n  // Remove trailing zeros.\n  for (e = xc.length; xc[--e] === 0;) xc.pop();\n\n  y.c = xc;\n  y.e = ye;\n\n  return y;\n};\n\n\n/*\n * Return a Big whose value is the value of this Big raised to the power n.\n * If n is negative, round to a maximum of Big.DP decimal places using rounding\n * mode Big.RM.\n *\n * n {number} Integer, -MAX_POWER to MAX_POWER inclusive.\n */\nP.pow = function (n) {\n  var x = this,\n    one = new x.constructor('1'),\n    y = one,\n    isneg = n < 0;\n\n  if (n !== ~~n || n < -MAX_POWER || n > MAX_POWER) {\n    throw Error(INVALID + 'exponent');\n  }\n\n  if (isneg) n = -n;\n\n  for (;;) {\n    if (n & 1) y = y.times(x);\n    n >>= 1;\n    if (!n) break;\n    x = x.times(x);\n  }\n\n  return isneg ? one.div(y) : y;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big rounded to a maximum precision of sd\n * significant digits using rounding mode rm, or Big.RM if rm is not specified.\n *\n * sd {number} Significant digits: integer, 1 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.prec = function (sd, rm) {\n  if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\n    throw Error(INVALID + 'precision');\n  }\n  return round(new this.constructor(this), sd, rm);\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big rounded to a maximum of dp decimal places\n * using rounding mode rm, or Big.RM if rm is not specified.\n * If dp is negative, round to an integer which is a multiple of 10**-dp.\n * If dp is not specified, round to 0 decimal places.\n *\n * dp? {number} Integer, -MAX_DP to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.round = function (dp, rm) {\n  if (dp === UNDEFINED) dp = 0;\n  else if (dp !== ~~dp || dp < -MAX_DP || dp > MAX_DP) {\n    throw Error(INVALID_DP);\n  }\n  return round(new this.constructor(this), dp + this.e + 1, rm);\n};\n\n\n/*\n * Return a new Big whose value is the square root of the value of this Big, rounded, if\n * necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.\n */\nP.sqrt = function () {\n  var r, c, t,\n    x = this,\n    Big = x.constructor,\n    s = x.s,\n    e = x.e,\n    half = new Big('0.5');\n\n  // Zero?\n  if (!x.c[0]) return new Big(x);\n\n  // Negative?\n  if (s < 0) {\n    throw Error(NAME + 'No square root');\n  }\n\n  // Estimate.\n  s = Math.sqrt(x + '');\n\n  // Math.sqrt underflow/overflow?\n  // Re-estimate: pass x coefficient to Math.sqrt as integer, then adjust the result exponent.\n  if (s === 0 || s === 1 / 0) {\n    c = x.c.join('');\n    if (!(c.length + e & 1)) c += '0';\n    s = Math.sqrt(c);\n    e = ((e + 1) / 2 | 0) - (e < 0 || e & 1);\n    r = new Big((s == 1 / 0 ? '5e' : (s = s.toExponential()).slice(0, s.indexOf('e') + 1)) + e);\n  } else {\n    r = new Big(s + '');\n  }\n\n  e = r.e + (Big.DP += 4);\n\n  // Newton-Raphson iteration.\n  do {\n    t = r;\n    r = half.times(t.plus(x.div(t)));\n  } while (t.c.slice(0, e).join('') !== r.c.slice(0, e).join(''));\n\n  return round(r, (Big.DP -= 4) + r.e + 1, Big.RM);\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big times the value of Big y.\n */\nP.times = P.mul = function (y) {\n  var c,\n    x = this,\n    Big = x.constructor,\n    xc = x.c,\n    yc = (y = new Big(y)).c,\n    a = xc.length,\n    b = yc.length,\n    i = x.e,\n    j = y.e;\n\n  // Determine sign of result.\n  y.s = x.s == y.s ? 1 : -1;\n\n  // Return signed 0 if either 0.\n  if (!xc[0] || !yc[0]) {\n    y.c = [y.e = 0];\n    return y;\n  }\n\n  // Initialise exponent of result as x.e + y.e.\n  y.e = i + j;\n\n  // If array xc has fewer digits than yc, swap xc and yc, and lengths.\n  if (a < b) {\n    c = xc;\n    xc = yc;\n    yc = c;\n    j = a;\n    a = b;\n    b = j;\n  }\n\n  // Initialise coefficient array of result with zeros.\n  for (c = new Array(j = a + b); j--;) c[j] = 0;\n\n  // Multiply.\n\n  // i is initially xc.length.\n  for (i = b; i--;) {\n    b = 0;\n\n    // a is yc.length.\n    for (j = a + i; j > i;) {\n\n      // Current sum of products at this digit position, plus carry.\n      b = c[j] + yc[i] * xc[j - i - 1] + b;\n      c[j--] = b % 10;\n\n      // carry\n      b = b / 10 | 0;\n    }\n\n    c[j] = b;\n  }\n\n  // Increment result exponent if there is a final carry, otherwise remove leading zero.\n  if (b) ++y.e;\n  else c.shift();\n\n  // Remove trailing zeros.\n  for (i = c.length; !c[--i];) c.pop();\n  y.c = c;\n\n  return y;\n};\n\n\n/*\n * Return a string representing the value of this Big in exponential notation rounded to dp fixed\n * decimal places using rounding mode rm, or Big.RM if rm is not specified.\n *\n * dp? {number} Decimal places: integer, 0 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.toExponential = function (dp, rm) {\n  var x = this,\n    n = x.c[0];\n\n  if (dp !== UNDEFINED) {\n    if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n      throw Error(INVALID_DP);\n    }\n    x = round(new x.constructor(x), ++dp, rm);\n    for (; x.c.length < dp;) x.c.push(0);\n  }\n\n  return stringify(x, true, !!n);\n};\n\n\n/*\n * Return a string representing the value of this Big in normal notation rounded to dp fixed\n * decimal places using rounding mode rm, or Big.RM if rm is not specified.\n *\n * dp? {number} Decimal places: integer, 0 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n *\n * (-0).toFixed(0) is '0', but (-0.1).toFixed(0) is '-0'.\n * (-0).toFixed(1) is '0.0', but (-0.01).toFixed(1) is '-0.0'.\n */\nP.toFixed = function (dp, rm) {\n  var x = this,\n    n = x.c[0];\n\n  if (dp !== UNDEFINED) {\n    if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n      throw Error(INVALID_DP);\n    }\n    x = round(new x.constructor(x), dp + x.e + 1, rm);\n\n    // x.e may have changed if the value is rounded up.\n    for (dp = dp + x.e + 1; x.c.length < dp;) x.c.push(0);\n  }\n\n  return stringify(x, false, !!n);\n};\n\n\n/*\n * Return a string representing the value of this Big.\n * Return exponential notation if this Big has a positive exponent equal to or greater than\n * Big.PE, or a negative exponent equal to or less than Big.NE.\n * Omit the sign for negative zero.\n */\nP[Symbol.for('nodejs.util.inspect.custom')] = P.toJSON = P.toString = function () {\n  var x = this,\n    Big = x.constructor;\n  return stringify(x, x.e <= Big.NE || x.e >= Big.PE, !!x.c[0]);\n};\n\n\n/*\n * Return the value of this Big as a primitve number.\n */\nP.toNumber = function () {\n  var n = Number(stringify(this, true, true));\n  if (this.constructor.strict === true && !this.eq(n.toString())) {\n    throw Error(NAME + 'Imprecise conversion');\n  }\n  return n;\n};\n\n\n/*\n * Return a string representing the value of this Big rounded to sd significant digits using\n * rounding mode rm, or Big.RM if rm is not specified.\n * Use exponential notation if sd is less than the number of digits necessary to represent\n * the integer part of the value in normal notation.\n *\n * sd {number} Significant digits: integer, 1 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.toPrecision = function (sd, rm) {\n  var x = this,\n    Big = x.constructor,\n    n = x.c[0];\n\n  if (sd !== UNDEFINED) {\n    if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\n      throw Error(INVALID + 'precision');\n    }\n    x = round(new Big(x), sd, rm);\n    for (; x.c.length < sd;) x.c.push(0);\n  }\n\n  return stringify(x, sd <= x.e || x.e <= Big.NE || x.e >= Big.PE, !!n);\n};\n\n\n/*\n * Return a string representing the value of this Big.\n * Return exponential notation if this Big has a positive exponent equal to or greater than\n * Big.PE, or a negative exponent equal to or less than Big.NE.\n * Include the sign for negative zero.\n */\nP.valueOf = function () {\n  var x = this,\n    Big = x.constructor;\n  if (Big.strict === true) {\n    throw Error(NAME + 'valueOf disallowed');\n  }\n  return stringify(x, x.e <= Big.NE || x.e >= Big.PE, true);\n};\n\n\n// Export\n\n\nexport var Big = _Big_();\n\n/// <reference types=\"https://raw.githubusercontent.com/DefinitelyTyped/DefinitelyTyped/master/types/big.js/index.d.ts\" />\nexport default Big;\n","import { DEBUG_MORE } from '../config';\nimport { handleError } from './handleError';\n\nconst SAFE_EXEC_ENABLED = !DEBUG_MORE;\n\ntype SafeExecOptions = {\n  rescue?: (err: Error) => void;\n  always?: NoneToVoidFunction;\n  shouldIgnoreError?: boolean;\n};\n\nexport async function safeExecAsync<T extends AnyAsyncFunction>(\n  cb: T,\n  options?: SafeExecOptions,\n): Promise<ReturnType<T> | undefined> {\n  if (!SAFE_EXEC_ENABLED) {\n    return cb();\n  }\n\n  const { rescue, always, shouldIgnoreError } = options ?? {};\n\n  try {\n    return await cb();\n  } catch (err: any) {\n    rescue?.(err);\n    if (!shouldIgnoreError) {\n      handleError(err);\n    }\n    return undefined;\n  } finally {\n    always?.();\n  }\n}\n\nexport default function safeExec<T extends AnyFunction>(cb: T, options?: SafeExecOptions): ReturnType<T> | undefined {\n  if (!SAFE_EXEC_ENABLED) {\n    return cb();\n  }\n\n  const { rescue, always, shouldIgnoreError } = options ?? {};\n\n  try {\n    return cb();\n  } catch (err: any) {\n    rescue?.(err);\n    if (!shouldIgnoreError) {\n      handleError(err);\n    }\n    return undefined;\n  } finally {\n    always?.();\n  }\n}\n","export const DETACHED_TAB_URL = '#detached';\n\nlet ledgerTabId: number | undefined;\n\n/**\n * In order to connect to Ledger, the webapp needs to get the user permission to use the HID device. Chrome doesn't ask\n * the user to choose a device when the code runs in the extension popup: https://issues.chromium.org/issues/40233645.\n * So in case of extension we open a browser tab which asks the permission. The tab runs the same webapp but with a\n * limited UI. Once the user grants the permission, the extension can continue connecting to Ledger inside the popup.\n */\nexport function openLedgerTab() {\n  return createLedgerTab();\n}\n\nexport function closeLedgerTab() {\n  if (!ledgerTabId) return;\n\n  chrome.tabs.query({ active: true }, () => {\n    if (!ledgerTabId) return;\n\n    void chrome.tabs.remove(ledgerTabId);\n  });\n}\n\nexport async function closeThisTab() {\n  const tab = await chrome.tabs.getCurrent();\n  if (!tab?.id) return;\n  await chrome.tabs.remove(tab.id);\n}\n\nexport function onLedgerTabClose(id: number, onClose: () => void) {\n  const listener = (closedTabId: number) => {\n    if (closedTabId !== id) {\n      return;\n    }\n\n    ledgerTabId = undefined;\n    chrome.tabs.onRemoved.removeListener(listener);\n    onClose();\n  };\n\n  chrome.tabs.onRemoved.addListener(listener);\n}\n\nasync function createLedgerTab() {\n  const tab = await chrome.tabs.create({ url: `index.html${DETACHED_TAB_URL}`, active: true });\n  await chrome.windows.update(tab.windowId, { focused: true });\n\n  ledgerTabId = tab.id!;\n\n  return ledgerTabId;\n}\n","import type InAppBrowserPostMessageAdapter from './embeddedDappBridge/provider/InAppBrowserPostMessageAdapter';\nimport type {\n  ApiUpdate,\n  CancellableCallback,\n  OriginMessageData,\n  OriginMessageEvent,\n  WorkerMessageData,\n} from './PostMessageConnector';\n\nimport { decodeExtensionMessage, encodeExtensionMessage } from './extensionMessageSerializer';\nimport { logDebugError } from './logs';\n\ndeclare const self: WorkerGlobalScope;\n\nconst callbackState = new Map<string, CancellableCallback>();\n\ntype ApiConfig =\n// eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\n  ((name: string, ...args: any[]) => any | [any, ArrayBuffer[]])\n  | Record<string, AnyFunction>;\ntype SendToOrigin = (data: WorkerMessageData, transferables?: Transferable[]) => void;\n\n/**\n * Provides functions, defined in this messenger (a window, a worker), to another messenger.\n * The other messenger can call the functions using `createConnector`.\n */\nexport function createPostMessageInterface(\n  api: ApiConfig,\n  channel?: string,\n  target: DedicatedWorkerGlobalScope | Worker | InAppBrowserPostMessageAdapter = self as DedicatedWorkerGlobalScope,\n  shouldIgnoreErrors?: boolean,\n) {\n  function sendToOrigin(data: WorkerMessageData, transferables?: Transferable[]) {\n    data.channel = channel;\n\n    if (transferables) {\n      target.postMessage(data, transferables);\n    } else {\n      target.postMessage(data);\n    }\n  }\n\n  if (!shouldIgnoreErrors) {\n    handleErrors(sendToOrigin);\n  }\n\n  function handleMessage(e: OriginMessageEvent) {\n    if (e.data?.channel === channel) {\n      void onMessage(api, e.data, sendToOrigin);\n    }\n  }\n\n  // Correct for any target, but TypeScript weirdly complains\n  (target as DedicatedWorkerGlobalScope).addEventListener('message', handleMessage);\n\n  return () => {\n    (target as DedicatedWorkerGlobalScope).removeEventListener('message', handleMessage);\n  };\n}\n\n/**\n * Provides functions, defined in the main window, to an IFrame.\n */\nexport function createReverseIFrameInterface(\n  api: ApiConfig,\n  targetOrigin: string,\n  target: Window,\n  channel?: string,\n) {\n  function sendToOrigin(data: WorkerMessageData, transferables?: Transferable[]) {\n    data.channel = channel;\n\n    if (transferables) {\n      throw new Error('Cannot send `Transferable` to `Window`');\n    } else {\n      target.postMessage(data, targetOrigin);\n    }\n  }\n\n  function handleMessage(e: OriginMessageEvent) {\n    if (targetOrigin && e.origin !== targetOrigin) return;\n\n    if (e.data?.channel === channel) {\n      void onMessage(api, e.data, sendToOrigin);\n    }\n  }\n\n  window.addEventListener('message', handleMessage);\n\n  return () => {\n    window.removeEventListener('message', handleMessage);\n  };\n}\n\n/**\n * Provides functions, defined in this extension service worker, to a window.\n * The window can call the functions using `createExtensionConnector`.\n */\nexport function createExtensionInterface(\n  portName: string,\n  api: ApiConfig,\n  channel?: string,\n  cleanUpdater?: (onUpdate: (update: ApiUpdate) => void) => void,\n  withAutoInit = false,\n) {\n  chrome.runtime.onConnect.addListener((port) => {\n    if (port.name !== portName) {\n      return;\n    }\n\n    const url = port.sender?.url;\n    const origin = url ? new URL(url).origin : undefined;\n\n    const dAppUpdater = (update: ApiUpdate) => {\n      sendToOrigin({\n        type: 'update',\n        update,\n      });\n    };\n\n    function sendToOrigin(data: WorkerMessageData) {\n      data.channel = channel;\n      port.postMessage(encodeExtensionMessage(data));\n    }\n\n    handleErrors(sendToOrigin);\n\n    port.onMessage.addListener((data: OriginMessageData | string) => {\n      data = decodeExtensionMessage(data);\n      if (data.channel === channel) {\n        void onMessage(api, data, sendToOrigin, dAppUpdater, origin);\n      }\n    });\n\n    port.onDisconnect.addListener(() => {\n      cleanUpdater?.(dAppUpdater);\n    });\n\n    if (withAutoInit) {\n      void onMessage(api, { type: 'init', args: [] }, sendToOrigin, dAppUpdater);\n    }\n  });\n}\n\n/**\n * Provides functions, defined in this window, to the extension service worker.\n * The service worker can call the functions using `createReverseExtensionConnector`.\n */\nexport function createReverseExtensionInterface(\n  portName: string,\n  api: ApiConfig,\n) {\n  let port: chrome.runtime.Port;\n\n  function sendToServiceWorker(data: WorkerMessageData) {\n    port.postMessage(encodeExtensionMessage(data));\n  }\n\n  function connect() {\n    port = chrome.runtime.connect({ name: portName });\n\n    port.onMessage.addListener((data: OriginMessageData | string) => {\n      data = decodeExtensionMessage(data);\n      void onMessage(api, data, sendToServiceWorker);\n    });\n\n    // For some reason port can suddenly get disconnected\n    port.onDisconnect.addListener(() => {\n      connect();\n    });\n  }\n\n  connect();\n}\n\nasync function onMessage(\n  api: ApiConfig,\n  data: OriginMessageData,\n  sendToOrigin: SendToOrigin,\n  onUpdate?: (update: ApiUpdate) => void,\n  origin?: string,\n) {\n  if (!onUpdate) {\n    onUpdate = (update: ApiUpdate) => {\n      sendToOrigin({\n        type: 'update',\n        update,\n      });\n    };\n  }\n\n  switch (data.type) {\n    case 'init': {\n      const { args } = data;\n      const promise = typeof api === 'function'\n        ? api('init', origin, onUpdate, ...args)\n        : api.init?.(onUpdate, ...args);\n      await promise;\n\n      break;\n    }\n    case 'callMethod': {\n      const {\n        messageId, name, args, withCallback,\n      } = data;\n      try {\n        // This method is probably from another worker\n        if (typeof api !== 'function' && !api[name]) return;\n\n        if (messageId && withCallback) {\n          const callback = (...callbackArgs: any[]) => {\n            const lastArg = callbackArgs[callbackArgs.length - 1];\n\n            sendToOrigin({\n              type: 'methodCallback',\n              messageId,\n              callbackArgs,\n            }, isTransferable(lastArg) ? [lastArg] : undefined);\n          };\n\n          callbackState.set(messageId, callback);\n\n          args.push(callback as never);\n        }\n\n        const response = typeof api === 'function'\n          ? await api(name, origin, ...args)\n          : await api[name](...args);\n        const { arrayBuffer } = (typeof response === 'object' && response && 'arrayBuffer' in response) || {};\n\n        if (messageId) {\n          sendToOrigin(\n            {\n              type: 'methodResponse',\n              messageId,\n              response,\n            },\n            arrayBuffer ? [arrayBuffer] : undefined,\n          );\n        }\n      } catch (err: any) {\n        logDebugError(name, err);\n\n        if (messageId) {\n          sendToOrigin({\n            type: 'methodResponse',\n            messageId,\n            error: { message: err.message },\n          });\n        }\n      }\n\n      if (messageId) {\n        callbackState.delete(messageId);\n      }\n\n      break;\n    }\n    case 'cancelProgress': {\n      const callback = callbackState.get(data.messageId);\n      if (callback) {\n        callback.isCanceled = true;\n      }\n\n      break;\n    }\n  }\n}\n\nfunction isTransferable(obj: any) {\n  return obj instanceof ArrayBuffer || obj instanceof ImageBitmap;\n}\n\nfunction handleErrors(sendToOrigin: SendToOrigin) {\n  self.onerror = (e) => {\n    const message = e.error?.message || 'Uncaught exception in worker';\n    logDebugError(message, e.error);\n\n    sendToOrigin({\n      type: 'unhandledError',\n      error: {\n        message,\n        stack: e.error?.stack,\n      },\n    });\n  };\n\n  self.addEventListener('unhandledrejection', (e) => {\n    const message = e.reason?.message || 'Unhandled rejection in worker';\n    logDebugError(message, e.reason);\n\n    sendToOrigin({\n      type: 'unhandledError',\n      error: {\n        message,\n        stack: e.reason?.stack,\n      },\n    });\n  });\n}\n","import { DEBUG, DEBUG_API } from '../config';\nimport { AssertionError } from './assert';\n\nexport interface Log {\n  message: string;\n  args: any[];\n  time: number; // Passing data from the worker to the application as a date object is not supported\n  level: 'debug' | 'debugError';\n}\n\nconst MAX_LOG_LENGTH = 999;\nconst logs: Log[] = [];\n\nexport function errorReplacer(_: string, value: any) {\n  if (value instanceof Error) {\n    return {\n      name: value.name,\n      message: value.message,\n      stack: value.stack,\n      metadata: value instanceof AssertionError ? value.metadata : undefined,\n    };\n  }\n  return value;\n}\n\nexport function addLog(log: Omit<Log, 'time'>) {\n  if (logs.length > MAX_LOG_LENGTH) {\n    logs.shift();\n  }\n\n  logs.push({\n    ...log,\n    args: log.args.map((arg) => JSON.stringify(arg, errorReplacer)),\n    time: Date.now(),\n  });\n}\n\nexport function getLogs() {\n  return logs;\n}\n\nexport function logDebugError(message: string, ...args: any[]) {\n  addLog({ message, level: 'debugError', args });\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.error(`[DEBUG][${message}]`, ...args);\n  }\n}\n\nexport function logDebug(message: any, ...args: any[]) {\n  addLog({ message, level: 'debug', args });\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log(`[DEBUG] ${message}`, ...args);\n  }\n}\n\nexport function logDebugApi(message: any, obj1: any, obj2?: any) {\n  if (DEBUG_API) {\n    // eslint-disable-next-line no-console\n    console.debug(`[DEBUG] ${message}`);\n    // eslint-disable-next-line no-console\n    if (obj1) console.dir(obj1);\n    // eslint-disable-next-line no-console\n    if (obj2) console.dir(obj2);\n  }\n}\n\nexport function logSelfXssWarnings() {\n  const selfXssWarnings: AnyLiteral = {\n    en: 'WARNING! This console can be a way for bad people to take over your crypto wallet through something called '\n      + 'a Self-XSS attack. So, don\\'t put in or paste code you don\\'t understand. Stay safe!',\n    ru: '!             '\n      + '  Self-XSS.       ,    .  !',\n    es: 'ADVERTENCIA! Esta consola puede ser una forma en que las personas malintencionadas se apoderen de su '\n      + 'billetera de criptomonedas mediante un ataque llamado Self-XSS. Por lo tanto, '\n      + 'no introduzca ni pegue cdigo que no comprenda. Cudese!',\n    zh: 'Self-XSS',\n  };\n\n  const langCode = navigator.language.split('-')[0];\n  const text = selfXssWarnings[langCode] || selfXssWarnings.en;\n\n  // eslint-disable-next-line no-console\n  console.log('%c%s', 'color: red; background: yellow; font-size: 18px;', text);\n}\n","export enum ApiCommonError {\n  Unexpected = 'Unexpected',\n  ServerError = 'ServerError',\n  DebugError = 'DebugError',\n  UnsupportedVersion = 'UnsupportedVersion',\n}\n\nexport enum ApiAuthError {\n  InvalidMnemonic = 'InvalidMnemonic',\n  InvalidAddress = 'InvalidAddress',\n  DomainNotResolved = 'DomainNotResolved',\n}\n\nexport enum ApiTransactionDraftError {\n  InvalidAmount = 'InvalidAmount',\n  InvalidToAddress = 'InvalidToAddress',\n  InsufficientBalance = 'InsufficientBalance',\n  InvalidStateInit = 'InvalidStateInit',\n  StateInitWithoutBin = 'StateInitWithoutBin',\n  DomainNotResolved = 'DomainNotResolved',\n  WalletNotInitialized = 'WalletNotInitialized',\n  InvalidAddressFormat = 'InvalidAddressFormat',\n  InactiveContract = 'InactiveContract',\n}\n\nexport enum ApiTransactionError {\n  PartialTransactionFailure = 'PartialTransactionFailure',\n  IncorrectDeviceTime = 'IncorrectDeviceTime',\n  InsufficientBalance = 'InsufficientBalance',\n  UnsuccesfulTransfer = 'UnsuccesfulTransfer',\n  NotSupportedHardwareOperation = 'NotSupportedHardwareOperation',\n  HardwareBlindSigningNotEnabled = 'HardwareBlindSigningNotEnabled',\n  WrongAddress = 'WrongAddress',\n  WrongNetwork = 'WrongNetwork',\n}\n\nexport type ApiAnyDisplayError = ApiCommonError | ApiAuthError | ApiTransactionDraftError | ApiTransactionError;\n","export function random(min: number, max: number) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nexport function sample<T>(arr: T[]) {\n  return arr[random(0, arr.length - 1)];\n}\n\nexport function randomBytes(size: number) {\n  return self.crypto.getRandomValues(new Uint8Array(size));\n}\n\nexport function randomBase64(byteSize: number) {\n  return Buffer.from(randomBytes(byteSize)).toString('base64');\n}\n","export class AssertionError extends Error {\n  constructor(\n    message: string,\n    // Any additional information for the error to help debug it. Don't put sensitive information here.\n    public metadata?: unknown,\n  ) {\n    super(message);\n  }\n}\n\nexport function assert(condition: boolean, message: string, metadata?: unknown) {\n  if (!condition) {\n    throw new AssertionError(message, metadata);\n  }\n}\n","import type { Address, Dictionary } from '@ton/core';\n\nexport type AddrList = Dictionary<Address, boolean>;\n\nexport const JettonStakingOpCodes = {\n  GET_STATIC_DATA: 0X2FCB26A2,\n  REPORT_STATIC_DATA: 0X8B771735,\n  GET_STORAGE_DATA: 0X5B88E5CC,\n  REPORT_STORAGE_DATA: 0XAAB4A8EF,\n  EXCESSES: 0XD53276DB,\n\n  // Jettons,\n  TRANSFER_JETTON: 0X0F8A7EA5,\n  INTERNAL_TRANSFER: 0X178D4519,\n  TRANSFER_NOTIFICATION: 0X7362D09C,\n  PROVIDE_WALLET_ADDRESS: 0X2C76B973,\n  TAKE_WALLET_ADDRESS: 0XD1735400,\n  BURN_JETTON: 0X595F07BC,\n\n  // Staking pool,\n  STAKE_JETTONS: 0XE3A06989,\n  ADD_REWARDS: 0XDB16AC95,\n  SEND_CLAIMED_REWARDS: 0X44BC1FE3,\n  SEND_UNSTAKED_JETTONS: 0XFB232BC3,\n  APPROVE_STAKE: 0X919DE781,\n  CANCEL_STAKE: 0X9EADA1D9,\n  ADD_REWARD_JETTONS: 0X10676AE7,\n  CLAIM_COMMISSIONS: 0XBCA8F067,\n  REQUEST_UPDATE_REWARDS: 0XF5C5BAA3,\n\n  // Staked jetton wallet,\n  CLAIM_REWARDS: 0X78D9F109,\n  RECEIVE_JETTONS: 0XD68A4AC1,\n  UNSTAKE_JETTONS: 0X499A9262,\n  UNSTAKE_REQUEST: 0X0168D4B7,\n  CANCEL_UNSTAKE_REQUEST: 0XA4910F1A,\n  UPDATE_REWARDS: 0XAE9307CE,\n  CONFIRM_TRANSFER: 0XBC85EB11,\n\n  // Pools admin,\n  DEPLOY_NEW_POOL: 0XDA861F17,\n  SEND_COMMISSIONS: 0XB96ADAEA,\n  SET_CODE: 0xe2d2d211,\n  CHANGE_CREATION_FEE: 0x66D5528B,\n  CHANGE_CONTENT: 0x0ec29200,\n  UPDATE_CODES: 0x85c923cf,\n};\n\nexport const JettonStakingGas = {\n  MIN_RESERVE: 20_000_000n,\n  DEPLOY_POOL: 340_000_000n,\n  NOTIFICATION: 340_000_000n,\n  JETTON_TRANSFER: 55_000_000n,\n  BURN_JETTONS: 340_000_000n,\n  STAKE_JETTONS: 300_000_000n, // It was 340000000n\n  UNSTAKE_JETTONS: 340_000_000n,\n  CANCEL_UNSTAKE: 340_000_000n,\n  SEND_COMMISSIONS: 340_000_000n,\n  SIMPLE_UPDATE_REQUEST: 340_000_000n,\n  ADD_REWARDS: 340_000_000n,\n  APPROVE_TRANSFER: 340_000_000n,\n  SAVE_UPDATED_REWARDS: 340_000_000n,\n  MIN_EXCESS: 10_000_000n,\n  SEND_STAKED_JETTONS: 630_000_000n,\n};\n\nexport const Dividers = {\n  COMMISSION_DIVIDER: 10000n,\n  REWARDS_DIVIDER: 1000,\n  DISTRIBUTION_SPEED_DIVIDER: BigInt(24 * 60 * 60),\n  DISTRIBUTED_REWARDS_DIVIDER: 100000000000000000000000000000000000000n,\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","import safeExec from '../../util/safeExec';\nimport { fastRaf, throttleWith } from '../../util/schedulers';\nimport { setPhase } from './stricterdom';\n\nlet pendingMeasureTasks: NoneToVoidFunction[] = [];\nlet pendingMutationTasks: NoneToVoidFunction[] = [];\nlet pendingForceReflowTasks: (() => NoneToVoidFunction | void)[] = [];\n\nconst runUpdatePassOnRaf = throttleWithRafFallback(() => {\n  const currentMeasureTasks = pendingMeasureTasks;\n  pendingMeasureTasks = [];\n  currentMeasureTasks.forEach((task) => {\n    safeExec(task);\n  });\n\n  // We use promises to provide correct order for Mutation Observer callback microtasks\n  void Promise.resolve()\n    .then(() => {\n      setPhase('mutate');\n\n      const currentMutationTasks = pendingMutationTasks;\n      pendingMutationTasks = [];\n\n      currentMutationTasks.forEach((task) => {\n        safeExec(task);\n      });\n    })\n    .then(() => {\n      setPhase('measure');\n\n      const pendingForceReflowMutationTasks: NoneToVoidFunction[] = [];\n      // Will include tasks created during the loop\n      for (const task of pendingForceReflowTasks) {\n        safeExec(() => {\n          const mutationTask = task();\n          if (mutationTask) {\n            pendingForceReflowMutationTasks.push(mutationTask);\n          }\n        });\n      }\n      pendingForceReflowTasks = [];\n\n      return pendingForceReflowMutationTasks;\n    })\n    .then((pendingForceReflowMutationTasks) => {\n      setPhase('mutate');\n\n      // Will include tasks created during the loop\n      for (const task of pendingForceReflowMutationTasks) {\n        safeExec(task);\n      }\n    })\n    .then(() => {\n      setPhase('measure');\n    });\n});\n\nexport function requestMeasure(cb: NoneToVoidFunction) {\n  pendingMeasureTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nexport function requestMutation(cb: NoneToVoidFunction) {\n  pendingMutationTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nexport function requestNextMutation(cb: () => (NoneToVoidFunction | void)) {\n  requestMeasure(() => {\n    requestMutation(cb);\n  });\n}\n\nexport function requestForcedReflow(cb: () => (NoneToVoidFunction | void)) {\n  pendingForceReflowTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nfunction throttleWithRafFallback<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith((throttledFn: NoneToVoidFunction) => {\n    fastRaf(throttledFn, true);\n  }, fn);\n}\n\nexport * from './stricterdom';\n","import type { ApiNft } from '../api/types';\n\nimport { TON_DNS_COLLECTION, TON_DNS_RENEWAL_WARNING_DAYS, TON_DNS_ZONES } from '../config';\nimport { getCountDaysToDate } from './dateFormat';\n\nexport function isDnsDomain(value: string) {\n  return getDnsDomainZone(value) !== undefined;\n}\n\nexport function getDnsDomainZone(domain: string) {\n  for (const zone of TON_DNS_ZONES) {\n    const { suffixes, baseFormat } = zone;\n\n    // Iterating the zones in reverse to prioritize longer zones when multiple zones match (assuming the zones go from\n    // the shortest to the longest). For example, `test.ton.vip` matches both `vip` and `ton.vip`, and `ton.vip` must be\n    // used.\n    for (let i = suffixes.length - 1; i >= 0; i--) {\n      const suffix = suffixes[i];\n      if (!domain.endsWith(`.${suffix}`)) {\n        continue;\n      }\n\n      const base = domain.slice(0, -suffix.length - 1);\n      if (!baseFormat.test(base)) {\n        continue;\n      }\n\n      return { base, zone };\n    }\n  }\n\n  return undefined;\n}\n\nexport function getDnsZoneByCollection(collectionAddress: string) {\n  return TON_DNS_ZONES.find((zone) => zone.resolver === collectionAddress);\n}\n\nexport function isTonDnsNft(nft: ApiNft | undefined): nft is ApiNft {\n  return nft?.collectionAddress === TON_DNS_COLLECTION;\n}\n\nexport function getTonDnsExpirationDate(nft: ApiNft | undefined, dnsExpiration: Record<string, number> | undefined) {\n  return isTonDnsNft(nft) ? dnsExpiration?.[nft.address] : undefined;\n}\n\nexport function filterExpiringDomains(\n  nftAddresses: string[],\n  nftByAddress?: Record<string, ApiNft>,\n  dnsExpiration?: Record<string, number>,\n) {\n  const expiringDomains: ApiNft[] = [];\n\n  if (nftByAddress && dnsExpiration) {\n    for (const address of nftAddresses) {\n      const nft = nftByAddress[address];\n      if (getCountDaysToDate(getTonDnsExpirationDate(nft, dnsExpiration) ?? Infinity) <= TON_DNS_RENEWAL_WARNING_DAYS) {\n        expiringDomains.push(nft);\n      }\n    }\n  }\n\n  return expiringDomains;\n}\n\nexport function getDomainsExpirationDate(\n  nfts: (string | ApiNft)[],\n  nftByAddress?: Record<string, ApiNft>,\n  dnsExpiration?: Record<string, number>,\n) {\n  if (!dnsExpiration) {\n    return undefined;\n  }\n\n  return nfts.reduce<number | undefined>(\n    (minDate, nftOrAddress) => {\n      const nft = typeof nftOrAddress === 'string' ? nftByAddress?.[nftOrAddress] : nftOrAddress;\n      const expirationDate = getTonDnsExpirationDate(nft, dnsExpiration);\n      return expirationDate\n        ? Math.min(expirationDate, minDate ?? Infinity)\n        : minDate;\n    },\n    undefined,\n  );\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","// https://gist.github.com/paulirish/5d52fb081b3570c81e3a\n\nexport default {\n  Element: {\n    props: [\n      'clientLeft', 'clientTop', 'clientWidth', 'clientHeight',\n      'scrollWidth', 'scrollHeight', 'scrollLeft', 'scrollTop',\n    ] as const,\n    methods: [\n      'getClientRects', 'getBoundingClientRect',\n      'scrollBy', 'scrollTo', 'scrollIntoView', 'scrollIntoViewIfNeeded',\n    ] as const,\n  },\n  HTMLElement: {\n    props: [\n      'offsetLeft', 'offsetTop', 'offsetWidth', 'offsetHeight', 'offsetParent',\n      'innerText',\n    ] as const,\n    methods: ['focus'] as const,\n  },\n  window: {\n    props: [\n      'scrollX', 'scrollY',\n      'innerHeight', 'innerWidth',\n    ] as const,\n    methods: ['getComputedStyle'] as const,\n  },\n  VisualViewport: {\n    props: [\n      'height', 'width', 'offsetTop', 'offsetLeft',\n    ] as const,\n  },\n  Document: {\n    props: ['scrollingElement'] as const,\n    methods: ['elementFromPoint'] as const,\n  },\n  HTMLInputElement: {\n    methods: ['select'] as const,\n  },\n  MouseEvent: {\n    props: ['layerX', 'layerY', 'offsetX', 'offsetY'] as const,\n  },\n  Range: {\n    methods: ['getClientRects', 'getBoundingClientRect'] as const,\n  },\n};\n","import LAYOUT_CAUSES from './layoutCauses';\n\ntype Entities = keyof typeof LAYOUT_CAUSES;\ntype Phase =\n  'measure'\n  | 'mutate';\ntype ErrorHandler = (error: Error) => any;\n\n// eslint-disable-next-line no-console\nconst DEFAULT_ERROR_HANDLER = console.error;\n\nlet onError: ErrorHandler = DEFAULT_ERROR_HANDLER;\n\nconst nativeMethods = new Map<string, AnyFunction>();\n\nlet phase: Phase = 'measure';\nlet isStrict = false;\nlet observer: MutationObserver | undefined;\n\nexport function setPhase(newPhase: Phase) {\n  phase = newPhase;\n}\n\nexport function getPhase() {\n  return phase;\n}\n\nexport function enableStrict() {\n  if (isStrict) return;\n\n  isStrict = true;\n  setupLayoutDetectors();\n  setupMutationObserver();\n}\n\nexport function disableStrict() {\n  if (!isStrict) return;\n\n  clearMutationObserver();\n  clearLayoutDetectors();\n  isStrict = false;\n}\n\nexport function forceMeasure(cb: () => any) {\n  if (phase !== 'mutate') {\n    throw new Error('The current phase is \\'measure\\'');\n  }\n\n  phase = 'measure';\n  const result = cb();\n  phase = 'mutate';\n\n  return result;\n}\n\nconst forcedMutationAllowedFor = new Set<Node>();\n\nexport function forceMutation(cb: () => any, nodes: Node | Node[]) {\n  if (phase !== 'measure') {\n    throw new Error('The current phase is \\'mutate\\'');\n  }\n\n  if (isStrict) {\n    if (Array.isArray(nodes)) {\n      nodes.forEach((node) => {\n        forcedMutationAllowedFor.add(node);\n      });\n    } else {\n      forcedMutationAllowedFor.add(nodes);\n    }\n  }\n\n  return cb();\n}\n\nexport function suppressStrict(cb: () => any) {\n  if (!isStrict) {\n    return cb();\n  }\n\n  disableStrict();\n  const result = cb();\n  enableStrict();\n  return result;\n}\n\nexport function setHandler(handler?: ErrorHandler) {\n  onError = handler || DEFAULT_ERROR_HANDLER;\n}\n\nfunction setupLayoutDetectors() {\n  Object.entries(LAYOUT_CAUSES).forEach(([name, causes]) => {\n    const entity = window[name as Entities];\n    if (!entity) return;\n    const prototype = typeof entity === 'object' ? entity : entity.prototype;\n\n    if ('props' in causes) {\n      causes.props.forEach((prop) => {\n        const nativeGetter = Object.getOwnPropertyDescriptor(prototype, prop)?.get;\n        if (!nativeGetter) {\n          return;\n        }\n\n        nativeMethods.set(`${name}#${prop}`, nativeGetter);\n\n        Object.defineProperty(prototype, prop, {\n          get() {\n            onMeasure(prop);\n\n            return nativeGetter.call(this);\n          },\n        });\n      });\n    }\n\n    if ('methods' in causes) {\n      causes.methods.forEach((method) => {\n        const nativeMethod = (prototype as any)[method]!;\n        nativeMethods.set(`${name}#${method}`, nativeMethod);\n\n        (prototype as any)[method] = function (...args: any[]) {\n          onMeasure(method);\n\n          return nativeMethod.apply(this, args);\n        };\n      });\n    }\n  });\n}\n\nfunction clearLayoutDetectors() {\n  Object.entries(LAYOUT_CAUSES).forEach(([name, causes]) => {\n    const entity = window[name as Entities];\n    if (!entity) return;\n    const prototype = typeof entity === 'object' ? entity : entity.prototype;\n\n    if ('props' in causes) {\n      causes.props.forEach((prop) => {\n        const nativeGetter = nativeMethods.get(`${name}#${prop}`);\n        if (!nativeGetter) {\n          return;\n        }\n\n        Object.defineProperty(prototype, prop, { get: nativeGetter });\n      });\n    }\n\n    if ('methods' in causes) {\n      causes.methods.forEach((method) => {\n        (prototype as any)[method] = nativeMethods.get(`${name}#${method}`)!;\n      });\n    }\n  });\n\n  nativeMethods.clear();\n}\n\nfunction setupMutationObserver() {\n  observer = new MutationObserver((mutations) => {\n    if (phase !== 'mutate') {\n      mutations.forEach(({ target, type, attributeName }) => {\n        if (!document.contains(target)) {\n          return;\n        }\n\n        if (forcedMutationAllowedFor.has(target)) {\n          return;\n        }\n\n        if (type === 'childList' && target instanceof HTMLElement && target.contentEditable) {\n          return;\n        }\n\n        if (attributeName?.startsWith('data-')) {\n          return;\n        }\n\n        onError(new Error(`Unexpected mutation detected: \\`${type === 'attributes' ? attributeName : type}\\``));\n      });\n    }\n\n    forcedMutationAllowedFor.clear();\n  });\n\n  observer.observe(document.body, {\n    childList: true,\n    attributes: true,\n    subtree: true,\n    characterData: false,\n  });\n}\n\nfunction clearMutationObserver() {\n  observer?.disconnect();\n  observer = undefined;\n}\n\nfunction onMeasure(propName: string) {\n  if (phase !== 'measure') {\n    onError(new Error(`Unexpected measurement detected: \\`${propName}\\``));\n  }\n}\n","import { IS_CORE_WALLET } from '../../../config';\n\nexport const POPUP_PORT = IS_CORE_WALLET ? 'TonWallet_popup' : 'MyTonWallet_popup';\nexport const CONTENT_SCRIPT_PORT = IS_CORE_WALLET ? 'TonWallet_contentScript' : 'MyTonWallet_contentScript';\nexport const PAGE_CONNECTOR_CHANNEL = IS_CORE_WALLET ? 'TonWallet_pageConnector' : 'MyTonWallet_pageConnector';\n","import type { Connector } from '../../../util/PostMessageConnector';\nimport type { ApiInitArgs, OnApiUpdate } from '../../types';\nimport type { AllMethodArgs, AllMethodResponse, AllMethods } from '../../types/methods';\n\nimport { logDebugApi, logDebugError } from '../../../util/logs';\nimport { createConnector, createExtensionConnector } from '../../../util/PostMessageConnector';\nimport { pause } from '../../../util/schedulers';\nimport { IS_IOS } from '../../../util/windowEnvironment';\nimport { createWindowProvider, createWindowProviderForExtension } from '../../../util/windowProvider';\nimport { POPUP_PORT } from '../extension/config';\n\nconst HEALTH_CHECK_TIMEOUT = 150;\nconst HEALTH_CHECK_MIN_DELAY = 5000; // 5 sec\n\nlet updateCallback: OnApiUpdate;\nlet worker: Worker | undefined;\nlet connector: Connector | undefined;\nlet isInitialized = false;\n\nexport function initApi(onUpdate: OnApiUpdate, initArgs: ApiInitArgs | (() => ApiInitArgs)) {\n  updateCallback = onUpdate;\n\n  if (!connector) {\n    // We use process.env.IS_EXTENSION instead of IS_EXTENSION in order to remove the irrelevant code during bundling\n    if (process.env.IS_EXTENSION) {\n      const getInitArgs = typeof initArgs === 'function' ? initArgs : () => initArgs;\n      connector = createExtensionConnector(POPUP_PORT, onUpdate, getInitArgs as () => ApiInitArgs);\n\n      createWindowProviderForExtension();\n    } else {\n      worker = new Worker(\n        /* webpackChunkName: \"worker\" */ new URL('./provider.ts', import.meta.url),\n      );\n      connector = createConnector(worker, onUpdate);\n\n      createWindowProvider(worker);\n    }\n  }\n\n  if (!isInitialized) {\n    if (!process.env.IS_EXTENSION && IS_IOS) {\n      setupIosHealthCheck();\n    }\n    isInitialized = true;\n  }\n\n  const args = typeof initArgs === 'function' ? initArgs() : initArgs;\n  return connector.init(args);\n}\n\nexport async function callApi<T extends keyof AllMethods>(fnName: T, ...args: AllMethodArgs<T>) {\n  if (!connector) {\n    logDebugError('API is not initialized when calling', fnName);\n    return undefined;\n  }\n\n  try {\n    const result = await (connector.request({\n      name: fnName,\n      args,\n    }) as Promise<AllMethodResponse<T>>);\n\n    logDebugApi(`callApi: ${fnName}`, args, result);\n\n    return result;\n  } catch (err) {\n    return undefined;\n  }\n}\n\nexport function callApiWithThrow<T extends keyof AllMethods>(fnName: T, ...args: AllMethodArgs<T>) {\n  return (connector!.request({\n    name: fnName,\n    args,\n  }) as AllMethodResponse<T>);\n}\n\nconst startedAt = Date.now();\n\n// Workaround for iOS sometimes stops interacting with worker\nfunction setupIosHealthCheck() {\n  window.addEventListener('focus', () => {\n    void ensureWorkerPing();\n    // Sometimes a single check is not enough\n    setTimeout(() => ensureWorkerPing(), 1000);\n  });\n}\n\nasync function ensureWorkerPing() {\n  let isResolved = false;\n\n  try {\n    await Promise.race([\n      callApiWithThrow('ping'),\n      pause(HEALTH_CHECK_TIMEOUT)\n        .then(() => (isResolved ? undefined : Promise.reject(new Error('HEALTH_CHECK_TIMEOUT')))),\n    ]);\n  } catch (err) {\n    logDebugError('ensureWorkerPing', err);\n\n    if (Date.now() - startedAt >= HEALTH_CHECK_MIN_DELAY) {\n      worker?.terminate();\n      worker = undefined;\n      connector = undefined;\n      updateCallback({ type: 'requestReconnectApi' });\n    }\n  } finally {\n    isResolved = true;\n  }\n}\n","import { WINDOW_PROVIDER_CHANNEL, WINDOW_PROVIDER_PORT } from '../../config';\nimport { createPostMessageInterface, createReverseExtensionInterface } from '../createPostMessageInterface';\nimport * as windowMethods from './methods';\n\nexport function createWindowProvider(worker: Worker) {\n  createPostMessageInterface(windowMethods, WINDOW_PROVIDER_CHANNEL, worker, true);\n}\n\nexport function createWindowProviderForExtension() {\n  createReverseExtensionInterface(WINDOW_PROVIDER_PORT, windowMethods);\n}\n","import type { LangCode } from '../global/types';\n\nimport {\n  IS_CAPACITOR, IS_CORE_WALLET, IS_EXTENSION, IS_FIREFOX_EXTENSION, IS_TELEGRAM_APP, LANG_LIST,\n} from '../config';\nimport { requestForcedReflow } from '../lib/fasterdom/fasterdom';\nimport { DETACHED_TAB_URL } from './ledger/tab';\nimport { getPlatform } from './getPlatform';\n\nconst TELEGRAM_MOBILE_PLATFORM = new Set(['android', 'android_x', 'ios']);\n\nfunction isIPad() {\n  const { userAgent, platform } = window.navigator;\n  return platform === 'iPad'\n    || userAgent.includes('iPad')\n    || (platform === 'MacIntel' && ('maxTouchPoints' in navigator && navigator.maxTouchPoints > 2));\n}\n\nfunction getBrowserLanguage(): LangCode {\n  if (IS_CORE_WALLET) return 'en';\n\n  const { language } = navigator;\n  const lang = language.startsWith('zh')\n    ? (language.endsWith('TW') || language.endsWith('HK') ? 'zh-Hant' : 'zh-Hans')\n    : language.substring(0, 2);\n\n  return (LANG_LIST.some(({ langCode }) => langCode === lang) ? lang : 'en') as LangCode;\n}\n\nexport const IS_PWA = (\n  window.matchMedia('(display-mode: standalone)').matches\n  || (window.navigator as any).standalone\n  || document.referrer.includes('android-app://')\n);\n\nexport const PLATFORM_ENV = getPlatform();\nexport const IS_MAC_OS = PLATFORM_ENV === 'macOS';\nexport const IS_WINDOWS = PLATFORM_ENV === 'Windows';\nexport const IS_LINUX = PLATFORM_ENV === 'Linux';\nexport const IS_IOS = PLATFORM_ENV === 'iOS';\nexport const IS_ANDROID = PLATFORM_ENV === 'Android';\nexport const IS_SAFARI = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\nexport const IS_OPERA = navigator.userAgent.includes(' OPR/');\nexport const IS_EDGE = navigator.userAgent.includes(' Edg/');\nexport const IS_FIREFOX = navigator.userAgent.includes('Firefox/');\nexport const IS_TOUCH_ENV = window.matchMedia('(pointer: coarse)').matches;\nexport const IS_CHROME_EXTENSION = Boolean(window.chrome?.system);\nexport const IS_ELECTRON = Boolean(window.electron);\nexport const IS_WEB = !IS_CAPACITOR && !IS_ELECTRON && !IS_EXTENSION && !IS_TELEGRAM_APP;\nexport const DEFAULT_LANG_CODE = 'en';\nexport const USER_AGENT_LANG_CODE = getBrowserLanguage();\nexport const DPR = window.devicePixelRatio || 1;\nexport const IS_LEDGER_SUPPORTED = IS_CAPACITOR\n  || !(IS_CORE_WALLET || IS_IOS || IS_FIREFOX_EXTENSION || IS_TELEGRAM_APP);\nexport const IS_LEDGER_EXTENSION_TAB = global.location.hash.startsWith(DETACHED_TAB_URL);\n// Disable biometric auth on electron for now until this issue is fixed:\n// https://github.com/electron/electron/issues/24573\nexport const IS_BIOMETRIC_AUTH_SUPPORTED = Boolean(\n  !IS_CAPACITOR && !IS_TELEGRAM_APP && window.navigator.credentials && (!IS_ELECTRON || IS_MAC_OS),\n);\nexport const IS_DELEGATED_BOTTOM_SHEET = IS_CAPACITOR && global.location.search.startsWith('?bottom-sheet');\nexport const IS_DELEGATING_BOTTOM_SHEET = IS_CAPACITOR && IS_IOS && !IS_DELEGATED_BOTTOM_SHEET && !isIPad();\nexport const IS_MULTITAB_SUPPORTED = 'BroadcastChannel' in window && !IS_LEDGER_EXTENSION_TAB;\nexport const IS_DAPP_SUPPORTED = IS_EXTENSION || IS_ELECTRON || IS_CAPACITOR;\nexport const IS_IOS_APP = IS_IOS && IS_CAPACITOR;\nexport const IS_ANDROID_APP = IS_ANDROID && IS_CAPACITOR;\n\n// Note: As of 27-11-2023, Firefox does not support readText()\n// Note: As of 22-02-2023, clipboard functionality is only available to the Telegram partners\n// https://github.com/Telegram-Mini-Apps/telegram-apps/issues/609#issuecomment-2571435311\nexport const IS_CLIPBOARDS_SUPPORTED = !(IS_FIREFOX || IS_FIREFOX_EXTENSION || IS_TELEGRAM_APP);\n\nexport const REM = parseInt(getComputedStyle(document.documentElement).fontSize, 10);\nexport const STICKY_CARD_INTERSECTION_THRESHOLD = -3 * REM;\n\nexport function setScrollbarWidthProperty() {\n  const el = document.createElement('div');\n  el.style.cssText = 'overflow-x: hidden; overflow-y: scroll; visibility:hidden; position:absolute;';\n  el.classList.add('custom-scroll');\n  document.body.appendChild(el);\n\n  requestForcedReflow(() => {\n    const width = el.offsetWidth - el.clientWidth;\n\n    return () => {\n      document.documentElement.style.setProperty('--scrollbar-width', `${width}px`);\n      el.remove();\n    };\n  });\n}\n\nexport function getIsMobileTelegramApp() {\n  return IS_TELEGRAM_APP && TELEGRAM_MOBILE_PLATFORM.has(window.Telegram?.WebApp.platform ?? '');\n}\n","import type { AccountIdParsed, ApiNetwork } from '../api/types';\nimport type { Account } from '../global/types';\n\nimport { shortenAddress } from './shortenAddress';\n\nexport function parseAccountId(accountId: string): AccountIdParsed {\n  const parts = accountId.split('-');\n  const [id, network = 'mainnet'] = (parts.length === 3 ? [parts[0], parts[2]] : parts) as [string, ApiNetwork];\n  return { id: Number(id), network };\n}\n\nexport function buildAccountId(account: AccountIdParsed) {\n  const { id, network } = account;\n  return `${id}-${network}`;\n}\n\nexport function getMainAccountAddress(addressByChain: Account['addressByChain']) {\n  return addressByChain.ton ?? Object.values(addressByChain).find(Boolean);\n}\n\nexport function getAccountTitle(account: Account) {\n  return account.title || shortenAddress(getMainAccountAddress(account.addressByChain) ?? '');\n}\n","type CollectionByKey<Member> = Record<number | string, Member>;\ntype GroupedByKey<Member> = Record<number | string, Member[]>;\n\ntype OrderDirection =\n  'asc'\n  | 'desc';\n\ntype OrderCallback<T> = (member: T) => unknown;\n\nexport function buildCollectionByKey<T extends AnyLiteral>(collection: readonly T[], key: keyof T): CollectionByKey<T> {\n  return collection.reduce((byKey: CollectionByKey<T>, member: T) => {\n    byKey[member[key]] = member;\n\n    return byKey;\n  }, {});\n}\n\nexport function groupBy<T extends AnyLiteral>(collection: readonly T[], key: keyof T): GroupedByKey<T> {\n  return collection.reduce((byKey: GroupedByKey<T>, member: T) => {\n    const groupKey = member[key];\n\n    if (!byKey[groupKey]) {\n      byKey[groupKey] = [member];\n    } else {\n      byKey[groupKey].push(member);\n    }\n\n    return byKey;\n  }, {});\n}\n\nexport function mapValues<R, M>(\n  byKey: CollectionByKey<M>,\n  callback: (member: M, key: string, index: number, originalByKey: CollectionByKey<M>) => R,\n): CollectionByKey<R> {\n  return Object.keys(byKey).reduce((newByKey: CollectionByKey<R>, key, index) => {\n    newByKey[key] = callback(byKey[key], key, index, byKey);\n    return newByKey;\n  }, {});\n}\n\nexport function pick<T, K extends keyof T>(object: T, keys: K[]) {\n  return keys.reduce((result, key) => {\n    result[key] = object[key];\n    return result;\n  }, {} as Pick<T, K>);\n}\n\nexport function pickTruthy<T, K extends keyof T>(object: T, keys: K[]) {\n  return keys.reduce((result, key) => {\n    if (object[key]) {\n      result[key] = object[key];\n    }\n\n    return result;\n  }, {} as Pick<T, K>);\n}\n\nexport function omit<T extends object, K extends keyof T>(object: T, keys: K[]): Omit<T, K> {\n  const stringKeys = new Set(keys.map(String));\n  const savedKeys = Object.keys(object)\n    .filter((key) => !stringKeys.has(key)) as Array<Exclude<keyof T, K>>;\n\n  return pick(object, savedKeys);\n}\n\nexport function omitUndefined<T extends object>(object: T): T {\n  return Object.keys(object).reduce((result, stringKey) => {\n    const key = stringKey as keyof T;\n    if (object[key] !== undefined) {\n      result[key] = object[key];\n    }\n    return result;\n  }, {} as T);\n}\n\nexport function orderBy<T>(\n  collection: T[],\n  orderRule: (keyof T) | OrderCallback<T> | ((keyof T) | OrderCallback<T>)[],\n  mode: OrderDirection | [OrderDirection, OrderDirection] = 'asc',\n): T[] {\n  function compareValues(a: T, b: T, currentOrderRule: (keyof T) | OrderCallback<T>, isAsc: boolean) {\n    const aValue = (typeof currentOrderRule === 'function' ? currentOrderRule(a) : a[currentOrderRule]) || 0;\n    const bValue = (typeof currentOrderRule === 'function' ? currentOrderRule(b) : b[currentOrderRule]) || 0;\n\n    if (aValue === bValue) return 0;\n\n    const condition = isAsc ? aValue > bValue : aValue < bValue;\n    return condition ? 1 : -1;\n  }\n\n  if (Array.isArray(orderRule)) {\n    const [mode1, mode2] = Array.isArray(mode) ? mode : [mode, mode];\n    const [orderRule1, orderRule2] = orderRule;\n    const isAsc1 = mode1 === 'asc';\n    const isAsc2 = mode2 === 'asc';\n\n    return collection.sort((a, b) => {\n      return compareValues(a, b, orderRule1, isAsc1) || compareValues(a, b, orderRule2, isAsc2);\n    });\n  }\n\n  const isAsc = mode === 'asc';\n  return collection.sort((a, b) => {\n    return compareValues(a, b, orderRule, isAsc);\n  });\n}\n\nexport function unique<T>(array: T[]): T[] {\n  return Array.from(new Set(array));\n}\n\nexport function compact<T>(array: T[]) {\n  return array.filter(Boolean);\n}\n\nexport function areSortedArraysEqual<T>(array1: readonly T[], array2: readonly T[]) {\n  if (array1.length !== array2.length) {\n    return false;\n  }\n\n  return array1.every((item, i) => item === array2[i]);\n}\n\nexport function split<T>(array: T[], chunkSize: number) {\n  const result: T[][] = [];\n  for (let i = 0; i < array.length; i += chunkSize) {\n    result.push(array.slice(i, i + chunkSize));\n  }\n\n  return result;\n}\n\nexport function cloneDeep<T>(value: T): T {\n  if (!isObject(value)) {\n    return value;\n  }\n\n  if (Array.isArray(value)) {\n    return value.map(cloneDeep) as typeof value;\n  }\n\n  return Object.keys(value).reduce((acc, key) => {\n    acc[key as keyof T] = cloneDeep(value[key as keyof T]);\n    return acc;\n  }, {} as T);\n}\n\nexport function isLiteralObject(value: any): value is AnyLiteral {\n  return isObject(value) && !Array.isArray(value);\n}\n\nfunction isObject(value: any): value is object {\n  // eslint-disable-next-line no-null/no-null\n  return typeof value === 'object' && value !== null;\n}\n\nexport function findLast<T>(array: Array<T>, predicate: (value: T, index: number, obj: T[]) => boolean): T | undefined {\n  let cursor = array.length;\n\n  while (cursor--) {\n    if (predicate(array[cursor], cursor, array)) {\n      return array[cursor];\n    }\n  }\n\n  return undefined;\n}\n\nexport function range(start: number, end: number) {\n  const arr: number[] = [];\n  for (let i = start; i < end;) {\n    arr.push(i++);\n  }\n  return arr;\n}\n\nexport function fromKeyValueArrays<T>(keys: string[], values: T[] | T) {\n  return keys.reduce((acc, key, index) => {\n    acc[key] = Array.isArray(values) ? values[index] : values;\n    return acc;\n  }, {} as Record<string, T>);\n}\n\nexport function extractKey<T, K extends keyof T>(array: readonly T[], key: K): T[K][] {\n  return array.map((value) => value[key]);\n}\n\nexport function findDifference<T>(array1: Iterable<T>, array2: Iterable<T>): T[] {\n  const set2 = new Set(array2);\n  const diff: T[] = [];\n\n  for (const element of array1) {\n    if (!set2.has(element)) {\n      diff.push(element);\n    }\n  }\n\n  return diff;\n}\n\nexport function filterValues<M>(\n  byKey: CollectionByKey<M>,\n  callback: (member: M, key: string, index: number, originalByKey: CollectionByKey<M>) => boolean,\n): CollectionByKey<M> {\n  return Object.keys(byKey).reduce((newByKey: CollectionByKey<M>, key, index) => {\n    if (callback(byKey[key], key, index, byKey)) {\n      newByKey[key] = byKey[key];\n    }\n\n    return newByKey;\n  }, {});\n}\n\nexport function uniqueByKey<T>(array: T[], key: keyof T, shouldKeepFirst?: boolean) {\n  if (shouldKeepFirst) {\n    array = Array.from(array);\n    array.reverse();\n  }\n\n  const result = [...new Map(array.map((item) => [item[key], item])).values()];\n\n  if (shouldKeepFirst) {\n    result.reverse();\n  }\n\n  return result;\n}\n\nexport function intersection<T>(x: Set<T>, y: Set<T>): Set<T> {\n  const result = new Set<T>();\n  for (const elem of y) {\n    if (x.has(elem)) {\n      result.add(elem);\n    }\n  }\n  return result;\n}\n\nexport function swapKeysAndValues<\n  K extends string | number,\n  V extends keyof any,\n>(object: Record<K, V>): Record<V, `${K}`> {\n  const result = {} as any;\n  for (const [key, value] of Object.entries(object)) {\n    result[value as any] = key;\n  }\n  return result;\n}\n","import withCache from './withCache';\n\nexport const MEANINGFUL_CHAR_LENGTH = 6;\nconst FILLER = '';\nconst FILLER_LENGTH = FILLER.length;\n\nexport const shortenAddress = withCache((address: string, shift = MEANINGFUL_CHAR_LENGTH, fromRight = shift) => {\n  if (!address) return undefined;\n\n  if (address.length <= shift + fromRight + FILLER_LENGTH) return address;\n\n  return `${address.slice(0, shift)}${FILLER}${address.slice(-fromRight)}`;\n});\n","import type { SecureStoragePluginPlugin } from 'capacitor-secure-storage-plugin';\n\nimport type { StorageKey } from '../../../api/storages/types';\n\nimport { IS_CAPACITOR } from '../../../config';\n\nlet SecureStoragePlugin: SecureStoragePluginPlugin | undefined;\nlet resolvePromise: AnyFunction;\n\nconst promise = new Promise((resolve) => {\n  resolvePromise = resolve;\n});\n\nexport async function init() {\n  if (IS_CAPACITOR && !SecureStoragePlugin) {\n    ({ SecureStoragePlugin } = await import(\n      /* webpackChunkName: \"capacitorSecureStorage\" */ 'capacitor-secure-storage-plugin',\n    ));\n    resolvePromise();\n  }\n}\n\nexport async function capacitorStorageGetItem(key: StorageKey) {\n  await promise;\n  return (await SecureStoragePlugin!.get({ key }).catch((err) => {\n    const message = typeof err === 'string' ? err : err.message;\n    if (message.includes('key does not exist')) {\n      return undefined;\n    } else {\n      throw err;\n    }\n  }))?.value;\n}\n\nexport async function capacitorStorageSetItem(key: StorageKey, value: string) {\n  await promise;\n  return SecureStoragePlugin!.set({ key, value });\n}\n\nexport async function capacitorStorageRemoveItem(key: StorageKey) {\n  await promise;\n  return SecureStoragePlugin!.remove({ key });\n}\n\nexport async function capacitorStorageClear() {\n  await promise;\n  return SecureStoragePlugin!.clear();\n}\n\nexport async function capacitorStorageKeys() {\n  await promise;\n  return SecureStoragePlugin!.keys();\n}\n","import { pick } from '../../iteratees';\n\nexport function localStorageGetItem(key: string) {\n  return localStorage.getItem(key);\n}\n\nexport function localStorageSetItem(key: string, value: string) {\n  return localStorage.setItem(key, value);\n}\n\nexport function localStorageRemoveItem(key: string) {\n  return localStorage.removeItem(key);\n}\n\nexport function localStorageClear() {\n  return localStorage.clear();\n}\n\nexport function localStorageGetAll() {\n  return { ...localStorage };\n}\n\nexport function localStorageGetMany(keys: string[]) {\n  return pick(localStorage, keys);\n}\n\nexport function localStorageSetMany(items: AnyLiteral) {\n  Object.assign(localStorage, items);\n}\n","import { isAscii } from '../stringFormat';\n\nconst MAX_COMMENT_SIZE = 120;\nconst BROKEN_CONNECTION_ERRORS = new Set(['DisconnectedDeviceDuringOperation', 'TransportRaceCondition']);\n\nexport function isValidLedgerComment(comment: string) {\n  return isAscii(comment) && isLedgerCommentLengthValid(comment);\n}\n\nexport function isLedgerCommentLengthValid(comment: string) {\n  return comment.length <= MAX_COMMENT_SIZE;\n}\n\nexport function isLedgerConnectionBroken(error: string) {\n  return BROKEN_CONNECTION_ERRORS.has(error);\n}\n","export function isAscii(str: string) {\n  for (let i = 0; i < str.length; i++) {\n    if (str.charCodeAt(i) > 127) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function insertSubstring(str: string, start: number, newSubStr: string) {\n  if (start < 0) {\n    start = str.length - start;\n  }\n  return str.slice(0, start) + newSubStr + str.slice(start);\n}\n\nexport function hexToString(hex: string): string {\n  let result = '';\n  for (let i = 0; i < hex.length; i += 2) {\n    result += String.fromCharCode(parseInt(hex.slice(i, i + 2), 16));\n  }\n\n  return result;\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + {\"88\":\"624986b76c0ad075690b\",\"104\":\"d3d0658321759c7a1c20\",\"106\":\"4f3d72aecd28d192bbee\",\"115\":\"b1e9d00fb880ad222fab\",\"148\":\"d4136b6a5ecf56ede3d7\",\"168\":\"f08bfcfdc8c60a24e8ed\",\"196\":\"47374b197e148f7562b8\",\"201\":\"a9df2475054636d04195\",\"215\":\"02897e46fb157ff77165\",\"283\":\"8137301fc53480049325\",\"355\":\"6257ddbc1a880aea34d0\",\"408\":\"4a5a307a8a814b280078\",\"411\":\"f3fddccbfc7a4f1d09cc\",\"477\":\"b487be8764000f2f30c2\",\"513\":\"ebadc095aa3ee931d37b\",\"524\":\"e3273a4aa6d77206c53b\",\"542\":\"8b97033f3a252281472f\",\"564\":\"652088edade4d9ed67f5\",\"580\":\"82f879326ce5b9c846f1\",\"612\":\"209737ae0d82b434ab41\",\"642\":\"9ac8bf3c16187bc49a7f\",\"789\":\"ee1e19d801c1e8bfab4d\",\"884\":\"b0155df7dd4719a9838e\",\"895\":\"91b32485bcc6a9f2cef6\",\"897\":\"b0aa8daaa0f11c289b24\",\"941\":\"6c4cc21f8b528818079c\",\"949\":\"10c81af08aa931279b35\",\"956\":\"1c3822f193a3d67e6aa6\",\"973\":\"8069d508cb08d6a3b5f3\",\"988\":\"5ebba37989fff908c5a9\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/^blob:/, \"\").replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0,\n\t840: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmytonwallet\"] = self[\"webpackChunkmytonwallet\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","export default function arePropsShallowEqual(currentProps: AnyLiteral, newProps: AnyLiteral) {\n  if (currentProps === newProps) {\n    return true;\n  }\n\n  const currentKeys = Object.keys(currentProps);\n  const currentKeysLength = currentKeys.length;\n  const newKeysLength = Object.keys(newProps).length;\n\n  if (currentKeysLength !== newKeysLength) {\n    return false;\n  }\n\n  if (currentKeysLength === 0) {\n    return true;\n  }\n\n  for (let i = 0; i < currentKeysLength; i++) {\n    const prop = currentKeys[i];\n    if (currentProps[prop] !== newProps[prop]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function logUnequalProps(currentProps: AnyLiteral, newProps: AnyLiteral, msg: string, debugKey = '') {\n  const currentKeys = Object.keys(currentProps);\n  const currentKeysLength = currentKeys.length;\n  const newKeysLength = Object.keys(newProps).length;\n\n  if (currentKeysLength !== newKeysLength) {\n    // eslint-disable-next-line no-console\n    console.log(`${msg} LENGTH`);\n    return;\n  }\n\n  // eslint-disable-next-line no-console\n  console.log(msg);\n  currentKeys.forEach((prop) => {\n    if (currentProps[prop] !== newProps[prop]) {\n      // eslint-disable-next-line no-console\n      console.log(debugKey, prop, ':', currentProps[prop], '=>', newProps[prop]);\n    }\n  });\n}\n","import { animate } from './animation';\nimport { fastRaf, throttle } from './schedulers';\n\nconst KEYS_TO_IGNORE = new Set([\n  'TeactMemoWrapper renders',\n  'TeactNContainer renders',\n  'Button renders',\n]);\nconst MIN_RENDERS_TO_SHOW = 5;\nconst MIN_DURATION_TO_SHOW = 2;\n\nlet counters: Record<string, {\n  value: number;\n  lastUpdateAt: number;\n}> = {};\n\nconst renderCountersThrottled = throttle(renderCounters, 500, false);\n\nlet loggerEl: HTMLDivElement;\n\nexport function debugToOverlay(text: string) {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  const date = new Date();\n  const dateFormatted = `${date.toLocaleTimeString()}.${date.getMilliseconds()}`;\n  const wasAtBottom = loggerEl.scrollTop + 10 >= loggerEl.scrollHeight - loggerEl.offsetHeight;\n\n  loggerEl.append(`${dateFormatted}: ${text}`, document.createElement('br'));\n\n  if (wasAtBottom) {\n    loggerEl.scrollTop = loggerEl.scrollHeight;\n  }\n}\n\nexport function incrementOverlayCounter(key: string, value = 1) {\n  const now = Date.now();\n  if (!counters[key]) {\n    counters[key] = { value, lastUpdateAt: now };\n  } else {\n    counters[key].value += value;\n    counters[key].lastUpdateAt = now;\n  }\n\n  renderCountersThrottled();\n}\n\nexport function renderCounters() {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  const halfSecondAgo = Date.now() - 500;\n  const [maxRenders, maxDuration] = Object.entries(counters).reduce((acc, [key, { value }]) => {\n    if (KEYS_TO_IGNORE.has(key)) {\n      return acc;\n    }\n\n    if (key.includes('renders') && value > acc[0]) {\n      acc[0] = value;\n    }\n\n    if (key.includes('duration') && value > acc[1]) {\n      acc[1] = value;\n    }\n\n    return acc;\n  }, [0, 0]);\n\n  loggerEl.innerHTML = '';\n  Object\n    .entries(counters)\n    .filter(([key, { value }]) => (\n      (!KEYS_TO_IGNORE.has(key)) && (\n        (key.includes('renders') && value > MIN_RENDERS_TO_SHOW)\n        || (key.includes('duration') && value > MIN_DURATION_TO_SHOW)\n      )\n    ))\n    .sort((a, b) => (\n      b[1].lastUpdateAt - a[1].lastUpdateAt\n    ))\n    .forEach(([key, { value, lastUpdateAt }]) => {\n      const content = document.createElement('span');\n      content.style.background = lastUpdateAt > halfSecondAgo ? 'lightgreen' : '';\n      content.textContent = `${key}: ${Math.round(value)}`;\n      const parent = document.createElement('div');\n      parent.style.background = `#ff0000${factorToHex(value / (key.includes('renders') ? maxRenders : maxDuration))}`;\n      parent.append(content);\n      loggerEl.append(parent);\n    });\n}\n\nexport function debugFps() {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  let ticks: number[] = [];\n  let lastFrameAt = performance.now();\n\n  animate(() => {\n    const now = performance.now();\n    ticks.push(now - lastFrameAt);\n    lastFrameAt = now;\n\n    if (ticks.length > 100) {\n      ticks = ticks.slice(-100);\n    }\n\n    const avg = ticks.reduce((acc, t) => acc + t, 0) / ticks.length;\n    loggerEl!.textContent = `${Math.round(1000 / avg)} FPS`;\n    return true;\n  }, fastRaf);\n}\n\nfunction setupOverlay() {\n  loggerEl = document.createElement('div');\n  loggerEl.style.cssText = 'position: absolute; left: 0; bottom: 25px; z-index: 9998; width: 260px; height: 200px;'\n    + ' border: 1px solid #555; background: rgba(255, 255, 255, 0.9); overflow: auto; font-size: 12px; color: black;';\n  document.body.appendChild(loggerEl);\n\n  const clearEl = document.createElement('a');\n  clearEl.style.cssText = 'position: absolute; left: 222px; bottom: 198px; z-index: 9999; font-size: 20px; '\n    + 'cursor: pointer;';\n  clearEl.innerText = '';\n  clearEl.addEventListener('click', () => {\n    counters = {};\n    renderCountersThrottled();\n  });\n  document.body.appendChild(clearEl);\n}\n\nfunction factorToHex(factor: number) {\n  return Math.round(255 * factor).toString(16).padStart(2, '0');\n}\n","export function createCallbackManager<T extends AnyToVoidFunction = AnyToVoidFunction>() {\n  const callbacks = new Set<T>();\n\n  function addCallback(cb: T) {\n    callbacks.add(cb);\n\n    return () => {\n      removeCallback(cb);\n    };\n  }\n\n  function removeCallback(cb: T) {\n    callbacks.delete(cb);\n  }\n\n  function runCallbacks(...args: Parameters<T>) {\n    callbacks.forEach((callback) => {\n      callback(...args);\n    });\n  }\n\n  function hasCallbacks() {\n    return Boolean(callbacks.size);\n  }\n\n  return {\n    runCallbacks,\n    addCallback,\n    removeCallback,\n    hasCallbacks,\n  };\n}\n\nexport type CallbackManager<T extends AnyToVoidFunction = AnyToVoidFunction>\n  = ReturnType<typeof createCallbackManager<T>>;\n\nexport class EventEmitter {\n  private channels = new Map<string, CallbackManager>();\n\n  on(name: string, handler: AnyToVoidFunction) {\n    this.resolveChannel(name).addCallback(handler);\n    return this;\n  }\n\n  removeListener(name: string, handler: AnyToVoidFunction) {\n    this.resolveChannel(name).removeCallback(handler);\n    return this;\n  }\n\n  emit(name: string, ...args: any) {\n    this.resolveChannel(name).runCallbacks(...args);\n    return this;\n  }\n\n  private resolveChannel(name: string) {\n    let channel = this.channels.get(name);\n    if (!channel) {\n      channel = createCallbackManager();\n      this.channels.set(name, channel);\n    }\n\n    return channel;\n  }\n}\n","import type { CallbackManager } from './callbacks';\n\nimport { createCallbackManager } from './callbacks';\n\ninterface SignalState<T> {\n  value: T;\n  effects: CallbackManager;\n}\n\nconst SIGNAL_MARK = Symbol('SIGNAL_MARK');\n\nexport type Signal<T = any> = ((() => T) & {\n  readonly [SIGNAL_MARK]: symbol;\n  subscribe: (cb: NoneToVoidFunction) => NoneToVoidFunction;\n  once: (cb: NoneToVoidFunction) => NoneToVoidFunction;\n});\n\nexport type SignalSetter = (newValue: any) => void;\n\nexport function isSignal(obj: any): obj is Signal {\n  return typeof obj === 'function' && SIGNAL_MARK in obj;\n}\n\n// A shorthand to unsubscribe effect from all signals\nconst unsubscribesByEffect = new Map<NoneToVoidFunction, Set<NoneToVoidFunction>>();\n\nlet currentEffect: NoneToVoidFunction | undefined;\n\nexport function createSignal<T>(defaultValue?: T) {\n  const state: SignalState<typeof defaultValue> = {\n    value: defaultValue,\n    effects: createCallbackManager(),\n  };\n\n  function subscribe(effect: NoneToVoidFunction) {\n    const unsubscribe = state.effects.addCallback(effect);\n\n    if (!unsubscribesByEffect.has(effect)) {\n      unsubscribesByEffect.set(effect, new Set([unsubscribe]));\n    } else {\n      unsubscribesByEffect.get(effect)!.add(unsubscribe);\n    }\n\n    return () => {\n      unsubscribe();\n\n      const unsubscribes = unsubscribesByEffect.get(effect)!;\n      unsubscribes.delete(unsubscribe);\n      if (!unsubscribes.size) {\n        unsubscribesByEffect.delete(effect);\n      }\n    };\n  }\n\n  function once(effect: NoneToVoidFunction) {\n    const unsub = subscribe(() => {\n      unsub();\n      effect();\n    });\n\n    return unsub;\n  }\n\n  function getter() {\n    if (currentEffect) {\n      subscribe(currentEffect);\n    }\n\n    return state.value;\n  }\n\n  function setter(newValue: T) {\n    if (state.value === newValue) {\n      return;\n    }\n\n    state.value = newValue;\n    state.effects.runCallbacks();\n  }\n\n  const signal = Object.assign(getter as Signal<T>, {\n    [SIGNAL_MARK]: SIGNAL_MARK,\n    subscribe,\n    once,\n  });\n\n  return [signal, setter] as const;\n}\n\nexport function cleanupEffect(effect: NoneToVoidFunction) {\n  unsubscribesByEffect.get(effect)?.forEach((unsubscribe) => {\n    unsubscribe();\n  });\n  unsubscribesByEffect.delete(effect);\n}\n","import { onIdle, throttleWith } from '../../util/schedulers';\nimport { createSignal } from '../../util/signals';\nimport { requestMeasure } from '../fasterdom/fasterdom';\n\nconst AUTO_END_TIMEOUT = 1000;\n\nlet counter = 0;\nlet counterBlocking = 0;\n\nconst [getIsAnimating, setIsAnimating] = createSignal(false);\nconst [getIsBlockingAnimating, setIsBlockingAnimating] = createSignal(false);\n\nexport const getIsHeavyAnimating = getIsAnimating;\nexport { getIsBlockingAnimating };\n\nexport function beginHeavyAnimation(duration = AUTO_END_TIMEOUT, isBlocking = false) {\n  counter++;\n\n  if (counter === 1) {\n    setIsAnimating(true);\n  }\n\n  if (isBlocking) {\n    counterBlocking++;\n\n    if (counterBlocking === 1) {\n      setIsBlockingAnimating(true);\n    }\n  }\n\n  const timeout = window.setTimeout(onEnd, duration);\n\n  let hasEnded = false;\n\n  function onEnd() {\n    if (hasEnded) return;\n    hasEnded = true;\n\n    clearTimeout(timeout);\n\n    counter--;\n\n    if (counter === 0) {\n      setIsAnimating(false);\n    }\n\n    if (isBlocking) {\n      counterBlocking--;\n\n      if (counterBlocking === 0) {\n        setIsBlockingAnimating(false);\n      }\n    }\n  }\n\n  return onEnd;\n}\n\nexport function onFullyIdle(cb: NoneToVoidFunction) {\n  onIdle(() => {\n    if (getIsAnimating()) {\n      requestMeasure(() => {\n        onFullyIdle(cb);\n      });\n    } else {\n      cb();\n    }\n  });\n}\n\nexport function throttleWithFullyIdle<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(onFullyIdle, fn);\n}\n","import type { ReactElement } from 'react';\n\nimport { DEBUG, DEBUG_MORE } from '../../config';\nimport { logUnequalProps } from '../../util/arePropsShallowEqual';\nimport { incrementOverlayCounter } from '../../util/debugOverlay';\nimport { orderBy } from '../../util/iteratees';\nimport safeExec from '../../util/safeExec';\nimport { throttleWith } from '../../util/schedulers';\nimport { createSignal, isSignal, type Signal } from '../../util/signals';\nimport { requestMeasure, requestMutation } from '../fasterdom/fasterdom';\nimport { getIsBlockingAnimating } from './heavyAnimation';\n\nexport { getIsHeavyAnimating, beginHeavyAnimation, onFullyIdle } from './heavyAnimation';\n\nexport type Props = AnyLiteral;\nexport type FC<P extends Props = any> = (props: P) => any;\n\nexport type FC_withDebug =\n  FC\n  & { DEBUG_contentComponentName?: string };\n\nexport enum VirtualType {\n  Empty,\n  Text,\n  Tag,\n  Component,\n  Fragment,\n}\n\ninterface VirtualElementEmpty {\n  type: VirtualType.Empty;\n  target?: Node;\n}\n\ninterface VirtualElementText {\n  type: VirtualType.Text;\n  target?: Node;\n  value: string;\n}\n\nexport interface VirtualElementTag {\n  type: VirtualType.Tag;\n  target?: HTMLElement | SVGElement;\n  tag: string;\n  props: Props;\n  children: VirtualElementChildren;\n}\n\nexport interface VirtualElementComponent {\n  type: VirtualType.Component;\n  componentInstance: ComponentInstance;\n  props: Props;\n  children: VirtualElementChildren;\n}\n\nexport interface VirtualElementFragment {\n  type: VirtualType.Fragment;\n  children: VirtualElementChildren;\n  placeholderTarget?: Comment;\n}\n\nexport type StateHookSetter<T> = (newValue: ((current: T) => T) | T) => void;\n\nexport interface RefObject<T = unknown> {\n  current: T;\n  onChange?: NoneToVoidFunction;\n}\n\nexport type ElementRef<T = HTMLElement> = RefObject<T | undefined>;\n\nexport enum MountState {\n  Mounting,\n  Mounted,\n  Unmounted,\n}\n\ninterface ComponentInstance {\n  id: number;\n  $element: VirtualElementComponent;\n  Component: FC;\n  name: string;\n  props: Props;\n  renderedValue?: any;\n  mountState: MountState;\n  context?: Record<string, Signal<unknown>>;\n  hooks?: {\n    state?: {\n      cursor: number;\n      byCursor: {\n        value: any;\n        nextValue: any;\n        setter: StateHookSetter<any>;\n      }[];\n    };\n    effects?: {\n      cursor: number;\n      byCursor: {\n        dependencies?: readonly unknown[];\n        schedule?: NoneToVoidFunction;\n        cleanup?: NoneToVoidFunction;\n        releaseSignals?: NoneToVoidFunction;\n      }[];\n    };\n    memos?: {\n      cursor: number;\n      byCursor: {\n        value: any;\n        dependencies: readonly unknown[];\n      }[];\n    };\n    refs?: {\n      cursor: number;\n      byCursor: RefObject[];\n    };\n  };\n  prepareForFrame?: () => void;\n  forceUpdate?: () => void;\n  onUpdate?: () => void;\n}\n\nexport type VirtualElement =\n  VirtualElementEmpty\n  | VirtualElementText\n  | VirtualElementTag\n  | VirtualElementComponent\n  | VirtualElementFragment;\nexport type VirtualElementParent =\n  VirtualElementTag\n  | VirtualElementComponent\n  | VirtualElementFragment;\nexport type VirtualElementChildren = VirtualElement[];\nexport type VirtualElementReal = Exclude<VirtualElement, VirtualElementComponent | VirtualElementFragment>;\n\n// Compatibility with JSX types\nexport type TeactNode =\n  ReactElement\n  | string\n  | number\n  | boolean\n  | undefined\n  | TeactNode[];\n\ntype Effect = () => (NoneToVoidFunction | void);\ntype EffectCleanup = NoneToVoidFunction;\n\nexport type Context<T> = {\n  defaultValue?: T;\n  contextId: string;\n  Provider: FC<{ value: T; children: TeactNode }>;\n};\n\nconst Fragment = Symbol('Fragment');\n\nconst DEBUG_RENDER_THRESHOLD = 7;\nconst DEBUG_EFFECT_THRESHOLD = 7;\nconst DEBUG_SILENT_RENDERS_FOR = new Set(['TeactMemoWrapper', 'TeactNContainer', 'Button', 'ListItem', 'MenuItem']);\n\nlet contextCounter = 0;\n\nlet lastComponentId = 0;\nlet renderingInstance: ComponentInstance;\n\nexport function isParentElement($element: VirtualElement): $element is VirtualElementParent {\n  return (\n    $element.type === VirtualType.Tag\n    || $element.type === VirtualType.Component\n    || $element.type === VirtualType.Fragment\n  );\n}\n\nfunction createElement(\n  source: string | FC | typeof Fragment,\n  props: Props,\n  ...children: any[]\n): VirtualElementParent | VirtualElementChildren {\n  if (source === Fragment) {\n    return buildFragmentElement(children);\n  } else if (typeof source === 'function') {\n    return createComponentInstance(source, props || {}, children);\n  } else {\n    return buildTagElement(source, props || {}, children);\n  }\n}\n\nfunction buildFragmentElement(children: any[]): VirtualElementFragment {\n  return {\n    type: VirtualType.Fragment,\n    children: buildChildren(children, true),\n  };\n}\n\nfunction createComponentInstance(Component: FC, props: Props, children: any[]): VirtualElementComponent {\n  if (children?.length) {\n    props.children = children.length === 1 ? children[0] : children;\n  }\n\n  const componentInstance: ComponentInstance = {\n    id: -1,\n    $element: undefined as unknown as VirtualElementComponent,\n    Component,\n    name: Component.name,\n    props,\n    mountState: MountState.Unmounted,\n  };\n\n  componentInstance.$element = buildComponentElement(componentInstance);\n\n  return componentInstance.$element;\n}\n\nfunction buildComponentElement(\n  componentInstance: ComponentInstance,\n  children?: VirtualElementChildren,\n): VirtualElementComponent {\n  return {\n    type: VirtualType.Component,\n    componentInstance,\n    props: componentInstance.props,\n    children: children ? buildChildren(children, true) : [],\n  };\n}\n\nfunction buildTagElement(tag: string, props: Props, children: any[]): VirtualElementTag {\n  return {\n    type: VirtualType.Tag,\n    tag,\n    props,\n    children: buildChildren(children),\n  };\n}\n\nfunction buildChildren(children: any[], noEmpty = false): VirtualElement[] {\n  const cleanChildren = dropEmptyTail(children, noEmpty);\n  const newChildren = [];\n\n  for (let i = 0, l = cleanChildren.length; i < l; i++) {\n    const child = cleanChildren[i];\n    if (Array.isArray(child)) {\n      newChildren.push(...buildChildren(child, noEmpty));\n    } else {\n      newChildren.push(buildChildElement(child));\n    }\n  }\n\n  return newChildren;\n}\n\n// We only need placeholders in the middle of collection (to ensure other elements order).\nfunction dropEmptyTail(children: any[], noEmpty = false) {\n  let i = children.length - 1;\n\n  for (; i >= 0; i--) {\n    if (!isEmptyPlaceholder(children[i])) {\n      break;\n    }\n  }\n\n  if (i === children.length - 1) {\n    return children;\n  }\n\n  if (i === -1 && noEmpty) {\n    return children.slice(0, 1);\n  }\n\n  return children.slice(0, i + 1);\n}\n\nfunction isEmptyPlaceholder(child: any) {\n  return !child && child !== 0;\n}\n\nfunction buildChildElement(child: any): VirtualElement {\n  if (isEmptyPlaceholder(child)) {\n    return { type: VirtualType.Empty };\n  } else if (isParentElement(child)) {\n    return child;\n  } else {\n    return {\n      type: VirtualType.Text,\n      value: String(child),\n    };\n  }\n}\n\nconst DEBUG_components: AnyLiteral = { TOTAL: { name: 'TOTAL', renders: 0 } };\n\nconst DEBUG_memos: Record<string, { key: string; calls: number; misses: number; hitRate: number }> = {};\nconst DEBUG_MEMOS_CALLS_THRESHOLD = 20;\n\ndocument.addEventListener('dblclick', () => {\n  // eslint-disable-next-line no-console\n  console.warn('COMPONENTS', orderBy(\n    Object\n      .values(DEBUG_components)\n      .map(({ avgRenderTime, ...state }) => {\n        return { ...state, ...(avgRenderTime !== undefined && { avgRenderTime: Number(avgRenderTime.toFixed(2)) }) };\n      }),\n    'renders',\n    'desc',\n  ));\n\n  // eslint-disable-next-line no-console\n  console.warn('MEMOS', orderBy(\n    Object\n      .values(DEBUG_memos)\n      .filter(({ calls }) => calls >= DEBUG_MEMOS_CALLS_THRESHOLD)\n      .map((state) => ({ ...state, hitRate: Number(state.hitRate.toFixed(2)) })),\n    'hitRate',\n    'asc',\n  ));\n});\n\nlet instancesPendingUpdate = new Set<ComponentInstance>();\nlet idsToExcludeFromUpdate = new Set<number>();\nlet pendingEffects = new Map<string, Effect>();\nlet pendingCleanups = new Map<string, EffectCleanup>();\nlet pendingLayoutEffects = new Map<string, Effect>();\nlet pendingLayoutCleanups = new Map<string, EffectCleanup>();\nlet areImmediateEffectsCaptured = false;\n\n/*\n  Order:\n  - component effect cleanups\n  - component effects\n  - measure tasks\n  - mutation tasks\n  - component updates\n  - component layout effect cleanups\n  - component layout effects\n  - forced layout measure tasks\n  - forced layout mutation tasks\n */\n\nconst runUpdatePassOnRaf = throttleWith(requestMeasure, () => {\n  if (getIsBlockingAnimating()) {\n    getIsBlockingAnimating.once(runUpdatePassOnRaf);\n    return;\n  }\n\n  const runImmediateEffects = captureImmediateEffects();\n\n  idsToExcludeFromUpdate = new Set();\n  const instancesToUpdate = Array\n    .from(instancesPendingUpdate)\n    .sort((a, b) => a.id - b.id);\n  instancesPendingUpdate = new Set();\n\n  const currentCleanups = pendingCleanups;\n  pendingCleanups = new Map();\n  currentCleanups.forEach((cb) => cb());\n\n  const currentEffects = pendingEffects;\n  pendingEffects = new Map();\n  currentEffects.forEach((cb) => cb());\n\n  requestMutation(() => {\n    instancesToUpdate.forEach(prepareComponentForFrame);\n    instancesToUpdate.forEach((instance) => {\n      if (idsToExcludeFromUpdate.has(instance.id)) {\n        return;\n      }\n\n      forceUpdateComponent(instance);\n    });\n\n    runImmediateEffects?.();\n  });\n});\n\nexport function captureImmediateEffects() {\n  if (areImmediateEffectsCaptured) {\n    return undefined;\n  }\n\n  areImmediateEffectsCaptured = true;\n  return runCapturedImmediateEffects;\n}\n\nfunction runCapturedImmediateEffects() {\n  const currentLayoutCleanups = pendingLayoutCleanups;\n  pendingLayoutCleanups = new Map();\n  currentLayoutCleanups.forEach((cb) => cb());\n\n  const currentLayoutEffects = pendingLayoutEffects;\n  pendingLayoutEffects = new Map();\n  currentLayoutEffects.forEach((cb) => cb());\n\n  areImmediateEffectsCaptured = false;\n}\n\nexport function renderComponent(componentInstance: ComponentInstance) {\n  idsToExcludeFromUpdate.add(componentInstance.id);\n\n  const { Component, props } = componentInstance;\n  let newRenderedValue: unknown;\n\n  safeExec(() => {\n    renderingInstance = componentInstance;\n    if (componentInstance.hooks) {\n      if (componentInstance.hooks.state) {\n        componentInstance.hooks.state.cursor = 0;\n      }\n      if (componentInstance.hooks.effects) {\n        componentInstance.hooks.effects.cursor = 0;\n      }\n      if (componentInstance.hooks.memos) {\n        componentInstance.hooks.memos.cursor = 0;\n      }\n      if (componentInstance.hooks.refs) {\n        componentInstance.hooks.refs.cursor = 0;\n      }\n    }\n\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      const componentName = DEBUG_resolveComponentName(Component);\n      if (!DEBUG_components[componentName]) {\n        DEBUG_components[componentName] = {\n          name: componentName,\n          renders: 0,\n          avgRenderTime: 0,\n        };\n      }\n\n      if (DEBUG_MORE) {\n        if (!DEBUG_SILENT_RENDERS_FOR.has(componentName)) {\n          // eslint-disable-next-line no-console\n          console.log(`[Teact] Render ${componentName}`);\n        }\n      }\n\n      DEBUG_startAt = performance.now();\n    }\n\n    newRenderedValue = Component(props);\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(Component);\n      if (duration > DEBUG_RENDER_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(`[Teact] Slow component render: ${componentName}, ${Math.round(duration)} ms`);\n      }\n\n      const { renders, avgRenderTime } = DEBUG_components[componentName];\n      DEBUG_components[componentName].avgRenderTime = (avgRenderTime * renders + duration) / (renders + 1);\n      DEBUG_components[componentName].renders++;\n      DEBUG_components.TOTAL.renders++;\n\n      if (DEBUG_MORE) {\n        incrementOverlayCounter(`${componentName} renders`);\n        incrementOverlayCounter(`${componentName} duration`, duration);\n      }\n    }\n  }, {\n    rescue: () => {\n      // eslint-disable-next-line no-console\n      console.error(`[Teact] Error while rendering component ${componentInstance.name}`, componentInstance);\n\n      newRenderedValue = componentInstance.renderedValue;\n    },\n  });\n\n  if (componentInstance.mountState === MountState.Mounted && newRenderedValue === componentInstance.renderedValue) {\n    return componentInstance.$element;\n  }\n\n  componentInstance.renderedValue = newRenderedValue;\n  const children = Array.isArray(newRenderedValue) ? newRenderedValue : [newRenderedValue];\n  componentInstance.$element = buildComponentElement(componentInstance, children);\n\n  return componentInstance.$element;\n}\n\nexport function hasElementChanged($old: VirtualElement, $new: VirtualElement) {\n  if (typeof $old !== typeof $new) {\n    return true;\n  } else if ($old.type !== $new.type) {\n    return true;\n  } else if ($old.type === VirtualType.Text && $new.type === VirtualType.Text) {\n    return $old.value !== $new.value;\n  } else if ($old.type === VirtualType.Tag && $new.type === VirtualType.Tag) {\n    return ($old.tag !== $new.tag) || ($old.props.key !== $new.props.key);\n  } else if ($old.type === VirtualType.Component && $new.type === VirtualType.Component) {\n    return (\n      $old.componentInstance.Component !== $new.componentInstance.Component\n    ) || (\n      $old.props.key !== $new.props.key\n    );\n  }\n\n  return false;\n}\n\nexport function mountComponent(componentInstance: ComponentInstance) {\n  componentInstance.id = ++lastComponentId;\n  componentInstance.mountState = MountState.Mounting;\n  renderComponent(componentInstance);\n  componentInstance.mountState = MountState.Mounted;\n  return componentInstance.$element;\n}\n\nexport function unmountComponent(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState === MountState.Unmounted) {\n    return;\n  }\n\n  idsToExcludeFromUpdate.add(componentInstance.id);\n\n  if (componentInstance.hooks?.effects) {\n    for (const effect of componentInstance.hooks.effects.byCursor) {\n      if (effect.cleanup) {\n        safeExec(effect.cleanup);\n      }\n\n      effect.cleanup = undefined;\n      effect.releaseSignals?.();\n    }\n  }\n\n  componentInstance.mountState = MountState.Unmounted;\n\n  helpGc(componentInstance);\n}\n\n// We need to remove all references to DOM objects. We also clean all other references, just in case\nfunction helpGc(componentInstance: ComponentInstance) {\n  const {\n    effects, state, memos, refs,\n  } = componentInstance.hooks || {};\n\n  if (effects) {\n    for (const hook of effects.byCursor) {\n      hook.schedule = undefined;\n      hook.cleanup = undefined;\n      hook.releaseSignals = undefined;\n      hook.dependencies = undefined;\n    }\n  }\n\n  if (state) {\n    for (const hook of state.byCursor) {\n      hook.value = undefined;\n      hook.nextValue = undefined;\n\n      hook.setter = undefined as any;\n    }\n  }\n\n  if (memos) {\n    for (const hook of memos.byCursor) {\n      hook.value = undefined;\n\n      hook.dependencies = undefined as any;\n    }\n  }\n\n  if (refs) {\n    for (const hook of refs.byCursor) {\n      hook.current = undefined;\n      hook.onChange = undefined;\n    }\n  }\n\n  componentInstance.hooks = undefined;\n\n  componentInstance.$element = undefined as any;\n  componentInstance.renderedValue = undefined;\n  componentInstance.onUpdate = undefined;\n}\n\nfunction prepareComponentForFrame(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState === MountState.Unmounted) {\n    return;\n  }\n\n  if (componentInstance.hooks?.state) {\n    for (const hook of componentInstance.hooks.state.byCursor) {\n      hook.value = hook.nextValue;\n    }\n  }\n}\n\nfunction forceUpdateComponent(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState === MountState.Unmounted || !componentInstance.onUpdate) {\n    return;\n  }\n\n  const currentElement = componentInstance.$element;\n\n  renderComponent(componentInstance);\n\n  if (componentInstance.$element !== currentElement) {\n    componentInstance.onUpdate();\n  }\n}\n\nexport function useState<T>(): [T | undefined, StateHookSetter<T | undefined>];\nexport function useState<T>(initial: T, debugKey?: string): [T, StateHookSetter<T>];\nexport function useState<T>(initial?: T, debugKey?: string): [T, StateHookSetter<T>] {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.state) {\n    renderingInstance.hooks.state = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.state;\n  const componentInstance = renderingInstance;\n\n  if (byCursor[cursor] === undefined) {\n    byCursor[cursor] = {\n      value: initial,\n      nextValue: initial,\n      setter: (newValue: ((current: T) => T) | T) => {\n        if (componentInstance.mountState === MountState.Unmounted) {\n          return;\n        }\n\n        if (typeof newValue === 'function') {\n          newValue = (newValue as (current: T) => T)(byCursor[cursor].nextValue);\n        }\n\n        if (byCursor[cursor].nextValue === newValue) {\n          return;\n        }\n\n        byCursor[cursor].nextValue = newValue;\n\n        instancesPendingUpdate.add(componentInstance);\n        runUpdatePassOnRaf();\n\n        if (DEBUG_MORE) {\n          // eslint-disable-next-line no-console\n          console.log(\n            '[Teact.useState]',\n            DEBUG_resolveComponentName(componentInstance.Component),\n            `State update at cursor #${cursor}${debugKey ? ` (${debugKey})` : ''}, next value: `,\n            byCursor[cursor].nextValue,\n          );\n        }\n      },\n    };\n  }\n\n  renderingInstance.hooks.state.cursor++;\n\n  return [\n    byCursor[cursor].value,\n    byCursor[cursor].setter,\n  ];\n}\n\nfunction useEffectBase(\n  isLayout: boolean,\n  effect: Effect,\n  dependencies?: readonly unknown[],\n  debugKey?: string,\n) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n\n  if (!renderingInstance.hooks.effects) {\n    renderingInstance.hooks.effects = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.effects;\n  const effectConfig = byCursor[cursor];\n  const componentInstance = renderingInstance;\n\n  function schedule() {\n    scheduleEffect(componentInstance, cursor, effect, isLayout);\n  }\n\n  if (dependencies && effectConfig?.dependencies) {\n    if (dependencies.some((dependency, i) => dependency !== effectConfig.dependencies![i])) {\n      if (DEBUG && debugKey) {\n        const causedBy = dependencies.reduce<string[]>((res, newValue, i) => {\n          const prevValue = effectConfig.dependencies![i];\n          if (newValue !== prevValue) {\n            res.push(`${i}: ${String(prevValue)} => ${String(newValue)}`);\n          }\n\n          return res;\n        }, []);\n\n        // eslint-disable-next-line no-console\n        console.log(`[Teact] Effect \"${debugKey}\" caused by dependencies.`, causedBy.join(', '));\n      }\n\n      schedule();\n    }\n  } else {\n    if (debugKey) {\n      // eslint-disable-next-line no-console\n      console.log(`[Teact] Effect \"${debugKey}\" caused by missing dependencies.`);\n    }\n\n    schedule();\n  }\n\n  function setupSignals() {\n    const cleanups = dependencies?.filter(isSignal).map((signal, i) => signal.subscribe(() => {\n      if (debugKey) {\n        // eslint-disable-next-line no-console\n        console.log(`[Teact] Effect \"${debugKey}\" caused by signal #${i} new value:`, signal());\n      }\n\n      byCursor[cursor].schedule!();\n    }));\n\n    if (!cleanups?.length) {\n      return undefined;\n    }\n\n    return () => {\n      for (const cleanup of cleanups) {\n        cleanup();\n      }\n    };\n  }\n\n  if (effectConfig) effectConfig.schedule = undefined; // Help GC\n\n  byCursor[cursor] = {\n    ...effectConfig,\n    dependencies,\n    schedule,\n  };\n\n  if (!effectConfig) {\n    byCursor[cursor].releaseSignals = setupSignals();\n  }\n\n  renderingInstance.hooks.effects.cursor++;\n}\n\nfunction scheduleEffect(\n  componentInstance: ComponentInstance,\n  cursor: number,\n  effect: Effect,\n  isLayout: boolean,\n) {\n  const { byCursor } = componentInstance.hooks!.effects!;\n  const cleanup = byCursor[cursor]?.cleanup;\n  const cleanupsContainer = isLayout ? pendingLayoutCleanups : pendingCleanups;\n  const effectsContainer = isLayout ? pendingLayoutEffects : pendingEffects;\n  const effectId = `${componentInstance.id}_${cursor}`;\n\n  if (cleanup) {\n    const runEffectCleanup = () => safeExec(() => {\n      if (componentInstance.mountState === MountState.Unmounted) {\n        return;\n      }\n\n      let DEBUG_startAt: number | undefined;\n      if (DEBUG) {\n        DEBUG_startAt = performance.now();\n      }\n\n      cleanup();\n\n      if (DEBUG) {\n        const duration = performance.now() - DEBUG_startAt!;\n        const componentName = DEBUG_resolveComponentName(componentInstance.Component);\n        if (duration > DEBUG_EFFECT_THRESHOLD) {\n          // eslint-disable-next-line no-console\n          console.warn(\n            `[Teact] Slow cleanup at effect cursor #${cursor}: ${componentName}, ${Math.round(duration)} ms`,\n          );\n        }\n      }\n    }, {\n      rescue: () => {\n        // eslint-disable-next-line no-console\n        console.error(`[Teact] Error in effect cleanup at cursor #${cursor} in ${componentInstance.name}`,\n          componentInstance);\n      },\n      always: () => {\n        byCursor[cursor].cleanup = undefined;\n      },\n    });\n\n    cleanupsContainer.set(effectId, runEffectCleanup);\n  }\n\n  const runEffect = () => safeExec(() => {\n    if (componentInstance.mountState === MountState.Unmounted) {\n      return;\n    }\n\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      DEBUG_startAt = performance.now();\n    }\n\n    const result = effect();\n    if (typeof result === 'function') {\n      byCursor[cursor].cleanup = result;\n    }\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(componentInstance.Component);\n      if (duration > DEBUG_EFFECT_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(`[Teact] Slow effect at cursor #${cursor}: ${componentName}, ${Math.round(duration)} ms`);\n      }\n    }\n  }, {\n    rescue: () => {\n      // eslint-disable-next-line no-console\n      console.error(`[Teact] Error in effect at cursor #${cursor} in ${componentInstance.name}`, componentInstance);\n    },\n  });\n\n  effectsContainer.set(effectId, runEffect);\n\n  runUpdatePassOnRaf();\n}\n\nexport function useEffect(effect: Effect, dependencies?: readonly unknown[], debugKey?: string) {\n  return useEffectBase(false, effect, dependencies, debugKey);\n}\n\nexport function useLayoutEffect(effect: Effect, dependencies?: readonly unknown[], debugKey?: string) {\n  return useEffectBase(true, effect, dependencies, debugKey);\n}\n\nexport function useUnmountCleanup(cleanup: NoneToVoidFunction) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n\n  if (!renderingInstance.hooks.effects) {\n    renderingInstance.hooks.effects = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.effects;\n\n  if (!byCursor[cursor]) {\n    byCursor[cursor] = {\n      cleanup,\n    };\n  }\n\n  renderingInstance.hooks.effects.cursor++;\n}\n\nexport function useMemo<T>(\n  resolver: () => T,\n  dependencies: readonly unknown[],\n  debugKey?: string,\n  debugHitRateKey?: string,\n): T {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.memos) {\n    renderingInstance.hooks.memos = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.memos;\n  let { value } = byCursor[cursor] || {};\n\n  let DEBUG_state: typeof DEBUG_memos[string] | undefined;\n  if (DEBUG && debugHitRateKey) {\n    const instanceKey = `${debugHitRateKey}#${renderingInstance.id}`;\n\n    DEBUG_state = DEBUG_memos[instanceKey];\n    if (!DEBUG_state) {\n      DEBUG_state = {\n        key: instanceKey, calls: 0, misses: 0, hitRate: 0,\n      };\n      DEBUG_memos[instanceKey] = DEBUG_state;\n    }\n\n    DEBUG_state.calls++;\n    DEBUG_state.hitRate = (DEBUG_state.calls - DEBUG_state.misses) / DEBUG_state.calls;\n  }\n\n  if (\n    byCursor[cursor] === undefined\n    || dependencies.length !== byCursor[cursor].dependencies.length\n    || dependencies.some((dependency, i) => dependency !== byCursor[cursor].dependencies[i])\n  ) {\n    if (DEBUG) {\n      if (debugKey) {\n        const msg = `[Teact.useMemo] ${renderingInstance.name} (${debugKey}): Update is caused by:`;\n        if (!byCursor[cursor]) {\n          // eslint-disable-next-line no-console\n          console.log(`${msg} [first render]`);\n        } else {\n          logUnequalProps(byCursor[cursor].dependencies, dependencies, msg, debugKey);\n        }\n      }\n\n      if (DEBUG_state) {\n        DEBUG_state.misses++;\n        DEBUG_state.hitRate = (DEBUG_state.calls - DEBUG_state.misses) / DEBUG_state.calls;\n\n        if (\n          DEBUG_state.calls % 10 === 0\n          && DEBUG_state.calls >= DEBUG_MEMOS_CALLS_THRESHOLD\n          && DEBUG_state.hitRate < 0.25\n        ) {\n          // eslint-disable-next-line no-console\n          console.warn(\n\n            `[Teact] ${DEBUG_state.key}: Hit rate is ${DEBUG_state.hitRate.toFixed(2)} for ${DEBUG_state.calls} calls`,\n          );\n        }\n      }\n    }\n\n    value = resolver();\n  }\n\n  byCursor[cursor] = {\n    value,\n    dependencies,\n  };\n\n  renderingInstance.hooks.memos.cursor++;\n\n  return value;\n}\n\nexport function useCallback<F extends AnyFunction>(newCallback: F, dependencies: unknown[], debugKey?: string): F {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  return useMemo(() => newCallback, dependencies, debugKey);\n}\n\nexport function useRef<T>(initial: T): RefObject<T>;\nexport function useRef<T>(): RefObject<T | undefined>; // TT way (empty is `undefined`)\nexport function useRef<T>(initial: null): RefObject<T | null>; // React way (empty is `null`)\n\nexport function useRef<T>(initial?: T | null) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.refs) {\n    renderingInstance.hooks.refs = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.refs;\n  if (!byCursor[cursor]) {\n    byCursor[cursor] = {\n      current: initial,\n    };\n  }\n\n  renderingInstance.hooks.refs.cursor++;\n\n  return byCursor[cursor];\n}\n\nexport function createContext<T>(defaultValue?: T): Context<T> {\n  const contextId = String(contextCounter++);\n\n  function TeactContextProvider(props: { value: T; children: TeactNode }) {\n    const [getValue, setValue] = useSignal(props.value ?? defaultValue);\n    // Create a new object to avoid mutations in the parent context\n    renderingInstance.context = { ...renderingInstance.context };\n\n    renderingInstance.context[contextId] = getValue;\n    setValue(props.value);\n    return props.children;\n  }\n\n  TeactContextProvider.DEBUG_contentComponentName = contextId;\n\n  const context = {\n    defaultValue,\n    contextId,\n    Provider: TeactContextProvider,\n  };\n\n  return context;\n}\n\nexport function useContextSignal<T>(context: Context<T>) {\n  const [getDefaultValue] = useSignal(context.defaultValue);\n\n  return renderingInstance.context?.[context.contextId] as Signal<T> || getDefaultValue;\n}\n\nexport function useSignal<T>(initial?: T) {\n  const signalRef = useRef<ReturnType<typeof createSignal<T>>>();\n  signalRef.current ??= createSignal<T>(initial);\n  return signalRef.current;\n}\n\nexport function memo<T extends FC_withDebug>(Component: T, debugKey?: string) {\n  function TeactMemoWrapper(props: Props) {\n    return useMemo(\n      () => createElement(Component, props),\n      // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n      Object.values(props),\n      debugKey,\n      DEBUG_MORE ? DEBUG_resolveComponentName(renderingInstance.Component) : undefined,\n    );\n  }\n\n  TeactMemoWrapper.DEBUG_contentComponentName = DEBUG_resolveComponentName(Component);\n\n  return TeactMemoWrapper as T;\n}\n\nexport function DEBUG_resolveComponentName(Component: FC_withDebug) {\n  const { name, DEBUG_contentComponentName } = Component;\n\n  if (name === 'TeactNContainer') {\n    return `container>${DEBUG_contentComponentName}`;\n  }\n\n  if (name === 'TeactMemoWrapper') {\n    return `memo>${DEBUG_contentComponentName}`;\n  }\n\n  if (name === 'TeactContextProvider') {\n    return `context>id${DEBUG_contentComponentName}`;\n  }\n\n  return name + (DEBUG_contentComponentName ? `>${DEBUG_contentComponentName}` : '');\n}\n\nexport default {\n  createElement,\n  Fragment,\n};\n","import { useCallback, useState } from '../lib/teact/teact';\n\nconst useForceUpdate = () => {\n  const [, setTrigger] = useState<boolean>(false);\n\n  return useCallback(() => {\n    setTrigger((trigger) => !trigger);\n  }, []);\n};\n\nexport default useForceUpdate;\n","import { useEffect } from '../lib/teact/teact';\n\nfunction useEffectOnce(effect: React.EffectCallback) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useEffect(effect, []);\n}\n\nexport default useEffectOnce;\n","import { useRef } from '../lib/teact/teact';\n\n// Deprecated. Use `usePrevious2` instead\nfunction usePrevious<T>(next: T): T | undefined;\nfunction usePrevious<T>(next: T, shouldSkipUndefined: true): Exclude<T, undefined> | undefined;\nfunction usePrevious<T>(next: T, shouldSkipUndefined?: boolean): Exclude<T, undefined> | undefined;\nfunction usePrevious<T>(next: T, shouldSkipUndefined?: boolean) {\n  const ref = useRef<T>();\n  const { current } = ref;\n  if (!shouldSkipUndefined || next !== undefined) {\n    ref.current = next;\n  }\n\n  return current;\n}\n\nexport default usePrevious;\n","import { useRef } from '../lib/teact/teact';\n\nimport useEffectOnce from './useEffectOnce';\nimport usePrevious from './usePrevious';\n\nexport default function useSyncEffect<const T extends readonly any[]>(\n  effect: (args: T | readonly []) => NoneToVoidFunction | void,\n  dependencies: T,\n) {\n  const prevDeps = usePrevious<T>(dependencies);\n  const cleanupRef = useRef<NoneToVoidFunction>();\n\n  if (!prevDeps || dependencies.some((d, i) => d !== prevDeps[i])) {\n    cleanupRef.current?.();\n    cleanupRef.current = effect(prevDeps || []) ?? undefined;\n  }\n\n  useEffectOnce(() => {\n    return () => {\n      cleanupRef.current?.();\n    };\n  });\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport generateUniqueId from '../util/generateUniqueId';\nimport useSyncEffect from './useSyncEffect';\n\nexport default function useUniqueId(prefix = '') {\n  const idRef = useRef<string>();\n\n  useSyncEffect(() => {\n    idRef.current = prefix + generateUniqueId();\n  }, [prefix]);\n\n  return idRef.current!;\n}\n","import type { FC, FC_withDebug, Props } from './teact';\n\nimport { DEBUG, DEBUG_MORE } from '../../config';\nimport arePropsShallowEqual, { logUnequalProps } from '../../util/arePropsShallowEqual';\nimport { handleError } from '../../util/handleError';\nimport { orderBy } from '../../util/iteratees';\nimport { throttleWithTickEnd } from '../../util/schedulers';\nimport React, { DEBUG_resolveComponentName, getIsHeavyAnimating, useUnmountCleanup } from './teact';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nexport default React;\n\ninterface Container {\n  mapStateToProps: MapStateToProps<any>;\n  activationFn?: ActivationFn<any>;\n  stuckTo?: any;\n  ownProps: Props;\n  mappedProps?: Props;\n  forceUpdate: VoidFunction;\n  DEBUG_updates: number;\n  DEBUG_componentName: string;\n}\n\ntype GlobalState =\n  AnyLiteral\n  & { DEBUG_randomId?: number };\ntype ActionNames = string;\ntype ActionPayload = any;\n\nexport interface ActionOptions {\n  forceOnHeavyAnimation?: boolean;\n  // Workaround for iOS gesture history navigation\n  forceSyncOnIOs?: boolean;\n  forceOutdated?: boolean;\n}\n\ntype Actions = Record<ActionNames, (payload?: ActionPayload, options?: ActionOptions) => void>;\n\ntype ActionHandler = (\n  global: GlobalState,\n  actions: Actions,\n  payload: any,\n) => GlobalState | void | Promise<void>;\n\ntype MapStateToProps<OwnProps = undefined> = (global: GlobalState, ownProps: OwnProps) => AnyLiteral;\ntype StickToFirstFn = (value: any) => boolean;\ntype ActivationFn<OwnProps = undefined> = (\n  global: GlobalState, ownProps: OwnProps, stickToFirst: StickToFirstFn,\n) => boolean;\n// TODO: Add callback to typify\ntype GlobalCallback = (global: any) => void;\n\nlet currentGlobal = {\n  isInited: false,\n} as GlobalState;\n\nlet DEBUG_currentRandomId: number | undefined;\n\nconst DEBUG_invalidateGlobalOnTickEnd = throttleWithTickEnd(() => {\n  DEBUG_currentRandomId = Math.random();\n});\n\nconst actionHandlers: Record<string, ActionHandler[]> = {};\nconst callbacks: GlobalCallback[] = [updateContainers];\nconst actions = {} as Actions;\nconst containers = new Map<string, Container>();\n\nconst runCallbacksThrottled = throttleWithTickEnd(runCallbacks);\n\nlet forceOnHeavyAnimation = true;\n\nfunction runCallbacks() {\n  if (forceOnHeavyAnimation) {\n    forceOnHeavyAnimation = false;\n  } else if (getIsHeavyAnimating()) {\n    getIsHeavyAnimating.once(runCallbacksThrottled);\n    return;\n  }\n\n  callbacks.forEach((cb) => cb(currentGlobal));\n}\n\nexport function setUntypedGlobal(newGlobal?: GlobalState, options?: ActionOptions) {\n  if (typeof newGlobal === 'object' && newGlobal !== currentGlobal) {\n    if (DEBUG) {\n      if (\n        !options?.forceOutdated\n        && newGlobal.DEBUG_randomId && newGlobal.DEBUG_randomId !== DEBUG_currentRandomId\n      ) {\n        throw new Error('[TeactN.setGlobal] Attempt to set an outdated global');\n      }\n\n      DEBUG_currentRandomId = Math.random();\n    }\n\n    currentGlobal = newGlobal;\n\n    if (options?.forceSyncOnIOs) {\n      forceOnHeavyAnimation = true;\n      runCallbacks();\n    } else {\n      if (options?.forceOnHeavyAnimation) {\n        forceOnHeavyAnimation = true;\n      }\n\n      runCallbacksThrottled();\n    }\n  }\n}\n\nexport function getUntypedGlobal() {\n  if (DEBUG) {\n    currentGlobal = {\n      ...currentGlobal,\n      DEBUG_randomId: DEBUG_currentRandomId,\n    };\n    DEBUG_invalidateGlobalOnTickEnd();\n  }\n\n  return currentGlobal;\n}\n\nexport function getUntypedActions() {\n  return actions;\n}\n\nexport function forceOnHeavyAnimationOnce() {\n  forceOnHeavyAnimation = true;\n}\n\nlet actionQueue: NoneToVoidFunction[] = [];\n\nfunction handleAction(name: string, payload?: ActionPayload, options?: ActionOptions) {\n  actionQueue.push(() => {\n    actionHandlers[name]?.forEach((handler) => {\n      const response = handler(DEBUG ? getUntypedGlobal() : currentGlobal, actions, payload);\n      if (!response || typeof response.then === 'function') {\n        return;\n      }\n\n      setUntypedGlobal(response as GlobalState, options);\n    });\n  });\n\n  if (actionQueue.length === 1) {\n    try {\n      while (actionQueue.length) {\n        actionQueue[0]();\n        actionQueue.shift();\n      }\n    } finally {\n      actionQueue = [];\n    }\n  }\n}\n\nfunction updateContainers() {\n  let DEBUG_startAt: number | undefined;\n  if (DEBUG) {\n    DEBUG_startAt = performance.now();\n  }\n\n  for (const container of containers.values()) {\n    const {\n      mapStateToProps, ownProps, mappedProps, forceUpdate,\n    } = container;\n\n    if (!activateContainer(container, currentGlobal, ownProps)) {\n      continue;\n    }\n\n    let newMappedProps;\n\n    try {\n      newMappedProps = mapStateToProps(currentGlobal, ownProps);\n    } catch (err: any) {\n      handleError(err);\n\n      return;\n    }\n\n    if (DEBUG) {\n      if (Object.values(newMappedProps).some(Number.isNaN)) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          // eslint-disable-next-line @stylistic/max-len\n          `[TeactN] Some of \\`${container.DEBUG_componentName}\\` mappers contain NaN values. This may cause redundant updates because of incorrect equality check.`,\n        );\n      }\n    }\n\n    if (Object.keys(newMappedProps).length && !arePropsShallowEqual(mappedProps!, newMappedProps)) {\n      if (DEBUG_MORE) {\n        logUnequalProps(\n          mappedProps!,\n          newMappedProps,\n          `[TeactN] Will update ${container.DEBUG_componentName} caused by:`,\n        );\n      }\n\n      container.mappedProps = newMappedProps;\n      container.DEBUG_updates++;\n\n      forceUpdate();\n    }\n  }\n\n  if (DEBUG) {\n    const updateTime = performance.now() - DEBUG_startAt!;\n    if (updateTime > 7) {\n      // eslint-disable-next-line no-console\n      console.warn(`[TeactN] Slow containers update: ${Math.round(updateTime)} ms`);\n    }\n  }\n}\n\nexport function addUntypedActionHandler(name: ActionNames, handler: ActionHandler) {\n  if (!actionHandlers[name]) {\n    actionHandlers[name] = [];\n\n    actions[name] = (payload?: ActionPayload, options?: ActionOptions) => {\n      handleAction(name, payload, options);\n    };\n  }\n\n  actionHandlers[name].push(handler);\n}\n\nexport function addCallback(cb: GlobalCallback) {\n  callbacks.push(cb);\n}\n\nexport function removeCallback(cb: GlobalCallback) {\n  const index = callbacks.indexOf(cb);\n  if (index !== -1) {\n    callbacks.splice(index, 1);\n  }\n}\n\nexport function withUntypedGlobal<OwnProps extends AnyLiteral>(\n  mapStateToProps: MapStateToProps<OwnProps> = () => ({}),\n  activationFn?: ActivationFn<OwnProps>,\n) {\n  return (Component: FC) => {\n    function TeactNContainer(props: OwnProps) {\n      const id = useUniqueId();\n      const forceUpdate = useForceUpdate();\n\n      useUnmountCleanup(() => {\n        containers.delete(id);\n      });\n\n      let container = containers.get(id)!;\n      if (!container) {\n        container = {\n          mapStateToProps,\n          activationFn,\n          ownProps: props,\n          forceUpdate,\n          DEBUG_updates: 0,\n          DEBUG_componentName: Component.name,\n        };\n\n        containers.set(id, container);\n      }\n\n      if (\n        (!container.mappedProps || !arePropsShallowEqual(container.ownProps, props))\n        && activateContainer(container, currentGlobal, props)\n      ) {\n        try {\n          container.mappedProps = mapStateToProps(currentGlobal, props);\n        } catch (err: any) {\n          handleError(err);\n        }\n      }\n\n      container.ownProps = props;\n\n      return <Component {...container.mappedProps} {...props} />;\n    }\n\n    (TeactNContainer as FC_withDebug).DEBUG_contentComponentName = DEBUG_resolveComponentName(Component);\n\n    return TeactNContainer;\n  };\n}\n\nfunction activateContainer(container: Container, global: GlobalState, props: Props) {\n  const { activationFn, stuckTo } = container;\n  if (!activationFn) {\n    return true;\n  }\n\n  return activationFn(global, props, (stickTo: any) => {\n    if (stuckTo) {\n      return stuckTo === stickTo;\n    } else if (stickTo !== undefined) {\n      container.stuckTo = stickTo;\n    }\n\n    return true;\n  });\n}\n\nexport function typify<\n  ProjectGlobalState,\n  ActionPayloads,\n>() {\n  type ProjectActionNames = keyof ActionPayloads;\n\n  // When payload is allowed to be `undefined` we consider it optional\n  type ProjectActions = {\n    [ActionName in ProjectActionNames]:\n    (undefined extends ActionPayloads[ActionName] ? (\n      (payload?: ActionPayloads[ActionName], options?: ActionOptions) => void\n    ) : (\n      (payload: ActionPayloads[ActionName], options?: ActionOptions) => void\n    ))\n  };\n\n  type ActionHandlers = {\n    [ActionName in keyof ActionPayloads]: (\n      global: ProjectGlobalState,\n      actions: ProjectActions,\n      payload: ActionPayloads[ActionName],\n    ) => ProjectGlobalState | void | Promise<void>;\n  };\n\n  return {\n    getGlobal: getUntypedGlobal as <T extends ProjectGlobalState>() => T,\n    setGlobal: setUntypedGlobal as (state: ProjectGlobalState, options?: ActionOptions) => void,\n    getActions: getUntypedActions as () => ProjectActions,\n    addActionHandler: addUntypedActionHandler as <ActionName extends ProjectActionNames>(\n      name: ActionName,\n      handler: ActionHandlers[ActionName],\n    ) => void,\n    withGlobal: withUntypedGlobal as <OwnProps extends AnyLiteral>(\n      mapStateToProps: (global: ProjectGlobalState, ownProps: OwnProps) => AnyLiteral,\n      activationFn?: (global: ProjectGlobalState, ownProps: OwnProps, stickToFirst: StickToFirstFn) => boolean,\n    ) => (Component: FC) => FC<OwnProps>,\n  };\n}\n\nif (DEBUG) {\n  (window as any).getGlobal = getUntypedGlobal;\n  (window as any).setGlobal = setUntypedGlobal;\n  (window as any).getActions = getUntypedActions;\n\n  document.addEventListener('dblclick', () => {\n    // eslint-disable-next-line no-console\n    console.warn(\n      'GLOBAL CONTAINERS',\n      orderBy(\n        Array.from(containers.values())\n          .map(({ DEBUG_componentName, DEBUG_updates }) => ({ DEBUG_componentName, DEBUG_updates })),\n        'DEBUG_updates',\n        'desc',\n      ),\n    );\n  });\n}\n","import { typify } from '../lib/teact/teactn';\n\nimport type { ActionPayloads, GlobalState } from './types';\n\nconst typed = typify<GlobalState, ActionPayloads>();\n\nexport const getGlobal = typed.getGlobal;\nexport const setGlobal = typed.setGlobal;\nexport const getActions = typed.getActions;\nexport const addActionHandler = typed.addActionHandler;\nexport const withGlobal = typed.withGlobal;\n","export default function isEmptyObject(obj: object) {\n  return !isKeyCountGreater(obj, 0);\n}\n\nexport function isKeyCountGreater(obj: object, countToOutnumber: number) {\n  if (countToOutnumber < 0) return true;\n  let keyCount = 0;\n\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      keyCount++;\n      if (keyCount > countToOutnumber) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n","import type { AccountType } from '../global/types';\n\nimport { DEBUG_VIEW_ACCOUNTS } from '../config';\n\nexport default function isViewAccount(accountType?: AccountType) {\n  return !DEBUG_VIEW_ACCOUNTS && accountType === 'view';\n}\n","import { areSortedArraysEqual } from './iteratees';\n\nconst cache = new WeakMap<AnyFunction, {\n  lastArgs: any[];\n  lastResult: any;\n  lastTime: number;\n  isDisabledUntil?: number;\n}>();\n\nexport default function memoize<F extends AnyFunction>(fn: F, ttlSeconds?: number) {\n  const wrapper = (...args: Parameters<F>): ReturnType<F> => {\n    const cached = cache.get(fn);\n    const now = Date.now();\n\n    if (cached) {\n      const isCacheDisabled = cached.isDisabledUntil && cached.isDisabledUntil > now;\n      const isStale = ttlSeconds && cached.lastTime + (ttlSeconds * 1000) < now;\n\n      if (!isCacheDisabled && !isStale && areSortedArraysEqual(cached.lastArgs, args)) {\n        return cached.lastResult;\n      }\n    }\n\n    const result = fn(...args);\n    cache.set(fn, {\n      ...cached,\n      lastArgs: args,\n      lastResult: result,\n      lastTime: now,\n    });\n    return result;\n  };\n\n  wrapper.disableCache = (seconds: number) => {\n    const cached = cache.get(fn);\n    if (cached) {\n      cached.isDisabledUntil = Date.now() + (seconds * 1000);\n    }\n  };\n\n  return wrapper;\n}\n","import type { ApiChain, ApiNetwork } from '../../api/types';\nimport type {\n  Account, AccountSettings, AccountState, GlobalState, UserToken,\n} from '../types';\n\nimport { parseAccountId } from '../../util/account';\nimport { isKeyCountGreater } from '../../util/isEmptyObject';\nimport isViewAccount from '../../util/isViewAccount';\nimport memoize from '../../util/memoize';\nimport withCache from '../../util/withCache';\n\nexport function selectAccounts(global: GlobalState) {\n  return global.accounts?.byId;\n}\n\nexport const selectNetworkAccountsMemoized = memoize((network: ApiNetwork, accountsById?: Record<string, Account>) => {\n  if (!accountsById) {\n    return undefined;\n  }\n\n  return Object.fromEntries(\n    Object.entries(accountsById).filter(([accountId]) => parseAccountId(accountId).network === network),\n  );\n});\n\nexport function selectNetworkAccounts(global: GlobalState) {\n  return selectNetworkAccountsMemoized(selectCurrentNetwork(global), global.accounts?.byId);\n}\n\nexport function selectCurrentNetwork(global: GlobalState) {\n  return global.settings.isTestnet ? 'testnet' : 'mainnet';\n}\n\nexport function selectCurrentAccount(global: GlobalState) {\n  return selectAccount(global, global.currentAccountId!);\n}\n\nexport function selectAccount(global: GlobalState, accountId: string) {\n  return selectAccounts(global)?.[accountId];\n}\n\nexport function selectAccountOrAuthAccount(global: GlobalState, accountId: string) {\n  const account = selectAccount(global, accountId);\n  if (account) {\n    return account;\n  }\n\n  for (const account of [global.auth.firstNetworkAccount, global.auth.secondNetworkAccount]) {\n    if (account?.accountId === accountId) {\n      return account;\n    }\n  }\n\n  return undefined;\n}\n\nexport function selectCurrentAccountState(global: GlobalState) {\n  return selectAccountState(global, global.currentAccountId!);\n}\n\nexport function selectAccountState(global: GlobalState, accountId: string): AccountState | undefined {\n  return global.byAccountId[accountId];\n}\n\nexport function selectAccountSettings(global: GlobalState, accountId: string): AccountSettings | undefined {\n  return global.settings.byAccountId[accountId];\n}\n\nexport function selectCurrentAccountSettings(global: GlobalState) {\n  return selectAccountSettings(global, global.currentAccountId!);\n}\n\nfunction isHardwareAccount(account: Account) {\n  return account.type === 'hardware';\n}\n\nexport function selectIsHardwareAccount(global: GlobalState) {\n  const account = selectCurrentAccount(global);\n  return Boolean(account) && isHardwareAccount(account);\n}\n\nexport function selectAllHardwareAccounts(global: GlobalState, network: ApiNetwork) {\n  const accounts = selectAccounts(global);\n\n  return Object.entries(accounts ?? {}).reduce<Account[]>((accounts, [accountId, account]) => {\n    if (isHardwareAccount(account) && parseAccountId(accountId).network === network) {\n      accounts.push(account);\n    }\n    return accounts;\n  }, []);\n}\n\nexport function selectIsOneAccount(global: GlobalState) {\n  return Object.keys(selectAccounts(global) || {}).length === 1;\n}\n\nexport const selectEnabledTokensCountMemoizedFor = withCache((accountId: string) => memoize((tokens?: UserToken[]) => {\n  return (tokens ?? []).filter(({ isDisabled }) => !isDisabled).length;\n}));\n\nexport function selectLedgerAccountIndexToImport(global: GlobalState, network: ApiNetwork) {\n  const hardwareAccounts = selectAllHardwareAccounts(global, network);\n  const hardwareAccountIndexes = hardwareAccounts?.map((account) => account.ledger!.index)\n    .sort((a, b) => a - b);\n\n  if (hardwareAccountIndexes.length === 0 || hardwareAccountIndexes[0] !== 0) {\n    return -1;\n  }\n\n  if (hardwareAccountIndexes.length === 1) {\n    return 0;\n  }\n\n  for (let i = 1; i < hardwareAccountIndexes.length; i++) {\n    if (hardwareAccountIndexes[i] - hardwareAccountIndexes[i - 1] !== 1) {\n      return i - 1;\n    }\n  }\n\n  return hardwareAccountIndexes.length - 1;\n}\n\nfunction isMnemonicAccount(account: Account) {\n  return account.type === 'mnemonic';\n}\n\nexport function selectIsMnemonicAccount(global: GlobalState) {\n  const account = selectCurrentAccount(global);\n  return Boolean(account) && isMnemonicAccount(account);\n}\n\nconst selectIsPasswordPresentMemoized = memoize((accounts: Record<string, Account> | undefined) => {\n  return Object.values(accounts ?? {}).some(isMnemonicAccount);\n});\n\nexport function selectIsPasswordPresent(global: GlobalState) {\n  return selectIsPasswordPresentMemoized(selectAccounts(global));\n}\n\nexport function selectAccountIdByAddress(\n  global: GlobalState,\n  chain: ApiChain,\n  address: string,\n): string | undefined {\n  const accounts = selectAccounts(global);\n\n  if (!accounts) return undefined;\n\n  const requiredAccount = Object.entries(accounts)\n    .find(([accountId, account]) => (account.addressByChain[chain] === address ? accountId : undefined));\n\n  return requiredAccount?.[0];\n}\n\n// Slow, not to be used in `withGlobal`\nexport function selectVestingPartsReadyToUnfreeze(global: GlobalState, accountId: string) {\n  const vesting = selectAccountState(global, accountId)?.vesting?.info || [];\n\n  return vesting.reduce((acc, currentVesting) => {\n    currentVesting.parts.forEach((part) => {\n      if (part.status === 'ready') {\n        acc.push({\n          id: currentVesting.id,\n          partId: part.id,\n        });\n      }\n    });\n\n    return acc;\n  }, [] as { id: number; partId: number }[]);\n}\n\nexport function selectCurrentAccountNftByAddress(global: GlobalState, nftAddress: string) {\n  return selectAccountNftByAddress(global, global.currentAccountId!, nftAddress);\n}\n\nexport function selectAccountNftByAddress(global: GlobalState, accountId: string, nftAddress: string) {\n  return selectAccountState(global, accountId)?.nfts?.byAddress?.[nftAddress];\n}\n\nexport function selectIsMultichainAccount(global: GlobalState, accountId: string) {\n  const addressByChain = selectAccount(global, accountId)?.addressByChain;\n  return Boolean(addressByChain) && isKeyCountGreater(addressByChain, 1);\n}\n\nexport function selectHasSession(global: GlobalState) {\n  return Boolean(global.currentAccountId);\n}\n\nexport function selectIsBiometricAuthEnabled(global: GlobalState) {\n  const { authConfig } = global.settings;\n\n  return !!authConfig && authConfig.kind !== 'password';\n}\n\nexport function selectIsNativeBiometricAuthEnabled(global: GlobalState) {\n  const { authConfig } = global.settings;\n\n  return !!authConfig && authConfig.kind === 'native-biometrics';\n}\n\nexport function selectIsAllowSuspiciousActions(global: GlobalState, accountId: string) {\n  const accountSettings = selectAccountSettings(global, accountId);\n\n  return accountSettings?.isAllowSuspiciousActions ?? false;\n}\n\nexport function selectIsCurrentAccountViewMode(global: GlobalState) {\n  const { type } = selectCurrentAccount(global) || {};\n\n  return isViewAccount(type);\n}\n\nexport function selectDoesAccountSupportNft(global: GlobalState) {\n  const account = selectCurrentAccount(global);\n  return Boolean(account?.addressByChain.ton);\n}\n","import type {\n  ApiAccountWithTon,\n  ApiNftTransferPayload,\n  ApiParsedPayload,\n  ApiTokensTransferNonStandardPayload,\n  ApiTokensTransferPayload,\n} from '../../api/types';\n\nimport { DEFAULT_MAX_MESSAGES, LEDGER_MAX_MESSAGES, W5_MAX_MESSAGES } from '../../api/chains/ton/constants';\n\nexport function isNftTransferPayload(payload: ApiParsedPayload | undefined): payload is ApiNftTransferPayload {\n  return payload?.type === 'nft:transfer';\n}\n\nexport function isTokenTransferPayload(\n  payload: ApiParsedPayload | undefined,\n): payload is ApiTokensTransferPayload | ApiTokensTransferNonStandardPayload {\n  return payload?.type === 'tokens:transfer' || payload?.type === 'tokens:transfer-non-standard';\n}\n\n/** How many messages can be sent in a single transaction */\nexport function getMaxMessagesInTransaction(account: ApiAccountWithTon) {\n  const { type, ton: { version } } = account;\n\n  if (type === 'ledger') {\n    return LEDGER_MAX_MESSAGES;\n  } else if (version === 'W5') {\n    return W5_MAX_MESSAGES;\n  } else {\n    return DEFAULT_MAX_MESSAGES;\n  }\n}\n","import type { ApiDappTransfer, ApiTokenWithPrice } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { STON_PTON_SLUG, TONCOIN, UNKNOWN_TOKEN } from '../../config';\nimport memoize from '../../util/memoize';\nimport { isNftTransferPayload, isTokenTransferPayload } from '../../util/ton/transfer';\nimport { selectCurrentAccountState } from './accounts';\n\nconst selectCurrentDappTransferTotalsMemoized = memoize((\n  transactions: ApiDappTransfer[] | undefined,\n) => {\n  const amountsBySlug: Record<string, bigint> = {};\n  const addSlugAmount = (tokenSlug: string, amount: bigint) => {\n    amountsBySlug[tokenSlug] = (amountsBySlug[tokenSlug] ?? 0n) + amount;\n  };\n\n  let isScam = false;\n  let isDangerous = false;\n  let nftCount = 0;\n\n  for (const transaction of transactions ?? []) {\n    if (transaction.isScam) isScam = true;\n    if (transaction.isDangerous) isDangerous = true;\n\n    addSlugAmount(TONCOIN.slug, transaction.amount + transaction.networkFee);\n\n    if (isTokenTransferPayload(transaction.payload)) {\n      addSlugAmount(transaction.payload.slug, transaction.payload.amount);\n    } else if (isNftTransferPayload(transaction.payload)) {\n      nftCount++;\n    }\n  }\n\n  return {\n    amountsBySlug,\n    isScam,\n    isDangerous,\n    nftCount,\n  };\n});\n\nconst selectDappTransferInsufficientTokensMemoized = memoize((\n  amountsBySlug: Record<string, bigint>,\n  balances: Record<string, bigint> | undefined,\n  tokensBySlug: Record<string, ApiTokenWithPrice> | undefined,\n): string | undefined => {\n  if (!balances || !tokensBySlug) {\n    return undefined;\n  }\n\n  const insufficientTokens: string[] = [];\n\n  for (const [slug, requiredAmount] of Object.entries(amountsBySlug)) {\n    const token = tokensBySlug[slug] ?? UNKNOWN_TOKEN;\n\n    const balanceSlug = slug === STON_PTON_SLUG ? TONCOIN.slug : slug;\n    const availableBalance = balances[balanceSlug] ?? 0n;\n\n    if (availableBalance < requiredAmount) {\n      const symbol = slug === STON_PTON_SLUG ? TONCOIN.symbol : token.symbol;\n      insufficientTokens.push(symbol);\n    }\n  }\n\n  return insufficientTokens.length > 0 ? insufficientTokens.join(', ') : undefined;\n});\n\nexport function selectCurrentDappTransferTotals(global: GlobalState) {\n  const { transactions } = global.currentDappTransfer;\n  return selectCurrentDappTransferTotalsMemoized(transactions);\n}\n\nexport function selectDappTransferInsufficientTokens(global: GlobalState): string | undefined {\n  const accountState = selectCurrentAccountState(global);\n  const balances = accountState?.balances?.bySlug;\n  const tokensBySlug = global.tokenInfo.bySlug;\n  const { amountsBySlug } = selectCurrentDappTransferTotals(global);\n\n  return selectDappTransferInsufficientTokensMemoized(amountsBySlug, balances, tokensBySlug);\n}\n","import type { RoundingMode } from '../lib/big.js';\n\nimport { Big } from '../lib/big.js';\n\nexport function round(value: number | string, precision = 0, roundingMode: RoundingMode = Big.roundHalfUp) {\n  const bn = new Big(value);\n\n  return bn.round(precision, roundingMode).toNumber();\n}\n\nexport function floor(value: number | string, precision = 0) {\n  return round(value, precision, Big.roundDown);\n}\n\nexport function ceil(value: number | string, precision = 0) {\n  return round(value, precision, Big.roundUp);\n}\n","import type { ApiBalanceBySlug, ApiChain } from '../../api/types';\nimport type { AccountSettings, GlobalState, UserToken } from '../types';\n\nimport {\n  DEFAULT_ENABLED_TOKEN_COUNT,\n  DEFAULT_ENABLED_TOKEN_SLUGS,\n  MYCOIN,\n  MYCOIN_TESTNET,\n  PRICELESS_TOKEN_HASHES,\n  PRIORITY_TOKEN_SLUGS,\n  TINY_TRANSFER_MAX_COST,\n  TONCOIN,\n} from '../../config';\nimport { toBig } from '../../util/decimals';\nimport memoize from '../../util/memoize';\nimport { round } from '../../util/round';\nimport withCache from '../../util/withCache';\nimport { selectAccountSettings, selectAccountState, selectCurrentAccountState } from './accounts';\n\nfunction getIsNewAccount(balancesBySlug: ApiBalanceBySlug, tokenInfo: GlobalState['tokenInfo']) {\n  return Object.keys(balancesBySlug).length === DEFAULT_ENABLED_TOKEN_COUNT && (\n    Object.entries(balancesBySlug).every(([slug, balance]) => {\n      const { decimals, priceUsd } = tokenInfo.bySlug[slug];\n\n      const balanceBig = toBig(balance, decimals);\n      const hasCost = balanceBig.mul(priceUsd ?? 0).lt(TINY_TRANSFER_MAX_COST);\n\n      return hasCost;\n    })\n  );\n}\n\nexport const selectAccountTokensMemoizedFor = withCache((accountId: string) => memoize((\n  balancesBySlug: ApiBalanceBySlug,\n  tokenInfo: GlobalState['tokenInfo'],\n  accountSettings: AccountSettings = {},\n  isSortByValueEnabled: boolean = false,\n  areTokensWithNoCostHidden: boolean = false,\n) => {\n  const isNewAccount = getIsNewAccount(balancesBySlug, tokenInfo);\n\n  return Object\n    .entries(balancesBySlug)\n    .filter(([slug]) => (slug in tokenInfo.bySlug && !accountSettings.deletedSlugs?.includes(slug)))\n    .map(([slug, balance]) => {\n      const {\n        symbol, name, image, decimals, cmcSlug, color, chain, tokenAddress, codeHash,\n        type, price = 0, percentChange24h = 0, priceUsd,\n      } = tokenInfo.bySlug[slug];\n\n      const balanceBig = toBig(balance, decimals);\n      const totalValue = balanceBig.mul(price).round(decimals).toString();\n      const hasCost = balanceBig.mul(priceUsd ?? 0).gte(TINY_TRANSFER_MAX_COST);\n      const isPricelessTokenWithBalance = PRICELESS_TOKEN_HASHES.has(codeHash!) && balance > 0n;\n\n      const isEnabled = (\n        (isNewAccount && DEFAULT_ENABLED_TOKEN_SLUGS.includes(slug))\n        || !areTokensWithNoCostHidden\n        || (areTokensWithNoCostHidden && hasCost)\n        || isPricelessTokenWithBalance\n        || accountSettings.alwaysShownSlugs?.includes(slug)\n      );\n\n      const isDisabled = !isEnabled || accountSettings.alwaysHiddenSlugs?.includes(slug);\n\n      return {\n        chain,\n        symbol,\n        slug,\n        amount: balance,\n        name,\n        image,\n        price,\n        priceUsd,\n        decimals,\n        change24h: round(percentChange24h / 100, 4),\n        isDisabled,\n        cmcSlug,\n        totalValue,\n        color,\n        tokenAddress,\n        codeHash,\n        type,\n      } satisfies UserToken as UserToken;\n    })\n    .sort((tokenA, tokenB) => {\n      if (isSortByValueEnabled || !accountSettings.orderedSlugs) {\n        const priorityA = PRIORITY_TOKEN_SLUGS.indexOf(tokenA.slug);\n        const priorityB = PRIORITY_TOKEN_SLUGS.indexOf(tokenB.slug);\n\n        // If both tokens are prioritized and their balances match\n        if (priorityA !== -1 && priorityB !== -1 && tokenA.totalValue === tokenB.totalValue) {\n          return priorityA - priorityB;\n        }\n\n        // If one token is prioritized and the other is not\n        if (priorityA !== -1 && priorityB === -1) return -1;\n        if (priorityB !== -1 && priorityA === -1) return 1;\n\n        return Number(tokenB.totalValue) - Number(tokenA.totalValue);\n      }\n\n      const indexA = accountSettings.orderedSlugs.indexOf(tokenA.slug);\n      const indexB = accountSettings.orderedSlugs.indexOf(tokenB.slug);\n      return indexA - indexB;\n    });\n}));\n\nexport function selectCurrentAccountTokens(global: GlobalState) {\n  return selectAccountTokens(global, global.currentAccountId!);\n}\n\nexport function selectCurrentAccountTokenBalance(global: GlobalState, slug: string) {\n  return selectCurrentAccountState(global)?.balances?.bySlug[slug] ?? 0n;\n}\n\nexport function selectCurrentToncoinBalance(global: GlobalState) {\n  return selectCurrentAccountTokenBalance(global, TONCOIN.slug);\n}\n\nexport function selectAccountTokens(global: GlobalState, accountId: string) {\n  const balancesBySlug = selectAccountState(global, accountId)?.balances?.bySlug;\n  if (!balancesBySlug || !global.tokenInfo) {\n    return undefined;\n  }\n\n  const accountSettings = selectAccountSettings(global, accountId);\n  const { areTokensWithNoCostHidden, isSortByValueEnabled } = global.settings;\n\n  return selectAccountTokensMemoizedFor(accountId)(\n    balancesBySlug,\n    global.tokenInfo,\n    accountSettings,\n    isSortByValueEnabled,\n    areTokensWithNoCostHidden,\n  );\n}\n\nexport function selectAccountTokenBySlug(global: GlobalState, slug: string) {\n  const accountTokens = selectCurrentAccountTokens(global);\n  return accountTokens?.find((token) => token.slug === slug);\n}\n\nexport function selectTokenAddress(global: GlobalState, slug: string) {\n  if (slug === TONCOIN.slug) return undefined;\n  return selectToken(global, slug).tokenAddress!;\n}\n\nexport function selectToken(global: GlobalState, slug: string) {\n  return global.tokenInfo.bySlug[slug];\n}\n\nexport function selectMycoin(global: GlobalState) {\n  const { isTestnet } = global.settings;\n  return selectToken(global, isTestnet ? MYCOIN_TESTNET.slug : MYCOIN.slug);\n}\n\nexport function selectTokenByMinterAddress(global: GlobalState, minter: string) {\n  return Object.values(global.tokenInfo.bySlug).find((token) => token.tokenAddress === minter);\n}\n\nexport function selectChainTokenWithMaxBalanceSlow(global: GlobalState, chain: ApiChain): UserToken | undefined {\n  return (selectCurrentAccountTokens(global) ?? [])\n    .filter((token) => token.chain === chain)\n    .reduce((maxToken, currentToken) => {\n      const currentBalance = currentToken.priceUsd * Number(currentToken.amount);\n      const maxBalance = maxToken ? maxToken.priceUsd * Number(maxToken.amount) : 0;\n\n      return currentBalance > maxBalance ? currentToken : maxToken;\n    });\n}\n","import type { ApiActivity } from '../api/types';\n\nimport { getIsActivityPending } from './activities';\n\nexport function compareActivities(a: ApiActivity, b: ApiActivity, isAsc = false) {\n  // The activity sorting is tuned to match the Toncenter API sorting as close as possible.\n  // Putting the pending activities first, because when they get confirmed, their timestamp gets bigger than any current\n  // confirmed activity timestamp. This reduces the movement in the activity list.\n  let value = (getIsActivityPending(a) ? 1 : 0) - (getIsActivityPending(b) ? 1 : 0);\n  if (value === 0) {\n    value = a.timestamp - b.timestamp;\n    if (value === 0) {\n      value = a.id > b.id ? 1 : a.id < b.id ? -1 : 0;\n    }\n  }\n  return isAsc ? value : -value;\n}\n","import type { ApiTransaction } from '../api/types';\n\nimport { TRANSACTION_ADDRESS_SHIFT } from '../config';\nimport { shortenAddress } from './shortenAddress';\n\nconst cache = new Map<string, {\n  timestamp: number;\n  amount: bigint;\n  address: string;\n}>();\n\nfunction getKey(address: string) {\n  return shortenAddress(address, TRANSACTION_ADDRESS_SHIFT)!;\n}\n\nfunction addToCache(address: string, amount: bigint, timestamp: number) {\n  const key = getKey(address);\n\n  cache.set(key, {\n    address,\n    amount,\n    timestamp,\n  });\n}\n\nfunction getFromCache(address: string) {\n  const key = getKey(address);\n\n  return cache.get(key);\n}\n\nexport function updatePoisoningCache(tx: ApiTransaction) {\n  const { fromAddress: address, amount, timestamp } = tx;\n\n  const cached = getFromCache(address);\n\n  if (!cached || cached.timestamp < timestamp || (cached.timestamp === timestamp && cached.amount > amount)) {\n    addToCache(address, amount, timestamp);\n  }\n}\n\nexport function getIsTransactionWithPoisoning(tx: ApiTransaction) {\n  const { fromAddress: address } = tx;\n\n  const cached = getFromCache(address);\n\n  return cached && cached.address !== address;\n}\n\nexport function clearPoisoningCache() {\n  cache.clear();\n}\n","import type { ApiActivity, ApiTransaction, ApiTransactionActivity, ApiTransactionType } from '../../api/types';\nimport type { LangFn } from '../langProvider';\n\nimport { ALL_STAKING_POOLS, BURN_ADDRESS } from '../../config';\nimport { compareActivities } from '../compareActivities';\nimport { extractKey, groupBy, unique } from '../iteratees';\nimport { getIsTransactionWithPoisoning } from '../poisoningHash';\n\ntype UnusualTxType = 'backend-swap' | 'local' | 'additional';\n\ntype TranslationTenses = [past: string, present: string, future: string];\n\nconst TRANSACTION_TYPE_TITLES: Partial<Record<ApiTransactionType & keyof any, TranslationTenses>> = {\n  stake: ['Staked', 'Staking', '$stake_action'],\n  unstake: ['Unstaked', 'Unstaking', '$unstake_action'],\n  unstakeRequest: ['Unstake Requested', 'Requesting Unstake', '$request_unstake_action'],\n  callContract: ['Contract Called', 'Calling Contract', '$call_contract_action'],\n  excess: ['Excess', 'Excess', 'Excess'],\n  contractDeploy: ['Contract Deployed', 'Deploying Contract', '$deploy_contract_action'],\n  bounced: ['Bounced', 'Bouncing', '$bounce_action'],\n  mint: ['Minted', 'Minting', '$mint_action'],\n  burn: ['Burned', 'Burning', '$burn_action'],\n  auctionBid: ['NFT Auction Bid', 'Bidding at NFT Auction', 'NFT Auction Bid'],\n  dnsChangeAddress: ['Address Updated', 'Updating Address', '$update_address_action'],\n  dnsChangeSite: ['Site Updated', 'Updating Site', '$update_site_action'],\n  dnsChangeSubdomains: ['Subdomains Updated', 'Updating Subdomains', '$update_subdomains_action'],\n  dnsChangeStorage: ['Storage Updated', 'Updating Storage', '$update_storage_action'],\n  dnsDelete: ['Domain Record Deleted', 'Deleting Domain Record', '$delete_domain_record_action'],\n  dnsRenew: ['Domain Renewed', 'Renewing Domain', '$renew_domain_action'],\n  liquidityDeposit: ['Liquidity Provided', 'Providing Liquidity', '$provide_liquidity_action'],\n  liquidityWithdraw: ['Liquidity Withdrawn', 'Withdrawing Liquidity', '$withdraw_liquidity_action'],\n};\n\nexport const STAKING_TRANSACTION_TYPES = new Set<ApiTransactionType | undefined>([\n  'stake', 'unstake', 'unstakeRequest',\n]);\n\nexport const DNS_TRANSACTION_TYPES = new Set<ApiTransactionType | undefined>([\n  'dnsChangeAddress', 'dnsChangeSite', 'dnsChangeStorage', 'dnsChangeSubdomains', 'dnsDelete', 'dnsRenew',\n]);\n\nexport function parseTxId(txId: string): {\n  hash: string;\n  subId?: string;\n  type?: UnusualTxType;\n} {\n  const [hash, subId, type] = txId.split(':') as [string, string | undefined, UnusualTxType | undefined];\n  return { hash, type, subId };\n}\n\nexport function getIsTxIdLocal(txId: string) {\n  return txId.endsWith(':local');\n}\n\nexport function getIsBackendSwapId(id: string) {\n  return id.endsWith(':backend-swap');\n}\n\nexport function buildBackendSwapId(backendId: string) {\n  return buildTxId(backendId, undefined, 'backend-swap');\n}\n\nexport function buildLocalTxId(hash: string, subId?: number) {\n  return buildTxId(hash, subId, 'local');\n}\n\nexport function buildTxId(hash: string, subId?: number | string, type?: UnusualTxType) {\n  if (!type && subId === undefined) return hash;\n  if (type === undefined) return `${hash}:${subId}`;\n  return `${hash}:${subId ?? ''}:${type}`;\n}\n\nexport function getActivityTokenSlugs(activity: ApiActivity): string[] {\n  switch (activity.kind) {\n    case 'transaction': {\n      if (activity.nft) return []; // We don't want NFT activities to get into any token activity list\n      return [activity.slug];\n    }\n    case 'swap': {\n      return [activity.from, activity.to];\n    }\n  }\n}\n\nexport function getIsActivitySuitableForFetchingTimestamp(activity: ApiActivity | undefined) {\n  return !!activity\n    && !getIsTxIdLocal(activity.id)\n    && !getIsBackendSwapId(activity.id)\n    && !getIsActivityPending(activity);\n}\n\nexport function getTransactionTitle(\n  { type, isIncoming, nft }: ApiTransaction,\n  tense: 'past' | 'present' | 'future',\n  translate: LangFn,\n) {\n  const tenseIndex = tense === 'past' ? 0 : tense === 'present' ? 1 : 2;\n  let titles: TranslationTenses;\n\n  if (type === 'nftTrade') {\n    titles = isIncoming\n      ? ['NFT Sold', 'Selling NFT', '$sell_nft_action']\n      : ['NFT Bought', 'Buying NFT', '$buy_nft_action'];\n  } else if (type && TRANSACTION_TYPE_TITLES[type]) {\n    titles = TRANSACTION_TYPE_TITLES[type];\n  } else {\n    titles = isIncoming\n      ? ['Received', 'Receiving', '$receive_action']\n      : ['Sent', 'Sending', '$send_action'];\n  }\n\n  let title = translate(titles[tenseIndex]);\n\n  if (nft && (!type || type === 'mint' || type === 'burn')) {\n    title += ' NFT';\n  }\n\n  return title;\n}\n\nexport function isScamTransaction(transaction: ApiTransaction) {\n  return Boolean(transaction.metadata?.isScam)\n    || (transaction.isIncoming && getIsTransactionWithPoisoning(transaction));\n}\n\nexport function shouldShowTransactionComment(transaction: ApiTransaction) {\n  return Boolean(transaction.comment || transaction.encryptedComment)\n    && !STAKING_TRANSACTION_TYPES.has(transaction.type)\n    && !isScamTransaction(transaction);\n}\n\nexport function getTransactionAmountDisplayMode({ type, amount, nft }: ApiTransaction) {\n  const isPlainTransfer = type === undefined && !nft;\n  if (!amount && !isPlainTransfer) {\n    return 'hide';\n  }\n  return type === 'stake' || type === 'unstake'\n    ? 'noSign'\n    : 'normal';\n}\n\n/** Returns the UI sections where the address should be shown */\nexport function shouldShowTransactionAddress(transaction: ApiTransactionActivity): ('list' | 'modal')[] {\n  const { type, isIncoming, nft, toAddress, fromAddress, extra } = transaction;\n\n  if (type === 'nftTrade') {\n    return extra?.marketplace ? ['list'] : [];\n  }\n\n  const shouldHide = isOurStakingTransaction(transaction)\n    || type === 'burn'\n    || (!isIncoming && nft && toAddress === nft.address)\n    || (isIncoming && type === 'excess' && fromAddress === BURN_ADDRESS);\n\n  return shouldHide ? [] : ['list', 'modal'];\n}\n\n/** \"Our\" is staking that can be controlled with MyTonWallet app */\nexport function isOurStakingTransaction({ type, isIncoming, toAddress, fromAddress }: ApiTransaction) {\n  return STAKING_TRANSACTION_TYPES.has(type) && ALL_STAKING_POOLS.includes(isIncoming ? fromAddress : toAddress);\n}\n\nexport function shouldShowTransactionAnnualYield(transaction: ApiTransaction) {\n  return transaction.type === 'stake' && isOurStakingTransaction(transaction);\n}\n\nexport function mergeActivitiesToMaxTime(array1: ApiActivity[], array2: ApiActivity[]) {\n  if (!array1.length && !array2.length) {\n    return [];\n  } else if (!array1.length && array2.length) {\n    return array2;\n  } else if (!array2.length && array1.length) {\n    return array1;\n  }\n\n  const fromTimestamp = Math.max(\n    array1[array1.length - 1].timestamp,\n    array2[array2.length - 1].timestamp,\n  );\n\n  return [...array1, ...array2]\n    .filter(({ timestamp }) => timestamp >= fromTimestamp)\n    .sort(compareActivities);\n}\n\nexport function mergeActivityIdsToMaxTime(array1: string[], array2: string[], byId: Record<string, ApiActivity>) {\n  if (!array1.length && !array2.length) {\n    return [];\n  } else if (!array1.length && array2.length) {\n    return array2;\n  } else if (!array2.length && array1.length) {\n    return array1;\n  }\n\n  const fromTimestamp = Math.max(\n    byId[array1[array1.length - 1]].timestamp,\n    byId[array2[array2.length - 1]].timestamp,\n  );\n\n  return unique([...array1, ...array2])\n    .filter((id) => byId[id].timestamp >= fromTimestamp)\n    .sort((a, b) => compareActivities(byId[a], byId[b]));\n}\n\nexport function getIsActivityWithHash(activity: ApiTransactionActivity) {\n  return !getIsTxIdLocal(activity.id) || !activity.extra?.withW5Gasless;\n}\n\nexport function getIsActivityPending(activity: ApiActivity) {\n  // \"Pending\" is a blockchain term. The activities originated by our backend are never considered pending in this sense.\n  return activity.status === 'pending' && !getIsBackendSwapId(activity.id);\n}\n\n/**\n * Sometimes activity ids change. This function finds the new id withing `nextActivities` for each activity in\n * `prevActivities`. Currently only local and pending activity ids change, so it's enough to provide only such\n * activities in `prevActivities`.\n *\n * The ids should be unique within each input array. The returned map has previous activity ids as keys and next\n * activity ids as values. If the map has no value for a previous id, it means that there is no matching next activity.\n * The values may be not unique.\n */\nexport function getActivityIdReplacements(prevActivities: ApiActivity[], nextActivities: ApiActivity[]) {\n  // Each previous activity must fall into either of the groups, otherwise the resulting map will falsely miss previous ids\n  const prevLocalActivities: ApiActivity[] = [];\n  const prevChainActivities: ApiActivity[] = [];\n\n  for (const activity of prevActivities) {\n    const group = getIsTxIdLocal(activity.id) ? prevLocalActivities : prevChainActivities;\n    group.push(activity);\n  }\n\n  return {\n    ...getLocalActivityIdReplacements(prevLocalActivities, nextActivities),\n    ...getChainActivityIdReplacements(prevChainActivities, nextActivities),\n  };\n}\n\n/** Replaces local activity ids. See `getActivityIdReplacements` for more details. */\nfunction getLocalActivityIdReplacements(prevLocalActivities: ApiActivity[], nextActivities: ApiActivity[]) {\n  const idReplacements: Record<string, string> = {};\n\n  if (!prevLocalActivities.length) {\n    return idReplacements;\n  }\n\n  const nextActivityIds = new Set(extractKey(nextActivities, 'id'));\n  const nextChainActivities = nextActivities.filter((activity) => !getIsTxIdLocal(activity.id));\n\n  for (const localActivity of prevLocalActivities) {\n    const { id: prevId } = localActivity;\n\n    // Try a direct id match\n    if (nextActivityIds.has(prevId)) {\n      idReplacements[prevId] = prevId;\n      continue;\n    }\n\n    // Otherwise, try to find a match by a heuristic\n    const chainActivity = nextChainActivities.find((chainActivity) => {\n      return doesLocalActivityMatch(localActivity, chainActivity);\n    });\n    if (chainActivity) {\n      idReplacements[prevId] = chainActivity.id;\n    }\n\n    // Otherwise, there is no match\n  }\n\n  return idReplacements;\n}\n\n/** Replaces chain (i.e. not local) activity ids. See `getActivityIdReplacements` for more details. */\nfunction getChainActivityIdReplacements(prevActivities: ApiActivity[], nextActivities: ApiActivity[]) {\n  const idReplacements: Record<string, string> = {};\n\n  if (!prevActivities.length) {\n    return idReplacements;\n  }\n\n  const nextActivityIds = new Set(extractKey(nextActivities, 'id'));\n  const nextActivitiesByMessageHash = groupBy(nextActivities, 'externalMsgHashNorm');\n\n  for (const { id: prevId, externalMsgHashNorm } of prevActivities) {\n    // Try a direct id match\n    if (nextActivityIds.has(prevId)) {\n      idReplacements[prevId] = prevId;\n      continue;\n    }\n\n    // Otherwise, match by the message hash\n    if (externalMsgHashNorm) {\n      const nextSubActivities = nextActivitiesByMessageHash[externalMsgHashNorm];\n      if (nextSubActivities?.length) {\n        idReplacements[prevId] = nextSubActivities[0].id;\n\n        // Leaving 1 activity in each group to ensure there is a match for the further prev activities with the same hash\n        if (nextSubActivities.length > 1) {\n          nextSubActivities.shift();\n        }\n      }\n    }\n\n    // Otherwise, there is no match\n  }\n\n  return idReplacements;\n}\n\n/** Decides whether the local activity matches the activity from the blockchain */\nexport function doesLocalActivityMatch(localActivity: ApiActivity, chainActivity: ApiActivity) {\n  if (localActivity.extra?.withW5Gasless) {\n    if (localActivity.kind === 'transaction' && chainActivity.kind === 'transaction') {\n      return !chainActivity.isIncoming && localActivity.normalizedAddress === chainActivity.normalizedAddress\n        && localActivity.amount === chainActivity.amount\n        && localActivity.slug === chainActivity.slug;\n    } else if (localActivity.kind === 'swap' && chainActivity.kind === 'swap') {\n      return localActivity.from === chainActivity.from\n        && localActivity.to === chainActivity.to\n        && localActivity.fromAmount === chainActivity.fromAmount;\n    }\n  }\n\n  if (localActivity.externalMsgHashNorm) {\n    return localActivity.externalMsgHashNorm === chainActivity.externalMsgHashNorm && !chainActivity.shouldHide;\n  }\n\n  return parseTxId(localActivity.id).hash === parseTxId(chainActivity.id).hash;\n}\n","import type { ApiActivity, ApiActivityTimestamps, ApiChain } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { getIsActivitySuitableForFetchingTimestamp, getIsTxIdLocal } from '../../util/activities';\nimport { compact, findLast, mapValues } from '../../util/iteratees';\nimport { selectAccountState } from './accounts';\n\nexport function selectNewestActivityTimestamps(global: GlobalState, accountId: string): ApiActivityTimestamps {\n  return mapValues(\n    selectAccountState(global, accountId)?.activities?.newestActivitiesBySlug || {},\n    ({ timestamp }) => timestamp,\n  );\n}\n\nexport function selectLastActivityTimestamp(\n  global: GlobalState,\n  accountId: string,\n  tokenSlug?: string,\n): number | undefined {\n  const activities = selectAccountState(global, accountId)?.activities;\n  if (!activities) return undefined;\n\n  const { byId, idsMain, idsBySlug } = activities;\n  const ids = (tokenSlug ? idsBySlug?.[tokenSlug] : idsMain) || [];\n  const txId = findLast(ids, (id) => getIsActivitySuitableForFetchingTimestamp(byId[id]));\n  if (!txId) return undefined;\n\n  return byId[txId].timestamp;\n}\n\nexport function selectLocalActivitiesSlow(global: GlobalState, accountId: string) {\n  const { byId = {}, localActivityIds = [] } = global.byAccountId[accountId]?.activities ?? {};\n\n  return compact(localActivityIds.map((id) => byId[id]));\n}\n\n/** Doesn't include local activities */\nexport function selectPendingActivitiesSlow(global: GlobalState, accountId: string, chain: ApiChain) {\n  const { byId = {}, pendingActivityIds = {} } = global.byAccountId[accountId]?.activities ?? {};\n  const ids = pendingActivityIds[chain] ?? [];\n\n  return compact(ids.map((id) => byId[id]));\n}\n\nexport function selectRecentNonLocalActivitiesSlow(global: GlobalState, accountId: string, maxCount: number) {\n  const { byId = {}, idsMain = [] } = global.byAccountId[accountId]?.activities ?? {};\n  const result: ApiActivity[] = [];\n\n  for (const id of idsMain) {\n    if (result.length >= maxCount) {\n      break;\n    }\n    if (getIsTxIdLocal(id)) {\n      continue;\n    }\n    const activity = byId[id];\n    if (activity) {\n      result.push(activity);\n    }\n  }\n\n  return result;\n}\n\nexport function selectIsHistoryEndReached(global: GlobalState, accountId: string, tokenSlug?: string) {\n  const accountState = selectAccountState(global, accountId);\n  const { isMainHistoryEndReached, isHistoryEndReachedBySlug } = accountState?.activities ?? {};\n\n  return tokenSlug\n    ? !!isHistoryEndReachedBySlug?.[tokenSlug]\n    : !!isMainHistoryEndReached;\n}\n\n/** If returns `undefined`, the activities haven't been loaded yet. If returns `[]`, there are no activities. */\nexport function selectActivityHistoryIds(global: GlobalState, accountId: string, tokenSlug?: string) {\n  const { idsMain, idsBySlug } = selectAccountState(global, accountId)?.activities ?? {};\n\n  return tokenSlug\n    ? idsBySlug?.[tokenSlug]\n    : idsMain;\n}\n","import type { SignDataPayload } from '@tonconnect/protocol';\nimport type { TeactNode } from '../lib/teact/teact';\n\nimport type { ApiFetchEstimateDieselResult, ApiTonWalletVersion } from '../api/chains/ton/types';\nimport type { ApiTonConnectProof } from '../api/tonConnect/types';\nimport type {\n  ApiAccountConfig,\n  ApiActivity,\n  ApiAnyDisplayError,\n  ApiBalanceBySlug,\n  ApiBaseCurrency,\n  ApiChain,\n  ApiCountryCode,\n  ApiDapp,\n  ApiDappPermissions,\n  ApiDappTransfer,\n  ApiEmulationResult,\n  ApiHistoryList,\n  ApiImportAddressByChain,\n  ApiLedgerDriver,\n  ApiMtwCardType,\n  ApiNetwork,\n  ApiNft,\n  ApiNotificationsAccountValue,\n  ApiParsedPayload,\n  ApiPriceHistoryPeriod,\n  ApiSignedTransfer,\n  ApiSite,\n  ApiSiteCategory,\n  ApiStakingHistory,\n  ApiStakingState,\n  ApiSwapAsset,\n  ApiSwapDexLabel,\n  ApiSwapEstimateVariant,\n  ApiTokenType,\n  ApiTokenWithPrice,\n  ApiUpdate,\n  ApiUpdateDappCloseLoading,\n  ApiUpdateDappConnect,\n  ApiUpdateDappLoading,\n  ApiUpdateDappSendTransactions,\n  ApiUpdateDappSignData,\n  ApiUpdateWalletVersions,\n  ApiVestingInfo,\n  ApiWalletWithVersionInfo,\n} from '../api/types';\nimport type { AUTOLOCK_OPTIONS_LIST } from '../config';\nimport type { AuthConfig } from '../util/authApi/types';\nimport type { CapacitorPlatform } from '../util/capacitor/platform';\nimport type { LedgerTransport, LedgerWalletInfo } from '../util/ledger/types';\n\nexport type IAnchorPosition = {\n  x: number;\n  y: number;\n};\n\nexport type AnimationLevel = 0 | 1 | 2;\nexport type Theme = 'light' | 'dark' | 'system';\nexport type AppTheme = 'dark' | 'light';\nexport type AppLayout = 'portrait' | 'landscape';\nexport type DialogAction = 'openBluetoothSettings' | 'signOutAll';\n\nexport type NotificationType = {\n  icon?: string;\n  message: string;\n};\n\nexport type DialogType = {\n  title?: string;\n  message: string | TeactNode;\n  entities?: Record<string, any>;\n  noBackdropClose?: boolean;\n  isInAppLock?: boolean;\n  buttons?: {\n    confirm: { title?: string; action?: DialogAction; isDestructive?: boolean };\n    cancel?: { title?: string };\n  };\n};\n\nexport type LangCode = 'en' | 'es' | 'ru' | 'zh-Hant' | 'zh-Hans' | 'tr' | 'de' | 'th' | 'uk' | 'pl';\n\nexport interface LangItem {\n  langCode: LangCode;\n  name: string;\n  nativeName: string;\n  rtl: boolean;\n}\n\nexport interface LangString {\n  zeroValue?: string;\n  oneValue?: string;\n  twoValue?: string;\n  fewValue?: string;\n  manyValue?: string;\n  otherValue?: string;\n}\n\nexport type LangPack = Record<string, string | LangString>;\n\nexport type StakingStatus = 'active' | 'unstakeRequested';\n\nexport type AuthMethod = 'createAccount' | 'importMnemonic' | 'importHardwareWallet';\n\ninterface AuthAccount {\n  accountId: string;\n  addressByChain: Partial<Record<ApiChain, string>>;\n  network?: ApiNetwork;\n}\n\ntype SignOutLevel = 'account' | 'network' | 'all';\n\nexport enum AppState {\n  Auth,\n  Main,\n  Explore,\n  Settings,\n  Ledger,\n  Inactive,\n}\n\nexport enum AuthState {\n  none,\n  createWallet,\n  checkPassword,\n  createPin,\n  confirmPin,\n  createBiometrics,\n  confirmBiometrics,\n  createNativeBiometrics,\n  createPassword,\n  createBackup,\n  disclaimerAndBackup,\n  importWalletCheckPassword,\n  importWallet,\n  importWalletCreatePin,\n  importWalletConfirmPin,\n  importWalletCreateNativeBiometrics,\n  importWalletCreateBiometrics,\n  importWalletConfirmBiometrics,\n  importWalletCreatePassword,\n  disclaimer,\n  ready,\n  about,\n  safetyRules,\n  mnemonicPage,\n  checkWords,\n  importViewAccount,\n}\n\nexport enum BiometricsState {\n  None,\n  TurnOnPasswordConfirmation,\n  TurnOnRegistration,\n  TurnOnVerification,\n  TurnOnComplete,\n  TurnOffWarning,\n  TurnOffBiometricConfirmation,\n  TurnOffCreatePassword,\n  TurnOffComplete,\n}\n\nexport enum TransferState {\n  None,\n  WarningHardware,\n  Initial,\n  Confirm,\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n  Complete,\n}\n\nexport const enum ScamWarningType {\n  SeedPhrase = 1,\n  DomainLike,\n}\n\nexport enum SignDataState {\n  None,\n  Initial,\n  Password,\n  Complete,\n}\n\nexport enum DomainRenewalState {\n  None,\n  Initial,\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n  Complete,\n}\n\nexport enum DomainLinkingState {\n  None,\n  Initial,\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n  Complete,\n}\n\nexport enum SwapState {\n  None,\n  Initial,\n  Blockchain,\n  Password,\n  WaitTokens,\n  Complete,\n  SelectTokenFrom,\n  SelectTokenTo,\n}\n\nexport enum SwapInputSource {\n  In,\n  Out,\n}\n\nexport enum SwapErrorType {\n  UnexpectedError,\n  InvalidPair,\n  NotEnoughLiquidity,\n\n  ChangellyMinSwap,\n  ChangellyMaxSwap,\n  NotEnoughForFee,\n  TooSmallAmount,\n}\n\nexport enum SwapType {\n  OnChain,\n  CrosschainFromWallet,\n  CrosschainToWallet,\n}\n\nexport enum DappConnectState {\n  Info,\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n}\n\nexport enum HardwareConnectState {\n  Connect,\n  Connecting,\n  Failed,\n  ConnectedWithSeveralWallets,\n  ConnectedWithSingleWallet,\n  WaitingForRemoteTab,\n}\n\nexport enum StakingState {\n  None,\n\n  StakeInitial,\n  StakePassword,\n  StakeConnectHardware,\n  StakeConfirmHardware,\n  StakeComplete,\n\n  UnstakeInitial,\n  UnstakePassword,\n  UnstakeConnectHardware,\n  UnstakeConfirmHardware,\n  UnstakeComplete,\n\n  ClaimPassword,\n  ClaimConnectHardware,\n  ClaimConfirmHardware,\n  ClaimComplete,\n}\n\nexport enum VestingUnfreezeState {\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n}\n\nexport enum SettingsState {\n  Initial,\n  PushNotifications,\n  Appearance,\n  Assets,\n  Security,\n  Dapps,\n  Language,\n  About,\n  Disclaimer,\n  NativeBiometricsTurnOn,\n  SelectTokenList,\n  WalletVersion,\n  LedgerConnectHardware,\n  LedgerSelectWallets,\n  HiddenNfts,\n  BackupWallet,\n}\n\nexport enum MintCardState {\n  Initial,\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n  Done,\n}\n\nexport enum ActiveTab {\n  Receive,\n  Transfer,\n  Swap,\n  Stake,\n}\n\nexport enum ContentTab {\n  Assets,\n  Activity,\n  Explore,\n  Nft,\n}\n\nexport enum MediaType {\n  Nft,\n}\n\nexport type UserToken = {\n  amount: bigint;\n  name: string;\n  symbol: string;\n  image?: string;\n  slug: string;\n  price: number;\n  priceUsd: number;\n  decimals: number;\n  change24h: number;\n  chain: ApiChain;\n  tokenAddress?: string;\n  isDisabled?: boolean;\n  canSwap?: boolean;\n  keywords?: string[];\n  cmcSlug?: string;\n  totalValue: string;\n  type?: ApiTokenType;\n  color?: string;\n  codeHash?: string;\n};\n\nexport type UserSwapToken = Omit<UserToken, 'change24h' | 'chain'> & {\n  chain: ApiChain | (string & {});\n  isPopular: boolean;\n};\n\nexport type TokenPeriod = '1D' | '7D' | '1M' | '3M' | '1Y' | 'ALL';\n\nexport type PriceHistoryPeriods = Partial<Record<ApiPriceHistoryPeriod, ApiHistoryList>>;\n\nexport type DieselStatus = 'not-available' | 'not-authorized' | 'pending-previous' | 'available' | 'stars-fee';\n\nexport type AccountType = 'mnemonic' | 'hardware' | 'view';\n\nexport interface Account {\n  title?: string;\n  type: AccountType;\n  addressByChain: Partial<Record<ApiChain, string>>;\n  domainByChain?: Partial<Record<ApiChain, string>>;\n  importedAt?: number;\n  ledger?: {\n    index: number;\n    driver: ApiLedgerDriver;\n  };\n}\n\nexport type AssetPairs = Record<string, {\n  isReverseProhibited?: boolean;\n  isMultichain?: boolean;\n}>;\n\nexport interface AccountState {\n  balances?: {\n    bySlug: ApiBalanceBySlug;\n  };\n  activities?: {\n    byId: Record<string, ApiActivity>;\n    /**\n     * The array values are sorted by the activity type (newest to oldest).\n     * Undefined means that the activities haven't been loaded, [] means that there are no activities.\n     */\n    idsMain?: string[];\n    /** The record values follow the same rules as `idsMain` */\n    idsBySlug?: Record<string, string[]>;\n    newestActivitiesBySlug?: Record<string, ApiActivity>;\n    isMainHistoryEndReached?: boolean;\n    isHistoryEndReachedBySlug?: Record<string, boolean>;\n    localActivityIds?: string[];\n    /** Doesn't include the local activities */\n    pendingActivityIds?: Partial<Record<ApiChain, string[]>>;\n    /**\n     * May be false when the actual activities are actually loaded (when the app has been loaded from the cache).\n     * The initial activities should be considered loaded if `idsMain` is not undefined.\n     */\n    areInitialActivitiesLoaded?: Partial<Record<ApiChain, boolean>>;\n  };\n  nfts?: {\n    byAddress?: Record<string, ApiNft>;\n    orderedAddresses?: string[];\n    currentCollectionAddress?: string;\n    selectedAddresses?: string[];\n    dnsExpiration?: Record<string, number>;\n    linkedAddressByAddress?: Record<string, string>;\n    collectionTabs?: string[];\n    wasTelegramGiftsAutoAdded?: boolean;\n  };\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  selectedNftsToHide?: {\n    addresses: string[];\n    isCollection: boolean;\n  };\n  isUnhideNftModalOpen?: boolean;\n  selectedNftToUnhide?: {\n    address: ApiNft['address'];\n    name: ApiNft['name'];\n  };\n  currentNftForAttributes?: ApiNft;\n  dappLastOpenedDatesByUrl?: Record<string, number>;\n  isBackupRequired?: boolean;\n  currentTokenSlug?: string;\n  currentActivityId?: string;\n  currentTokenPeriod?: TokenPeriod;\n  savedAddresses?: SavedAddress[];\n  activeContentTab?: ContentTab;\n  landscapeActionsActiveTabIndex?: ActiveTab;\n  activitiesUpdateStartedAt?: number;\n  balanceUpdateStartedAt?: number;\n\n  // Staking\n  staking?: {\n    stakingId?: string;\n    stateById?: Record<string, ApiStakingState>;\n    totalProfit?: bigint;\n    shouldUseNominators?: boolean;\n  };\n\n  vesting?: {\n    info: ApiVestingInfo[];\n    isLoading?: boolean;\n    isConfirmRequested?: boolean;\n    error?: string;\n    unfreezeRequestedIds?: { id: number; partId: number }[];\n    unfreezeState?: VestingUnfreezeState;\n  };\n\n  stakingHistory?: ApiStakingHistory;\n  browserHistory?: string[];\n\n  isDieselAuthorizationStarted?: boolean;\n  isLongUnstakeRequested?: boolean;\n  isCardMinting?: boolean;\n  receiveModalChain?: ApiChain;\n  invoiceTokenSlug?: string;\n\n  dapps?: ApiDapp[];\n  currentSiteCategoryId?: number;\n\n  config?: ApiAccountConfig;\n}\n\nexport interface AccountSettings {\n  orderedSlugs?: string[];\n  alwaysShownSlugs?: string[];\n  alwaysHiddenSlugs?: string[];\n  deletedSlugs?: string[];\n  importedSlugs?: string[];\n  // These NFTs should be saved in the settings for immediate use after launching the application,\n  // without synchronizing the wallet history or complex state caching\n  cardBackgroundNft?: ApiNft;\n  accentColorNft?: ApiNft;\n  accentColorIndex?: number;\n  isAllowSuspiciousActions?: boolean;\n}\n\nexport interface SavedAddress {\n  name: string;\n  address: string;\n  chain: ApiChain;\n}\n\nexport interface NftTransfer {\n  name?: string;\n  address: string;\n  thumbnail: string;\n  collectionName?: string;\n}\n\nexport type GlobalState = {\n  DEBUG_randomId?: number;\n\n  appState: AppState;\n\n  auth: {\n    state: AuthState;\n    biometricsStep?: 1 | 2;\n    method?: AuthMethod;\n    isLoading?: boolean;\n    mnemonic?: string[];\n    mnemonicCheckIndexes?: number[];\n    hardwareSelectedIndices?: number[];\n    error?: string;\n    password?: string;\n    isImportModalOpen?: boolean;\n    firstNetworkAccount?: AuthAccount;\n    secondNetworkAccount?: AuthAccount;\n    forceAddingTonOnlyAccount?: boolean;\n  };\n\n  biometrics: {\n    state: BiometricsState;\n    error?: string;\n    password?: string;\n  };\n\n  nativeBiometricsError?: string;\n\n  hardware: {\n    hardwareState: HardwareConnectState;\n    hardwareWallets?: LedgerWalletInfo[];\n    isLedgerConnected?: boolean;\n    isTonAppConnected?: boolean;\n    availableTransports?: LedgerTransport[];\n    lastUsedTransport?: LedgerTransport;\n  };\n\n  currentTransfer: {\n    state: TransferState;\n    isLoading?: boolean;\n    // Should be ignored when `nfts` is defined and not empty\n    tokenSlug: string;\n    toAddress?: string;\n    toAddressName?: string;\n    resolvedAddress?: string;\n    error?: string;\n    // Should be ignored when `nfts` is defined and not empty\n    amount?: bigint;\n    // Every time this field value changes, the `amount` value should be actualized using `preserveMaxTransferAmount`\n    fee?: bigint;\n    realFee?: bigint;\n    comment?: string;\n    binPayload?: string;\n    promiseId?: string;\n    txId?: string;\n    rawPayload?: string;\n    parsedPayload?: ApiParsedPayload;\n    stateInit?: string;\n    shouldEncrypt?: boolean;\n    isToNewAddress?: boolean;\n    isScam?: boolean;\n    nfts?: ApiNft[];\n    sentNftsCount?: number;\n    isMemoRequired?: boolean;\n    // Every time this field value changes, the `amount` value should be actualized using `preserveMaxTransferAmount`\n    diesel?: ApiFetchEstimateDieselResult;\n    withDiesel?: boolean;\n    isGaslessWithStars?: boolean;\n    // This field is used to display a scam warning in the UI only because `Dialogs` are not displayed in iOS\n    // due to NBS specifics. Undefined means closed.\n    scamWarningType?: ScamWarningType;\n  };\n\n  currentSwap: {\n    isMaxAmount?: boolean;\n    state: SwapState;\n    swapId?: string;\n    slippage: number;\n    tokenInSlug?: string;\n    tokenOutSlug?: string;\n    amountIn?: string;\n    amountOut?: string;\n    amountOutMin?: string;\n    priceImpact?: number;\n    activityId?: string;\n    error?: string;\n    errorType?: SwapErrorType;\n    shouldResetOnClose?: boolean;\n    isLoading?: boolean;\n    /**\n     * When is `true`, does several things: shows the estimating indicator in the UI, blocks the form submission, and\n     * instructs the UI and the actions to perform an estimation regardless.\n     */\n    isEstimating?: boolean;\n    inputSource?: SwapInputSource;\n    toAddress?: string;\n    payinAddress?: string;\n    payoutAddress?: string;\n    payinExtraId?: string;\n    limits?: {\n      fromMin?: string;\n      fromMax?: string;\n    };\n    dieselStatus?: DieselStatus;\n    estimates?: ApiSwapEstimateVariant[];\n    // This property is necessary to ensure that when the DEX with the best rate changes,\n    // the user's selection remains unchanged\n    isDexLabelChanged?: true;\n    currentDexLabel?: ApiSwapDexLabel;\n    bestRateDexLabel?: ApiSwapDexLabel;\n    // Fees. Undefined values mean that these fields are unknown.\n    networkFee?: string;\n    realNetworkFee?: string;\n    swapFee?: string;\n    swapFeePercent?: number;\n    ourFee?: string;\n    ourFeePercent?: number;\n    dieselFee?: string;\n  };\n\n  currentSignature?: {\n    promiseId: string;\n    dataHex: string;\n    error?: string;\n    isSigned?: boolean;\n  };\n\n  exploreData?: {\n    categories: ApiSiteCategory[];\n    sites: ApiSite[];\n  };\n\n  currentDappTransfer: {\n    state: TransferState;\n    isSse?: boolean;\n    promiseId?: string;\n    isLoading?: boolean;\n    transactions?: ApiDappTransfer[];\n    /** What else should happen after submitting the transactions (in addition to the transactions) */\n    emulation?: Pick<ApiEmulationResult, 'activities' | 'realFee'>;\n    vestingAddress?: string;\n    viewTransactionOnIdx?: number;\n    dapp?: ApiDapp;\n    error?: string;\n  };\n\n  currentDappSignData: {\n    state: SignDataState;\n    isSse?: boolean;\n    promiseId?: string;\n    isLoading?: boolean;\n    dapp?: ApiDapp;\n    payloadToSign?: SignDataPayload;\n    error?: string;\n  };\n\n  currentDomainRenewal: {\n    addresses?: string[];\n    state: DomainRenewalState;\n    isLoading?: boolean;\n    error?: string;\n    // There's only one commission because the transaction has no change\n    realFee?: bigint;\n    txId?: string;\n  };\n\n  currentDomainLinking: {\n    address?: string;\n    state: DomainLinkingState;\n    isLoading?: boolean;\n    error?: string;\n    realFee?: bigint;\n    walletAddress?: string;\n    walletAddressName?: string;\n    resolvedWalletAddress?: string;\n    txId?: string;\n  };\n\n  dappConnectRequest?: {\n    state: DappConnectState;\n    isSse?: boolean;\n    promiseId?: string;\n    accountId?: string;\n    dapp: ApiDapp;\n    permissions?: ApiDappPermissions;\n    proof?: ApiTonConnectProof;\n    error?: string;\n  };\n\n  currentStaking: {\n    state: StakingState;\n    isLoading?: boolean;\n    isUnstaking?: boolean;\n    amount?: bigint;\n    tokenAmount?: bigint;\n    fee?: bigint;\n    error?: string;\n  };\n\n  stakingDefault: ApiStakingState;\n\n  accounts?: {\n    byId: Record<string, Account>;\n    isLoading?: boolean;\n    error?: string;\n  };\n\n  tokenInfo: {\n    bySlug: Record<string, ApiTokenWithPrice>;\n  };\n\n  swapTokenInfo: {\n    bySlug: Record<string, ApiSwapAsset>;\n    /** Whether the API has loaded and provided the tokens */\n    isLoaded?: true;\n  };\n\n  swapPairs?: {\n    bySlug: Record<string, AssetPairs>;\n  };\n\n  tokenPriceHistory: {\n    bySlug: Record<string, PriceHistoryPeriods>;\n  };\n\n  byAccountId: Record<string, AccountState>;\n\n  walletVersions?: {\n    currentVersion: ApiTonWalletVersion;\n    byId: Record<string, ApiWalletWithVersionInfo[]>;\n  };\n\n  settings: {\n    state: SettingsState;\n    theme: Theme;\n    animationLevel: AnimationLevel;\n    langCode: LangCode;\n    byAccountId: Record<string, AccountSettings>;\n    areTinyTransfersHidden?: boolean;\n    canPlaySounds?: boolean;\n    isInvestorViewEnabled?: boolean;\n    isTonProxyEnabled?: boolean;\n    isTonMagicEnabled?: boolean;\n    isDeeplinkHookEnabled?: boolean;\n    isPasswordNumeric?: boolean; // Backwards compatibility for non-numeric passwords from older versions\n    isTestnet?: boolean;\n    isSecurityWarningHidden?: boolean;\n    areTokensWithNoCostHidden: boolean;\n    isSortByValueEnabled?: boolean;\n    importToken?: {\n      isLoading?: boolean;\n      token?: UserToken | UserSwapToken;\n    };\n    authConfig?: AuthConfig;\n    baseCurrency?: ApiBaseCurrency;\n    isAppLockEnabled?: boolean;\n    autolockValue?: AutolockValueType;\n    isAutoConfirmEnabled?: boolean;\n    isSensitiveDataHidden?: true;\n  };\n\n  dialogs: DialogType[];\n  notifications: NotificationType[];\n  currentAccountId?: string;\n  isAddAccountModalOpen?: boolean;\n  isBackupWalletModalOpen?: boolean;\n  isHardwareModalOpen?: boolean;\n  isStakingInfoModalOpen?: boolean;\n  isQrScannerOpen?: boolean;\n  areSettingsOpen?: boolean;\n  isExploreOpen?: boolean;\n  isAppUpdateAvailable?: boolean;\n  // Force show the \"Update MyTonWallet\" pop-up on all platforms\n  isAppUpdateRequired?: boolean;\n  confettiRequestedAt?: number;\n  isPinAccepted?: boolean;\n  chainForOnRampWidgetModal?: ApiChain;\n  isInvoiceModalOpen?: boolean;\n  isReceiveModalOpen?: boolean;\n  isVestingModalOpen?: boolean;\n  shouldForceAccountEdit?: boolean;\n  isIncorrectTimeNotificationReceived?: boolean;\n  currentBrowserOptions?: {\n    url: string;\n    title?: string;\n    subtitle?: string;\n    keepNBSOpen?: boolean;\n  };\n\n  currentMintCard?: {\n    type?: ApiMtwCardType;\n    state?: MintCardState;\n    error?: string;\n    isLoading?: boolean;\n  };\n\n  currentQrScan?: {\n    currentTransfer?: GlobalState['currentTransfer'];\n    currentSwap?: GlobalState['currentSwap'];\n    currentDomainLinking?: GlobalState['currentDomainLinking'];\n  };\n\n  latestAppVersion?: string;\n  stateVersion: number;\n  restrictions: {\n    isLimitedRegion: boolean;\n    isSwapDisabled: boolean;\n    isOnRampDisabled: boolean;\n    isNftBuyingDisabled: boolean;\n    isCopyStorageEnabled?: boolean;\n    supportAccountsCount?: number;\n    countryCode?: ApiCountryCode;\n  };\n\n  mediaViewer: {\n    mediaId?: string;\n    mediaType?: MediaType;\n    txId?: string;\n    hiddenNfts?: 'user' | 'scam';\n    noGhostAnimation?: boolean;\n  };\n\n  isLoadingOverlayOpen?: boolean;\n\n  pushNotifications: {\n    isAvailable?: boolean;\n    userToken?: string;\n    platform?: CapacitorPlatform;\n    enabledAccounts: Record<string, Partial<ApiNotificationsAccountValue>>;\n  };\n\n  isAppLockActive?: boolean;\n  isManualLockActive?: boolean;\n  appLockHideBiometrics?: boolean;\n  // The app is open in fullscreen mode in Telegram MiniApp on mobile\n  isFullscreen?: boolean;\n};\n\nexport interface ActionPayloads {\n  // Initial\n  init: undefined;\n  initApi: undefined;\n  afterInit: undefined;\n  apiUpdate: ApiUpdate;\n  resetAuth: undefined;\n  startCreatingWallet: undefined;\n  afterCheckMnemonic: undefined;\n  skipCheckMnemonic: undefined;\n  restartCheckMnemonicIndexes: { worldsCount: number };\n  cancelDisclaimer: undefined;\n  afterCreatePassword: { password: string; isPasswordNumeric?: boolean };\n  startCreatingBiometrics: undefined;\n  afterCreateBiometrics: undefined;\n  skipCreateBiometrics: undefined;\n  cancelCreateBiometrics: undefined;\n  afterCreateNativeBiometrics: undefined;\n  skipCreateNativeBiometrics: undefined;\n  createPin: { pin: string; isImporting: boolean };\n  confirmPin: { isImporting: boolean };\n  cancelConfirmPin: { isImporting: boolean };\n  startImportingWallet: undefined;\n  afterImportMnemonic: { mnemonic: string[] };\n  startImportingHardwareWallet: { driver: ApiLedgerDriver };\n  confirmDisclaimer: undefined;\n  afterConfirmDisclaimer: undefined;\n  cleanAuthError: undefined;\n  openAbout: undefined;\n  closeAbout: undefined;\n  startImportViewAccount: undefined;\n  closeImportViewAccount: undefined;\n  openAuthImportWalletModal: undefined;\n  closeAuthImportWalletModal: undefined;\n  openAuthBackupWalletModal: undefined;\n  openMnemonicPage: undefined;\n  openCreateBackUpPage: undefined;\n  openCheckWordsPage: undefined;\n  closeCheckWordsPage: { isBackupCreated?: boolean } | undefined;\n  initializeHardwareWalletModal: undefined;\n  initializeHardwareWalletConnection: { transport: LedgerTransport };\n  createHardwareAccounts: undefined;\n  addHardwareAccounts: {\n    wallets: ({ accountId: string; address: string; walletInfo: LedgerWalletInfo } | undefined)[];\n  };\n  loadMoreHardwareWallets: { lastIndex: number };\n  createAccount: { password: string; isImporting: boolean; isPasswordNumeric?: boolean; version?: ApiTonWalletVersion };\n  afterSelectHardwareWallets: { hardwareSelectedIndices: number[] };\n  resetApiSettings: { areAllDisabled?: boolean } | undefined;\n  checkAppVersion: undefined;\n  importAccountByVersion: { version: ApiTonWalletVersion };\n  importViewAccount: { addressByChain: ApiImportAddressByChain };\n\n  selectToken: { slug?: string } | undefined;\n  openBackupWalletModal: undefined;\n  closeBackupWalletModal: undefined;\n  setIsBackupRequired: { isMnemonicChecked: boolean };\n  openHardwareWalletModal: undefined;\n  closeHardwareWalletModal: undefined;\n  resetHardwareWalletConnect: undefined;\n  setTransferScreen: { state: TransferState };\n  setTransferAmount: { amount?: bigint };\n  setTransferToAddress: { toAddress?: string };\n  setTransferComment: { comment?: string };\n  setTransferShouldEncrypt: { shouldEncrypt?: boolean };\n  startTransfer: {\n    isPortrait?: boolean;\n    tokenSlug?: string;\n    amount?: bigint;\n    toAddress?: string;\n    comment?: string;\n    nfts?: ApiNft[];\n    binPayload?: string;\n    stateInit?: string;\n  } | undefined;\n  changeTransferToken: { tokenSlug: string; withResetAmount?: boolean };\n  fetchTransferFee: {\n    tokenSlug: string;\n    toAddress: string;\n    comment?: string;\n    shouldEncrypt?: boolean;\n    binPayload?: string;\n    stateInit?: string;\n  };\n  fetchNftFee: {\n    toAddress: string;\n    nfts: ApiNft[];\n    comment?: string;\n  };\n  submitTransferInitial: {\n    tokenSlug: string;\n    amount: bigint;\n    toAddress: string;\n    comment?: string;\n    shouldEncrypt?: boolean;\n    nfts?: ApiNft[];\n    withDiesel?: boolean;\n    isBase64Data?: boolean;\n    binPayload?: string;\n    isGaslessWithStars?: boolean;\n    stateInit?: string;\n  };\n  submitTransferConfirm: undefined;\n  submitTransferPassword: { password: string };\n  submitTransferHardware: undefined;\n  clearTransferError: undefined;\n  cancelTransfer: { shouldReset?: boolean } | undefined;\n  showTransferScamWarning: { type: ScamWarningType };\n  dismissTransferScamWarning: undefined;\n  showDialog: DialogType;\n  dismissDialog: undefined;\n  showError: { error?: ApiAnyDisplayError | string };\n  showNotification: { message: string; icon?: string };\n  dismissNotification: undefined;\n  initLedgerPage: undefined;\n  afterSignIn: undefined;\n  signOut: { level: SignOutLevel };\n  cancelCaching: undefined;\n  afterSignOut: { shouldReset?: boolean } | undefined;\n  addAccount: { method: AuthMethod; password: string; isAuthFlow?: boolean };\n  addAccount2: { method: AuthMethod; password: string };\n  switchAccount: { accountId: string; newNetwork?: ApiNetwork };\n  renameAccount: { accountId: string; title: string };\n  clearAccountError: undefined;\n  clearAccountLoading: undefined;\n  setIsAccountLoading: { isLoading: true | undefined };\n  verifyHardwareAddress: undefined;\n  authorizeDiesel: undefined;\n  fetchTransferDieselState: { tokenSlug: string };\n  setIsAuthLoading: { isLoading: true | undefined };\n\n  fetchPastActivities: { slug?: string; shouldLoadWithBudget?: boolean };\n  showActivityInfo: { id: string };\n  showAnyAccountTx: { txId: string; accountId: string; network: ApiNetwork };\n  showAnyAccountTokenActivity: { slug: string; accountId: string; network: ApiNetwork };\n  showTokenActivity: { slug: string };\n  closeActivityInfo: { id: string };\n  fetchActivityDetails: { id: string };\n  fetchNftsFromCollection: { collectionAddress: string };\n  openNftCollection: { address: string };\n  closeNftCollection: undefined;\n  selectNfts: { addresses: string[] };\n  selectAllNfts: { collectionAddress?: string };\n  clearNftSelection: { address: string };\n  clearNftsSelection: undefined;\n  addCollectionTab: { collectionAddress: string; isAuto?: boolean };\n  removeCollectionTab: { collectionAddress: string };\n  burnNfts: { nfts: ApiNft[] };\n  addNftsToBlacklist: { addresses: ApiNft['address'][] };\n  addNftsToWhitelist: { addresses: ApiNft['address'][] };\n  removeNftSpecialStatus: { address: ApiNft['address'] };\n  openUnhideNftModal: {\n    address: ApiNft['address'];\n    name: ApiNft['name'];\n  };\n  closeUnhideNftModal: undefined;\n  openHideNftModal: {\n    addresses: ApiNft['address'][];\n    isCollection: boolean;\n  };\n  closeHideNftModal: undefined;\n  openNftAttributesModal: { nft: ApiNft };\n  closeNftAttributesModal: undefined;\n\n  openExplore: undefined;\n  closeExplore: undefined;\n\n  closeAnyModal: undefined;\n  submitSignature: { password: string };\n  clearSignatureError: undefined;\n  cancelSignature: undefined;\n\n  addSavedAddress: { address: string; name: string; chain: ApiChain };\n  removeFromSavedAddress: { address: string; chain: ApiChain };\n  checkTransferAddress: { address?: string };\n\n  setCurrentTokenPeriod: { period: TokenPeriod };\n  openAddAccountModal: { forceAddingTonOnlyAccount: boolean } | undefined;\n  closeAddAccountModal: undefined;\n\n  setLandscapeActionsActiveTabIndex: { index: ActiveTab };\n  setActiveContentTab: { tab: ContentTab };\n\n  // BottomBar actions\n  switchToWallet: undefined;\n  switchToExplore: undefined;\n  switchToSettings: undefined;\n\n  requestConfetti: undefined;\n  setIsPinAccepted: undefined;\n  clearIsPinAccepted: undefined;\n\n  requestOpenQrScanner: undefined;\n  closeQrScanner: undefined;\n  handleQrCode: { data: string };\n\n  // Staking\n  startStaking: { tokenSlug: string } | undefined;\n  startUnstaking: { stakingId: string } | undefined;\n  setStakingScreen: { state: StakingState };\n  submitStakingInitial: { amount?: bigint; isUnstaking?: boolean } | undefined;\n  submitStakingPassword: { password: string; isUnstaking?: boolean };\n  submitStakingHardware: { isUnstaking?: boolean } | undefined;\n  clearStakingError: undefined;\n  cancelStaking: undefined;\n  fetchStakingHistory: undefined;\n  fetchStakingFee: { amount: bigint };\n  openStakingInfo: undefined;\n  openAnyAccountStakingInfo: { accountId: string; network: ApiNetwork; stakingId: string };\n  closeStakingInfo: undefined;\n  changeCurrentStaking: { stakingId: string; shouldReopenModal?: boolean };\n  startStakingClaim: { stakingId: string } | undefined;\n  submitStakingClaim: { password: string };\n  submitStakingClaimHardware: undefined;\n  cancelStakingClaim: undefined;\n  openStakingInfoOrStart: undefined;\n\n  // Settings\n  openSettings: undefined;\n  openSettingsWithState: { state: SettingsState };\n  setSettingsState: { state?: SettingsState };\n  closeSettings: undefined;\n  setTheme: { theme: Theme };\n  setAnimationLevel: { level: AnimationLevel };\n  toggleTinyTransfersHidden: { isEnabled?: boolean } | undefined;\n  toggleInvestorView: { isEnabled?: boolean } | undefined;\n  toggleCanPlaySounds: { isEnabled?: boolean } | undefined;\n  toggleTonProxy: { isEnabled: boolean };\n  toggleTonMagic: { isEnabled: boolean };\n  toggleDeeplinkHook: { isEnabled: boolean };\n  startChangingNetwork: { network: ApiNetwork };\n  changeNetwork: { network: ApiNetwork };\n  changeLanguage: { langCode: LangCode };\n  closeSecurityWarning: undefined;\n  toggleTokensWithNoCost: { isEnabled: boolean };\n  toggleSortByValue: { isEnabled: boolean };\n  updateOrderedSlugs: { orderedSlugs: string[] };\n  rebuildOrderedSlugs: undefined;\n  toggleTokenVisibility: { slug: string; shouldShow: boolean };\n  addToken: { token: UserToken };\n  deleteToken: { slug: string };\n  importToken: { address: string; isSwap?: boolean };\n  resetImportToken: undefined;\n  closeBiometricSettings: undefined;\n  openBiometricsTurnOn: undefined;\n  openBiometricsTurnOffWarning: undefined;\n  openBiometricsTurnOff: undefined;\n  enableBiometrics: { password: string };\n  disableBiometrics: { password: string; isPasswordNumeric?: boolean };\n  enableNativeBiometrics: { password: string };\n  disableNativeBiometrics: undefined;\n  changeBaseCurrency: { currency: ApiBaseCurrency };\n  clearNativeBiometricsError: undefined;\n  copyStorageData: undefined;\n  setAppLockValue: { value?: AutolockValueType; isEnabled: boolean };\n  setIsManualLockActive: { isActive?: boolean; shouldHideBiometrics?: boolean };\n  setIsAutoConfirmEnabled: { isEnabled: boolean };\n  setIsAllowSuspiciousActions: { isEnabled: boolean };\n  setInMemoryPassword: { password?: string; isFinalCall?: boolean; force?: boolean };\n  openSettingsHardwareWallet: undefined;\n  apiUpdateWalletVersions: ApiUpdateWalletVersions;\n\n  // Account Settings\n  setCardBackgroundNft: { nft: ApiNft };\n  clearCardBackgroundNft: undefined;\n  checkCardNftOwnership: undefined;\n  installAccentColorFromNft: { nft: ApiNft };\n  clearAccentColorFromNft: undefined;\n\n  // TON Connect common\n  apiUpdateDappLoading: ApiUpdateDappLoading;\n  apiUpdateDappCloseLoading: ApiUpdateDappCloseLoading;\n\n  // TON Connect connection\n  submitDappConnectRequestConfirm: { accountId: string; password?: string };\n  submitDappConnectRequestConfirmHardware: { accountId: string };\n  submitDappConnectHardware: { accountId: string; signature: string };\n  clearDappConnectRequestError: undefined;\n  cancelDappConnectRequestConfirm: undefined;\n  setDappConnectRequestState: { state: DappConnectState };\n  apiUpdateDappConnect: ApiUpdateDappConnect;\n\n  // TON Connect transfer\n  setDappTransferScreen: { state: TransferState };\n  showDappTransferTransaction: { transactionIdx: number };\n  submitDappTransferConfirm: undefined;\n  submitDappTransferPassword: { password: string };\n  submitDappTransferHardware: undefined;\n  submitDappTransferHardware2: { signedMessages: ApiSignedTransfer[] };\n  clearDappTransferError: undefined;\n  cancelDappTransfer: undefined;\n  closeDappTransfer: undefined;\n  apiUpdateDappSendTransaction: ApiUpdateDappSendTransactions;\n\n  // TON Connect SignData\n  setDappSignDataScreen: { state: SignDataState };\n  submitDappSignDataConfirm: undefined;\n  submitDappSignDataPassword: { password: string };\n  clearDappSignDataError: undefined;\n  cancelDappSignData: undefined;\n  closeDappSignData: undefined;\n  apiUpdateDappSignData: ApiUpdateDappSignData;\n\n  getDapps: undefined;\n  deleteAllDapps: undefined;\n  deleteDapp: { url: string; uniqueId: string };\n  loadExploreSites: { isLandscape: boolean };\n  updateDappLastOpenedAt: { url: string };\n\n  addSiteToBrowserHistory: { url: string };\n  removeSiteFromBrowserHistory: { url: string };\n  openBrowser: { url: string; title?: string; subtitle?: string; keepNBSOpen?: boolean };\n  closeBrowser: undefined;\n  openSiteCategory: { id: number };\n  closeSiteCategory: undefined;\n  switchAccountAndOpenUrl: {\n    accountId?: string;\n    network?: ApiNetwork;\n    url: string;\n    isExternal?: boolean;\n    title?: string;\n    subtitle?: string;\n  };\n\n  // Swap\n  submitSwap: { password: string };\n  startSwap: {\n    state?: SwapState;\n    tokenInSlug?: string;\n    tokenOutSlug?: string;\n    amountIn?: string;\n    toAddress?: string;\n  } | undefined;\n  cancelSwap: { shouldReset?: boolean } | undefined;\n  setDefaultSwapParams: { tokenInSlug?: string; tokenOutSlug?: string; withResetAmount?: boolean } | undefined;\n  switchSwapTokens: undefined;\n  setSwapTokenIn: { tokenSlug: string };\n  setSwapTokenOut: { tokenSlug: string };\n  setSwapAmountIn: { amount?: string; isMaxAmount?: boolean };\n  setSwapAmountOut: { amount?: string };\n  setSlippage: { slippage: number };\n  estimateSwap: undefined;\n  setSwapScreen: { state: SwapState };\n  clearSwapError: undefined;\n  submitSwapCex: { password: string };\n  setSwapCexAddress: { toAddress: string };\n  addSwapToken: { token: UserSwapToken };\n  toggleSwapSettingsModal: { isOpen: boolean };\n  updatePendingSwaps: undefined;\n  setSwapDex: { dexLabel: ApiSwapDexLabel };\n\n  openOnRampWidgetModal: { chain: ApiChain };\n  closeOnRampWidgetModal: undefined;\n\n  // MediaViewer\n  openMediaViewer: {\n    mediaId: string;\n    mediaType: MediaType;\n    txId?: string;\n    hiddenNfts?: 'user' | 'scam';\n    noGhostAnimation?: boolean;\n  };\n  closeMediaViewer: undefined;\n\n  openReceiveModal: { chain: ApiChain } | undefined;\n  closeReceiveModal: undefined;\n  setReceiveActiveTab: { chain: ApiChain };\n  openInvoiceModal: { tokenSlug: string } | undefined;\n  changeInvoiceToken: { tokenSlug: string };\n  closeInvoiceModal: undefined;\n\n  loadPriceHistory: { slug: string; period: ApiPriceHistoryPeriod; currency?: ApiBaseCurrency };\n\n  showIncorrectTimeError: undefined;\n\n  openLoadingOverlay: undefined;\n  closeLoadingOverlay: undefined;\n\n  loadMycoin: undefined;\n  openVestingModal: undefined;\n  closeVestingModal: undefined;\n  startClaimingVesting: undefined;\n  submitClaimingVesting: { password: string };\n  submitClaimingVestingHardware: undefined;\n  clearVestingError: undefined;\n  cancelClaimingVesting: undefined;\n\n  openMintCardModal: undefined;\n  closeMintCardModal: undefined;\n  startCardMinting: { type: ApiMtwCardType };\n  submitMintCard: { password: string };\n  submitMintCardHardware: undefined;\n  clearMintCardError: undefined;\n\n  submitAppLockActivityEvent: undefined;\n\n  toggleNotifications: { isEnabled: boolean };\n  renameNotificationAccount: { accountId: string };\n  toggleNotificationAccount: { accountId: string };\n  createNotificationAccount: { accountId: string; withAbort?: boolean };\n  tryAddNotificationAccount: { accountId: string };\n  deleteNotificationAccount: { accountId: string; withAbort?: boolean };\n  deleteAllNotificationAccounts: undefined | { accountIds: string[] };\n  registerNotifications: { userToken: string; platform: CapacitorPlatform };\n\n  openFullscreen: undefined;\n  closeFullscreen: undefined;\n  setAppLayout: { layout: AppLayout };\n\n  setIsSensitiveDataHidden: { isHidden: boolean };\n\n  openDomainRenewalModal: { accountId?: string; network?: ApiNetwork; addresses: string[] };\n  startDomainsRenewal: undefined;\n  checkDomainsRenewalDraft: { nfts: ApiNft[] };\n  submitDomainsRenewal: { password: string };\n  submitDomainsRenewalHardware: undefined;\n  clearDomainsRenewalError: undefined;\n  cancelDomainsRenewal: undefined;\n\n  openDomainLinkingModal: { address: string };\n  startDomainLinking: undefined;\n  checkDomainLinkingDraft: { nft: ApiNft };\n  submitDomainLinking: { password: string };\n  submitDomainLinkingHardware: undefined;\n  clearDomainLinkingError: undefined;\n  cancelDomainLinking: undefined;\n\n  checkLinkingAddress: { address?: string };\n  setDomainLinkingWalletAddress: { address?: string };\n  setIsAppLockActive: { isActive: boolean };\n}\n\nexport enum LoadMoreDirection {\n  Forwards,\n  Backwards,\n}\n\nexport type AutolockValueType = (typeof AUTOLOCK_OPTIONS_LIST[number])['value'];\n","import type { ApiChain } from '../api/types';\n\nimport { CHAIN_CONFIG } from '../config';\n\nexport function getChainConfig<T extends ApiChain>(chain: T) {\n  return CHAIN_CONFIG[chain];\n}\n\nexport function findChainConfig(chain: any) {\n  return chain in CHAIN_CONFIG ? CHAIN_CONFIG[chain as ApiChain] : undefined;\n}\n","import type { ApiChain, ApiToken, ApiTokenWithPrice } from '../api/types';\nimport type { UserToken } from '../global/types';\n\nimport { CHAIN_CONFIG, PRICELESS_TOKEN_HASHES, STAKED_TOKEN_SLUGS, TONCOIN } from '../config';\nimport { getChainConfig } from './chain';\nimport { pick } from './iteratees';\n\nconst chainByNativeSlug = Object.fromEntries(\n  Object.entries(CHAIN_CONFIG).map(([chain, { nativeToken }]) => [nativeToken.slug, chain]),\n) as Record<string, ApiChain>;\n\nexport function getIsNativeToken(slug?: string) {\n  return slug ? slug in chainByNativeSlug : false;\n}\n\nexport function getIsTonToken(slug: string, withNative?: boolean) {\n  return Boolean(slug.startsWith('ton-') || (withNative && slug === TONCOIN.slug));\n}\n\nexport function getNativeToken(chain: ApiChain): ApiToken {\n  return getChainConfig(chain).nativeToken;\n}\n\nexport function getChainBySlug(slug: string) {\n  const items = slug.split('-');\n  return items.length > 1 ? items[0] as ApiChain : chainByNativeSlug[slug];\n}\n\nexport function getIsServiceToken(token?: ApiToken) {\n  const { type, codeHash = '', slug = '' } = token ?? {};\n\n  return type === 'lp_token'\n    || STAKED_TOKEN_SLUGS.has(slug)\n    || PRICELESS_TOKEN_HASHES.has(codeHash);\n}\n\nexport function buildUserToken(token: ApiTokenWithPrice | ApiToken): UserToken {\n  return {\n    ...pick(token, [\n      'symbol',\n      'slug',\n      'name',\n      'image',\n      'decimals',\n      'keywords',\n      'chain',\n      'tokenAddress',\n      'type',\n    ]),\n    amount: 0n,\n    totalValue: '0',\n    price: 0,\n    priceUsd: 0,\n    change24h: 0,\n  };\n}\n","import type { ApiBalanceBySlug, ApiSwapAsset } from '../../api/types';\nimport type { AccountSettings, GlobalState, UserSwapToken } from '../types';\nimport { SwapType } from '../types';\n\nimport { DEFAULT_SWAP_FIRST_TOKEN_SLUG, DEFAULT_SWAP_SECOND_TOKEN_SLUG, IS_CORE_WALLET } from '../../config';\nimport { toBig } from '../../util/decimals';\nimport memoize from '../../util/memoize';\nimport { getChainBySlug } from '../../util/tokens';\nimport withCache from '../../util/withCache';\nimport {\n  selectCurrentAccount,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsHardwareAccount,\n} from './accounts';\nimport { selectAccountTokensMemoizedFor } from './tokens';\n\nfunction createTokenList(\n  swapTokenInfo: GlobalState['swapTokenInfo'],\n  balancesBySlug: ApiBalanceBySlug,\n  sortFn: (tokenA: ApiSwapAsset, tokenB: ApiSwapAsset) => number,\n  filterFn?: (token: ApiSwapAsset) => boolean,\n): UserSwapToken[] {\n  return Object.entries(swapTokenInfo.bySlug)\n    .filter(([, token]) => !filterFn || filterFn(token))\n    .map(([slug, {\n      symbol, name, image,\n      decimals, keywords, chain,\n      tokenAddress, isPopular, color, price = 0, priceUsd = 0,\n    }]) => {\n      const amount = balancesBySlug[slug] ?? 0n;\n      const totalValue = toBig(amount, decimals).mul(price).toString();\n\n      return {\n        symbol,\n        slug,\n        amount,\n        price,\n        priceUsd,\n        name,\n        image,\n        decimals,\n        isDisabled: false,\n        canSwap: true,\n        isPopular,\n        keywords,\n        totalValue,\n        color,\n        chain,\n        tokenAddress,\n      } satisfies UserSwapToken;\n    })\n    .sort(sortFn);\n}\n\nconst selectPopularTokensMemoizedFor = withCache((accountId: string) => memoize(\n  (balancesBySlug: ApiBalanceBySlug, swapTokenInfo: GlobalState['swapTokenInfo']) => {\n    const popularTokenOrder = [\n      'TON',\n      'USD',\n      'USDT',\n      'BTC',\n      'ETH',\n      'jUSDT',\n      'jWBTC',\n    ];\n    const orderMap = new Map(popularTokenOrder.map((item, index) => [item, index]));\n\n    const filterFn = (token: ApiSwapAsset) => token.isPopular;\n    const sortFn = (tokenA: ApiSwapAsset, tokenB: ApiSwapAsset) => {\n      const orderIndexA = orderMap.has(tokenA.symbol) ? orderMap.get(tokenA.symbol)! : popularTokenOrder.length;\n      const orderIndexB = orderMap.has(tokenB.symbol) ? orderMap.get(tokenB.symbol)! : popularTokenOrder.length;\n\n      return orderIndexA - orderIndexB;\n    };\n    return createTokenList(swapTokenInfo, balancesBySlug, sortFn, filterFn);\n  },\n));\n\nconst selectSwapTokensMemoizedFor = withCache((accountId: string) => memoize(\n  (balancesBySlug: ApiBalanceBySlug, swapTokenInfo: GlobalState['swapTokenInfo']) => {\n    const sortFn = (tokenA: ApiSwapAsset, tokenB: ApiSwapAsset) => (\n      tokenA.name.trim().toLowerCase().localeCompare(tokenB.name.trim().toLowerCase())\n    );\n    return createTokenList(swapTokenInfo, balancesBySlug, sortFn);\n  },\n));\n\nconst selectAccountTokensForSwapMemoizedFor = withCache((accountId: string) => memoize((\n  balancesBySlug: ApiBalanceBySlug,\n  tokenInfo: GlobalState['tokenInfo'],\n  swapTokenInfo: GlobalState['swapTokenInfo'],\n  accountSettings: AccountSettings,\n  isSortByValueEnabled = false,\n  areTokensWithNoCostHidden = false,\n) => {\n  return selectAccountTokensMemoizedFor(accountId)(\n    balancesBySlug,\n    tokenInfo,\n    accountSettings,\n    isSortByValueEnabled,\n    areTokensWithNoCostHidden,\n  ).filter((token) => token.slug in swapTokenInfo.bySlug && !token.isDisabled);\n}));\n\nexport function selectAvailableUserForSwapTokens(global: GlobalState) {\n  const balancesBySlug = selectCurrentAccountState(global)?.balances?.bySlug;\n  if (!balancesBySlug || !global.tokenInfo || !global.swapTokenInfo) {\n    return undefined;\n  }\n\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  const { areTokensWithNoCostHidden, isSortByValueEnabled } = global.settings;\n\n  return selectAccountTokensForSwapMemoizedFor(global.currentAccountId!)(\n    balancesBySlug,\n    global.tokenInfo,\n    global.swapTokenInfo,\n    accountSettings,\n    isSortByValueEnabled,\n    areTokensWithNoCostHidden,\n  );\n}\n\nexport function selectPopularTokens(global: GlobalState) {\n  const balancesBySlug = selectCurrentAccountState(global)?.balances?.bySlug;\n  if (!balancesBySlug || !global.swapTokenInfo) {\n    return undefined;\n  }\n\n  return selectPopularTokensMemoizedFor(global.currentAccountId!)(balancesBySlug, global.swapTokenInfo);\n}\n\nexport function selectSwapTokens(global: GlobalState) {\n  const balancesBySlug = selectCurrentAccountState(global)?.balances?.bySlug;\n  if (!balancesBySlug || !global.swapTokenInfo) {\n    return undefined;\n  }\n\n  return selectSwapTokensMemoizedFor(global.currentAccountId!)(\n    balancesBySlug,\n    global.swapTokenInfo,\n  );\n}\n\nexport function selectCurrentSwapTokenIn(global: GlobalState) {\n  const { tokenInSlug } = global.currentSwap;\n  return tokenInSlug === undefined ? undefined : global.swapTokenInfo.bySlug[tokenInSlug];\n}\n\nexport function selectCurrentSwapTokenOut(global: GlobalState) {\n  const { tokenOutSlug } = global.currentSwap;\n  return tokenOutSlug === undefined ? undefined : global.swapTokenInfo.bySlug[tokenOutSlug];\n}\n\nexport function selectSwapType(global: GlobalState) {\n  const {\n    tokenInSlug = DEFAULT_SWAP_FIRST_TOKEN_SLUG,\n    tokenOutSlug = DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  } = global.currentSwap;\n  const tokenInChain = getChainBySlug(tokenInSlug);\n  const tokenOutChain = getChainBySlug(tokenOutSlug);\n\n  if (tokenInChain === 'ton' && tokenOutChain === 'ton') {\n    return SwapType.OnChain;\n  }\n\n  const { addressByChain } = selectCurrentAccount(global) ?? { addressByChain: {} };\n\n  if (tokenInChain in addressByChain) {\n    return SwapType.CrosschainFromWallet;\n  }\n\n  return SwapType.CrosschainToWallet;\n}\n\nexport function selectIsSwapDisabled(global: GlobalState) {\n  return IS_CORE_WALLET\n    || global.restrictions.isSwapDisabled\n    || global.settings.isTestnet\n    || selectIsHardwareAccount(global);\n}\n","import type { ApiCheckTransactionDraftResult, ApiFetchEstimateDieselResult } from '../../api/chains/ton/types';\nimport type { FeePrecision, FeeTerms } from './types';\n\nimport { TONCOIN } from '../../config';\nimport { Big } from '../../lib/big.js';\nimport { bigintMax, bigintMin } from '../bigint';\nimport { getIsNativeToken } from '../tokens';\n\ntype ApiFee = Pick<ApiCheckTransactionDraftResult, 'fee' | 'realFee' | 'diesel'> & {\n  /** The slug of the token that is being transferred */\n  tokenSlug: string;\n};\n\nexport type ExplainedTransferFee = {\n  /** Whether the result implies paying the fee with a diesel */\n  isGasless: boolean;\n  /**\n   * The fee that will be sent with the transfer. The wallet must have it on the balance to send the transfer.\n   * Show this in the transfer form when the input amount is  the balance, but the remaining balance can't cover the\n   * full fee; show `realFee` otherwise. Undefined means that it's unknown.\n   */\n  fullFee?: {\n    precision: FeePrecision;\n    terms: FeeTerms<bigint>;\n    /** The sum of `terms` measured in the native token */\n    nativeSum: bigint;\n  };\n  /**\n   * The real fee (the full fee minus the excess). Undefined means that it's unknown. There is no need to fall back to\n   * `fullFee` when `realFee` is undefined (because it's undefined too in this case).\n   */\n  realFee?: {\n    precision: FeePrecision;\n    terms: FeeTerms<bigint>;\n    /** The sum of `terms` measured in the native token */\n    nativeSum: bigint;\n  };\n  /** The excess fee. Measured in the native token. It's always approximate. Undefined means that it's unknown. */\n  excessFee?: bigint;\n  /**\n   * Whether the full token balance can be transferred despite the fee.\n   * If yes, the fee will be taken from the transferred amount.\n   */\n  canTransferFullBalance: boolean;\n};\n\ntype AvailableDiesel = ApiFetchEstimateDieselResult & { amount: bigint };\ntype ApiFeeWithDiesel = ApiFee & { diesel: AvailableDiesel };\n\ntype MaxTransferAmountInput = {\n  /** The wallet balance of the transferred token. Undefined means that it's unknown. */\n  tokenBalance: bigint | undefined;\n  /** The slug of the token that is being transferred */\n  tokenSlug: string;\n  /** The full fee terms calculated by `explainApiTransferFee`. Undefined means that they're unknown. */\n  fullFee: FeeTerms<bigint> | undefined;\n  /** Whether the full token balance can be transferred despite the fee. */\n  canTransferFullBalance: boolean;\n};\n\ntype BalanceSufficientForTransferInput = Omit<MaxTransferAmountInput, 'tokenSlug'> & {\n  /** The wallet balance of the native token of the transfer chain. Undefined means that it's unknown. */\n  nativeTokenBalance: bigint | undefined;\n  /** The transferred amount. Use 0 for NFT transfers. Undefined means that it's unspecified. */\n  transferAmount: bigint | undefined;\n};\n\n/**\n * Converts the transfer fee data returned from API into data that is ready to be displayed in the transfer form UI.\n */\nexport function explainApiTransferFee(input: ApiFee): ExplainedTransferFee {\n  return shouldUseDiesel(input)\n    ? explainGaslessTransferFee(input)\n    : explainGasfullTransferFee(input);\n}\n\n/**\n * Calculates the maximum amount available for the transfer.\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function getMaxTransferAmount({\n  tokenBalance,\n  tokenSlug,\n  fullFee,\n  canTransferFullBalance,\n}: MaxTransferAmountInput): bigint | undefined {\n  if (tokenBalance === undefined) {\n    return undefined;\n  }\n\n  // Returning the full balance when the fee is unknown for a better UX\n  if (canTransferFullBalance || !fullFee) {\n    return tokenBalance;\n  }\n\n  let fee = fullFee.token ?? 0n;\n  if (getIsNativeToken(tokenSlug)) {\n    // When the token is native, both `token` and `native` refer to the same currency, so they should be added\n    fee += fullFee.native ?? 0n;\n  }\n\n  return bigintMax(tokenBalance - fee, 0n);\n}\n\n/**\n * Decides whether the balance is sufficient to transfer the amount and pay the fees.\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function isBalanceSufficientForTransfer({\n  tokenBalance,\n  nativeTokenBalance,\n  transferAmount,\n  fullFee,\n  canTransferFullBalance,\n}: BalanceSufficientForTransferInput) {\n  if (transferAmount === undefined || tokenBalance === undefined || nativeTokenBalance === undefined || !fullFee) {\n    return undefined;\n  }\n\n  const isFullTokenTransfer = transferAmount === tokenBalance && canTransferFullBalance;\n  const tokenRequiredAmount = (fullFee.token ?? 0n) + (isFullTokenTransfer ? 0n : transferAmount);\n  const nativeTokenRequiredAmount = fullFee.native ?? 0n;\n\n  return tokenRequiredAmount <= tokenBalance && nativeTokenRequiredAmount <= nativeTokenBalance;\n}\n\nexport function isDieselAvailable(diesel: ApiFetchEstimateDieselResult): diesel is AvailableDiesel {\n  return diesel.status !== 'not-available' && diesel.amount !== undefined;\n}\n\nexport function getDieselTokenAmount(diesel: ApiFetchEstimateDieselResult) {\n  return diesel.status === 'stars-fee' ? 0n : (diesel.amount ?? 0n);\n}\n\nfunction shouldUseDiesel(input: ApiFee): input is ApiFeeWithDiesel {\n  return input.diesel !== undefined && isDieselAvailable(input.diesel);\n}\n\n/**\n * Converts the data of a transfer not involving diesel\n */\nfunction explainGasfullTransferFee(input: ApiFee) {\n  const result: ExplainedTransferFee = {\n    isGasless: false,\n    canTransferFullBalance: input.tokenSlug === TONCOIN.slug,\n  };\n\n  if (input.fee !== undefined) {\n    result.fullFee = {\n      precision: input.realFee === input.fee ? 'exact' : 'lessThan',\n      terms: { native: input.fee },\n      nativeSum: input.fee,\n    };\n    result.realFee = result.fullFee;\n  }\n\n  if (input.realFee !== undefined) {\n    result.realFee = {\n      precision: input.realFee === input.fee ? 'exact' : 'approximate',\n      terms: { native: input.realFee },\n      nativeSum: input.realFee,\n    };\n  }\n\n  if (input.fee !== undefined && input.realFee !== undefined) {\n    result.excessFee = input.fee - input.realFee;\n  }\n\n  return result;\n}\n\n/**\n * Converts the diesel of semi-diesel transfer data\n */\nfunction explainGaslessTransferFee({ diesel }: ApiFeeWithDiesel) {\n  const isStarsDiesel = diesel.status === 'stars-fee';\n  const dieselKey = isStarsDiesel ? 'stars' : 'token';\n  const realFeeInDiesel = convertFee(diesel.realFee, diesel.nativeAmount, diesel.amount);\n  // Cover as much displayed real fee as possible with diesel, because in the excess it will return as the native token.\n  const dieselRealFee = bigintMin(diesel.amount, realFeeInDiesel);\n  // Cover the remaining real fee with the native token.\n  const nativeRealFee = bigintMax(0n, diesel.realFee - diesel.nativeAmount);\n\n  return {\n    isGasless: true,\n    canTransferFullBalance: false,\n    fullFee: {\n      precision: 'lessThan',\n      terms: {\n        [dieselKey]: diesel.amount,\n        native: diesel.remainingFee,\n      },\n      nativeSum: diesel.nativeAmount + diesel.remainingFee,\n    },\n    realFee: {\n      precision: 'approximate',\n      terms: {\n        [dieselKey]: dieselRealFee,\n        native: nativeRealFee,\n      },\n      nativeSum: diesel.realFee,\n    },\n    excessFee: diesel.nativeAmount + diesel.remainingFee - diesel.realFee,\n  } satisfies ExplainedTransferFee;\n}\n\n/**\n * `exampleFromAmount` and `exampleToAmount` define the exchange rate used to convert `amount`.\n * `exampleFromAmount` is defined in the same currency as `amount`. Mustn't be 0.\n * `exampleToAmount` is defined in the currency you want to get.\n */\nfunction convertFee(\n  amount: bigint,\n  exampleFromAmount: bigint,\n  exampleToAmount: bigint,\n) {\n  const exchangeRate = Big(exampleToAmount.toString()).div(exampleFromAmount.toString());\n  return BigInt(Big(amount.toString()).mul(exchangeRate).round().toString());\n}\n","import type { ApiChain } from '../api/types';\n\nimport { getChainConfig } from './chain';\nimport { isDnsDomain } from './dns';\n\nexport function isValidAddressOrDomain(address: string, chain: ApiChain, allowPrefix?: boolean) {\n  const config = getChainConfig(chain);\n  return address && (\n    config[allowPrefix ? 'addressPrefixRegex' : 'addressRegex'].test(address)\n    || (config.isDnsSupported && isDnsDomain(address))\n  );\n}\n","import type { GlobalState } from '../types';\n\nimport { explainApiTransferFee, getMaxTransferAmount } from '../../util/fee/transferFee';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { getChainBySlug } from '../../util/tokens';\nimport { selectCurrentAccount } from './accounts';\nimport { selectChainTokenWithMaxBalanceSlow, selectCurrentAccountTokenBalance } from './tokens';\n\nexport function selectCurrentTransferMaxAmount(global: GlobalState) {\n  const { currentTransfer } = global;\n  const tokenBalance = selectCurrentAccountTokenBalance(global, currentTransfer.tokenSlug);\n  const { fullFee, canTransferFullBalance } = explainApiTransferFee(currentTransfer);\n  return getMaxTransferAmount({\n    tokenBalance,\n    tokenSlug: currentTransfer.tokenSlug,\n    fullFee: fullFee?.terms,\n    canTransferFullBalance,\n  });\n}\n\n/**\n * Returns the token slug that should be set to current transfer form to keep the token in sync with the \"to\" address\n */\nexport function selectTokenMatchingCurrentTransferAddressSlow(global: GlobalState): string {\n  const { tokenSlug: currentTokenSlug, toAddress } = global.currentTransfer;\n  const currentChain = getChainBySlug(currentTokenSlug);\n\n  if (!toAddress) {\n    return currentTokenSlug;\n  }\n\n  // First try to match a chain by the full address, then by the prefix.\n  // Because a valid TRON address is a prefix of a valid TON address, and we want to match TRON in this case.\n  for (const isCheckingPrefix of [false, true]) {\n    // If the current token already matches the address, no need to change it\n    if (!toAddress || isValidAddressOrDomain(toAddress, currentChain, isCheckingPrefix)) {\n      return currentTokenSlug;\n    }\n\n    // Otherwise, find the best token of the address's chain\n    const availableChains = selectCurrentAccount(global)?.addressByChain;\n    if (availableChains) {\n      for (const chain of Object.keys(availableChains) as Array<keyof typeof availableChains>) {\n        if (!isValidAddressOrDomain(toAddress, chain, isCheckingPrefix)) {\n          continue;\n        }\n\n        const token = selectChainTokenWithMaxBalanceSlow(global, chain);\n        if (token) return token.slug;\n      }\n    }\n  }\n\n  // If the address matches no available chain, don't change the selected token\n  return currentTokenSlug;\n}\n","import type { ApiStakingState } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { DEFAULT_NOMINATORS_STAKING_STATE, IS_STAKING_DISABLED, TONCOIN } from '../../config';\nimport { buildCollectionByKey } from '../../util/iteratees';\nimport memoize from '../../util/memoize';\nimport withCache from '../../util/withCache';\nimport { selectAccountState } from './accounts';\n\nconst selectAccountStakingStatesMemoizedFor = withCache((accountId: string) => memoize((\n  stateDefault: ApiStakingState,\n  stateById?: Record<string, ApiStakingState>,\n) => {\n  const states = stateById ? Object.values(stateById) : undefined;\n  return states?.length ? states : [stateDefault];\n}));\n\nexport function selectAccountStakingStates(global: GlobalState, accountId: string) {\n  const { stateById } = selectAccountState(global, accountId)?.staking ?? {};\n  return selectAccountStakingStatesMemoizedFor(accountId)(global.stakingDefault, stateById);\n}\n\nconst selectAccountStakingStatesBySlugMemoizedFor = withCache((accountId: string) => memoize(\n  (stakingStates: ApiStakingState[]) => buildCollectionByKey(stakingStates, 'tokenSlug'),\n));\n\nexport function selectAccountStakingStatesBySlug(global: GlobalState, accountId: string) {\n  return selectAccountStakingStatesBySlugMemoizedFor(accountId)(selectAccountStakingStates(global, accountId));\n}\n\nexport function selectAccountStakingState(global: GlobalState, accountId: string): ApiStakingState {\n  const { stateById, stakingId, shouldUseNominators } = selectAccountState(global, accountId)?.staking ?? {};\n\n  if (!stateById || !stakingId || !(stakingId in stateById)) {\n    return shouldUseNominators ? DEFAULT_NOMINATORS_STAKING_STATE : global.stakingDefault;\n  }\n\n  return stateById[stakingId];\n}\n\nexport function selectAccountStakingHistory(global: GlobalState, accountId: string) {\n  const accountState = selectAccountState(global, accountId);\n  const stakingState = selectAccountStakingState(global, accountId);\n  return stakingState.tokenSlug === TONCOIN.slug ? accountState?.stakingHistory : undefined;\n}\n\nexport function selectAccountStakingTotalProfit(global: GlobalState, accountId: string) {\n  const accountState = selectAccountState(global, accountId);\n  const stakingState = selectAccountStakingState(global, accountId);\n  return (stakingState.tokenSlug === TONCOIN.slug ? accountState?.staking?.totalProfit : undefined) ?? 0n;\n}\n\nexport function selectIsStakingDisabled(global: GlobalState) {\n  return Boolean(IS_STAKING_DISABLED || global.settings.isTestnet);\n}\n","import type { ApiNft } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { isTonDnsNft } from '../../util/dns';\nimport { selectCurrentAccountState } from './accounts';\n\nexport function selectTonDnsLinkedAddress(global: GlobalState, nft: ApiNft | undefined) {\n  const { linkedAddressByAddress } = selectCurrentAccountState(global)?.nfts || {};\n\n  return isTonDnsNft(nft) ? linkedAddressByAddress?.[nft.address] : undefined;\n}\n","import { DEFAULT_PRICE_CURRENCY, IS_EXTENSION } from '../../../config';\nimport { logDebug } from '../../../util/logs';\nimport {\n  IS_ANDROID_APP, IS_DELEGATED_BOTTOM_SHEET, IS_ELECTRON, IS_IOS_APP,\n} from '../../../util/windowEnvironment';\nimport { callApi, initApi } from '../../../api';\nimport { addActionHandler, getGlobal } from '../../index';\nimport { selectNewestActivityTimestamps } from '../../selectors';\n\naddActionHandler('initApi', async (global, actions) => {\n  logDebug('initApi action called');\n  const accountIds = global.accounts?.byId ? Object.keys(global.accounts.byId) : [];\n  initApi(actions.apiUpdate, {\n    isElectron: IS_ELECTRON,\n    isNativeBottomSheet: IS_DELEGATED_BOTTOM_SHEET,\n    isIosApp: IS_IOS_APP,\n    isAndroidApp: IS_ANDROID_APP,\n    referrer: new URLSearchParams(window.location.search).get('r') ?? undefined,\n    accountIds,\n  });\n\n  await callApi('waitDataPreload');\n\n  const { currentAccountId } = getGlobal();\n\n  if (!currentAccountId) {\n    return;\n  }\n\n  const newestActivityTimestamps = selectNewestActivityTimestamps(global, currentAccountId);\n\n  void callApi('activateAccount', currentAccountId, newestActivityTimestamps);\n});\n\naddActionHandler('resetApiSettings', (global, actions, params) => {\n  const isDefaultEnabled = !params?.areAllDisabled;\n\n  if (IS_EXTENSION) {\n    actions.toggleTonMagic({ isEnabled: false });\n    actions.toggleTonProxy({ isEnabled: false });\n  }\n  if (IS_EXTENSION || IS_ELECTRON) {\n    actions.toggleDeeplinkHook({ isEnabled: isDefaultEnabled });\n  }\n  actions.changeBaseCurrency({ currency: DEFAULT_PRICE_CURRENCY });\n});\n","export var BiometryType;\n(function (BiometryType) {\n    // Android, iOS\n    BiometryType[BiometryType[\"NONE\"] = 0] = \"NONE\";\n    // iOS\n    BiometryType[BiometryType[\"TOUCH_ID\"] = 1] = \"TOUCH_ID\";\n    // iOS\n    BiometryType[BiometryType[\"FACE_ID\"] = 2] = \"FACE_ID\";\n    // Android\n    BiometryType[BiometryType[\"FINGERPRINT\"] = 3] = \"FINGERPRINT\";\n    // Android\n    BiometryType[BiometryType[\"FACE_AUTHENTICATION\"] = 4] = \"FACE_AUTHENTICATION\";\n    // Android\n    BiometryType[BiometryType[\"IRIS_AUTHENTICATION\"] = 5] = \"IRIS_AUTHENTICATION\";\n    // Android\n    BiometryType[BiometryType[\"MULTIPLE\"] = 6] = \"MULTIPLE\";\n})(BiometryType || (BiometryType = {}));\n/**\n * Keep this in sync with BiometricAuthError in README.md\n * Update whenever `convertToPluginErrorCode` functions are modified\n */\nexport var BiometricAuthError;\n(function (BiometricAuthError) {\n    BiometricAuthError[BiometricAuthError[\"UNKNOWN_ERROR\"] = 0] = \"UNKNOWN_ERROR\";\n    BiometricAuthError[BiometricAuthError[\"BIOMETRICS_UNAVAILABLE\"] = 1] = \"BIOMETRICS_UNAVAILABLE\";\n    BiometricAuthError[BiometricAuthError[\"USER_LOCKOUT\"] = 2] = \"USER_LOCKOUT\";\n    BiometricAuthError[BiometricAuthError[\"BIOMETRICS_NOT_ENROLLED\"] = 3] = \"BIOMETRICS_NOT_ENROLLED\";\n    BiometricAuthError[BiometricAuthError[\"USER_TEMPORARY_LOCKOUT\"] = 4] = \"USER_TEMPORARY_LOCKOUT\";\n    BiometricAuthError[BiometricAuthError[\"AUTHENTICATION_FAILED\"] = 10] = \"AUTHENTICATION_FAILED\";\n    BiometricAuthError[BiometricAuthError[\"APP_CANCEL\"] = 11] = \"APP_CANCEL\";\n    BiometricAuthError[BiometricAuthError[\"INVALID_CONTEXT\"] = 12] = \"INVALID_CONTEXT\";\n    BiometricAuthError[BiometricAuthError[\"NOT_INTERACTIVE\"] = 13] = \"NOT_INTERACTIVE\";\n    BiometricAuthError[BiometricAuthError[\"PASSCODE_NOT_SET\"] = 14] = \"PASSCODE_NOT_SET\";\n    BiometricAuthError[BiometricAuthError[\"SYSTEM_CANCEL\"] = 15] = \"SYSTEM_CANCEL\";\n    BiometricAuthError[BiometricAuthError[\"USER_CANCEL\"] = 16] = \"USER_CANCEL\";\n    BiometricAuthError[BiometricAuthError[\"USER_FALLBACK\"] = 17] = \"USER_FALLBACK\";\n})(BiometricAuthError || (BiometricAuthError = {}));\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from \"@capacitor/core\";\nconst NativeBiometric = registerPlugin(\"NativeBiometric\", {\n    web: () => import(\"./web\").then((m) => new m.NativeBiometricWeb()),\n});\nexport * from \"./definitions\";\nexport { NativeBiometric };\n//# sourceMappingURL=index.js.map","import { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { requestMeasure, requestMutation } from '../lib/fasterdom/fasterdom';\nimport { applyStyles } from './animation';\nimport { SECOND } from './dateFormat';\nimport safeExec from './safeExec';\nimport { throttle } from './schedulers';\nimport { IS_ANDROID, IS_IOS } from './windowEnvironment';\n\nconst WINDOW_RESIZE_THROTTLE_MS = IS_TELEGRAM_APP ? 25 : 250;\nconst WINDOW_ORIENTATION_CHANGE_THROTTLE_MS = IS_IOS ? 350 : 250;\nconst SAFE_AREA_INITIALIZATION_DELAY = SECOND;\nconst SAFE_AREA_TOLERANCE_HEIGHT_PX = 40;\n\nconst initialHeight = window.innerHeight;\nconst virtualKeyboardOpenListeners: NoneToVoidFunction[] = [];\n\nlet currentWindowSize = updateSizes();\n\nwindow.addEventListener('orientationchange', throttle(() => {\n  currentWindowSize = updateSizes();\n}, WINDOW_ORIENTATION_CHANGE_THROTTLE_MS, false));\n\nif (!IS_IOS) {\n  window.addEventListener('resize', throttle(() => {\n    currentWindowSize = updateSizes();\n  }, WINDOW_RESIZE_THROTTLE_MS, true));\n}\n\nif (IS_CAPACITOR) {\n  void import('@capacitor/keyboard')\n    .then(({ Keyboard }) => {\n      void Keyboard.addListener('keyboardDidShow', async (info) => {\n        await adjustBodyPaddingForKeyboard(info.keyboardHeight);\n\n        for (const cb of virtualKeyboardOpenListeners) {\n          safeExec(cb);\n        }\n      });\n\n      void Keyboard.addListener('keyboardWillHide', () => {\n        void adjustBodyPaddingForKeyboard(0);\n      });\n    });\n}\n\nif ('visualViewport' in window && (IS_IOS || IS_ANDROID)) {\n  window.visualViewport!.addEventListener('resize', throttle((e: Event) => {\n    const target = e.target as VisualViewport;\n\n    // In the TMA application on iOS, the VisualViewport behaves incorrectly,\n    // not taking into account the height of the virtual keyboard.\n    if (IS_IOS && IS_TELEGRAM_APP) {\n      const keyboardHeight = initialHeight - target.height;\n      void adjustBodyPaddingForKeyboard(keyboardHeight > SAFE_AREA_TOLERANCE_HEIGHT_PX ? keyboardHeight : 0)\n        .finally(() => {\n          requestMeasure(() => {\n            currentWindowSize = {\n              ...getWindowSize(),\n              height: target.height,\n            };\n          });\n        });\n    } else {\n      patchVh();\n      currentWindowSize = {\n        ...getWindowSize(),\n        height: target.height,\n      };\n    }\n  }, WINDOW_RESIZE_THROTTLE_MS, true));\n}\n\nexport function updateSizes() {\n  patchVh();\n  patchSafeAreaProperty();\n\n  return getWindowSize();\n}\n\nfunction getWindowSize() {\n  return {\n    width: window.innerWidth,\n    height: window.innerHeight,\n    screenHeight: window.screen.height,\n    safeAreaTop: getSafeAreaTop(),\n    safeAreaBottom: getSafeAreaBottom(),\n  };\n}\n\nexport default {\n  get: () => currentWindowSize,\n  getIsKeyboardVisible: () => initialHeight > currentWindowSize.height,\n};\n\n// Registers a callback that will be fired each time the virtual keyboard is opened and the <body> size is adjusted\nexport function onVirtualKeyboardOpen(cb: NoneToVoidFunction) {\n  virtualKeyboardOpenListeners.push(cb);\n}\n\nfunction patchVh() {\n  if (!(IS_IOS || IS_ANDROID) || IS_CAPACITOR || (IS_IOS && IS_TELEGRAM_APP)) return;\n\n  const height = IS_IOS ? window.visualViewport!.height + window.visualViewport!.pageTop : window.innerHeight;\n\n  requestMutation(() => {\n    const vh = height * 0.01;\n    document.documentElement.style.setProperty('--vh', `${vh}px`);\n  });\n}\n\nfunction adjustBodyPaddingForKeyboard(keyboardHeight: number) {\n  return new Promise<void>((resolve) => {\n    requestMutation(() => {\n      applyStyles(document.body, { paddingBottom: keyboardHeight ? `${keyboardHeight}px` : '' });\n      resolve();\n    });\n  });\n}\n\nfunction patchSafeAreaProperty() {\n  toggleSafeAreaClasses();\n\n  // WebKit has issues with this property on page load\n  // https://bugs.webkit.org/show_bug.cgi?id=191872\n  setTimeout(() => {\n    toggleSafeAreaClasses();\n    updateSafeAreaValues();\n  }, SAFE_AREA_INITIALIZATION_DELAY);\n}\n\nfunction getSafeAreaTop() {\n  const value = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--safe-area-top-value'), 10);\n\n  return Number.isNaN(value) ? 0 : value;\n}\n\nfunction getSafeAreaBottom() {\n  const value = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--safe-area-bottom-value'), 10);\n\n  return Number.isNaN(value) ? 0 : value;\n}\n\nfunction toggleSafeAreaClasses() {\n  const { safeAreaTop, safeAreaBottom } = getWindowSize();\n  const { documentElement } = document;\n\n  requestMutation(() => {\n    documentElement.classList.toggle('with-safe-area-top', !Number.isNaN(safeAreaTop) && safeAreaTop > 0);\n    documentElement.classList.toggle('with-safe-area-bottom', !Number.isNaN(safeAreaBottom) && safeAreaBottom > 0);\n  });\n}\n\nfunction updateSafeAreaValues() {\n  const { safeAreaTop, safeAreaBottom } = getWindowSize();\n\n  currentWindowSize = {\n    ...currentWindowSize,\n    safeAreaTop,\n    safeAreaBottom,\n  };\n}\n","import type { Telegram, WebApp } from '@twa-dev/types';\nimport { getActions } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\n\nimport { logDebugError } from '../logs';\nimport { getIsMobileTelegramApp } from '../windowEnvironment';\nimport { updateSizes } from '../windowSize';\n\ndeclare global {\n  interface Window {\n    Telegram: Telegram;\n  }\n}\n\nlet webApp: WebApp | undefined;\nlet isBiometricInited = false;\nlet isNativeBiometricAuthSupported = false;\nlet isFaceIdAvailable = false;\nlet isTouchIdAvailable = false;\nlet disableSwipeRequests = 0;\n\nexport function initTelegramApp() {\n  webApp = window.Telegram?.WebApp;\n\n  if (!webApp) {\n    logDebugError('[telegram] Can\\'t initialize Telegram Mini-App');\n\n    return;\n  }\n\n  enableTelegramMiniAppSwipeToClose();\n\n  webApp.lockOrientation();\n  webApp.SecondaryButton.setParams({ position: 'bottom' });\n  webApp.BackButton.hide();\n  webApp.SettingsButton.hide();\n  webApp.expand();\n\n  if (getIsMobileTelegramApp()) {\n    webApp.onEvent('safeAreaChanged', updateSafeAreaProperties);\n    webApp.onEvent('contentSafeAreaChanged', updateSafeAreaProperties);\n  }\n\n  webApp.onEvent('viewportChanged', updateViewport);\n  updateSafeAreaProperties();\n  initTelegramAppBiometric();\n\n  webApp.ready();\n}\n\nexport function initTelegramWithGlobal(global: GlobalState) {\n  if (global.isFullscreen) {\n    webApp!.requestFullscreen();\n  }\n\n  webApp!.onEvent('fullscreenChanged', updateFullscreenState);\n  webApp!.onEvent('fullscreenFailed', onFullscreenFailed);\n}\n\nexport function initTelegramAppBiometric() {\n  const biometricManager = webApp?.BiometricManager;\n  if (!biometricManager || isBiometricInited) return;\n\n  isBiometricInited = true;\n  biometricManager.init(() => {\n    const {\n      isBiometricAvailable, biometricType, isAccessGranted, isAccessRequested,\n    } = biometricManager;\n\n    isNativeBiometricAuthSupported = isBiometricAvailable && (isAccessGranted || !isAccessRequested);\n    if (webApp!.platform === 'ios') {\n      isFaceIdAvailable = biometricType === 'face';\n      isTouchIdAvailable = biometricType === 'finger';\n    }\n  });\n}\n\nexport function getIsTelegramBiometricAuthSupported() {\n  return isNativeBiometricAuthSupported;\n}\n\nexport function getIsTelegramFaceIdAvailable() {\n  return isFaceIdAvailable;\n}\n\nexport function getIsTelegramTouchIdAvailable() {\n  return isTouchIdAvailable;\n}\n\nexport function getIsTelegramBiometricsRestricted() {\n  const biometricManager = webApp?.BiometricManager;\n  if (!biometricManager) return undefined;\n\n  const { isBiometricAvailable, isAccessGranted, isAccessRequested } = biometricManager;\n\n  return isBiometricAvailable && isAccessRequested && !isAccessGranted;\n}\n\nexport function getTelegramApp() {\n  return webApp;\n}\n\nexport function getTelegramAppAsync(): Promise<WebApp | undefined> {\n  return new Promise((resolve) => {\n    window.addEventListener('DOMContentLoaded', () => {\n      resolve(getTelegramApp());\n    });\n  });\n}\n\nfunction updateViewport({ isStateStable }: { isStateStable: boolean }) {\n  if (isStateStable) {\n    updateSizes();\n  }\n}\n\nfunction updateSafeAreaProperties() {\n  const {\n    top, left, right, bottom,\n  } = webApp!.safeAreaInset;\n  const {\n    top: contentTop, left: contentLeft, right: contentRight, bottom: contentBottom,\n  } = webApp!.contentSafeAreaInset;\n\n  document.documentElement.style.setProperty('--safe-area-top', `${top + contentTop}px`);\n  document.documentElement.style.setProperty('--safe-area-left', `${left + contentLeft}px`);\n  document.documentElement.style.setProperty('--safe-area-right', `${right + contentRight}px`);\n  document.documentElement.style.setProperty('--safe-area-bottom', `${bottom + contentBottom}px`);\n}\n\nfunction updateFullscreenState() {\n  if (webApp!.isFullscreen) {\n    getActions().openFullscreen();\n    disableTelegramMiniAppSwipeToClose();\n  } else {\n    getActions().closeFullscreen();\n    enableTelegramMiniAppSwipeToClose();\n  }\n}\n\nfunction onFullscreenFailed(params: { error: 'UNSUPPORTED' | 'ALREADY_FULLSCREEN' }) {\n  enableTelegramMiniAppSwipeToClose();\n  // This error occurs when the user has requested fullscreen, but the application is already open fullscreen.\n  // In this case, we just mark in the global that the application is running in fullscreen mode.\n  if (params.error === 'ALREADY_FULLSCREEN') {\n    getActions().openFullscreen();\n    disableTelegramMiniAppSwipeToClose();\n  }\n}\n\nexport function disableTelegramMiniAppSwipeToClose() {\n  disableSwipeRequests += 1;\n\n  if (disableSwipeRequests === 1) {\n    webApp?.disableVerticalSwipes();\n  }\n}\n\nexport function enableTelegramMiniAppSwipeToClose() {\n  disableSwipeRequests = Math.max(0, disableSwipeRequests - 1);\n\n  if (disableSwipeRequests === 0) {\n    webApp?.enableVerticalSwipes();\n  }\n}\n","import type { BiometricRequestAccessParams } from '@twa-dev/types';\n\nimport { APP_NAME } from '../../config';\nimport { mapValues } from '../iteratees';\nimport safeExec from '../safeExec';\nimport { getTelegramApp } from '../telegram';\n\nfunction requestBiometricAccess(options: BiometricRequestAccessParams) {\n  return new Promise((resolve, reject) => {\n    getTelegramApp()!.BiometricManager.requestAccess(options, (accessGranted) => {\n      if (accessGranted) {\n        resolve(accessGranted);\n      } else {\n        reject(new Error('Access denied'));\n      }\n    });\n  });\n}\n\nexport async function setBiometricCredentials(password: string) {\n  const biometricManager = getTelegramApp()!.BiometricManager;\n\n  if (!biometricManager.isAccessGranted) {\n    const isAccessGranted = await requestBiometricAccess({ reason: APP_NAME });\n    if (!isAccessGranted) {\n      throw new Error('Access to biometric data has not been granted');\n    }\n  }\n\n  return new Promise((resolve, reject) => {\n    biometricManager.updateBiometricToken(password, (updated) => {\n      if (updated) {\n        resolve(password);\n      } else {\n        reject(new Error('Failed to update or save the biometric token'));\n      }\n    });\n  });\n}\n\nexport async function verifyIdentity() {\n  const biometricManager = getTelegramApp()!.BiometricManager;\n\n  if (!biometricManager.isAccessGranted) {\n    const isAccessGranted = await requestBiometricAccess({ reason: APP_NAME });\n    if (!isAccessGranted) {\n      throw new Error('Biometric access was denied. Please grant access to proceed.');\n    }\n  }\n\n  return new Promise<{ success: boolean; token: string }>((resolve, reject) => {\n    biometricManager.authenticate(\n      { reason: '' },\n      // @ts-ignore Wrong type signature https://github.com/twa-dev/types/pull/12\n      (success: boolean, token: string) => {\n        if (success) {\n          resolve({ success, token });\n        } else {\n          reject(new Error('Biometric authentication failed. Please try again.'));\n        }\n      },\n    );\n  });\n}\n\nexport function signCustomData(\n  initDataFields: AnyLiteral,\n  payload: string,\n  options?: {\n    shouldSignHash?: boolean;\n    isPayloadBinary?: boolean;\n  },\n): Promise<{ result: string; resultUnsafe: AnyLiteral }> {\n  const app = getTelegramApp()!;\n\n  return new Promise((resolve, reject) => {\n    (app as any).invokeCustomMethod('prepareSignedPayload', {\n      init_data: app.initData,\n      init_data_sign_fields: initDataFields,\n      payload,\n      ...(options?.shouldSignHash && { sign_sha256: true }),\n      ...(options?.isPayloadBinary && { is_payload_binary: true }),\n    }, (err: Error, result: string) => {\n      if (result) {\n        resolve({\n          result,\n          resultUnsafe: parseResultUnsafe(result),\n        });\n      } else {\n        reject(err || 'Unknown Error');\n      }\n    });\n  });\n}\n\nfunction parseResultUnsafe(appData: string) {\n  const resultUnsafe = (window.Telegram as any).Utils.urlParseQueryString(appData);\n\n  return mapValues(resultUnsafe, (value: string) => {\n    if ((value.startsWith('{') && value.endsWith('}')) || (value.startsWith('[') && value.endsWith(']'))) {\n      return safeExec(() => JSON.parse(value));\n    }\n\n    return value;\n  });\n}\n","import type { AuthConfig, WebAuthn } from './types';\n\nimport { APP_NAME } from '../../config';\nimport { randomBytes } from '../random';\nimport { pause } from '../schedulers';\n\ndeclare global {\n  interface AuthenticationExtensionsClientInputs {\n    credBlob?: Uint8Array; // max 32 bytes\n    getCredBlob?: boolean;\n    hmacCreateSecret?: boolean;\n    hmacGetSecret?: { salt1: Uint8Array }; // 32-byte random data\n  }\n\n  interface AuthenticationExtensionsClientOutputs {\n    credBlob?: boolean;\n    getCredBlob?: Uint8Array;\n    hmacCreateSecret?: boolean;\n    hmacGetSecret?: { output1: Uint8Array };\n  }\n\n  interface AuthenticatorResponse {\n    getTransports?: () => AuthenticatorTransport[];\n  }\n}\n\nexport interface CredentialCreationResult {\n  type: 'credBlob' | 'userHandle';\n  password: {\n    credBlob: string;\n    userHandle: string;\n  };\n  credential: PublicKeyCredential;\n}\n\nenum PubkeyAlg {\n  Ed25519 = -8,\n  ES256 = -7,\n  RS256 = -257,\n}\n\nconst CREDENTIAL_SIZE = 32;\nconst RP_NAME = APP_NAME;\nconst USER_NAME = APP_NAME;\nconst PAUSE = 300;\nconst CREDENTIAL_TIMEOUT = 120000;\n\nasync function createCredential() {\n  const rpId = window.location.hostname;\n\n  const userHandle = randomBytes(CREDENTIAL_SIZE);\n  const credBlob = randomBytes(CREDENTIAL_SIZE);\n\n  const options: CredentialCreationOptions = {\n    publicKey: {\n      challenge: randomBytes(CREDENTIAL_SIZE),\n      rp: {\n        name: RP_NAME,\n        id: rpId,\n      },\n      user: {\n        id: userHandle,\n        name: USER_NAME,\n        displayName: RP_NAME,\n      },\n      pubKeyCredParams: [\n        {\n          type: 'public-key',\n          alg: PubkeyAlg.ES256,\n        },\n        {\n          type: 'public-key',\n          alg: PubkeyAlg.RS256,\n        },\n        {\n          type: 'public-key',\n          alg: PubkeyAlg.Ed25519,\n        },\n      ],\n      authenticatorSelection: {\n        requireResidentKey: true,\n        userVerification: 'preferred',\n      },\n      extensions: {\n        credBlob,\n        hmacCreateSecret: true,\n      },\n      timeout: CREDENTIAL_TIMEOUT,\n      excludeCredentials: [],\n    },\n  };\n\n  const credential = (await navigator.credentials.create(options)) as PublicKeyCredential;\n\n  if (!credential) {\n    throw new Error('Missing credential');\n  }\n\n  const extensions = credential.getClientExtensionResults();\n  const type = extensions.credBlob ? 'credBlob' : 'userHandle';\n\n  return {\n    type,\n    password: {\n      credBlob: Buffer.from(credBlob).toString('hex'),\n      userHandle: Buffer.from(userHandle).toString('hex'),\n    },\n    credential,\n  } as CredentialCreationResult;\n}\n\nasync function verify({ credential, password, type }: CredentialCreationResult) {\n  await pause(PAUSE);\n\n  const transports = credential.response\n    && credential.response.getTransports\n    && credential.response.getTransports();\n\n  const credentialId = Buffer.from(credential.rawId).toString('hex');\n\n  const options: CredentialRequestOptions = {\n    publicKey: {\n      challenge: randomBytes(CREDENTIAL_SIZE),\n      allowCredentials: [\n        {\n          id: credential.rawId,\n          type: 'public-key',\n          transports,\n        },\n      ],\n      userVerification: 'required',\n      extensions: {\n        getCredBlob: true,\n      },\n    },\n  };\n\n  const assertion = (await navigator.credentials.get(options)) as PublicKeyCredential;\n\n  if (!assertion) {\n    throw new Error('Missing authentication');\n  }\n\n  const response = assertion.response as AuthenticatorAssertionResponse;\n  let result: string | undefined;\n  switch (type) {\n    case 'userHandle': {\n      if (!response.userHandle) {\n        throw new Error('Missing stored userHandle');\n      }\n      if (!Buffer.from(password.userHandle, 'hex').equals(Buffer.from(response.userHandle))) {\n        throw new Error('Stored blob not equals passed blob');\n      }\n      result = password.userHandle;\n      break;\n    }\n  }\n\n  if (!result) {\n    throw new Error('Missing stored blob');\n  }\n\n  const config: WebAuthn = {\n    kind: 'webauthn',\n    type,\n    credentialId,\n    transports,\n  };\n\n  return { config, password: result };\n}\n\nasync function getPassword(config: AuthConfig) {\n  if (config.kind !== 'webauthn') {\n    throw new Error('Unexpected auth kind');\n  }\n\n  const { credentialId, transports, type } = config;\n\n  const controller = new AbortController();\n  const signal = controller.signal;\n\n  const options: CredentialRequestOptions = {\n    publicKey: {\n      challenge: randomBytes(CREDENTIAL_SIZE),\n      allowCredentials: [\n        {\n          id: Buffer.from(credentialId, 'hex'),\n          type: 'public-key',\n          transports,\n        },\n      ],\n      userVerification: 'required',\n      extensions: {\n        getCredBlob: true,\n      },\n    },\n    signal,\n  };\n\n  const assertion = (await navigator.credentials.get(options)) as PublicKeyCredential;\n\n  if (signal.aborted) {\n    throw new Error('Verification canceled');\n  }\n\n  const response = assertion.response as AuthenticatorAssertionResponse;\n\n  const extensions = assertion.getClientExtensionResults();\n  if (type === 'userHandle') {\n    if (!response.userHandle) {\n      throw new Error('missing userHandle');\n    }\n    return Buffer.from(response.userHandle).toString('hex');\n  } else {\n    return Buffer.from(extensions.getCredBlob ?? '').toString('hex');\n  }\n}\n\nexport default {\n  createCredential,\n  verify,\n  getPassword,\n};\n","import { NativeBiometric } from '@capgo/capacitor-native-biometric';\n\nimport type { AuthConfig, BiometricsSetupResult } from './types';\nimport type { CredentialCreationResult } from './webAuthn';\n\nimport {\n  APP_NAME, IS_TELEGRAM_APP, NATIVE_BIOMETRICS_SERVER, NATIVE_BIOMETRICS_USERNAME,\n} from '../../config';\nimport { logDebugError } from '../logs';\nimport { randomBytes } from '../random';\nimport {\n  setBiometricCredentials as setTelegramBiometricCredentials,\n  verifyIdentity as verifyTelegramBiometricsIdentity,\n} from './telegram';\nimport webAuthn from './webAuthn';\n\nconst CREDENTIAL_SIZE = 32;\n\nasync function setupBiometrics({ credential }: { credential?: CredentialCreationResult }) {\n  let result: BiometricsSetupResult | undefined;\n\n  try {\n    if (!credential) {\n      const password = Buffer.from(randomBytes(CREDENTIAL_SIZE)).toString('hex');\n      const encryptedPassword = await window.electron?.encryptPassword(password);\n      if (!encryptedPassword) {\n        return result;\n      }\n\n      result = {\n        password,\n        config: {\n          kind: 'electron-safe-storage',\n          encryptedPassword,\n        },\n      };\n    } else {\n      result = await webAuthn.verify(credential);\n    }\n  } catch (err) {\n    logDebugError('setupBiometrics', err);\n  }\n\n  return result;\n}\n\nasync function setupNativeBiometrics(password: string): Promise<BiometricsSetupResult> {\n  if (IS_TELEGRAM_APP) {\n    await setTelegramBiometricCredentials(password);\n\n    return {\n      password,\n      config: { kind: 'native-biometrics' },\n    };\n  }\n\n  await NativeBiometric.setCredentials({\n    username: NATIVE_BIOMETRICS_USERNAME,\n    password,\n    server: NATIVE_BIOMETRICS_SERVER,\n  });\n\n  return {\n    password,\n    config: { kind: 'native-biometrics' },\n  };\n}\n\nfunction removeNativeBiometrics() {\n  if (IS_TELEGRAM_APP) {\n    return setTelegramBiometricCredentials('');\n  }\n\n  return NativeBiometric.deleteCredentials({\n    server: NATIVE_BIOMETRICS_SERVER,\n  });\n}\n\nasync function getPassword(config: AuthConfig) {\n  let password: string | undefined;\n\n  try {\n    if (config.kind === 'webauthn') {\n      password = await webAuthn.getPassword(config);\n    } else if (config.kind === 'electron-safe-storage') {\n      password = await window.electron?.decryptPassword(config.encryptedPassword);\n    } else if (IS_TELEGRAM_APP && config.kind === 'native-biometrics') {\n      const { success: isVerified, token } = await verifyTelegramBiometricsIdentity();\n\n      if (!isVerified) return undefined;\n      password = token;\n    } else if (config.kind === 'native-biometrics') {\n      const isVerified = await NativeBiometric.verifyIdentity({\n        title: APP_NAME,\n        subtitle: '',\n        isWeakAuthenticatorAllowed: true,\n        maxAttempts: 1,\n      })\n        .then(() => true)\n        .catch(() => false);\n\n      if (!isVerified) return undefined;\n\n      const credentials = await NativeBiometric.getCredentials({\n        server: NATIVE_BIOMETRICS_SERVER,\n      });\n      password = credentials.password;\n    } else {\n      throw new Error('Unexpected auth kind');\n    }\n  } catch (err) {\n    logDebugError('getPassword', err);\n  }\n\n  return password;\n}\n\nexport default {\n  setupBiometrics,\n  setupNativeBiometrics,\n  removeNativeBiometrics,\n  getPassword,\n  webAuthn,\n};\n","import { registerPlugin } from '@capacitor/core';\nconst App = registerPlugin('App', {\n    web: () => import('./web').then(m => new m.AppWeb()),\n});\nexport * from './definitions';\nexport { App };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst SplashScreen = registerPlugin('SplashScreen', {\n    web: () => import('./web').then(m => new m.SplashScreenWeb()),\n});\nexport * from './definitions';\nexport { SplashScreen };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst SafeArea = registerPlugin('SafeArea', {\n    web: () => import('./web').then(m => new m.SafeAreaWeb()),\n});\nexport * from './definitions';\nexport { SafeArea };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst AppLauncher = registerPlugin('AppLauncher', {\n    web: () => import('./web').then(m => new m.AppLauncherWeb()),\n});\nexport * from './definitions';\nexport { AppLauncher };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\n\nimport type { BottomSheetPlugin } from './definitions';\n\nconst BottomSheet = registerPlugin<BottomSheetPlugin>('BottomSheet');\n\nexport * from './definitions';\nexport { BottomSheet };\n","import type React from '../lib/teact/teact';\n\nexport const stopEvent = (e: React.UIEvent | Event | React.FormEvent) => {\n  e.stopPropagation();\n  e.preventDefault();\n};\n\nexport function listenOnce<T extends Event = Event>(\n  target: Pick<EventTarget, 'addEventListener' | 'removeEventListener'>,\n  name: string,\n  handler: (event: T) => void,\n) {\n  const handleEvent = (event: Event) => {\n    target.removeEventListener(name, handleEvent);\n    handler(event as T);\n  };\n  target.addEventListener(name, handleEvent);\n}\n","import type { DeviceInfo, Feature } from '@tonconnect/protocol';\n\nimport type { ApiAccountWithTon } from '../api/types';\n\nimport {\n  APP_NAME, IS_EXTENSION, IS_TELEGRAM_APP, TONCONNECT_PROTOCOL_VERSION,\n} from '../config';\nimport packageJson from '../../package.json';\nimport { DEFAULT_MAX_MESSAGES, W5_MAX_MESSAGES } from '../api/chains/ton/constants';\nimport { getMaxMessagesInTransaction } from './ton/transfer';\n\ntype DevicePlatform = DeviceInfo['platform'];\n\n/*\n This function is called in TonConnect `connect` method (where we know the wallet version)\n and in JS Bridge (where no account is selected, so we show maximum number of messages).\n*/\nexport function tonConnectGetDeviceInfo(account?: ApiAccountWithTon): DeviceInfo {\n  const features: Feature[] = [\n    'SendTransaction', // TODO DEPRECATED\n    {\n      name: 'SendTransaction',\n      maxMessages: account ? getTonConnectMaxMessages(account) : W5_MAX_MESSAGES,\n    },\n  ];\n\n  if (!account || account.type !== 'ledger') {\n    features.push({\n      name: 'SignData',\n      types: ['text', 'binary', 'cell'],\n    });\n  }\n\n  return {\n    platform: getPlatform(),\n    appName: APP_NAME,\n    appVersion: packageJson.version,\n    maxProtocolVersion: TONCONNECT_PROTOCOL_VERSION,\n    features,\n  };\n}\n\n/** How many messages can be sent in a single TON Connect transaction sending */\nexport function getTonConnectMaxMessages(account: ApiAccountWithTon) {\n  const { type } = account;\n\n  if (type === 'ledger') {\n    return DEFAULT_MAX_MESSAGES; // TODO Remove after DEXs support the 1 message limit\n  } else {\n    return getMaxMessagesInTransaction(account);\n  }\n}\n\nfunction getPlatform(): DevicePlatform {\n  const { userAgent } = navigator;\n  const platform = navigator.platform || navigator?.userAgentData?.platform || '';\n\n  const macosPlatforms = ['macOS', 'Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];\n  const windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n  const iphonePlatforms = ['iPhone'];\n  const ipadPlatforms = ['iPad', 'iPod'];\n\n  let devicePlatform: DevicePlatform | undefined;\n\n  if (IS_EXTENSION || IS_TELEGRAM_APP) {\n    devicePlatform = 'browser';\n  } else if (/Android/.test(userAgent)) {\n    devicePlatform = 'android';\n  } else if (iphonePlatforms.indexOf(platform) !== -1) {\n    devicePlatform = 'iphone';\n  } else if (ipadPlatforms.indexOf(platform) !== -1) {\n    devicePlatform = 'ipad';\n  } else if (macosPlatforms.indexOf(platform) !== -1) {\n    devicePlatform = 'mac';\n  } else if (windowsPlatforms.indexOf(platform) !== -1) {\n    devicePlatform = 'windows';\n  } else if (/Linux/.test(platform)) {\n    devicePlatform = 'linux';\n  } else {\n    devicePlatform = 'browser';\n  }\n\n  return devicePlatform;\n}\n","import type { DeviceInfo } from '@tonconnect/protocol';\n\nimport type { BridgeApi } from '../provider/bridgeApi';\nimport type { BrowserTonConnectBridgeMethods } from '../provider/tonConnectBridgeApi';\n\ninterface TonConnectProperties {\n  deviceInfo: DeviceInfo;\n  protocolVersion: number;\n  isWalletBrowser: boolean;\n}\n\ntype ApiMethodName = keyof BridgeApi;\ntype ApiArgs = Parameters<Required<BridgeApi>[ApiMethodName]>;\ntype ApiMethodResponse = ReturnType<Required<BridgeApi>[ApiMethodName]>;\n\ninterface RequestState {\n  resolve: AnyToVoidFunction;\n  reject: AnyToVoidFunction;\n}\n\ninterface OutMessageData {\n  channel: string;\n  messageId: string;\n  type: 'callMethod';\n  name: ApiMethodName;\n  args: ApiArgs;\n}\n\ntype InMessageData = {\n  channel: string;\n  messageId: string;\n  type: 'methodResponse';\n  response?: ApiMethodResponse;\n  error?: { message: string };\n} | {\n  channel: string;\n  messageId: string;\n  type: 'update';\n  update: string;\n};\n\ntype CordovaPostMessageTarget = { postMessage: AnyToVoidFunction };\ntype Handler = (update: string) => void;\n\n/**\n * Allows calling functions, provided by another messenger (the parent window, or the Capacitor main view), in this messenger.\n * The other messenger must provide the functions using `createReverseIFrameInterface`.\n *\n * `PostMessageConnect` is not used here (as any other dependencies) because this needs to be easily stringified.\n */\nexport function initConnector(\n  bridgeKey: string,\n  channel: string,\n  target: Window | CordovaPostMessageTarget,\n  tonConnectProperties: TonConnectProperties,\n) {\n  if ((window as any)[bridgeKey]) return;\n\n  const TON_CONNECT_BRIDGE_METHODS = ['connect', 'restoreConnection', 'disconnect', 'send'] as const;\n\n  const requestStates = new Map<string, RequestState>();\n  const updateHandlers = new Set<Handler>();\n\n  setupPostMessageHandler();\n  setupGlobalOverrides();\n  initTonConnect();\n\n  function setupPostMessageHandler() {\n    window.addEventListener('message', ({ data }) => {\n      const message = data as InMessageData;\n\n      if (message.channel !== channel) {\n        return;\n      }\n\n      if (message.type === 'methodResponse') {\n        const requestState = requestStates.get(message.messageId);\n        if (!requestState) return;\n\n        requestStates.delete(message.messageId);\n\n        if (message.error) {\n          requestState.reject(message.error);\n        } else {\n          requestState.resolve(message.response);\n        }\n      } else if (message.type === 'update') {\n        updateHandlers.forEach((handler) => handler(message.update));\n      }\n    });\n  }\n\n  function setupGlobalOverrides() {\n    window.open = (url) => {\n      url = sanitizeUrl(url);\n      if (url) {\n        void callApi('window:open', { url });\n      }\n\n      // eslint-disable-next-line no-null/no-null\n      return null;\n    };\n\n    window.close = () => {\n      void callApi('window:close');\n    };\n\n    window.addEventListener('click', (e) => {\n      if (!(e.target instanceof HTMLElement)) return;\n\n      const { href, target } = e.target.closest('a') || {};\n      if (href && (target === '_blank' || !href.startsWith('http'))) {\n        e.preventDefault();\n\n        const url = sanitizeUrl(href);\n        if (url) {\n          void callApi('window:open', { url });\n        }\n      }\n    }, false);\n  }\n\n  function initTonConnect() {\n    const methods = Object.fromEntries(TON_CONNECT_BRIDGE_METHODS.map((name) => {\n      return [\n        name,\n        (...args: Parameters<BrowserTonConnectBridgeMethods[typeof name]>) => callApi(`tonConnect:${name}`, ...args),\n      ];\n    }));\n\n    function addUpdateHandler(cb: Handler) {\n      updateHandlers.add(cb);\n\n      return () => {\n        updateHandlers.delete(cb);\n      };\n    }\n\n    (window as any)[bridgeKey] = {\n      tonconnect: {\n        ...tonConnectProperties,\n        ...methods,\n        listen: addUpdateHandler,\n      },\n    };\n  }\n\n  function callApi<ApiMethodName extends keyof BridgeApi>(\n    name: ApiMethodName,\n    ...args: ApiArgs\n  ) {\n    const messageId = generateUniqueId();\n\n    const promise = new Promise<any>((resolve, reject) => {\n      requestStates.set(messageId, { resolve, reject });\n    });\n\n    const messageData: OutMessageData = {\n      channel,\n      messageId,\n      type: 'callMethod',\n      name,\n      args,\n    };\n\n    if ('parent' in target) {\n      target.postMessage(messageData, '*');\n    } else {\n      target.postMessage(JSON.stringify(messageData));\n    }\n\n    return promise;\n  }\n\n  function generateUniqueId() {\n    return Date.now().toString(36) + Math.random().toString(36).slice(2);\n  }\n\n  function sanitizeUrl(url?: string | URL) {\n    if (!url) return undefined;\n\n    // eslint-disable-next-line no-control-regex\n    url = String(url).trim().replace(/[\\x00-\\x1F\\x7F]/g, '');\n\n    if (url.startsWith('//')) {\n      return `https:${url}`;\n    }\n\n    const UNSAFE_PATTERNS = [\n      /^\\s*javascript\\s*:/i,\n      /^\\s*data\\s*:/i,\n      /^\\s*vbscript\\s*:/i,\n      /^\\s*file\\s*:/i,\n      /^\\s*about\\s*:/i,\n      /^\\s*blob\\s*:/i,\n      /^\\s*filesystem\\s*:/i,\n      /^\\s*chrome(-extension)?\\s*:/i,\n      /^\\s*moz-extension\\s*:/i,\n      /^\\s*ms-browser-extension\\s*:/i,\n    ];\n\n    if (UNSAFE_PATTERNS.some((p) => p.test(url))) {\n      return undefined;\n    }\n\n    if (!/^[a-z][a-z0-9+.-]*:/i.test(url)) {\n      return undefined;\n    }\n\n    return url;\n  }\n}\n\nexport const initConnectorString = initConnector.toString();\n","import type { ConnectEventError, ConnectEventSuccess } from '@tonconnect/protocol';\n\nexport interface TransactionPayload {\n  valid_until?: number;\n  network?: CHAIN;\n  from?: string; // https://github.com/ton-blockchain/ton-connect/blob/main/wallet-guidelines.md#multi-accounts\n  messages: TransactionPayloadMessage[];\n}\n\nexport interface TransactionPayloadMessage {\n  address: string;\n  amount: string;\n  payload?: string;\n  stateInit?: string;\n}\n\n// This and the other enums can be imported from @tonconnect/protocol. We copy the enums instead of importing because\n// importing that module increases the compiled code size significantly.\n\nexport enum CONNECT_EVENT_ERROR_CODES {\n  UNKNOWN_ERROR = 0,\n  BAD_REQUEST_ERROR = 1,\n  MANIFEST_NOT_FOUND_ERROR = 2,\n  MANIFEST_CONTENT_ERROR = 3,\n  UNKNOWN_APP_ERROR = 100,\n  USER_REJECTS_ERROR = 300,\n  METHOD_NOT_SUPPORTED = 400,\n}\n\nexport enum SEND_TRANSACTION_ERROR_CODES {\n  UNKNOWN_ERROR = 0,\n  BAD_REQUEST_ERROR = 1,\n  UNKNOWN_APP_ERROR = 100,\n  USER_REJECTS_ERROR = 300,\n  METHOD_NOT_SUPPORTED = 400,\n}\n\nexport type AllErrorCodes = CONNECT_EVENT_ERROR_CODES | SEND_TRANSACTION_ERROR_CODES;\nexport type ConnectEvent = ConnectEventSuccess | ConnectEventError;\n\nexport interface ApiTonConnectProof {\n  timestamp: number;\n  domain: string;\n  payload: string;\n}\n\nexport enum CHAIN {\n  MAINNET = '-239',\n  TESTNET = '-3',\n}\n","import { BottomSheet } from '@mytonwallet/native-bottom-sheet';\nimport type {\n  AppRequest,\n  ConnectEvent,\n  ConnectEventError,\n  ConnectRequest,\n  RpcMethod,\n  WalletResponse,\n} from '@tonconnect/protocol';\nimport { getActions, getGlobal } from '../../../global';\n\nimport { CONNECT_EVENT_ERROR_CODES, SEND_TRANSACTION_ERROR_CODES } from '../../../api/tonConnect/types';\n\nimport { TONCONNECT_PROTOCOL_VERSION } from '../../../config';\nimport { callApi } from '../../../api';\nimport { logDebugError } from '../../logs';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../windowEnvironment';\n\nexport interface BrowserTonConnectBridgeMethods {\n  connect(protocolVersion: number, message: ConnectRequest): Promise<ConnectEvent>;\n\n  restoreConnection(): Promise<ConnectEvent>;\n\n  disconnect(): Promise<void>;\n\n  send<T extends RpcMethod>(message: AppRequest<T>): Promise<WalletResponse<T>>;\n}\n\nlet requestId = 0;\n\nexport function buildTonConnectBridgeApi(pageUrl: string): BrowserTonConnectBridgeMethods | undefined {\n  const {\n    openLoadingOverlay,\n    closeLoadingOverlay,\n  } = getActions();\n\n  const url = new URL(pageUrl).origin.toLowerCase();\n\n  return {\n    connect: async (protocolVersion, request) => {\n      try {\n        if (protocolVersion > TONCONNECT_PROTOCOL_VERSION) {\n          return buildConnectError(\n            requestId,\n            'Unsupported protocol version',\n            CONNECT_EVENT_ERROR_CODES.BAD_REQUEST_ERROR,\n          );\n        }\n        verifyConnectRequest(request);\n\n        openLoadingOverlay();\n\n        const response = await callApi(\n          'tonConnect_connect',\n          buildDappRequest(url),\n          request,\n          requestId,\n        );\n\n        closeLoadingOverlay();\n\n        requestId++;\n\n        return response;\n      } catch (err: any) {\n        logDebugError('useDAppBridge:connect', err);\n\n        if ('event' in err && 'id' in err && 'payload' in err) {\n          return err;\n        }\n\n        return buildConnectError(\n          requestId,\n          err?.message,\n          CONNECT_EVENT_ERROR_CODES.UNKNOWN_ERROR,\n        );\n      }\n    },\n\n    restoreConnection: async () => {\n      try {\n        const response = await callApi(\n          'tonConnect_reconnect',\n          buildDappRequest(url),\n          requestId,\n        );\n\n        requestId++;\n\n        return response;\n      } catch (err: any) {\n        logDebugError('useDAppBridge:reconnect', err);\n\n        if ('event' in err && 'id' in err && 'payload' in err) {\n          return err;\n        }\n\n        return buildConnectError(\n          requestId,\n          err?.message,\n          CONNECT_EVENT_ERROR_CODES.UNKNOWN_ERROR,\n        );\n      }\n    },\n\n    disconnect: async () => {\n      requestId = 0;\n\n      await callApi(\n        'tonConnect_disconnect',\n        buildDappRequest(url),\n        { id: requestId.toString(), method: 'disconnect', params: [] },\n      );\n    },\n\n    send: async <T extends RpcMethod>(request: AppRequest<T>) => {\n      requestId++;\n\n      const global = getGlobal();\n      const isConnected = global.byAccountId[global.currentAccountId!].dapps?.some((dapp) => dapp.url === url);\n\n      if (!isConnected) {\n        return {\n          error: {\n            code: SEND_TRANSACTION_ERROR_CODES.UNKNOWN_APP_ERROR,\n            message: 'Unknown app',\n          },\n          id: request.id.toString(),\n        };\n      }\n\n      const dappRequest = buildDappRequest(url);\n\n      try {\n        switch (request.method) {\n          case 'disconnect': {\n            return (await callApi(\n              'tonConnect_disconnect',\n              dappRequest,\n              request,\n            ))!;\n          }\n\n          case 'sendTransaction': {\n            const result = await callApi(\n              'tonConnect_sendTransaction',\n              dappRequest,\n              request,\n            );\n\n            if (IS_DELEGATED_BOTTOM_SHEET) {\n              void BottomSheet.applyScrollPatch();\n            }\n\n            return result!;\n          }\n\n          case 'signData': {\n            return (await callApi(\n              'tonConnect_signData',\n              dappRequest,\n              request,\n            ))!;\n          }\n\n          default: {\n            const anyRequest = request;\n\n            return {\n              id: String(anyRequest.id),\n              error: {\n                code: SEND_TRANSACTION_ERROR_CODES.BAD_REQUEST_ERROR,\n                message: `Method \"${anyRequest.method}\" is not supported`,\n              },\n            };\n          }\n        }\n      } catch (err: any) {\n        logDebugError('useDAppBridge:send', err);\n\n        return {\n          id: String(request.id),\n          error: {\n            code: SEND_TRANSACTION_ERROR_CODES.UNKNOWN_ERROR,\n            message: err?.message,\n          },\n        };\n      }\n    },\n  };\n}\n\nfunction buildConnectError(\n  id: number,\n  msg = 'Unknown error.',\n  code?: CONNECT_EVENT_ERROR_CODES,\n): ConnectEventError {\n  return {\n    event: 'connect_error',\n    id,\n    payload: {\n      code: code || CONNECT_EVENT_ERROR_CODES.UNKNOWN_ERROR,\n      message: msg,\n    },\n  };\n}\n\nfunction verifyConnectRequest(request: ConnectRequest) {\n  if (!(request && request.manifestUrl && request.items?.length)) {\n    throw new Error('Wrong request data');\n  }\n}\n\nfunction buildDappRequest(origin: string) {\n  return {\n    url: origin,\n    isUrlEnsured: true,\n    accountId: getGlobal().currentAccountId,\n  };\n}\n","import { getActions } from '../../../global';\n\nimport { openDeeplinkOrUrl } from '../../deeplink';\nimport { buildTonConnectBridgeApi } from './tonConnectBridgeApi';\n\nexport type BridgeApi = ReturnType<typeof buildBridgeApi>;\n\nexport function buildBridgeApi(pageUrl: string) {\n  const { closeBrowser } = getActions();\n\n  const tonConnectApi = buildTonConnectBridgeApi(pageUrl);\n  const prefixedTonConnectApi = tonConnectApi ? prefixApi(tonConnectApi, 'tonConnect:') : undefined;\n\n  return {\n    'window:open'({ url }: { url: string }) {\n      void openDeeplinkOrUrl(url, { isExternal: true, isFromInAppBrowser: true });\n    },\n\n    'window:close'() {\n      closeBrowser();\n    },\n\n    ...prefixedTonConnectApi,\n  };\n}\n\nfunction prefixApi<Api extends { [K in keyof Api]: AnyFunction }, Prefix extends string>(\n  api: Api, prefix: Prefix,\n): { [K in keyof Api as `${Prefix}${string & K}`]: Api[K] } {\n  const newEntries = Object.entries(api).map(([k, v]) => [`${prefix}${k}`, v]);\n\n  return Object.fromEntries(newEntries);\n}\n","import { useRef } from '../lib/teact/teact';\n\n// Allows to use state value as \"silent\" dependency in hooks (not causing updates).\n// Also useful for state values that update frequently (such as controlled input value).\nexport function useStateRef<T>(value: T) {\n  const ref = useRef<T>(value);\n  ref.current = value;\n  return ref;\n}\n","import { useCallback } from '../lib/teact/teact';\n\nimport { useStateRef } from './useStateRef';\n\nexport default function useLastCallback<T extends AnyFunction>(callback?: T) {\n  const ref = useStateRef(callback);\n\n  // No need for ref dependency\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  return useCallback((...args: Parameters<T>) => ref.current?.(...args), []) as T;\n}\n","export default class InAppBrowserPostMessageAdapter {\n  constructor(private inAppBrowser: Cordova['InAppBrowser']) {\n  }\n\n  addEventListener(eventName: 'message', handler: (event: any) => void) {\n    void this.inAppBrowser.addEventListener(eventName, handler);\n  }\n\n  removeEventListener(eventName: 'message', handler: (event: any) => void) {\n    void this.inAppBrowser.removeEventListener(eventName, handler);\n  }\n\n  postMessage(message: any) {\n    void this.inAppBrowser.executeScript({\n      code: `window.dispatchEvent(new MessageEvent('message', { data: ${JSON.stringify(message)} }));`,\n    });\n  }\n}\n","import type { ApiChain, ApiNft } from '../api/types';\n\nimport { EMPTY_HASH_VALUE, MTW_CARDS_BASE_URL } from '../config';\nimport { base64ToHex } from './base64toHex';\nimport { logDebugError } from './logs';\n\n// Regexp from https://stackoverflow.com/a/3809435\nconst URL_REGEX = /[-a-z0-9@:%._+~#=]{1,256}\\.[a-z0-9()]{1,6}\\b([-a-z0-9()@:%_+.~#?&/=]*)/gi;\nconst VALID_PROTOCOLS = new Set(['http:', 'https:']);\n\n// The configuration does not contain data for NFT addresses, they must be configured separately\nconst EXPLORER_CONFIGURATIONS = {\n  ton: {\n    name: 'Tonscan',\n    base: {\n      mainnet: 'https://tonscan.org/',\n      testnet: 'https://testnet.tonscan.org/',\n    },\n    address: '{base}address/{address}',\n    explorer: '{base}jetton/{address}',\n    transaction: '{base}tx/{hash}',\n  },\n  tron: {\n    name: 'Tronscan',\n    base: {\n      mainnet: 'https://tronscan.org/#/',\n      testnet: 'https://shasta.tronscan.org/#/',\n    },\n    address: '{base}address/{address}',\n    explorer: '{base}token20/{address}',\n    transaction: '{base}transaction/{hash}',\n  },\n};\n\nexport function isValidUrl(url: string, validProtocols = VALID_PROTOCOLS) {\n  try {\n    const match = url.match(URL_REGEX);\n    if (!match) return false;\n\n    const urlObject = new URL(url);\n\n    return validProtocols.has(urlObject.protocol);\n  } catch (e) {\n    logDebugError('isValidUrl', e);\n    return false;\n  }\n}\n\nexport function getHostnameFromUrl(url: string) {\n  try {\n    const urlObject = new URL(url);\n\n    return urlObject.hostname;\n  } catch (e) {\n    logDebugError('getHostnameFromUrl', e);\n    return url;\n  }\n}\n\nexport function getExplorerName(chain: ApiChain) {\n  return EXPLORER_CONFIGURATIONS[chain].name;\n}\n\nfunction getExplorerBaseUrl(chain: ApiChain, isTestnet = false) {\n  return EXPLORER_CONFIGURATIONS[chain].base[isTestnet ? 'testnet' : 'mainnet'];\n}\n\nfunction getTokenExplorerBaseUrl(chain: ApiChain, isTestnet = false) {\n  return EXPLORER_CONFIGURATIONS[chain].explorer.replace('{base}', getExplorerBaseUrl(chain, isTestnet));\n}\n\nexport function getExplorerTransactionUrl(\n  chain: ApiChain,\n  transactionHash: string | undefined,\n  isTestnet?: boolean,\n) {\n  if (!transactionHash || transactionHash === EMPTY_HASH_VALUE) return undefined;\n\n  return EXPLORER_CONFIGURATIONS[chain].transaction\n    .replace('{base}', getExplorerBaseUrl(chain, isTestnet))\n    .replace('{hash}', chain === 'ton' ? base64ToHex(transactionHash) : transactionHash);\n}\n\nexport function getExplorerAddressUrl(chain: ApiChain, address?: string, isTestnet?: boolean) {\n  if (!address) return undefined;\n\n  return EXPLORER_CONFIGURATIONS[chain].address\n    .replace('{base}', getExplorerBaseUrl(chain, isTestnet))\n    .replace('{address}', address);\n}\n\nexport function getExplorerNftCollectionUrl(nftCollectionAddress?: string, isTestnet?: boolean) {\n  if (!nftCollectionAddress) return undefined;\n\n  return `${getExplorerBaseUrl('ton', isTestnet)}nft/${nftCollectionAddress}`;\n}\n\nexport function getExplorerNftUrl(nftAddress?: string, isTestnet?: boolean) {\n  if (!nftAddress) return undefined;\n\n  return `${getExplorerBaseUrl('ton', isTestnet)}nft/${nftAddress}`;\n}\n\nexport function getExplorerTokenUrl(chain: ApiChain, slug?: string, address?: string, isTestnet?: boolean) {\n  if (!slug && !address) return undefined;\n\n  return address\n    ? getTokenExplorerBaseUrl(chain, isTestnet).replace('{address}', address)\n    : `https://coinmarketcap.com/currencies/${slug}/`;\n}\n\nexport function isTelegramUrl(url: string) {\n  return url.startsWith('https://t.me/');\n}\n\nexport function getCardNftImageUrl(nft: ApiNft): string | undefined {\n  return `${MTW_CARDS_BASE_URL}${nft.metadata.mtwCardId}.webp`;\n}\n","export function base64ToHex(base64: string): string {\n  const buffer = Buffer.from(base64, 'base64');\n  return buffer.toString('hex');\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React from '../../lib/teact/teact';\n\nimport { compact } from '../../util/iteratees';\n\nexport type TextFilter = ('simple_markdown' | 'br');\n\nconst SIMPLE_MARKDOWN_REGEX = /(\\*\\*|__).+?\\1/g;\n\nexport default function renderText(\n  part: TeactNode,\n  filters: Array<TextFilter> = ['simple_markdown', 'br'],\n): TeactNode[] {\n  if (typeof part !== 'string') {\n    return [part];\n  }\n\n  return compact(filters.reduce((text, filter) => {\n    switch (filter) {\n      case 'simple_markdown':\n        return replaceSimpleMarkdown(text);\n\n      case 'br':\n        return addLineBreaks(text);\n    }\n\n    return text;\n  }, [part] as TeactNode[]));\n}\n\nfunction replaceSimpleMarkdown(textParts: TeactNode[]): TeactNode[] {\n  return textParts.reduce<TeactNode[]>((result, part) => {\n    if (typeof part !== 'string') {\n      result.push(part);\n      return result;\n    }\n\n    const parts = part.split(SIMPLE_MARKDOWN_REGEX);\n    const entities: string[] = part.match(SIMPLE_MARKDOWN_REGEX) || [];\n    result.push(parts[0]);\n\n    return entities.reduce((entityResult: TeactNode[], entity, i) => {\n      entityResult.push(\n        entity.startsWith('**')\n          ? <b>{entity.replace(/\\*\\*/g, '')}</b>\n          : <i>{entity.replace(/__/g, '')}</i>,\n      );\n\n      const index = i * 2 + 2;\n      if (parts[index]) {\n        entityResult.push(parts[index]);\n      }\n\n      return entityResult;\n    }, result);\n  }, []);\n}\n\nfunction addLineBreaks(textParts: TeactNode[]): TeactNode[] {\n  return textParts.reduce((result: TeactNode[], part) => {\n    if (typeof part !== 'string') {\n      result.push(part);\n      return result;\n    }\n\n    const splittenParts = part\n      .split(/\\r\\n|\\r|\\n/g)\n      .reduce((parts: TeactNode[], line: string, i, source) => {\n        // This adds non-breaking space if line was indented with spaces, to preserve the indentation\n        const trimmedLine = line.trimStart();\n        const indentLength = line.length - trimmedLine.length;\n        parts.push(String.fromCharCode(160).repeat(indentLength) + trimmedLine);\n\n        if (i !== source.length - 1) {\n          parts.push(<br />);\n        }\n\n        return parts;\n      }, []);\n\n    return [...result, ...splittenParts];\n  }, []);\n}\n","import { ELECTRON_HOST_URL, IS_PACKAGED_ELECTRON } from '../config';\n\nconst cacheApi = self.caches;\n\nexport async function fetch(cacheName: string, key: string) {\n  if (!cacheApi) {\n    return undefined;\n  }\n\n  try {\n    // To avoid the error \"Request scheme 'webdocument' is unsupported\"\n    const request = IS_PACKAGED_ELECTRON\n      ? `${ELECTRON_HOST_URL}/${key.replace(/:/g, '_')}`\n      : new Request(key.replace(/:/g, '_'));\n    const cache = await cacheApi.open(cacheName);\n    const response = await cache.match(request);\n    if (!response) {\n      return undefined;\n    }\n\n    return await response.json();\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function save(cacheName: string, key: string, data: AnyLiteral | Blob | ArrayBuffer | string) {\n  if (!cacheApi) {\n    return undefined;\n  }\n\n  try {\n    const cacheData = typeof data === 'string' || data instanceof Blob || data instanceof ArrayBuffer\n      ? data\n      : JSON.stringify(data);\n    // To avoid the error \"Request scheme 'webdocument' is unsupported\"\n    const request = IS_PACKAGED_ELECTRON\n      ? `${ELECTRON_HOST_URL}/${key.replace(/:/g, '_')}`\n      : new Request(key.replace(/:/g, '_'));\n    const response = new Response(cacheData);\n\n    // To avoid the error \"Request scheme 'chrome-extension' is unsupported\"\n    // https://github.com/iamshaunjp/pwa-tutorial/issues/1\n    if (request instanceof Request && request.url.indexOf('chrome-extension') === 0) {\n      return undefined;\n    }\n\n    const cache = await cacheApi.open(cacheName);\n    return await cache.put(request, response);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function remove(cacheName: string, key: string) {\n  try {\n    if (!cacheApi) {\n      return undefined;\n    }\n\n    const cache = await cacheApi.open(cacheName);\n    return await cache.delete(key);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function clear(cacheName: string) {\n  try {\n    if (!cacheApi) {\n      return undefined;\n    }\n\n    return await cacheApi.delete(cacheName);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n","import type { ApiBaseCurrency, ApiTokenWithPrice } from '../api/types';\n\nimport { CURRENCIES, DEFAULT_PRICE_CURRENCY, WHOLE_PART_DELIMITER } from '../config';\nimport { Big } from '../lib/big.js';\nimport { bigintAbs } from './bigint';\nimport { toDecimal } from './decimals';\nimport withCache from './withCache';\n\nconst SHORT_SYMBOLS = new Set(\n  Object.values(CURRENCIES)\n    .map((currency) => currency.shortSymbol)\n    .filter(Boolean),\n);\n\nexport const formatNumber = withCache((\n  value: number | Big | string,\n  fractionDigits = 2,\n  noTruncate?: boolean,\n) => {\n  let bigValue = new Big(value);\n\n  if (bigValue.eq(0)) return '0';\n\n  const isNegative = bigValue.lt(0);\n  if (isNegative) bigValue = bigValue.neg();\n\n  const method = bigValue.lt(1) ? 'toPrecision' : 'round';\n  let formatted = bigValue[method](fractionDigits, noTruncate ? Big.roundHalfUp : Big.roundDown)\n    .toString()\n    // Remove extra zeros after rounding to the specified accuracy\n    .replace(/(\\.\\d*?)0+$/, '$1')\n    .replace(/\\.$/, '');\n\n  formatted = applyThousandsGrouping(formatted);\n\n  if (isNegative) formatted = `-${formatted}`;\n\n  return formatted;\n});\n\nexport function formatCurrency(\n  value: number | string | Big,\n  currency: string,\n  fractionDigits?: number,\n  noTruncate?: boolean,\n) {\n  const formatted = formatNumber(value, fractionDigits, noTruncate);\n  return addCurrency(formatted, currency);\n}\n\nexport function formatCurrencyExtended(\n  value: number | string, currency: string, noSign = false, fractionDigits?: number, isZeroNegative?: boolean,\n) {\n  const numericValue = Number(value);\n  const isNegative = numericValue === 0 ? isZeroNegative : (numericValue < 0);\n  const prefix = !noSign ? (!isNegative ? '+\\u202F' : '\\u2212\\u202F') : '';\n\n  value = value.toString();\n  return prefix + formatCurrency(noSign ? value : value.replace(/^-/, ''), currency, fractionDigits);\n}\n\nexport function formatCurrencySimple(value: number | bigint | string, currency: string, decimals?: number) {\n  if (typeof value !== 'string') {\n    value = toDecimal(value, decimals);\n  }\n  return addCurrency(value, currency);\n}\n\nfunction addCurrency(value: number | string, currency: string) {\n  return SHORT_SYMBOLS.has(currency)\n    ? `${currency}${value}`.replace(`${currency}-`, `-${currency}`)\n    : `${value} ${currency}`;\n}\n\nexport function getShortCurrencySymbol(currency?: ApiBaseCurrency) {\n  if (!currency) currency = DEFAULT_PRICE_CURRENCY;\n  return CURRENCIES[currency].shortSymbol ?? currency;\n}\n\nfunction applyThousandsGrouping(str: string) {\n  const [wholePart, fractionPart = ''] = str.split('.');\n  const groupedWhole = wholePart.replace(/\\B(?=(\\d{3})+(?!\\d))/g, `$&${WHOLE_PART_DELIMITER}`);\n\n  return [groupedWhole, fractionPart].filter(Boolean).join('.');\n}\n\n/** Formats the base currency amount of a transaction */\nexport function formatBaseCurrencyAmount(\n  amount: bigint,\n  baseCurrency: ApiBaseCurrency | undefined,\n  token: Pick<ApiTokenWithPrice, 'decimals' | 'price'>,\n) {\n  const baseCurrencyAmount = Big(toDecimal(bigintAbs(amount), token.decimals, true)).mul(token.price);\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n  // The rounding logic should match the original amount rounding logic implemented by formatCurrencyExtended.\n  // It's for cases when the base currency matches the transaction currency.\n  return formatCurrency(baseCurrencyAmount, shortBaseSymbol);\n}\n","import type { TeactNode } from '../lib/teact/teact';\n\nimport type { LangCode, LangPack, LangString } from '../global/types';\n\nimport { IS_PACKAGED_ELECTRON, LANG_CACHE_NAME, LANG_LIST } from '../config';\nimport renderText from '../global/helpers/renderText';\n// @ts-ignore this file is autogenerated\nimport defaultLangPackJson from '../i18n/en.json';\nimport * as cacheApi from './cacheApi';\nimport { createCallbackManager } from './callbacks';\nimport { formatNumber } from './formatNumber';\nimport { escapeStringRegexp } from './regex';\nimport { DEFAULT_LANG_CODE } from './windowEnvironment';\n\nconst defaultLangPack: LangPack = defaultLangPackJson;\n\nexport interface LangFn {\n  (key: string): string;\n\n  (key: string, value: any, format?: 'i', pluralValue?: number): string | TeactNode[];\n\n  isRtl?: boolean;\n  code?: LangCode;\n  langName?: string;\n}\n\nconst {\n  addCallback,\n  removeCallback,\n  runCallbacks,\n} = createCallbackManager();\n\nexport { addCallback, removeCallback };\n\nconst SUBSTITUTION_REGEX = /%\\d?\\$?[sdf@]/g;\nconst PLURAL_OPTIONS = ['value', 'zeroValue', 'oneValue', 'twoValue', 'fewValue', 'manyValue', 'otherValue'] as const;\n// Some rules edited from https://github.com/eemeli/make-plural/blob/master/packages/plurals/cardinals.js\n// de - zeroValue, oneValue, otherValue\n// en - zeroValue, oneValue, otherValue\n// es - zeroValue, oneValue, otherValue\n// pl - zeroValue, oneValue, fewValue, manyValue\n// ru - zeroValue, oneValue, fewValue, manyValue\n// th - zeroValue, otherValue\n// tr - zeroValue, oneValue, otherValue\n// uk - zeroValue, oneValue, fewValue, manyValue\n// zh-Hans - zeroValue, otherValue\n// zh-Hant - zeroValue, otherValue\nconst PLURAL_RULES = {\n  /* eslint-disable @stylistic/max-len */\n  de: (n: number) => (n === 0 ? 1 : (n !== 1 ? 6 : 2)),\n  en: (n: number) => (n === 0 ? 1 : (n !== 1 ? 6 : 2)),\n  es: (n: number) => (n === 0 ? 1 : (n !== 1 ? 6 : 2)),\n  pl: (n: number) => (n === 0 ? 1 : (n === 1 ? 2 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 4 : 5)),\n  ru: (n: number) => (n === 0 ? 1 : (n % 10 === 1 && n % 100 !== 11 ? 2 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 4 : 5)),\n  th: (n: number) => (n === 0 ? 1 : 6),\n  tr: (n: number) => (n === 0 ? 1 : (n > 1 ? 6 : 2)),\n  uk: (n: number) => (n === 0 ? 1 : (n % 10 === 1 && n % 100 !== 11 ? 2 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 4 : 5)),\n  'zh-Hans': (n: number) => (n === 0 ? 1 : 6),\n  'zh-Hant': (n: number) => (n === 0 ? 1 : 6),\n  /* eslint-enable @stylistic/max-len */\n};\nconst cache = new Map<string, string>();\nlet langPack: LangPack | undefined;\nlet currentLangCode: string | undefined;\n\nfunction createLangFn() {\n  return ((key: string, value?: any, format?: 'i', pluralValue?: number) => {\n    if (value !== undefined && (typeof value !== 'object' || Array.isArray(value))) {\n      const cacheValue = Array.isArray(value) ? JSON.stringify(value) : value;\n      const cached = cache.get(`${key}_${cacheValue}_${format}${pluralValue ? `_${pluralValue}` : ''}`);\n      if (cached) {\n        return cached;\n      }\n    }\n\n    if (!langPack && !defaultLangPack) {\n      return key;\n    }\n\n    const langString = (langPack?.[key]) || (defaultLangPack?.[key]) || key;\n\n    return processTranslation(langString, key, value, format, pluralValue);\n  }) as LangFn;\n}\n\nexport let getTranslation: LangFn = createLangFn();\n\nexport async function setLanguage(langCode: LangCode, callback?: NoneToVoidFunction) {\n  if (langPack && langCode === currentLangCode) {\n    if (callback) {\n      callback();\n    }\n\n    return;\n  }\n\n  let newLangPack = await cacheApi.fetch(LANG_CACHE_NAME, langCode);\n\n  if (!newLangPack) {\n    newLangPack = await fetchRemote(langCode);\n    if (!newLangPack) {\n      return;\n    }\n  }\n\n  cache.clear();\n\n  currentLangCode = langCode;\n  langPack = newLangPack;\n  document.documentElement.lang = langCode;\n\n  const langInfo = LANG_LIST?.find((l) => l.langCode === langCode);\n  getTranslation = createLangFn();\n  getTranslation.isRtl = Boolean(langInfo?.rtl);\n  getTranslation.code = langCode.replace('-raw', '') as LangCode;\n  getTranslation.langName = langInfo?.nativeName;\n\n  if (callback) {\n    callback();\n  }\n\n  runCallbacks();\n}\n\nexport function clearPreviousLangpacks() {\n  const langCachePrefix = LANG_CACHE_NAME.replace(/\\d+$/, '');\n  const langCacheVersion = Number((LANG_CACHE_NAME.match(/\\d+$/) || [0])[0]);\n  for (let i = 0; i < langCacheVersion; i++) {\n    void cacheApi.clear(`${langCachePrefix}${i === 0 ? '' : i}`);\n  }\n}\n\nasync function fetchRemote(langCode: string): Promise<LangPack | undefined> {\n  if (langCode === DEFAULT_LANG_CODE) {\n    return defaultLangPack;\n  }\n\n  const response = await fetch(`${IS_PACKAGED_ELECTRON ? '.' : '..'}/i18n/${langCode}.json`);\n\n  if (!response.ok) {\n    const message = `An error has occured: ${response.status}`;\n    throw new Error(message);\n  }\n\n  const remote = await response.json();\n\n  if (remote) {\n    await cacheApi.save(LANG_CACHE_NAME, langCode, remote);\n    return remote;\n  }\n\n  return undefined;\n}\n\nfunction getPluralOption(amount: number) {\n  const langCode = currentLangCode || DEFAULT_LANG_CODE;\n  const optionIndex = PLURAL_RULES[langCode as keyof typeof PLURAL_RULES]\n    ? PLURAL_RULES[langCode as keyof typeof PLURAL_RULES](amount)\n    : 0;\n\n  return PLURAL_OPTIONS[optionIndex];\n}\n\nfunction processTemplate(template: string, value: any) {\n  value = Array.isArray(value) ? value : [value];\n  const translationSlices = template.split(SUBSTITUTION_REGEX);\n  const initialValue = translationSlices.shift();\n\n  return translationSlices.reduce((result, str, index) => {\n    return `${result}${String(value[index] ?? '')}${str}`;\n  }, initialValue || '');\n}\n\n// Export a function for testing purposes\nexport function processTemplateJsx(template: string, value: Record<string, TeactNode>): TeactNode[] {\n  // Replace all primitive values (strings and numbers)\n  let processedTemplate = template;\n\n  Object.entries(value).forEach(([key, val]) => {\n    if (typeof val === 'string' || typeof val === 'number') {\n      processedTemplate = processedTemplate.replace(\n        new RegExp(`%${escapeStringRegexp(key)}%`, 'g'),\n        String(val),\n      );\n    }\n  });\n\n  // Check if there are any components\n  const hasComponents = Object.values(value).some((val) =>\n    typeof val !== 'string' && typeof val !== 'number',\n  );\n\n  // If no components, just process through renderText\n  if (!hasComponents) {\n    return renderText(processedTemplate);\n  }\n\n  // If there are components, process in parts\n  const parts = processedTemplate.split(/%(\\w+)%/);\n  const result: TeactNode[] = [];\n\n  for (let i = 0; i < parts.length; i++) {\n    if (i % 2 === 0) {\n      // Text part\n      if (parts[i]) {\n        result.push(...renderText(parts[i]));\n      }\n    } else {\n      // Token (between % symbols)\n      const tokenValue = value[parts[i]];\n      if (tokenValue !== undefined) {\n        result.push(tokenValue);\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction processTranslation(\n  langString: LangString | string | undefined, key: string, value?: any, format?: 'i', pluralValue?: number,\n) {\n  const preferredPluralOption = typeof value === 'number' || pluralValue !== undefined\n    ? getPluralOption(pluralValue ?? value)\n    : 'value';\n\n  const template = typeof langString === 'string'\n    ? langString\n    : preferredPluralOption === 'value'\n      // Support cached older `langString` interface\n      ? (typeof langString === 'object' ? (langString as any).value : langString)\n      : typeof langString === 'object'\n        ? langString?.[preferredPluralOption] || langString.otherValue\n        : undefined;\n\n  if (!template || !template.trim() || value === undefined) {\n    return template;\n  }\n\n  const formattedValue = format === 'i' ? formatNumber(value) : value;\n  const result = typeof value === 'object' && !Array.isArray(value)\n    ? processTemplateJsx(template, formattedValue)\n    : processTemplate(template, formattedValue);\n  if (typeof value !== 'object' && typeof result === 'string') {\n    const cacheValue = Array.isArray(value) ? JSON.stringify(value) : value;\n    cache.set(`${key}_${cacheValue}_${format}${pluralValue ? `_${pluralValue}` : ''}`, result);\n  }\n\n  return result;\n}\n","// Source: https://github.com/sindresorhus/escape-string-regexp\n\nexport function escapeStringRegexp(string: string) {\n  // Escape characters with special meaning either inside or outside character sets.\n  // Use a simple backslash escape when its always valid, and a `\\xnn` escape when the simpler form would be disallowed by Unicode patterns stricter grammar.\n  return string\n    .replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&')\n    .replace(/-/g, '\\\\x2d');\n}\n","import * as langProvider from '../util/langProvider';\nimport useEffectOnce from './useEffectOnce';\nimport useForceUpdate from './useForceUpdate';\n\nexport type LangFn = langProvider.LangFn;\n\nconst useLang = (): LangFn => {\n  const forceUpdate = useForceUpdate();\n\n  useEffectOnce(() => {\n    return langProvider.addCallback(forceUpdate);\n  });\n\n  return langProvider.getTranslation;\n};\n\nexport default useLang;\n","type Parts = (string | false | undefined)[];\ntype PartsWithGlobals = (string | false | undefined | string[])[];\ntype ClassNameBuilder =\n  ((elementName: string, ...modifiers: PartsWithGlobals) => string)\n  & Record<string, string>;\n\nexport default function buildClassName(...parts: Parts) {\n  return parts.filter(Boolean).join(' ');\n}\n\nexport function createClassNameBuilder(componentName: string) {\n  return ((elementName: string, ...modifiers: PartsWithGlobals) => {\n    const baseName = elementName === '&' ? componentName : `${componentName}__${elementName}`;\n\n    return modifiers.reduce<string[]>((acc, modifier) => {\n      if (modifier) {\n        // A bit hacky way to pass global class names\n        if (Array.isArray(modifier)) {\n          acc.push(...modifier);\n        } else {\n          acc.push(`${baseName}--${modifier}`);\n        }\n      }\n\n      return acc;\n    }, [baseName]).join(' ');\n  }) as ClassNameBuilder;\n}\n","export const clamp = (num: number, min: number, max: number) => (Math.min(max, Math.max(min, num)));\nexport const isBetween = (num: number, min: number, max: number) => (num >= min && num <= max);\nexport const round = (num: number, decimals: number = 0) => Math.round(num * 10 ** decimals) / 10 ** decimals;\nexport const lerp = (start: number, end: number, interpolationRatio: number) => {\n  return (1 - interpolationRatio) * start + interpolationRatio * end;\n};\n\n// Fractional values cause blurry text & canvas. Round to even to keep whole numbers while centering\nexport function roundToNearestEven(value: number) {\n  return Math.round(value / 2) * 2;\n}\n","import { forceMutation } from '../lib/fasterdom/stricterdom';\nimport { Lethargy } from './lethargy';\nimport { clamp, round } from './math';\nimport { debounce } from './schedulers';\nimport { IS_IOS, IS_WINDOWS } from './windowEnvironment';\nimport windowSize from './windowSize';\n\nexport enum SwipeDirection {\n  Up,\n  Down,\n  Left,\n  Right,\n}\n\nexport interface MoveOffsets {\n  dragOffsetX: number;\n  dragOffsetY: number;\n}\n\ninterface CaptureOptions {\n  onCapture?: (e: MouseEvent | TouchEvent | WheelEvent) => void;\n  onRelease?: (e: MouseEvent | TouchEvent | WheelEvent) => void;\n  onDrag?: (\n    e: MouseEvent | TouchEvent | WheelEvent,\n    captureEvent: MouseEvent | TouchEvent | WheelEvent,\n    offsets: MoveOffsets,\n    cancelDrag?: (x: boolean, y: boolean) => void,\n  ) => void;\n  onSwipe?: (e: Event, direction: SwipeDirection, offsets: MoveOffsets) => boolean;\n  onZoom?: (e: TouchEvent | WheelEvent, params: {\n    // Absolute zoom level\n    zoom?: number;\n    // Relative zoom factor\n    zoomFactor?: number;\n\n    // center coordinate of the initial pinch\n    initialCenterX: number;\n    initialCenterY: number;\n\n    // offset of the pinch center (current from initial)\n    dragOffsetX: number;\n    dragOffsetY: number;\n\n    // center coordinate of the current pinch\n    currentCenterX: number;\n    currentCenterY: number;\n  }) => void;\n  onClick?: (e: MouseEvent | TouchEvent) => void;\n  onDoubleClick?: (e: MouseEvent | RealTouchEvent | WheelEvent, params: { centerX: number; centerY: number }) => void;\n  excludedClosestSelector?: string;\n  includedClosestSelector?: string;\n  selectorToPreventScroll?: string;\n  withNativeDrag?: boolean;\n  maxZoom?: number;\n  minZoom?: number;\n  doubleTapZoom?: number;\n  initialZoom?: number;\n  isNotPassive?: boolean;\n  withCursor?: boolean;\n  swipeThreshold?: number;\n  withWheelDrag?: boolean;\n}\n\n// https://stackoverflow.com/questions/11287877/how-can-i-get-e-offsetx-on-mobile-ipad\n// Android does not have this value, and iOS has it but as read-only\nexport interface RealTouchEvent extends TouchEvent {\n  pageX?: number;\n  pageY?: number;\n}\n\ntype TSwipeAxis =\n  'x'\n  | 'y'\n  | undefined;\n\nexport const IOS_SCREEN_EDGE_THRESHOLD = 20;\nexport const SWIPE_DIRECTION_THRESHOLD = 10;\nexport const SWIPE_DIRECTION_TOLERANCE = 1.5;\n\nconst MOVE_THRESHOLD = 15;\nconst SWIPE_THRESHOLD_DEFAULT = 20;\nconst RELEASE_WHEEL_ZOOM_DELAY = 150;\nconst RELEASE_WHEEL_DRAG_DELAY = 150;\n\nfunction getDistance(a: Touch, b?: Touch) {\n  if (!b) return 0;\n  return Math.hypot((b.pageX - a.pageX), (b.pageY - a.pageY));\n}\n\nfunction getTouchCenter(a: Touch, b: Touch) {\n  return {\n    x: (a.pageX + b.pageX) / 2,\n    y: (a.pageY + b.pageY) / 2,\n  };\n}\n\nlet lastClickTime = 0;\nconst lethargy = new Lethargy({\n  stability: 5,\n  sensitivity: 25,\n  tolerance: IS_WINDOWS ? 1 : 0.6, // Windows `scrollDelta` does not die down to 0\n  delay: 150,\n});\n\nexport function captureEvents(element: HTMLElement, options: CaptureOptions) {\n  let captureEvent: MouseEvent | RealTouchEvent | WheelEvent | undefined;\n  let hasMoved = false;\n  let hasSwiped = false;\n  let isZooming = false;\n  let initialDistance = 0;\n  let wheelZoom = options.initialZoom ?? 1;\n  let initialDragOffset = {\n    x: 0,\n    y: 0,\n  };\n  let isDragCanceled = {\n    x: false,\n    y: false,\n  };\n  const currentWindowSize = windowSize.get();\n  let initialTouchCenter = {\n    x: currentWindowSize.width / 2,\n    y: currentWindowSize.height / 2,\n  };\n  let initialSwipeAxis: TSwipeAxis | undefined;\n  const minZoom = options.minZoom ?? 1;\n  const maxZoom = options.maxZoom ?? 4;\n\n  function onCapture(e: MouseEvent | RealTouchEvent) {\n    const target = e.target as HTMLElement;\n    const {\n      excludedClosestSelector,\n      includedClosestSelector,\n      withNativeDrag,\n      withCursor,\n      onDrag,\n    } = options;\n\n    if (element !== target && !element.contains(target)) {\n      return;\n    }\n\n    if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA') {\n      return;\n    }\n\n    if (\n      (excludedClosestSelector && (target.matches(excludedClosestSelector) || target.closest(excludedClosestSelector)))\n      || (\n        includedClosestSelector && !(target.matches(includedClosestSelector) || target.closest(includedClosestSelector))\n      )\n    ) {\n      return;\n    }\n\n    captureEvent = e;\n\n    if (e.type === 'mousedown') {\n      if (!withNativeDrag && onDrag) {\n        e.preventDefault();\n      }\n\n      document.addEventListener('mousemove', onMove);\n      document.addEventListener('mouseup', onRelease);\n    } else if (e.type === 'touchstart') {\n      // We need to always listen on `touchstart` target:\n      // https://stackoverflow.com/questions/33298828/touch-move-event-dont-fire-after-touch-start-target-is-removed\n      target.addEventListener('touchmove', onMove, { passive: true });\n      target.addEventListener('touchend', onRelease, { passive: true });\n      target.addEventListener('touchcancel', onRelease, { passive: true });\n\n      if ('touches' in e) {\n        if (e.pageX === undefined) {\n          e.pageX = e.touches[0].pageX;\n        }\n\n        if (e.pageY === undefined) {\n          e.pageY = e.touches[0].pageY;\n        }\n\n        if (e.touches.length === 2) {\n          initialDistance = getDistance(e.touches[0], e.touches[1]);\n          initialTouchCenter = getTouchCenter(e.touches[0], e.touches[1]);\n        }\n      }\n    }\n\n    if (withCursor) {\n      document.body.classList.add('cursor-grabbing');\n    }\n\n    options.onCapture?.(e);\n  }\n\n  function onRelease(e?: MouseEvent | TouchEvent) {\n    if (captureEvent) {\n      if (options.withCursor) {\n        document.body.classList.remove('cursor-grabbing');\n      }\n\n      document.removeEventListener('mouseup', onRelease);\n      document.removeEventListener('mousemove', onMove);\n      (captureEvent.target as HTMLElement).removeEventListener('touchcancel', onRelease);\n      (captureEvent.target as HTMLElement).removeEventListener('touchend', onRelease);\n      (captureEvent.target as HTMLElement).removeEventListener('touchmove', onMove);\n\n      if (IS_IOS && options.selectorToPreventScroll) {\n        const nodes = Array.from(document.querySelectorAll<HTMLElement>(options.selectorToPreventScroll));\n\n        forceMutation(() => {\n          nodes.forEach((scrollable) => {\n            scrollable.style.overflow = '';\n          });\n        }, nodes);\n      }\n\n      if (e) {\n        if (hasMoved) {\n          if (options.onRelease) {\n            options.onRelease(e);\n          }\n        } else if (e.type === 'mouseup') {\n          if (options.onDoubleClick && Date.now() - lastClickTime < 300) {\n            options.onDoubleClick(e, {\n              centerX: captureEvent.pageX!,\n              centerY: captureEvent.pageY!,\n            });\n          } else if (options.onClick && (!('button' in e) || e.button === 0)) {\n            options.onClick(e);\n          }\n          lastClickTime = Date.now();\n        }\n      }\n    }\n\n    hasMoved = false;\n    hasSwiped = false;\n    isZooming = false;\n    initialDistance = 0;\n    wheelZoom = clamp(wheelZoom, minZoom, maxZoom);\n    initialSwipeAxis = undefined;\n    initialDragOffset = {\n      x: 0,\n      y: 0,\n    };\n    isDragCanceled = {\n      x: false,\n      y: false,\n    };\n    const newWindowSize = windowSize.get();\n    initialTouchCenter = {\n      x: newWindowSize.width / 2,\n      y: newWindowSize.height / 2,\n    };\n    captureEvent = undefined;\n  }\n\n  function onMove(e: MouseEvent | RealTouchEvent) {\n    if (captureEvent) {\n      if (e.type === 'touchmove' && ('touches' in e)) {\n        if (e.pageX === undefined) {\n          e.pageX = e.touches[0].pageX;\n        }\n\n        if (e.pageY === undefined) {\n          e.pageY = e.touches[0].pageY;\n        }\n\n        if (options.onZoom && initialDistance > 0 && e.touches.length === 2) {\n          const endDistance = getDistance(e.touches[0], e.touches[1]);\n          const touchCenter = getTouchCenter(e.touches[0], e.touches[1]);\n          const dragOffsetX = touchCenter.x - initialTouchCenter.x;\n          const dragOffsetY = touchCenter.y - initialTouchCenter.y;\n          const zoomFactor = endDistance / initialDistance;\n          options.onZoom(e, {\n            zoomFactor,\n            initialCenterX: initialTouchCenter.x,\n            initialCenterY: initialTouchCenter.y,\n            dragOffsetX,\n            dragOffsetY,\n            currentCenterX: touchCenter.x,\n            currentCenterY: touchCenter.y,\n          });\n          if (zoomFactor !== 1) hasMoved = true;\n        }\n      }\n\n      const dragOffsetX = e.pageX! - captureEvent.pageX!;\n      const dragOffsetY = e.pageY! - captureEvent.pageY!;\n\n      if (Math.abs(dragOffsetX) >= MOVE_THRESHOLD || Math.abs(dragOffsetY) >= MOVE_THRESHOLD) {\n        hasMoved = true;\n      }\n\n      let shouldPreventScroll = false;\n\n      if (options.onDrag) {\n        options.onDrag(e, captureEvent, {\n          dragOffsetX,\n          dragOffsetY,\n        });\n        shouldPreventScroll = true;\n      }\n\n      if (options.onSwipe && !hasSwiped) {\n        hasSwiped = onSwipe(e, dragOffsetX, dragOffsetY);\n        shouldPreventScroll = hasSwiped;\n      }\n\n      if (IS_IOS && shouldPreventScroll && options.selectorToPreventScroll) {\n        const nodes = Array.from(document.querySelectorAll<HTMLElement>(options.selectorToPreventScroll));\n\n        forceMutation(() => {\n          nodes.forEach((scrollable) => {\n            scrollable.style.overflow = 'hidden';\n          });\n        }, nodes);\n      }\n    }\n  }\n\n  function onSwipe(e: MouseEvent | RealTouchEvent, dragOffsetX: number, dragOffsetY: number) {\n    // Avoid conflicts with swipe-to-back gestures\n    if (IS_IOS) {\n      const x = 'touches' in e\n        ? e.touches[0].pageX // RealTouchEvent\n        : e.pageX; // Event on iPad or iPhone with connected mouse\n      if (x <= IOS_SCREEN_EDGE_THRESHOLD || x >= windowSize.get().width - IOS_SCREEN_EDGE_THRESHOLD) {\n        return false;\n      }\n    }\n\n    const xAbs = Math.abs(dragOffsetX);\n    const yAbs = Math.abs(dragOffsetY);\n    const threshold = options.swipeThreshold ?? SWIPE_THRESHOLD_DEFAULT;\n\n    let axis: TSwipeAxis | undefined;\n    if (xAbs > yAbs && xAbs >= threshold) {\n      axis = 'x';\n    } else if (yAbs > xAbs && yAbs >= threshold) {\n      axis = 'y';\n    }\n\n    if (!axis) {\n      return false;\n    }\n\n    if (!initialSwipeAxis) {\n      initialSwipeAxis = axis;\n    } else if (initialSwipeAxis !== axis) {\n      // Prevent horizontal swipe after vertical to prioritize scroll\n      return false;\n    }\n\n    return processSwipe(e, axis, dragOffsetX, dragOffsetY, options.onSwipe!);\n  }\n\n  const releaseWheelDrag = debounce(onRelease, RELEASE_WHEEL_DRAG_DELAY, false);\n  const releaseWheelZoom = debounce(onRelease, RELEASE_WHEEL_ZOOM_DELAY, false);\n\n  function onWheelCapture(e: WheelEvent) {\n    if (hasMoved) return;\n    onCapture(e);\n    hasMoved = true;\n    initialTouchCenter = { x: e.x, y: e.y };\n  }\n\n  function onWheelZoom(e: WheelEvent) {\n    if (!options.onZoom) return;\n    onWheelCapture(e);\n    const dragOffsetX = e.x - initialTouchCenter.x;\n    const dragOffsetY = e.y - initialTouchCenter.y;\n    const delta = clamp(e.deltaY, -25, 25);\n    wheelZoom -= delta * 0.01;\n    wheelZoom = clamp(wheelZoom, minZoom * 0.5, maxZoom * 3);\n    isZooming = true;\n    options.onZoom(e, {\n      zoom: round(wheelZoom, 2),\n      initialCenterX: initialTouchCenter.x,\n      initialCenterY: initialTouchCenter.y,\n      dragOffsetX,\n      dragOffsetY,\n      currentCenterX: e.x,\n      currentCenterY: e.y,\n    });\n    releaseWheelZoom(e);\n  }\n\n  function onWheelDrag(e: WheelEvent) {\n    if (!options.onDrag) return;\n    onWheelCapture(e);\n    // Ignore wheel inertia if drag is canceled in this direction\n    if (!isDragCanceled.x || Math.sign(initialDragOffset.x) === Math.sign(e.deltaX)) {\n      initialDragOffset.x -= e.deltaX;\n    }\n    if (!isDragCanceled.y || Math.sign(initialDragOffset.y) === Math.sign(e.deltaY)) {\n      initialDragOffset.y -= e.deltaY;\n    }\n    const { x, y } = initialDragOffset;\n    options.onDrag(e, captureEvent!, {\n      dragOffsetX: x,\n      dragOffsetY: y,\n    }, (dx, dy) => {\n      isDragCanceled = { x: dx, y: dy };\n    });\n    releaseWheelDrag(e);\n  }\n\n  function onWheel(e: WheelEvent) {\n    if (!options.onZoom && !options.onDrag) return;\n    if (options.excludedClosestSelector && (\n      (e.target as HTMLElement).matches(options.excludedClosestSelector)\n      || (e.target as HTMLElement).closest(options.excludedClosestSelector)\n    )) {\n      return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n    const { doubleTapZoom = 3 } = options;\n    if (options.onDoubleClick && Object.is(e.deltaX, -0) && Object.is(e.deltaY, -0) && e.ctrlKey) {\n      onWheelCapture(e);\n      wheelZoom = wheelZoom > 1 ? 1 : doubleTapZoom;\n      options.onDoubleClick(e, { centerX: e.pageX, centerY: e.pageY });\n      hasMoved = false;\n      return;\n    }\n    const metaKeyPressed = e.metaKey || e.ctrlKey || e.shiftKey;\n    if (metaKeyPressed) {\n      onWheelZoom(e);\n    }\n    if (!metaKeyPressed && !isZooming) {\n      // Check if this event produced by user scroll and not by inertia\n      const isUserEvent = lethargy.check(e);\n      if (wheelZoom !== 1 || isUserEvent) {\n        onWheelDrag(e);\n      }\n    }\n  }\n\n  if (options.withWheelDrag) {\n    element.addEventListener('wheel', onWheel);\n  }\n\n  element.addEventListener('mousedown', onCapture);\n  document.body.addEventListener('touchstart', onCapture, { passive: !options.isNotPassive });\n\n  return () => {\n    onRelease();\n    document.body.removeEventListener('touchstart', onCapture);\n    element.removeEventListener('mousedown', onCapture);\n    element.removeEventListener('wheel', onWheel);\n  };\n}\n\nfunction processSwipe(\n  e: Event,\n  currentSwipeAxis: TSwipeAxis,\n  dragOffsetX: number,\n  dragOffsetY: number,\n  onSwipe: (e: Event, direction: SwipeDirection, offsets: MoveOffsets) => boolean,\n) {\n  const offsets = { dragOffsetX, dragOffsetY };\n\n  if (currentSwipeAxis === 'x') {\n    if (dragOffsetX < 0) {\n      return onSwipe(e, SwipeDirection.Left, offsets);\n    } else {\n      return onSwipe(e, SwipeDirection.Right, offsets);\n    }\n  } else if (currentSwipeAxis === 'y') {\n    if (dragOffsetY < 0) {\n      return onSwipe(e, SwipeDirection.Up, offsets);\n    } else {\n      return onSwipe(e, SwipeDirection.Down, offsets);\n    }\n  }\n\n  return false;\n}\n","/**\n * Lethargy help distinguish between scroll events initiated by the user, and those by inertial scrolling.\n * Lethargy does not have external dependencies.\n *\n * @param stability - Specifies the length of the rolling average.\n * In effect, the larger the value, the smoother the curve will be.\n * This attempts to prevent anomalies from firing 'real' events. Valid values are all positive integers,\n * but in most cases, you would need to stay between 5 and around 30.\n *\n * @param sensitivity - Specifies the minimum value for wheelDelta for it to register as a valid scroll event.\n * Because the tail of the curve have low wheelDelta values,\n * this will stop them from registering as valid scroll events.\n * The unofficial standard wheelDelta is 120, so valid values are positive integers below 120.\n *\n * @param tolerance - Prevent small fluctuations from affecting results.\n * Valid values are decimals from 0, but should ideally be between 0.05 and 0.3.\n *\n * Based on https://github.com/d4nyll/lethargy\n */\n\nexport type LethargyConfig = {\n  stability?: number;\n  sensitivity?: number;\n  tolerance?: number;\n  delay?: number;\n};\n\nexport class Lethargy {\n  stability: number;\n\n  sensitivity: number;\n\n  tolerance: number;\n\n  delay: number;\n\n  lastUpDeltas: Array<number>;\n\n  lastDownDeltas: Array<number>;\n\n  deltasTimestamp: Array<number>;\n\n  constructor({\n    stability = 8,\n    sensitivity = 100,\n    tolerance = 1.1,\n    delay = 150,\n  }: LethargyConfig = {}) {\n    this.stability = stability;\n    this.sensitivity = sensitivity;\n    this.tolerance = tolerance;\n    this.delay = delay;\n    this.lastUpDeltas = new Array(this.stability * 2).fill(0);\n    this.lastDownDeltas = new Array(this.stability * 2).fill(0);\n    this.deltasTimestamp = new Array(this.stability * 2).fill(0);\n  }\n\n  check(e: any) {\n    let lastDelta;\n    e = e.originalEvent || e;\n    if (e.wheelDelta !== undefined) {\n      lastDelta = e.wheelDelta;\n    } else if (e.deltaY !== undefined) {\n      lastDelta = e.deltaY * -40;\n    } else if (e.detail !== undefined || e.detail === 0) {\n      lastDelta = e.detail * -40;\n    }\n    this.deltasTimestamp.push(Date.now());\n    this.deltasTimestamp.shift();\n    if (lastDelta > 0) {\n      this.lastUpDeltas.push(lastDelta);\n      this.lastUpDeltas.shift();\n      return this.isInertia(1);\n    } else {\n      this.lastDownDeltas.push(lastDelta);\n      this.lastDownDeltas.shift();\n      return this.isInertia(-1);\n    }\n  }\n\n  isInertia(direction: number) {\n    const lastDeltas = direction === -1 ? this.lastDownDeltas : this.lastUpDeltas;\n    if (lastDeltas[0] === undefined) return direction;\n    if (\n      this.deltasTimestamp[this.stability * 2 - 2] + this.delay > Date.now()\n      && lastDeltas[0] === lastDeltas[this.stability * 2 - 1]\n    ) {\n      return false;\n    }\n    const lastDeltasOld = lastDeltas.slice(0, this.stability);\n    const lastDeltasNew = lastDeltas.slice(this.stability, this.stability * 2);\n    const oldSum = lastDeltasOld.reduce((t, s) => t + s);\n    const newSum = lastDeltasNew.reduce((t, s) => t + s);\n    const oldAverage = oldSum / lastDeltasOld.length;\n    const newAverage = newSum / lastDeltasNew.length;\n    return Math.abs(oldAverage) < Math.abs(newAverage * this.tolerance)\n      && this.sensitivity < Math.abs(newAverage);\n  }\n}\n","type HandlerName = 'onEnter' | 'onBackspace' | 'onDelete' | 'onEsc' | 'onUp' | 'onDown' | 'onLeft' | 'onRight'\n  | 'onTab';\ntype EventHandler = (e: KeyboardEvent) => boolean | void | Promise<void>;\ntype HandlerWithOptions = {\n  handler: (e: KeyboardEvent) => void;\n  shouldPreventDefault?: boolean;\n  noStopPropagation?: boolean;\n};\n\ntype Handler = EventHandler | HandlerWithOptions;\n\ntype CaptureOptions = Partial<Record<HandlerName, Handler>>;\n\nconst keyToHandlerName: Record<string, HandlerName> = {\n  Enter: 'onEnter',\n  Backspace: 'onBackspace',\n  Delete: 'onDelete',\n  Esc: 'onEsc',\n  Escape: 'onEsc',\n  ArrowUp: 'onUp',\n  ArrowDown: 'onDown',\n  ArrowLeft: 'onLeft',\n  ArrowRight: 'onRight',\n  Tab: 'onTab',\n};\n\nconst handlers: Record<HandlerName, Handler[]> = {\n  onEnter: [],\n  onDelete: [],\n  onBackspace: [],\n  onEsc: [],\n  onUp: [],\n  onDown: [],\n  onLeft: [],\n  onRight: [],\n  onTab: [],\n};\n\nexport default function captureKeyboardListeners(options: CaptureOptions) {\n  if (!hasActiveHandlers()) {\n    document.addEventListener('keydown', handleKeyDown, true);\n  }\n\n  (Object.keys(options) as Array<HandlerName>).forEach((handlerName) => {\n    const option = options[handlerName];\n    if (!option) {\n      return;\n    }\n\n    const currentEventHandlers = handlers[handlerName];\n    if (currentEventHandlers) {\n      currentEventHandlers.push(option);\n    }\n  });\n\n  return () => {\n    releaseKeyboardListener(options);\n  };\n}\n\nfunction hasActiveHandlers() {\n  return Object.values(handlers).some((keyHandlers) => Boolean(keyHandlers.length));\n}\n\nfunction handleKeyDown(e: KeyboardEvent) {\n  const handlerName = keyToHandlerName[e.key];\n  if (!handlerName) {\n    return;\n  }\n\n  const { length } = handlers[handlerName];\n  if (!length) {\n    return;\n  }\n\n  const handlerOrOptions = handlers[handlerName][length - 1];\n\n  if (typeof handlerOrOptions === 'function') {\n    void handlerOrOptions(e);\n\n    e.stopPropagation();\n  } else {\n    const { handler, noStopPropagation, shouldPreventDefault } = handlerOrOptions;\n    if (!noStopPropagation) {\n      e.stopPropagation();\n    }\n    if (shouldPreventDefault) {\n      e.preventDefault();\n    }\n    handler(e);\n  }\n}\n\nfunction releaseKeyboardListener(options: CaptureOptions) {\n  (Object.keys(options) as Array<HandlerName>).forEach((handlerName) => {\n    const option = options[handlerName];\n    const currentEventHandlers = handlers[handlerName];\n    if (currentEventHandlers) {\n      const index = currentEventHandlers.findIndex((cb) => {\n        if (typeof cb === 'function') {\n          return cb === option;\n        } else {\n          return option && 'handler' in option && cb.handler === option.handler;\n        }\n      });\n\n      if (index !== -1) {\n        currentEventHandlers.splice(index, 1);\n      }\n    }\n  });\n\n  if (!hasActiveHandlers()) {\n    document.removeEventListener('keydown', handleKeyDown, false);\n  }\n}\n","let counter = 0;\n\nexport function disableSwipeToClose() {\n  counter += 1;\n}\n\nexport function enableSwipeToClose() {\n  counter -= 1;\n}\n\nexport function getIsSwipeToCloseDisabled() {\n  return counter > 0;\n}\n","export default function trapFocus(element: HTMLElement) {\n  function handleKeyDown(e: KeyboardEvent) {\n    if (e.key !== 'Tab') {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const focusableElements = Array.from(\n      element.querySelectorAll<HTMLElement>('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'),\n    );\n    if (!focusableElements.length) {\n      return;\n    }\n\n    const currentFocusedIndex = focusableElements.findIndex((em) => em.isSameNode(document.activeElement));\n    let newFocusedIndex = 0;\n    if (currentFocusedIndex >= 0) {\n      if (e.shiftKey) {\n        newFocusedIndex = currentFocusedIndex > 0\n          ? currentFocusedIndex - 1\n          : focusableElements.length - 1;\n      } else {\n        newFocusedIndex = currentFocusedIndex < focusableElements.length - 1\n          ? currentFocusedIndex + 1\n          : 0;\n      }\n    }\n\n    focusableElements[newFocusedIndex].focus();\n  }\n\n  document.addEventListener('keydown', handleKeyDown, false);\n\n  return () => {\n    document.removeEventListener('keydown', handleKeyDown, false);\n  };\n}\n","export default function cssColorToHex(cssColor: string) {\n  if (/^#[0-9A-F]{6}$/i.test(cssColor)) return cssColor;\n\n  return `#${cssColor.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+\\.{0,1}\\d*))?\\)$/)!\n    .slice(1)\n    .map((n: string, i: number) => (i === 3 ? Math.round(parseFloat(n) * 255) : parseFloat(n))\n      .toString(16)\n      .padStart(2, '0')\n      .replace('NaN', ''))\n    .join('')}`;\n}\n","/// <reference types=\"@capacitor/cli\" />\nexport var Style;\n(function (Style) {\n    /**\n     * Light text for dark backgrounds.\n     *\n     * @since 1.0.0\n     */\n    Style[\"Dark\"] = \"DARK\";\n    /**\n     * Dark text for light backgrounds.\n     *\n     * @since 1.0.0\n     */\n    Style[\"Light\"] = \"LIGHT\";\n    /**\n     * The style is based on the device appearance.\n     * If the device is using Dark mode, the statusbar text will be light.\n     * If the device is using Light mode, the statusbar text will be dark.\n     *\n     * @since 1.0.0\n     */\n    Style[\"Default\"] = \"DEFAULT\";\n})(Style || (Style = {}));\nexport var Animation;\n(function (Animation) {\n    /**\n     * No animation during show/hide.\n     *\n     * @since 1.0.0\n     */\n    Animation[\"None\"] = \"NONE\";\n    /**\n     * Slide animation during show/hide.\n     * It doesn't work on iOS 15+.\n     *\n     * @deprecated Use Animation.Fade or Animation.None instead.\n     *\n     * @since 1.0.0\n     */\n    Animation[\"Slide\"] = \"SLIDE\";\n    /**\n     * Fade animation during show/hide.\n     *\n     * @since 1.0.0\n     */\n    Animation[\"Fade\"] = \"FADE\";\n})(Animation || (Animation = {}));\n/**\n * @deprecated Use `Animation`.\n * @since 1.0.0\n */\nexport const StatusBarAnimation = Animation;\n/**\n * @deprecated Use `Style`.\n * @since 1.0.0\n */\nexport const StatusBarStyle = Style;\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst StatusBar = registerPlugin('StatusBar');\nexport * from './definitions';\nexport { StatusBar };\n//# sourceMappingURL=index.js.map","export var NavigationBarPluginEvents;\n(function (NavigationBarPluginEvents) {\n    /**\n     * Called after the navigation bar is displayed\n     */\n    NavigationBarPluginEvents[\"SHOW\"] = \"onShow\";\n    /**\n     * Called after navigation bar is hidden\n     */\n    NavigationBarPluginEvents[\"HIDE\"] = \"onHide\";\n    /**\n     * Called after navigation bar color is changed\n     */\n    NavigationBarPluginEvents[\"COLOR_CHANGE\"] = \"onColorChange\";\n})(NavigationBarPluginEvents || (NavigationBarPluginEvents = {}));\n//# sourceMappingURL=navigationbar.events.js.map","import { registerPlugin } from '@capacitor/core';\nconst NavigationBar = registerPlugin('NavigationBar', {\n    web: () => import('./web').then(m => new m.NavigationBarWeb()),\n});\nexport * from './definitions';\nexport * from './navigationbar.events';\nexport { NavigationBar };\n//# sourceMappingURL=index.js.map","import { getGlobal } from '../global';\n\nimport type { Theme } from '../global/types';\n\nimport { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\nimport { switchStatusBar } from './capacitor/switchStatusBar';\nimport cssColorToHex from './cssColorToHex';\nimport { getTelegramApp, getTelegramAppAsync } from './telegram';\n\nconst prefersDark = window.matchMedia('(prefers-color-scheme: dark)');\nlet currentTheme: Theme;\nlet forcedDarkStatusBarBackground: boolean | undefined;\n\nexport default function switchTheme(theme: Theme, isInModal?: boolean) {\n  currentTheme = theme;\n\n  setThemeValue();\n  setStatusBarStyle({ isInModal });\n  setThemeColor();\n}\n\nfunction setThemeValue() {\n  const isDarkTheme = currentTheme === 'dark'\n    || (currentTheme === 'system'\n      && (IS_TELEGRAM_APP\n        ? getTelegramApp()?.colorScheme === 'dark'\n        : prefersDark.matches)\n    );\n\n  document.documentElement.classList.toggle('theme-dark', isDarkTheme);\n}\n\nfunction handlePrefersColorSchemeChange() {\n  setThemeValue();\n  setStatusBarStyle();\n}\n\nfunction setThemeColor() {\n  requestMeasure(() => {\n    const color = getComputedStyle(document.documentElement)\n      .getPropertyValue('--color-background-second');\n\n    document\n      .querySelector('meta[name=\"theme-color\"]')\n      ?.setAttribute('content', color);\n  });\n}\n\nexport function setStatusBarStyle(options?: { forceDarkBackground?: boolean; isInModal?: boolean }) {\n  if (IS_TELEGRAM_APP) {\n    requestMeasure(() => {\n      const color = getComputedStyle(document.documentElement)\n        .getPropertyValue('--color-background-second');\n      if (!color) return;\n\n      const hexColor = cssColorToHex(color) as `#${string}`;\n\n      getTelegramApp()?.setHeaderColor(hexColor);\n      getTelegramApp()?.setBackgroundColor(hexColor);\n      getTelegramApp()?.setBottomBarColor(hexColor);\n    });\n\n    return;\n  }\n  if (!IS_CAPACITOR) return;\n\n  if (options?.forceDarkBackground !== undefined) forcedDarkStatusBarBackground = options.forceDarkBackground;\n  switchStatusBar(currentTheme, prefersDark.matches, forcedDarkStatusBarBackground, options?.isInModal);\n}\n\nprefersDark.addEventListener('change', handlePrefersColorSchemeChange);\n\nif (IS_TELEGRAM_APP) {\n  void getTelegramAppAsync().then((telegramApp) => {\n    telegramApp!.onEvent('themeChanged', onThemeChanged);\n  });\n}\n\nexport function unsubscribeOnTelegramThemeChange() {\n  getTelegramApp()?.offEvent('themeChanged', onThemeChanged);\n}\n\nfunction onThemeChanged() {\n  if (getGlobal().settings.theme === 'system') {\n    handlePrefersColorSchemeChange();\n  }\n}\n","import { StatusBar, Style } from '@capacitor/status-bar';\nimport { NavigationBar } from '@mauricewegner/capacitor-navigation-bar';\n\nimport type { Theme } from '../../global/types';\n\nimport {\n  IS_ANDROID_APP,\n} from '../windowEnvironment';\n\nexport function switchStatusBar(\n  currentAppTheme: Theme, isSystemDark: boolean, forceDarkBackground?: boolean, isModalOpen?: boolean,\n) {\n  const style = forceDarkBackground || currentAppTheme === 'dark'\n    ? Style.Dark\n    : (isSystemDark && currentAppTheme === 'system' ? Style.Dark : Style.Light);\n\n  void StatusBar.setStyle({ style, isModalOpen });\n  if (IS_ANDROID_APP) {\n    void NavigationBar.setColor({\n      color: '#00000000',\n      darkButtons: currentAppTheme === 'light' || (!isSystemDark && currentAppTheme === 'system'),\n    });\n  }\n}\n","/**\n * Pulled from @react-hookz/web library source with some edits to match the code-style and use Teact\n * See https://github.com/react-hookz/web/blob/master/src/useMediaQuery/useMediaQuery.ts\n */\n\nimport type { Dispatch } from 'react';\nimport { useEffect, useState } from '../lib/teact/teact';\n\ntype QueryStateSetter = (matches: boolean) => void;\n\n// eslint-disable-next-line @stylistic/max-len\nconst queriesMap = new Map<string, { mql: MediaQueryList; dispatchers: Set<Dispatch<boolean>>; listener: () => void }>();\n\nconst createQueryEntry = (query: string) => {\n  const mql = matchMedia(query);\n  const dispatchers = new Set<QueryStateSetter>();\n  const listener = () => {\n    dispatchers.forEach((d) => d(mql.matches));\n  };\n\n  if (mql.addEventListener) mql.addEventListener('change', listener, { passive: true });\n  else mql.addListener(listener);\n\n  return {\n    mql,\n    dispatchers,\n    listener,\n  };\n};\n\nconst querySubscribe = (query: string, setState: QueryStateSetter) => {\n  let entry = queriesMap.get(query);\n\n  if (!entry) {\n    entry = createQueryEntry(query);\n    queriesMap.set(query, entry);\n  }\n\n  entry.dispatchers.add(setState);\n  setState(entry.mql.matches);\n};\n\nconst queryUnsubscribe = (query: string, setState: QueryStateSetter): void => {\n  const entry = queriesMap.get(query);\n\n  if (!entry) {\n    return;\n  }\n\n  const { mql, dispatchers, listener } = entry;\n  dispatchers.delete(setState);\n\n  if (!dispatchers.size) {\n    queriesMap.delete(query);\n\n    if (mql.removeEventListener) mql.removeEventListener('change', listener);\n    else mql.removeListener(listener);\n  }\n};\n\ninterface UseMediaQueryOptions {\n  initializeWithValue?: boolean;\n}\n\n/**\n * Tracks the state of CSS media query.\n *\n * @param query CSS media query to track.\n * @param options Hook options:\n * `initializeWithValue` (default: `true`) - Determine media query match state on first render. Setting\n * this to false will make the hook yield `undefined` on first render.\n */\nexport function useMediaQuery(query: string, options?: UseMediaQueryOptions): boolean | undefined {\n  function getInitialState() {\n    if (options?.initializeWithValue ?? true) {\n      let entry = queriesMap.get(query);\n      if (!entry) {\n        entry = createQueryEntry(query);\n        queriesMap.set(query, entry);\n      }\n      return entry.mql.matches;\n    }\n\n    return undefined;\n  }\n\n  const [state, setState] = useState<boolean | undefined>(getInitialState());\n\n  useEffect(() => {\n    querySubscribe(query, setState);\n\n    return () => queryUnsubscribe(query, setState);\n  }, [query]);\n\n  return state;\n}\n","import { MOBILE_SCREEN_MAX_WIDTH } from '../config';\nimport { useMediaQuery } from './useMediaQuery';\n\nlet isPortrait: boolean | undefined;\n\nexport function useDeviceScreen() {\n  isPortrait = useMediaQuery(`(max-width: ${MOBILE_SCREEN_MAX_WIDTH - 0.02}px)`);\n  const isSmallHeight = useMediaQuery('(max-height: 43.5rem)');\n\n  return {\n    isPortrait: Boolean(isPortrait),\n    isSmallHeight,\n    isLandscape: !isPortrait,\n    screenHeight: window.screen.height,\n  };\n}\n\nexport function getIsPortrait() {\n  return isPortrait;\n}\n\nexport function getIsLandscape() {\n  return !isPortrait;\n}\n","import { useEffect, useRef } from '../lib/teact/teact';\n\nconst useEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T, debugKey?: string,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies, debugKey);\n};\n\nexport default useEffectWithPrevDeps;\n","import type { HTMLInputTypeAttribute } from 'react';\nimport type { BottomSheetKeys } from '@mytonwallet/native-bottom-sheet';\nimport { BottomSheet } from '@mytonwallet/native-bottom-sheet';\nimport type { SafeAreaInsets } from 'capacitor-plugin-safe-area';\nimport { SafeArea } from 'capacitor-plugin-safe-area';\nimport { type ElementRef, useEffect, useLayoutEffect, useState } from '../lib/teact/teact';\nimport { forceOnHeavyAnimationOnce } from '../lib/teact/teactn';\nimport { setGlobal } from '../global';\n\nimport type { GlobalState } from '../global/types';\n\nimport { bigintReviver } from '../util/bigint';\nimport cssColorToHex from '../util/cssColorToHex';\nimport { setStatusBarStyle } from '../util/switchTheme';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../util/windowEnvironment';\nimport { useDeviceScreen } from './useDeviceScreen';\nimport useEffectWithPrevDeps from './useEffectWithPrevDeps';\n\nconst BLUR_TIMEOUT = 50;\nconst COMPACT_MODAL_CSS_SELECTOR = '.is-compact-modal';\n\nconst controlledByMain = new Map<BottomSheetKeys, NoneToVoidFunction>();\n\nconst textInputTypes = new Set<HTMLInputTypeAttribute>([\n  'color', 'date', 'datetime-local', 'email', 'month', 'number',\n  'password', 'search', 'tel', 'text', 'time', 'url', 'week',\n]);\n\nlet safeAreaCache: SafeAreaInsets['insets'] | undefined;\nconst safeAreaPromise = SafeArea.getSafeAreaInsets().then(({ insets }) => {\n  safeAreaCache = insets;\n  return safeAreaCache;\n});\n\nlet currentKey: BottomSheetKeys | undefined;\n\nif (IS_DELEGATED_BOTTOM_SHEET) {\n  void BottomSheet.addListener('delegate', ({ key, globalJson }: { key: BottomSheetKeys; globalJson: string }) => {\n    currentKey = key;\n    controlledByMain.get(key)?.();\n\n    setGlobal(\n      JSON.parse(globalJson, bigintReviver) as GlobalState,\n      { forceOutdated: true, forceSyncOnIOs: true },\n    );\n  });\n\n  void BottomSheet.addListener('move', () => {\n    window.dispatchEvent(new Event('viewportmove'));\n  });\n}\n\nlet isForcedFullSize: boolean;\n\nexport function getIsForcedFullSize() {\n  return isForcedFullSize;\n}\n\nexport function useDelegatedBottomSheet(\n  key: BottomSheetKeys | undefined,\n  isOpen: boolean | undefined,\n  onClose: AnyToVoidFunction,\n  dialogRef: ElementRef<HTMLDivElement>,\n  forceFullNative = false,\n  noResetHeightOnBlur = false,\n) {\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    if (!IS_DELEGATED_BOTTOM_SHEET || !key || key !== currentKey) return;\n\n    if (isOpen) {\n      const dialogEl = dialogRef.current!;\n\n      void BottomSheet.openSelf({\n        key,\n        height: String(dialogEl.offsetHeight),\n        backgroundColor: cssColorToHex(getComputedStyle(dialogEl).backgroundColor),\n      }).then(() => {\n        forceOnHeavyAnimationOnce();\n        onClose();\n      });\n    } else if (prevIsOpen) {\n      void BottomSheet.closeSelf({ key });\n      setStatusBarStyle({\n        forceDarkBackground: false,\n      });\n    }\n  }, [isOpen, dialogRef, key, onClose]);\n\n  const isDelegatedAndOpen = IS_DELEGATED_BOTTOM_SHEET && key && isOpen;\n\n  const { screenHeight } = useDeviceScreen();\n  const [safeArea, setSafeArea] = useState(safeAreaCache);\n  void safeAreaPromise.then(setSafeArea);\n  // We use Safe Area plugin instead of CSS `env()` function as it does not depend on modal position\n  const maxHeight = screenHeight - (safeArea?.top || 0);\n\n  useLayoutEffect(() => {\n    if (!isDelegatedAndOpen) return;\n\n    dialogRef.current!.style[forceFullNative ? 'maxHeight' : 'height'] = '';\n    dialogRef.current!.style[forceFullNative ? 'height' : 'maxHeight'] = `${maxHeight}px`;\n  }, [dialogRef, forceFullNative, isDelegatedAndOpen, maxHeight]);\n\n  useEffectWithPrevDeps(([prevForceFullNative]) => {\n    if (!isDelegatedAndOpen) return;\n\n    isForcedFullSize = forceFullNative;\n\n    // Skip initial opening\n    if (forceFullNative !== undefined && prevForceFullNative === undefined) return;\n\n    void BottomSheet.toggleSelfFullSize({ isFullSize: forceFullNative });\n  }, [forceFullNative, isDelegatedAndOpen]);\n\n  useLayoutEffect(() => {\n    if (!isDelegatedAndOpen) return undefined;\n\n    const dialogEl = dialogRef.current!;\n    let blurTimeout: number | undefined;\n\n    function onFocus(e: FocusEvent) {\n      if (!isInput(e.target)) {\n        return;\n      }\n\n      if (blurTimeout) {\n        clearTimeout(blurTimeout);\n        blurTimeout = undefined;\n        return;\n      }\n\n      preventScrollOnFocus(dialogEl);\n\n      void BottomSheet.toggleSelfFullSize({ isFullSize: true });\n    }\n\n    function onBlur(e: FocusEvent) {\n      if (!isInput(e.target) || noResetHeightOnBlur || forceFullNative || isInCompactModal(e.target)) {\n        return;\n      }\n\n      blurTimeout = window.setTimeout(() => {\n        blurTimeout = undefined;\n        void BottomSheet.toggleSelfFullSize({ isFullSize: false });\n      }, BLUR_TIMEOUT);\n    }\n\n    document.addEventListener('focusin', onFocus);\n    document.addEventListener('focusout', onBlur);\n\n    return () => {\n      document.removeEventListener('focusout', onBlur);\n      document.removeEventListener('focusin', onFocus);\n    };\n  }, [dialogRef, forceFullNative, isDelegatedAndOpen, noResetHeightOnBlur]);\n}\n\nexport function useOpenFromMainBottomSheet(\n  key: BottomSheetKeys,\n  open: NoneToVoidFunction,\n) {\n  useEffect(() => {\n    if (!IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    controlledByMain.set(key, open);\n\n    if (currentKey === key) {\n      open();\n    }\n\n    return () => {\n      if (controlledByMain.get(key) === open) {\n        controlledByMain.delete(key);\n      }\n    };\n  }, [key, open]);\n}\n\nexport function openInMain(key: BottomSheetKeys) {\n  void BottomSheet.openInMain({ key });\n}\n\nfunction isInput(el?: EventTarget | null) {\n  if (!el || !(el instanceof HTMLElement)) return false;\n\n  return (el.tagName === 'INPUT' && textInputTypes.has((el as HTMLInputElement).type))\n    || el.tagName === 'TEXTAREA'\n    || (el.tagName === 'DIV' && el.isContentEditable);\n}\n\nfunction isInCompactModal(el?: EventTarget | null) {\n  if (!el || !(el instanceof HTMLElement)) return false;\n\n  return el.matches(COMPACT_MODAL_CSS_SELECTOR) || !!el.closest('.is-compact-modal');\n}\n\nfunction preventScrollOnFocus(el: HTMLDivElement) {\n  el.style.opacity = '0';\n  setTimeout(() => {\n    el.style.opacity = '1';\n  });\n\n  document.documentElement.scrollTop = 0;\n}\n","import type { BottomSheetKeys } from '@mytonwallet/native-bottom-sheet';\nimport { BottomSheet } from '@mytonwallet/native-bottom-sheet';\nimport { useEffect } from '../lib/teact/teact';\nimport { forceOnHeavyAnimationOnce } from '../lib/teact/teactn';\nimport { getGlobal } from '../global';\n\nimport { pause } from '../util/schedulers';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../util/windowEnvironment';\nimport useEffectWithPrevDeps from './useEffectWithPrevDeps';\n\nconst RACE_TIMEOUT = 1000;\nconst CLOSING_DURATION = 100;\n\nconst controlledByNative = new Map<BottomSheetKeys, NoneToVoidFunction>();\n\nif (IS_DELEGATING_BOTTOM_SHEET) {\n  void BottomSheet.prepare();\n\n  void BottomSheet.addListener(\n    'openInMain',\n    ({ key }: { key: BottomSheetKeys }) => {\n      controlledByNative.get(key)?.();\n    },\n  );\n}\n\nlet lastOpenCall = Promise.resolve();\nlet closeCurrent: NoneToVoidFunction | undefined;\n\nexport function useDelegatingBottomSheet(\n  key: BottomSheetKeys | undefined,\n  isPortrait: boolean | undefined,\n  isOpen: boolean | undefined,\n  onClose: AnyToVoidFunction,\n) {\n  const isDelegating = IS_DELEGATING_BOTTOM_SHEET && key;\n  const shouldOpen = isOpen && isPortrait;\n\n  useEffectWithPrevDeps(([prevShouldOpen]) => {\n    if (!isDelegating) return;\n\n    if (shouldOpen) {\n      closeCurrent?.();\n\n      const closeNext = () => {\n        forceOnHeavyAnimationOnce();\n        onClose();\n      };\n\n      closeCurrent = closeNext;\n\n      // Wait until previous call resolves to get an up-to-date global\n      lastOpenCall = Promise.race([\n        lastOpenCall,\n        pause(RACE_TIMEOUT), // Sometimes the last open call is stuck for some unknown reason\n      ])\n        .then(() => {\n          return BottomSheet.delegate({\n            key,\n            globalJson: JSON.stringify(getGlobal()),\n          });\n        })\n        .then(() => {\n          if (closeCurrent === closeNext) {\n            closeCurrent();\n            closeCurrent = undefined;\n          }\n        })\n        .then(() => pause(CLOSING_DURATION));\n    } else if (prevShouldOpen) {\n      void BottomSheet.release({ key });\n    }\n  }, [shouldOpen, isDelegating, key, onClose]);\n\n  return isDelegating && isPortrait;\n}\n\nexport function useOpenFromNativeBottomSheet(\n  key: BottomSheetKeys,\n  open: NoneToVoidFunction,\n) {\n  useEffect(() => {\n    if (!IS_DELEGATING_BOTTOM_SHEET) return undefined;\n\n    controlledByNative.set(key, open);\n\n    return () => {\n      if (controlledByNative.get(key) === open) {\n        controlledByNative.delete(key);\n      }\n    };\n  }, [key, open]);\n}\n","import { logDebugError } from '../logs';\nimport { debounce } from '../schedulers';\nimport { getTelegramApp } from './index';\n\ninterface CallbackEntry {\n  id: number;\n  callback: NoneToVoidFunction;\n}\n\nconst runDebounce = debounce((cb) => cb(), 300, false);\nconst callbacks: CallbackEntry[] = [];\nlet isGlobalHandlerAttached = false;\nlet uniqueId = 0;\n\nfunction getNextId() {\n  uniqueId += 1;\n  return uniqueId;\n}\n\nfunction updateBackButtonState() {\n  const backButton = getTelegramApp()!.BackButton;\n\n  if (callbacks.length > 0 && !isGlobalHandlerAttached) {\n    backButton.show();\n    backButton.onClick(handleBackButtonClick);\n    isGlobalHandlerAttached = true;\n  } else if (!callbacks.length && isGlobalHandlerAttached) {\n    backButton.hide();\n    backButton.offClick(handleBackButtonClick);\n    isGlobalHandlerAttached = false;\n  }\n}\n\nexport function registerCallback(cb: NoneToVoidFunction) {\n  const id = getNextId();\n  callbacks.push({ id, callback: cb });\n  runDebounce(updateBackButtonState);\n  return id;\n}\n\nexport function unregisterCallback(id: number) {\n  const index = callbacks.findIndex((entry) => entry.id === id);\n  if (index !== -1) {\n    callbacks.splice(index, 1);\n    runDebounce(updateBackButtonState);\n  }\n}\n\nfunction handleBackButtonClick() {\n  if (callbacks.length > 0) {\n    const entry = callbacks.pop()!;\n    try {\n      entry.callback();\n    } catch (err: any) {\n      logDebugError('[handleBackButtonClick]', err);\n    }\n  }\n\n  runDebounce(updateBackButtonState);\n}\n","import { useCallback, useEffect, useRef } from '../lib/teact/teact';\n\nimport { IS_TELEGRAM_APP, IS_TEST } from '../config';\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\nimport {\n  registerCallback as registerTelegramCallback,\n  unregisterCallback as unregisterTelegramCallback,\n} from '../util/telegram/backButtonManager';\nimport { IS_IOS, IS_LEDGER_EXTENSION_TAB } from '../util/windowEnvironment';\nimport useEffectOnce from './useEffectOnce';\nimport useLastCallback from './useLastCallback';\nimport useSyncEffect from './useSyncEffect';\n\nconst PATH_BASE = `${window.location.pathname}${window.location.search}`;\n\ntype HistoryRecord = {\n  index: number;\n  // Should this record be replaced by the next record (for example Menu)\n  shouldBeReplaced?: boolean;\n  // Mark this record as replaced by the next record. Only used to check if needed to perform effectBack\n  markReplaced?: NoneToVoidFunction;\n  onBack?: NoneToVoidFunction;\n  // Set if the element is closed in the UI, but not in the real history\n  isClosed?: boolean;\n};\n\ntype HistoryOperationGo = {\n  type: 'go';\n  delta: number;\n};\n\ntype HistoryOperationState = {\n  type: 'pushState' | 'replaceState';\n  data: any;\n};\n\ntype HistoryOperation = HistoryOperationGo | HistoryOperationState;\n\n// Needed to dismiss any 'trashed' history records from the previous page reloads.\nconst historyUniqueSessionId = Number(new Date());\n// Reflects real history state, but also contains information on which records should be replaced by the next record and\n// which records are deferred to close on the next operation\nlet historyState: HistoryRecord[];\n// Reflects current real history index\nlet historyCursor: number;\n// If we alter real history programmatically, the popstate event will be fired, which we don't need\nlet isAlteringHistory = false;\n// Unfortunately Safari doesn't really like when there's 2+ consequent history operations in one frame, so we need\n// to delay them to the next raf\nlet deferredHistoryOperations: HistoryOperation[] = [];\nlet deferredPopstateOperations: HistoryOperationState[] = [];\n\n// Do not remove: used for history unit tests\nif (IS_TEST) {\n  (window as any).TEST_getHistoryState = () => historyState;\n  (window as any).TEST_getHistoryCursor = () => historyCursor;\n}\n\nfunction applyDeferredHistoryOperations() {\n  const goOperations = deferredHistoryOperations.filter((op) => op.type === 'go');\n  const stateOperations = deferredHistoryOperations.filter((op) => op.type !== 'go');\n  const goCount = goOperations.reduce((acc, op) => acc + op.delta, 0);\n\n  deferredHistoryOperations = [];\n\n  if (goCount) {\n    window.history.go(goCount);\n\n    // If we have some `state` operations after the `go` operations, we need to wait until the popstate event\n    // so the order of operations is correctly preserved\n    if (stateOperations.length) {\n      deferredPopstateOperations.push(...stateOperations);\n      return;\n    }\n  }\n\n  processStateOperations(stateOperations);\n}\n\nfunction processStateOperations(stateOperations: HistoryOperationState[]) {\n  stateOperations.forEach((op) => window.history[op.type](op.data, ''));\n}\n\nfunction deferHistoryOperation(historyOperation: HistoryOperation) {\n  if (!deferredHistoryOperations.length) {\n    requestMeasure(applyDeferredHistoryOperations);\n  }\n\n  deferredHistoryOperations.push(historyOperation);\n}\n\n// Resets history to the `root` state\nfunction resetHistory() {\n  historyCursor = 0;\n  historyState = [{\n    index: 0,\n    onBack: () => window.history.back(),\n  }];\n\n  if (!IS_LEDGER_EXTENSION_TAB) {\n    window.history.replaceState({ index: 0, historyUniqueSessionId }, '', PATH_BASE);\n  }\n}\n\nresetHistory();\n\nfunction cleanupClosed(alreadyClosedCount = 1) {\n  let countClosed = alreadyClosedCount;\n  for (let i = historyCursor - 1; i > 0; i--) {\n    if (!historyState[i].isClosed) break;\n    countClosed++;\n  }\n  if (countClosed) {\n    isAlteringHistory = true;\n    deferHistoryOperation({\n      type: 'go',\n      delta: -countClosed,\n    });\n  }\n  return countClosed;\n}\n\nfunction cleanupTrashedState() {\n  for (let i = historyState.length - 1; i > 0; i--) {\n    if (historyState[i].isClosed) {\n      continue;\n    }\n    historyState[i].onBack?.();\n  }\n\n  resetHistory();\n}\n\nwindow.addEventListener('popstate', ({ state }: PopStateEvent) => {\n  if (isAlteringHistory) {\n    isAlteringHistory = false;\n    if (deferredPopstateOperations.length) {\n      processStateOperations(deferredPopstateOperations);\n      deferredPopstateOperations = [];\n    }\n    return;\n  }\n\n  if (!state) {\n    cleanupTrashedState();\n    return;\n  }\n\n  const { index, historyUniqueSessionId: previousUniqueSessionId } = state;\n  if (previousUniqueSessionId !== historyUniqueSessionId) {\n    cleanupTrashedState();\n    return;\n  }\n\n  // New real history state matches the old virtual one. Not possible in theory, but in practice we have Safari\n  if (index === historyCursor) {\n    return;\n  }\n\n  if (index < historyCursor) {\n    // Navigating back\n    let alreadyClosedCount = 0;\n    for (let i = historyCursor; i > index - alreadyClosedCount; i--) {\n      if (historyState[i].isClosed) {\n        alreadyClosedCount++;\n        continue;\n      }\n      historyState[i].onBack?.();\n    }\n\n    const countClosed = cleanupClosed(alreadyClosedCount);\n    historyCursor += index - historyCursor - countClosed;\n\n    // Can happen when we have deferred a real back for some element (for example Menu), closed via UI,\n    // pressed back button and caused a pushState.\n    if (historyCursor < 0) {\n      historyCursor = 0;\n    }\n  } else if (index > historyCursor) {\n    // Forward navigation is not yet supported\n    isAlteringHistory = true;\n    deferHistoryOperation({\n      type: 'go',\n      delta: -(index - historyCursor),\n    });\n  }\n});\n\nexport default function useHistoryBack({\n  isActive,\n  shouldBeReplaced,\n  shouldIgnoreForTelegram,\n  onBack,\n}: {\n  isActive?: boolean;\n  shouldBeReplaced?: boolean;\n  shouldIgnoreForTelegram?: boolean;\n  onBack: NoneToVoidFunction;\n}) {\n  const lastOnBack = useLastCallback(onBack);\n\n  // Active index of the record\n  const indexRef = useRef<number>();\n  const telegramIdRef = useRef<number>();\n  const wasReplaced = useRef(false);\n\n  const isFirstRender = useRef(true);\n\n  const pushState = useCallback((forceReplace = false) => {\n    // Check if the old state should be replaced\n    const shouldReplace = forceReplace || historyState[historyCursor].shouldBeReplaced;\n    indexRef.current = shouldReplace ? historyCursor : ++historyCursor;\n\n    historyCursor = indexRef.current;\n\n    // Mark the previous record as replaced so effectBack doesn't perform back operation on the new record\n    const previousRecord = historyState[indexRef.current];\n    if (previousRecord && !previousRecord.isClosed) {\n      previousRecord.markReplaced?.();\n    }\n\n    historyState[indexRef.current] = {\n      index: indexRef.current,\n      onBack: lastOnBack,\n      shouldBeReplaced,\n      markReplaced: () => {\n        wasReplaced.current = true;\n      },\n    };\n\n    deferHistoryOperation({\n      type: shouldReplace ? 'replaceState' : 'pushState',\n      data: {\n        index: indexRef.current,\n        historyUniqueSessionId,\n      },\n    });\n  }, [lastOnBack, shouldBeReplaced]);\n\n  const processBack = useCallback(() => {\n    // Only process back on open records\n    if (indexRef.current && historyState[indexRef.current] && !wasReplaced.current) {\n      historyState[indexRef.current].isClosed = true;\n      wasReplaced.current = true;\n      if (indexRef.current === historyCursor && !shouldBeReplaced) {\n        historyCursor -= cleanupClosed();\n      }\n    }\n  }, [shouldBeReplaced]);\n\n  // Process back navigation when element is unmounted\n  useEffectOnce(() => {\n    if (IS_IOS) return undefined;\n\n    isFirstRender.current = false;\n    return () => {\n      if (!isActive || wasReplaced.current) return;\n      processBack();\n    };\n  });\n\n  useSyncEffect(([prevIsActive]) => {\n    if (IS_IOS) return;\n    if (prevIsActive === isActive) return;\n    if (isFirstRender.current && !isActive) return;\n\n    if (isActive) {\n      pushState();\n    } else {\n      processBack();\n    }\n  }, [isActive, processBack, pushState]);\n\n  useEffect(() => {\n    if (!IS_TELEGRAM_APP || shouldIgnoreForTelegram || !isActive) return undefined;\n\n    telegramIdRef.current = registerTelegramCallback(lastOnBack);\n\n    return () => {\n      if (telegramIdRef.current !== undefined) {\n        unregisterTelegramCallback(telegramIdRef.current);\n        telegramIdRef.current = undefined;\n      }\n    };\n  }, [isActive, shouldIgnoreForTelegram, onBack]);\n}\n","import { DEBUG } from '../../config';\n\ntype Handler = (e: Event) => void;\ntype DelegationRegistry = Map<Element, Handler>;\n\nconst NON_BUBBLEABLE_EVENTS = new Set(['scroll', 'mouseenter', 'mouseleave', 'load', 'error']);\n\nconst documentEventCounters: Record<string, number> = {};\nconst delegationRegistryByEventType: Record<string, DelegationRegistry> = {};\nconst delegatedEventTypesByElement = new Map<Element, Set<string>>();\n\nexport function addEventListener(element: Element, propName: string, handler: Handler, asCapture = false) {\n  const eventType = resolveEventType(propName, element);\n  if (canUseEventDelegation(eventType, element, asCapture)) {\n    addDelegatedListener(eventType, element, handler);\n  } else {\n    element.addEventListener(eventType, handler, asCapture);\n  }\n}\n\nexport function removeEventListener(element: Element, propName: string, handler: Handler, asCapture = false) {\n  const eventType = resolveEventType(propName, element);\n  if (canUseEventDelegation(eventType, element, asCapture)) {\n    removeDelegatedListener(eventType, element);\n  } else {\n    element.removeEventListener(eventType, handler, asCapture);\n  }\n}\n\nexport function resolveEventType(propName: string, element: Element) {\n  const eventType = propName\n    .replace(/^on/, '')\n    .replace(/Capture$/, '').toLowerCase();\n\n  if (eventType === 'change' && element.tagName !== 'SELECT') {\n    // React behavior repeated here.\n    // https://stackoverflow.com/questions/38256332/in-react-whats-the-difference-between-onchange-and-oninput\n    return 'input';\n  }\n\n  if (eventType === 'doubleclick') {\n    return 'dblclick';\n  }\n\n  // Replace focus/blur by their \"bubbleable\" versions\n  if (eventType === 'focus') {\n    return 'focusin';\n  }\n\n  if (eventType === 'blur') {\n    return 'focusout';\n  }\n\n  return eventType;\n}\n\nfunction canUseEventDelegation(realEventType: string, element: Element, asCapture: boolean) {\n  return (\n    !asCapture\n    && !NON_BUBBLEABLE_EVENTS.has(realEventType)\n    && element.tagName !== 'VIDEO'\n    && element.tagName !== 'IFRAME'\n  );\n}\n\nfunction addDelegatedListener(eventType: string, element: Element, handler: Handler) {\n  if (!documentEventCounters[eventType]) {\n    documentEventCounters[eventType] = 0;\n    document.addEventListener(eventType, handleEvent);\n  }\n\n  resolveDelegationRegistry(eventType).set(element, handler);\n  resolveDelegatedEventTypes(element).add(eventType);\n  documentEventCounters[eventType]++;\n}\n\nfunction removeDelegatedListener(eventType: string, element: Element) {\n  documentEventCounters[eventType]--;\n  if (!documentEventCounters[eventType]) {\n    // Synchronous deletion on 0 will cause perf degradation in the case of 1 element\n    // which is not a real case, so it's ok to do it this way\n    document.removeEventListener(eventType, handleEvent);\n  }\n\n  delegationRegistryByEventType[eventType].delete(element);\n  delegatedEventTypesByElement.get(element)!.delete(eventType);\n}\n\nexport function removeAllDelegatedListeners(element: Element) {\n  const eventTypes = delegatedEventTypesByElement.get(element);\n  if (!eventTypes) {\n    return;\n  }\n\n  eventTypes.forEach((eventType) => removeDelegatedListener(eventType, element));\n  delegatedEventTypesByElement.delete(element);\n}\n\nfunction handleEvent(realEvent: Event) {\n  const events = delegationRegistryByEventType[realEvent.type];\n\n  if (events) {\n    let furtherCallsPrevented = false;\n    let current: Element = realEvent.target as Element;\n\n    const stopPropagation = () => {\n      furtherCallsPrevented = true;\n    };\n\n    const preventDefault = () => {\n      realEvent.preventDefault();\n    };\n\n    // Proxy is a simplest way to provide an access to the event property\n    const event = new Proxy(realEvent, {\n      get(target, p) {\n        if (p === 'currentTarget') {\n          return current;\n        }\n        if (p === 'stopPropagation' || p === 'stopImmediatePropagation') {\n          return stopPropagation;\n        }\n        if (p === 'preventDefault') {\n          // \"this\" is changed to proxy and one can't call methods via it\n          return preventDefault;\n        }\n        return Reflect.get(target, p);\n      },\n    });\n\n    // This can also be limited by teact root\n    while (current && current !== document.body) {\n      const handler = events.get(current);\n      if (handler) {\n        handler(event);\n        if (furtherCallsPrevented) {\n          return;\n        }\n      }\n\n      current = current.parentNode as Element;\n    }\n  }\n}\n\nfunction resolveDelegationRegistry(eventType: string) {\n  if (!delegationRegistryByEventType[eventType]) {\n    delegationRegistryByEventType[eventType] = new Map();\n  }\n\n  return delegationRegistryByEventType[eventType];\n}\n\nfunction resolveDelegatedEventTypes(element: Element) {\n  const existing = delegatedEventTypesByElement.get(element);\n  if (existing) {\n    return existing;\n  }\n\n  const newSet = new Set<string>();\n  delegatedEventTypesByElement.set(element, newSet);\n\n  return newSet;\n}\n\nif (DEBUG) {\n  document.addEventListener('dblclick', () => {\n    const documentListenersCount = Object.keys(documentEventCounters).length;\n    const delegatedHandlersCount1 = Object.values(documentEventCounters)\n      .reduce((acc, counter) => acc + counter, 0);\n    const delegationRegistriesCount = Object.keys(delegationRegistryByEventType).length;\n    const delegatedHandlersCount2 = Object.values(delegationRegistryByEventType)\n      .reduce((acc, delegationRegistry) => acc + delegationRegistry.size, 0);\n    const delegationElementsCount = delegatedEventTypesByElement.size;\n    const delegatedEventTypesCount = Array.from(delegatedEventTypesByElement.values())\n      .reduce((acc, eventTypes) => acc + eventTypes.size, 0);\n\n    // eslint-disable-next-line no-console\n    console.warn('DELEGATED EVENTS STATS', {\n      delegatedHandlersCount1,\n      delegatedHandlersCount2,\n      delegatedEventTypesCount,\n      delegationRegistriesCount,\n      delegationElementsCount,\n      documentListenersCount,\n    });\n  });\n}\n","import type { ChangeEvent, FocusEvent } from 'react';\n\nimport type { Signal } from '../../util/signals';\nimport type {\n  VirtualElement,\n  VirtualElementChildren,\n  VirtualElementComponent,\n  VirtualElementFragment,\n  VirtualElementParent,\n  VirtualElementReal,\n  VirtualElementTag,\n} from './teact';\n\nimport { DEBUG } from '../../config';\nimport { unique } from '../../util/iteratees';\nimport { addEventListener, removeAllDelegatedListeners, removeEventListener } from './dom-events';\nimport {\n  captureImmediateEffects,\n  hasElementChanged,\n  isParentElement,\n  mountComponent,\n  MountState,\n  renderComponent,\n  unmountComponent,\n  VirtualType,\n} from './teact';\n\ninterface VirtualDomHead {\n  children: [VirtualElement] | [];\n}\n\ninterface SelectionState {\n  selectionStart: number | null;\n  selectionEnd: number | null;\n  isCaretAtEnd: boolean;\n}\n\ntype CurrentContext = Record<string, Signal<unknown>>;\n\ntype DOMElement = HTMLElement | SVGElement;\n\nconst SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nconst HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n\nconst FILTERED_ATTRIBUTES = new Set(['key', 'ref', 'teactFastList', 'teactOrderKey']);\nconst HTML_ATTRIBUTES = new Set(['dir', 'role', 'form']);\nconst CONTROLLABLE_TAGS = ['INPUT', 'TEXTAREA', 'SELECT'];\nconst MAPPED_ATTRIBUTES: Record<string, string> = {\n  autoCapitalize: 'autocapitalize',\n  autoComplete: 'autocomplete',\n  autoCorrect: 'autocorrect',\n  autoPlay: 'autoplay',\n  spellCheck: 'spellcheck',\n};\nconst INDEX_KEY_PREFIX = '__indexKey#';\nconst SELECTION_STATE_ATTRIBUTE = '__teactSelectionState';\n\nconst headsByElement = new WeakMap<Element, VirtualDomHead>();\nconst extraClasses = new WeakMap<Element, Set<string>>();\nconst extraStyles = new WeakMap<Element, Record<string, string>>();\n\nlet DEBUG_virtualTreeSize = 1;\n\nfunction render($element: VirtualElement | undefined, parentEl: HTMLElement) {\n  if (!headsByElement.has(parentEl)) {\n    headsByElement.set(parentEl, { children: [] });\n  }\n\n  const runImmediateEffects = captureImmediateEffects();\n  const $head = headsByElement.get(parentEl)!;\n  const $renderedChild = renderWithVirtual(parentEl, $head.children[0], $element, $head, {}, 0);\n  runImmediateEffects?.();\n\n  $head.children = $renderedChild ? [$renderedChild] : [];\n\n  if (process.env.APP_ENV === 'perf') {\n    DEBUG_virtualTreeSize = 0;\n    DEBUG_addToVirtualTreeSize($head);\n\n    return DEBUG_virtualTreeSize;\n  }\n\n  return undefined;\n}\n\nfunction renderWithVirtual<T extends VirtualElement | undefined>(\n  parentEl: DOMElement,\n  $current: VirtualElement | undefined,\n  $new: T,\n  $parent: VirtualElementParent | VirtualDomHead,\n  currentContext: CurrentContext,\n  index: number,\n  options: {\n    skipComponentUpdate?: boolean;\n    nextSibling?: ChildNode;\n    forceMoveToEnd?: boolean;\n    fragment?: DocumentFragment;\n    namespace?: string;\n  } = {},\n): T {\n  const { skipComponentUpdate, fragment } = options;\n  let { nextSibling, namespace } = options;\n\n  const isCurrentComponent = $current?.type === VirtualType.Component;\n  const isNewComponent = $new?.type === VirtualType.Component;\n  const $newAsReal = $new as VirtualElementReal;\n\n  const isCurrentFragment = !isCurrentComponent && $current?.type === VirtualType.Fragment;\n  const isNewFragment = !isNewComponent && $new?.type === VirtualType.Fragment;\n\n  if ($new?.type === VirtualType.Tag) {\n    if ($new.tag === 'svg') namespace = SVG_NAMESPACE;\n    if ($new.props.xmlns) namespace = $new.props.xmlns;\n  }\n\n  if (\n    !skipComponentUpdate\n    && isCurrentComponent && isNewComponent\n    && !hasElementChanged($current, $new!)\n  ) {\n    $new = updateComponent($current, $new as VirtualElementComponent) as typeof $new;\n  }\n\n  // Parent element may have changed, so we need to update the listener closure.\n  if (\n    !skipComponentUpdate\n    && isNewComponent\n    && ($new as VirtualElementComponent).componentInstance.mountState === MountState.Mounted\n  ) {\n    setupComponentUpdateListener(parentEl, $new as VirtualElementComponent, $parent, currentContext, index);\n  }\n\n  if ($current === $new) {\n    return $new;\n  }\n\n  if (DEBUG && $new) {\n    const newTarget = 'target' in $new && $new.target;\n    if (newTarget && (!$current || ('target' in $current && newTarget !== $current.target))) {\n      throw new Error('[Teact] Cached virtual element was moved within tree');\n    }\n  }\n\n  if (!$current && $new) {\n    if (isNewComponent || isNewFragment) {\n      if (isNewComponent) {\n        $new = initComponent(\n          parentEl, $new as VirtualElementComponent, $parent, currentContext, index,\n        ) as unknown as typeof $new;\n        currentContext = ($new as VirtualElementComponent).componentInstance.context ?? currentContext;\n      }\n\n      mountChildren(parentEl, $new as VirtualElementComponent | VirtualElementFragment, currentContext, {\n        nextSibling, fragment, namespace,\n      });\n    } else {\n      const canSetTextContent = !fragment\n        && !nextSibling\n        && $newAsReal.type === VirtualType.Text\n        && $parent.children.length === 1\n        && !parentEl.firstChild;\n\n      if (canSetTextContent) {\n        parentEl.textContent = $newAsReal.value;\n        $newAsReal.target = parentEl.firstChild!;\n      } else {\n        const node = createNode($newAsReal, currentContext, namespace);\n        $newAsReal.target = node;\n        insertBefore(fragment || parentEl, node, nextSibling);\n\n        if ($newAsReal.type === VirtualType.Tag) {\n          setElementRef($newAsReal, node as DOMElement);\n        }\n      }\n    }\n  } else if ($current && !$new) {\n    remount(parentEl, $current, currentContext, undefined);\n  } else if ($current && $new) {\n    if (hasElementChanged($current, $new)) {\n      if (!nextSibling) {\n        nextSibling = getNextSibling($current);\n      }\n\n      if (isNewComponent || isNewFragment) {\n        if (isNewComponent) {\n          $new = initComponent(\n            parentEl, $new as VirtualElementComponent, $parent, currentContext, index,\n          ) as unknown as typeof $new;\n          currentContext = ($new as VirtualElementComponent).componentInstance.context ?? currentContext;\n        }\n\n        remount(parentEl, $current, currentContext, undefined);\n        mountChildren(parentEl, $new as VirtualElementComponent | VirtualElementFragment, currentContext, {\n          nextSibling, fragment, namespace,\n        });\n      } else {\n        const node = createNode($newAsReal, currentContext, namespace);\n        $newAsReal.target = node;\n        remount(parentEl, $current, currentContext, node, nextSibling);\n\n        if ($newAsReal.type === VirtualType.Tag) {\n          setElementRef($newAsReal, node as DOMElement);\n        }\n      }\n    } else {\n      const isComponent = isCurrentComponent && isNewComponent;\n      const isFragment = isCurrentFragment && isNewFragment;\n\n      if (isComponent || isFragment) {\n        renderChildren(\n          $current,\n          $new as VirtualElementComponent | VirtualElementFragment,\n          currentContext,\n          parentEl,\n          nextSibling,\n          options.forceMoveToEnd,\n        );\n      } else {\n        const $currentAsReal = $current as VirtualElementReal;\n        const currentTarget = $currentAsReal.target!;\n\n        $newAsReal.target = currentTarget;\n        $currentAsReal.target = undefined; // Help GC\n\n        const isTag = $current.type === VirtualType.Tag;\n        if (isTag) {\n          const $newAsTag = $new as VirtualElementTag;\n\n          setElementRef($current, undefined);\n          setElementRef($newAsTag, currentTarget as DOMElement);\n\n          if (nextSibling || options.forceMoveToEnd) {\n            insertBefore(parentEl, currentTarget, nextSibling);\n          }\n\n          updateAttributes($current, $newAsTag, currentTarget as DOMElement, namespace);\n          renderChildren(\n            $current, $newAsTag, currentContext, currentTarget as DOMElement, undefined, undefined, namespace,\n          );\n        }\n      }\n    }\n  }\n\n  return $new;\n}\n\nfunction initComponent(\n  parentEl: DOMElement,\n  $element: VirtualElementComponent,\n  $parent: VirtualElementParent | VirtualDomHead,\n  currentContext: CurrentContext,\n  index: number,\n) {\n  const { componentInstance } = $element;\n\n  $element.componentInstance.context = currentContext;\n\n  if (componentInstance.mountState === MountState.Unmounted) {\n    $element = mountComponent(componentInstance);\n    setupComponentUpdateListener(parentEl, $element, $parent, currentContext, index);\n  }\n\n  return $element;\n}\n\nfunction updateComponent($current: VirtualElementComponent, $new: VirtualElementComponent) {\n  $current.componentInstance.props = $new.componentInstance.props;\n\n  return renderComponent($current.componentInstance);\n}\n\nfunction setupComponentUpdateListener(\n  parentEl: DOMElement,\n  $element: VirtualElementComponent,\n  $parent: VirtualElementParent | VirtualDomHead,\n  currentContext: CurrentContext,\n  index: number,\n) {\n  const { componentInstance } = $element;\n\n  componentInstance.onUpdate = () => {\n    $parent.children[index] = renderWithVirtual(\n      parentEl,\n      $parent.children[index],\n      componentInstance.$element,\n      $parent,\n      currentContext,\n      index,\n      { skipComponentUpdate: true },\n    );\n  };\n}\n\nfunction mountChildren(\n  parentEl: DOMElement,\n  $element: VirtualElementComponent | VirtualElementFragment,\n  currentContext: CurrentContext,\n  options: {\n    nextSibling?: ChildNode;\n    fragment?: DocumentFragment;\n    namespace?: string;\n  },\n) {\n  const { children } = $element;\n\n  // Add a placeholder comment node for empty fragments to maintain position\n  if ($element.type === VirtualType.Fragment && children.length === 0) {\n    const fragmentEl = $element;\n    fragmentEl.placeholderTarget = document.createComment('empty-fragment');\n    insertBefore(options.fragment || parentEl, fragmentEl.placeholderTarget, options.nextSibling);\n    return;\n  }\n\n  for (let i = 0, l = children.length; i < l; i++) {\n    const $child = children[i];\n    const $renderedChild = renderWithVirtual(parentEl, undefined, $child, $element, currentContext, i, options);\n    if ($renderedChild !== $child) {\n      children[i] = $renderedChild;\n    }\n  }\n}\n\nfunction unmountChildren(\n  parentEl: DOMElement, $element: VirtualElementComponent | VirtualElementFragment, currentContext: CurrentContext,\n) {\n  for (const $child of $element.children) {\n    renderWithVirtual(parentEl, $child, undefined, $element, currentContext, -1);\n  }\n}\n\nfunction createNode($element: VirtualElementReal, currentContext: CurrentContext, namespace = HTML_NAMESPACE): Node {\n  if ($element.type === VirtualType.Empty) {\n    return document.createTextNode('');\n  }\n\n  if ($element.type === VirtualType.Text) {\n    return document.createTextNode($element.value);\n  }\n\n  const { tag, props, children } = $element;\n  const element = document.createElementNS(namespace, tag) as DOMElement;\n\n  processControlled(tag, props);\n\n  for (const key in props) {\n    if (!props.hasOwnProperty(key)) continue;\n\n    if (props[key] !== undefined) {\n      setAttribute(element, key, props[key], namespace);\n    }\n  }\n\n  processUncontrolledOnMount(element, props);\n\n  for (let i = 0, l = children.length; i < l; i++) {\n    const $child = children[i];\n    const $renderedChild = renderWithVirtual(element, undefined, $child, $element, currentContext, i, { namespace });\n    if ($renderedChild !== $child) {\n      children[i] = $renderedChild;\n    }\n  }\n\n  return element;\n}\n\nfunction remount(\n  parentEl: DOMElement,\n  $current: VirtualElement,\n  currentContext: CurrentContext,\n  node: Node | undefined,\n  componentNextSibling?: ChildNode,\n) {\n  const isComponent = $current.type === VirtualType.Component;\n  const isFragment = !isComponent && $current.type === VirtualType.Fragment;\n\n  if (isComponent || isFragment) {\n    if (isComponent) {\n      unmountComponent($current.componentInstance);\n    }\n\n    unmountChildren(parentEl, $current, currentContext);\n\n    if (node) {\n      insertBefore(parentEl, node, componentNextSibling);\n    }\n  } else {\n    if (node) {\n      parentEl.replaceChild(node, $current.target!);\n    } else {\n      parentEl.removeChild($current.target!);\n    }\n\n    unmountRealTree($current);\n  }\n}\n\nfunction unmountRealTree($element: VirtualElement) {\n  if ($element.type === VirtualType.Component) {\n    unmountComponent($element.componentInstance);\n  } else if ($element.type === VirtualType.Fragment) {\n    // Remove placeholder for empty fragments\n    const fragment = $element;\n    if (fragment.placeholderTarget && fragment.children.length === 0) {\n      fragment.placeholderTarget.parentNode?.removeChild(fragment.placeholderTarget);\n      fragment.placeholderTarget = undefined;\n    }\n  } else {\n    if ($element.type === VirtualType.Tag) {\n      extraClasses.delete($element.target!);\n      setElementRef($element, undefined);\n      removeAllDelegatedListeners($element.target!);\n    }\n\n    $element.target = undefined; // Help GC\n\n    if ($element.type !== VirtualType.Tag) {\n      return;\n    }\n  }\n\n  for (const $child of $element.children) {\n    unmountRealTree($child);\n  }\n}\n\nfunction insertBefore(parentEl: DOMElement | DocumentFragment, node: Node, nextSibling?: ChildNode) {\n  if (nextSibling) {\n    parentEl.insertBefore(node, nextSibling);\n  } else {\n    parentEl.appendChild(node);\n  }\n}\n\nfunction getNextSibling($current: VirtualElement): ChildNode | undefined {\n  if ($current.type === VirtualType.Component || $current.type === VirtualType.Fragment) {\n    if ($current.children.length === 0) {\n      // For empty fragments, use the placeholder node to track position\n      const fragment = $current as VirtualElementFragment;\n      if (fragment.placeholderTarget) {\n        return fragment.placeholderTarget.nextSibling || undefined;\n      }\n      return undefined;\n    }\n\n    const lastChild = $current.children[$current.children.length - 1];\n    return getNextSibling(lastChild);\n  }\n\n  return $current.target!.nextSibling || undefined;\n}\n\nfunction renderChildren(\n  $current: VirtualElementParent,\n  $new: VirtualElementParent,\n  currentContext: CurrentContext,\n  currentEl: DOMElement,\n  nextSibling?: ChildNode,\n  forceMoveToEnd = false,\n  namespace?: string,\n) {\n  if (DEBUG) {\n    DEBUG_checkKeyUniqueness($new.children);\n  }\n\n  if (('props' in $new) && $new.props.teactFastList) {\n    renderFastListChildren($current, $new, currentContext, currentEl);\n    return;\n  }\n\n  // Handle transitions between empty and non-empty fragments\n  if ($current.type === VirtualType.Fragment && $new.type === VirtualType.Fragment) {\n    const currentFragment = $current;\n    const newFragment = $new;\n\n    // If transitioning from empty to non-empty, use the placeholder's position\n    if (currentFragment.children.length === 0 && newFragment.children.length > 0 && currentFragment.placeholderTarget) {\n      nextSibling = currentFragment.placeholderTarget.nextSibling || undefined;\n      // Remove the placeholder as we're adding real content\n      currentFragment.placeholderTarget.parentNode?.removeChild(currentFragment.placeholderTarget);\n      currentFragment.placeholderTarget = undefined;\n    }\n\n    // If transitioning from non-empty to empty, add a placeholder\n    if (currentFragment.children.length > 0 && newFragment.children.length === 0) {\n      const lastCurrentChild = currentFragment.children[currentFragment.children.length - 1];\n      const siblingAfterFragment = getNextSibling(lastCurrentChild);\n      newFragment.placeholderTarget = document.createComment('empty-fragment');\n      insertBefore(currentEl, newFragment.placeholderTarget, siblingAfterFragment);\n    }\n  }\n\n  const currentChildren = $current.children;\n  const newChildren = $new.children;\n\n  const currentChildrenLength = currentChildren.length;\n  const newChildrenLength = newChildren.length;\n  const maxLength = Math.max(currentChildrenLength, newChildrenLength);\n\n  const fragment = newChildrenLength > currentChildrenLength ? document.createDocumentFragment() : undefined;\n  const lastCurrentChild = $current.children[currentChildrenLength - 1];\n  const fragmentNextSibling = fragment && (\n    nextSibling || (lastCurrentChild ? getNextSibling(lastCurrentChild) : undefined)\n  );\n\n  for (let i = 0; i < maxLength; i++) {\n    const $renderedChild = renderWithVirtual(\n      currentEl,\n      currentChildren[i],\n      newChildren[i],\n      $new,\n      currentContext,\n      i,\n      i >= currentChildrenLength ? { fragment, namespace } : { nextSibling, forceMoveToEnd, namespace },\n    );\n\n    if ($renderedChild && $renderedChild !== newChildren[i]) {\n      newChildren[i] = $renderedChild;\n    }\n  }\n\n  if (fragment) {\n    insertBefore(currentEl, fragment, fragmentNextSibling);\n  }\n}\n\n// This function allows to prepend/append a bunch of new DOM nodes to the top/bottom of preserved ones.\n// It also allows to selectively move particular preserved nodes within their DOM list.\nfunction renderFastListChildren(\n  $current: VirtualElementParent, $new: VirtualElementParent, currentContext: CurrentContext, currentEl: DOMElement,\n) {\n  const currentChildren = $current.children;\n  const newChildren = $new.children;\n\n  const newKeys = new Set();\n  for (const $newChild of newChildren) {\n    const key = 'props' in $newChild ? $newChild.props.key : undefined;\n\n    if (DEBUG && isParentElement($newChild)) {\n      // eslint-disable-next-line no-null/no-null\n      if (key === undefined || key === null) {\n        // eslint-disable-next-line no-console\n        console.warn('Missing `key` in `teactFastList`');\n      }\n\n      if ($newChild.type === VirtualType.Fragment) {\n        throw new Error('[Teact] Fragment can not be child of container with `teactFastList`');\n      }\n    }\n\n    newKeys.add(key);\n  }\n\n  // Build a collection of old children that also remain in the new list\n  let currentRemainingIndex = 0;\n  const remainingByKey: Record<string, { $element: VirtualElement; index: number; orderKey?: number }> = {};\n  for (let i = 0, l = currentChildren.length; i < l; i++) {\n    const $currentChild = currentChildren[i];\n\n    let key = 'props' in $currentChild ? $currentChild.props.key : undefined;\n    // eslint-disable-next-line no-null/no-null\n    const isKeyPresent = key !== undefined && key !== null;\n\n    // First we process removed children\n    if (isKeyPresent && !newKeys.has(key)) {\n      renderWithVirtual(currentEl, $currentChild, undefined, $new, currentContext, -1);\n\n      continue;\n    } else if (!isKeyPresent) {\n      const $newChild = newChildren[i];\n      const newChildKey = ($newChild && 'props' in $newChild) ? $newChild.props.key : undefined;\n      // If a non-key element remains at the same index we preserve it with a virtual `key`\n      if ($newChild && !newChildKey) {\n        key = `${INDEX_KEY_PREFIX}${i}`;\n        // Otherwise, we just remove it\n      } else {\n        renderWithVirtual(currentEl, $currentChild, undefined, $new, currentContext, -1);\n\n        continue;\n      }\n    }\n\n    // Then we build up info about remaining children\n    remainingByKey[key] = {\n      $element: $currentChild,\n      index: currentRemainingIndex++,\n      orderKey: 'props' in $currentChild ? $currentChild.props.teactOrderKey : undefined,\n    };\n  }\n\n  let fragmentIndex: number | undefined;\n  let fragmentSize: number | undefined;\n\n  let currentPreservedIndex = 0;\n\n  for (let i = 0, l = newChildren.length; i < l; i++) {\n    const $newChild = newChildren[i];\n    const key = 'props' in $newChild ? $newChild.props.key : `${INDEX_KEY_PREFIX}${i}`;\n    const currentChildInfo = remainingByKey[key];\n\n    if (!currentChildInfo) {\n      if (fragmentSize === undefined) {\n        fragmentIndex = i;\n        fragmentSize = 0;\n      }\n\n      fragmentSize++;\n      continue;\n    }\n\n    // This prepends new children to the top\n    if (fragmentSize) {\n      renderFragment(fragmentIndex!, fragmentSize, currentEl, $new, currentContext);\n      fragmentSize = undefined;\n      fragmentIndex = undefined;\n    }\n\n    // Now we check if a preserved node was moved within preserved list\n    const newOrderKey = 'props' in $newChild ? $newChild.props.teactOrderKey : undefined;\n    // That is indicated by a changed `teactOrderKey` value\n    const shouldMoveNode = (\n      currentChildInfo.index !== currentPreservedIndex && (!newOrderKey || currentChildInfo.orderKey !== newOrderKey)\n    );\n    const isMovingDown = shouldMoveNode && currentPreservedIndex > currentChildInfo.index;\n\n    if (!shouldMoveNode || isMovingDown) {\n      currentPreservedIndex++;\n    }\n\n    const nextSibling = currentEl.childNodes[isMovingDown ? i + 1 : i];\n    const options = shouldMoveNode ? (nextSibling ? { nextSibling } : { forceMoveToEnd: true }) : undefined;\n\n    const $renderedChild = renderWithVirtual(\n      currentEl, currentChildInfo.$element, $newChild, $new, currentContext, i, options,\n    );\n    if ($renderedChild !== $newChild) {\n      newChildren[i] = $renderedChild;\n    }\n  }\n\n  // This appends new children to the bottom\n  if (fragmentSize) {\n    renderFragment(fragmentIndex!, fragmentSize, currentEl, $new, currentContext);\n  }\n}\n\nfunction renderFragment(\n  fragmentIndex: number,\n  fragmentSize: number,\n  parentEl: DOMElement,\n  $parent: VirtualElementParent,\n  currentContext: CurrentContext,\n) {\n  const nextSibling = parentEl.childNodes[fragmentIndex];\n\n  if (fragmentSize === 1) {\n    const $child = $parent.children[fragmentIndex];\n    const $renderedChild = renderWithVirtual(\n      parentEl, undefined, $child, $parent, currentContext, fragmentIndex, { nextSibling },\n    );\n    if ($renderedChild !== $child) {\n      $parent.children[fragmentIndex] = $renderedChild;\n    }\n\n    return;\n  }\n\n  const fragment = document.createDocumentFragment();\n\n  for (let i = fragmentIndex; i < fragmentIndex + fragmentSize; i++) {\n    const $child = $parent.children[i];\n    const $renderedChild = renderWithVirtual(parentEl, undefined, $child, $parent, currentContext, i, { fragment });\n    if ($renderedChild !== $child) {\n      $parent.children[i] = $renderedChild;\n    }\n  }\n\n  insertBefore(parentEl, fragment, nextSibling);\n}\n\nfunction setElementRef($element: VirtualElementTag, element: DOMElement | undefined) {\n  const { ref } = $element.props;\n\n  if (typeof ref === 'object') {\n    ref.current = element;\n    ref.onChange?.();\n  } else if (typeof ref === 'function') {\n    ref(element);\n  }\n}\n\nfunction processControlled(tag: string, props: AnyLiteral) {\n  const isValueControlled = props.value !== undefined;\n  const isCheckedControlled = props.checked !== undefined;\n  const isControlled = (isValueControlled || isCheckedControlled) && CONTROLLABLE_TAGS.includes(tag.toUpperCase());\n  if (!isControlled) {\n    return;\n  }\n\n  const {\n    value, checked, onInput, onChange, onBlur,\n  } = props;\n\n  props.onChange = undefined;\n  props.onInput = (e: ChangeEvent<HTMLInputElement>) => {\n    onInput?.(e);\n    onChange?.(e);\n\n    if (value !== undefined && value !== e.currentTarget.value) {\n      const { selectionStart, selectionEnd } = e.currentTarget;\n      const isCaretAtEnd = selectionStart === selectionEnd && selectionEnd === e.currentTarget.value.length;\n\n      e.currentTarget.value = value;\n\n      if (typeof selectionStart === 'number' && typeof selectionEnd === 'number') {\n        e.currentTarget.setSelectionRange(selectionStart, selectionEnd);\n\n        const selectionState: SelectionState = { selectionStart, selectionEnd, isCaretAtEnd };\n\n        e.currentTarget.dataset[SELECTION_STATE_ATTRIBUTE] = JSON.stringify(selectionState);\n      }\n    }\n\n    if (checked !== undefined) {\n      e.currentTarget.checked = checked;\n    }\n  };\n  props.onBlur = (e: FocusEvent<HTMLInputElement>) => {\n    delete e.currentTarget.dataset[SELECTION_STATE_ATTRIBUTE];\n\n    onBlur?.(e);\n  };\n}\n\nfunction processUncontrolledOnMount(element: DOMElement, props: AnyLiteral) {\n  if (!CONTROLLABLE_TAGS.includes(element.tagName)) {\n    return;\n  }\n\n  if (props.defaultValue) {\n    setAttribute(element, 'value', props.defaultValue);\n  }\n\n  if (props.defaultChecked) {\n    setAttribute(element, 'checked', props.defaultChecked);\n  }\n}\n\nfunction updateAttributes(\n  $current: VirtualElementTag, $new: VirtualElementTag, element: DOMElement, namespace?: string,\n) {\n  processControlled(element.tagName, $new.props);\n\n  const currentEntries = Object.entries($current.props);\n  const newEntries = Object.entries($new.props);\n\n  for (const [key, currentValue] of currentEntries) {\n    const newValue = $new.props[key];\n\n    if (\n      currentValue !== undefined\n      && (\n        newValue === undefined\n        || (currentValue !== newValue && key.startsWith('on'))\n      )\n    ) {\n      removeAttribute(element, key, currentValue);\n    }\n  }\n\n  for (const [key, newValue] of newEntries) {\n    const currentValue = $current.props[key];\n\n    if (newValue !== undefined && newValue !== currentValue) {\n      setAttribute(element, key, newValue, namespace);\n    }\n  }\n}\n\nfunction setAttribute(element: DOMElement, key: string, value: any, namespace?: string) {\n  if (key === 'className') {\n    updateClassName(element, value, namespace);\n  } else if (key === 'value') {\n    const inputEl = element as HTMLInputElement;\n\n    if (inputEl.value !== value) {\n      inputEl.value = value;\n\n      const selectionStateJson = inputEl.dataset[SELECTION_STATE_ATTRIBUTE];\n      if (selectionStateJson) {\n        const { selectionStart, selectionEnd, isCaretAtEnd } = JSON.parse(selectionStateJson) as SelectionState;\n\n        if (isCaretAtEnd) {\n          const length = inputEl.value.length;\n          inputEl.setSelectionRange(length, length);\n        } else if (typeof selectionStart === 'number' && typeof selectionEnd === 'number') {\n          inputEl.setSelectionRange(selectionStart, selectionEnd);\n        }\n      }\n    }\n  } else if (key === 'style') {\n    updateStyle(element, value);\n  } else if (key === 'dangerouslySetInnerHTML') {\n    element.innerHTML = value.__html;\n  } else if (key.startsWith('on')) {\n    addEventListener(element, key, value, key.endsWith('Capture'));\n  } else if (\n    namespace === SVG_NAMESPACE || key.startsWith('data-') || key.startsWith('aria-') || HTML_ATTRIBUTES.has(key)\n  ) {\n    element.setAttribute(key, value);\n  } else if (!FILTERED_ATTRIBUTES.has(key)) {\n    (element as any)[MAPPED_ATTRIBUTES[key] || key] = value;\n  }\n}\n\nfunction removeAttribute(element: DOMElement, key: string, value: any) {\n  if (key === 'className') {\n    updateClassName(element, '');\n  } else if (key === 'value') {\n    (element as HTMLInputElement).value = '';\n  } else if (key === 'style') {\n    updateStyle(element, '');\n  } else if (key === 'dangerouslySetInnerHTML') {\n    element.innerHTML = '';\n  } else if (key.startsWith('on')) {\n    removeEventListener(element, key, value, key.endsWith('Capture'));\n  } else if (!FILTERED_ATTRIBUTES.has(key)) {\n    element.removeAttribute(key);\n  }\n}\n\nfunction updateClassName(element: DOMElement, value: string, namespace?: string) {\n  if (namespace === SVG_NAMESPACE) {\n    element.setAttribute('class', value);\n    return;\n  }\n\n  const htmlElement = element as HTMLElement;\n  const extra = extraClasses.get(element);\n  if (!extra) {\n    htmlElement.className = value;\n    return;\n  }\n\n  const extraArray = Array.from(extra);\n  if (value) {\n    extraArray.push(value);\n  }\n\n  htmlElement.className = extraArray.join(' ');\n}\n\nfunction updateStyle(element: DOMElement, value: string) {\n  element.style.cssText = value;\n\n  const extraObject = extraStyles.get(element);\n  if (extraObject) {\n    applyExtraStyles(element);\n  }\n}\n\nexport function addExtraClass(element: DOMElement, className: string) {\n  element.classList.add(className);\n\n  const classList = extraClasses.get(element);\n  if (classList) {\n    classList.add(className);\n  } else {\n    extraClasses.set(element, new Set([className]));\n  }\n}\n\nexport function removeExtraClass(element: DOMElement, className: string) {\n  element.classList.remove(className);\n\n  const classList = extraClasses.get(element);\n  if (classList) {\n    classList.delete(className);\n\n    if (!classList.size) {\n      extraClasses.delete(element);\n    }\n  }\n}\n\nexport function toggleExtraClass(element: DOMElement, className: string, force?: boolean) {\n  if (force === true) {\n    addExtraClass(element, className);\n  } else if (force === false) {\n    removeExtraClass(element, className);\n  } else if (extraClasses.get(element)?.has(className)) {\n    removeExtraClass(element, className);\n  } else {\n    addExtraClass(element, className);\n  }\n}\n\nexport function setExtraStyles(element: DOMElement, styles: Partial<CSSStyleDeclaration> & AnyLiteral) {\n  extraStyles.set(element, styles);\n  applyExtraStyles(element);\n}\n\nfunction applyExtraStyles(element: DOMElement) {\n  const standardStyles = Object.entries(extraStyles.get(element)!).reduce<Record<string, string>>(\n    (acc, [prop, value]) => {\n      if (prop.startsWith('--')) {\n        element.style.setProperty(prop, value);\n      } else {\n        acc[prop] = value;\n      }\n\n      return acc;\n    },\n    {},\n  );\n\n  Object.assign(element.style, standardStyles);\n}\n\nfunction DEBUG_addToVirtualTreeSize($current: VirtualElementParent | VirtualDomHead) {\n  DEBUG_virtualTreeSize += $current.children.length;\n\n  $current.children.forEach(($child) => {\n    if (isParentElement($child)) {\n      DEBUG_addToVirtualTreeSize($child);\n    }\n  });\n}\n\nfunction DEBUG_checkKeyUniqueness(children: VirtualElementChildren) {\n  const firstChild = children[0];\n  if (firstChild && 'props' in firstChild && firstChild.props.key !== undefined) {\n    const keys = children.reduce((acc: any[], child) => {\n      if ('props' in child && child.props.key) {\n        acc.push(child.props.key);\n      }\n\n      return acc;\n    }, []);\n\n    if (keys.length !== unique(keys).length) {\n      // eslint-disable-next-line no-console\n      console.warn('[Teact] Duplicated keys:', keys.filter((e, i, a) => a.indexOf(e) !== i), children);\n      throw new Error('[Teact] Children keys are not unique');\n    }\n  }\n}\n\nconst TeactDOM = { render };\nexport default TeactDOM;\n","import { useRef } from '../lib/teact/teact';\n\nimport { createSignal } from '../util/signals';\n\nexport default function useSignal<T>(initial?: T) {\n  const signalRef = useRef<ReturnType<typeof createSignal<T>>>();\n  signalRef.current ??= createSignal<T>(initial);\n  return signalRef.current;\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport { cleanupEffect, isSignal } from '../util/signals';\nimport useEffectOnce from './useEffectOnce';\n\nexport function useSignalEffect(effect: NoneToVoidFunction, dependencies: readonly any[]) {\n  // The is extracted from `useEffectOnce` to run before all effects\n  const isFirstRun = useRef(true);\n  if (isFirstRun.current) {\n    isFirstRun.current = false;\n\n    dependencies?.forEach((dependency) => {\n      if (isSignal(dependency)) {\n        dependency.subscribe(effect);\n      }\n    });\n  }\n\n  useEffectOnce(() => {\n    return () => {\n      cleanupEffect(effect);\n    };\n  });\n}\n","import type { Signal } from '../util/signals';\n\nimport useSignal from './useSignal';\nimport { useSignalEffect } from './useSignalEffect';\nimport { useStateRef } from './useStateRef';\nimport useSyncEffect from './useSyncEffect';\n\ntype SyncResolver<T> = () => T;\ntype AsyncResolver<T> = (setter: (newValue: T) => void) => void;\ntype Resolver<T> =\n  SyncResolver<T>\n  | AsyncResolver<T>;\n\nfunction useDerivedSignal<T>(resolver: SyncResolver<T>, dependencies: readonly any[]): Signal<T>;\nfunction useDerivedSignal<T>(resolver: AsyncResolver<T>, dependencies: readonly any[], isAsync: true): Signal<T>;\nfunction useDerivedSignal<T>(dependency: T): Signal<T>;\n\nfunction useDerivedSignal<T>(resolverOrDependency: Resolver<T> | T, dependencies?: readonly any[], isAsync = false) {\n  const resolver = dependencies ? resolverOrDependency as Resolver<T> : () => (resolverOrDependency as T);\n  dependencies ??= [resolverOrDependency];\n\n  const [getValue, setValue] = useSignal<T>();\n  const resolverRef = useStateRef(resolver);\n\n  function runCurrentResolver() {\n    const currentResolver = resolverRef.current;\n    if (isAsync) {\n      (currentResolver as AsyncResolver<T>)(setValue);\n    } else {\n      setValue((currentResolver as SyncResolver<T>)());\n    }\n  }\n\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useSyncEffect(runCurrentResolver, dependencies);\n\n  useSignalEffect(runCurrentResolver, dependencies);\n\n  return getValue as Signal<T>;\n}\n\nexport default useDerivedSignal;\n","import { useRef } from '../lib/teact/teact';\n\nimport type { Signal } from '../util/signals';\n\nimport useForceUpdate from './useForceUpdate';\nimport { useSignalEffect } from './useSignalEffect';\nimport { useStateRef } from './useStateRef';\nimport useSyncEffect from './useSyncEffect';\n\ntype SyncResolver<T> = () => T;\ntype AsyncResolver<T> = (setter: (newValue: T) => void) => void;\ntype Resolver<T> =\n  SyncResolver<T>\n  | AsyncResolver<T>;\n\nfunction useDerivedState<T>(resolver: SyncResolver<T>, dependencies: readonly any[]): T;\nfunction useDerivedState<T>(resolver: AsyncResolver<T>, dependencies: readonly any[], isAsync: true): T;\nfunction useDerivedState<T>(signal: Signal<T>): T;\n\nfunction useDerivedState<T>(resolverOrSignal: Resolver<T> | T, dependencies?: readonly any[], isAsync = false) {\n  const resolver = dependencies ? resolverOrSignal as Resolver<T> : () => ((resolverOrSignal as Signal<T>)());\n  dependencies ??= [resolverOrSignal];\n\n  const valueRef = useRef<T>();\n  const forceUpdate = useForceUpdate();\n  const resolverRef = useStateRef(resolver);\n\n  function runCurrentResolver(isSync = false) {\n    const currentResolver = resolverRef.current;\n    if (isAsync) {\n      (currentResolver as AsyncResolver<T>)((newValue) => {\n        if (valueRef.current !== newValue) {\n          valueRef.current = newValue;\n          forceUpdate();\n        }\n      });\n    } else {\n      const newValue = (currentResolver as SyncResolver<T>)();\n      if (valueRef.current !== newValue) {\n        valueRef.current = newValue;\n\n        if (!isSync) {\n          forceUpdate();\n        }\n      }\n    }\n  }\n\n  useSyncEffect(() => {\n    runCurrentResolver(true);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies);\n\n  useSignalEffect(runCurrentResolver, dependencies);\n\n  return valueRef.current as T;\n}\n\nexport default useDerivedState;\n","import { useRef } from '../lib/teact/teact';\n\nimport useSyncEffect from './useSyncEffect';\n\nconst useLayoutEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useSyncEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies);\n};\n\nexport default useLayoutEffectWithPrevDeps;\n","import type { ElementRef } from '../lib/teact/teact';\nimport { useLayoutEffect, useRef, useSignal } from '../lib/teact/teact';\nimport { addExtraClass, toggleExtraClass } from '../lib/teact/teact-dom';\n\nimport type { Signal } from '../util/signals';\n\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\nimport useDerivedSignal from './useDerivedSignal';\nimport useDerivedState from './useDerivedState';\nimport useLastCallback from './useLastCallback';\nimport { useStateRef } from './useStateRef';\nimport useSyncEffect from './useSyncEffect';\nimport useSyncEffectWithPrevDeps from './useSyncEffectWithPrevDeps';\n\nconst CLOSE_DURATION = 350;\n\ntype BaseHookParams<RefType extends HTMLElement> = {\n  isOpen: boolean | undefined;\n  ref?: ElementRef<RefType>;\n  noMountTransition?: boolean;\n  noOpenTransition?: boolean;\n  noCloseTransition?: boolean;\n  closeDuration?: number;\n  className?: string | false;\n  prefix?: string;\n  shouldForceOpen?: boolean;\n  onCloseAnimationEnd?: NoneToVoidFunction;\n};\n\nexport type HookParams<RefType extends HTMLElement> = BaseHookParams<RefType> & {\n  withShouldRender?: never;\n};\n\ntype HookParamsWithShouldRender<RefType extends HTMLElement> = BaseHookParams<RefType> & {\n  withShouldRender: true;\n};\n\ntype HookResult<RefType extends HTMLElement> = {\n  ref: ElementRef<RefType>;\n  getIsClosing: Signal<boolean>;\n};\n\ntype HookResultWithShouldRender<RefType extends HTMLElement> = HookResult<RefType> & {\n  shouldRender: boolean;\n};\n\ntype State =\n  'closed'\n  | 'scheduled-open'\n  | 'open'\n  | 'closing';\n\nexport default function useShowTransition<RefType extends HTMLElement = HTMLDivElement>(\n  params: HookParams<RefType>\n): HookResult<RefType>;\nexport default function useShowTransition<RefType extends HTMLElement = HTMLDivElement>(\n  params: HookParamsWithShouldRender<RefType>\n): HookResultWithShouldRender<RefType>;\nexport default function useShowTransition<RefType extends HTMLElement = HTMLDivElement>(\n  params: HookParams<RefType> | HookParamsWithShouldRender<RefType>,\n): HookResult<RefType> | HookResultWithShouldRender<RefType> {\n  const {\n    isOpen,\n    noMountTransition = false,\n    noOpenTransition = false,\n    noCloseTransition = false,\n    closeDuration = CLOSE_DURATION,\n    className = 'fast',\n    prefix = '',\n    shouldForceOpen,\n    onCloseAnimationEnd,\n  } = params;\n\n  const localRef = useRef<RefType>();\n  const ref = params.ref || localRef;\n  const closingTimeoutRef = useRef<number>();\n  const [getState, setState] = useSignal<State | undefined>();\n  const optionsRef = useStateRef({\n    closeDuration, noMountTransition, noOpenTransition, noCloseTransition,\n  });\n  const onCloseEndLast = useLastCallback(onCloseAnimationEnd);\n\n  useSyncEffectWithPrevDeps(([prevIsOpen]) => {\n    const options = optionsRef.current;\n\n    if (shouldForceOpen) {\n      setState('open');\n      return;\n    }\n\n    if (isOpen) {\n      if (closingTimeoutRef.current) {\n        clearTimeout(closingTimeoutRef.current);\n        closingTimeoutRef.current = undefined;\n      }\n\n      if (options.noOpenTransition || (prevIsOpen === undefined && options.noMountTransition)) {\n        setState('open');\n      } else {\n        setState('scheduled-open');\n        requestMeasure(() => {\n          setState('open');\n        });\n      }\n    } else if (prevIsOpen === undefined || options.noCloseTransition) {\n      setState('closed');\n    } else {\n      setState('closing');\n\n      closingTimeoutRef.current = window.setTimeout(() => {\n        setState('closed');\n        onCloseEndLast();\n      }, options.closeDuration);\n    }\n  }, [isOpen, shouldForceOpen]);\n\n  const applyClassNames = useLastCallback(() => {\n    const element = ref.current;\n    if (!element) return;\n\n    if (className !== false) {\n      addExtraClass(element, 'opacity-transition');\n      addExtraClass(element, className);\n    }\n\n    const state = getState();\n    const shouldRender = state !== 'closed';\n    const hasOpenClass = state === 'open';\n    const isClosing = state === 'closing';\n\n    toggleExtraClass(element, `${prefix}shown`, shouldRender);\n    toggleExtraClass(element, `${prefix}not-shown`, !shouldRender);\n    toggleExtraClass(element, `${prefix}open`, hasOpenClass);\n    toggleExtraClass(element, `${prefix}not-open`, !hasOpenClass);\n    toggleExtraClass(element, `${prefix}closing`, isClosing);\n  });\n\n  // Workaround for Chrome causing forced reflow in the middle of mutation phase when unmounting a focused element.\n  // Due to such forced reflow setting initial class names in the first layout effect causes transitions to start.\n  useSyncEffect(() => {\n    ref.onChange = () => {\n      ref.onChange = undefined;\n      applyClassNames();\n    };\n  }, [applyClassNames, ref]);\n\n  useLayoutEffect(applyClassNames, [applyClassNames, getState]);\n\n  const withShouldRender = 'withShouldRender' in params && params.withShouldRender;\n  const shouldRender = useDerivedState(\n    () => (withShouldRender && getState() !== 'closed'),\n    [withShouldRender, getState],\n  );\n\n  const getIsClosing = useDerivedSignal(() => getState() === 'closing', [getState]);\n\n  if (withShouldRender) {\n    return { ref, shouldRender, getIsClosing };\n  }\n\n  return { ref, getIsClosing };\n}\n","import { useLayoutEffect } from '../lib/teact/teact';\nimport { addExtraClass, removeExtraClass } from '../lib/teact/teact-dom';\n\ninterface Options {\n  className: string;\n  isActive?: boolean;\n  element?: HTMLElement | Document;\n}\n\nexport default function useToggleClass({\n  className,\n  isActive,\n  element = document.documentElement,\n}: Options): void {\n  useLayoutEffect(() => {\n    if (!isActive) return;\n\n    addExtraClass(element as HTMLElement, className);\n\n    return () => {\n      removeExtraClass(element as HTMLElement, className);\n    };\n  }, [className, isActive, element]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"esdydUs1\",\"dot\":\"TUSiLENF\",\"dots\":\"Zft9rPYc\",\"doubled\":\"UJzP4d9r\",\"dots-doubled\":\"vpZtb2OQ\",\"dotsDoubled\":\"vpZtb2OQ\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport styles from './LoadingDots.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  className?: string;\n  isDoubled?: boolean;\n}\n\nfunction LoadingDots({ isActive, className, isDoubled }: OwnProps) {\n  const { shouldRender, ref } = useShowTransition({\n    isOpen: isActive,\n    withShouldRender: true,\n  });\n\n  if (!shouldRender) {\n    // eslint-disable-next-line no-null/no-null\n    return null;\n  }\n\n  return (\n    <div ref={ref} className={buildClassName(styles.root, isDoubled && styles.doubled, className)}>\n      <span className={styles.dot} />\n      <span className={styles.dot} />\n      <span className={styles.dot} />\n    </div>\n  );\n}\n\nexport default memo(LoadingDots);\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"GpDwnAkE\",\"loadingInit\":\"tZ9ppkji\",\"clicked\":\"A1qGzs0x\",\"isSimple\":\"Cw_ElX3O\",\"isText\":\"d3A7BZDx\",\"primary\":\"Pb9B3sBE\",\"secondary\":\"k1jQrbAk\",\"transparent\":\"nxcFq7cM\",\"disabled\":\"zSwp1moR\",\"destructive\":\"tLZabe0e\",\"sizeSmall\":\"ORqfj0CU\",\"round\":\"PJ7EB5_T\",\"loadingStart\":\"pv1HwapI\",\"loadingDots\":\"_2QYUoJe\"};","import type { ElementRef, TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useState } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport LoadingDots from './LoadingDots';\n\nimport styles from './Button.module.scss';\n\nexport type OwnProps = {\n  ref?: ElementRef<HTMLButtonElement>;\n  children: TeactNode;\n  id?: string;\n  className?: string;\n  style?: string;\n  ariaLabel?: string;\n  forFormId?: string;\n  kind?: 'transparent';\n  isSubmit?: boolean;\n  isPrimary?: boolean;\n  isSecondary?: boolean;\n  isSmall?: boolean;\n  isSimple?: boolean;\n  isText?: boolean;\n  isLoading?: boolean;\n  isDisabled?: boolean;\n  isRound?: boolean;\n  isDestructive?: boolean;\n  shouldStopPropagation?: boolean;\n  onClick?: NoneToVoidFunction;\n  onMouseDown?: (e: React.MouseEvent) => void;\n  onContextMenu?: (e: React.MouseEvent) => void;\n};\n\n// Longest animation duration\nconst CLICKED_TIMEOUT = 400;\n\nfunction Button({\n  ref,\n  children,\n  id,\n  className,\n  style,\n  ariaLabel,\n  forFormId,\n  kind,\n  isSubmit,\n  isPrimary,\n  isSecondary,\n  isSmall,\n  isSimple,\n  isText,\n  isLoading,\n  isDisabled,\n  isRound,\n  isDestructive,\n  shouldStopPropagation,\n  onClick,\n  onMouseDown,\n  onContextMenu,\n}: OwnProps) {\n  const [isClicked, setIsClicked] = useState(false);\n\n  const handleClick = useLastCallback((event: React.MouseEvent) => {\n    if (!isDisabled && onClick) {\n      if (shouldStopPropagation) {\n        event.stopPropagation();\n      }\n      onClick();\n    }\n\n    setIsClicked(true);\n    setTimeout(() => {\n      setIsClicked(false);\n    }, CLICKED_TIMEOUT);\n  });\n\n  const loadingClassName = buildClassName(\n    isLoading !== undefined && styles.loadingInit,\n    isLoading && styles.loadingStart,\n  );\n\n  return (\n    <button\n      id={id}\n      ref={ref}\n      type={isSubmit || forFormId ? 'submit' : 'button'}\n      className={buildClassName(\n        styles.button,\n        isPrimary && styles.primary,\n        isSecondary && styles.secondary,\n        isSmall && styles.sizeSmall,\n        isSimple && styles.isSimple,\n        isText && styles.isText,\n        (isDisabled || isLoading) && styles.disabled,\n        loadingClassName,\n        isRound && styles.round,\n        isDestructive && styles.destructive,\n        isClicked && styles.clicked,\n        className,\n        kind && styles[kind],\n      )}\n      style={style}\n      aria-label={ariaLabel}\n      disabled={isDisabled || isLoading}\n      form={forFormId}\n      onClick={handleClick}\n      onMouseDown={onMouseDown}\n      onContextMenu={onContextMenu}\n    >\n      {children}\n      <LoadingDots isActive={isLoading} className={styles.loadingDots} />\n    </button>\n  );\n}\n\nexport default memo(Button);\n","import type { VirtualElement } from '../../lib/teact/teact';\nimport { useLayoutEffect, useRef } from '../../lib/teact/teact';\nimport TeactDOM from '../../lib/teact/teact-dom';\n\ntype OwnProps = {\n  containerId?: string;\n  className?: string;\n  style?: string;\n  children: VirtualElement;\n};\n\nfunction Portal({\n  containerId, className, style, children,\n}: OwnProps): TeactJsx {\n  const elementRef = useRef<HTMLDivElement>();\n  if (!elementRef.current) {\n    elementRef.current = document.createElement('div');\n  }\n\n  useLayoutEffect(() => {\n    const container = document.querySelector<HTMLDivElement>(containerId || '#portals');\n    if (!container) {\n      return undefined;\n    }\n\n    const element = elementRef.current!;\n\n    if (className) {\n      element.className = className;\n    }\n\n    if (style) {\n      element.style.cssText = style;\n    }\n\n    container.appendChild(element);\n\n    return () => {\n      TeactDOM.render(undefined, element);\n      container.removeChild(element);\n    };\n  }, [className, style, containerId]);\n\n  return TeactDOM.render(children, elementRef.current);\n}\n\nexport default Portal;\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"bei20BXo\",\"inAppLock\":\"rhy5UM19\",\"error\":\"ycQPrkNy\",\"dialog\":\"lCrWZOJa\",\"backdrop\":\"BRHUYooL\",\"slideUpAnimation\":\"ciD50Ivv\",\"container\":\"pI0zvyZ_\",\"forceBottomSheet\":\"zXbZnJvJ\",\"content\":\"ikANOLRm\",\"noBackdrop\":\"JdyYzya2\",\"compact\":\"OIC6BQI4\",\"header\":\"LB42p81C\",\"header_wideContent\":\"_ijqgHQC\",\"headerWideContent\":\"_ijqgHQC\",\"header_back\":\"F2CCACcS\",\"headerBack\":\"F2CCACcS\",\"header_backIcon\":\"IubryJoO\",\"headerBackIcon\":\"IubryJoO\",\"menuButton\":\"nz22xGPo\",\"menuIcon\":\"NiajLgHY\",\"closeButton\":\"Oj6lWSUo\",\"closeIcon\":\"VPuUZtvp\",\"title\":\"ZDSNp0nr\",\"singleTitle\":\"Sv8Bhg5M\",\"contentCompact\":\"ulAHEr0t\",\"text\":\"FumpDc7T\",\"text_centered\":\"PRVdJNuh\",\"textCentered\":\"PRVdJNuh\",\"text_noExtraMargin\":\"JNEqsMcb\",\"textNoExtraMargin\":\"JNEqsMcb\",\"buttons\":\"PWLeFX8Z\",\"footerButtons\":\"fXtMQ4nZ\",\"footerButtonFullWidth\":\"KMr7BHAz\",\"buttonsInsideContentWithScroll\":\"SCBITBKB\",\"buttonsNoExtraSpace\":\"vyEjC2QK\",\"button\":\"pvjzjt3q\",\"buttonHalfWidth\":\"EhlEYVbZ\",\"buttonFullWidth\":\"zRgM4gqF\",\"shortButton\":\"QFWfMoly\",\"fluidButton\":\"RTgQIBFc\",\"transition\":\"ELmioinr\",\"transitionSlide\":\"OXFBF6TX\",\"transitionContentWrapper\":\"N1r_Lya9\",\"transitionContent\":\"W4ZdBtyi\",\"transitionContent_simple\":\"qGdeWGzL\",\"transitionContentSimple\":\"qGdeWGzL\"};","import type { BottomSheetKeys } from '@mytonwallet/native-bottom-sheet';\nimport { BottomSheet } from '@mytonwallet/native-bottom-sheet';\nimport type { ElementRef, RefObject, TeactNode } from '../../lib/teact/teact';\nimport React, {\n  beginHeavyAnimation,\n  useEffect,\n  useLayoutEffect,\n  useRef,\n  useState,\n} from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { ANIMATION_END_DELAY, IS_EXTENSION, IS_TELEGRAM_APP } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { captureEvents, SwipeDirection } from '../../util/captureEvents';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { getIsSwipeToCloseDisabled } from '../../util/modalSwipeManager';\nimport { createSignal } from '../../util/signals';\nimport {\n  disableTelegramMiniAppSwipeToClose,\n  enableTelegramMiniAppSwipeToClose,\n} from '../../util/telegram';\nimport trapFocus from '../../util/trapFocus';\nimport { IS_ANDROID, IS_DELEGATED_BOTTOM_SHEET, IS_TOUCH_ENV } from '../../util/windowEnvironment';\nimport windowSize from '../../util/windowSize';\n\nimport freezeWhenClosed from '../../hooks/freezeWhenClosed';\nimport { getIsForcedFullSize, useDelegatedBottomSheet } from '../../hooks/useDelegatedBottomSheet';\nimport { useDelegatingBottomSheet } from '../../hooks/useDelegatingBottomSheet';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useHideBrowser from '../../hooks/useHideBrowser';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useToggleClass from '../../hooks/useToggleClass';\n\nimport Button from './Button';\nimport { getInAppBrowser } from './InAppBrowser';\nimport Portal from './Portal';\n\nimport styles from './Modal.module.scss';\n\ntype OwnProps = {\n  title?: string | TeactNode;\n  className?: string;\n  dialogClassName?: string;\n  titleClassName?: string;\n  contentClassName?: string;\n  isOpen?: boolean;\n  isCompact?: boolean;\n  nativeBottomSheetKey?: BottomSheetKeys;\n  forceFullNative?: boolean; // Always open in \"full\" size\n  noResetFullNativeOnBlur?: boolean; // Don't reset \"full\" size on blur\n  isInAppLock?: boolean;\n  forceBottomSheet?: boolean;\n  noBackdrop?: boolean;\n  noBackdropClose?: boolean;\n  header?: any;\n  hasCloseButton?: boolean;\n  children: TeactNode;\n  onClose: NoneToVoidFunction;\n  onCloseAnimationEnd?: NoneToVoidFunction;\n  onEnter?: NoneToVoidFunction;\n  dialogRef?: ElementRef<HTMLDivElement>;\n};\n\ntype StateProps = {\n  isTemporarilyClosed: boolean;\n};\n\nexport const CLOSE_DURATION = 350;\nexport const CLOSE_DURATION_PORTRAIT = IS_ANDROID ? 200 : 500;\nconst SCROLL_CONTENT_CHECK_THRESHOLD_MS = 500;\n\nconst [getModalCloseSignal, setModalCloseSignal] = createSignal<number>(Date.now());\n\nexport function closeModal() {\n  setModalCloseSignal(Date.now());\n}\n\n// Track open modals with nativeBottomSheetKey\nconst openNativeBottomSheetModals = new Set<BottomSheetKeys>();\n\nexport function getIsAnyNativeBottomSheetModalOpen(): boolean {\n  return openNativeBottomSheetModals.size > 0;\n}\n\nfunction Modal({\n  dialogRef,\n  title,\n  className,\n  dialogClassName,\n  titleClassName,\n  contentClassName,\n  isOpen: doesWantToBeOpened,\n  isTemporarilyClosed,\n  isCompact,\n  nativeBottomSheetKey,\n  forceFullNative,\n  forceBottomSheet,\n  isInAppLock,\n  noResetFullNativeOnBlur,\n  noBackdrop,\n  noBackdropClose,\n  header,\n  hasCloseButton,\n  children,\n  onClose: onCloseProp,\n  onCloseAnimationEnd,\n  onEnter,\n}: OwnProps & StateProps): TeactJsx {\n  const isOpen = doesWantToBeOpened && !isTemporarilyClosed;\n  const onClose = useLastCallback(() => {\n    if (isTemporarilyClosed && doesWantToBeOpened) {\n      return undefined;\n    }\n\n    return onCloseProp();\n  });\n\n  const lang = useLang();\n\n  const modalRef = useRef<HTMLDivElement>();\n  const localDialogRef = useRef<HTMLDivElement>();\n  const swipeDownDateRef = useRef<number>();\n  dialogRef ||= localDialogRef;\n\n  const { isPortrait } = useDeviceScreen();\n\n  useHideBrowser(isOpen, isCompact);\n\n  const animationDuration = (isPortrait ? CLOSE_DURATION_PORTRAIT : CLOSE_DURATION) + ANIMATION_END_DELAY;\n\n  const isSlideUp = !isCompact && isPortrait;\n\n  useHistoryBack({ isActive: isOpen, onBack: onClose, shouldIgnoreForTelegram: isCompact });\n\n  useEffect(() => {\n    if (!IS_TELEGRAM_APP || !isOpen || isCompact) return undefined;\n\n    disableTelegramMiniAppSwipeToClose();\n\n    return enableTelegramMiniAppSwipeToClose;\n  }, [isCompact, isOpen]);\n\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    // Expand NBS to full size for a compact modal inside NBS\n    if (IS_DELEGATED_BOTTOM_SHEET && isCompact && (prevIsOpen || isOpen) && !getIsForcedFullSize()) {\n      void BottomSheet.toggleSelfFullSize({ isFullSize: !!isOpen });\n    }\n  }, [isOpen, isCompact]);\n\n  useEffect(() => {\n    if (IS_DELEGATED_BOTTOM_SHEET || !isOpen) return undefined;\n\n    return getModalCloseSignal.subscribe(onClose);\n  }, [isOpen, onClose]);\n\n  useEffect(\n    () => (isOpen ? captureKeyboardListeners({\n      onEsc: { handler: onClose, shouldPreventDefault: IS_EXTENSION },\n      ...(onEnter && { onEnter }),\n    }) : undefined),\n    [isOpen, onClose, onEnter],\n  );\n  useEffect(() => (isOpen && modalRef.current ? trapFocus(modalRef.current) : undefined), [isOpen]);\n  useToggleClass({ className: 'is-modal-open', isActive: !isCompact && isOpen });\n\n  useLayoutEffect(() => (\n    isOpen ? beginHeavyAnimation(animationDuration) : undefined\n  ), [animationDuration, isOpen]);\n\n  // Track modal state for modals with nativeBottomSheetKey\n  useEffect(() => {\n    if (!nativeBottomSheetKey) return;\n\n    if (isOpen) {\n      openNativeBottomSheetModals.add(nativeBottomSheetKey);\n    } else {\n      openNativeBottomSheetModals.delete(nativeBottomSheetKey);\n    }\n\n    return () => {\n      openNativeBottomSheetModals.delete(nativeBottomSheetKey);\n    };\n  }, [isOpen, nativeBottomSheetKey]);\n\n  // Make sure to hide browser before presenting modals\n  const [isBrowserHidden, setIsBrowserHidden] = useState(false);\n  useEffect(() => {\n    const browser = getInAppBrowser();\n    if (!isOpen) {\n      setIsBrowserHidden(false); // Reset to re-hide it next time\n      // Before showing browser, make sure that closed modals are updated state properly\n      requestAnimationFrame(() => {\n        browser?.show();\n      });\n      return;\n    }\n\n    void browser?.hide().then(() => {\n      setIsBrowserHidden(true);\n    });\n  }, [isOpen]);\n\n  const isDelegatingToNative = useDelegatingBottomSheet(\n    nativeBottomSheetKey,\n    isPortrait,\n    isOpen && (!getInAppBrowser() || isBrowserHidden),\n    onClose,\n  );\n\n  useDelegatedBottomSheet(\n    nativeBottomSheetKey,\n    isOpen && (!getInAppBrowser() || isBrowserHidden),\n    onClose,\n    dialogRef,\n    forceFullNative,\n    noResetFullNativeOnBlur,\n  );\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV || !isOpen || !isPortrait || !isSlideUp || IS_DELEGATED_BOTTOM_SHEET || isDelegatingToNative) {\n      return undefined;\n    }\n\n    return captureEvents(modalRef.current!, {\n      excludedClosestSelector: '.capture-scroll',\n      onSwipe: (e: Event, direction: SwipeDirection) => {\n        if (direction === SwipeDirection.Down && getCanCloseModal(swipeDownDateRef, e.target as HTMLElement)) {\n          onClose();\n          return true;\n        }\n\n        return false;\n      },\n    });\n  }, [isOpen, isPortrait, isSlideUp, isDelegatingToNative, onClose]);\n\n  const { shouldRender } = useShowTransition({\n    ref: modalRef,\n    isOpen: isOpen && !isDelegatingToNative,\n    onCloseAnimationEnd,\n    className: false,\n    closeDuration: animationDuration,\n    withShouldRender: true,\n  });\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  function renderHeader() {\n    if (header) {\n      return header;\n    }\n\n    if (!title) {\n      return undefined;\n    }\n\n    return (\n      <div\n        className={buildClassName(styles.header, styles.header_wideContent, !hasCloseButton && styles.header_noClose)}\n      >\n        <div className={buildClassName(styles.title, styles.singleTitle, titleClassName)}>{title}</div>\n        {hasCloseButton && (\n          <Button isRound className={styles.closeButton} ariaLabel={lang('Close')} onClick={onClose}>\n            <i className={buildClassName(styles.closeIcon, 'icon-close')} aria-hidden />\n          </Button>\n        )}\n      </div>\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.modal,\n    className,\n    isSlideUp && styles.slideUpAnimation,\n    isCompact && styles.compact,\n    isCompact && 'is-compact-modal',\n    forceBottomSheet && styles.forceBottomSheet,\n    isInAppLock && styles.inAppLock,\n  );\n\n  const backdropFullClass = buildClassName(styles.backdrop, noBackdrop && styles.noBackdrop);\n\n  const contentFullClassName = buildClassName(\n    styles.content,\n    isCompact && styles.contentCompact,\n    'custom-scroll',\n    contentClassName,\n  );\n\n  return (\n    <Portal>\n      <div ref={modalRef} className={fullClassName} tabIndex={-1} role=\"dialog\">\n        <div className={styles.container}>\n          <div className={backdropFullClass} onClick={!noBackdropClose ? onClose : undefined} />\n          <div\n            className={buildClassName(styles.dialog, dialogClassName)}\n            ref={dialogRef}\n          >\n            {renderHeader()}\n            <div className={contentFullClassName}>{children}</div>\n          </div>\n        </div>\n      </div>\n    </Portal>\n  );\n}\n\nconst FreezeWhenClosedModal = freezeWhenClosed(Modal);\n\nexport default withGlobal((global, { isInAppLock }: OwnProps): StateProps => {\n  return {\n    // This behavior is intended to prevent NBS from rendering above the app lock screen,\n    // which is an iOS-only issue. We retain this fix on all platforms to unify behavior.\n    isTemporarilyClosed: !(isInAppLock || !global.isAppLockActive),\n  };\n})(FreezeWhenClosedModal);\n\nfunction getCanCloseModal(lastScrollRef: RefObject<number | undefined>, el?: HTMLElement) {\n  if (windowSize.getIsKeyboardVisible() || getIsSwipeToCloseDisabled()) {\n    return false;\n  }\n\n  const now = Date.now();\n  if (lastScrollRef.current && now - lastScrollRef.current < SCROLL_CONTENT_CHECK_THRESHOLD_MS) {\n    return false;\n  }\n\n  lastScrollRef.current = now;\n  const scrollEl = el?.closest('.custom-scroll');\n\n  return !scrollEl || scrollEl.scrollTop === 0;\n}\n","import { type FC, type Props, useRef } from '../lib/teact/teact';\n\nexport default function freezeWhenClosed<T extends FC>(Component: T) {\n  function ComponentWrapper(props: Props) {\n    const newProps = useRef(props);\n\n    if (props.isOpen) {\n      newProps.current = props;\n    } else {\n      newProps.current = {\n        ...newProps.current,\n        isOpen: false,\n      };\n    }\n\n    return Component(newProps.current);\n  }\n\n  return ComponentWrapper as T;\n}\n","import { BottomSheet } from '@mytonwallet/native-bottom-sheet';\n\nimport { IS_CAPACITOR } from '../config';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET } from '../util/windowEnvironment';\nimport useSyncEffect from './useSyncEffect';\n\nimport { getInAppBrowser } from '../components/ui/InAppBrowser';\n\nexport default function useHideBrowser(\n  isOpen?: boolean,\n  isCompact?: boolean,\n) {\n  useSyncEffect(() => {\n    if (!IS_CAPACITOR || IS_DELEGATED_BOTTOM_SHEET || isCompact) return;\n\n    const browser = getInAppBrowser();\n    if (!browser) return;\n\n    if (isOpen && browser) {\n      void browser.hide().then(async () => {\n        if (IS_DELEGATING_BOTTOM_SHEET) {\n          await BottomSheet.enable();\n        }\n      });\n    }\n  }, [isCompact, isOpen]);\n}\n","import type { InAppBrowserObject } from '@awesome-cordova-plugins/in-app-browser';\nimport { BottomSheet } from '@mytonwallet/native-bottom-sheet';\nimport { memo, useEffect, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { ANIMATION_LEVEL_DEFAULT } from '../../config';\nimport { INAPP_BROWSER_OPTIONS } from '../../util/capacitor';\nimport { listenOnce } from '../../util/domEvents';\nimport { buildInAppBrowserBridgeConnectorCode } from '../../util/embeddedDappBridge/connector/inAppBrowserConnector';\nimport { useInAppBrowserBridgeProvider } from '../../util/embeddedDappBridge/provider/useInAppBrowserBridgeProvider';\nimport { compact } from '../../util/iteratees';\nimport { logDebugError } from '../../util/logs';\nimport { waitFor } from '../../util/schedulers';\nimport { getHostnameFromUrl } from '../../util/url';\nimport { IS_DELEGATING_BOTTOM_SHEET, IS_IOS, IS_IOS_APP } from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport { getIsAnyNativeBottomSheetModalOpen } from './Modal';\n\ntype CustomInAppBrowserObject = Omit<InAppBrowserObject, 'hide' | 'close'> & {\n  hide(): Promise<void>;\n  close(): Promise<void>;\n};\n\ninterface StateProps {\n  title?: string;\n  subtitle?: string;\n  url?: string;\n  theme: string;\n  animationLevel?: number;\n}\n\n// The maximum time the in-app browser will take to close (and a little more as a safe margin)\nconst CLOSE_MAX_DURATION = 900;\n\n// eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\nlet inAppBrowser: Cordova['InAppBrowser'] | undefined;\n\nfunction InAppBrowser({\n  title, subtitle, url, theme, animationLevel,\n}: StateProps) {\n  const { closeBrowser } = getActions();\n\n  const lang = useLang();\n\n  const { setupDappBridge, cleanupDappBridge } = useInAppBrowserBridgeProvider(url);\n  const bridgeInjectionCode = useMemo(() => buildInAppBrowserBridgeConnectorCode(), []);\n\n  const handleError = useLastCallback((err: any) => {\n    logDebugError('inAppBrowser error', err);\n  });\n\n  const handleBrowserClose = useLastCallback(async () => {\n    if (IS_DELEGATING_BOTTOM_SHEET) {\n      await BottomSheet.enable();\n    }\n\n    inAppBrowser.removeEventListener('loaderror', handleError);\n    inAppBrowser.removeEventListener('exit', handleBrowserClose);\n    inAppBrowser = undefined;\n    closeBrowser();\n\n    cleanupDappBridge();\n  });\n\n  const openBrowser = useLastCallback(async () => {\n    if (IS_DELEGATING_BOTTOM_SHEET && !(await BottomSheet.isShown()).value) {\n      await BottomSheet.disable();\n    }\n\n    const browserTitle = !title && url ? getHostnameFromUrl(url) : title;\n    const browserSubtitle = subtitle === browserTitle ? undefined : subtitle;\n\n    const ADDITIONAL_INAPP_BROWSER_OPTIONS = `,${compact([\n      IS_IOS || browserTitle ? `title=${browserTitle || ''}` : undefined,\n      IS_IOS || browserSubtitle ? `subtitle=${browserSubtitle || ''}` : undefined,\n      url ? `shareurl=${encodeURIComponent(url)}` : undefined,\n      `closebuttoncaption=${IS_IOS ? lang('Close') : 'x'}`,\n      `backbuttoncaption=${lang('Back')}`,\n      `reloadcaption=${lang('Reload Page')}`,\n      `openinbrowsercaption=${lang(IS_IOS ? 'Open in Safari' : 'Open in Browser')}`,\n      `copyurlcaption=${lang('CopyURL')}`,\n      `sharecaption=${lang('Share')}`,\n      `theme=${theme}`,\n      `animated=${animationLevel ?? ANIMATION_LEVEL_DEFAULT > 0 ? 'yes' : 'no'}`,\n    ]).join(',')}`;\n    inAppBrowser = cordova.InAppBrowser.open(\n      url,\n      '_blank',\n      INAPP_BROWSER_OPTIONS + ADDITIONAL_INAPP_BROWSER_OPTIONS,\n      bridgeInjectionCode,\n    );\n\n    const originalHide = inAppBrowser.hide;\n    inAppBrowser.hide = () => {\n      return new Promise<void>((resolve) => {\n        originalHide?.();\n        // On iOS, the animation takes some time. We have to ensure it's completed.\n        if (inAppBrowser && IS_IOS_APP) {\n          listenOnce(inAppBrowser, 'hidecompletion', () => resolve());\n        } else {\n          resolve();\n        }\n      });\n    };\n\n    const originalShow = inAppBrowser.show;\n    inAppBrowser.show = () => {\n      if (!getIsAnyNativeBottomSheetModalOpen()) {\n        originalShow?.();\n      }\n    };\n\n    const originalClose = inAppBrowser.close;\n    inAppBrowser.close = () => {\n      if (!inAppBrowser) {\n        return Promise.resolve();\n      }\n\n      originalClose();\n\n      const closedPromise = new Promise<void>((resolve) => {\n        // The `waitFor` is a hack necessary to ensure the browser is fully in the closed state when the promise\n        // resolves. This solves a bug: if a push notification, that opens a modal, was clicked while the in-app browser\n        // was open, the browser would close, but the modal wouldn't open.\n        listenOnce(inAppBrowser, 'exit', async () => {\n          await waitFor(() => !inAppBrowser, 15, 20);\n          resolve();\n        });\n\n        // A backup for cases when the `close()` call doesn't cause the browser to close and fire the `exit` event.\n        setTimeout(resolve, CLOSE_MAX_DURATION);\n      });\n\n      // Calling `show()` while the browser is being closed causes the app to crash. So we disable the `show` method.\n      inAppBrowser.show = () => undefined;\n      inAppBrowser.hide = () => closedPromise;\n\n      return closedPromise;\n    };\n\n    setupDappBridge(inAppBrowser);\n\n    inAppBrowser.addEventListener('loaderror', handleError);\n    inAppBrowser.addEventListener('exit', handleBrowserClose);\n    inAppBrowser.show();\n  });\n\n  useEffect(() => {\n    if (!url) return undefined;\n\n    void openBrowser();\n\n    return () => inAppBrowser?.close();\n  }, [url]);\n\n  return undefined;\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { currentBrowserOptions, settings } = global;\n\n  return {\n    url: currentBrowserOptions?.url,\n    title: currentBrowserOptions?.title,\n    subtitle: currentBrowserOptions?.subtitle,\n    theme: settings.theme,\n    animationLevel: settings.animationLevel,\n  };\n})(InAppBrowser));\n\nexport function getInAppBrowser(): CustomInAppBrowserObject | undefined {\n  return inAppBrowser;\n}\n","import type { ElementRef } from '../../../lib/teact/teact';\nimport { useEffect, useRef } from '../../../lib/teact/teact';\n\nimport { EMBEDDED_DAPP_BRIDGE_CHANNEL } from '../../../config';\nimport { createPostMessageInterface } from '../../createPostMessageInterface';\nimport { buildBridgeApi } from './bridgeApi';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport InAppBrowserPostMessageAdapter from './InAppBrowserPostMessageAdapter';\n\nexport function useInAppBrowserBridgeProvider(pageUrl?: string) {\n  const cleanupRef = useRef<NoneToVoidFunction>();\n\n  const setupDappBridge = useLastCallback((inAppBrowser: ElementRef<Cordova['InAppBrowser']>) => {\n    cleanupRef.current = createPostMessageInterface(\n      buildBridgeApi(pageUrl!),\n      EMBEDDED_DAPP_BRIDGE_CHANNEL,\n      new InAppBrowserPostMessageAdapter(inAppBrowser),\n    );\n  });\n\n  useEffect(() => {\n    if (!pageUrl) return;\n\n    return () => {\n      cleanupRef.current?.();\n    };\n  }, [pageUrl]);\n\n  return {\n    setupDappBridge,\n    cleanupDappBridge: () => cleanupRef.current?.(),\n  };\n}\n","import {\n  EMBEDDED_DAPP_BRIDGE_CHANNEL,\n  TONCONNECT_PROTOCOL_VERSION,\n  TONCONNECT_WALLET_JSBRIDGE_KEY,\n} from '../../../config';\nimport { tonConnectGetDeviceInfo } from '../../tonConnectEnvironment';\nimport { initConnectorString } from './connector';\n\nexport function buildInAppBrowserBridgeConnectorCode() {\n  return `\n(${initConnectorString})(\n  '${TONCONNECT_WALLET_JSBRIDGE_KEY}',\n  '${EMBEDDED_DAPP_BRIDGE_CHANNEL}',\n  'cordova_iab' in window ? window.cordova_iab : window.webkit.messageHandlers.cordova_iab,\n  {\n    deviceInfo: ${JSON.stringify(tonConnectGetDeviceInfo())},\n    protocolVersion: ${TONCONNECT_PROTOCOL_VERSION},\n    isWalletBrowser: true,\n  }\n);\n  `;\n}\n","import type { ApiChain } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { getChainBySlug, getNativeToken } from '../../util/tokens';\nimport { getActions } from '../index';\nimport { selectCurrentAccount } from '../selectors';\n\nimport { getInAppBrowser } from '../../components/ui/InAppBrowser';\n\n/**\n * Parses the transfer parameters from the given QR content, assuming it's a plain address.\n * Returns `undefined` if this is not a valid address or the account doesn't have the corresponding wallet.\n */\nexport function parsePlainAddressQr(global: GlobalState, qrData: string) {\n  const availableChains = selectCurrentAccount(global)?.addressByChain ?? {};\n  const newChain = getChainFromAddress(qrData, availableChains);\n  if (!newChain) {\n    return undefined;\n  }\n\n  const currentTokenSlug = global.currentTransfer.tokenSlug;\n  const currentChain = getChainBySlug(currentTokenSlug);\n  const newTokenSlug = newChain !== currentChain ? getNativeToken(newChain).slug : currentTokenSlug;\n\n  return {\n    toAddress: qrData,\n    tokenSlug: newTokenSlug,\n  };\n}\n\nfunction getChainFromAddress(\n  address: string,\n  availableChains: Partial<Record<ApiChain, unknown>>,\n): ApiChain | undefined {\n  for (const chain of Object.keys(availableChains) as Array<keyof typeof availableChains>) {\n    if (isValidAddressOrDomain(address, chain)) {\n      return chain;\n    }\n  }\n\n  return undefined;\n}\n\nexport function closeAllOverlays() {\n  return Promise.all([\n    // It's important to close the in-app browser before closing the modal, because when a modal closes, it calls\n    // `show()` on the hidden in-app browser, and calling `close()` right after `show()` causes the app to crash.\n    // Meanwhile, calling `close()` before `show()` makes the in-app browser ignore the `show()` call.\n    // A situation, where it happens, is pressing an \"openUrl\" notification while the app shows a TON Connect modal.\n    getInAppBrowser()?.close(),\n    getActions().closeAnyModal(),\n    getActions().closeMediaViewer(),\n  ]);\n}\n\n/** replaceMap: keys - old (removed) activity ids, value - new (added) activity ids */\nexport function replaceActivityId(oldId: string | undefined, replaceMap: Record<string, string>) {\n  const newId = oldId && replaceMap[oldId];\n  return newId || oldId;\n}\n","import { AppLauncher } from '@capacitor/app-launcher';\nimport { getActions, getGlobal } from '../global';\n\nimport { IFRAME_WHITELIST, IS_CAPACITOR, SUBPROJECT_URL_MASK } from '../config';\nimport { closeAllOverlays } from '../global/helpers/misc';\nimport { isTelegramUrl } from './url';\n\nconst [, SUBPROJECT_HOST_ENDING] = SUBPROJECT_URL_MASK.split('*');\n\nexport type OpenUrlOptions = {\n  isExternal?: boolean;\n  title?: string;\n  subtitle?: string;\n};\n\nexport async function openUrl(url: string, options?: OpenUrlOptions) {\n  if (isSubproject(url)) {\n    url = `${url}#theme=${getGlobal().settings.theme}`;\n  }\n\n  if (\n    !options?.isExternal\n    && url.startsWith('http')\n    && (IS_CAPACITOR || isSubproject(url) || isInIframeWhitelist(url))\n    && !isTelegramUrl(url)\n  ) {\n    await closeAllOverlays();\n    getActions().openBrowser({\n      url,\n      title: options?.title,\n      subtitle: options?.subtitle,\n    });\n  } else {\n    const couldOpenApp = IS_CAPACITOR && await openAppSafe(url);\n    if (!couldOpenApp) {\n      window.open(url, '_blank', 'noopener');\n    }\n  }\n}\n\nfunction isSubproject(url: string) {\n  const { host } = new URL(url);\n  return host.endsWith(SUBPROJECT_HOST_ENDING) || host.startsWith('localhost:432');\n}\n\nfunction isInIframeWhitelist(url: string) {\n  return IFRAME_WHITELIST.some((allowedOrigin) => url.startsWith(allowedOrigin.replace(/\\*$/, '')));\n}\n\nexport function handleUrlClick(\n  e: React.MouseEvent<HTMLAnchorElement, MouseEvent>,\n) {\n  e.preventDefault();\n  void openUrl(e.currentTarget.href, {\n    isExternal: e.shiftKey || e.ctrlKey || e.metaKey,\n  });\n}\n\nasync function openAppSafe(url: string) {\n  try {\n    return (await AppLauncher.openUrl({ url })).completed;\n  } catch (err) {\n    return false;\n  }\n}\n","let resolveRenderPromise: NoneToVoidFunction;\nconst renderPromise = new Promise<void>((resolve) => {\n  resolveRenderPromise = resolve;\n});\n\nexport function resolveRender() {\n  resolveRenderPromise();\n}\n\nexport function waitRender() {\n  return renderPromise;\n}\n","export const TON_PROTOCOL = 'ton://';\nexport const TONCONNECT_PROTOCOL = 'tc://';\nexport const TONCONNECT_PROTOCOL_SELF = 'mytonwallet-tc://';\nexport const SELF_PROTOCOL = 'mtw://';\nexport const SELF_UNIVERSAL_URLS = ['https://my.tt', 'https://go.mytonwallet.org'];\nexport const TONCONNECT_UNIVERSAL_URL = 'https://connect.mytonwallet.org';\nexport const CHECKIN_URL = 'https://checkin.mytonwallet.org';\n","import { getActions, getGlobal } from '../../global';\n\nimport type { ActionPayloads, GlobalState } from '../../global/types';\nimport type { OpenUrlOptions } from '../openUrl';\nimport { ActiveTab, ContentTab } from '../../global/types';\n\nimport {\n  DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG,\n  DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  GIVEAWAY_CHECKIN_URL,\n  TONCOIN,\n} from '../../config';\nimport {\n  selectAccountTokenBySlug,\n  selectCurrentAccount,\n  selectCurrentAccountNftByAddress,\n  selectTokenByMinterAddress,\n} from '../../global/selectors';\nimport { callApi } from '../../api';\nimport { isValidAddressOrDomain } from '../isValidAddressOrDomain';\nimport { omitUndefined } from '../iteratees';\nimport { logDebug, logDebugError } from '../logs';\nimport { openUrl } from '../openUrl';\nimport { waitRender } from '../renderPromise';\nimport { isTelegramUrl } from '../url';\nimport {\n  CHECKIN_URL,\n  SELF_PROTOCOL,\n  SELF_UNIVERSAL_URLS,\n  TON_PROTOCOL,\n  TONCONNECT_PROTOCOL,\n  TONCONNECT_PROTOCOL_SELF,\n  TONCONNECT_UNIVERSAL_URL,\n} from './constants';\n\nimport { getIsLandscape, getIsPortrait } from '../../hooks/useDeviceScreen';\n\nenum DeeplinkCommand {\n  CheckinWithR = 'r',\n  Swap = 'swap',\n  BuyWithCrypto = 'buy-with-crypto',\n  BuyWithCard = 'buy-with-card',\n  Stake = 'stake',\n  Giveaway = 'giveaway',\n  Transfer = 'transfer',\n  Explore = 'explore',\n}\n\nlet urlAfterSignIn: string | undefined;\n\nexport function processDeeplinkAfterSignIn() {\n  if (!urlAfterSignIn) return;\n\n  void processDeeplink(urlAfterSignIn);\n\n  urlAfterSignIn = undefined;\n}\n\nexport async function openDeeplinkOrUrl(\n  url: string,\n  { isFromInAppBrowser, ...urlOptions }: OpenUrlOptions & { isFromInAppBrowser?: boolean },\n) {\n  if (isTonDeeplink(url) || isTonConnectDeeplink(url) || isSelfDeeplink(url)) {\n    await processDeeplink(url, isFromInAppBrowser);\n  } else {\n    await openUrl(url, urlOptions);\n  }\n}\n\n// Returns `true` if the link has been processed, ideally resulting to a UI action\nexport function processDeeplink(url: string, isFromInAppBrowser = false): Promise<boolean> {\n  if (!getGlobal().currentAccountId) {\n    urlAfterSignIn = url;\n  }\n\n  if (isTonConnectDeeplink(url)) {\n    return processTonConnectDeeplink(url, isFromInAppBrowser);\n  } else if (isSelfDeeplink(url)) {\n    return processSelfDeeplink(url);\n  } else {\n    return processTonDeeplink(url);\n  }\n}\n\nexport function isTonDeeplink(url: string) {\n  return url.startsWith(TON_PROTOCOL);\n}\n\n// Returns `true` if the link has been processed, ideally resulting to a UI action\nasync function processTonDeeplink(url: string): Promise<boolean> {\n  await waitRender();\n\n  const actions = getActions();\n  const global = getGlobal();\n  if (!global.currentAccountId) {\n    return false;\n  }\n\n  const startTransferParams = parseTonDeeplink(url, global);\n\n  if (!startTransferParams) {\n    return false;\n  }\n\n  if ('error' in startTransferParams) {\n    actions.showError({ error: startTransferParams.error });\n    return true;\n  }\n\n  actions.startTransfer({\n    isPortrait: getIsPortrait(),\n    ...startTransferParams,\n  });\n\n  if (getIsLandscape()) {\n    actions.setLandscapeActionsActiveTabIndex({ index: ActiveTab.Transfer });\n  }\n\n  return true;\n}\n\n/**\n * Parses a TON deeplink and checks whether the transfer can be initiated.\n * Returns `undefined` if the URL is not a TON deeplink.\n * If there is `error` in the result, there is a problem with the deeplink (the string is to translate via `lang`).\n * Otherwise, returned the parsed transfer parameters.\n */\nexport function parseTonDeeplink(url: string, global: GlobalState) {\n  const params = rawParseTonDeeplink(url);\n  if (!params) return undefined;\n\n  if (params.hasUnsupportedParams) {\n    return {\n      error: '$unsupported_deeplink_parameter',\n    };\n  }\n\n  const {\n    toAddress,\n    amount,\n    comment,\n    binPayload,\n    jettonAddress,\n    nftAddress,\n    stateInit,\n    exp,\n  } = params;\n\n  const verifiedAddress = isValidAddressOrDomain(toAddress, 'ton') ? toAddress : undefined;\n\n  const transferParams: Omit<NonNullable<ActionPayloads['startTransfer']>, 'isPortrait'> & { error?: string } = {\n    toAddress: verifiedAddress,\n    tokenSlug: TONCOIN.slug,\n    amount,\n    comment,\n    binPayload,\n    stateInit,\n  };\n\n  // Check if both text and bin parameters are provided (mutually exclusive)\n  if (comment && binPayload) {\n    transferParams.error = '$transfer_text_and_bin_exclusive';\n  }\n\n  if (jettonAddress) {\n    const globalToken = jettonAddress\n      ? selectTokenByMinterAddress(global, jettonAddress)\n      : undefined;\n\n    if (!globalToken) {\n      transferParams.error = '$unknown_token_address';\n    } else {\n      const accountToken = selectAccountTokenBySlug(global, globalToken.slug);\n\n      if (!accountToken) {\n        transferParams.error = '$dont_have_required_token';\n      } else {\n        transferParams.tokenSlug = globalToken.slug;\n      }\n    }\n  }\n\n  if (nftAddress) {\n    const accountNft = selectCurrentAccountNftByAddress(global, nftAddress);\n\n    if (!accountNft) {\n      transferParams.error = '$dont_have_required_nft';\n    } else {\n      transferParams.nfts = [accountNft];\n    }\n  }\n\n  if (exp && Math.floor(Date.now() / 1000) > exp) {\n    transferParams.error = '$transfer_link_expired';\n  }\n\n  return omitUndefined(transferParams);\n}\n\nfunction rawParseTonDeeplink(value?: string) {\n  if (typeof value !== 'string' || !isTonDeeplink(value) || !value.includes('/transfer/')) {\n    return undefined;\n  }\n\n  try {\n    // In some browsers URL module may handle non-standard protocols incorrectly\n    const adaptedDeeplink = value.replace(TON_PROTOCOL, 'https://');\n    const url = new URL(adaptedDeeplink);\n\n    const toAddress = url.pathname.replace(/\\//g, '');\n    const amount = getDeeplinkSearchParam(url, 'amount');\n    const comment = getDeeplinkSearchParam(url, 'text');\n    const binPayload = getDeeplinkSearchParam(url, 'bin');\n    const jettonAddress = getDeeplinkSearchParam(url, 'jetton');\n    const nftAddress = getDeeplinkSearchParam(url, 'nft');\n    const stateInit = getDeeplinkSearchParam(url, 'init') || getDeeplinkSearchParam(url, 'stateInit');\n    const exp = getDeeplinkSearchParam(url, 'exp');\n\n    // Check for unsupported parameters\n    const supportedParams = new Set(['amount', 'text', 'bin', 'jetton', 'nft', 'init', 'stateInit', 'exp']);\n    const urlParams = Array.from(url.searchParams.keys());\n    const hasUnsupportedParams = urlParams.some((param) => !supportedParams.has(param));\n\n    return {\n      hasUnsupportedParams,\n      toAddress,\n      amount: amount ? BigInt(amount) : undefined,\n      comment,\n      jettonAddress,\n      nftAddress,\n      binPayload: binPayload ? replaceAllSpacesWithPlus(binPayload) : undefined,\n      stateInit: stateInit ? replaceAllSpacesWithPlus(stateInit) : undefined,\n      exp: exp ? Number(exp) : undefined,\n    };\n  } catch (err) {\n    return undefined;\n  }\n}\n\nfunction isTonConnectDeeplink(url: string) {\n  return url.startsWith(TONCONNECT_PROTOCOL)\n    || url.startsWith(TONCONNECT_PROTOCOL_SELF)\n    || omitProtocol(url).startsWith(omitProtocol(TONCONNECT_UNIVERSAL_URL));\n}\n\n// Returns `true` if the link has been processed, ideally resulting to a UI action\nasync function processTonConnectDeeplink(url: string, isFromInAppBrowser = false): Promise<boolean> {\n  if (!isTonConnectDeeplink(url)) {\n    return false;\n  }\n\n  const { openLoadingOverlay, closeLoadingOverlay } = getActions();\n\n  openLoadingOverlay();\n\n  const returnUrl = await callApi('startSseConnection', {\n    url,\n    isFromInAppBrowser,\n  });\n\n  closeLoadingOverlay();\n\n  if (returnUrl) {\n    void openUrl(returnUrl, { isExternal: !isFromInAppBrowser });\n  }\n\n  return true;\n}\n\nexport function isSelfDeeplink(url: string) {\n  url = forceHttpsProtocol(url);\n\n  return url.startsWith(SELF_PROTOCOL)\n    || SELF_UNIVERSAL_URLS.some((u) => url.startsWith(u));\n}\n\n// Returns `true` if the link has been processed, ideally resulting to a UI action\nexport async function processSelfDeeplink(deeplink: string): Promise<boolean> {\n  try {\n    deeplink = convertSelfDeeplinkToSelfUrl(deeplink);\n\n    const { pathname, searchParams } = new URL(deeplink);\n    const command = pathname.split('/').find(Boolean);\n    const actions = getActions();\n    const global = getGlobal();\n    const { isTestnet } = global.settings;\n    const isLedger = selectCurrentAccount(global)?.ledger;\n\n    logDebug('Processing deeplink', deeplink);\n\n    switch (command) {\n      case DeeplinkCommand.CheckinWithR: {\n        const r = pathname.match(/r\\/(.*)$/)?.[1];\n        const url = `${CHECKIN_URL}${r ? `?r=${r}` : ''}`;\n        void openUrl(url);\n        return true;\n      }\n\n      case DeeplinkCommand.Giveaway: {\n        const giveawayId = pathname.match(/giveaway\\/([^/]+)/)?.[1];\n        const url = `${GIVEAWAY_CHECKIN_URL}${giveawayId ? `?giveawayId=${giveawayId}` : ''}`;\n        void openUrl(url);\n        return true;\n      }\n\n      case DeeplinkCommand.Swap: {\n        if (isTestnet) {\n          actions.showError({ error: 'Swap is not supported in Testnet.' });\n        } else if (isLedger) {\n          actions.showError({ error: 'Swap is not yet supported by Ledger.' });\n        } else {\n          actions.startSwap({\n            tokenInSlug: searchParams.get('in') || TONCOIN.slug,\n            tokenOutSlug: searchParams.get('out') || DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n            amountIn: toNumberOrEmptyString(searchParams.get('amount')) || '10',\n          });\n        }\n        return true;\n      }\n\n      case DeeplinkCommand.BuyWithCrypto: {\n        if (isTestnet) {\n          actions.showError({ error: 'Swap is not supported in Testnet.' });\n        } else if (isLedger) {\n          actions.showError({ error: 'Swap is not yet supported by Ledger.' });\n        } else {\n          actions.startSwap({\n            tokenInSlug: searchParams.get('in') || DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG,\n            tokenOutSlug: searchParams.get('out') || TONCOIN.slug,\n            amountIn: toNumberOrEmptyString(searchParams.get('amount')) || '100',\n          });\n        }\n        return true;\n      }\n\n      case DeeplinkCommand.BuyWithCard: {\n        if (isTestnet) {\n          actions.showError({ error: 'Buying with card is not supported in Testnet.' });\n        } else {\n          actions.openOnRampWidgetModal({ chain: 'ton' });\n        }\n        return true;\n      }\n\n      case DeeplinkCommand.Stake: {\n        if (isTestnet) {\n          actions.showError({ error: 'Staking is not supported in Testnet.' });\n        } else {\n          actions.startStaking();\n        }\n        return true;\n      }\n\n      case DeeplinkCommand.Transfer: {\n        return await processTonDeeplink(convertSelfUrlToTonDeeplink(deeplink));\n      }\n\n      case DeeplinkCommand.Explore: {\n        actions.closeSettings();\n        actions.openExplore();\n        actions.setActiveContentTab({ tab: ContentTab.Explore });\n\n        const host = pathname.split('/').filter(Boolean)[1];\n        if (host) {\n          const matchingSite = getGlobal().exploreData?.sites.find(({ url }) => {\n            const siteHost = isTelegramUrl(url)\n              ? new URL(url).pathname.split('/').filter(Boolean)[0]\n              : new URL(url).hostname;\n\n            return siteHost === host;\n          });\n\n          if (matchingSite) {\n            void openUrl(matchingSite.url);\n          }\n        }\n\n        return true;\n      }\n    }\n  } catch (err) {\n    logDebugError('processSelfDeeplink', err);\n  }\n\n  return false;\n}\n\n/**\n * Parses a deeplink and checks whether the transfer can be initiated.\n * See `parseTonDeeplink` for information about the returned values.\n */\nexport function parseDeeplinkTransferParams(url: string, global: GlobalState) {\n  let tonDeeplink = url;\n\n  if (isSelfDeeplink(url)) {\n    try {\n      url = convertSelfDeeplinkToSelfUrl(url);\n      const { pathname } = new URL(url);\n      const command = pathname.split('/').find(Boolean);\n\n      if (command === DeeplinkCommand.Transfer) {\n        tonDeeplink = convertSelfUrlToTonDeeplink(url);\n      }\n    } catch (err) {\n      logDebugError('parseDeeplinkTransferParams', err);\n    }\n  }\n\n  return parseTonDeeplink(tonDeeplink, global);\n}\n\nfunction convertSelfDeeplinkToSelfUrl(deeplink: string) {\n  if (deeplink.startsWith(SELF_PROTOCOL)) {\n    return deeplink.replace(SELF_PROTOCOL, `${SELF_UNIVERSAL_URLS[0]}/`);\n  }\n  return deeplink;\n}\n\nfunction convertSelfUrlToTonDeeplink(deeplink: string) {\n  deeplink = forceHttpsProtocol(deeplink);\n\n  for (const selfUniversalUrl of SELF_UNIVERSAL_URLS) {\n    if (deeplink.startsWith(selfUniversalUrl)) {\n      return deeplink.replace(`${selfUniversalUrl}/`, TON_PROTOCOL);\n    }\n  }\n\n  return deeplink;\n}\n\nfunction omitProtocol(url: string) {\n  return url.replace(/^https?:\\/\\//, '');\n}\n\nfunction forceHttpsProtocol(url: string) {\n  return url.replace(/^http:\\/\\//, 'https://');\n}\n\nfunction toNumberOrEmptyString(input?: string | null) {\n  return String(Number(input) || '');\n}\n\nfunction replaceAllSpacesWithPlus(value: string) {\n  return value.replace(/ /g, '+');\n}\n\nfunction getDeeplinkSearchParam(url: URL, param: string) {\n  return url.searchParams.get(param) ?? undefined;\n}\n","import { registerPlugin } from '@capacitor/core';\nconst PushNotifications = registerPlugin('PushNotifications', {});\nexport * from './definitions';\nexport { PushNotifications };\n//# sourceMappingURL=index.js.map","import type { ApiNotificationAddress } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { selectAccount } from './accounts';\n\n// This selector is not optimized for usage with React components wrapped by withGlobal\nexport function selectNotificationTonAddressesSlow(\n  global: GlobalState,\n  accountIds: string[],\n  maxCount: number = Infinity,\n): Record<string, ApiNotificationAddress> {\n  const result: Record<string, ApiNotificationAddress> = {};\n  let resultCount = 0;\n\n  for (const accountId of accountIds) {\n    if (resultCount >= maxCount) {\n      break;\n    }\n\n    const account = selectAccount(global, accountId);\n    const address = account?.addressByChain.ton;\n\n    if (address) {\n      result[accountId] = {\n        title: account.title,\n        address,\n        chain: 'ton',\n      };\n      resultCount += 1;\n    }\n  }\n\n  return result;\n}\n","export type CapacitorPlatform = 'ios' | 'android';\n\nlet platform: CapacitorPlatform | undefined;\n\nexport function setCapacitorPlatform(newPlatform: CapacitorPlatform) {\n  platform = newPlatform;\n}\n\nexport function getCapacitorPlatform() {\n  return platform;\n}\n","import { Capacitor } from '@capacitor/core';\nimport type { ActionPerformed, Token } from '@capacitor/push-notifications';\nimport { PushNotifications } from '@capacitor/push-notifications';\nimport { getActions, getGlobal, setGlobal } from '../../global';\n\nimport type { ApiStakingType } from '../../api/types';\nimport type { GlobalState } from '../../global/types';\n\nimport { selectAccountIdByAddress } from '../../global/selectors';\nimport { selectNotificationTonAddressesSlow } from '../../global/selectors/notifications';\nimport { callApi } from '../../api';\nimport { MINUTE } from '../../api/constants';\nimport { pick } from '../iteratees';\nimport { logDebugError } from '../logs';\nimport { getCapacitorPlatform } from './platform';\n\ninterface ShowTxMessageData {\n  action: 'swap' | 'nativeTx';\n  address: string;\n  txId: string;\n}\n\ninterface StakingMessageData {\n  action: 'staking';\n  address: string;\n  stakingType: ApiStakingType;\n  stakingId: string;\n  logId: string;\n}\n\ninterface OpenActivityMessageData {\n  action: 'jettonTx';\n  address: string;\n  slug: string;\n}\n\ninterface OpenUrlMessageData {\n  action: 'openUrl';\n  // The wallet address that should be switched to before opening the URL\n  address?: string;\n  url: string;\n  // For the following parameters, see the `openUrl` options\n  isExternal?: boolean;\n  title?: string;\n  subtitle?: string;\n}\n\ninterface ExpiringDnsMessageData {\n  action: 'expiringDns';\n  address: string;\n  domain: string;\n  domainAddress: string;\n  daysUntilExpiration: string;\n}\n\ntype MessageData = StakingMessageData | OpenActivityMessageData | ShowTxMessageData | OpenUrlMessageData\n  | ExpiringDnsMessageData;\n\nlet nextUpdatePushNotifications = 0;\n\nexport async function initNotificationsWithGlobal(global: GlobalState) {\n  const isPushNotificationsAvailable = Capacitor.isPluginAvailable('PushNotifications');\n\n  setGlobal({\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      isAvailable: isPushNotificationsAvailable,\n    },\n  });\n\n  if (!isPushNotificationsAvailable) {\n    return;\n  }\n\n  await PushNotifications.addListener('pushNotificationActionPerformed', handlePushNotificationActionPerformed);\n\n  await PushNotifications.addListener('registration', handlePushNotificationRegistration);\n\n  await PushNotifications.addListener('registrationError', (err) => {\n    logDebugError('Registration error: ', err.error);\n  });\n\n  let notificationStatus = await PushNotifications.checkPermissions();\n\n  if (notificationStatus.receive === 'prompt-with-rationale') {\n    return;\n  }\n\n  if (notificationStatus.receive === 'prompt') {\n    notificationStatus = await PushNotifications.requestPermissions();\n  }\n\n  if (notificationStatus.receive !== 'granted') {\n    // For request iOS returns 'denied', but 'granted' follows immediately without new requests\n    return;\n  }\n\n  await PushNotifications.register();\n}\n\nfunction handlePushNotificationActionPerformed(notification: ActionPerformed) {\n  const {\n    showAnyAccountTx,\n    showAnyAccountTokenActivity,\n    openAnyAccountStakingInfo,\n    switchAccountAndOpenUrl,\n    openDomainRenewalModal,\n  } = getActions();\n  const global = getGlobal();\n  const notificationData = notification.notification.data as MessageData;\n  const { action, address } = notificationData;\n  const accountId = address === undefined ? undefined : selectAccountIdByAddress(global, 'ton', address);\n  const network = 'mainnet';\n\n  if (action === 'openUrl') {\n    switchAccountAndOpenUrl({\n      accountId,\n      network,\n      ...pick(notificationData, ['url', 'isExternal', 'title', 'subtitle']),\n    });\n    return;\n  }\n\n  if (!accountId) return;\n\n  if (action === 'nativeTx' || action === 'swap') {\n    const { txId } = notificationData;\n    showAnyAccountTx({ accountId, txId, network });\n  } else if (action === 'jettonTx') {\n    const { slug } = notificationData;\n    showAnyAccountTokenActivity({ accountId, slug, network });\n  } else if (action === 'staking') {\n    const { stakingId } = notificationData;\n    openAnyAccountStakingInfo({ accountId, network, stakingId });\n  } else if (action === 'expiringDns') {\n    const { domainAddress } = notificationData;\n    openDomainRenewalModal({ accountId, network, addresses: [domainAddress] });\n  }\n}\n\nfunction handlePushNotificationRegistration(token: Token) {\n  const userToken = token.value;\n\n  getActions().registerNotifications({ userToken, platform: getCapacitorPlatform()! });\n\n  window.addEventListener('focus', async () => {\n    const global = getGlobal();\n    const notificationAccounts = Object.keys(global.pushNotifications.enabledAccounts || []);\n    if (notificationAccounts.length && nextUpdatePushNotifications <= Date.now()) {\n      await callApi('subscribeNotifications', {\n        userToken,\n        platform: getCapacitorPlatform()!,\n        addresses: Object.values(selectNotificationTonAddressesSlow(global, notificationAccounts)),\n      });\n      nextUpdatePushNotifications = Date.now() + (60 * MINUTE);\n    }\n  }, { capture: true });\n}\n","import type { URLOpenListenerEvent } from '@capacitor/app';\nimport { App } from '@capacitor/app';\nimport { Capacitor } from '@capacitor/core';\nimport { SplashScreen } from '@capacitor/splash-screen';\nimport { BiometryType, NativeBiometric } from '@capgo/capacitor-native-biometric';\nimport type { SafeAreaInsets } from 'capacitor-plugin-safe-area';\nimport { SafeArea } from 'capacitor-plugin-safe-area';\nimport { getGlobal } from '../../global';\n\nimport type { AuthConfig } from '../authApi/types';\nimport type { CapacitorPlatform } from './platform';\n\nimport { GLOBAL_STATE_CACHE_KEY } from '../../config';\nimport { processDeeplink } from '../deeplink';\nimport { logDebug } from '../logs';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_IOS } from '../windowEnvironment';\nimport * as storageMethods from '../windowProvider/methods';\nimport { initNotificationsWithGlobal } from './notifications';\nimport { getCapacitorPlatform, setCapacitorPlatform } from './platform';\n\n// Full list of options can be found at https://github.com/apache/cordova-plugin-inappbrowser#cordovainappbrowseropen\nexport const INAPP_BROWSER_OPTIONS = [\n  `location=${IS_IOS ? 'no' : 'yes'}`,\n  `lefttoright=${IS_IOS ? 'no' : 'yes'}`,\n  'usewkwebview=yes',\n  'clearcache=no',\n  'clearsessioncache=no',\n  'hidden=yes',\n  'toolbarposition=top',\n  'hidenavigationbuttons=yes',\n  'hideurlbar=no',\n  'backbuttoncaption=Back',\n  'allowInlineMediaPlayback=yes',\n].join(',');\nconst IOS_SPLASH_SCREEN_HIDE_DELAY = 500;\nconst IOS_SPLASH_SCREEN_HIDE_DURATION = 600;\nexport const VIBRATE_SUCCESS_END_PAUSE_MS = 1300;\n\nlet isNativeBiometricAuthSupported = false;\nlet isFaceIdAvailable = false;\nlet isTouchIdAvailable = false;\nlet statusBarHeight = 0;\nlet safeAreaTop = 0;\n\nlet capacitorAppLaunchDeeplinkProcessedAt = 0;\nconst CAPACITOR_APP_URL_OPEN_EVENT_IGNORE_DELAY_MS = 500;\n\nfunction updateSafeAreaValues(safeAreaInsets: SafeAreaInsets) {\n  for (const [key, value] of Object.entries(safeAreaInsets.insets)) {\n    document.documentElement.style.setProperty(\n      `--safe-area-${key}`,\n      `${getCapacitorPlatform() === 'android' && key === 'top' ? value + 8 : value}px`,\n    );\n  }\n}\n\nexport async function initCapacitor() {\n  setCapacitorPlatform(Capacitor.getPlatform() as CapacitorPlatform);\n\n  void SafeArea.getStatusBarHeight().then(({ statusBarHeight: height }) => {\n    statusBarHeight = height;\n    document.documentElement.style.setProperty('--status-bar-height', `${height}px`);\n  });\n\n  void SafeArea.getSafeAreaInsets().then(({ insets: { bottom, top } }) => {\n    safeAreaTop = top;\n    document.documentElement.style.setProperty('--safe-area-bottom', `${bottom}px`);\n  });\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    void SplashScreen.hide({ fadeOutDuration: 0 });\n    return;\n  }\n\n  if (getCapacitorPlatform() === 'ios') {\n    setTimeout(() => {\n      void SplashScreen.hide({ fadeOutDuration: IOS_SPLASH_SCREEN_HIDE_DURATION });\n    }, IOS_SPLASH_SCREEN_HIDE_DELAY);\n  }\n\n  void App.addListener('appUrlOpen', (event: URLOpenListenerEvent) => {\n    // Prevent processing the same deeplink twice on cold start\n    // 1. `app.getLaunchUrl()` returns the deeplink\n    // 2. And the `appUrlOpen` event contains the same deeplink\n    if (Date.now() - capacitorAppLaunchDeeplinkProcessedAt > CAPACITOR_APP_URL_OPEN_EVENT_IGNORE_DELAY_MS) {\n      void processDeeplink(event.url);\n    } else {\n      logDebug(`[CAPACITOR] appUrlOpen event ignored`, event);\n    }\n  });\n\n  void App.addListener('backButton', ({ canGoBack }) => {\n    if (canGoBack) {\n      window.history.back();\n    } else {\n      void App.exitApp();\n    }\n  });\n\n  updateSafeAreaValues(await SafeArea.getSafeAreaInsets());\n\n  await SafeArea.addListener('safeAreaChanged', (data) => {\n    updateSafeAreaValues(data);\n  });\n}\n\nexport async function processCapacitorLaunchDeeplink() {\n  const launchUrl = (await App.getLaunchUrl())?.url;\n\n  if (launchUrl) {\n    void processDeeplink(launchUrl);\n  }\n\n  capacitorAppLaunchDeeplinkProcessedAt = Date.now();\n}\n\nexport async function initCapacitorWithGlobal(authConfig?: AuthConfig) {\n  const isNativeBiometricAuthEnabled = !!authConfig && authConfig.kind === 'native-biometrics';\n\n  const biometricsAvailableResult = await NativeBiometric.isAvailable({\n    isWeakAuthenticatorAllowed: isNativeBiometricAuthEnabled,\n    useFallback: false,\n  });\n\n  isNativeBiometricAuthSupported = biometricsAvailableResult.isAvailable;\n  isFaceIdAvailable = biometricsAvailableResult.biometryType === BiometryType.FACE_ID;\n  isTouchIdAvailable = biometricsAvailableResult.biometryType === BiometryType.TOUCH_ID;\n\n  void initNotificationsWithGlobal(getGlobal());\n}\n\nexport function getStatusBarHeight() {\n  return statusBarHeight;\n}\n\nexport function getSafeAreaTop() {\n  return safeAreaTop;\n}\n\nexport function getIsCapacitorBiometricAuthSupported() {\n  return isNativeBiometricAuthSupported;\n}\n\nexport function getIsCapacitorFaceIdAvailable() {\n  return isFaceIdAvailable;\n}\n\nexport function getIsCapacitorTouchIdAvailable() {\n  return isTouchIdAvailable;\n}\n\nexport async function fixIosAppStorage() {\n  await storageMethods.init();\n\n  const isLocalStorageDataExists = Boolean(window.localStorage.getItem(GLOBAL_STATE_CACHE_KEY));\n  const isApiStorageDataExists = Boolean(await storageMethods.capacitorStorageGetItem('accounts'));\n\n  if (isLocalStorageDataExists && !isApiStorageDataExists) {\n    window.localStorage.clear();\n  }\n\n  if (!isLocalStorageDataExists && isApiStorageDataExists) {\n    await storageMethods.capacitorStorageClear();\n  }\n}\n","import { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport {\n  getIsCapacitorBiometricAuthSupported,\n  getIsCapacitorFaceIdAvailable,\n  getIsCapacitorTouchIdAvailable,\n} from './capacitor';\nimport {\n  getIsTelegramBiometricAuthSupported,\n  getIsTelegramFaceIdAvailable,\n  getIsTelegramTouchIdAvailable,\n} from './telegram';\nimport { getIsMobileTelegramApp, IS_BIOMETRIC_AUTH_SUPPORTED } from './windowEnvironment';\n\nexport function getIsBiometricAuthSupported() {\n  return IS_BIOMETRIC_AUTH_SUPPORTED || getIsNativeBiometricAuthSupported();\n}\n\nexport function getIsNativeBiometricAuthSupported() {\n  return (IS_CAPACITOR && getIsCapacitorBiometricAuthSupported())\n    || (IS_TELEGRAM_APP && getIsTelegramBiometricAuthSupported());\n}\n\nexport function getIsFaceIdAvailable() {\n  return (IS_CAPACITOR && getIsCapacitorFaceIdAvailable()) || (IS_TELEGRAM_APP && getIsTelegramFaceIdAvailable());\n}\n\nexport function getIsTouchIdAvailable() {\n  return (IS_CAPACITOR && getIsCapacitorTouchIdAvailable()) || (IS_TELEGRAM_APP && getIsTelegramTouchIdAvailable());\n}\n\nexport function getDoesUsePinPad() {\n  return IS_CAPACITOR || getIsMobileTelegramApp();\n}\n","import { WebPlugin } from '@capacitor/core';\nexport class ClipboardWeb extends WebPlugin {\n    async write(options) {\n        if (typeof navigator === 'undefined' || !navigator.clipboard) {\n            throw this.unavailable('Clipboard API not available in this browser');\n        }\n        if (options.string !== undefined) {\n            await this.writeText(options.string);\n        }\n        else if (options.url) {\n            await this.writeText(options.url);\n        }\n        else if (options.image) {\n            if (typeof ClipboardItem !== 'undefined') {\n                try {\n                    const blob = await (await fetch(options.image)).blob();\n                    const clipboardItemInput = new ClipboardItem({ [blob.type]: blob });\n                    await navigator.clipboard.write([clipboardItemInput]);\n                }\n                catch (err) {\n                    throw new Error('Failed to write image');\n                }\n            }\n            else {\n                throw this.unavailable('Writing images to the clipboard is not supported in this browser');\n            }\n        }\n        else {\n            throw new Error('Nothing to write');\n        }\n    }\n    async read() {\n        if (typeof navigator === 'undefined' || !navigator.clipboard) {\n            throw this.unavailable('Clipboard API not available in this browser');\n        }\n        if (typeof ClipboardItem !== 'undefined') {\n            try {\n                const clipboardItems = await navigator.clipboard.read();\n                const type = clipboardItems[0].types[0];\n                const clipboardBlob = await clipboardItems[0].getType(type);\n                const data = await this._getBlobData(clipboardBlob, type);\n                return { value: data, type };\n            }\n            catch (err) {\n                return this.readText();\n            }\n        }\n        else {\n            return this.readText();\n        }\n    }\n    async readText() {\n        if (typeof navigator === 'undefined' ||\n            !navigator.clipboard ||\n            !navigator.clipboard.readText) {\n            throw this.unavailable('Reading from clipboard not supported in this browser');\n        }\n        const text = await navigator.clipboard.readText();\n        return { value: text, type: 'text/plain' };\n    }\n    async writeText(text) {\n        if (typeof navigator === 'undefined' ||\n            !navigator.clipboard ||\n            !navigator.clipboard.writeText) {\n            throw this.unavailable('Writting to clipboard not supported in this browser');\n        }\n        await navigator.clipboard.writeText(text);\n    }\n    _getBlobData(clipboardBlob, type) {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            if (type.includes('image')) {\n                reader.readAsDataURL(clipboardBlob);\n            }\n            else {\n                reader.readAsText(clipboardBlob);\n            }\n            reader.onloadend = () => {\n                const r = reader.result;\n                resolve(r);\n            };\n            reader.onerror = e => {\n                reject(e);\n            };\n        });\n    }\n}\n//# sourceMappingURL=web.js.map","import { registerPlugin } from '@capacitor/core';\nimport { ClipboardWeb } from './web';\nconst Clipboard = registerPlugin('Clipboard', {\n    web: () => new ClipboardWeb(),\n});\nexport * from './definitions';\nexport { Clipboard };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst Haptics = registerPlugin('Haptics', {\n    web: () => import('./web').then(m => new m.HapticsWeb()),\n});\nexport * from './definitions';\nexport { Haptics };\n//# sourceMappingURL=index.js.map","import { Haptics, ImpactStyle } from '@capacitor/haptics';\n\nimport { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { VIBRATE_SUCCESS_END_PAUSE_MS } from './capacitor';\nimport { pause } from './schedulers';\nimport { getTelegramApp } from './telegram';\n\nexport async function vibrate() {\n  if (IS_TELEGRAM_APP) {\n    getTelegramApp()?.HapticFeedback.impactOccurred('soft');\n  } else if (IS_CAPACITOR) {\n    await Haptics.impact({ style: ImpactStyle.Light });\n  }\n}\n\nexport async function vibrateOnError() {\n  if (IS_TELEGRAM_APP) {\n    getTelegramApp()?.HapticFeedback.notificationOccurred('error');\n  } else if (IS_CAPACITOR) {\n    await Haptics.impact({ style: ImpactStyle.Medium });\n    await pause(100);\n    await Haptics.impact({ style: ImpactStyle.Medium });\n    await pause(75);\n    await Haptics.impact({ style: ImpactStyle.Light });\n  }\n}\n\nexport async function vibrateOnSuccess(withPauseOnEnd = false) {\n  if (!IS_CAPACITOR && !IS_TELEGRAM_APP) return;\n\n  if (IS_TELEGRAM_APP) {\n    getTelegramApp()?.HapticFeedback.notificationOccurred('success');\n  } else {\n    await Haptics.impact({ style: ImpactStyle.Light });\n  }\n\n  if (withPauseOnEnd) {\n    await pause(VIBRATE_SUCCESS_END_PAUSE_MS);\n  }\n}\n","import { Clipboard } from '@capacitor/clipboard';\n\nimport { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { vibrate } from './haptics';\nimport { getTelegramApp } from './telegram';\n\nconst textCopyEl = document.createElement('textarea');\ntextCopyEl.setAttribute('readonly', '');\ntextCopyEl.tabIndex = -1;\ntextCopyEl.className = 'visually-hidden';\n\nexport const copyTextToClipboard = (str: string): Promise<void> => {\n  void vibrate();\n\n  if (IS_CAPACITOR) {\n    return Clipboard.write({\n      string: str,\n    });\n  }\n\n  return navigator.clipboard.writeText(str);\n};\n\nexport async function readClipboardContent() {\n  if (IS_TELEGRAM_APP) {\n    return new Promise((resolve: ({ text, type }: { text: string; type: string | undefined }) => void) => {\n      getTelegramApp()?.readTextFromClipboard((text) => {\n        void vibrate();\n        resolve({ text, type: 'text/plain' });\n      });\n    });\n  } else if (IS_CAPACITOR) {\n    const { value, type } = await Clipboard.read();\n    void vibrate();\n    return { text: value, type };\n  } else {\n    const text = await navigator.clipboard.readText();\n    return { text, type: 'text/plain' };\n  }\n}\n","import { PRIVATE_KEY_HEX_LENGTH } from '../config';\n\nexport default function isMnemonicPrivateKey(mnemonic: string[]) {\n  return mnemonic.length === 1 && mnemonic[0].length === PRIVATE_KEY_HEX_LENGTH;\n}\n","import { isLiteralObject, unique } from './iteratees';\n\nconst EQUAL = Symbol('EQUAL');\nconst DELETE = { __delete: true };\nconst DELETE_ALL_CHILDREN = { __deleteAllChildren: true };\n\nexport function deepDiff<T>(value1: T, value2: T): Partial<T> | typeof EQUAL | typeof DELETE_ALL_CHILDREN {\n  if (value1 === value2) {\n    return EQUAL;\n  }\n\n  const type1 = typeof value1;\n  const type2 = typeof value2;\n\n  if (type1 !== type2) {\n    return value2;\n  }\n\n  if (Array.isArray(value1) && Array.isArray(value2) && areSortedArraysDeepEqual(value1, value2)) {\n    return EQUAL;\n  }\n\n  if (!isLiteralObject(value1) || !isLiteralObject(value2)) {\n    return value2;\n  }\n\n  const object1 = value1 as AnyLiteral;\n  const object2 = value2 as AnyLiteral;\n  const keys1 = Object.keys(object1);\n  const keys2 = Object.keys(object2);\n\n  if (!keys2.length) {\n    return !keys1.length ? EQUAL : DELETE_ALL_CHILDREN;\n  }\n\n  const allKeys = unique(keys1.concat(keys2));\n\n  const diff = allKeys.reduce((acc: any, key) => {\n    const subValue1 = object1[key];\n    const subValue2 = object2[key];\n\n    if (!object2.hasOwnProperty(key)) {\n      acc[key] = DELETE;\n      return acc;\n    }\n\n    if (!object1.hasOwnProperty(key)) {\n      acc[key] = subValue2;\n      return acc;\n    }\n\n    const subDiff = deepDiff(subValue1, subValue2);\n    if (subDiff !== EQUAL) {\n      acc[key] = subDiff;\n    }\n\n    return acc;\n  }, {});\n\n  if (Object.keys(diff).length === 0) {\n    return EQUAL;\n  }\n\n  return diff;\n}\n\nfunction areSortedArraysDeepEqual<T extends Array<any>>(array1: T, array2: T) {\n  if (array1.length !== array2.length) {\n    return false;\n  }\n\n  return array1.every((item, i) => deepDiff(item, array2[i]) === EQUAL);\n}\n","import { isLiteralObject, unique } from './iteratees';\n\nexport function deepMerge<T>(value1: T, value2: T): T {\n  if (value1 === value2) {\n    return value2;\n  }\n\n  if (!isLiteralObject(value2)) {\n    return value2;\n  }\n\n  if (!isLiteralObject(value1)) {\n    return reduceDiff(value2) as T;\n  }\n\n  if (value2.__deleteAllChildren) {\n    return {} as T;\n  }\n\n  const allKeys = unique(Object.keys(value1).concat(Object.keys(value2)));\n\n  return allKeys.reduce((acc: AnyLiteral, key) => {\n    const oldValue = value1[key];\n\n    if (!value2.hasOwnProperty(key)) {\n      acc[key] = oldValue;\n    } else {\n      const newValue = value2[key];\n\n      if (!newValue?.__delete) {\n        acc[key] = deepMerge(oldValue, newValue);\n      }\n    }\n\n    return acc;\n  }, {}) as T;\n}\n\nfunction reduceDiff(diff: AnyLiteral) {\n  if (diff.__deleteAllChildren) {\n    return {};\n  }\n\n  return Object.entries(diff).reduce((acc: AnyLiteral, [key, value]) => {\n    if (!value?.__delete) {\n      acc[key] = isLiteralObject(value) ? reduceDiff(value) : value;\n    }\n\n    return acc;\n  }, {});\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport { IS_TELEGRAM_APP } from '../config';\nimport { createSignal } from '../util/signals';\nimport { getTelegramAppAsync } from '../util/telegram';\nimport useLastCallback from './useLastCallback';\n\nconst [getIsInBackgroundLocal, setIsInBackground] = createSignal(!document.hasFocus());\nexport const getIsInBackground = getIsInBackgroundLocal;\n\nfunction handleBlur() {\n  setIsInBackground(true);\n}\n\nfunction handleFocus() {\n  setIsInBackground(false);\n}\n\nif (IS_TELEGRAM_APP) {\n  void getTelegramAppAsync().then((telegramApp) => {\n    telegramApp!.onEvent('activated', handleFocus);\n    telegramApp!.onEvent('deactivated', handleBlur);\n    setIsInBackground(!telegramApp?.isActive);\n  });\n} else {\n  window.addEventListener('blur', handleBlur);\n  window.addEventListener('focus', handleFocus);\n}\n\nexport default function useBackgroundMode(\n  onBlur?: AnyToVoidFunction,\n  onFocus?: AnyToVoidFunction,\n  isDisabled = false,\n) {\n  const lastOnBlur = useLastCallback(onBlur);\n  const lastOnFocus = useLastCallback(onFocus);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    if (getIsInBackground()) {\n      lastOnBlur();\n    }\n\n    return getIsInBackground.subscribe(() => {\n      if (getIsInBackground()) {\n        lastOnBlur();\n      } else {\n        lastOnFocus();\n      }\n    });\n  }, [isDisabled, lastOnBlur, lastOnFocus]);\n}\n\nexport function isBackgroundModeActive() {\n  return getIsInBackground();\n}\n","import { addCallback as onGlobalChange } from '../lib/teact/teactn';\nimport { getActions, getGlobal, setGlobal } from '../global';\n\nimport type { ActionPayloads, GlobalState } from '../global/types';\nimport type { Log } from './logs';\n\nimport { MULTITAB_DATA_CHANNEL_NAME } from '../config';\nimport { deepDiff } from './deepDiff';\nimport { deepMerge } from './deepMerge';\nimport { omit } from './iteratees';\nimport { getLogs } from './logs';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_MULTITAB_SUPPORTED } from './windowEnvironment';\n\nimport { isBackgroundModeActive } from '../hooks/useBackgroundMode';\n\ninterface BroadcastChannelGlobalDiff {\n  type: 'globalDiffUpdate';\n  diff: any;\n}\n\ninterface BroadcastChannelCallActionInMain<K extends keyof ActionPayloads> {\n  type: 'callActionInMain';\n  name: K;\n  options?: ActionPayloads[K];\n}\n\ninterface BroadcastChannelCallActionInNative<K extends keyof ActionPayloads> {\n  type: 'callActionInNative';\n  name: K;\n  options?: ActionPayloads[K];\n}\n\ninterface BroadcastChannelNativeLogsRequest {\n  type: 'getLogsFromNative';\n}\n\ninterface BroadcastChannelNativeLogsResponse {\n  type: 'logsFromNative';\n  logs: Log[];\n}\n\ntype BroadcastChannelMessage = BroadcastChannelGlobalDiff\n  | BroadcastChannelCallActionInMain<keyof ActionPayloads>\n  | BroadcastChannelCallActionInNative<keyof ActionPayloads>\n  | BroadcastChannelNativeLogsRequest\n  | BroadcastChannelNativeLogsResponse;\ntype EventListener = (type: 'message', listener: (event: { data: BroadcastChannelMessage }) => void) => void;\n\nexport type TypedBroadcastChannel = {\n  postMessage: (message: BroadcastChannelMessage) => void;\n  addEventListener: EventListener;\n  removeEventListener: EventListener;\n};\n\nconst channel = IS_MULTITAB_SUPPORTED\n  ? new BroadcastChannel(MULTITAB_DATA_CHANNEL_NAME) as TypedBroadcastChannel\n  : undefined;\n\nlet currentGlobal = getGlobal();\n\nexport function initMultitab({ noPubGlobal }: { noPubGlobal?: boolean } = {}) {\n  if (!channel) return;\n\n  if (!noPubGlobal) {\n    onGlobalChange(handleGlobalChange);\n  }\n\n  channel.addEventListener('message', handleMultitabMessage);\n}\n\nfunction handleGlobalChange(global: GlobalState) {\n  if (global === currentGlobal) return;\n\n  // One of the goals of this check is preventing the Delegated Bottom Sheet global state initialization (performed by\n  // src/global/init.ts) from propagating to the main WebView. Normally this is prevented by `isBackgroundModeActive()`\n  // (the Sheet should be out of focus during the initialization), but we suspect that this approach is not fully\n  // reliable, because the focus may be in the Sheet during the initialization. So an extra `isInited` check is used -\n  // `isInited: false` appears only in the initial Teactn global state (see src/lib/teact/teactn.tsx) and we expect the\n  // first global change to be the initialization.\n  if (isBackgroundModeActive() || (currentGlobal as AnyLiteral).isInited === false) {\n    currentGlobal = global;\n    return;\n  }\n\n  const diff = deepDiff(omitLocalOnlyKeys(currentGlobal), omitLocalOnlyKeys(global));\n\n  if (typeof diff !== 'symbol') {\n    channel!.postMessage({\n      type: 'globalDiffUpdate',\n      diff,\n    });\n  }\n\n  currentGlobal = global;\n}\n\nfunction omitLocalOnlyKeys(global: GlobalState) {\n  return omit(global, ['DEBUG_randomId']);\n}\n\nfunction handleMultitabMessage({ data }: { data: BroadcastChannelMessage }) {\n  switch (data.type) {\n    case 'globalDiffUpdate': {\n      if (IS_DELEGATED_BOTTOM_SHEET) return;\n\n      currentGlobal = deepMerge(getGlobal(), data.diff);\n\n      setGlobal(currentGlobal);\n\n      break;\n    }\n\n    case 'callActionInMain': {\n      if (!IS_DELEGATING_BOTTOM_SHEET) return;\n\n      const { name, options } = data;\n\n      getActions()[name](options as never);\n      break;\n    }\n\n    case 'callActionInNative': {\n      if (!IS_DELEGATED_BOTTOM_SHEET) return;\n\n      const { name, options } = data;\n\n      getActions()[name](options as never);\n      break;\n    }\n\n    case 'getLogsFromNative': {\n      if (!IS_DELEGATED_BOTTOM_SHEET) return;\n\n      channel!.postMessage({ type: 'logsFromNative', logs: getLogs() });\n      break;\n    }\n  }\n}\n\nexport function callActionInMain<K extends keyof ActionPayloads>(name: K, options?: ActionPayloads[K]) {\n  channel!.postMessage({\n    type: 'callActionInMain',\n    name,\n    options,\n  });\n}\n\nexport function callActionInNative<K extends keyof ActionPayloads>(name: K, options?: ActionPayloads[K]) {\n  channel!.postMessage({\n    type: 'callActionInNative',\n    name,\n    options,\n  });\n}\n\nexport function getLogsFromNative() {\n  if (!IS_DELEGATING_BOTTOM_SHEET) return Promise.resolve([]);\n\n  return new Promise<Log[]>((resolve) => {\n    const handleMessage = ({ data }: { data: BroadcastChannelMessage }) => {\n      if (data.type === 'logsFromNative') {\n        channel!.removeEventListener('message', handleMessage);\n        resolve(data.logs);\n      }\n    };\n\n    channel!.addEventListener('message', handleMessage);\n    channel!.postMessage({ type: 'getLogsFromNative' });\n  });\n}\n","import type { GlobalState } from './types';\nimport {\n  AppState,\n  AuthState,\n  BiometricsState,\n  DomainLinkingState,\n  DomainRenewalState,\n  HardwareConnectState,\n  SettingsState,\n  SignDataState,\n  StakingState,\n  SwapState,\n  TransferState,\n} from './types';\n\nimport {\n  ANIMATION_LEVEL_DEFAULT,\n  DEFAULT_AUTOLOCK_OPTION,\n  DEFAULT_SLIPPAGE_VALUE,\n  DEFAULT_STAKING_STATE,\n  DEFAULT_TRANSFER_TOKEN_SLUG,\n  INIT_SWAP_ASSETS,\n  IS_CORE_WALLET,\n  SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY,\n  THEME_DEFAULT,\n  TOKEN_INFO,\n} from '../config';\nimport { IS_IOS_APP, USER_AGENT_LANG_CODE } from '../util/windowEnvironment';\n\nexport const STATE_VERSION = 44;\n\nexport const INITIAL_STATE: GlobalState = {\n  appState: AppState.Auth,\n\n  auth: {\n    state: AuthState.none,\n  },\n\n  biometrics: {\n    state: BiometricsState.None,\n  },\n\n  hardware: {\n    hardwareState: HardwareConnectState.Connect,\n  },\n\n  currentTransfer: {\n    state: TransferState.None,\n    tokenSlug: DEFAULT_TRANSFER_TOKEN_SLUG,\n  },\n\n  currentDomainRenewal: {\n    state: DomainRenewalState.None,\n  },\n\n  currentDomainLinking: {\n    state: DomainLinkingState.None,\n  },\n\n  currentSwap: {\n    state: SwapState.None,\n    slippage: DEFAULT_SLIPPAGE_VALUE,\n  },\n\n  currentDappTransfer: {\n    state: TransferState.None,\n  },\n\n  currentDappSignData: {\n    state: SignDataState.None,\n  },\n\n  currentStaking: {\n    state: StakingState.None,\n  },\n\n  stakingDefault: DEFAULT_STAKING_STATE,\n\n  tokenInfo: {\n    bySlug: TOKEN_INFO,\n  },\n\n  swapTokenInfo: {\n    bySlug: INIT_SWAP_ASSETS,\n  },\n\n  tokenPriceHistory: {\n    bySlug: {},\n  },\n\n  settings: {\n    state: SettingsState.Initial,\n    theme: THEME_DEFAULT,\n    animationLevel: ANIMATION_LEVEL_DEFAULT,\n    areTinyTransfersHidden: !SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY,\n    canPlaySounds: true,\n    langCode: USER_AGENT_LANG_CODE,\n    byAccountId: {},\n    areTokensWithNoCostHidden: !SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY,\n    isSortByValueEnabled: true,\n    isAppLockEnabled: true,\n    autolockValue: DEFAULT_AUTOLOCK_OPTION,\n  },\n\n  byAccountId: {},\n\n  dialogs: [],\n  notifications: [],\n\n  stateVersion: STATE_VERSION,\n  restrictions: {\n    isLimitedRegion: false,\n    isSwapDisabled: IS_IOS_APP || IS_CORE_WALLET,\n    isOnRampDisabled: IS_IOS_APP || IS_CORE_WALLET,\n    isNftBuyingDisabled: IS_IOS_APP,\n  },\n\n  mediaViewer: {},\n\n  pushNotifications: {\n    enabledAccounts: {},\n  },\n};\n","export function areDeepEqual<T>(value1: T, value2: T): boolean {\n  const type1 = typeof value1;\n  const type2 = typeof value2;\n  if (type1 !== type2) {\n    return false;\n  }\n\n  // eslint-disable-next-line no-null/no-null\n  if (type1 !== 'object' || value1 === null || value2 === null) {\n    return value1 === value2;\n  }\n\n  const isArray1 = Array.isArray(value1);\n  const isArray2 = Array.isArray(value2);\n\n  if (isArray1 !== isArray2) {\n    return false;\n  }\n\n  if (isArray1) {\n    const array1 = value1 as any[];\n    const array2 = value2 as any[];\n\n    if (array1.length !== array2.length) {\n      return false;\n    }\n\n    return array1.every((member1, i) => areDeepEqual(member1, array2[i]));\n  }\n\n  const object1 = value1 as AnyLiteral;\n  const object2 = value2 as AnyLiteral;\n  const keys1 = Object.keys(object1);\n  const keys2 = Object.keys(object2);\n\n  if (!keys1.every((key1) => object2.hasOwnProperty(key1))) {\n    return false;\n  }\n  if (!keys2.every((key2) => object1.hasOwnProperty(key2))) {\n    return false;\n  }\n\n  return keys1.every((key1) => areDeepEqual(object1[key1], object2[key1]));\n}\n","import { areDeepEqual } from './areDeepEqual';\nimport { pick } from './iteratees';\n\nexport default function isPartialDeepEqual<T extends AnyLiteral>(node: T, newPartial: Partial<T>) {\n  const currentPartial = pick(node, Object.keys(newPartial) as (keyof typeof newPartial)[]);\n\n  return areDeepEqual(currentPartial, newPartial);\n}\n","import type {\n  ApiBalanceBySlug,\n  ApiChain, ApiNetwork,\n  ApiSwapAsset,\n  ApiTokenWithPrice,\n} from '../../api/types';\nimport type { Account, AccountState, AccountType, GlobalState } from '../types';\n\nimport {\n  APP_NAME, IS_CORE_WALLET, POPULAR_WALLET_VERSIONS, TON_USDT_SLUG, TONCOIN,\n} from '../../config';\nimport isPartialDeepEqual from '../../util/isPartialDeepEqual';\nimport { getChainBySlug } from '../../util/tokens';\nimport {\n  selectAccount,\n  selectAccountOrAuthAccount,\n  selectAccountSettings,\n  selectAccountState,\n  selectCurrentNetwork,\n  selectNetworkAccounts,\n} from '../selectors';\n\nexport function updateAuth(global: GlobalState, authUpdate: Partial<GlobalState['auth']>) {\n  return {\n    ...global,\n    auth: {\n      ...global.auth,\n      ...authUpdate,\n    },\n  } as GlobalState;\n}\n\nexport function updateAccounts(\n  global: GlobalState,\n  state: Partial<GlobalState['accounts']>,\n) {\n  return {\n    ...global,\n    accounts: {\n      ...(global.accounts || { byId: {} }),\n      ...state,\n    },\n  };\n}\n\nexport function setIsPinAccepted(global: GlobalState): GlobalState {\n  return {\n    ...global,\n    isPinAccepted: true,\n  };\n}\n\nexport function clearIsPinAccepted(global: GlobalState): GlobalState {\n  return global.isPinAccepted\n    ? { ...global, isPinAccepted: undefined }\n    : global;\n}\n\nexport function createAccount({\n  global,\n  accountId,\n  type,\n  addressByChain,\n  partial,\n  titlePostfix,\n  network,\n  isMnemonicImported,\n}: {\n  global: GlobalState;\n  accountId: string;\n  type: AccountType;\n  addressByChain: Account['addressByChain'];\n  partial?: Partial<Account>;\n  titlePostfix?: string;\n  network?: ApiNetwork;\n  isMnemonicImported?: boolean;\n}) {\n  const account: Account = {\n    ...partial,\n    type,\n    addressByChain,\n    ...(isMnemonicImported && { importedAt: Date.now() }),\n  };\n  let shouldForceAccountEdit = true;\n\n  if (!account.title) {\n    network = network || selectCurrentNetwork(global);\n    const accounts = selectNetworkAccounts(global) || {};\n    const accountAmount = Object.keys(accounts).length;\n    const isMainnet = network === 'mainnet';\n\n    const viewWalletsCount = Object.values(accounts).filter((acc) => acc.type === 'view').length;\n    const regularWalletsCount = accountAmount - viewWalletsCount;\n\n    const titlePrefix = type === 'view'\n      ? 'View Wallet'\n      : isMainnet ? 'Wallet' : 'Testnet Wallet';\n    const postfix = titlePostfix ? ` ${titlePostfix}` : '';\n\n    const count = type === 'view' ? viewWalletsCount + 1 : regularWalletsCount + 1;\n    account.title = `${titlePrefix} ${count}${postfix}`;\n\n    if (accountAmount === 0) {\n      account.title = isMainnet ? APP_NAME : `Testnet ${APP_NAME}`;\n      shouldForceAccountEdit = false;\n    }\n  } else if (titlePostfix) {\n    const title = account.title?.replace(new RegExp(`\\\\b(${POPULAR_WALLET_VERSIONS.join('|')})\\\\b`, 'g'), '');\n    account.title = `${title.trim()} ${titlePostfix}`;\n  }\n\n  if (!IS_CORE_WALLET) {\n    global = { ...global, shouldForceAccountEdit };\n  }\n\n  if (selectAccount(global, accountId)) {\n    throw new Error(`Account ${accountId} already exists`);\n  }\n\n  return {\n    ...global,\n    accounts: {\n      ...global.accounts,\n      byId: {\n        ...global.accounts?.byId,\n        [accountId]: account,\n      },\n    },\n  };\n}\n\nexport function updateAccount(\n  global: GlobalState,\n  accountId: string,\n  partial: Partial<Account>,\n) {\n  const account = selectAccount(global, accountId);\n\n  if (!account) {\n    throw new Error(`Account ${accountId} doesn't exist`);\n  }\n\n  return {\n    ...global,\n    accounts: {\n      ...global.accounts,\n      byId: {\n        ...global.accounts?.byId,\n        [accountId]: {\n          ...account,\n          ...partial,\n        },\n      },\n    },\n  };\n}\n\nexport function renameAccount(global: GlobalState, accountId: string, title: string) {\n  return updateAccount(global, accountId, { title });\n}\n\nexport function createAccountsFromGlobal(global: GlobalState, isMnemonicImported = false): GlobalState {\n  const { firstNetworkAccount, secondNetworkAccount } = global.auth;\n\n  global = createAccount({ global, type: 'mnemonic', ...firstNetworkAccount!, isMnemonicImported });\n  if (secondNetworkAccount) {\n    global = createAccount({ global, type: 'mnemonic', ...secondNetworkAccount, isMnemonicImported });\n  }\n\n  return global;\n}\n\nexport function updateBalances(\n  global: GlobalState,\n  accountId: string,\n  chain: ApiChain,\n  chainBalances: ApiBalanceBySlug,\n): GlobalState {\n  const newBalances: ApiBalanceBySlug = { ...chainBalances };\n  const currentBalances = selectAccountState(global, accountId)?.balances?.bySlug ?? {};\n\n  for (const [slug, currentBalance] of Object.entries(currentBalances)) {\n    if (getChainBySlug(slug) !== chain) {\n      newBalances[slug] = currentBalance;\n    }\n  }\n\n  // Force balance value for USDT-TON and manually imported tokens\n  const importedSlugs = selectAccountSettings(global, accountId)?.importedSlugs ?? [];\n  const hasTonWallet = Boolean(selectAccount(global, accountId)?.addressByChain?.ton);\n\n  let forcedSlugs = importedSlugs;\n  if (hasTonWallet) forcedSlugs = [...forcedSlugs, TON_USDT_SLUG];\n\n  for (const slug of forcedSlugs) {\n    if (!(slug in newBalances)) {\n      newBalances[slug] = 0n;\n    }\n  }\n\n  return updateAccountState(global, accountId, {\n    balances: {\n      bySlug: newBalances,\n    },\n  });\n}\n\nexport function changeBalance(global: GlobalState, accountId: string, slug: string, balance: bigint) {\n  return updateAccountState(global, accountId, {\n    balances: {\n      bySlug: {\n        ...selectAccountState(global, accountId)?.balances?.bySlug,\n        [slug]: balance,\n      },\n    },\n  });\n}\n\nexport function updateTokens(\n  global: GlobalState,\n  partial: Record<string, ApiTokenWithPrice>,\n  withDeepCompare = false,\n): GlobalState {\n  const existingTokens = global.tokenInfo?.bySlug;\n\n  // If the backend does not work, then we won't delete the old prices\n  if (!partial[TONCOIN.slug].price) {\n    partial = Object.values(partial).reduce((result, token) => {\n      const existingToken = existingTokens?.[token.slug];\n\n      result[token.slug] = {\n        ...token,\n        price: existingToken?.price ?? token.price,\n        priceUsd: existingToken?.priceUsd ?? token.priceUsd,\n        percentChange24h: existingToken?.percentChange24h ?? token.percentChange24h,\n      };\n      return result;\n    }, {} as Record<string, ApiTokenWithPrice>);\n  }\n\n  if (withDeepCompare && existingTokens && isPartialDeepEqual(existingTokens, partial)) {\n    return global;\n  }\n\n  return {\n    ...global,\n    tokenInfo: {\n      ...global.tokenInfo,\n      bySlug: {\n        ...existingTokens,\n        ...partial,\n      },\n    },\n  };\n}\n\nexport function updateSwapTokens(\n  global: GlobalState,\n  partial: Record<string, ApiSwapAsset>,\n): GlobalState {\n  const currentTokens = global.swapTokenInfo?.bySlug;\n\n  return {\n    ...global,\n    swapTokenInfo: {\n      ...global.swapTokenInfo,\n      bySlug: {\n        ...currentTokens,\n        ...partial,\n      },\n      isLoaded: true,\n    },\n  };\n}\n\nexport function updateCurrentAccountState(global: GlobalState, partial: Partial<AccountState>): GlobalState {\n  return updateAccountState(global, global.currentAccountId!, partial);\n}\n\nexport function updateAccountState(\n  global: GlobalState, accountId: string, partial: Partial<AccountState>, withDeepCompare = false,\n): GlobalState {\n  // Updates from the API may arrive after the account is removed.\n  // This check prevents that useless data from persisting in the global state.\n  if (!doesAccountExist(global, accountId)) {\n    return global;\n  }\n\n  const accountState = selectAccountState(global, accountId);\n\n  if (withDeepCompare && accountState && isPartialDeepEqual(accountState, partial)) {\n    return global;\n  }\n\n  return {\n    ...global,\n    byAccountId: {\n      ...global.byAccountId,\n      [accountId]: {\n        ...accountState,\n        ...partial,\n      },\n    },\n  };\n}\n\nexport function updateSettings(global: GlobalState, settingsUpdate: Partial<GlobalState['settings']>) {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      ...settingsUpdate,\n    },\n  } as GlobalState;\n}\n\nexport function updateAccountSettings(\n  global: GlobalState,\n  accountId: string,\n  settingsUpdate: Partial<GlobalState['settings']['byAccountId']['*']>,\n) {\n  // Updates from the API may arrive after the account is removed.\n  // This check prevents that useless data from persisting in the global state.\n  if (!doesAccountExist(global, accountId)) {\n    return global;\n  }\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      byAccountId: {\n        ...global.settings.byAccountId,\n        [accountId]: {\n          ...global.settings.byAccountId[accountId],\n          ...settingsUpdate,\n        },\n      },\n    },\n  } as GlobalState;\n}\n\nexport function updateCurrentAccountSettings(\n  global: GlobalState,\n  settingsUpdate: Partial<GlobalState['settings']['byAccountId']['*']>,\n) {\n  return updateAccountSettings(global, global.currentAccountId!, settingsUpdate);\n}\n\nexport function updateBiometrics(global: GlobalState, biometricsUpdate: Partial<GlobalState['biometrics']>) {\n  return {\n    ...global,\n    biometrics: {\n      ...global.biometrics,\n      ...biometricsUpdate,\n    },\n  };\n}\n\nexport function updateRestrictions(global: GlobalState, partial: Partial<GlobalState['restrictions']>) {\n  return {\n    ...global,\n    restrictions: {\n      ...global.restrictions,\n      ...partial,\n    },\n  };\n}\n\nexport function updateCurrentAccountId(global: GlobalState, accountId: string): GlobalState {\n  if (!accountId) {\n    throw Error('Empty accountId!');\n  }\n\n  return {\n    ...global,\n    currentAccountId: accountId,\n  };\n}\n\nfunction doesAccountExist(global: GlobalState, accountId: string) {\n  return !!selectAccountOrAuthAccount(global, accountId);\n}\n","import type { GlobalState } from '../types';\nimport { SwapInputSource, SwapState } from '../types';\n\nexport function shouldAvoidSwapEstimation(global: GlobalState) {\n  // For a better UX, we should leave the fees and the other swap data intact during swap confirmation (for example,\n  // to avoid switching from/to gasless mode).\n  // `isEstimating` forces estimation, because by design it means that there was a swap parameter change that\n  // invalidates the current swap estimation.\n  return !global.currentSwap.isEstimating && (\n    global.currentSwap.state === SwapState.Blockchain\n    || global.currentSwap.state === SwapState.Password\n  );\n}\n\n/**\n * Returns true if the swap estimate prepared for the global 1 is suitable for the global 2\n */\nexport function isSwapEstimateInputEqual({ currentSwap: swap1 }: GlobalState, { currentSwap: swap2 }: GlobalState) {\n  const amountKey = swap1.inputSource === SwapInputSource.In ? 'amountIn' : 'amountOut';\n\n  return swap1.tokenInSlug === swap2.tokenInSlug\n    && swap1.tokenOutSlug === swap2.tokenOutSlug\n    && swap1.slippage === swap2.slippage\n    && swap1.inputSource === swap2.inputSource\n    && swap1.isMaxAmount === swap2.isMaxAmount\n    && (swap2.isMaxAmount || swap1[amountKey] === swap2[amountKey]);\n}\n\n/**\n * Returns true is the swap form has enough data to start estimation\n */\nexport function isSwapFormFilled({ currentSwap }: GlobalState) {\n  const amountKey = currentSwap.inputSource === SwapInputSource.In ? 'amountIn' : 'amountOut';\n\n  return currentSwap.tokenInSlug\n    && currentSwap.tokenOutSlug\n    && Number(currentSwap[amountKey] ?? '0') > 0; // The backend fails if the amount is \"0\", \"0.0\", etc\n}\n\nexport function doesSwapChangeRequireEstimation(globalBefore: GlobalState, globalAfter: GlobalState) {\n  return isSwapFormFilled(globalAfter) && !isSwapEstimateInputEqual(globalBefore, globalAfter);\n}\n\nexport function doesSwapChangeRequireEstimationReset(globalBefore: GlobalState, globalAfter: GlobalState) {\n  return !isSwapFormFilled(globalAfter)\n    || globalBefore.currentSwap.tokenInSlug !== globalAfter.currentSwap.tokenInSlug\n    || globalBefore.currentSwap.tokenOutSlug !== globalAfter.currentSwap.tokenOutSlug;\n}\n\nexport function doesSwapChangeRequireDexUnselect(\n  { currentSwap: swap1 }: GlobalState,\n  { currentSwap: swap2 }: GlobalState,\n) {\n  const amountKey = swap1.inputSource === SwapInputSource.In ? 'amountIn' : 'amountOut';\n\n  return swap1.tokenInSlug !== swap2.tokenInSlug\n    || swap1.tokenOutSlug !== swap2.tokenOutSlug\n    || swap1.inputSource !== swap2.inputSource\n    || !((swap1.isMaxAmount && swap2.isMaxAmount) || swap1[amountKey] === swap2[amountKey]);\n}\n\n/**\n * Returns the `currentSwap` parameters that should be set when it's impossible to estimate the current swap or no\n * estimation has been done.\n */\nexport function getSwapEstimateResetParams(global: GlobalState) {\n  const amountReset = global.currentSwap.inputSource === SwapInputSource.In\n    ? { amountOut: undefined }\n    : { amountIn: undefined };\n\n  return {\n    ...amountReset,\n    amountOutMin: '0',\n    priceImpact: 0,\n    errorType: undefined,\n    limits: undefined,\n    dieselStatus: undefined,\n    estimates: undefined,\n    bestRateDexLabel: undefined,\n    networkFee: undefined,\n    realNetworkFee: undefined,\n    swapFee: undefined,\n    swapFeePercent: undefined,\n    ourFee: undefined,\n    ourFeePercent: undefined,\n    dieselFee: undefined,\n  } satisfies Partial<GlobalState['currentSwap']>;\n}\n","import type { GlobalState } from '../types';\nimport { SwapState } from '../types';\n\nimport { DEFAULT_SLIPPAGE_VALUE } from '../../config';\nimport { replaceActivityId } from '../helpers/misc';\nimport {\n  doesSwapChangeRequireDexUnselect,\n  doesSwapChangeRequireEstimation,\n  doesSwapChangeRequireEstimationReset,\n  getSwapEstimateResetParams,\n} from '../helpers/swap';\n\nfunction rawUpdateCurrentSwap(global: GlobalState, update: Partial<GlobalState['currentSwap']>) {\n  return {\n    ...global,\n    currentSwap: {\n      ...global.currentSwap,\n      ...update,\n    },\n  };\n}\n\nexport function updateCurrentSwap(\n  global: GlobalState,\n  update: Partial<GlobalState['currentSwap']>,\n  // Set to true if you want to not trigger the swap estimation, and you are sure estimation is not needed\n  doAvoidEstimation?: boolean,\n) {\n  let newGlobal = rawUpdateCurrentSwap(global, update);\n\n  if (!doAvoidEstimation) {\n    if (doesSwapChangeRequireEstimationReset(global, newGlobal)) {\n      newGlobal = rawUpdateCurrentSwap(newGlobal, getSwapEstimateResetParams(newGlobal));\n    }\n\n    if (doesSwapChangeRequireEstimation(global, newGlobal)) {\n      newGlobal = rawUpdateCurrentSwap(newGlobal, { isEstimating: true });\n    }\n  }\n\n  if (doesSwapChangeRequireDexUnselect(global, newGlobal)) {\n    newGlobal = rawUpdateCurrentSwap(newGlobal, {\n      isDexLabelChanged: undefined,\n    });\n  }\n\n  // Applying the update again because the input fields should have a higher priority than the above automatic updates\n  return rawUpdateCurrentSwap(newGlobal, update);\n}\n\nexport function clearCurrentSwap(global: GlobalState) {\n  return {\n    ...global,\n    currentSwap: {\n      state: SwapState.None,\n      slippage: DEFAULT_SLIPPAGE_VALUE,\n    },\n  };\n}\n\n/** replaceMap: keys - old (removed) activity ids, value - new (added) activity ids */\nexport function replaceCurrentSwapId(global: GlobalState, replaceMap: Record<string, string>) {\n  return updateCurrentSwap(global, {\n    activityId: replaceActivityId(global.currentSwap.activityId, replaceMap),\n  });\n}\n","import type { ApiCheckTransactionDraftResult } from '../../api/chains/ton/types';\nimport type { GlobalState } from '../types';\n\nimport { pick } from '../../util/iteratees';\nimport { replaceActivityId } from '../helpers/misc';\nimport { INITIAL_STATE } from '../initialState';\nimport { selectCurrentTransferMaxAmount, selectTokenMatchingCurrentTransferAddressSlow } from '../selectors';\n\nexport function updateCurrentTransferByCheckResult(global: GlobalState, result: ApiCheckTransactionDraftResult) {\n  const nextGlobal = updateCurrentTransfer(global, {\n    toAddressName: result.addressName,\n    ...pick(result, ['fee', 'realFee', 'isScam', 'isMemoRequired', 'diesel']),\n  });\n  return preserveMaxTransferAmount(global, nextGlobal);\n}\n\nexport function updateCurrentTransfer(global: GlobalState, update: Partial<GlobalState['currentTransfer']>) {\n  return {\n    ...global,\n    currentTransfer: {\n      ...global.currentTransfer,\n      ...update,\n    },\n  };\n}\n\nexport function clearCurrentTransfer(global: GlobalState) {\n  return {\n    ...global,\n    currentTransfer: INITIAL_STATE.currentTransfer,\n  };\n}\n\n/**\n * Preserves the maximum transfer amount, if it was selected.\n * Returns a modified version of `nextGlobal`.\n */\nexport function preserveMaxTransferAmount(prevGlobal: GlobalState, nextGlobal: GlobalState) {\n  const previousMaxAmount = selectCurrentTransferMaxAmount(prevGlobal);\n  const wasMaxAmountSelected = previousMaxAmount && prevGlobal.currentTransfer.amount === previousMaxAmount;\n  if (!wasMaxAmountSelected) {\n    return nextGlobal;\n  }\n  const nextMaxAmount = selectCurrentTransferMaxAmount(nextGlobal);\n  return updateCurrentTransfer(nextGlobal, { amount: nextMaxAmount });\n}\n\nexport function updateCurrentTransferLoading(global: GlobalState, isLoading: boolean): GlobalState {\n  return {\n    ...global,\n    currentTransfer: {\n      ...global.currentTransfer,\n      isLoading,\n    },\n  };\n}\n\nexport function setCurrentTransferAddress(global: GlobalState, toAddress: string | undefined) {\n  global = updateCurrentTransfer(global, { toAddress });\n\n  // Unless the user has filled the amount, the token should change to match the \"to\" address\n  if (!global.currentTransfer.amount) {\n    global = updateCurrentTransfer(global, {\n      tokenSlug: selectTokenMatchingCurrentTransferAddressSlow(global),\n    });\n  }\n\n  return global;\n}\n\n/** replaceMap: keys - old (removed) activity ids, value - new (added) activity ids */\nexport function replaceCurrentTransferId(global: GlobalState, replaceMap: Record<string, string>) {\n  return updateCurrentTransfer(global, {\n    txId: replaceActivityId(global.currentTransfer.txId, replaceMap),\n  });\n}\n","import type { GlobalState } from '../types';\n\nimport { updateCurrentAccountId } from './misc';\nimport { clearCurrentSwap } from './swap';\nimport { clearCurrentTransfer } from './transfer';\n\nexport function updateCurrentSignature(global: GlobalState, update: Partial<GlobalState['currentSignature']>) {\n  return {\n    ...global,\n    currentSignature: {\n      ...global.currentSignature,\n      ...update,\n    },\n  } as GlobalState;\n}\n\nexport function clearCurrentSignature(global: GlobalState) {\n  return {\n    ...global,\n    currentSignature: undefined,\n  };\n}\n\nexport function switchAccountAndClearGlobal(global: GlobalState, accountId: string) {\n  let newGlobal = updateCurrentAccountId(global, accountId);\n  newGlobal = clearCurrentTransfer(newGlobal);\n\n  return clearCurrentSwap(newGlobal);\n}\n","import type { ApiStakingState } from '../../api/types';\nimport type { AccountState, GlobalState } from '../types';\nimport { StakingState } from '../types';\n\nimport isPartialDeepEqual from '../../util/isPartialDeepEqual';\nimport { selectAccountState } from '../selectors';\nimport { updateAccountState } from './misc';\n\nexport function updateCurrentStaking(global: GlobalState, update: Partial<GlobalState['currentStaking']>): GlobalState {\n  return {\n    ...global,\n    currentStaking: {\n      ...global.currentStaking,\n      ...update,\n    },\n  };\n}\n\nexport function clearCurrentStaking(global: GlobalState) {\n  return {\n    ...global,\n    currentStaking: {\n      state: StakingState.None,\n    },\n  };\n}\n\nexport function updateAccountStaking(\n  global: GlobalState,\n  accountId: string,\n  partial: Partial<NonNullable<AccountState['staking']>>,\n  withDeepCompare = false,\n): GlobalState {\n  const currentStaking = selectAccountState(global, accountId)?.staking;\n\n  if (withDeepCompare && currentStaking && isPartialDeepEqual(currentStaking, partial)) {\n    return global;\n  }\n\n  return updateAccountState(global, accountId, {\n    staking: {\n      ...currentStaking,\n      ...partial,\n    },\n  });\n}\n\nexport function updateAccountStakingStatePartial(\n  global: GlobalState,\n  accountId: string,\n  partial: Partial<AccountState['staking']>,\n): GlobalState {\n  const currentState = selectAccountState(global, accountId)?.staking;\n\n  if (!currentState) {\n    return global;\n  }\n\n  return updateAccountState(global, accountId, {\n    staking: {\n      ...currentState,\n      ...partial,\n    },\n  });\n}\n\nexport function updateStakingDefault(global: GlobalState, state: ApiStakingState) {\n  return {\n    ...global,\n    stakingDefault: state,\n  };\n}\n","import type { AccountState, GlobalState } from '../types';\nimport { SignDataState, TransferState } from '../types';\n\nimport { selectCurrentAccountState } from '../selectors';\nimport { updateCurrentAccountState } from './misc';\n\nexport function updateDappConnectRequest(global: GlobalState, update: Partial<GlobalState['dappConnectRequest']>) {\n  return {\n    ...global,\n    dappConnectRequest: {\n      ...global.dappConnectRequest,\n      ...update,\n    },\n  } as GlobalState;\n}\n\nexport function clearDappConnectRequestError(global: GlobalState) {\n  return {\n    ...global,\n    dappConnectRequest: {\n      ...global.dappConnectRequest,\n      error: undefined,\n    },\n  } as GlobalState;\n}\n\nexport function clearDappConnectRequest(global: GlobalState) {\n  return {\n    ...global,\n    dappConnectRequest: undefined,\n  } as GlobalState;\n}\n\nexport function updateCurrentDappTransfer(global: GlobalState, update: Partial<GlobalState['currentDappTransfer']>) {\n  return {\n    ...global,\n    currentDappTransfer: {\n      ...global.currentDappTransfer,\n      ...update,\n    },\n  };\n}\n\nexport function clearCurrentDappTransfer(global: GlobalState): GlobalState {\n  return {\n    ...global,\n    currentDappTransfer: {\n      state: TransferState.None,\n    },\n  };\n}\n\nexport function updateCurrentDappSignData(global: GlobalState, update: Partial<GlobalState['currentDappSignData']>) {\n  return {\n    ...global,\n    currentDappSignData: {\n      ...global.currentDappSignData,\n      ...update,\n    },\n  };\n}\n\nexport function clearCurrentDappSignData(global: GlobalState): GlobalState {\n  return {\n    ...global,\n    currentDappSignData: {\n      state: SignDataState.None,\n    },\n  };\n}\n\nexport function updateConnectedDapps(global: GlobalState, update: AccountState['dapps']) {\n  return updateCurrentAccountState(global, { dapps: update });\n}\n\nexport function clearConnectedDapps(global: GlobalState) {\n  return updateCurrentAccountState(global, { dapps: undefined, dappLastOpenedDatesByUrl: undefined });\n}\n\nexport function removeConnectedDapp(global: GlobalState, url: string) {\n  const { dapps: connectedDapps, dappLastOpenedDatesByUrl } = selectCurrentAccountState(global) || {};\n  if (dappLastOpenedDatesByUrl) delete dappLastOpenedDatesByUrl[url];\n  return updateCurrentAccountState(global, {\n    dapps: connectedDapps!.filter((d) => d.url !== url),\n    dappLastOpenedDatesByUrl,\n  });\n}\n","import type { ApiActivity, ApiChain } from '../../api/types';\nimport type { AccountState, GlobalState } from '../types';\n\nimport {\n  getActivityTokenSlugs,\n  getIsActivityPending,\n  getIsActivitySuitableForFetchingTimestamp,\n  getIsTxIdLocal,\n  mergeActivityIdsToMaxTime,\n} from '../../util/activities';\nimport { compareActivities } from '../../util/compareActivities';\nimport { buildCollectionByKey, extractKey, mapValues, unique } from '../../util/iteratees';\nimport { replaceActivityId } from '../helpers/misc';\nimport { selectAccountOrAuthAccount, selectAccountState } from '../selectors';\nimport { updateAccountState } from './misc';\n\n/**\n * Handles the `initialActivities` update, which delivers the latest activity history after the account is added.\n * The given activities must be neither pending nor local.\n */\nexport function addInitialActivities(\n  global: GlobalState,\n  accountId: string,\n  mainActivities: ApiActivity[],\n  bySlug: Record<string, ApiActivity[]>,\n  chain: ApiChain,\n) {\n  const { activities } = selectAccountState(global, accountId) || {};\n  let { byId, idsMain, areInitialActivitiesLoaded } = activities || {};\n\n  byId = { ...byId, ...buildCollectionByKey(mainActivities, 'id') };\n\n  areInitialActivitiesLoaded = {\n    ...areInitialActivitiesLoaded,\n    [chain]: true,\n  };\n\n  // Activities from different blockchains arrive separately, which causes the order to be disrupted\n  idsMain = mergeActivityIdsToMaxTime(extractKey(mainActivities, 'id'), idsMain ?? [], byId);\n\n  // Enforcing the requirement to have the id list undefined if it hasn't loaded yet\n  if (idsMain.length === 0 && !areAllInitialActivitiesLoaded(global, accountId, areInitialActivitiesLoaded)) {\n    idsMain = undefined;\n  }\n\n  global = updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      idsMain,\n      byId,\n      areInitialActivitiesLoaded,\n    },\n  });\n\n  for (const [slug, activities] of Object.entries(bySlug)) {\n    global = addPastActivities(global, accountId, slug, activities, activities.length === 0);\n  }\n\n  return global;\n}\n\n/**\n * Should be used to add only newly created activities. Otherwise, there can occur gaps in the history, because the\n * given activities are added to all the matching token histories.\n */\nexport function addNewActivities(\n  global: GlobalState,\n  accountId: string,\n  newActivities: readonly ApiActivity[],\n  // Necessary when adding pending activities\n  chain?: ApiChain,\n) {\n  if (newActivities.length === 0) {\n    return global;\n  }\n\n  const { activities } = selectAccountState(global, accountId) || {};\n  let { byId, idsBySlug, idsMain, newestActivitiesBySlug, localActivityIds, pendingActivityIds } = activities || {};\n\n  byId = { ...byId, ...buildCollectionByKey(newActivities, 'id') };\n\n  // Activities from different blockchains arrive separately, which causes the order to be disrupted\n  idsMain = mergeSortedActivityIds(idsMain ?? [], extractKey(newActivities, 'id'), byId);\n\n  const newIdsBySlug = buildActivityIdsBySlug(newActivities);\n  idsBySlug = mergeIdsBySlug(idsBySlug, newIdsBySlug, byId);\n\n  newestActivitiesBySlug = getNewestActivitiesBySlug(\n    { byId, idsBySlug, newestActivitiesBySlug },\n    Object.keys(newIdsBySlug),\n  );\n\n  localActivityIds = unique([\n    ...(localActivityIds ?? []),\n    ...extractKey(newActivities, 'id').filter(getIsTxIdLocal)],\n  );\n\n  if (chain) {\n    pendingActivityIds = {\n      ...pendingActivityIds,\n      [chain]: unique([\n        ...(pendingActivityIds?.[chain] ?? []),\n        ...extractKey(\n          newActivities.filter((activity) => getIsActivityPending(activity) && !getIsTxIdLocal(activity.id)),\n          'id',\n        ),\n      ]),\n    };\n  }\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      idsMain,\n      byId,\n      idsBySlug,\n      newestActivitiesBySlug,\n      localActivityIds,\n      pendingActivityIds,\n    },\n  });\n}\n\nexport function addPastActivities(\n  global: GlobalState,\n  accountId: string,\n  tokenSlug: string | undefined, // undefined for main activities\n  pastActivities: ApiActivity[], // Assuming all the activities are neither pending nor local\n  isEndReached?: boolean,\n) {\n  const { activities } = selectAccountState(global, accountId) || {};\n  let {\n    byId, idsBySlug, idsMain, newestActivitiesBySlug, isMainHistoryEndReached, isHistoryEndReachedBySlug,\n  } = activities || {};\n\n  byId = { ...byId, ...buildCollectionByKey(pastActivities, 'id') };\n\n  if (tokenSlug) {\n    idsBySlug = mergeIdsBySlug(idsBySlug, { [tokenSlug]: extractKey(pastActivities, 'id') }, byId);\n    newestActivitiesBySlug = getNewestActivitiesBySlug({ byId, idsBySlug, newestActivitiesBySlug }, [tokenSlug]);\n\n    if (isEndReached) {\n      isHistoryEndReachedBySlug = {\n        ...isHistoryEndReachedBySlug,\n        [tokenSlug]: true,\n      };\n    }\n  } else {\n    idsMain = mergeSortedActivityIds(idsMain ?? [], extractKey(pastActivities, 'id'), byId);\n\n    if (isEndReached) {\n      isMainHistoryEndReached = true;\n    }\n  }\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      idsMain,\n      byId,\n      idsBySlug,\n      newestActivitiesBySlug,\n      isMainHistoryEndReached,\n      isHistoryEndReachedBySlug,\n    },\n  });\n}\n\nfunction buildActivityIdsBySlug(activities: readonly ApiActivity[]) {\n  return activities.reduce<Record<string, string[]>>((acc, activity) => {\n    for (const slug of getActivityTokenSlugs(activity)) {\n      acc[slug] ??= [];\n      acc[slug].push(activity.id);\n    }\n\n    return acc;\n  }, {});\n}\n\nexport function removeActivities(\n  global: GlobalState,\n  accountId: string,\n  _ids: Iterable<string>,\n) {\n  const { activities } = selectAccountState(global, accountId) || {};\n  if (!activities) {\n    return global;\n  }\n\n  const ids = new Set(_ids); // Don't use `_ids` again, because the iterable may be disposable\n  if (ids.size === 0) {\n    return global;\n  }\n\n  let { byId, idsBySlug, idsMain, newestActivitiesBySlug, localActivityIds, pendingActivityIds } = activities;\n  const affectedTokenSlugs = getActivityListTokenSlugs(ids, byId);\n\n  idsBySlug = { ...idsBySlug };\n  for (const tokenSlug of affectedTokenSlugs) {\n    if (tokenSlug in idsBySlug) {\n      idsBySlug[tokenSlug] = idsBySlug[tokenSlug].filter((id) => !ids.has(id));\n\n      if (!idsBySlug[tokenSlug].length) {\n        delete idsBySlug[tokenSlug];\n      }\n    }\n  }\n\n  newestActivitiesBySlug = getNewestActivitiesBySlug({ byId, idsBySlug, newestActivitiesBySlug }, affectedTokenSlugs);\n\n  idsMain = idsMain?.filter((id) => !ids.has(id));\n\n  byId = { ...byId };\n  for (const id of ids) {\n    delete byId[id];\n  }\n\n  localActivityIds = localActivityIds?.filter((id) => !ids.has(id));\n\n  pendingActivityIds = pendingActivityIds\n    && mapValues(pendingActivityIds, (pendingIds) => pendingIds.filter((id) => !ids.has(id)));\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      byId,\n      idsBySlug,\n      idsMain,\n      newestActivitiesBySlug,\n      localActivityIds,\n      pendingActivityIds,\n    },\n  });\n}\n\nexport function updateActivity(global: GlobalState, accountId: string, activity: ApiActivity) {\n  const { id } = activity;\n\n  const { activities } = selectAccountState(global, accountId) || {};\n  const { byId } = activities ?? {};\n\n  if (!byId || !(id in byId)) {\n    return global;\n  }\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      byId: {\n        ...byId,\n        [id]: activity,\n      },\n    },\n  });\n}\n\n/** Replaces all pending activities in the given account and chain */\nexport function replacePendingActivities(\n  global: GlobalState,\n  accountId: string,\n  chain: ApiChain,\n  pendingActivities: readonly ApiActivity[],\n) {\n  const { pendingActivityIds } = selectAccountState(global, accountId)?.activities || {};\n  global = removeActivities(global, accountId, pendingActivityIds?.[chain] ?? []);\n  global = addNewActivities(global, accountId, pendingActivities, chain);\n  return global;\n}\n\nfunction mergeSortedActivityIds(ids0: string[], ids1: string[], byId: Record<string, ApiActivity>) {\n  if (!ids0.length) return ids1;\n  if (!ids1.length) return ids0;\n  // Not the best performance, but ok for now\n  return unique([...ids0, ...ids1]).sort((id0, id1) => compareActivities(byId[id0], byId[id1]));\n}\n\nfunction getNewestActivitiesBySlug(\n  {\n    byId, idsBySlug, newestActivitiesBySlug,\n  }: Pick<Exclude<AccountState['activities'], undefined>, 'byId' | 'idsBySlug' | 'newestActivitiesBySlug'>,\n  tokenSlugs: Iterable<string>,\n) {\n  newestActivitiesBySlug = { ...newestActivitiesBySlug };\n\n  for (const tokenSlug of tokenSlugs) {\n    // The `idsBySlug` arrays must be sorted from the newest to the oldest\n    const ids = idsBySlug?.[tokenSlug] ?? [];\n    const newestActivityId = ids.find((id) => getIsActivitySuitableForFetchingTimestamp(byId[id]));\n    if (newestActivityId) {\n      newestActivitiesBySlug[tokenSlug] = byId[newestActivityId];\n    } else {\n      delete newestActivitiesBySlug[tokenSlug];\n    }\n  }\n\n  return newestActivitiesBySlug;\n}\n\nfunction getActivityListTokenSlugs(activityIds: Iterable<string>, byId: Record<string, ApiActivity>) {\n  const tokenSlugs = new Set<string>();\n\n  for (const id of activityIds) {\n    const activity = byId[id];\n    if (activity) {\n      for (const tokenSlug of getActivityTokenSlugs(activity)) {\n        tokenSlugs.add(tokenSlug);\n      }\n    }\n  }\n\n  return tokenSlugs;\n}\n\n/** replaceMap: keys - old (removed) activity ids, value - new (added) activity ids */\nexport function replaceCurrentActivityId(global: GlobalState, accountId: string, replaceMap: Record<string, string>) {\n  return updateAccountState(global, accountId, {\n    currentActivityId: replaceActivityId(selectAccountState(global, accountId)?.currentActivityId, replaceMap),\n  });\n}\n\nfunction mergeIdsBySlug(\n  oldIdsBySlug: Record<string, string[]> | undefined,\n  newIdsBySlug: Record<string, string[]>,\n  activityById: Record<string, ApiActivity>,\n) {\n  return {\n    ...oldIdsBySlug,\n    ...mapValues(newIdsBySlug, (newIds, slug) => {\n      // There may be newer local transactions in `idsBySlug`, so a sorting is needed\n      return mergeSortedActivityIds(newIds, oldIdsBySlug?.[slug] ?? [], activityById);\n    }),\n  };\n}\n\nfunction areAllInitialActivitiesLoaded(\n  global: GlobalState,\n  accountId: string,\n  newAreInitialActivitiesLoaded: Partial<Record<ApiChain, boolean>>,\n) {\n  // The initial activities may be loaded and added before the authentication completes\n  const { addressByChain } = selectAccountOrAuthAccount(global, accountId) ?? { addressByChain: {} };\n\n  return Object.keys(addressByChain).every((chain) => newAreInitialActivitiesLoaded[chain as ApiChain]);\n}\n","import type { ApiNft } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport isEmptyObject from '../../util/isEmptyObject';\nimport { selectAccountState } from '../selectors';\nimport { updateAccountSettings, updateAccountState } from './misc';\n\nexport function addNft(global: GlobalState, accountId: string, nft: ApiNft, shouldAppendToEnd?: boolean) {\n  const nftAddress = nft.address;\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const orderedAddresses = (nfts?.orderedAddresses ?? []).filter((address) => address !== nftAddress);\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts,\n      byAddress: { ...nfts?.byAddress, [nftAddress]: nft },\n      orderedAddresses: shouldAppendToEnd\n        ? orderedAddresses.concat(nftAddress)\n        : [nftAddress, ...orderedAddresses],\n    },\n  });\n}\n\nexport function removeNft(global: GlobalState, accountId: string, nftAddress: string) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const orderedAddresses = (nfts?.orderedAddresses ?? []).filter((address) => address !== nftAddress);\n  const selectedAddresses = (nfts?.selectedAddresses ?? []).filter((address) => address !== nftAddress);\n  const { [nftAddress]: removedNft, ...byAddress } = nfts?.byAddress ?? {};\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts,\n      byAddress,\n      orderedAddresses,\n      selectedAddresses,\n    },\n  });\n}\n\nexport function updateNft(global: GlobalState, accountId: string, nftAddress: string, partial: Partial<ApiNft>) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const nft = nfts?.byAddress?.[nftAddress];\n  if (!nfts || !nft) return global;\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts,\n      byAddress: {\n        ...nfts.byAddress,\n        [nftAddress]: { ...nft, ...partial },\n      },\n    },\n  });\n}\n\nexport function addToSelectedAddresses(global: GlobalState, accountId: string, nftAddresses: string[]) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const selectedAddresses = [...(nfts?.selectedAddresses ?? []), ...nftAddresses];\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts!,\n      selectedAddresses,\n    },\n  });\n}\n\nexport function removeFromSelectedAddresses(global: GlobalState, accountId: string, nftAddress: string) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const selectedAddresses = (nfts?.selectedAddresses ?? []).filter((address) => address !== nftAddress);\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts!,\n      selectedAddresses: selectedAddresses.length ? selectedAddresses : undefined,\n    },\n  });\n}\n\n// Updates the account settings to ensure the specified NFT is up-to-date.\nexport function updateAccountSettingsBackgroundNft(global: GlobalState, nft: ApiNft) {\n  Object.entries(global.settings.byAccountId).forEach(([accountId, settings]) => {\n    if (settings.cardBackgroundNft?.address === nft.address) {\n      global = updateAccountSettings(global, accountId, {\n        ...settings,\n        cardBackgroundNft: nft,\n      });\n    }\n  });\n\n  return global;\n}\n\nexport function addUnorderedNfts(\n  global: GlobalState,\n  accountId: string,\n  updatedNfts?: Record<string, ApiNft>,\n): GlobalState {\n  if (!updatedNfts || isEmptyObject(updatedNfts)) {\n    return global;\n  }\n\n  const { byAddress } = selectAccountState(global, accountId)?.nfts || { byAddress: {} };\n\n  Object.values(updatedNfts).forEach((nft) => {\n    const existingNft = byAddress?.[nft.address];\n    if (existingNft) {\n      global = updateNft(global, accountId, nft.address, nft);\n    } else {\n      global = addNft(global, accountId, nft, true);\n    }\n  });\n\n  return global;\n}\n","import type { ApiVestingInfo } from '../../api/types';\nimport type { AccountState, GlobalState } from '../types';\n\nimport { selectAccountState } from '../selectors';\nimport { updateAccountState } from './misc';\n\nexport function updateVestingInfo(global: GlobalState, accountId: string, update: ApiVestingInfo[]): GlobalState {\n  return updateVesting(global, accountId, {\n    info: update,\n  });\n}\n\nexport function updateVesting(\n  global: GlobalState,\n  accountId: string,\n  update: Partial<AccountState['vesting']>,\n): GlobalState {\n  return updateAccountState(global, accountId, {\n    vesting: {\n      ...selectAccountState(global, accountId)?.vesting || { info: [] },\n      ...update,\n    },\n  });\n}\n","import type { GlobalState } from '../types';\n\nexport function updateMintCards(\n  global: GlobalState,\n  update: Partial<GlobalState['currentMintCard']>,\n): GlobalState {\n  return {\n    ...global,\n    currentMintCard: {\n      ...global.currentMintCard,\n      ...update,\n    },\n  };\n}\n","import type { GlobalState } from '../types';\n\nimport { replaceActivityId } from '../helpers/misc';\n\nexport function updateCurrentDomainRenewal(\n  global: GlobalState,\n  update: Partial<GlobalState['currentDomainRenewal']>,\n): GlobalState {\n  return {\n    ...global,\n    currentDomainRenewal: {\n      ...global.currentDomainRenewal,\n      ...update,\n    },\n  };\n}\n\nexport function updateCurrentDomainLinking(\n  global: GlobalState,\n  update: Partial<GlobalState['currentDomainLinking']>,\n): GlobalState {\n  return {\n    ...global,\n    currentDomainLinking: {\n      ...global.currentDomainLinking,\n      ...update,\n    },\n  };\n}\n\n/** replaceMap: keys - old (removed) activity ids, value - new (added) activity ids */\nexport function replaceCurrentDomainRenewalId(global: GlobalState, replaceMap: Record<string, string>) {\n  return updateCurrentDomainRenewal(global, {\n    txId: replaceActivityId(global.currentDomainRenewal.txId, replaceMap),\n  });\n}\n\n/** replaceMap: keys - old (removed) activity ids, value - new (added) activity ids */\nexport function replaceCurrentDomainLinkingId(global: GlobalState, replaceMap: Record<string, string>) {\n  return updateCurrentDomainLinking(global, {\n    txId: replaceActivityId(global.currentDomainLinking.txId, replaceMap),\n  });\n}\n","import type { GlobalState } from '../types';\n\nimport { INITIAL_STATE } from '../initialState';\n\nexport function updateHardware(global: GlobalState, hardwareUpdate: Partial<GlobalState['hardware']>) {\n  return {\n    ...global,\n    hardware: {\n      ...global.hardware,\n      ...hardwareUpdate,\n    },\n  };\n}\n\nexport function resetHardware(global: GlobalState) {\n  return {\n    ...global,\n    hardware: INITIAL_STATE.hardware,\n  };\n}\n","import { NativeBiometric } from '@capgo/capacitor-native-biometric';\n\nimport type { ApiNetwork } from '../../../api/types';\nimport type { GlobalState } from '../../types';\nimport { ApiAuthError, ApiCommonError } from '../../../api/types';\nimport { AppState, AuthState, BiometricsState } from '../../types';\n\nimport {\n  APP_NAME, IS_BIP39_MNEMONIC_ENABLED, IS_TELEGRAM_APP, MNEMONIC_CHECK_COUNT, MNEMONIC_COUNT,\n} from '../../../config';\nimport { parseAccountId } from '../../../util/account';\nimport authApi from '../../../util/authApi';\nimport { verifyIdentity as verifyTelegramBiometricIdentity } from '../../../util/authApi/telegram';\nimport webAuthn from '../../../util/authApi/webAuthn';\nimport { getDoesUsePinPad, getIsNativeBiometricAuthSupported } from '../../../util/biometrics';\nimport { copyTextToClipboard } from '../../../util/clipboard';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport isEmptyObject from '../../../util/isEmptyObject';\nimport isMnemonicPrivateKey from '../../../util/isMnemonicPrivateKey';\nimport { cloneDeep, compact } from '../../../util/iteratees';\nimport { getTranslation } from '../../../util/langProvider';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { clearPoisoningCache } from '../../../util/poisoningHash';\nimport { pause } from '../../../util/schedulers';\nimport {\n  IS_BIOMETRIC_AUTH_SUPPORTED,\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n  IS_ELECTRON,\n} from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport {\n  addActionHandler, getActions, getGlobal, setGlobal,\n} from '../..';\nimport { INITIAL_STATE } from '../../initialState';\nimport {\n  clearIsPinAccepted,\n  createAccount,\n  createAccountsFromGlobal,\n  setIsPinAccepted,\n  switchAccountAndClearGlobal,\n  updateAccounts,\n  updateAuth,\n  updateBiometrics,\n  updateCurrentAccountId,\n  updateCurrentAccountState,\n  updateSettings,\n} from '../../reducers';\nimport {\n  selectAccount,\n  selectAccounts,\n  selectCurrentNetwork,\n  selectIsOneAccount,\n  selectIsPasswordPresent,\n  selectNetworkAccountsMemoized,\n  selectNewestActivityTimestamps,\n} from '../../selectors';\n\nconst CREATING_DURATION = 3300;\nconst NATIVE_BIOMETRICS_PAUSE_MS = 750;\n\nexport async function switchAccount(global: GlobalState, accountId: string, newNetwork?: ApiNetwork) {\n  if (accountId === global.currentAccountId) {\n    return;\n  }\n\n  const actions = getActions();\n\n  const newestActivityTimestamps = selectNewestActivityTimestamps(global, accountId);\n  await callApi('activateAccount', accountId, newestActivityTimestamps);\n\n  global = getGlobal();\n  setGlobal(switchAccountAndClearGlobal(global, accountId));\n\n  clearPoisoningCache();\n\n  if (newNetwork) {\n    actions.changeNetwork({ network: newNetwork });\n  }\n}\n\naddActionHandler('resetAuth', (global) => {\n  if (global.currentAccountId) {\n    global = { ...global, appState: AppState.Main };\n\n    // Restore the network when refreshing the page during the switching networks\n    global = updateSettings(global, {\n      isTestnet: parseAccountId(global.currentAccountId!).network === 'testnet',\n    });\n  }\n\n  global = { ...global, auth: cloneDeep(INITIAL_STATE.auth) };\n\n  setGlobal(global);\n});\n\naddActionHandler('startCreatingWallet', async (global, actions) => {\n  const accounts = selectAccounts(global) ?? {};\n  const isFirstAccount = isEmptyObject(accounts);\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const nextAuthState = isPasswordPresent\n    ? AuthState.createBackup\n    : (isFirstAccount\n      ? AuthState.createWallet\n      // The app only has hardware wallets accounts, which means we need to create a password or biometrics\n      : getDoesUsePinPad()\n        ? AuthState.createPin\n        : (IS_BIOMETRIC_AUTH_SUPPORTED ? AuthState.createBiometrics : AuthState.createPassword)\n    );\n\n  global = getGlobal();\n\n  if (isPasswordPresent && !global.auth.password) {\n    setGlobal(updateAuth(global, {\n      state: AuthState.checkPassword,\n      error: undefined,\n    }));\n    return;\n  }\n\n  const promiseCalls = [\n    callApi('generateMnemonic', IS_BIP39_MNEMONIC_ENABLED && !global.auth.forceAddingTonOnlyAccount),\n    ...(!isPasswordPresent ? [pause(CREATING_DURATION)] : []),\n  ] as [Promise<Promise<string[]> | undefined>, Promise<void> | undefined];\n\n  setGlobal(\n    updateAuth(global, {\n      state: nextAuthState,\n      method: 'createAccount',\n      error: undefined,\n    }),\n  );\n\n  const [mnemonic] = await Promise.all(promiseCalls);\n\n  global = updateAuth(getGlobal(), {\n    mnemonic,\n    mnemonicCheckIndexes: selectMnemonicForCheck(mnemonic?.length ?? MNEMONIC_COUNT),\n  });\n\n  if (isPasswordPresent) {\n    setGlobal(global);\n    actions.afterCreatePassword({ password: global.auth.password! });\n\n    return;\n  }\n\n  setGlobal(updateAuth(global, {\n    state: getDoesUsePinPad()\n      ? AuthState.createPin\n      : (IS_BIOMETRIC_AUTH_SUPPORTED ? AuthState.createBiometrics : AuthState.createPassword),\n  }));\n\n  if (isFirstAccount) {\n    actions.requestConfetti();\n    void vibrateOnSuccess();\n  }\n});\n\naddActionHandler('startCreatingBiometrics', (global) => {\n  global = updateAuth(global, {\n    state: global.auth.method !== 'createAccount'\n      ? AuthState.importWalletConfirmBiometrics\n      : AuthState.confirmBiometrics,\n    biometricsStep: 1,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('cancelCreateBiometrics', (global) => {\n  global = updateAuth(global, {\n    state: AuthState.createBiometrics,\n    biometricsStep: undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('createPin', (global, actions, { pin, isImporting }) => {\n  global = updateAuth(global, {\n    state: isImporting ? AuthState.importWalletConfirmPin : AuthState.confirmPin,\n    password: pin,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('confirmPin', (global, actions, { isImporting }) => {\n  if (getIsNativeBiometricAuthSupported()) {\n    global = updateAuth(global, {\n      state: isImporting ? AuthState.importWalletCreateNativeBiometrics : AuthState.createNativeBiometrics,\n    });\n    setGlobal(global);\n  } else {\n    actions.skipCreateNativeBiometrics();\n  }\n});\n\naddActionHandler('cancelConfirmPin', (global, actions, { isImporting }) => {\n  global = updateAuth(global, {\n    state: isImporting ? AuthState.importWalletCreatePin : AuthState.createPin,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('cancelDisclaimer', (global) => {\n  setGlobal(updateAuth(global, {\n    state: getDoesUsePinPad()\n      ? AuthState.createPin\n      : (IS_BIOMETRIC_AUTH_SUPPORTED ? AuthState.createBiometrics : AuthState.createPassword),\n  }));\n});\n\naddActionHandler('afterCreatePassword', (global, actions, { password, isPasswordNumeric }) => {\n  setGlobal(updateAuth(global, { isLoading: true }));\n\n  const { method } = getGlobal().auth;\n\n  const isImporting = method !== 'createAccount';\n  const isHardware = method === 'importHardwareWallet';\n\n  if (isHardware) {\n    actions.createHardwareAccounts();\n    return;\n  }\n\n  actions.createAccount({ password, isImporting, isPasswordNumeric });\n});\n\naddActionHandler('afterCreateBiometrics', async (global, actions) => {\n  const withCredential = !IS_ELECTRON;\n  global = updateAuth(global, {\n    isLoading: true,\n    error: undefined,\n    biometricsStep: withCredential ? 1 : undefined,\n  });\n  setGlobal(global);\n\n  try {\n    const credential = withCredential\n      ? await webAuthn.createCredential()\n      : undefined;\n    global = getGlobal();\n    global = updateAuth(global, { biometricsStep: withCredential ? 2 : undefined });\n    setGlobal(global);\n    const result = await authApi.setupBiometrics({ credential });\n\n    global = getGlobal();\n    global = updateAuth(global, {\n      isLoading: false,\n      biometricsStep: undefined,\n    });\n\n    if (!result) {\n      global = updateAuth(global, { error: 'Biometric setup failed.' });\n      setGlobal(global);\n\n      return;\n    }\n\n    global = updateSettings(global, { authConfig: result.config });\n    setGlobal(global);\n\n    actions.afterCreatePassword({ password: result.password });\n  } catch (err: any) {\n    const error = err?.message.includes('privacy-considerations-client')\n      ? 'Biometric setup failed.'\n      : (err?.message || 'Biometric setup failed.');\n    global = getGlobal();\n    global = updateAuth(global, {\n      isLoading: false,\n      error,\n      biometricsStep: undefined,\n    });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('skipCreateBiometrics', (global) => {\n  global = updateAuth(global, { state: AuthState.createPassword });\n  setGlobal(global);\n});\n\naddActionHandler('afterCreateNativeBiometrics', async (global, actions) => {\n  global = updateAuth(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n\n  try {\n    const { password } = global.auth;\n    const result = await authApi.setupNativeBiometrics(password!);\n\n    global = getGlobal();\n    global = updateAuth(global, { isLoading: false });\n    global = updateSettings(global, { authConfig: result.config });\n    setGlobal(global);\n\n    actions.afterCreatePassword({ password: password!, isPasswordNumeric: true });\n  } catch (err: any) {\n    const error = err?.message.includes('privacy-considerations-client')\n      ? 'Biometric setup failed.'\n      : (err?.message || 'Biometric setup failed.');\n    global = getGlobal();\n    global = updateAuth(global, {\n      isLoading: false,\n      error,\n    });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('skipCreateNativeBiometrics', (global, actions) => {\n  const { password } = global.auth;\n\n  global = updateAuth(global, { isLoading: false, error: undefined });\n  global = updateSettings(global, {\n    authConfig: { kind: 'password' },\n    isPasswordNumeric: true,\n  });\n  setGlobal(global);\n\n  actions.afterCreatePassword({ password: password!, isPasswordNumeric: true });\n});\n\naddActionHandler('createAccount', async (global, actions, {\n  password, isImporting, isPasswordNumeric, version,\n}) => {\n  setGlobal(updateAuth(global, { isLoading: true }));\n\n  const network = selectCurrentNetwork(getGlobal());\n\n  const result = await callApi(\n    isImporting ? 'importMnemonic' : 'createWallet',\n    network,\n    global.auth.mnemonic!,\n    password,\n    version,\n  );\n\n  global = getGlobal();\n\n  if (!result || 'error' in result) {\n    setGlobal(updateAuth(global, { isLoading: undefined }));\n    actions.showError({ error: result?.error });\n    return;\n  }\n\n  const { accountId, addressByChain, secondNetworkAccount } = result;\n\n  if (!isImporting) {\n    global = { ...global, appState: AppState.Auth, isAddAccountModalOpen: undefined };\n  }\n  global = updateAuth(global, {\n    isLoading: undefined,\n    password: undefined,\n    firstNetworkAccount: {\n      addressByChain,\n      accountId,\n    },\n    secondNetworkAccount,\n    ...(isPasswordNumeric && { isPasswordNumeric: true }),\n  });\n  global = clearIsPinAccepted(global);\n\n  if (isImporting) {\n    const hasAccounts = Object.keys(selectAccounts(global) || {}).length > 0;\n    if (hasAccounts) {\n      setGlobal(global);\n      actions.afterConfirmDisclaimer();\n\n      return;\n    } else {\n      global = updateAuth(global, { state: AuthState.disclaimer });\n    }\n  } else {\n    const accounts = selectAccounts(global) ?? {};\n    const isFirstAccount = isEmptyObject(accounts);\n    global = updateAuth(global, {\n      state: isFirstAccount ? AuthState.disclaimerAndBackup : AuthState.createBackup,\n    });\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('createHardwareAccounts', async (global, actions) => {\n  const accounts = selectAccounts(global) ?? {};\n  const isFirstAccount = isEmptyObject(accounts);\n\n  setGlobal(updateAuth(global, { isLoading: true }));\n\n  const { hardwareSelectedIndices = [] } = getGlobal().auth;\n  const network = selectCurrentNetwork(getGlobal());\n\n  const ledgerApi = await import('../../../util/ledger');\n  const wallets = await Promise.all(\n    hardwareSelectedIndices.map(\n      (wallet) => ledgerApi.importLedgerWallet(network, wallet),\n    ),\n  );\n\n  if (IS_DELEGATED_BOTTOM_SHEET && !isFirstAccount) {\n    callActionInMain('addHardwareAccounts', { wallets });\n    return;\n  }\n\n  actions.addHardwareAccounts({ wallets });\n});\n\naddActionHandler('addHardwareAccounts', (global, actions, { wallets }) => {\n  const isFirstAccount = !global.currentAccountId;\n  const nextActiveAccountId = wallets[0]?.accountId;\n  if (nextActiveAccountId) {\n    void callApi('activateAccount', nextActiveAccountId);\n  }\n\n  const updatedGlobal = wallets.reduce((currentGlobal, wallet) => {\n    if (!wallet) {\n      return currentGlobal;\n    }\n    const { accountId, address, walletInfo } = wallet;\n    const addressByChain = { ton: address };\n\n    currentGlobal = updateCurrentAccountId(currentGlobal, accountId);\n    currentGlobal = createAccount({\n      global: currentGlobal,\n      accountId,\n      addressByChain,\n      type: 'hardware',\n      partial: {\n        ...(walletInfo && {\n          ledger: {\n            driver: walletInfo.driver,\n            index: walletInfo.index,\n          },\n        }),\n      },\n    });\n\n    return currentGlobal;\n  }, getGlobal());\n\n  if (nextActiveAccountId) {\n    global = updateCurrentAccountId(updatedGlobal, nextActiveAccountId);\n  }\n  global = updateAuth(global, { isLoading: false });\n  global = {\n    ...global,\n    shouldForceAccountEdit: true,\n  };\n  setGlobal(global);\n\n  if (getGlobal().areSettingsOpen) {\n    actions.closeSettings();\n  }\n\n  wallets.forEach((hardwareWallet) => {\n    if (hardwareWallet?.accountId) {\n      actions.tryAddNotificationAccount({ accountId: hardwareWallet?.accountId });\n    }\n  });\n\n  actions.afterSignIn();\n  if (isFirstAccount) {\n    actions.resetApiSettings();\n    actions.requestConfetti();\n    void vibrateOnSuccess();\n  }\n});\n\naddActionHandler('afterCheckMnemonic', (global, actions) => {\n  global = createAccountsFromGlobal(global);\n  global = updateCurrentAccountId(global, global.auth.firstNetworkAccount!.accountId);\n  setGlobal(global);\n\n  actions.tryAddNotificationAccount({ accountId: global.auth.firstNetworkAccount!.accountId });\n\n  actions.afterSignIn();\n  if (selectIsOneAccount(global)) {\n    actions.resetApiSettings();\n  }\n});\n\naddActionHandler('restartCheckMnemonicIndexes', (global, actions, { worldsCount }) => {\n  setGlobal(\n    updateAuth(global, {\n      mnemonicCheckIndexes: selectMnemonicForCheck(worldsCount),\n    }),\n  );\n});\n\naddActionHandler('skipCheckMnemonic', (global, actions) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('skipCheckMnemonic');\n    return;\n  }\n\n  global = createAccountsFromGlobal(global);\n  global = updateCurrentAccountId(global, global.auth.firstNetworkAccount!.accountId);\n  global = updateCurrentAccountState(global, { isBackupRequired: true });\n  setGlobal(global);\n\n  actions.tryAddNotificationAccount({ accountId: global.auth.firstNetworkAccount!.accountId });\n\n  actions.afterSignIn();\n  if (selectIsOneAccount(global)) {\n    actions.resetApiSettings();\n  }\n});\n\naddActionHandler('startImportingWallet', (global) => {\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const state = isPasswordPresent && !global.auth.password\n    ? AuthState.importWalletCheckPassword\n    : AuthState.importWallet;\n\n  setGlobal(\n    updateAuth(global, {\n      state,\n      error: undefined,\n      method: 'importMnemonic',\n    }),\n  );\n});\n\naddActionHandler('openAbout', (global) => {\n  setGlobal(updateAuth(global, { state: AuthState.about, error: undefined }));\n});\n\naddActionHandler('closeAbout', (global) => {\n  setGlobal(updateAuth(global, { state: AuthState.none, error: undefined }));\n});\n\naddActionHandler('afterImportMnemonic', async (global, actions, { mnemonic }) => {\n  mnemonic = compact(mnemonic);\n\n  if (!isMnemonicPrivateKey(mnemonic)) {\n    if (!await callApi('validateMnemonic', mnemonic)) {\n      setGlobal(updateAuth(getGlobal(), {\n        error: ApiAuthError.InvalidMnemonic,\n      }));\n\n      return;\n    }\n  }\n\n  global = getGlobal();\n\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const hasAccounts = Object.keys(selectAccounts(global) || {}).length > 0;\n  const state = getDoesUsePinPad()\n    ? AuthState.importWalletCreatePin\n    : (IS_BIOMETRIC_AUTH_SUPPORTED\n      ? AuthState.importWalletCreateBiometrics\n      : AuthState.importWalletCreatePassword);\n\n  global = updateAuth(global, {\n    mnemonic,\n    error: undefined,\n    ...(!isPasswordPresent && { state }),\n  });\n  setGlobal(global);\n\n  if (!isPasswordPresent) {\n    if (!hasAccounts) {\n      actions.requestConfetti();\n    }\n\n    void vibrateOnSuccess();\n  } else {\n    actions.confirmDisclaimer();\n  }\n});\n\naddActionHandler('confirmDisclaimer', (global, actions) => {\n  const isPasswordPresent = selectIsPasswordPresent(global);\n\n  if (isPasswordPresent) {\n    setGlobal(global);\n    actions.afterCreatePassword({ password: global.auth.password! });\n\n    return;\n  }\n\n  actions.afterConfirmDisclaimer();\n});\n\naddActionHandler('afterConfirmDisclaimer', (global, actions) => {\n  const { firstNetworkAccount } = global.auth;\n\n  global = createAccountsFromGlobal(global, true);\n  global = updateCurrentAccountId(global, firstNetworkAccount!.accountId);\n  global = updateAuth(global, { state: AuthState.ready });\n  setGlobal(global);\n\n  actions.tryAddNotificationAccount({ accountId: firstNetworkAccount!.accountId });\n\n  actions.afterSignIn();\n  if (selectIsOneAccount(global)) {\n    actions.resetApiSettings();\n  }\n});\n\naddActionHandler('cleanAuthError', (global) => {\n  setGlobal(updateAuth(global, { error: undefined }));\n});\n\nexport function selectMnemonicForCheck(worldsCount: number) {\n  return Array(worldsCount)\n    .fill(0)\n    .map((_, i) => ({ i, rnd: Math.random() }))\n    .sort((a, b) => a.rnd - b.rnd)\n    .map((i) => i.i)\n    .slice(0, Math.min(MNEMONIC_CHECK_COUNT, worldsCount))\n    .sort((a, b) => a - b);\n}\n\naddActionHandler('startChangingNetwork', (global, actions, { network }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('startChangingNetwork', { network });\n  }\n\n  const accountIds = Object.keys(selectNetworkAccountsMemoized(network, global.accounts!.byId)!);\n\n  if (accountIds.length) {\n    const accountId = accountIds[0];\n    actions.switchAccount({ accountId, newNetwork: network });\n  } else {\n    setGlobal({\n      ...global,\n      areSettingsOpen: false,\n      appState: AppState.Auth,\n    });\n    actions.changeNetwork({ network });\n  }\n});\n\naddActionHandler('switchAccount', async (global, actions, payload) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('switchAccount', payload);\n    return;\n  }\n\n  const { accountId, newNetwork } = payload;\n  await switchAccount(global, accountId, newNetwork);\n});\n\naddActionHandler('afterSelectHardwareWallets', (global, actions, { hardwareSelectedIndices }) => {\n  setGlobal(updateAuth(global, {\n    method: 'importHardwareWallet',\n    hardwareSelectedIndices,\n    error: undefined,\n  }));\n\n  actions.afterCreatePassword({ password: '' });\n});\n\naddActionHandler('enableBiometrics', async (global, actions, { password }) => {\n  if (!(await callApi('verifyPassword', password))) {\n    global = getGlobal();\n    global = updateBiometrics(global, { error: 'Wrong password, please try again.' });\n    setGlobal(global);\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateBiometrics(global, {\n    error: undefined,\n    state: BiometricsState.TurnOnRegistration,\n  });\n  global = updateAuth(global, { isLoading: true });\n  setGlobal(global);\n\n  try {\n    const credential = IS_ELECTRON\n      ? undefined\n      : await webAuthn.createCredential();\n\n    global = getGlobal();\n    global = updateBiometrics(global, { state: BiometricsState.TurnOnVerification });\n    setGlobal(global);\n\n    const result = await authApi.setupBiometrics({ credential });\n\n    global = getGlobal();\n    if (!result) {\n      global = updateBiometrics(global, {\n        error: 'Biometric setup failed.',\n        state: BiometricsState.TurnOnPasswordConfirmation,\n      });\n      setGlobal(global);\n\n      return;\n    }\n    global = updateBiometrics(global, { state: BiometricsState.TurnOnComplete });\n    setGlobal(global);\n\n    await callApi('changePassword', password, result.password);\n\n    global = getGlobal();\n    global = updateSettings(global, { authConfig: result.config });\n\n    setGlobal(global);\n    actions.setInMemoryPassword({ password: undefined, force: true });\n  } catch (err: any) {\n    const error = err?.message.includes('privacy-considerations-client')\n      ? 'Biometric setup failed.'\n      : (err?.message || 'Biometric setup failed.');\n    global = getGlobal();\n    global = updateBiometrics(global, {\n      error,\n      state: BiometricsState.TurnOnPasswordConfirmation,\n    });\n    setGlobal(global);\n  } finally {\n    global = getGlobal();\n    global = updateAuth(global, { isLoading: undefined });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('disableBiometrics', async (global, actions, { password, isPasswordNumeric }) => {\n  const { password: oldPassword } = global.biometrics;\n\n  if (!password || !oldPassword) {\n    global = updateBiometrics(global, { error: 'Biometric confirmation failed.' });\n    setGlobal(global);\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateAuth(global, { isLoading: true });\n  setGlobal(global);\n\n  try {\n    await callApi('changePassword', oldPassword, password);\n  } catch (err: any) {\n    global = getGlobal();\n    global = updateBiometrics(global, { error: err?.message || 'Failed to disable biometrics.' });\n    setGlobal(global);\n\n    return;\n  } finally {\n    global = getGlobal();\n    global = updateAuth(global, { isLoading: undefined });\n    setGlobal(global);\n  }\n\n  global = getGlobal();\n  global = updateBiometrics(global, {\n    state: BiometricsState.TurnOffComplete,\n    error: undefined,\n  });\n  global = updateSettings(global, {\n    authConfig: { kind: 'password' },\n    isPasswordNumeric,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('closeBiometricSettings', (global) => {\n  global = { ...global, biometrics: cloneDeep(INITIAL_STATE.biometrics) };\n\n  setGlobal(global);\n});\n\naddActionHandler('openBiometricsTurnOn', (global) => {\n  global = updateBiometrics(global, { state: BiometricsState.TurnOnPasswordConfirmation });\n\n  setGlobal(global);\n});\n\naddActionHandler('openBiometricsTurnOffWarning', (global) => {\n  global = updateBiometrics(global, { state: BiometricsState.TurnOffWarning });\n\n  setGlobal(global);\n});\n\naddActionHandler('openBiometricsTurnOff', async (global) => {\n  global = updateBiometrics(global, { state: BiometricsState.TurnOffBiometricConfirmation });\n  setGlobal(global);\n\n  const password = await authApi.getPassword(global.settings.authConfig!);\n  global = getGlobal();\n\n  if (!password) {\n    global = updateBiometrics(global, { error: 'Biometric confirmation failed.' });\n  } else {\n    global = updateBiometrics(global, {\n      state: BiometricsState.TurnOffCreatePassword,\n      password,\n    });\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('disableNativeBiometrics', (global) => {\n  global = updateSettings(global, {\n    authConfig: { kind: 'password' },\n    isPasswordNumeric: true,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('enableNativeBiometrics', async (global, actions, { password }) => {\n  if (!(await callApi('verifyPassword', password))) {\n    global = getGlobal();\n    global = {\n      ...global,\n      nativeBiometricsError: 'Incorrect code, please try again.',\n    };\n    global = clearIsPinAccepted(global);\n    setGlobal(global);\n\n    return;\n  }\n\n  global = getGlobal();\n\n  global = setIsPinAccepted(global);\n  global = {\n    ...global,\n    nativeBiometricsError: undefined,\n  };\n  setGlobal(global);\n\n  try {\n    let isVerified: boolean;\n\n    if (IS_TELEGRAM_APP) {\n      const verificationResult = await verifyTelegramBiometricIdentity();\n      isVerified = verificationResult.success;\n    } else {\n      isVerified = await NativeBiometric.verifyIdentity({\n        title: APP_NAME,\n        subtitle: '',\n        maxAttempts: 1,\n      })\n        .then(() => true)\n        .catch(() => false);\n    }\n\n    if (!isVerified) {\n      global = getGlobal();\n      global = {\n        ...global,\n        nativeBiometricsError: 'Failed to enable biometrics.',\n      };\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n      void vibrateOnError();\n\n      return;\n    }\n\n    const result = await authApi.setupNativeBiometrics(password);\n\n    await pause(NATIVE_BIOMETRICS_PAUSE_MS);\n\n    global = getGlobal();\n    global = updateSettings(global, { authConfig: result.config });\n    global = { ...global, nativeBiometricsError: undefined };\n    setGlobal(global);\n    actions.setInMemoryPassword({ password: undefined, force: true });\n\n    void vibrateOnSuccess();\n  } catch (err: any) {\n    global = getGlobal();\n    global = {\n      ...global,\n      nativeBiometricsError: err?.message || 'Failed to enable biometrics.',\n    };\n    global = clearIsPinAccepted(global);\n    setGlobal(global);\n\n    void vibrateOnError();\n  }\n});\n\naddActionHandler('clearNativeBiometricsError', (global) => {\n  return {\n    ...global,\n    nativeBiometricsError: undefined,\n  };\n});\n\naddActionHandler('openAuthBackupWalletModal', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openAuthBackupWalletModal');\n    return;\n  }\n\n  global = updateAuth(global, { state: AuthState.safetyRules });\n  setGlobal(global);\n});\n\naddActionHandler('openMnemonicPage', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openMnemonicPage');\n    return;\n  }\n\n  global = updateAuth(global, { state: AuthState.mnemonicPage });\n  setGlobal(global);\n});\n\naddActionHandler('openCreateBackUpPage', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openCreateBackUpPage');\n    return;\n  }\n\n  const accounts = selectAccounts(global) ?? {};\n\n  const isFirstAccount = isEmptyObject(accounts);\n  global = updateAuth(global, {\n    state: isFirstAccount ? AuthState.disclaimerAndBackup : AuthState.createBackup,\n  });\n\n  setGlobal(global);\n});\n\naddActionHandler('openCheckWordsPage', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openCheckWordsPage');\n    return;\n  }\n\n  global = updateAuth(global, { state: AuthState.checkWords });\n  setGlobal(global);\n});\n\naddActionHandler('closeCheckWordsPage', (global, actions, props) => {\n  const { isBackupCreated } = props || {};\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('closeCheckWordsPage', props);\n  }\n\n  if (!IS_DELEGATED_BOTTOM_SHEET && isBackupCreated) {\n    actions.afterCheckMnemonic();\n  }\n});\n\naddActionHandler('copyStorageData', async (global, actions) => {\n  const accountConfigJson = await callApi('fetchAccountConfigForDebugPurposesOnly');\n\n  if (accountConfigJson) {\n    const storageData = JSON.stringify({\n      ...JSON.parse(accountConfigJson),\n      global: reduceGlobalForDebug(),\n    });\n\n    await copyTextToClipboard(storageData);\n\n    actions.showNotification({ message: getTranslation('Copied') });\n  } else {\n    actions.showError({ error: ApiCommonError.Unexpected });\n  }\n});\n\naddActionHandler('importAccountByVersion', async (global, actions, { version }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('importAccountByVersion', { version });\n    return;\n  }\n\n  const accountId = global.currentAccountId!;\n\n  const wallet = (await callApi('importNewWalletVersion', accountId, version))!;\n  global = getGlobal();\n\n  if (!wallet.isNew) {\n    actions.switchAccount({ accountId: wallet.accountId });\n    return;\n  }\n\n  const { title: currentWalletTitle, type } = selectAccount(global, accountId)!;\n  const addressByChain = { ton: wallet.address };\n  global = updateCurrentAccountId(global, wallet.accountId);\n\n  const ledgerInfo = wallet.ledger ? {\n    ledger: wallet.ledger,\n  } : undefined;\n\n  global = createAccount({\n    global,\n    accountId: wallet.accountId,\n    type,\n    addressByChain,\n    partial: { ...ledgerInfo, title: currentWalletTitle },\n    titlePostfix: version,\n  });\n  setGlobal(global);\n\n  await callApi('activateAccount', wallet.accountId);\n\n  actions.tryAddNotificationAccount({ accountId: wallet.accountId });\n});\n\naddActionHandler('setIsAuthLoading', (global, actions, { isLoading }) => {\n  global = updateAuth(global, { isLoading });\n  setGlobal(global);\n});\n\naddActionHandler('importViewAccount', async (global, actions, { addressByChain }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('importViewAccount', { addressByChain });\n    return;\n  }\n\n  const accounts = selectAccounts(global) ?? {};\n  const isFirstAccount = isEmptyObject(accounts);\n  const network = selectCurrentNetwork(getGlobal());\n  if (isFirstAccount) {\n    global = updateAuth(global, { isLoading: true });\n  } else {\n    global = updateAccounts(global, { isLoading: true });\n    if (IS_DELEGATING_BOTTOM_SHEET) {\n      callActionInNative('setIsAccountLoading', { isLoading: true });\n    }\n  }\n  setGlobal(global);\n\n  const result = await callApi('importViewAccount', network, addressByChain);\n\n  global = getGlobal();\n  if (isFirstAccount) {\n    global = updateAuth(global, { isLoading: undefined });\n  } else {\n    global = updateAccounts(global, { isLoading: undefined });\n    if (IS_DELEGATING_BOTTOM_SHEET) {\n      callActionInNative('setIsAccountLoading', { isLoading: undefined });\n    }\n  }\n  setGlobal(global);\n\n  if (!result || 'error' in result) {\n    actions.showError({ error: result?.error });\n    return;\n  }\n\n  global = getGlobal();\n  global = createAccount({\n    global,\n    accountId: result.accountId,\n    addressByChain: result.resolvedAddresses,\n    type: 'view',\n    partial: { title: result.title },\n  });\n  global = updateCurrentAccountId(global, result.accountId);\n  setGlobal(global);\n\n  if (getGlobal().areSettingsOpen) {\n    actions.closeSettings();\n  }\n\n  actions.tryAddNotificationAccount({ accountId: result.accountId });\n\n  actions.afterSignIn();\n  if (isFirstAccount) {\n    actions.resetApiSettings();\n    actions.requestConfetti();\n  } else {\n    actions.closeAddAccountModal();\n  }\n  void vibrateOnSuccess();\n});\n\naddActionHandler('startImportViewAccount', (global) => {\n  setGlobal(updateAuth(global, { state: AuthState.importViewAccount, error: undefined }));\n});\n\naddActionHandler('closeImportViewAccount', (global) => {\n  setGlobal(updateAuth(global, { state: AuthState.none, error: undefined }));\n});\n\naddActionHandler('openAuthImportWalletModal', (global) => {\n  global = updateAuth(global, { isImportModalOpen: true });\n  setGlobal(global);\n});\n\naddActionHandler('closeAuthImportWalletModal', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('closeAuthImportWalletModal');\n  }\n\n  global = updateAuth(global, { isImportModalOpen: undefined });\n  setGlobal(global);\n});\n\nfunction reduceGlobalForDebug() {\n  const reduced = cloneDeep(getGlobal());\n\n  reduced.tokenInfo = {} as any;\n  reduced.swapTokenInfo = {} as any;\n  Object.entries(reduced.byAccountId).forEach(([, state]) => {\n    state.activities = {} as any;\n  });\n\n  return reduced;\n}\n","import type { ApiChain, ApiSwapAsset, ApiTokenWithPrice, ApiTransaction } from '../../api/types';\nimport type { Account, UserSwapToken } from '../types';\n\nimport { CHAIN_CONFIG, TINY_TRANSFER_MAX_COST, TONCOIN } from '../../config';\nimport { isScamTransaction } from '../../util/activities';\nimport { toBig } from '../../util/decimals';\n\nexport function getIsTinyOrScamTransaction(transaction: ApiTransaction, token?: ApiTokenWithPrice) {\n  if (isScamTransaction(transaction)) return true;\n  if (!token || transaction.nft || transaction.type) return false;\n\n  const cost = toBig(transaction.amount, token.decimals).abs().mul(token.priceUsd ?? 0);\n  return cost.lt(TINY_TRANSFER_MAX_COST);\n}\n\nexport function resolveSwapAssetId(asset: ApiSwapAsset) {\n  return asset.slug === TONCOIN.slug ? asset.symbol : (asset.tokenAddress ?? asset.slug);\n}\n\nexport function resolveSwapAsset(bySlug: Record<string, ApiSwapAsset>, anyId: string) {\n  return bySlug[anyId] ?? Object.values(bySlug).find(({ tokenAddress }) => tokenAddress === anyId);\n}\n\nexport function getIsSupportedChain(chain?: string): chain is ApiChain {\n  return chain as ApiChain in CHAIN_CONFIG;\n}\n\nexport function getIsInternalSwap({\n  from,\n  to,\n  toAddress,\n  addressByChain,\n}: {\n  from?: UserSwapToken | ApiSwapAsset;\n  to?: UserSwapToken | ApiSwapAsset;\n  toAddress?: string;\n  addressByChain?: Account['addressByChain'];\n}) {\n  const isMultichain = Boolean(addressByChain?.tron);\n  return (from?.chain === 'ton' && to?.chain === 'ton') || (\n    isMultichain && from && to && addressByChain\n    && getIsSupportedChain(from.chain)\n    && addressByChain[to.chain as ApiChain] === toAddress\n  );\n}\n","import type { ApiTokenWithPrice } from '../../api/types';\nimport type { GlobalState, PriceHistoryPeriods } from '../types';\n\nexport function updateTokenPriceHistory(global: GlobalState, slug: string, partial: PriceHistoryPeriods): GlobalState {\n  const { bySlug } = global.tokenPriceHistory;\n\n  return {\n    ...global,\n    tokenPriceHistory: {\n      bySlug: {\n        ...bySlug,\n        [slug]: {\n          ...bySlug[slug],\n          ...partial,\n        },\n      },\n    },\n  };\n}\n\nexport function updateTokenInfo(global: GlobalState, partial: Record<string, ApiTokenWithPrice>): GlobalState {\n  return {\n    ...global,\n    tokenInfo: {\n      ...global.tokenInfo,\n      bySlug: {\n        ...global.tokenInfo.bySlug,\n        ...partial,\n      },\n    },\n  };\n}\n","import type {\n  ApiActivity,\n  ApiSwapAsset,\n  ApiToken,\n  ApiTokenWithPrice,\n} from '../../../api/types';\n\nimport { compareActivities } from '../../../util/compareActivities';\nimport { unique } from '../../../util/iteratees';\nimport { getIsTransactionWithPoisoning } from '../../../util/poisoningHash';\nimport { pause, throttle, waitFor } from '../../../util/schedulers';\nimport { buildUserToken } from '../../../util/tokens';\nimport { callApi } from '../../../api';\nimport { SEC } from '../../../api/constants';\nimport { getIsTinyOrScamTransaction } from '../../helpers';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  addPastActivities,\n  changeBalance,\n  updateCurrentAccountSettings,\n  updateCurrentAccountState,\n  updateCurrentSignature,\n  updateSettings,\n} from '../../reducers';\nimport { updateTokenInfo } from '../../reducers/tokens';\nimport {\n  selectAccount,\n  selectAccountState,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsHistoryEndReached,\n  selectLastActivityTimestamp,\n} from '../../selectors';\n\nconst IMPORT_TOKEN_PAUSE = 250;\nconst PAST_ACTIVITY_DELAY = 200;\nconst PAST_ACTIVITY_BATCH = 50;\n\nconst pastActivityThrottle: Record<string, NoneToVoidFunction> = {};\nconst initialActivityWaitingByAccountId: Record<string, Promise<unknown>> = {};\n\naddActionHandler('fetchPastActivities', (global, actions, { slug, shouldLoadWithBudget }) => {\n  const accountId = global.currentAccountId!;\n  const throttleKey = `${accountId} ${slug ?? '__main__'}`;\n\n  // Besides the throttling itself, the `throttle` avoids concurrent activity loading\n  pastActivityThrottle[throttleKey] ||= throttle(\n    fetchPastActivities.bind(undefined, accountId, slug),\n    PAST_ACTIVITY_DELAY,\n    true,\n  );\n\n  pastActivityThrottle[throttleKey]();\n  if (shouldLoadWithBudget) {\n    pastActivityThrottle[throttleKey]();\n  }\n});\n\nasync function fetchPastActivities(accountId: string, slug?: string) {\n  // To avoid gaps in the history, we need to wait until the initial activities are loaded. The worker starts watching\n  // for new activities at the moment the initial activities are loaded. This also prevents requesting the activities\n  // that the worker is already loading.\n  await waitInitialActivityLoading(accountId);\n\n  let global = getGlobal();\n\n  if (selectIsHistoryEndReached(global, accountId, slug)) {\n    return;\n  }\n\n  const fetchedActivities: ApiActivity[] = [];\n  let toTimestamp = selectLastActivityTimestamp(global, accountId, slug);\n  let shouldFetchMore = true;\n  let isEndReached = false;\n\n  while (shouldFetchMore) {\n    const result = await callApi('fetchPastActivities', accountId, PAST_ACTIVITY_BATCH, slug, toTimestamp);\n    if (!result) {\n      return;\n    }\n\n    global = getGlobal();\n\n    if (!result.length) {\n      isEndReached = true;\n      break;\n    }\n\n    const { areTinyTransfersHidden } = global.settings;\n\n    const filteredResult = result.filter((tx) => {\n      const shouldHide = tx.kind === 'transaction'\n        && (\n          getIsTransactionWithPoisoning(tx)\n          || (areTinyTransfersHidden && getIsTinyOrScamTransaction(tx))\n        );\n\n      return !shouldHide;\n    });\n\n    fetchedActivities.push(...result);\n    shouldFetchMore = filteredResult.length < PAST_ACTIVITY_BATCH && fetchedActivities.length < PAST_ACTIVITY_BATCH;\n    toTimestamp = result[result.length - 1].timestamp;\n  }\n\n  fetchedActivities.sort(compareActivities);\n\n  global = addPastActivities(global, accountId, slug, fetchedActivities, isEndReached);\n  setGlobal(global);\n}\n\naddActionHandler('setIsBackupRequired', (global, actions, { isMnemonicChecked }) => {\n  const { isBackupRequired } = selectCurrentAccountState(global) ?? {};\n\n  setGlobal(updateCurrentAccountState(global, {\n    isBackupRequired: isMnemonicChecked ? undefined : isBackupRequired,\n  }));\n});\n\naddActionHandler('submitSignature', async (global, actions, payload) => {\n  const { password } = payload;\n  const { promiseId } = global.currentSignature!;\n\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentSignature(getGlobal(), { error: 'Wrong password, please try again.' }));\n\n    return;\n  }\n\n  await callApi('confirmDappRequest', promiseId, password);\n\n  setGlobal(updateCurrentSignature(getGlobal(), { isSigned: true }));\n});\n\naddActionHandler('clearSignatureError', (global) => {\n  setGlobal(updateCurrentSignature(global, { error: undefined }));\n});\n\naddActionHandler('cancelSignature', (global) => {\n  const { promiseId } = global.currentSignature || {};\n\n  if (promiseId) {\n    void callApi('cancelDappRequest', promiseId, 'Canceled by the user');\n  }\n\n  setGlobal({\n    ...global,\n    currentSignature: undefined,\n  });\n});\n\naddActionHandler('addToken', (global, actions, { token }) => {\n  if (!global.tokenInfo?.bySlug?.[token.slug]) {\n    global = updateTokenInfo(global, {\n      [token.slug]: {\n        name: token.name,\n        symbol: token.symbol,\n        slug: token.slug,\n        decimals: token.decimals,\n        chain: token.chain,\n        image: token.image,\n        keywords: token.keywords,\n        price: token.price ?? 0,\n        priceUsd: token.priceUsd ?? 0,\n        percentChange24h: token.change24h ?? 0,\n      },\n    });\n  }\n\n  const { balances } = selectCurrentAccountState(global) ?? {};\n\n  if (!balances?.bySlug[token.slug]) {\n    global = updateCurrentAccountState(global, {\n      balances: {\n        ...balances,\n        bySlug: {\n          ...balances?.bySlug,\n          [token.slug]: 0n,\n        },\n      },\n    });\n  }\n\n  const settings = selectCurrentAccountSettings(global);\n  global = updateCurrentAccountSettings(global, {\n    importedSlugs: [...settings?.importedSlugs ?? [], token.slug],\n  });\n\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  global = updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    orderedSlugs: [...accountSettings.orderedSlugs ?? [], token.slug],\n    alwaysShownSlugs: unique([...accountSettings.alwaysShownSlugs ?? [], token.slug]),\n    alwaysHiddenSlugs: accountSettings.alwaysHiddenSlugs?.filter((slug) => slug !== token.slug),\n    deletedSlugs: accountSettings.deletedSlugs?.filter((slug) => slug !== token.slug),\n  });\n\n  return global;\n});\n\naddActionHandler('importToken', async (global, actions, { address }) => {\n  const { currentAccountId } = global;\n  global = updateSettings(global, {\n    importToken: {\n      isLoading: true,\n      token: undefined,\n    },\n  });\n  setGlobal(global);\n\n  const slug = (await callApi('buildTokenSlug', 'ton', address))!;\n  global = getGlobal();\n\n  let token: ApiTokenWithPrice | ApiToken | undefined = global.tokenInfo.bySlug?.[slug];\n\n  if (!token) {\n    token = await callApi('fetchToken', global.currentAccountId!, address);\n    await pause(IMPORT_TOKEN_PAUSE);\n\n    global = getGlobal();\n    if (!token) {\n      global = updateSettings(global, {\n        importToken: {\n          isLoading: false,\n          token: undefined,\n        },\n      });\n      setGlobal(global);\n      return;\n    } else {\n      const apiToken: ApiTokenWithPrice = {\n        ...token,\n        price: 0,\n        priceUsd: 0,\n        percentChange24h: 0,\n      };\n      global = updateTokenInfo(global, { [apiToken.slug]: apiToken });\n      setGlobal(global);\n    }\n  }\n\n  const balances = selectAccountState(global, currentAccountId!)?.balances?.bySlug ?? {};\n  const shouldUpdateBalance = !(token.slug in balances);\n\n  const userToken = buildUserToken(token);\n\n  global = getGlobal();\n  global = updateSettings(global, {\n    importToken: {\n      isLoading: false,\n      token: userToken,\n    },\n  });\n  if (shouldUpdateBalance) {\n    global = changeBalance(global, global.currentAccountId!, token.slug, 0n);\n  }\n  setGlobal(global);\n});\n\naddActionHandler('resetImportToken', (global) => {\n  global = updateSettings(global, {\n    importToken: {\n      isLoading: false,\n      token: undefined,\n    },\n  });\n  setGlobal(global);\n});\n\naddActionHandler('verifyHardwareAddress', async (global, actions) => {\n  const accountId = global.currentAccountId!;\n\n  const ledgerApi = await import('../../../util/ledger');\n\n  if (!(await ledgerApi.reconnectLedger())) {\n    actions.showError({ error: '$ledger_not_ready' });\n    return;\n  }\n\n  try {\n    actions.showDialog({ title: 'Ledger', message: '$ledger_verify_address_on_device' });\n    await ledgerApi.verifyAddress(accountId);\n  } catch (err) {\n    actions.showError({ error: err as string });\n  }\n});\n\naddActionHandler('setActiveContentTab', (global, actions, { tab }) => {\n  return updateCurrentAccountState(global, {\n    activeContentTab: tab,\n  });\n});\n\naddActionHandler('addSwapToken', (global, actions, { token }) => {\n  const isAlreadyExist = token.slug in global.swapTokenInfo.bySlug;\n\n  if (isAlreadyExist) {\n    return;\n  }\n\n  const apiSwapAsset: ApiSwapAsset = {\n    name: token.name,\n    symbol: token.symbol,\n    chain: token.chain,\n    slug: token.slug,\n    decimals: token.decimals,\n    image: token.image,\n    tokenAddress: token.tokenAddress,\n    keywords: token.keywords,\n    isPopular: false,\n    price: 0,\n    priceUsd: 0,\n  };\n\n  setGlobal({\n    ...global,\n    swapTokenInfo: {\n      ...global.swapTokenInfo,\n      bySlug: {\n        ...global.swapTokenInfo.bySlug,\n        [apiSwapAsset.slug]: apiSwapAsset,\n      },\n    },\n  });\n});\n\naddActionHandler('apiUpdateWalletVersions', (global, actions, params) => {\n  const { accountId, versions, currentVersion } = params;\n  global = {\n    ...global,\n    walletVersions: {\n      ...global.walletVersions,\n      currentVersion,\n      byId: {\n        ...global.walletVersions?.byId,\n        [accountId]: versions,\n      },\n    },\n  };\n  setGlobal(global);\n});\n\nfunction waitInitialActivityLoading(accountId: string) {\n  initialActivityWaitingByAccountId[accountId] ||= waitFor(() => {\n    const global = getGlobal();\n\n    return !selectAccount(global, accountId) // The account has been removed, the initial activities will never appear\n      || selectAccountState(global, accountId)?.activities?.idsMain !== undefined;\n  }, SEC, 60);\n\n  return initialActivityWaitingByAccountId[accountId];\n}\n","export const SEC = 1000;\nexport const MINUTE = 60 * SEC;\nexport const DAYS_IN_YEAR = 365;\nexport const FIRST_TRANSACTIONS_LIMIT = 50;\n\nexport const FAKE_TX_ID = 'fakeTxId';\n","import type { ApiStakingType } from '../../api/types';\n\nimport { DEFAULT_FEE } from '../../config';\nimport { TON_GAS, TON_GAS_REAL } from '../../api/chains/ton/constants';\n\ntype TonOperationFees = {\n  gas: bigint;\n  real: bigint;\n};\n\nexport default function getTonOperationFees(operation: keyof typeof TON_GAS_REAL): TonOperationFees {\n  return {\n    gas: TON_GAS[operation] + DEFAULT_FEE,\n    real: TON_GAS_REAL[operation],\n  };\n}\n\nexport function getTonStakingFees(type?: ApiStakingType): {\n  stake: TonOperationFees;\n  unstake: TonOperationFees;\n  claim?: TonOperationFees;\n} {\n  switch (type) {\n    case 'nominators': {\n      return {\n        stake: getTonOperationFees('stakeNominators'),\n        unstake: getTonOperationFees('unstakeNominators'),\n      };\n    }\n    case 'liquid': {\n      return {\n        stake: getTonOperationFees('stakeLiquid'),\n        unstake: getTonOperationFees('unstakeLiquid'),\n      };\n    }\n    case 'jetton': {\n      return {\n        stake: getTonOperationFees('stakeJettons'),\n        unstake: getTonOperationFees('unstakeJettons'),\n        claim: getTonOperationFees('claimJettons'),\n      };\n    }\n    case 'ethena': {\n      return {\n        stake: getTonOperationFees('stakeEthena'),\n        unstake: getTonOperationFees('unstakeEthena'),\n        claim: getTonOperationFees('unstakeEthenaLocked'),\n      };\n    }\n  }\n\n  return {\n    stake: { gas: 0n, real: 0n },\n    unstake: { gas: 0n, real: 0n },\n    claim: { gas: 0n, real: 0n },\n  };\n}\n","import type { ApiStakingState, ApiStakingType } from '../../api/types';\n\nimport {\n  ETHENA_STAKING_MIN_AMOUNT,\n  MIN_ACTIVE_STAKING_REWARDS,\n  NOMINATORS_STAKING_MIN_AMOUNT,\n  STAKING_MIN_AMOUNT,\n} from '../../config';\n\nexport function getStakingMinAmount(type?: ApiStakingType) {\n  switch (type) {\n    case 'nominators':\n      return NOMINATORS_STAKING_MIN_AMOUNT;\n    case 'ethena':\n      return ETHENA_STAKING_MIN_AMOUNT;\n    default:\n      return STAKING_MIN_AMOUNT;\n  }\n}\n\nexport function getUnstakeTime(state?: ApiStakingState) {\n  switch (state?.type) {\n    case 'nominators':\n    case 'liquid':\n      return state.end;\n    case 'ethena':\n      return state.unlockTime;\n    default:\n      return undefined;\n  }\n}\n\nexport function getStakingTitle(stakingType?: ApiStakingState['type']) {\n  return stakingType === 'ethena' ? 'How does it work?' : 'Why this is safe';\n}\n\nexport type StakingStateStatus = 'inactive' | 'active' | 'unstakeRequested' | 'readyToClaim';\n\nexport function getStakingStateStatus(state: ApiStakingState): StakingStateStatus {\n  if (state.unstakeRequestAmount) {\n    if (state.type === 'ethena' && state.unlockTime && state.unlockTime <= Date.now()) {\n      return 'readyToClaim';\n    }\n\n    return 'unstakeRequested';\n  }\n  if (getIsActiveStakingState(state)) {\n    return 'active';\n  }\n  return 'inactive';\n}\n\nexport function getIsActiveStakingState(state: ApiStakingState) {\n  return Boolean(\n    state.balance\n    || state.unstakeRequestAmount\n    || ('unclaimedRewards' in state && state.unclaimedRewards > MIN_ACTIVE_STAKING_REWARDS),\n  );\n}\n\nexport function getIsLongUnstake(state: ApiStakingState, amount?: bigint): boolean | undefined {\n  switch (state.type) {\n    case 'nominators': {\n      return true;\n    }\n    case 'liquid': {\n      return amount === undefined ? false : amount > state.instantAvailable;\n    }\n    case 'jetton': {\n      return false;\n    }\n    case 'ethena': {\n      return true;\n    }\n  }\n\n  return undefined;\n}\n\nexport function getFullStakingBalance(state: ApiStakingState): bigint {\n  switch (state.type) {\n    case 'jetton': {\n      return state.balance + state.unclaimedRewards;\n    }\n    case 'ethena': {\n      return state.balance + state.unstakeRequestAmount;\n    }\n  }\n\n  return state.balance;\n}\n","import type { ApiDapp, ApiDappRequest } from '../api/types';\n\nexport function getDappConnectionUniqueId(request: ApiDappRequest | ApiDapp): string {\n  return (request as any).sseOptions?.appClientId ?? (request as any).sse?.appClientId ?? 'jsbridge';\n}\n","import type { ApiDappConnectionType } from '../../../api/types';\nimport type { GlobalState } from '../../types';\nimport { DappConnectState, SignDataState, TransferState } from '../../types';\n\nimport { ANIMATION_END_DELAY, IS_CAPACITOR } from '../../../config';\nimport { areDeepEqual } from '../../../util/areDeepEqual';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { getDappConnectionUniqueId } from '../../../util/getDappConnectionUniqueId';\nimport { vibrateOnSuccess } from '../../../util/haptics';\nimport { callActionInMain } from '../../../util/multitab';\nimport { pause, waitFor } from '../../../util/schedulers';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport {\n  ApiHardwareBlindSigningNotEnabled,\n  ApiUnsupportedVersionError,\n  ApiUserRejectsError,\n} from '../../../api/errors';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearConnectedDapps,\n  clearCurrentDappSignData,\n  clearCurrentDappTransfer,\n  clearDappConnectRequest,\n  clearIsPinAccepted,\n  removeConnectedDapp,\n  setIsPinAccepted,\n  updateConnectedDapps,\n  updateCurrentDappSignData,\n  updateCurrentDappTransfer,\n  updateDappConnectRequest,\n} from '../../reducers';\nimport { selectIsHardwareAccount } from '../../selectors';\nimport { switchAccount } from './auth';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\n\nimport { CLOSE_DURATION, CLOSE_DURATION_PORTRAIT } from '../../../components/ui/Modal';\n\nconst GET_DAPPS_PAUSE = 250;\n\naddActionHandler('submitDappConnectRequestConfirm', async (global, actions, { password, accountId }) => {\n  const {\n    promiseId, permissions,\n  } = global.dappConnectRequest!;\n\n  if (permissions?.isPasswordRequired && (!password || !(await callApi('verifyPassword', password)))) {\n    global = getGlobal();\n    global = updateDappConnectRequest(global, { error: 'Wrong password, please try again.' });\n    setGlobal(global);\n\n    return;\n  }\n\n  if (getDoesUsePinPad()) {\n    global = getGlobal();\n    global = setIsPinAccepted(global);\n    setGlobal(global);\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitDappConnectRequestConfirm', { password, accountId });\n\n    return;\n  }\n\n  void vibrateOnSuccess();\n  actions.switchAccount({ accountId });\n  await callApi('confirmDappRequestConnect', promiseId!, {\n    accountId,\n    password,\n  });\n\n  global = getGlobal();\n  if (IS_CAPACITOR) {\n    global = clearIsPinAccepted(global);\n  }\n  global = clearDappConnectRequest(global);\n  setGlobal(global);\n\n  await pause(GET_DAPPS_PAUSE);\n  actions.getDapps();\n});\n\naddActionHandler(\n  'submitDappConnectRequestConfirmHardware',\n  async (global, actions, { accountId: connectAccountId }) => {\n    const { proof } = global.dappConnectRequest!;\n\n    global = getGlobal();\n    global = updateDappConnectRequest(global, {\n      error: undefined,\n      state: DappConnectState.ConfirmHardware,\n    });\n    setGlobal(global);\n\n    const ledgerApi = await import('../../../util/ledger');\n\n    try {\n      const signature = await ledgerApi.signLedgerProof(connectAccountId, proof!);\n      if (IS_DELEGATED_BOTTOM_SHEET) {\n        callActionInMain('submitDappConnectHardware', { accountId: connectAccountId, signature });\n\n        return;\n      }\n\n      actions.submitDappConnectHardware({ accountId: connectAccountId, signature });\n    } catch (err) {\n      // todo: Distinguish user cancellation from other errors. For example, when the proof payload is too long (>256 bytes).\n      // todo: Show a clear message for dapp developers in this case. Requirements: payload size  128 bytes, domain  128 bytes, payload + domain  222 bytes.\n      setGlobal(updateDappConnectRequest(getGlobal(), {\n        error: 'Canceled by the user',\n      }));\n    }\n  },\n);\n\naddActionHandler('submitDappConnectHardware', async (global, actions, { accountId, signature }) => {\n  const { promiseId } = global.dappConnectRequest!;\n\n  actions.switchAccount({ accountId });\n  await callApi('confirmDappRequestConnect', promiseId!, { accountId, signature });\n\n  global = getGlobal();\n  global = clearDappConnectRequest(global);\n  setGlobal(global);\n\n  await pause(GET_DAPPS_PAUSE);\n  actions.getDapps();\n});\n\naddActionHandler('cancelDappConnectRequestConfirm', (global) => {\n  cancelDappOperation(\n    (global) => global.dappConnectRequest,\n    () => callActionInMain('cancelDappConnectRequestConfirm'),\n    clearDappConnectRequest,\n  );\n});\n\naddActionHandler('setDappConnectRequestState', (global, actions, { state }) => {\n  setGlobal(updateDappConnectRequest(global, { state }));\n});\n\naddActionHandler('cancelDappTransfer', (global) => {\n  cancelDappOperation(\n    (global) => global.currentDappTransfer,\n    () => callActionInMain('cancelDappTransfer'),\n    clearCurrentDappTransfer,\n  );\n});\n\nfunction cancelDappOperation(\n  getState: (global: GlobalState) => { promiseId?: string } | undefined,\n  callInMain: NoneToVoidFunction,\n  clearState: (global: GlobalState) => GlobalState,\n) {\n  let global = getGlobal();\n  const { promiseId } = getState(global) ?? {};\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callInMain();\n  } else if (promiseId) {\n    void callApi('cancelDappRequest', promiseId, 'Canceled by the user');\n  }\n\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n  global = clearState(global);\n  setGlobal(global);\n}\n\naddActionHandler('submitDappTransferPassword', async (global, actions, { password }) => {\n  await submitDappOperationPassword(\n    password,\n    (global) => global.currentDappTransfer,\n    () => callActionInMain('submitDappTransferPassword', { password }),\n    updateCurrentDappTransfer,\n  );\n});\n\nasync function submitDappOperationPassword(\n  password: string,\n  getState: (global: GlobalState) => { promiseId?: string },\n  callInMain: NoneToVoidFunction,\n  updateState: (global: GlobalState, update: { isLoading?: true; error?: string }) => GlobalState,\n) {\n  let global = getGlobal();\n  const { promiseId } = getState(global);\n\n  if (!promiseId) {\n    return;\n  }\n\n  if (!(await callApi('verifyPassword', password))) {\n    global = getGlobal();\n    global = updateState(global, {\n      error: 'Wrong password, please try again.',\n    });\n    setGlobal(global);\n\n    return;\n  }\n\n  if (getDoesUsePinPad()) {\n    global = getGlobal();\n    global = setIsPinAccepted(global);\n    setGlobal(global);\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callInMain();\n    return;\n  }\n\n  global = getGlobal();\n  global = updateState(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n\n  await vibrateOnSuccess(true);\n  void callApi('confirmDappRequest', promiseId, password);\n\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(getGlobal());\n    setGlobal(global);\n  }\n}\n\naddActionHandler('submitDappTransferHardware', async (global, actions) => {\n  const { promiseId, transactions, vestingAddress } = global.currentDappTransfer;\n\n  if (!promiseId) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentDappTransfer(global, {\n    isLoading: true,\n    error: undefined,\n    state: TransferState.ConfirmHardware,\n  });\n  setGlobal(global);\n\n  const accountId = global.currentAccountId!;\n  const ledgerApi = await import('../../../util/ledger');\n\n  try {\n    const signedMessages = await ledgerApi.signLedgerTransactions(accountId, transactions!, {\n      isTonConnect: true,\n      vestingAddress,\n    });\n\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      callActionInMain('submitDappTransferHardware2', { signedMessages });\n\n      return;\n    }\n\n    actions.submitDappTransferHardware2({ signedMessages });\n  } catch (err) {\n    if (err instanceof ApiHardwareBlindSigningNotEnabled) {\n      setGlobal(updateCurrentDappTransfer(getGlobal(), {\n        isLoading: false,\n        error: '$hardware_blind_sign_not_enabled',\n      }));\n      return;\n    } else if (err instanceof ApiUnsupportedVersionError) {\n      actions.showError({\n        error: '$ledger_unsupported_ton_connect',\n      });\n      void callApi('cancelDappRequest', promiseId, err.message);\n    } else if (err instanceof ApiUserRejectsError) {\n      setGlobal(updateCurrentDappTransfer(getGlobal(), {\n        isLoading: false,\n        error: 'Canceled by the user',\n      }));\n      return;\n    } else {\n      void callApi('cancelDappRequest', promiseId, 'Unknown error.');\n    }\n\n    global = getGlobal();\n    global = clearCurrentDappTransfer(global);\n    setGlobal(global);\n  }\n});\n\naddActionHandler('submitDappTransferHardware2', (global, actions, { signedMessages }) => {\n  const { promiseId } = global.currentDappTransfer;\n\n  if (!promiseId) {\n    return;\n  }\n\n  void callApi('confirmDappRequest', promiseId, signedMessages);\n\n  global = getGlobal();\n  global = clearCurrentDappTransfer(global);\n  setGlobal(global);\n});\n\naddActionHandler('submitDappSignDataPassword', async (global, actions, { password }) => {\n  await submitDappOperationPassword(\n    password,\n    (global) => global.currentDappSignData,\n    () => callActionInMain('submitDappSignDataPassword', { password }),\n    updateCurrentDappSignData,\n  );\n});\n\naddActionHandler('getDapps', async (global, actions) => {\n  const { currentAccountId } = global;\n\n  let result = await callApi('getDapps', currentAccountId!);\n\n  if (!result) {\n    return;\n  }\n\n  // Check for broken dapps without URL\n  const brokenDapp = result.find(({ url }) => !url);\n  if (brokenDapp) {\n    actions.deleteDapp({ url: brokenDapp.url, uniqueId: getDappConnectionUniqueId(brokenDapp) });\n    result = result.filter(({ url }) => url);\n  }\n\n  global = getGlobal();\n  global = updateConnectedDapps(global, result);\n  setGlobal(global);\n});\n\naddActionHandler('deleteAllDapps', (global) => {\n  const { currentAccountId } = global;\n\n  void callApi('deleteAllDapps', currentAccountId!);\n\n  global = getGlobal();\n  global = clearConnectedDapps(global);\n  setGlobal(global);\n});\n\naddActionHandler('deleteDapp', (global, actions, { url, uniqueId }) => {\n  const { currentAccountId } = global;\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('deleteDapp', { url, uniqueId });\n  } else {\n    void callApi('deleteDapp', currentAccountId!, url, uniqueId);\n  }\n\n  global = getGlobal();\n  global = removeConnectedDapp(global, url);\n  setGlobal(global);\n});\n\naddActionHandler('cancelDappSignData', (global) => {\n  cancelDappOperation(\n    (global) => global.currentDappSignData,\n    () => callActionInMain('cancelDappSignData'),\n    clearCurrentDappSignData,\n  );\n});\n\naddActionHandler('apiUpdateDappConnect', async (global, actions, {\n  accountId, dapp, permissions, promiseId, proof,\n}) => {\n  // We only need to apply changes in NBS when Dapp Connect Modal is already open\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    if (!(await waitFor(() => Boolean(getGlobal().dappConnectRequest), 300, 5))) {\n      return;\n    }\n\n    global = getGlobal();\n  }\n\n  global = updateDappConnectRequest(global, {\n    state: DappConnectState.Info,\n    promiseId,\n    accountId,\n    dapp,\n    permissions: {\n      isAddressRequired: permissions.address,\n      isPasswordRequired: permissions.proof,\n    },\n    proof,\n  });\n  setGlobal(global);\n\n  actions.addSiteToBrowserHistory({ url: dapp.url });\n});\n\naddActionHandler('apiUpdateDappSendTransaction', async (global, actions, payload) => {\n  const { promiseId, transactions, emulation, dapp, vestingAddress } = payload;\n\n  await apiUpdateDappOperation(\n    payload,\n    (global) => global.currentDappTransfer,\n    actions.closeDappTransfer,\n    (global) => global.currentDappTransfer.state !== TransferState.None,\n    clearCurrentDappTransfer,\n    (global) => updateCurrentDappTransfer(global, {\n      state: selectIsHardwareAccount(global) && transactions.length > 1\n        ? TransferState.WarningHardware\n        : TransferState.Initial,\n      promiseId,\n      transactions,\n      emulation,\n      dapp,\n      vestingAddress,\n    }),\n  );\n});\n\naddActionHandler('apiUpdateDappSignData', async (global, actions, payload) => {\n  const { promiseId, dapp, payloadToSign } = payload;\n\n  await apiUpdateDappOperation(\n    payload,\n    (global) => global.currentDappSignData,\n    actions.closeDappSignData,\n    (global) => global.currentDappSignData.state !== SignDataState.None,\n    clearCurrentDappSignData,\n    (global) => updateCurrentDappSignData(global, {\n      state: SignDataState.Initial,\n      promiseId,\n      dapp,\n      payloadToSign,\n    }),\n  );\n});\n\nasync function apiUpdateDappOperation(\n  payload: { accountId: string },\n  getState: (global: GlobalState) => { promiseId?: string },\n  close: NoneToVoidFunction,\n  isStateActive: (global: GlobalState) => boolean,\n  clearState: (global: GlobalState) => GlobalState,\n  updateState: (global: GlobalState) => GlobalState,\n) {\n  let global = getGlobal();\n\n  const { accountId } = payload;\n  const { promiseId: currentPromiseId } = getState(global);\n\n  await switchAccount(global, accountId);\n\n  if (currentPromiseId && !IS_DELEGATED_BOTTOM_SHEET) {\n    close();\n    const closeDuration = getIsPortrait() ? CLOSE_DURATION_PORTRAIT : CLOSE_DURATION;\n    await pause(closeDuration + ANIMATION_END_DELAY);\n  }\n\n  // We only need to apply changes in NBS when dapp operation modal is already open\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    if (!(await waitFor(() => isStateActive(getGlobal()), 300, 5))) {\n      return;\n    }\n  }\n\n  global = getGlobal();\n  global = clearState(global);\n  global = updateState(global);\n  setGlobal(global);\n}\n\naddActionHandler('apiUpdateDappLoading', async (global, actions, { connectionType, isSse, accountId }) => {\n  // We only need to apply changes in NBS when Dapp Connect Modal is already open\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    if (!(await waitFor(() => isAnyDappModalActive(getGlobal(), connectionType), 300, 5))) {\n      return;\n    }\n\n    global = getGlobal();\n  }\n\n  if (!IS_DELEGATED_BOTTOM_SHEET && accountId) {\n    actions.switchAccount({ accountId });\n  }\n\n  if (connectionType === 'connect') {\n    global = updateDappConnectRequest(global, {\n      state: DappConnectState.Info,\n      isSse,\n    });\n  } else if (connectionType === 'sendTransaction') {\n    global = updateCurrentDappTransfer(global, {\n      state: TransferState.Initial,\n      isSse,\n    });\n  } else if (connectionType === 'signData') {\n    global = updateCurrentDappSignData(global, {\n      state: SignDataState.Initial,\n      isSse,\n    });\n  }\n  setGlobal(global);\n});\n\naddActionHandler('apiUpdateDappCloseLoading', async (global, actions, { connectionType }) => {\n  // We only need to apply changes in NBS when Dapp Modal is already open\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    if (!(await waitFor(() => isAnyDappModalActive(getGlobal(), connectionType), 300, 5))) {\n      return;\n    }\n\n    global = getGlobal();\n  }\n\n  // But clear the state if a skeleton is displayed in the Modal\n  if (connectionType === 'connect' && global.dappConnectRequest?.state === DappConnectState.Info) {\n    global = clearDappConnectRequest(global);\n  } else if (connectionType === 'sendTransaction' && global.currentDappTransfer.state === TransferState.Initial) {\n    global = clearCurrentDappTransfer(global);\n  } else if (connectionType === 'signData' && global.currentDappSignData.state === SignDataState.Initial) {\n    global = clearCurrentDappSignData(global);\n  }\n  setGlobal(global);\n});\n\naddActionHandler('loadExploreSites', async (global, _, { isLandscape }) => {\n  const exploreData = await callApi('loadExploreSites', { isLandscape });\n  global = getGlobal();\n  if (areDeepEqual(exploreData, global.exploreData)) {\n    return;\n  }\n\n  global = { ...global, exploreData };\n  setGlobal(global);\n});\n\nfunction isAnyDappModalActive(global: GlobalState, connectionType: ApiDappConnectionType) {\n  return (connectionType === 'connect' && !!global.dappConnectRequest)\n    || (connectionType === 'sendTransaction' && global.currentDappTransfer.state !== TransferState.None)\n    || (connectionType === 'signData' && global.currentDappSignData.state !== SignDataState.None);\n}\n","import type { ApiSwapEstimateVariant, ApiToken } from '../../api/types';\nimport type { GlobalState } from '../../global/types';\nimport type { FeePrecision, FeeTerms } from './types';\nimport { SwapType } from '../../global/types';\n\nimport { DEFAULT_OUR_SWAP_FEE } from '../../config';\nimport { Big } from '../../lib/big.js';\nimport { bigintDivideToNumber, bigintMax } from '../bigint';\nimport { bigMax, bigMin } from '../bigNumber';\nimport { findChainConfig } from '../chain';\nimport { fromDecimal, toBig } from '../decimals';\nimport { getChainBySlug, getIsNativeToken } from '../tokens';\n\ntype ExplainSwapFeeInput = Pick<GlobalState['currentSwap'],\n'tokenInSlug' | 'networkFee' | 'realNetworkFee' | 'ourFee' | 'dieselStatus' | 'dieselFee'\n> & {\n  swapType: SwapType;\n  /** The balance of the \"in\" token blockchain's native token. Undefined means that it's unknown. */\n  nativeTokenInBalance: bigint | undefined;\n};\n\nexport type ExplainedSwapFee = {\n  /** Whether the result implies paying the fee with a diesel */\n  isGasless: boolean;\n  /**\n   * The fee that will be sent with the swap. The wallet must have it on the balance to conduct the swap.\n   * Show this in the swap form when the input amount is  the balance, but the remaining balance can't cover the\n   * full fee; show `realFee` otherwise. Undefined means that it's unknown.\n   */\n  fullFee?: {\n    precision: FeePrecision;\n    terms: FeeTerms<string>;\n    /** Only the network fee terms (like `terms` but excluding our fee) */\n    networkTerms: FeeTerms<string>;\n  };\n  /**\n   * The real fee (the full fee minus the excess). Undefined means that it's unknown. There is no need to fall back to\n   * `fullFee` when `realFee` is undefined (because it's undefined too in this case).\n   */\n  realFee?: {\n    precision: FeePrecision;\n    terms: FeeTerms<string>;\n    /** Only the network fee terms (like `terms` but excluding our fee) */\n    networkTerms: FeeTerms<string>;\n  };\n  /** The excess fee. Measured in the native token. It's always approximate. Undefined means that it's unknown. */\n  excessFee?: string;\n  shouldShowOurFee: boolean;\n};\n\ntype MaxSwapAmountInput = Pick<GlobalState['currentSwap'], 'ourFeePercent'> & {\n  swapType: SwapType;\n  /** The balance of the \"in\" token. Undefined means that it's unknown. */\n  tokenInBalance: bigint | undefined;\n  tokenIn: Pick<ApiToken, 'slug' | 'decimals'> | undefined;\n  /** The full network fee terms calculated by `explainSwapFee`. Undefined means that they're unknown. */\n  fullNetworkFee: FeeTerms<string> | undefined;\n};\n\ntype BalanceSufficientForSwapInput = MaxSwapAmountInput & {\n  /** The wallet balance of the native token of the \"in\" token chain. Undefined means that it's unknown. */\n  nativeTokenInBalance: bigint | undefined;\n  /** The \"in\" amount to swap. Undefined means that it's unspecified. */\n  amountIn: string | undefined;\n};\n\ntype CanAffordSwapVariant = {\n  variant: ApiSwapEstimateVariant;\n  tokenIn: Pick<ApiToken, 'slug' | 'decimals'> | undefined;\n  /** The balance of the \"in\" token. Undefined means that it's unknown. */\n  tokenInBalance: bigint | undefined;\n  /** The wallet balance of the native token of the \"in\" token chain. Undefined means that it's unknown. */\n  nativeTokenInBalance: bigint | undefined;\n};\n\n/**\n * Converts the swap fee data returned from API into data that is ready to be displayed in the swap form UI.\n */\nexport function explainSwapFee(input: ExplainSwapFeeInput): ExplainedSwapFee {\n  return shouldSwapBeGasless(input)\n    ? explainGaslessSwapFee(input)\n    : explainGasfullSwapFee(input);\n}\n\n/**\n * Calculates the maximum amount available for the swap.\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function getMaxSwapAmount({\n  swapType,\n  tokenInBalance,\n  tokenIn,\n  fullNetworkFee,\n  ourFeePercent,\n}: MaxSwapAmountInput): bigint | undefined {\n  if (swapType === SwapType.CrosschainToWallet || tokenInBalance === undefined) {\n    return undefined;\n  }\n\n  let maxAmount = tokenInBalance;\n\n  // For a better UX, assuming the fee is 0 when it's unknown\n  if (fullNetworkFee) {\n    if (!tokenIn) {\n      return undefined;\n    }\n\n    maxAmount -= fromDecimal(fullNetworkFee.token ?? '0', tokenIn.decimals);\n\n    if (getIsNativeToken(tokenIn.slug)) {\n      // When the \"in\" token is native, both `token` and `native` refer to the same currency, so we consider them both\n      maxAmount -= fromDecimal(fullNetworkFee.native ?? '0', tokenIn.decimals);\n    }\n  }\n\n  ourFeePercent ??= swapType === SwapType.OnChain ? DEFAULT_OUR_SWAP_FEE : 0;\n  maxAmount = bigintDivideToNumber(maxAmount, 1 + (ourFeePercent / 100));\n\n  return bigintMax(maxAmount, 0n);\n}\n\n/**\n * Decides whether the balance is sufficient to swap the amount and pay the fees.\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function isBalanceSufficientForSwap(input: BalanceSufficientForSwapInput) {\n  const {\n    swapType,\n    amountIn,\n    tokenInBalance,\n    nativeTokenInBalance,\n    tokenIn,\n    fullNetworkFee,\n  } = input;\n\n  if (swapType === SwapType.CrosschainToWallet) {\n    return true;\n  }\n\n  if (\n    amountIn === undefined\n    || !tokenIn\n    || tokenInBalance === undefined\n    || nativeTokenInBalance === undefined\n    || !fullNetworkFee\n  ) {\n    return undefined;\n  }\n\n  const nativeTokenIn = findChainConfig(getChainBySlug(tokenIn.slug))?.nativeToken;\n  if (!nativeTokenIn) {\n    return undefined;\n  }\n\n  const maxAmount = getMaxSwapAmount(input);\n  if (maxAmount === undefined) {\n    return undefined;\n  }\n\n  const swapAmountInBigint = fromDecimal(amountIn, tokenIn.decimals);\n  const networkNativeFeeBigint = fromDecimal(fullNetworkFee.native ?? '0', nativeTokenIn.decimals);\n\n  return swapAmountInBigint <= maxAmount && networkNativeFeeBigint <= nativeTokenInBalance;\n}\n\n/**\n * Decides whether the balance is sufficient for the given swap estimate variant (DEX).\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function canAffordSwapEstimateVariant(input: CanAffordSwapVariant) {\n  if (!input.tokenIn || input.nativeTokenInBalance === undefined) {\n    return undefined;\n  }\n\n  const nativeTokenIn = findChainConfig(getChainBySlug(input.tokenIn.slug))?.nativeToken;\n  if (!nativeTokenIn) {\n    return undefined;\n  }\n\n  // Try to pay with gas\n  const networkFeeBigint = fromDecimal(input.variant.networkFee, nativeTokenIn.decimals);\n  if (input.nativeTokenInBalance >= networkFeeBigint) {\n    return true;\n  }\n\n  // Otherwise, try to pay with diesel\n  if (input.variant.dieselFee) {\n    if (input.tokenInBalance === undefined) {\n      return undefined;\n    }\n    const dieselFeeBigint = fromDecimal(input.variant.dieselFee, input.tokenIn.decimals);\n    if (input.tokenInBalance >= dieselFeeBigint) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport function shouldSwapBeGasless(\n  input: Pick<ExplainSwapFeeInput, 'tokenInSlug' | 'nativeTokenInBalance' | 'networkFee' | 'dieselStatus' | 'swapType'>,\n) {\n  const isNativeIn = getIsNativeToken(input.tokenInSlug);\n  const nativeTokenBalance = getBigNativeTokenInBalance(input);\n  const isInsufficientNative = input.networkFee !== undefined && nativeTokenBalance !== undefined\n    && nativeTokenBalance.lt(input.networkFee);\n\n  return (\n    input.swapType === SwapType.OnChain\n    && isInsufficientNative\n    && !isNativeIn\n    && Boolean(input.dieselStatus) && input.dieselStatus !== 'not-available'\n  );\n}\n\n/**\n * Converts the data of a swap not involving diesel\n */\nfunction explainGasfullSwapFee(input: ExplainSwapFeeInput) {\n  const result: ExplainedSwapFee = {\n    isGasless: false,\n    excessFee: getExcessFee(input),\n    shouldShowOurFee: shouldShowOurFee(input),\n  };\n\n  const isNativeIn = getIsNativeToken(input.tokenInSlug);\n  const isExact = result.excessFee === '0';\n\n  if (input.networkFee !== undefined) {\n    const networkTerms = { native: input.networkFee };\n    result.fullFee = {\n      precision: isExact ? 'exact' : 'lessThan',\n      terms: addOurFeeToTerms(networkTerms, input.ourFee ?? '0', isNativeIn),\n      networkTerms,\n    };\n    result.realFee = result.fullFee;\n  }\n\n  if (input.realNetworkFee !== undefined) {\n    const networkTerms = { native: input.realNetworkFee };\n    result.realFee = {\n      precision: isExact ? 'exact' : 'approximate',\n      terms: addOurFeeToTerms(networkTerms, input.ourFee ?? '0', isNativeIn),\n      networkTerms,\n    };\n  }\n\n  return result;\n}\n\n/**\n * Converts the diesel of semi-diesel swap data\n */\nfunction explainGaslessSwapFee(input: ExplainSwapFeeInput): ExplainedSwapFee {\n  const nativeTokenBalance = getBigNativeTokenInBalance(input);\n  const result: ExplainedSwapFee = {\n    isGasless: true,\n    excessFee: getExcessFee(input),\n    shouldShowOurFee: shouldShowOurFee(input),\n  };\n\n  if (input.networkFee === undefined || input.dieselFee === undefined || nativeTokenBalance === undefined) {\n    return result;\n  }\n\n  const isExact = result.excessFee === '0';\n  const isStarsDiesel = input.dieselStatus === 'stars-fee';\n  const dieselKey = isStarsDiesel ? 'stars' : 'token';\n\n  const networkTerms = {\n    [dieselKey]: input.dieselFee,\n    native: nativeTokenBalance.toString(),\n  };\n  result.fullFee = {\n    precision: isExact ? 'exact' : 'lessThan',\n    terms: addOurFeeToTerms(networkTerms, input.ourFee ?? '0', false),\n    networkTerms,\n  };\n  result.realFee = result.fullFee;\n\n  if (input.realNetworkFee !== undefined) {\n    // We are sure this amount is > 0 because `shouldBeGasless` would return `false` otherwise and this function\n    // wouldn't be called.\n    const networkFeeCoveredByDiesel = Big(input.networkFee).sub(nativeTokenBalance);\n    const realFeeInDiesel = Big(input.dieselFee).div(networkFeeCoveredByDiesel).mul(input.realNetworkFee);\n    // Cover as much displayed real fee as possible with diesel, because in the excess it will return as the native token.\n    const dieselRealFee = bigMin(input.dieselFee, realFeeInDiesel);\n    // Cover the remaining real fee with the native token.\n    const nativeRealFee = bigMax(0, Big(input.realNetworkFee).sub(networkFeeCoveredByDiesel));\n\n    const realNetworkTerms = {\n      [dieselKey]: dieselRealFee.toString(),\n      native: nativeRealFee.toString(),\n    };\n    result.realFee = {\n      precision: isExact ? 'exact' : 'approximate',\n      terms: addOurFeeToTerms(realNetworkTerms, input.ourFee ?? '0', false),\n      networkTerms: realNetworkTerms,\n    };\n  }\n\n  return result;\n}\n\nfunction getBigNativeTokenInBalance(input: Pick<ExplainSwapFeeInput, 'tokenInSlug' | 'nativeTokenInBalance'>) {\n  if (!input.tokenInSlug || input.nativeTokenInBalance === undefined) {\n    return undefined;\n  }\n\n  const nativeToken = findChainConfig(getChainBySlug(input.tokenInSlug))?.nativeToken;\n  return nativeToken ? toBig(input.nativeTokenInBalance, nativeToken.decimals) : undefined;\n}\n\nfunction getExcessFee({ networkFee, realNetworkFee }: Pick<ExplainSwapFeeInput, 'networkFee' | 'realNetworkFee'>) {\n  return networkFee !== undefined && realNetworkFee !== undefined\n    ? Big(networkFee).sub(realNetworkFee).toString()\n    : undefined;\n}\n\nfunction addOurFeeToTerms(terms: FeeTerms<string>, ourFee: string, isOurFeeNative: boolean) {\n  return {\n    ...terms,\n    native: isOurFeeNative ? Big(terms.native ?? '0').add(ourFee).toString() : terms.native,\n    token: isOurFeeNative ? terms.token : Big(terms.token ?? '0').add(ourFee).toString(),\n  };\n}\n\nfunction shouldShowOurFee(input: Pick<ExplainSwapFeeInput, 'swapType'>) {\n  return input.swapType === SwapType.OnChain;\n}\n","import type { BigSource } from '../lib/big.js';\n\nimport { Big } from '../lib/big.js';\n\nexport function bigMin<T1 extends BigSource, T2 extends BigSource>(value0: T1, value1: T2): T1 | T2 {\n  return Big(value0).lt(value1) ? value0 : value1;\n}\n\nexport function bigMax<T1 extends BigSource, T2 extends BigSource>(value0: T1, value1: T2): T1 | T2 {\n  return Big(value0).gt(value1) ? value0 : value1;\n}\n","import type { ApiEthenaStakingState, ApiJettonStakingState, ApiTransactionError } from '../../../api/types';\nimport { ApiCommonError } from '../../../api/types';\nimport { StakingState } from '../../types';\n\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { getTonStakingFees } from '../../../util/fee/getTonOperationFees';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { logDebugError } from '../../../util/logs';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { pause } from '../../../util/schedulers';\nimport { getIsActiveStakingState, getIsLongUnstake } from '../../../util/staking';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { ApiHardwareBlindSigningNotEnabled, ApiUserRejectsError } from '../../../api/errors';\nimport { closeAllOverlays } from '../../helpers/misc';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearCurrentStaking,\n  clearIsPinAccepted,\n  resetHardware,\n  setIsPinAccepted,\n  updateAccountStaking,\n  updateAccountState,\n  updateCurrentStaking,\n} from '../../reducers';\nimport { selectAccountStakingState, selectAccountStakingStatesBySlug, selectIsHardwareAccount } from '../../selectors';\nimport { switchAccount } from './auth';\n\nconst MODAL_CLOSING_DELAY = 50;\n\naddActionHandler('startStaking', (global, actions, payload) => {\n  const isOpen = global.currentStaking.state !== StakingState.None;\n  const { tokenSlug } = payload || {};\n\n  if (tokenSlug) {\n    const stakingState = selectAccountStakingStatesBySlug(global, global.currentAccountId!)[tokenSlug];\n    if (stakingState) {\n      global = getGlobal();\n      global = updateAccountStaking(global, global.currentAccountId!, { stakingId: stakingState.id });\n      setGlobal(global);\n\n      global = getGlobal();\n    }\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET && !isOpen) {\n    callActionInMain('startStaking', payload);\n    return;\n  }\n\n  const state = StakingState.StakeInitial;\n\n  setGlobal(updateCurrentStaking(global, {\n    state,\n    error: undefined,\n  }));\n});\n\naddActionHandler('startUnstaking', (global, actions, payload) => {\n  const isOpen = global.currentStaking.state !== StakingState.None;\n  const { stakingId } = payload || {};\n\n  if (stakingId) {\n    global = getGlobal();\n    global = updateAccountStaking(global, global.currentAccountId!, { stakingId });\n    setGlobal(global);\n\n    global = getGlobal();\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET && !isOpen) {\n    callActionInMain('startUnstaking', payload);\n    return;\n  }\n\n  const state = StakingState.UnstakeInitial;\n\n  setGlobal(updateCurrentStaking(global, {\n    state,\n    error: undefined,\n  }));\n});\n\naddActionHandler('fetchStakingFee', async (global, actions, payload) => {\n  const { amount } = payload;\n  const { currentAccountId } = global;\n\n  if (!currentAccountId) {\n    return;\n  }\n\n  const state = selectAccountStakingState(global, currentAccountId);\n\n  const result = await callApi(\n    'checkStakeDraft',\n    currentAccountId,\n    amount,\n    state,\n  );\n  if (!result || 'error' in result) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, {\n    fee: result.fee,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingInitial', async (global, actions, payload) => {\n  const { isUnstaking, amount } = payload ?? {};\n  const { currentAccountId } = global;\n\n  if (!currentAccountId) {\n    return;\n  }\n\n  setGlobal(updateCurrentStaking(global, { isLoading: true, error: undefined }));\n\n  const state = selectAccountStakingState(global, currentAccountId);\n\n  if (isUnstaking) {\n    const result = await callApi('checkUnstakeDraft', currentAccountId, amount!, state);\n    global = getGlobal();\n    global = updateCurrentStaking(global, { isLoading: false });\n\n    if (result) {\n      if ('error' in result) {\n        global = updateCurrentStaking(global, { error: result.error });\n      } else {\n        if (selectIsHardwareAccount(global)) {\n          global = resetHardware(global);\n          global = updateCurrentStaking(global, { state: StakingState.UnstakeConnectHardware });\n        } else {\n          global = updateCurrentStaking(global, { state: StakingState.UnstakePassword });\n        }\n\n        global = updateCurrentStaking(global, {\n          fee: result.fee,\n          amount,\n          error: undefined,\n          tokenAmount: result.tokenAmount,\n        });\n      }\n    }\n  } else {\n    const result = await callApi(\n      'checkStakeDraft',\n      currentAccountId,\n      amount!,\n      state,\n    );\n    global = getGlobal();\n    global = updateCurrentStaking(global, { isLoading: false });\n\n    if (result) {\n      if ('error' in result) {\n        global = updateCurrentStaking(global, { error: result.error });\n      } else {\n        if (selectIsHardwareAccount(global)) {\n          global = resetHardware(global);\n          global = updateCurrentStaking(global, { state: StakingState.StakeConnectHardware });\n        } else {\n          global = updateCurrentStaking(global, { state: StakingState.StakePassword });\n        }\n\n        global = updateCurrentStaking(global, {\n          fee: result.fee,\n          amount,\n          error: undefined,\n        });\n      }\n    }\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingPassword', async (global, actions, payload) => {\n  const { password, isUnstaking } = payload;\n  const { amount, tokenAmount } = global.currentStaking;\n  const { currentAccountId } = global;\n\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentStaking(getGlobal(), { error: 'Wrong password, please try again.' }));\n\n    return;\n  }\n\n  global = getGlobal();\n\n  const state = selectAccountStakingState(global, currentAccountId!);\n\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n\n  global = updateCurrentStaking(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n\n  await vibrateOnSuccess(true);\n  global = getGlobal();\n\n  if (isUnstaking) {\n    const unstakeAmount = state.type === 'nominators' ? state.balance : tokenAmount!;\n    const result = await callApi(\n      'submitUnstake',\n      global.currentAccountId!,\n      password,\n      unstakeAmount,\n      state,\n      getTonStakingFees(state.type).unstake.real,\n    );\n\n    const isLongUnstakeRequested = getIsLongUnstake(state, unstakeAmount);\n\n    global = getGlobal();\n    global = updateAccountState(global, currentAccountId!, { isLongUnstakeRequested });\n    global = updateCurrentStaking(global, { isLoading: false });\n    setGlobal(global);\n\n    if (!result) {\n      void vibrateOnError();\n      actions.showDialog({\n        message: 'Unstaking was unsuccessful. Try again later.',\n      });\n      global = getGlobal();\n\n      if (getDoesUsePinPad()) {\n        global = clearIsPinAccepted(global);\n      }\n    } else {\n      void vibrateOnSuccess();\n      global = getGlobal();\n      global = updateCurrentStaking(global, { state: StakingState.UnstakeComplete });\n    }\n  } else {\n    const result = await callApi(\n      'submitStake',\n      global.currentAccountId!,\n      password,\n      amount!,\n      state,\n      getTonStakingFees(state.type).stake.real,\n    );\n\n    global = getGlobal();\n    global = updateCurrentStaking(global, { isLoading: false });\n    setGlobal(global);\n\n    if (!result) {\n      void vibrateOnError();\n      actions.showDialog({\n        message: 'Staking was unsuccessful. Try again later.',\n      });\n\n      global = getGlobal();\n      if (getDoesUsePinPad()) {\n        global = clearIsPinAccepted(global);\n      }\n    } else {\n      void vibrateOnSuccess();\n      global = getGlobal();\n      global = updateCurrentStaking(global, { state: StakingState.StakeComplete });\n    }\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingHardware', async (global, actions, payload) => {\n  const { isUnstaking } = payload || {};\n  const { amount, tokenAmount } = global.currentStaking;\n  const { currentAccountId } = global;\n\n  const state = selectAccountStakingState(global, currentAccountId!);\n\n  global = updateCurrentStaking(global, {\n    isLoading: true,\n    error: undefined,\n    state: isUnstaking\n      ? StakingState.UnstakeConfirmHardware\n      : StakingState.StakeConfirmHardware,\n  });\n  setGlobal(global);\n\n  const ledgerApi = await import('../../../util/ledger');\n  global = getGlobal();\n\n  let result: string | { error: ApiTransactionError } | undefined;\n  const accountId = global.currentAccountId!;\n\n  try {\n    if (isUnstaking) {\n      const stakingBalance = state.balance;\n      const unstakeAmount = state.type === 'nominators' ? stakingBalance : tokenAmount!;\n\n      result = await ledgerApi.submitLedgerUnstake(\n        accountId,\n        state,\n        unstakeAmount,\n        getTonStakingFees(state.type).unstake.real,\n      );\n\n      const isLongUnstakeRequested = getIsLongUnstake(state, unstakeAmount);\n\n      global = getGlobal();\n      global = updateAccountState(global, currentAccountId!, { isLongUnstakeRequested });\n      setGlobal(global);\n    } else {\n      result = await ledgerApi.submitLedgerStake(\n        accountId,\n        amount!,\n        state,\n        getTonStakingFees(state.type).stake.real,\n      );\n    }\n  } catch (err: any) {\n    if (err instanceof ApiHardwareBlindSigningNotEnabled) {\n      setGlobal(updateCurrentStaking(getGlobal(), {\n        isLoading: false,\n        error: '$hardware_blind_sign_not_enabled_internal',\n      }));\n      return;\n    } else if (err instanceof ApiUserRejectsError) {\n      setGlobal(updateCurrentStaking(getGlobal(), {\n        isLoading: false,\n        error: 'Canceled by the user',\n      }));\n      return;\n    }\n    logDebugError('submitStakingHardware', err);\n  }\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, { isLoading: false });\n  setGlobal(global);\n\n  if (!result) {\n    void vibrateOnError();\n    actions.showDialog({\n      message: isUnstaking\n        ? 'Unstaking was unsuccessful. Try again later.'\n        : 'Staking was unsuccessful. Try again later.',\n    });\n  } else if (typeof result !== 'string' && 'error' in result) {\n    void vibrateOnError();\n    actions.showError({ error: result.error });\n  } else {\n    void vibrateOnSuccess();\n    global = getGlobal();\n    global = updateCurrentStaking(global, {\n      state: isUnstaking ? StakingState.UnstakeComplete : StakingState.StakeComplete,\n    });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('clearStakingError', (global) => {\n  setGlobal(updateCurrentStaking(global, { error: undefined }));\n});\n\naddActionHandler('cancelStaking', (global) => {\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n\n  global = clearCurrentStaking(global);\n  setGlobal(global);\n});\n\naddActionHandler('setStakingScreen', (global, actions, payload) => {\n  const { state } = payload;\n\n  setGlobal(updateCurrentStaking(global, { state }));\n});\n\naddActionHandler('fetchStakingHistory', async (global) => {\n  const stakingHistory = await callApi('getStakingHistory', global.currentAccountId!);\n\n  if (!stakingHistory) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateAccountState(global, global.currentAccountId!, { stakingHistory }, true);\n  setGlobal(global);\n});\n\naddActionHandler('openAnyAccountStakingInfo', async (global, actions, { accountId, network, stakingId }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openAnyAccountStakingInfo', { accountId, network, stakingId });\n    return;\n  }\n\n  await Promise.all([\n    closeAllOverlays(),\n    switchAccount(global, accountId, network),\n  ]);\n\n  actions.changeCurrentStaking({ stakingId });\n  actions.openStakingInfo();\n});\n\n// Should be called only when you're sure that the staking is active. Otherwise, call `openStakingInfoOrStart`.\naddActionHandler('openStakingInfo', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openStakingInfo');\n    return;\n  }\n\n  global = { ...global, isStakingInfoModalOpen: true };\n  setGlobal(global);\n});\n\naddActionHandler('closeStakingInfo', (global) => {\n  global = { ...global, isStakingInfoModalOpen: undefined };\n  setGlobal(global);\n});\n\naddActionHandler('changeCurrentStaking', async (global, actions, { stakingId, shouldReopenModal }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET && shouldReopenModal) {\n    callActionInMain('changeCurrentStaking', { stakingId, shouldReopenModal });\n    return;\n  }\n\n  if (shouldReopenModal) {\n    await pause(MODAL_CLOSING_DELAY);\n  }\n\n  global = getGlobal();\n  global = updateAccountStaking(global, global.currentAccountId!, { stakingId });\n  setGlobal(global);\n\n  if (shouldReopenModal) {\n    actions.openStakingInfoOrStart();\n  }\n});\n\naddActionHandler('startStakingClaim', (global, actions, payload) => {\n  const { stakingId } = payload || {};\n\n  if (stakingId) {\n    global = getGlobal();\n    global = updateAccountStaking(global, global.currentAccountId!, { stakingId });\n    setGlobal(global);\n\n    global = getGlobal();\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('startStakingClaim', payload);\n    return;\n  }\n\n  if (selectIsHardwareAccount(global)) {\n    global = resetHardware(global);\n    global = updateCurrentStaking(global, { state: StakingState.ClaimConnectHardware });\n  } else {\n    global = updateCurrentStaking(global, { state: StakingState.ClaimPassword });\n  }\n  setGlobal(global);\n});\n\naddActionHandler('cancelStakingClaim', (global) => {\n  global = updateCurrentStaking(global, { state: StakingState.None });\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingClaim', async (global, actions, { password }) => {\n  const accountId = global.currentAccountId!;\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentStaking(getGlobal(), { error: 'Wrong password, please try again.' }));\n    return;\n  }\n  global = getGlobal();\n\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n\n  global = updateCurrentStaking(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n  await vibrateOnSuccess(true);\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitStakingClaim', { password });\n    return;\n  }\n\n  global = getGlobal();\n\n  const stakingState = selectAccountStakingState(global, accountId) as ApiEthenaStakingState | ApiJettonStakingState;\n  const isEthenaStaking = stakingState.type === 'ethena';\n\n  const result = await callApi(\n    'submitStakingClaimOrUnlock',\n    accountId,\n    password,\n    stakingState,\n    getTonStakingFees(stakingState.type).claim?.real,\n  );\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, { isLoading: false });\n  setGlobal(global);\n\n  if (!result || 'error' in result) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n    }\n    void vibrateOnError();\n    actions.showError({ error: result?.error });\n    return;\n  } else {\n    void vibrateOnSuccess();\n  }\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, {\n    state: isEthenaStaking ? StakingState.ClaimComplete : StakingState.None,\n  });\n  setGlobal(global);\n\n  if (IS_DELEGATING_BOTTOM_SHEET) {\n    callActionInNative('setStakingScreen', {\n      state: isEthenaStaking ? StakingState.ClaimComplete : StakingState.None,\n    });\n  }\n});\n\naddActionHandler('submitStakingClaimHardware', async (global, actions) => {\n  global = updateCurrentStaking(global, {\n    isLoading: true,\n    error: undefined,\n    state: StakingState.ClaimConfirmHardware,\n  });\n  setGlobal(global);\n\n  const ledgerApi = await import('../../../util/ledger');\n  global = getGlobal();\n\n  const accountId = global.currentAccountId!;\n  const stakingState = selectAccountStakingState(global, accountId) as ApiJettonStakingState | ApiEthenaStakingState;\n  const isEthenaStaking = stakingState.type === 'ethena';\n\n  let result: string | { error: ApiTransactionError } | undefined;\n\n  try {\n    result = await ledgerApi.submitLedgerStakingClaimOrUnlock(\n      accountId,\n      stakingState,\n      getTonStakingFees(stakingState.type).claim?.real,\n    );\n  } catch (err: any) {\n    if (err instanceof ApiHardwareBlindSigningNotEnabled) {\n      setGlobal(updateCurrentStaking(getGlobal(), {\n        isLoading: false,\n        error: '$hardware_blind_sign_not_enabled_internal',\n      }));\n      return;\n    } else if (err instanceof ApiUserRejectsError) {\n      setGlobal(updateCurrentStaking(getGlobal(), {\n        isLoading: false,\n        error: 'Canceled by the user',\n      }));\n      return;\n    }\n    logDebugError('submitStakingClaimHardware', err);\n  }\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, { isLoading: false });\n  setGlobal(global);\n\n  if (!result) {\n    actions.showError({ error: ApiCommonError.Unexpected });\n  } else if (typeof result === 'object' && 'error' in result) {\n    actions.showError({ error: result.error });\n  } else {\n    global = getGlobal();\n    global = updateCurrentStaking(global, {\n      state: isEthenaStaking ? StakingState.ClaimComplete : StakingState.None,\n    });\n    setGlobal(global);\n  }\n});\n\n// Opens the staking info modal if the modal is available. Otherwise, opens the staking start modal.\naddActionHandler('openStakingInfoOrStart', (global, actions) => {\n  if (!global.currentAccountId) {\n    return;\n  }\n\n  const stakingState = selectAccountStakingState(global, global.currentAccountId);\n\n  if (getIsActiveStakingState(stakingState)) {\n    actions.openStakingInfo();\n  } else {\n    actions.startStaking();\n  }\n});\n","import type { ApiCheckTransactionDraftResult, ApiSubmitTransferWithDieselResult } from '../../../api/chains/ton/types';\nimport type { ApiSubmitTransferOptions, ApiSubmitTransferResult } from '../../../api/methods/types';\nimport type {\n  ApiChain,\n  ApiSwapActivity,\n  ApiSwapBuildRequest,\n  ApiSwapCexCreateTransactionRequest,\n  ApiSwapDexLabel,\n  ApiSwapEstimateResponse,\n  ApiSwapEstimateVariant,\n  ApiSwapHistoryItem,\n} from '../../../api/types';\nimport type {\n  AssetPairs,\n  GlobalState,\n} from '../../types';\nimport { ApiCommonError } from '../../../api/types';\nimport {\n  ActiveTab,\n  SwapErrorType,\n  SwapInputSource,\n  SwapState,\n  SwapType,\n} from '../../types';\n\nimport {\n  DEFAULT_SWAP_FIRST_TOKEN_SLUG,\n  DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  TONCOIN,\n  TRX_SWAP_COUNT_FEE_ADDRESS,\n} from '../../../config';\nimport { Big } from '../../../lib/big.js';\nimport { parseTxId } from '../../../util/activities';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { findChainConfig, getChainConfig } from '../../../util/chain';\nimport { fromDecimal, roundDecimal, toDecimal } from '../../../util/decimals';\nimport { canAffordSwapEstimateVariant, shouldSwapBeGasless } from '../../../util/fee/swapFee';\nimport generateUniqueId from '../../../util/generateUniqueId';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { buildCollectionByKey, pick } from '../../../util/iteratees';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { pause, waitFor } from '../../../util/schedulers';\nimport { getChainBySlug, getIsTonToken, getNativeToken } from '../../../util/tokens';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../..';\nimport { resolveSwapAssetId } from '../../helpers';\nimport {\n  getSwapEstimateResetParams,\n  isSwapEstimateInputEqual,\n  isSwapFormFilled,\n  shouldAvoidSwapEstimation,\n} from '../../helpers/swap';\nimport {\n  clearCurrentSwap,\n  clearIsPinAccepted,\n  setIsPinAccepted,\n  updateAccountState,\n  updateCurrentSwap,\n} from '../../reducers';\nimport {\n  selectAccount,\n  selectAccountState,\n  selectCurrentAccount,\n  selectCurrentAccountTokenBalance,\n  selectCurrentSwapTokenIn,\n  selectCurrentSwapTokenOut,\n  selectCurrentToncoinBalance,\n  selectIsMultichainAccount,\n  selectSwapType,\n} from '../../selectors';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\n\nconst pairsCache: Record<string, { timestamp: number }> = {};\n\nconst CACHE_DURATION = 15 * 60 * 1000; // 15 minutes\nconst WAIT_FOR_CHANGELLY = 5 * 1000;\nconst CLOSING_BOTTOM_SHEET_DURATION = 100; // Like in `useDelegatingBottomSheet`\n\nconst SERVER_ERRORS_MAP = {\n  'Insufficient liquidity': SwapErrorType.NotEnoughLiquidity,\n  'Tokens must be different': SwapErrorType.InvalidPair,\n  'Asset not found': SwapErrorType.InvalidPair,\n  'Pair not found': SwapErrorType.InvalidPair,\n  'Too small amount': SwapErrorType.TooSmallAmount,\n};\n\nfunction buildSwapBuildRequest(global: GlobalState): ApiSwapBuildRequest {\n  const {\n    currentDexLabel,\n    amountIn,\n    amountOut,\n    amountOutMin,\n    slippage,\n    networkFee,\n    swapFee,\n    ourFee,\n    dieselFee,\n    realNetworkFee,\n  } = global.currentSwap;\n\n  const tokenIn = selectCurrentSwapTokenIn(global)!;\n  const tokenOut = selectCurrentSwapTokenOut(global)!;\n  const from = resolveSwapAssetId(tokenIn);\n  const to = resolveSwapAssetId(tokenOut);\n  const fromAmount = amountIn!;\n  const toAmount = amountOut!;\n  const account = selectAccount(global, global.currentAccountId!);\n  const nativeTokenIn = findChainConfig(getChainBySlug(tokenIn.slug))?.nativeToken;\n  const nativeTokenInBalance = nativeTokenIn ? selectCurrentAccountTokenBalance(global, nativeTokenIn.slug) : undefined;\n  const swapType = selectSwapType(global);\n\n  return {\n    from,\n    to,\n    fromAmount,\n    toAmount,\n    toMinAmount: amountOutMin!,\n    slippage,\n    fromAddress: (account?.addressByChain[tokenIn.chain as ApiChain] || account?.addressByChain.ton)!,\n    shouldTryDiesel: shouldSwapBeGasless({ ...global.currentSwap, swapType, nativeTokenInBalance }),\n    dexLabel: currentDexLabel!,\n    networkFee: realNetworkFee ?? networkFee!,\n    swapFee: swapFee!,\n    ourFee: ourFee!,\n    dieselFee,\n  };\n}\n\nfunction buildSwapEstimates(estimate: ApiSwapEstimateResponse): ApiSwapEstimateVariant[] {\n  const bestEstimate: ApiSwapEstimateVariant = {\n    ...pick(estimate, [\n      'fromAmount',\n      'toAmount',\n      'toMinAmount',\n      'impact',\n      'dexLabel',\n      'networkFee',\n      'realNetworkFee',\n      'swapFee',\n      'swapFeePercent',\n      'ourFee',\n      'dieselFee',\n      'networkFee',\n    ]),\n  };\n\n  const result: ApiSwapEstimateVariant[] = [\n    bestEstimate,\n    ...(estimate.other ?? []),\n  ];\n\n  return result.sort((a, b) => a.dexLabel.localeCompare(b.dexLabel));\n}\n\nfunction processNativeMaxSwap(global: GlobalState) {\n  const tokenIn = selectCurrentSwapTokenIn(global)!;\n  let fromAmount = global.currentSwap.amountIn ?? '0';\n  let isFromAmountMax = false;\n\n  if (\n    global.currentSwap.amountIn\n    && selectSwapType(global) === SwapType.OnChain\n    && global.currentSwap.inputSource === SwapInputSource.In\n    && global.currentSwap.isMaxAmount\n  ) {\n    const tokenBalance = selectCurrentAccountTokenBalance(global, tokenIn.slug);\n    fromAmount = toDecimal(tokenBalance, tokenIn.decimals);\n    isFromAmountMax = true;\n  }\n  return { fromAmount, isFromAmountMax };\n}\n\nfunction getSupportedChains(global: GlobalState) {\n  return Object.keys(selectAccount(global, global.currentAccountId!)?.addressByChain || { ton: true }) as ApiChain[];\n}\n\naddActionHandler('startSwap', async (global, actions, payload) => {\n  const isOpen = global.currentSwap.state !== SwapState.None;\n  if (IS_DELEGATING_BOTTOM_SHEET && isOpen) {\n    callActionInNative('cancelSwap');\n    await pause(CLOSING_BOTTOM_SHEET_DURATION);\n    global = getGlobal();\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('startSwap', payload);\n    return;\n  }\n\n  const { state } = payload ?? {};\n  const isPortrait = getIsPortrait();\n\n  const requiredState = state || (isPortrait ? SwapState.Initial : SwapState.None);\n\n  global = updateCurrentSwap(global, {\n    ...payload,\n    state: requiredState,\n    swapId: generateUniqueId(),\n    inputSource: SwapInputSource.In,\n  });\n  setGlobal(global);\n\n  if (!isPortrait) {\n    actions.setLandscapeActionsActiveTabIndex({ index: ActiveTab.Swap });\n  }\n});\n\naddActionHandler('setDefaultSwapParams', (global, actions, payload) => {\n  let { tokenInSlug: requiredTokenInSlug, tokenOutSlug: requiredTokenOutSlug } = payload ?? {};\n  const { withResetAmount } = payload ?? {};\n\n  requiredTokenInSlug = requiredTokenInSlug || DEFAULT_SWAP_FIRST_TOKEN_SLUG;\n  requiredTokenOutSlug = requiredTokenOutSlug || DEFAULT_SWAP_SECOND_TOKEN_SLUG;\n  if (\n    global.currentSwap.tokenInSlug === requiredTokenInSlug\n    && global.currentSwap.tokenOutSlug === requiredTokenOutSlug\n    && !withResetAmount\n  ) {\n    return;\n  }\n\n  global = updateCurrentSwap(global, {\n    tokenInSlug: requiredTokenInSlug,\n    tokenOutSlug: requiredTokenOutSlug,\n    inputSource: SwapInputSource.In,\n    ...(withResetAmount ? { amountIn: undefined, amountOut: undefined } : undefined),\n  });\n  setGlobal(global);\n});\n\naddActionHandler('cancelSwap', (global, actions, { shouldReset } = {}) => {\n  if (shouldReset) {\n    const { tokenInSlug, tokenOutSlug } = global.currentSwap;\n\n    global = clearCurrentSwap(global);\n    global = updateCurrentSwap(global, {\n      tokenInSlug,\n      tokenOutSlug,\n      amountIn: undefined,\n      amountOut: undefined,\n      inputSource: SwapInputSource.In,\n    });\n\n    setGlobal(global);\n    return;\n  }\n\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n  global = updateCurrentSwap(global, {\n    state: SwapState.None,\n    swapId: undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('submitSwap', async (global, actions, { password }) => {\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentSwap(\n      getGlobal(),\n      { error: 'Wrong password, please try again.' },\n    ));\n\n    return;\n  }\n\n  global = getGlobal();\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n  global = updateCurrentSwap(global, {\n    isLoading: true,\n    shouldResetOnClose: undefined,\n    error: undefined,\n  });\n  setGlobal(global);\n  await vibrateOnSuccess(true);\n\n  const swapBuildRequest = buildSwapBuildRequest(global);\n  const buildResult = await callApi(\n    'swapBuildTransfer', global.currentAccountId!, password, swapBuildRequest,\n  );\n  global = getGlobal();\n\n  if (!buildResult || 'error' in buildResult) {\n    if (getDoesUsePinPad()) {\n      global = clearIsPinAccepted(global);\n    }\n    void vibrateOnError();\n    global = updateCurrentSwap(global, {\n      shouldResetOnClose: true,\n      isLoading: false,\n    });\n    setGlobal(global);\n\n    actions.showError({ error: buildResult?.error });\n\n    return;\n  }\n\n  const swapHistoryItem: ApiSwapHistoryItem = {\n    id: buildResult.id,\n    timestamp: Date.now(),\n    status: 'pending',\n    from: swapBuildRequest.from,\n    fromAmount: swapBuildRequest.fromAmount,\n    to: swapBuildRequest.to,\n    toAmount: swapBuildRequest.toAmount,\n    networkFee: global.currentSwap.realNetworkFee ?? global.currentSwap.networkFee!,\n    swapFee: global.currentSwap.swapFee!,\n    ourFee: global.currentSwap.ourFee,\n    hashes: [],\n  };\n\n  global = updateCurrentSwap(global, {\n    tokenInSlug: undefined,\n    tokenOutSlug: undefined,\n    amountIn: undefined,\n    amountOut: undefined,\n    isLoading: false,\n    state: SwapState.Complete,\n    shouldResetOnClose: true,\n  });\n  setGlobal(global);\n  void vibrateOnSuccess();\n\n  const result = await callApi(\n    'swapSubmit',\n    global.currentAccountId!,\n    password,\n    buildResult.transfers,\n    swapHistoryItem,\n    swapBuildRequest.shouldTryDiesel,\n  );\n\n  if (!result || 'error' in result) {\n    global = getGlobal();\n    global = updateCurrentSwap(global, { shouldResetOnClose: true });\n    if (getDoesUsePinPad()) {\n      global = clearIsPinAccepted(global);\n    }\n\n    setGlobal(global);\n    void vibrateOnError();\n\n    actions.showError({ error: result?.error });\n  } else {\n    global = getGlobal();\n    global = updateCurrentSwap(global, {\n      activityId: result.activityId,\n    });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('submitSwapCex', async (global, actions, { password }) => {\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentSwap(\n      getGlobal(),\n      { error: 'Wrong password, please try again.' },\n    ));\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentSwap(global, {\n    isLoading: true,\n    error: undefined,\n    shouldResetOnClose: undefined,\n  });\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n  setGlobal(global);\n\n  await vibrateOnSuccess(true);\n  global = getGlobal();\n\n  const isMutlichainAccount = selectIsMultichainAccount(global, global.currentAccountId!);\n  const account = selectCurrentAccount(global);\n  const supportedChains = getSupportedChains(global);\n  const tokenIn = global.swapTokenInfo.bySlug[global.currentSwap.tokenInSlug!];\n  const tokenOut = global.swapTokenInfo.bySlug[global.currentSwap.tokenOutSlug!];\n  const shouldSendTonTransaction = tokenIn.chain === 'ton';\n  const shouldSendTronTransaction = isMutlichainAccount && tokenIn.chain === 'tron';\n  const shouldSendTransaction = shouldSendTonTransaction || shouldSendTronTransaction;\n  const shouldSendTokenToExternalWallet = isMutlichainAccount\n    ? supportedChains.includes(tokenIn.chain as ApiChain)\n    : tokenIn.chain === 'ton';\n\n  const tonAddress = account!.addressByChain.ton!;\n  const toAddress = account?.addressByChain[tokenOut.chain as ApiChain] ?? global.currentSwap.toAddress!;\n\n  const swapBuildRequest = buildSwapBuildRequest(global);\n  const swapTransactionRequest: ApiSwapCexCreateTransactionRequest = {\n    ...pick(swapBuildRequest, ['from', 'fromAmount', 'to', 'swapFee', 'networkFee']),\n    fromAddress: tonAddress,\n    toAddress,\n  };\n\n  const swapItem = await callApi(\n    'swapCexCreateTransaction',\n    global.currentAccountId!,\n    password,\n    swapTransactionRequest,\n  );\n\n  global = getGlobal();\n\n  if (!swapItem) {\n    global = updateCurrentSwap(global, {\n      isLoading: false,\n      shouldResetOnClose: true,\n    });\n    if (getDoesUsePinPad()) {\n      global = clearIsPinAccepted(global);\n    }\n    void vibrateOnError();\n    setGlobal(global);\n\n    actions.showError({ error: ApiCommonError.Unexpected });\n\n    return;\n  }\n\n  global = updateCurrentSwap(global, {\n    isLoading: false,\n    state: shouldSendTokenToExternalWallet ? SwapState.Complete : SwapState.WaitTokens,\n    activityId: swapItem.activity.id,\n    payinAddress: swapItem.swap.cex!.payinAddress,\n    payoutAddress: swapItem.swap.cex!.payoutAddress,\n    payinExtraId: swapItem.swap.cex!.payinExtraId,\n    shouldResetOnClose: true,\n  });\n  setGlobal(global);\n  void vibrateOnSuccess();\n\n  if (shouldSendTransaction) {\n    global = getGlobal();\n    const transferOptions: ApiSubmitTransferOptions = {\n      password,\n      accountId: global.currentAccountId!,\n      fee: fromDecimal(swapItem.swap.networkFee, tokenIn.decimals),\n      amount: fromDecimal(swapItem.swap.fromAmount, tokenIn.decimals),\n      toAddress: swapItem.swap.cex!.payinAddress,\n      tokenAddress: isMutlichainAccount ? tokenIn.tokenAddress : undefined,\n    };\n\n    await pause(WAIT_FOR_CHANGELLY);\n\n    let transferResult: ((ApiSubmitTransferResult | ApiSubmitTransferWithDieselResult) & { txId?: string }) | undefined;\n\n    if (shouldSendTonTransaction) {\n      transferResult = await callApi('swapCexSubmit', 'ton', transferOptions, swapItem.swap.id);\n    } else if (shouldSendTronTransaction) {\n      transferResult = await callApi('swapCexSubmit', 'tron', transferOptions, swapItem.swap.id);\n    }\n\n    if (!transferResult || 'error' in transferResult) {\n      global = getGlobal();\n      global = updateCurrentSwap(global, { shouldResetOnClose: true });\n      if (getDoesUsePinPad()) {\n        global = clearIsPinAccepted(global);\n      }\n\n      setGlobal(global);\n      void vibrateOnError();\n      actions.showError({ error: transferResult?.error });\n    }\n  }\n});\n\naddActionHandler('switchSwapTokens', (global) => {\n  const {\n    tokenInSlug, tokenOutSlug, amountIn, amountOut,\n  } = global.currentSwap;\n\n  global = updateCurrentSwap(global, {\n    isMaxAmount: false,\n    amountIn: amountOut,\n    amountOut: amountIn,\n    tokenInSlug: tokenOutSlug,\n    tokenOutSlug: tokenInSlug,\n    inputSource: SwapInputSource.In,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapTokenIn', (global, actions, { tokenSlug: newTokenInSlug }) => {\n  const {\n    amountIn,\n    amountOut,\n    tokenInSlug,\n    tokenOutSlug,\n  } = global.currentSwap;\n  const newTokenIn = global.swapTokenInfo.bySlug[newTokenInSlug];\n  const adjustedAmountIn = amountIn ? roundDecimal(amountIn, newTokenIn.decimals) : amountIn;\n\n  // Don't set the same token in both inputs\n  const newTokenOutSlug = newTokenInSlug === tokenOutSlug ? tokenInSlug : tokenOutSlug;\n  const newTokenOut = newTokenOutSlug ? global.swapTokenInfo.bySlug[newTokenOutSlug] : undefined;\n  const adjustedAmountOut = amountOut && newTokenOut ? roundDecimal(amountOut, newTokenOut.decimals) : amountOut;\n\n  global = updateCurrentSwap(global, {\n    amountIn: adjustedAmountIn === '0' ? undefined : adjustedAmountIn,\n    amountOut: adjustedAmountOut === '0' ? undefined : adjustedAmountOut,\n    tokenInSlug: newTokenInSlug,\n    tokenOutSlug: newTokenOutSlug,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapTokenOut', (global, actions, { tokenSlug: newTokenOutSlug }) => {\n  const {\n    amountIn,\n    amountOut,\n    tokenInSlug,\n    tokenOutSlug,\n  } = global.currentSwap;\n  const newTokenOut = global.swapTokenInfo.bySlug[newTokenOutSlug];\n  const adjustedAmountOut = amountOut ? roundDecimal(amountOut, newTokenOut.decimals) : amountOut;\n\n  // Don't set the same token in both inputs\n  const newTokenInSlug = newTokenOutSlug === tokenInSlug ? tokenOutSlug : tokenInSlug;\n  const newTokenIn = newTokenInSlug ? global.swapTokenInfo.bySlug[newTokenInSlug] : undefined;\n  const adjustedAmountIn = amountIn && newTokenIn ? roundDecimal(amountIn, newTokenIn.decimals) : amountIn;\n\n  global = updateCurrentSwap(global, {\n    amountOut: adjustedAmountOut === '0' ? undefined : adjustedAmountOut,\n    amountIn: adjustedAmountIn === '0' ? undefined : adjustedAmountIn,\n    tokenOutSlug: newTokenOutSlug,\n    tokenInSlug: newTokenInSlug,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapAmountIn', (global, actions, { amount, isMaxAmount = false }) => {\n  global = updateCurrentSwap(global, {\n    amountIn: amount,\n    isMaxAmount,\n    inputSource: SwapInputSource.In,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapAmountOut', (global, actions, { amount }) => {\n  global = updateCurrentSwap(global, {\n    amountOut: amount,\n    isMaxAmount: false,\n    inputSource: SwapInputSource.Out,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSlippage', (global, actions, { slippage }) => {\n  return updateCurrentSwap(global, { slippage });\n});\n\naddActionHandler('estimateSwap', async () => {\n  await estimateSwapConcurrently(async (global, shouldStop) => {\n    const { tokenInSlug, tokenOutSlug } = global.currentSwap;\n\n    if (tokenInSlug) {\n      await loadSwapPairs(tokenInSlug);\n\n      if (shouldStop()) return;\n      global = getGlobal();\n    }\n\n    if (tokenInSlug && tokenOutSlug) {\n      const isPairValid = global.swapPairs?.bySlug?.[tokenInSlug]?.[tokenOutSlug];\n      if (!isPairValid) {\n        return {\n          ...getSwapEstimateResetParams(global),\n          errorType: SwapErrorType.InvalidPair,\n        };\n      }\n    }\n\n    if (!isSwapFormFilled(global)) {\n      return getSwapEstimateResetParams(global);\n    }\n\n    if (selectSwapType(global) === SwapType.OnChain) {\n      return estimateDexSwap(global);\n    } else {\n      return estimateCexSwap(global, shouldStop);\n    }\n  });\n});\n\nasync function estimateDexSwap(global: GlobalState): Promise<SwapEstimateResult> {\n  const tokenIn = global.swapTokenInfo.bySlug[global.currentSwap.tokenInSlug!];\n  const tokenOut = global.swapTokenInfo.bySlug[global.currentSwap.tokenOutSlug!];\n  const nativeTokenIn = getChainConfig(getChainBySlug(tokenIn.slug)).nativeToken;\n\n  const from = tokenIn.slug === TONCOIN.slug ? tokenIn.symbol : tokenIn.tokenAddress!;\n  const to = tokenOut.slug === TONCOIN.slug ? tokenOut.symbol : tokenOut.tokenAddress!;\n  const { fromAmount, isFromAmountMax } = processNativeMaxSwap(global);\n  const toAmount = global.currentSwap.amountOut ?? '0';\n  const fromAddress = selectCurrentAccount(global)!.addressByChain.ton!;\n\n  const estimateAmount = global.currentSwap.inputSource === SwapInputSource.In ? { fromAmount } : { toAmount };\n\n  const toncoinBalance = selectCurrentToncoinBalance(global);\n  const shouldTryDiesel = toncoinBalance < fromDecimal(global.currentSwap.networkFee ?? '0', nativeTokenIn.decimals);\n\n  const estimate = await callApi('swapEstimate', global.currentAccountId!, {\n    ...estimateAmount,\n    from,\n    to,\n    slippage: global.currentSwap.slippage,\n    fromAddress,\n    shouldTryDiesel,\n    isFromAmountMax,\n    toncoinBalance: toDecimal(toncoinBalance ?? 0n, TONCOIN.decimals),\n  });\n\n  global = getGlobal();\n\n  if (!estimate || 'error' in estimate) {\n    const errorType = SERVER_ERRORS_MAP[estimate?.error as keyof typeof SERVER_ERRORS_MAP]\n      ?? SwapErrorType.UnexpectedError;\n\n    return {\n      ...getSwapEstimateResetParams(global),\n      errorType,\n    };\n  }\n\n  const errorType = estimate.toAmount === '0' && shouldTryDiesel\n    ? SwapErrorType.NotEnoughForFee\n    : undefined;\n\n  const estimates = buildSwapEstimates(estimate);\n  const currentEstimate = chooseSwapEstimate(global, estimates, estimate.dexLabel);\n\n  return {\n    ...getSwapEstimateResetParams(global),\n    ...(global.currentSwap.inputSource === SwapInputSource.In\n      ? { amountOut: currentEstimate.toAmount }\n      : { amountIn: currentEstimate.fromAmount }\n    ),\n    ...(isFromAmountMax ? { amountIn: currentEstimate.fromAmount } : undefined),\n    bestRateDexLabel: estimate.dexLabel,\n    amountOutMin: currentEstimate.toMinAmount,\n    priceImpact: currentEstimate.impact,\n    errorType,\n    dieselStatus: estimate.dieselStatus,\n    estimates,\n    currentDexLabel: currentEstimate.dexLabel,\n    // Fees\n    networkFee: currentEstimate.networkFee,\n    realNetworkFee: currentEstimate.realNetworkFee,\n    swapFee: currentEstimate.swapFee,\n    swapFeePercent: currentEstimate.swapFeePercent,\n    ourFee: currentEstimate.ourFee,\n    ourFeePercent: estimate.ourFeePercent,\n    dieselFee: currentEstimate.dieselFee,\n  };\n}\n\nasync function estimateCexSwap(global: GlobalState, shouldStop: () => boolean): Promise<SwapEstimateResult> {\n  const tokenIn = global.swapTokenInfo.bySlug[global.currentSwap.tokenInSlug!];\n  const tokenOut = global.swapTokenInfo.bySlug[global.currentSwap.tokenOutSlug!];\n\n  const from = resolveSwapAssetId(tokenIn);\n  const to = resolveSwapAssetId(tokenOut);\n  const fromAmount = global.currentSwap.amountIn ?? '0';\n  const swapType = selectSwapType(global);\n\n  const estimate = await callApi('swapCexEstimate', {\n    fromAmount,\n    from,\n    to,\n  });\n\n  if (shouldStop()) return undefined;\n\n  global = getGlobal();\n\n  if (!estimate) {\n    return {\n      ...getSwapEstimateResetParams(global),\n      errorType: window.navigator.onLine ? SwapErrorType.InvalidPair : SwapErrorType.UnexpectedError,\n    };\n  }\n\n  if ('error' in estimate) {\n    const { error } = estimate as { error: string };\n    if (error.includes('requests limit')) {\n      return 'rateLimited';\n    }\n\n    return {\n      ...getSwapEstimateResetParams(global),\n      errorType: SwapErrorType.UnexpectedError,\n    };\n  }\n\n  const account = global.accounts?.byId[global.currentAccountId!];\n  let networkFee: string | undefined;\n  let realNetworkFee: string | undefined;\n\n  if (swapType === SwapType.CrosschainFromWallet) {\n    if (tokenIn.chain !== 'ton' && tokenIn.chain !== 'tron') {\n      throw new Error(`Unexpected chain ${tokenIn.chain}`);\n    }\n\n    const toAddress = {\n      ton: account!.addressByChain.ton!,\n      tron: TRX_SWAP_COUNT_FEE_ADDRESS,\n    }[tokenIn.chain];\n\n    const txDraft = await callApi('checkTransactionDraft', tokenIn.chain, {\n      accountId: global.currentAccountId!,\n      toAddress,\n      tokenAddress: tokenIn.tokenAddress,\n    });\n    if (txDraft) {\n      ({ networkFee, realNetworkFee } = convertTransferFeesToSwapFees(txDraft, tokenIn.chain));\n    }\n  }\n\n  return {\n    ...getSwapEstimateResetParams(global),\n    amountOut: estimate.toAmount === '0' ? undefined : estimate.toAmount,\n    limits: {\n      fromMin: estimate.fromMin,\n      fromMax: estimate.fromMax,\n    },\n    swapFee: estimate.swapFee,\n    networkFee,\n    realNetworkFee,\n    ourFee: '0',\n    ourFeePercent: 0,\n    dieselStatus: 'not-available',\n    amountOutMin: estimate.toAmount,\n    errorType: Big(fromAmount).lt(estimate.fromMin)\n      ? SwapErrorType.ChangellyMinSwap\n      : Big(fromAmount).gt(estimate.fromMax)\n        ? SwapErrorType.ChangellyMaxSwap\n        : undefined,\n  };\n}\n\naddActionHandler('setSwapScreen', (global, actions, { state }) => {\n  if (state === SwapState.Initial) {\n    global = updateCurrentSwap(global, { swapId: generateUniqueId() });\n  }\n  global = updateCurrentSwap(global, { state });\n  setGlobal(global);\n});\n\naddActionHandler('clearSwapError', (global) => {\n  global = updateCurrentSwap(global, { error: undefined });\n  setGlobal(global);\n});\n\nasync function loadSwapPairs(tokenSlug: string) {\n  await waitFor(() => {\n    const { swapTokenInfo: { isLoaded, bySlug } } = getGlobal();\n    return !!(isLoaded || bySlug[tokenSlug]);\n  }, 500, 100);\n  let global = getGlobal();\n\n  const tokenIn = global.swapTokenInfo.bySlug[tokenSlug];\n  if (!tokenIn) {\n    return;\n  }\n\n  const assetId = resolveSwapAssetId(tokenIn);\n\n  const cache = pairsCache[tokenSlug];\n  const isCacheValid = cache && (Date.now() - cache.timestamp <= CACHE_DURATION);\n  if (isCacheValid) {\n    return;\n  }\n\n  const pairs = await callApi('swapGetPairs', assetId);\n  global = getGlobal();\n\n  let bySlug: AssetPairs;\n\n  if (pairs) {\n    const isTonTokenIn = tokenIn.chain === 'ton';\n\n    bySlug = pairs.reduce((acc, pair) => {\n      const isTonTokenOut = getIsTonToken(pair.slug, true);\n      const countTonTokens = Number(isTonTokenIn) + (isTonTokenOut ? 1 : 0);\n\n      const isMultichain = !(\n        (countTonTokens === 2) || (countTonTokens === 1 && [tokenIn.slug, pair.slug].includes(TONCOIN.slug))\n      );\n\n      acc[pair.slug] = {\n        ...(isMultichain && {\n          isMultichain,\n        }),\n        ...(pair.isReverseProhibited && {\n          isReverseProhibited: pair.isReverseProhibited,\n        }),\n      };\n      return acc;\n    }, {} as AssetPairs);\n\n    pairsCache[tokenSlug] = { timestamp: Date.now() };\n  } else {\n    bySlug = {};\n  }\n\n  setGlobal({\n    ...global,\n    swapPairs: {\n      bySlug: {\n        ...global.swapPairs?.bySlug,\n        [tokenSlug]: bySlug,\n      },\n    },\n  });\n}\n\naddActionHandler('setSwapCexAddress', (global, actions, { toAddress }) => {\n  global = updateCurrentSwap(global, { toAddress });\n  setGlobal(global);\n});\n\naddActionHandler('updatePendingSwaps', async (global) => {\n  const accountId = global.currentAccountId;\n  if (!accountId) return;\n\n  let { activities } = selectAccountState(global, accountId) ?? {};\n  if (!activities) return;\n\n  const ids = Object.values(activities.byId)\n    .filter((activity) => Boolean(\n      activity.kind === 'swap'\n      && activity.status === 'pending'\n      && activity.cex,\n    ))\n    .map(({ id }) => parseTxId(id).hash);\n  if (!ids.length) return;\n\n  const result = await callApi('fetchSwaps', accountId, ids);\n  if (!result?.swaps.length) return;\n\n  const { swaps, nonExistentIds } = result;\n\n  global = getGlobal();\n  if (global.currentAccountId !== accountId) return;\n\n  ({ activities } = selectAccountState(global, accountId) ?? {});\n\n  for (const swap of result.swaps) {\n    if (swap.isCanceled) {\n      swap.shouldHide = true;\n    }\n  }\n\n  const nonExistentSwaps: Record<string, ApiSwapActivity> = {};\n\n  for (const id of nonExistentIds) {\n    nonExistentSwaps[id] = {\n      ...activities!.byId[id] as ApiSwapActivity,\n      status: 'expired',\n      shouldHide: true,\n    };\n  }\n\n  global = updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      byId: {\n        ...activities!.byId,\n        ...nonExistentSwaps,\n        ...buildCollectionByKey(swaps, 'id'),\n      },\n    },\n  });\n\n  setGlobal(global);\n});\n\naddActionHandler('setSwapDex', (global, actions, { dexLabel }) => {\n  const { estimates, bestRateDexLabel } = global.currentSwap;\n  const newEstimate = (estimates || []).find((estimate) => estimate.dexLabel === dexLabel);\n  if (!newEstimate) return;\n\n  global = updateCurrentSwap(global, {\n    amountIn: newEstimate.fromAmount,\n    amountOut: newEstimate.toAmount,\n    amountOutMin: newEstimate.toMinAmount,\n    networkFee: newEstimate.networkFee,\n    realNetworkFee: newEstimate.realNetworkFee,\n    swapFee: newEstimate.swapFee,\n    swapFeePercent: newEstimate.swapFeePercent,\n    ourFee: newEstimate.ourFee,\n    dieselFee: newEstimate.dieselFee,\n    priceImpact: newEstimate.impact,\n    currentDexLabel: dexLabel,\n    // The \"Best Rate\" selection should enable automatic best dex selection mode\n    isDexLabelChanged: dexLabel !== bestRateDexLabel ? true : undefined,\n  }, true);\n  setGlobal(global);\n});\n\nfunction convertTransferFeesToSwapFees(\n  txDraft: Pick<ApiCheckTransactionDraftResult, 'fee' | 'realFee'>,\n  chain: ApiChain,\n) {\n  const nativeToken = getNativeToken(chain);\n  let networkFee: string | undefined;\n  let realNetworkFee: string | undefined;\n\n  if (txDraft?.fee !== undefined) {\n    networkFee = toDecimal(txDraft.fee, nativeToken.decimals);\n  }\n  if (txDraft?.realFee !== undefined) {\n    realNetworkFee = toDecimal(txDraft.realFee, nativeToken.decimals);\n  }\n\n  return { networkFee, realNetworkFee };\n}\n\nexport type SwapEstimateResult = Partial<GlobalState['currentSwap']> | 'rateLimited' | undefined;\n\nlet isEstimatingSwap = false;\n\n/**\n * A boilerplate of swap estimation, ensuring consistent behavior in concurrent usage scenarios.\n * This function is expected to be called periodically, and you may call it as often as you like.\n *\n * You may call the `shouldStop` function to check whether it makes sense to continue estimating (because the result\n * is likely to be ignored). If `shouldStop` returns true, `estimate` may return any value (it will be ignored).\n */\nexport async function estimateSwapConcurrently(\n  estimate: (\n    global: GlobalState,\n    shouldStop: () => boolean,\n  ) => SwapEstimateResult | Promise<SwapEstimateResult>,\n) {\n  const initialGlobal = getGlobal();\n\n  if (shouldAvoidSwapEstimation(initialGlobal)) return;\n\n  // There should be only 1 swap estimation at a time. A timer in SwapInitial will trigger another estimation attempt.\n  if (isEstimatingSwap) {\n    return;\n  }\n\n  try {\n    isEstimatingSwap = true;\n\n    const isEstimateInputIntact = isSwapEstimateInputEqual.bind(undefined, initialGlobal);\n\n    const swapUpdate = await estimate(initialGlobal, () => {\n      const currentGlobal = getGlobal();\n      return shouldAvoidSwapEstimation(currentGlobal) || !isEstimateInputIntact(currentGlobal);\n    });\n\n    const finalGlobal = getGlobal();\n\n    // If the dependencies were changed during the estimation, the estimation result should be ignored and the loading\n    // indicator should stay (in order to avoid showing the outdated fee). A timer in SwapInitial will trigger another\n    // estimation attempt to get the up-to-date fee.\n    if (!isEstimateInputIntact(finalGlobal)) {\n      return;\n    }\n\n    // If the swap estimation request has been rate-limited, we should keep showing the loading indicator\n    if (swapUpdate === 'rateLimited') {\n      return;\n    }\n\n    setGlobal(updateCurrentSwap(finalGlobal, {\n      isEstimating: false,\n      ...(shouldAvoidSwapEstimation(finalGlobal) ? undefined : swapUpdate),\n    }));\n  } finally {\n    isEstimatingSwap = false;\n  }\n}\n\nfunction chooseSwapEstimate(\n  global: GlobalState,\n  newEstimates: ApiSwapEstimateVariant[],\n  proposedBestDexLabel: ApiSwapDexLabel,\n) {\n  if (newEstimates.length === 0) {\n    throw new Error('Unexpected empty `newEstimates` array');\n  }\n\n  const { tokenInSlug, currentDexLabel, isDexLabelChanged } = global.currentSwap;\n\n  // If the user has chosen a Dex manually, respect that choice\n  if (currentDexLabel && isDexLabelChanged) {\n    const selectedEstimate = newEstimates.find(({ dexLabel }) => dexLabel === currentDexLabel);\n    if (selectedEstimate) {\n      return selectedEstimate;\n    }\n  }\n\n  // Otherwise, select automatically\n  const tokenIn = tokenInSlug ? global.swapTokenInfo.bySlug[tokenInSlug] : undefined;\n  const tokenInBalance = tokenInSlug ? selectCurrentAccountTokenBalance(global, tokenInSlug) : undefined;\n  const nativeTokenIn = tokenInSlug ? findChainConfig(getChainBySlug(tokenInSlug))?.nativeToken : undefined;\n  const nativeTokenInBalance = nativeTokenIn && selectCurrentAccountTokenBalance(global, nativeTokenIn.slug);\n  let availableEstimates = newEstimates.filter((variant) => canAffordSwapEstimateVariant({\n    variant,\n    tokenIn,\n    tokenInBalance,\n    nativeTokenInBalance,\n  }));\n\n  if (availableEstimates.length === 0) {\n    availableEstimates = newEstimates;\n  }\n\n  return availableEstimates.find(({ dexLabel }) => dexLabel === proposedBestDexLabel)\n    ?? availableEstimates[0];\n}\n","import { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { updateTokenPriceHistory } from '../../reducers/tokens';\n\naddActionHandler('loadPriceHistory', async (global, actions, payload) => {\n  const { slug, period, currency = global.settings.baseCurrency } = payload ?? {};\n\n  const history = await callApi('fetchPriceHistory', slug, period, currency);\n\n  if (!history) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateTokenPriceHistory(global, slug, { [period]: history });\n  setGlobal(global);\n});\n","import type { ApiChain } from '../api/types';\nimport type { Account, UserToken } from '../global/types';\n\nimport { TRC20_USDT_MAINNET_SLUG, TRX } from '../config';\nimport { HOUR } from './dateFormat';\n\nconst SCAM_DOMAIN_ADDRESS_REGEX = /^\\w{26,}\\./;\n\nexport function shouldShowSeedPhraseScamWarning(\n  account: Account,\n  accountTokens: UserToken[],\n  transferTokenChain: ApiChain,\n): boolean {\n  // Only check for recently imported accounts (within 1 hour)\n  if (!account.importedAt || Date.now() - account.importedAt > HOUR) {\n    return false;\n  }\n\n  // Only show when trying to transfer TRON tokens\n  if (transferTokenChain !== 'tron') {\n    return false;\n  }\n\n  // Check if account has TRON tokens (like USDT)\n  const hasTronTokens = accountTokens.some((token) =>\n    token.slug === TRC20_USDT_MAINNET_SLUG\n    || (token.chain === 'tron' && token.amount > 0n && token.slug !== TRX.slug),\n  );\n\n  return hasTronTokens;\n}\n\nexport function shouldShowDomainScamWarning(address: string) {\n  return SCAM_DOMAIN_ADDRESS_REGEX.test(address);\n}\n","import type { ApiCheckTransactionDraftResult, ApiSubmitMultiTransferResult } from '../../../api/chains/ton/types';\nimport type { ApiSubmitTransferOptions, ApiSubmitTransferResult } from '../../../api/methods/types';\nimport { ApiTransactionDraftError, type ApiTransactionError, type ApiTransferToSign } from '../../../api/types';\nimport { ScamWarningType, TransferState } from '../../types';\n\nimport { NFT_BATCH_SIZE } from '../../../config';\nimport { bigintDivideToNumber } from '../../../util/bigint';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { explainApiTransferFee, getDieselTokenAmount } from '../../../util/fee/transferFee';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { callActionInNative } from '../../../util/multitab';\nimport { shouldShowDomainScamWarning, shouldShowSeedPhraseScamWarning } from '../../../util/scamDetection';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { ApiHardwareBlindSigningNotEnabled, ApiUserRejectsError } from '../../../api/errors';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearCurrentTransfer,\n  clearIsPinAccepted,\n  preserveMaxTransferAmount,\n  setIsPinAccepted,\n  updateAccountState,\n  updateCurrentTransfer,\n  updateCurrentTransferByCheckResult,\n  updateCurrentTransferLoading,\n} from '../../reducers';\nimport {\n  selectAccountState,\n  selectCurrentAccount,\n  selectCurrentAccountTokens,\n  selectCurrentNetwork,\n  selectToken,\n  selectTokenAddress,\n} from '../../selectors';\n\naddActionHandler('submitTransferInitial', async (global, actions, payload) => {\n  if (IS_DELEGATING_BOTTOM_SHEET) {\n    callActionInNative('submitTransferInitial', payload);\n    return;\n  }\n\n  const {\n    tokenSlug,\n    toAddress,\n    comment,\n    shouldEncrypt,\n    nfts,\n    withDiesel,\n    stateInit,\n    isGaslessWithStars,\n    binPayload,\n  } = payload;\n  let { amount } = payload;\n\n  setGlobal(updateCurrentTransferLoading(global, true));\n\n  const isNftTransfer = Boolean(nfts?.length);\n  let result: ApiCheckTransactionDraftResult | undefined;\n\n  if (isNftTransfer) {\n    // This assignment is needed only for the amount checking hack in the 'newLocalActivities' handler in\n    // `src/global/actions/apiUpdates/activities.ts` to work.\n    amount = 0n;\n\n    result = await callApi('checkNftTransferDraft', {\n      accountId: global.currentAccountId!,\n      nfts,\n      toAddress,\n      comment,\n    });\n  } else {\n    const { tokenAddress, chain } = selectToken(global, tokenSlug);\n    result = await callApi('checkTransactionDraft', chain, {\n      accountId: global.currentAccountId!,\n      tokenAddress,\n      toAddress,\n      amount,\n      data: binPayload ?? comment,\n      shouldEncrypt,\n      stateInit,\n      isBase64Data: Boolean(binPayload),\n      allowGasless: true,\n    });\n  }\n\n  global = getGlobal();\n  global = updateCurrentTransferLoading(global, false);\n\n  if (result) {\n    global = updateCurrentTransferByCheckResult(global, result);\n  }\n\n  if (!result || 'error' in result) {\n    setGlobal(global);\n\n    if (result?.error === ApiTransactionDraftError.InsufficientBalance && !isNftTransfer) {\n      actions.showDialog({ message: 'The network fee has slightly changed, try sending again.' });\n    } else {\n      actions.showError({ error: result?.error });\n    }\n\n    return;\n  }\n\n  setGlobal(updateCurrentTransfer(global, {\n    state: TransferState.Confirm,\n    error: undefined,\n    toAddress,\n    resolvedAddress: result.resolvedAddress,\n    amount,\n    comment,\n    shouldEncrypt,\n    tokenSlug,\n    isToNewAddress: result.isToAddressNew,\n    withDiesel,\n    isGaslessWithStars,\n  }));\n});\n\naddActionHandler('fetchTransferFee', async (global, actions, payload) => {\n  global = updateCurrentTransfer(global, { isLoading: true, error: undefined });\n  setGlobal(global);\n\n  const {\n    tokenSlug, toAddress, comment, shouldEncrypt, binPayload, stateInit,\n  } = payload;\n\n  const { tokenAddress, chain } = selectToken(global, tokenSlug);\n\n  const result = await callApi('checkTransactionDraft', chain, {\n    accountId: global.currentAccountId!,\n    toAddress,\n    data: binPayload ?? comment,\n    tokenAddress,\n    shouldEncrypt,\n    isBase64Data: Boolean(binPayload),\n    stateInit,\n    allowGasless: true,\n  });\n\n  global = getGlobal();\n\n  if (tokenSlug !== global.currentTransfer.tokenSlug || global.currentTransfer.nfts?.length) {\n    // For cases when the user switches the token before the result arrives\n    return;\n  }\n\n  global = updateCurrentTransfer(global, { isLoading: false });\n  if (result) {\n    global = updateCurrentTransferByCheckResult(global, result);\n  }\n  setGlobal(global);\n\n  if (result?.error && result.error !== ApiTransactionDraftError.InsufficientBalance) {\n    actions.showError({ error: result.error });\n  }\n\n  if (result?.error === ApiTransactionDraftError.InsufficientBalance) {\n    const currentAccount = selectCurrentAccount(global)!;\n    const accountTokens = selectCurrentAccountTokens(global)!;\n    const { chain } = selectToken(global, tokenSlug);\n\n    if (shouldShowSeedPhraseScamWarning(currentAccount, accountTokens, chain)) {\n      global = getGlobal();\n      global = updateCurrentTransfer(global, { scamWarningType: ScamWarningType.SeedPhrase });\n      setGlobal(global);\n    }\n  }\n\n  if (shouldShowDomainScamWarning(toAddress)) {\n    global = getGlobal();\n    global = updateCurrentTransfer(global, { scamWarningType: ScamWarningType.DomainLike });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('fetchNftFee', async (global, actions, payload) => {\n  const { toAddress, nfts, comment } = payload;\n\n  global = updateCurrentTransfer(global, { isLoading: true, error: undefined });\n  setGlobal(global);\n\n  const result = await callApi('checkNftTransferDraft', {\n    accountId: global.currentAccountId!,\n    nfts,\n    toAddress,\n    comment,\n  });\n\n  global = getGlobal();\n\n  if (!global.currentTransfer.nfts?.length) {\n    // For cases when the user switches the token transfer mode before the result arrives\n    return;\n  }\n\n  global = updateCurrentTransfer(global, { isLoading: false });\n  if (result) {\n    global = updateCurrentTransferByCheckResult(global, result);\n  }\n  if (shouldShowDomainScamWarning(toAddress)) {\n    global = updateCurrentTransfer(global, { scamWarningType: ScamWarningType.DomainLike });\n  }\n  setGlobal(global);\n\n  if (result?.error) {\n    actions.showError({\n      error: result?.error === ApiTransactionDraftError.InsufficientBalance\n        ? 'Insufficient TON for fee.'\n        : result.error,\n    });\n  }\n});\n\naddActionHandler('submitTransferPassword', async (global, actions, { password }) => {\n  const {\n    resolvedAddress,\n    comment,\n    amount,\n    promiseId,\n    tokenSlug,\n    shouldEncrypt,\n    binPayload,\n    nfts,\n    withDiesel,\n    diesel,\n    stateInit,\n    isGaslessWithStars,\n  } = global.currentTransfer;\n\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentTransfer(getGlobal(), { error: 'Wrong password, please try again.' }));\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentTransfer(getGlobal(), {\n    isLoading: true,\n    error: undefined,\n  });\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n  setGlobal(global);\n  await vibrateOnSuccess();\n\n  if (promiseId) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = setIsPinAccepted(global);\n      setGlobal(global);\n    }\n\n    void callApi('confirmDappRequest', promiseId, password);\n    return;\n  }\n\n  const explainedFee = explainApiTransferFee(global.currentTransfer);\n  const fullNativeFee = explainedFee.fullFee?.nativeSum;\n  const realNativeFee = explainedFee.realFee?.nativeSum;\n\n  let result: ApiSubmitTransferResult | ApiSubmitMultiTransferResult | undefined;\n\n  if (nfts?.length) {\n    const chunks = [];\n    for (let i = 0; i < nfts.length; i += NFT_BATCH_SIZE) {\n      chunks.push(nfts.slice(i, i + NFT_BATCH_SIZE));\n    }\n\n    for (const chunk of chunks) {\n      const batchResult = await callApi(\n        'submitNftTransfers',\n        global.currentAccountId!,\n        password,\n        chunk,\n        resolvedAddress!,\n        comment,\n        realNativeFee && bigintDivideToNumber(realNativeFee, nfts.length / chunk.length),\n      );\n\n      global = getGlobal();\n      global = updateCurrentTransfer(global, {\n        sentNftsCount: (global.currentTransfer.sentNftsCount || 0) + chunk.length,\n      });\n      setGlobal(global);\n      // TODO - process all responses from the API\n      result = batchResult;\n    }\n  } else {\n    const { tokenAddress, chain } = selectToken(global, tokenSlug);\n\n    const options: ApiSubmitTransferOptions = {\n      accountId: global.currentAccountId!,\n      password,\n      toAddress: resolvedAddress!,\n      amount: amount!,\n      comment: binPayload ?? comment,\n      tokenAddress,\n      fee: fullNativeFee,\n      realFee: realNativeFee,\n      shouldEncrypt,\n      isBase64Data: Boolean(binPayload),\n      withDiesel,\n      dieselAmount: diesel && getDieselTokenAmount(diesel),\n      stateInit,\n      isGaslessWithStars,\n      noFeeCheck: true,\n    };\n\n    result = await callApi('submitTransfer', chain, options);\n  }\n\n  global = getGlobal();\n  global = updateCurrentTransfer(global, {\n    isLoading: false,\n  });\n  setGlobal(global);\n\n  if (!result || 'error' in result) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n    }\n    void vibrateOnError();\n    actions.showError({ error: result?.error });\n  } else {\n    void vibrateOnSuccess();\n  }\n});\n\naddActionHandler('submitTransferHardware', async (global, actions) => {\n  const {\n    toAddress,\n    resolvedAddress,\n    comment,\n    amount,\n    promiseId,\n    tokenSlug,\n    rawPayload,\n    parsedPayload,\n    stateInit,\n    nfts,\n  } = global.currentTransfer;\n\n  const accountId = global.currentAccountId!;\n\n  setGlobal(updateCurrentTransfer(getGlobal(), {\n    isLoading: true,\n    error: undefined,\n    state: TransferState.ConfirmHardware,\n  }));\n\n  const ledgerApi = await import('../../../util/ledger');\n\n  if (promiseId) {\n    const message: ApiTransferToSign = {\n      toAddress: toAddress!,\n      amount: amount!,\n      rawPayload,\n      payload: parsedPayload,\n      stateInit,\n    };\n\n    try {\n      const signedMessage = await ledgerApi.signLedgerTransactions(accountId, [message]);\n      void callApi('confirmDappRequest', promiseId, signedMessage);\n    } catch (err) {\n      if (err instanceof ApiUserRejectsError) {\n        setGlobal(updateCurrentTransfer(getGlobal(), {\n          isLoading: false,\n          error: 'Canceled by the user',\n        }));\n      } else {\n        void callApi('cancelDappRequest', promiseId, 'Unknown error.');\n      }\n    }\n    return;\n  }\n\n  const explainedFee = explainApiTransferFee(global.currentTransfer);\n  const realNativeFee = explainedFee.realFee?.nativeSum;\n\n  let result: string | { error: ApiTransactionError } | undefined;\n  let error: string | undefined;\n\n  if (nfts?.length) {\n    for (const nft of nfts) {\n      const currentResult = await ledgerApi.submitLedgerNftTransfer({\n        accountId: global.currentAccountId!,\n        nftAddress: nft.address,\n        password: '',\n        toAddress: resolvedAddress!,\n        comment,\n        nft,\n        realFee: realNativeFee && realNativeFee / BigInt(nfts.length),\n      });\n\n      global = getGlobal();\n      global = updateCurrentTransfer(global, {\n        sentNftsCount: (global.currentTransfer.sentNftsCount || 0) + 1,\n      });\n      setGlobal(global);\n      result = currentResult;\n    }\n  } else {\n    const tokenAddress = selectTokenAddress(global, tokenSlug);\n    const options = {\n      accountId: global.currentAccountId!,\n      password: '',\n      toAddress: resolvedAddress!,\n      amount: amount!,\n      comment,\n      tokenAddress,\n      realFee: realNativeFee,\n    };\n\n    try {\n      result = await ledgerApi.submitLedgerTransfer(options, tokenSlug);\n    } catch (err: any) {\n      if (err instanceof ApiHardwareBlindSigningNotEnabled) {\n        error = '$hardware_blind_sign_not_enabled';\n      }\n    }\n  }\n\n  if (!error && result === undefined) {\n    error = 'Declined';\n  } else if (typeof result === 'object' && 'error' in result) {\n    actions.showError({\n      error: result.error,\n    });\n  }\n\n  setGlobal(updateCurrentTransfer(getGlobal(), {\n    isLoading: false,\n    error,\n  }));\n});\n\naddActionHandler('cancelTransfer', (global, actions, { shouldReset } = {}) => {\n  const { promiseId, tokenSlug } = global.currentTransfer;\n\n  if (shouldReset) {\n    if (promiseId) {\n      void callApi('cancelDappRequest', promiseId, 'Canceled by the user');\n    }\n\n    global = clearCurrentTransfer(global);\n    global = updateCurrentTransfer(global, { tokenSlug });\n\n    setGlobal(global);\n    return;\n  }\n\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n  global = updateCurrentTransfer(global, { state: TransferState.None });\n  setGlobal(global);\n});\n\naddActionHandler('fetchTransferDieselState', async (global, actions, { tokenSlug }) => {\n  const tokenAddress = selectTokenAddress(global, tokenSlug);\n  if (!tokenAddress) return;\n\n  const diesel = await callApi('fetchEstimateDiesel', global.currentAccountId!, tokenAddress);\n  if (!diesel) return;\n\n  global = getGlobal();\n  const accountState = selectAccountState(global, global.currentAccountId!);\n  global = preserveMaxTransferAmount(global, updateCurrentTransfer(global, { diesel }));\n  if (accountState?.isDieselAuthorizationStarted && diesel.status !== 'not-authorized') {\n    global = updateAccountState(global, global.currentAccountId!, { isDieselAuthorizationStarted: undefined });\n  }\n  setGlobal(global);\n});\n\naddActionHandler('checkTransferAddress', async (global, actions, { address }) => {\n  if (!address) {\n    global = updateCurrentTransfer(global, { toAddressName: undefined, resolvedAddress: undefined });\n    setGlobal(global);\n\n    return;\n  }\n\n  const network = selectCurrentNetwork(global);\n  const result = await callApi('getAddressInfo', network, address);\n\n  global = getGlobal();\n  if (!result || 'error' in result) {\n    global = updateCurrentTransfer(global, { toAddressName: undefined, resolvedAddress: undefined });\n  } else {\n    global = updateCurrentTransfer(global, {\n      toAddressName: result.addressName,\n      resolvedAddress: result.resolvedAddress,\n    });\n  }\n  setGlobal(global);\n});\n","import { BURN_ADDRESS, NOTCOIN_EXCHANGERS, NOTCOIN_VOUCHERS_ADDRESS, TONCOIN } from '../../../config';\nimport { findDifference } from '../../../util/iteratees';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { addActionHandler } from '../../index';\nimport { updateCurrentAccountState } from '../../reducers';\nimport { selectCurrentAccountState } from '../../selectors';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\n\nconst NBS_INIT_TIMEOUT = IS_DELEGATING_BOTTOM_SHEET ? 100 : 0;\n\naddActionHandler('fetchNftsFromCollection', (global, actions, { collectionAddress }) => {\n  void callApi('fetchNftsFromCollection', global.currentAccountId!, collectionAddress);\n});\n\naddActionHandler('burnNfts', (global, actions, { nfts }) => {\n  actions.startTransfer({\n    isPortrait: getIsPortrait(),\n    nfts,\n  });\n\n  const isNotcoinVouchers = nfts.some((n) => n.collectionAddress === NOTCOIN_VOUCHERS_ADDRESS);\n\n  setTimeout(() => {\n    actions.submitTransferInitial({\n      tokenSlug: TONCOIN.slug,\n      amount: 0n,\n      toAddress: isNotcoinVouchers ? NOTCOIN_EXCHANGERS[0] : BURN_ADDRESS,\n      nfts,\n    });\n  }, NBS_INIT_TIMEOUT);\n});\n\naddActionHandler('addNftsToBlacklist', (global, actions, { addresses: nftAddresses }) => {\n  // Force hide NFT - remove it from whitelist and add to blacklist\n  let { blacklistedNftAddresses = [], whitelistedNftAddresses = [] } = selectCurrentAccountState(global) || {};\n  blacklistedNftAddresses = findDifference(blacklistedNftAddresses, nftAddresses);\n  whitelistedNftAddresses = findDifference(whitelistedNftAddresses, nftAddresses);\n\n  return updateCurrentAccountState(global, {\n    blacklistedNftAddresses: [...blacklistedNftAddresses, ...nftAddresses],\n    whitelistedNftAddresses,\n  });\n});\n\naddActionHandler('addNftsToWhitelist', (global, actions, { addresses: nftAddresses }) => {\n  // Force show NFT - remove it from blacklist and add to whitelist\n  let { blacklistedNftAddresses = [], whitelistedNftAddresses = [] } = selectCurrentAccountState(global) || {};\n  blacklistedNftAddresses = findDifference(blacklistedNftAddresses, nftAddresses);\n  whitelistedNftAddresses = findDifference(whitelistedNftAddresses, nftAddresses);\n\n  return updateCurrentAccountState(global, {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses: [...whitelistedNftAddresses, ...nftAddresses],\n  });\n});\n\naddActionHandler('removeNftSpecialStatus', (global, actions, { address: nftAddress }) => {\n  // Stop forcing to show/hide NFT if it was in whitelist/blacklist\n  let { blacklistedNftAddresses = [], whitelistedNftAddresses = [] } = selectCurrentAccountState(global) || {};\n\n  blacklistedNftAddresses = blacklistedNftAddresses.filter((address) => address !== nftAddress);\n  whitelistedNftAddresses = whitelistedNftAddresses.filter((address) => address !== nftAddress);\n\n  return updateCurrentAccountState(global, {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n  });\n});\n\naddActionHandler('openUnhideNftModal', (global, actions, { address, name }) => {\n  return updateCurrentAccountState(global, {\n    isUnhideNftModalOpen: true,\n    selectedNftToUnhide: { address, name },\n  });\n});\n\naddActionHandler('closeUnhideNftModal', (global) => {\n  return updateCurrentAccountState(global, {\n    isUnhideNftModalOpen: undefined,\n    selectedNftToUnhide: undefined,\n  });\n});\n\naddActionHandler('openHideNftModal', (global, actions, { addresses, isCollection }) => {\n  return updateCurrentAccountState(global, {\n    selectedNftsToHide: { addresses, isCollection },\n  });\n});\n\naddActionHandler('closeHideNftModal', (global) => {\n  return updateCurrentAccountState(global, {\n    selectedNftsToHide: undefined,\n  });\n});\n\naddActionHandler('openNftAttributesModal', (global, actions, { nft }) => {\n  return updateCurrentAccountState(global, { currentNftForAttributes: nft });\n});\n\naddActionHandler('closeNftAttributesModal', (global) => {\n  return updateCurrentAccountState(global, { currentNftForAttributes: undefined });\n});\n","import type { ApiSubmitTransferOptions } from '../../../api/methods/types';\nimport type { GlobalState } from '../../types';\nimport { ApiCommonError } from '../../../api/types';\nimport { MintCardState } from '../../types';\n\nimport { IS_CORE_WALLET, MINT_CARD_ADDRESS, MINT_CARD_COMMENT, TONCOIN } from '../../../config';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { fromDecimal } from '../../../util/decimals';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getActions, getGlobal, setGlobal } from '../../index';\nimport {\n  clearIsPinAccepted,\n  setIsPinAccepted,\n  updateAccountSettings,\n  updateAccountState,\n  updateMintCards,\n} from '../../reducers';\nimport { selectAccountState } from '../../selectors';\n\naddActionHandler('submitMintCard', async (global, actions, { password }) => {\n  const accountId = global.currentAccountId!;\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateMintCards(getGlobal(), { error: 'Wrong password, please try again.' }));\n\n    return;\n  }\n  global = getGlobal();\n\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n\n  global = updateMintCards(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n  await vibrateOnSuccess(true);\n\n  const options = createTransferOptions(getGlobal(), password);\n  const result = await callApi('submitTransfer', 'ton', options);\n  const transferError = !result || 'error' in result\n    ? result?.error ?? ApiCommonError.Unexpected\n    : undefined;\n\n  handleTransferResult(getGlobal(), accountId, transferError);\n});\n\naddActionHandler('submitMintCardHardware', async (global) => {\n  const accountId = global.currentAccountId!;\n\n  global = updateMintCards(global, {\n    isLoading: true,\n    error: undefined,\n    state: MintCardState.ConfirmHardware,\n  });\n  setGlobal(global);\n\n  const ledgerApi = await import('../../../util/ledger');\n  const options = createTransferOptions(getGlobal(), '');\n  const result = await ledgerApi.submitLedgerTransfer(options, TONCOIN.slug);\n  const transferError = !result ? ApiCommonError.Unexpected : undefined;\n\n  handleTransferResult(getGlobal(), accountId, transferError);\n});\n\nfunction createTransferOptions(globalState: GlobalState, password: string): ApiSubmitTransferOptions {\n  const { currentAccountId, currentMintCard } = globalState;\n  const { config } = selectAccountState(globalState, currentAccountId!)!;\n  const { cardsInfo } = config!;\n  const type = currentMintCard!.type!;\n  const cardInfo = cardsInfo![type];\n\n  return {\n    accountId: currentAccountId!,\n    password,\n    toAddress: MINT_CARD_ADDRESS,\n    amount: fromDecimal(cardInfo.price, TONCOIN.decimals),\n    comment: MINT_CARD_COMMENT,\n  };\n}\n\nfunction handleTransferResult(global: GlobalState, accountId: string, error?: string) {\n  global = updateMintCards(global, { isLoading: false });\n  setGlobal(global);\n\n  if (error) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n    }\n    void vibrateOnError();\n    getActions().showError({ error });\n    return;\n  }\n\n  void vibrateOnSuccess();\n  global = getGlobal();\n  global = updateMintCards(global, { state: MintCardState.Done });\n  global = updateAccountState(global, accountId, { isCardMinting: true });\n  setGlobal(global);\n}\n\naddActionHandler('checkCardNftOwnership', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET || IS_CORE_WALLET) return;\n\n  const { byAccountId } = global.settings;\n\n  Object.entries(byAccountId).forEach(async ([accountId, settings]) => {\n    const cardBackgroundNftAddress = settings.cardBackgroundNft?.address;\n    const accentColorNftAddress = settings.accentColorNft?.address;\n\n    if (!cardBackgroundNftAddress && !accentColorNftAddress) return;\n\n    const promises = [\n      cardBackgroundNftAddress\n        ? callApi('checkNftOwnership', accountId, cardBackgroundNftAddress)\n        : undefined,\n      accentColorNftAddress && accentColorNftAddress !== cardBackgroundNftAddress\n        ? callApi('checkNftOwnership', accountId, accentColorNftAddress)\n        : undefined,\n    ];\n\n    const [isCardBackgroundNftOwned, isAccentColorNftOwned] = await Promise.all(promises);\n\n    let newGlobal = getGlobal();\n\n    if (cardBackgroundNftAddress && isCardBackgroundNftOwned === false) {\n      newGlobal = updateAccountSettings(newGlobal, accountId, {\n        cardBackgroundNft: undefined,\n      });\n    }\n\n    if (accentColorNftAddress && (\n      (accentColorNftAddress === cardBackgroundNftAddress && isCardBackgroundNftOwned === false)\n      || (accentColorNftAddress !== cardBackgroundNftAddress && isAccentColorNftOwned === false)\n    )) {\n      newGlobal = updateAccountSettings(newGlobal, accountId, {\n        accentColorNft: undefined,\n        accentColorIndex: undefined,\n      });\n    }\n\n    setGlobal(newGlobal);\n  });\n});\n","import type { ApiSubmitTransferOptions } from '../../../api/methods/types';\nimport { ApiCommonError } from '../../../api/types';\nimport { VestingUnfreezeState } from '../../types';\n\nimport {\n  CLAIM_ADDRESS,\n  CLAIM_AMOUNT,\n  CLAIM_COMMENT,\n  MYCOIN,\n  MYCOIN_TESTNET,\n  TONCOIN,\n} from '../../../config';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { callActionInMain } from '../../../util/multitab';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearIsPinAccepted,\n  setIsPinAccepted,\n  updateVesting,\n} from '../../reducers';\nimport { selectVestingPartsReadyToUnfreeze } from '../../selectors';\n\naddActionHandler('submitClaimingVesting', async (global, actions, { password }) => {\n  const accountId = global.currentAccountId!;\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateVesting(getGlobal(), accountId, { error: 'Wrong password, please try again.' }));\n\n    return;\n  }\n  global = getGlobal();\n\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n\n  global = updateVesting(global, accountId, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n  await vibrateOnSuccess(true);\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitClaimingVesting', { password });\n    return;\n  }\n\n  global = getGlobal();\n  const unfreezeRequestedIds = selectVestingPartsReadyToUnfreeze(global, accountId);\n\n  const options: ApiSubmitTransferOptions = {\n    accountId: global.currentAccountId!,\n    password,\n    toAddress: CLAIM_ADDRESS,\n    amount: CLAIM_AMOUNT,\n    comment: CLAIM_COMMENT,\n  };\n  const result = await callApi('submitTransfer', 'ton', options);\n\n  global = getGlobal();\n  global = updateVesting(global, accountId, { isLoading: false });\n  setGlobal(global);\n\n  if (!result || 'error' in result) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n    }\n    void vibrateOnError();\n    actions.showError({ error: result?.error });\n    return;\n  } else {\n    void vibrateOnSuccess();\n  }\n\n  global = getGlobal();\n  global = updateVesting(global, accountId, {\n    isConfirmRequested: undefined,\n    unfreezeRequestedIds,\n  });\n  setGlobal(global);\n\n  actions.openVestingModal();\n});\n\naddActionHandler('submitClaimingVestingHardware', async (global, actions) => {\n  global = updateVesting(global, global.currentAccountId!, {\n    isLoading: true,\n    error: undefined,\n    unfreezeState: VestingUnfreezeState.ConfirmHardware,\n  });\n  setGlobal(global);\n\n  const ledgerApi = await import('../../../util/ledger');\n  global = getGlobal();\n\n  const accountId = global.currentAccountId!;\n  const unfreezeRequestedIds = selectVestingPartsReadyToUnfreeze(global, accountId);\n  const options: ApiSubmitTransferOptions = {\n    accountId,\n    password: '',\n    toAddress: CLAIM_ADDRESS,\n    amount: CLAIM_AMOUNT,\n    comment: CLAIM_COMMENT,\n  };\n\n  const result = await ledgerApi.submitLedgerTransfer(options, TONCOIN.slug);\n\n  global = getGlobal();\n  global = updateVesting(global, accountId, { isLoading: false });\n  setGlobal(global);\n\n  if (!result) {\n    actions.showError({ error: ApiCommonError.Unexpected });\n  } else {\n    global = getGlobal();\n    global = updateVesting(global, accountId, {\n      isConfirmRequested: undefined,\n      unfreezeRequestedIds,\n    });\n    setGlobal(global);\n    actions.openVestingModal();\n  }\n});\n\naddActionHandler('loadMycoin', (global, actions) => {\n  const { isTestnet } = global.settings;\n\n  actions.importToken({ address: isTestnet ? MYCOIN_TESTNET.minterAddress : MYCOIN.minterAddress });\n});\n","import Deferred from './Deferred';\n\nexport function createAbortableFunction<TArgs extends unknown[], TAbort, TFnResult>(\n  toReturnOnAbort: TAbort,\n  fn: (...args: TArgs) => Promise<TFnResult>,\n): (...args: TArgs) => Promise<TAbort | TFnResult> {\n  let abort = new Deferred<TAbort>();\n\n  return function abortableFunction(...args: TArgs): Promise<TAbort | TFnResult> {\n    abort.resolve(toReturnOnAbort);\n\n    abort = new Deferred<TAbort>();\n    return Promise.race([fn(...args), abort.promise]);\n  };\n}\n","import type { ApiNotificationsAccountValue } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nexport function deleteNotificationAccount(\n  global: GlobalState,\n  accountId: string,\n): GlobalState {\n  const currentEnabledAccounts = global.pushNotifications.enabledAccounts;\n\n  const { [accountId]: deleted, ...newEnabledAccounts } = currentEnabledAccounts;\n\n  return {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: newEnabledAccounts,\n    },\n  };\n}\n\nexport function deleteAllNotificationAccounts(\n  global: GlobalState,\n): GlobalState {\n  return {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: {},\n    },\n  };\n}\n\nexport function createNotificationAccount(\n  global: GlobalState,\n  accountId: string,\n  value: Partial<ApiNotificationsAccountValue> = {},\n): GlobalState {\n  const currentEnabledAccounts = global.pushNotifications.enabledAccounts;\n\n  const newEnabledAccounts = { ...currentEnabledAccounts, [accountId]: value };\n\n  return {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: newEnabledAccounts,\n    },\n  };\n}\n\nexport function updateNotificationAccount(\n  global: GlobalState,\n  accountId: string,\n  value: ApiNotificationsAccountValue,\n): GlobalState {\n  const newEnabledAccounts = global.pushNotifications.enabledAccounts;\n  newEnabledAccounts[accountId] = { ...newEnabledAccounts[accountId], ...value };\n\n  return {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: newEnabledAccounts,\n    },\n  };\n}\n","import type {\n  ApiNotificationAddress,\n  ApiNotificationsAccountValue,\n  ApiSubscribeNotificationsProps,\n  ApiSubscribeNotificationsResult,\n  ApiUnsubscribeNotificationsProps,\n} from '../../../api/types';\n\nimport { MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT } from '../../../config';\nimport { createAbortableFunction } from '../../../util/createAbortableFunction';\nimport isEmptyObject from '../../../util/isEmptyObject';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  createNotificationAccount,\n  deleteAllNotificationAccounts,\n  deleteNotificationAccount,\n  updateNotificationAccount,\n} from '../../reducers/notifications';\nimport { selectAccounts } from '../../selectors';\nimport { selectNotificationTonAddressesSlow } from '../../selectors/notifications';\n\nconst abortableSubscribeNotifications = createAbortableFunction(\n  { aborted: true },\n  (request: ApiSubscribeNotificationsProps) => {\n    return callApi('subscribeNotifications', request);\n  },\n);\n\nconst abortableUnsubscribeNotifications = createAbortableFunction(\n  { aborted: true },\n  (request: ApiUnsubscribeNotificationsProps) => {\n    return callApi('unsubscribeNotifications', request);\n  },\n);\n\naddActionHandler('registerNotifications', async (global, actions, { userToken, platform }) => {\n  const { pushNotifications } = global;\n\n  let createResult;\n  let enabledAccounts = Object.keys(pushNotifications.enabledAccounts);\n  const accounts = selectAccounts(global) || {};\n  if (!pushNotifications.userToken && !isEmptyObject(accounts)) {\n    const notificationAddresses = selectNotificationTonAddressesSlow(\n      global,\n      Object.keys(accounts),\n      MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT,\n    );\n    enabledAccounts = Object.keys(notificationAddresses);\n\n    createResult = await callApi('subscribeNotifications', {\n      userToken,\n      platform,\n      addresses: Object.values(notificationAddresses),\n    });\n  } else if (pushNotifications.userToken !== userToken && enabledAccounts.length) {\n    [createResult] = await Promise.all([\n      callApi('subscribeNotifications', {\n        userToken,\n        platform,\n        addresses: Object.values(selectNotificationTonAddressesSlow(global, enabledAccounts)),\n      }),\n      callApi('unsubscribeNotifications', {\n        userToken: pushNotifications.userToken!,\n        addresses: Object.values(selectNotificationTonAddressesSlow(global, enabledAccounts)),\n      }),\n    ]);\n  }\n\n  global = getGlobal();\n  global = {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      userToken,\n      platform,\n    },\n  };\n\n  if (!createResult || 'error' in createResult) {\n    setGlobal(global);\n    return;\n  }\n\n  const newEnabledAccounts = enabledAccounts.reduce((acc, accountId) => {\n    const tonAddress = accounts[accountId].addressByChain.ton;\n    if (tonAddress) {\n      acc[accountId] = createResult.addressKeys[tonAddress];\n    }\n\n    return acc;\n  }, {} as Record<string, ApiNotificationsAccountValue>);\n\n  setGlobal({\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: newEnabledAccounts,\n    },\n  });\n});\n\naddActionHandler('deleteNotificationAccount', async (global, actions, { accountId, withAbort }) => {\n  const { userToken, enabledAccounts } = global.pushNotifications;\n  const pushNotificationsAccount = enabledAccounts[accountId];\n\n  if (!userToken) {\n    return;\n  }\n\n  setGlobal(deleteNotificationAccount(global, accountId));\n\n  const addresses = Object.values(selectNotificationTonAddressesSlow(global, [accountId]));\n  if (addresses.length === 0) {\n    return;\n  }\n\n  const props = { userToken, addresses };\n  const result = withAbort\n    ? await abortableUnsubscribeNotifications(props)\n    : await callApi('unsubscribeNotifications', props);\n\n  if (result && 'aborted' in result) {\n    return;\n  }\n\n  global = getGlobal();\n\n  if (!result || !('ok' in result)) {\n    setGlobal(createNotificationAccount(\n      global,\n      accountId,\n      pushNotificationsAccount,\n    ));\n    return;\n  }\n\n  setGlobal(deleteNotificationAccount(global, accountId));\n});\n\naddActionHandler('createNotificationAccount', async (global, actions, { accountId, withAbort }) => {\n  const { userToken, platform } = global.pushNotifications;\n\n  if (!userToken || !platform) {\n    return;\n  }\n\n  const addresses = Object.values(selectNotificationTonAddressesSlow(global, [accountId]));\n  if (!addresses.length) {\n    return;\n  }\n\n  setGlobal(createNotificationAccount(\n    global,\n    accountId,\n    {},\n  ));\n\n  const props = { userToken, platform, addresses };\n  const result = withAbort\n    ? await abortableSubscribeNotifications(props)\n    : await callApi('subscribeNotifications', props);\n\n  if (result && 'aborted' in result) {\n    return;\n  }\n\n  global = getGlobal();\n\n  if (!result || !('ok' in result)) {\n    setGlobal(deleteNotificationAccount(\n      global,\n      accountId,\n    ));\n    return;\n  }\n\n  setGlobal(updateNotificationAccount(\n    global,\n    accountId,\n    result.addressKeys[addresses[0].address],\n  ));\n});\n\naddActionHandler('toggleNotifications', async (global, actions, { isEnabled }) => {\n  const {\n    enabledAccounts = {}, userToken = '', platform, isAvailable,\n  } = global.pushNotifications;\n\n  if (!isAvailable) {\n    return;\n  }\n\n  let notificationAccounts: Record<string, ApiNotificationAddress>;\n\n  if (isEnabled) {\n    notificationAccounts = selectNotificationTonAddressesSlow(\n      global,\n      Object.keys(selectAccounts(global) || {}),\n      MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT,\n    );\n    for (const newAccountId of Object.keys(notificationAccounts)) {\n      global = createNotificationAccount(global, newAccountId, {});\n    }\n  } else {\n    notificationAccounts = selectNotificationTonAddressesSlow(global, Object.keys(enabledAccounts));\n    global = deleteAllNotificationAccounts(global);\n  }\n\n  setGlobal(global);\n  if (isEmptyObject(notificationAccounts)) {\n    return;\n  }\n\n  const props = { userToken, addresses: Object.values(notificationAccounts), platform: platform! };\n  const result = isEnabled\n    ? await abortableSubscribeNotifications(props)\n    : await abortableUnsubscribeNotifications(props);\n\n  if (result && 'aborted' in result) {\n    return;\n  }\n\n  global = getGlobal();\n\n  if (!result || !('ok' in result)) {\n    if (isEnabled) {\n      global = deleteAllNotificationAccounts(global);\n    } else {\n      for (const accountId of Object.keys(notificationAccounts)) {\n        global = createNotificationAccount(global, accountId, enabledAccounts[accountId]);\n      }\n    }\n    setGlobal(global);\n    return;\n  }\n\n  if (isEnabled && 'addressKeys' in result) {\n    const addressKeys = (result as ApiSubscribeNotificationsResult).addressKeys;\n    for (const [accountId, { address }] of Object.entries(notificationAccounts)) {\n      if (addressKeys[address]) {\n        global = createNotificationAccount(global, accountId, addressKeys[address]);\n      }\n    }\n  }\n\n  setGlobal(global);\n});\n","import type { ApiNft } from '../../../api/types';\nimport type { GlobalState } from '../../types';\nimport { DomainLinkingState, DomainRenewalState } from '../../types';\n\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getActions, getGlobal, setGlobal } from '../../index';\nimport {\n  clearIsPinAccepted,\n  setIsPinAccepted,\n  updateCurrentDomainLinking,\n  updateCurrentDomainRenewal,\n} from '../../reducers';\nimport { selectCurrentAccount, selectCurrentAccountState, selectCurrentNetwork } from '../../selectors';\n\ntype DomainOperationResultError = { error: string } | undefined;\ntype DomainOperationResultSuccess = string;\ntype DomainOperationResult = Array<DomainOperationResultSuccess | DomainOperationResultError>;\ntype DomainOperationType = 'renewal' | 'linking';\n\ntype DomainStateUpdate<T extends DomainOperationType> = {\n  isLoading: boolean;\n  error?: string;\n  txId?: string;\n  state: T extends 'renewal' ? DomainRenewalState : DomainLinkingState;\n};\n\ntype DomainStateReducer<T extends DomainOperationType> = (\n  global: GlobalState,\n  update: DomainStateUpdate<T>,\n) => GlobalState;\n\nfunction handleDomainOperationResult<T extends DomainOperationType>(\n  global: GlobalState,\n  result: DomainOperationResult,\n  updateState: DomainStateReducer<T>,\n  state: T extends 'renewal' ? DomainRenewalState : DomainLinkingState,\n) {\n  global = updateState(global, {\n    isLoading: false,\n    state,\n    ...(result.length === 1 && typeof result[0] === 'string' ? { txId: result[0] } : undefined),\n  });\n  setGlobal(global);\n\n  if (result.some((value) => (typeof value !== 'string'))) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n    }\n    void vibrateOnError();\n    getActions().showError({ error: 'Failed to process domain operation. Please try again.' });\n    return;\n  }\n\n  void vibrateOnSuccess();\n}\n\nfunction prepareHardwareOperation<T extends DomainOperationType>(\n  global: GlobalState,\n  updateState: DomainStateReducer<T>,\n  state: T extends 'renewal' ? DomainRenewalState : DomainLinkingState,\n) {\n  global = updateState(global, {\n    isLoading: true,\n    error: undefined,\n    state,\n  });\n  setGlobal(global);\n\n  return getGlobal();\n}\n\nasync function verifyPasswordAndUpdateState(\n  global: GlobalState,\n  password: string,\n  operationType: DomainOperationType,\n) {\n  if (!(await callApi('verifyPassword', password))) {\n    const updateState = operationType === 'renewal' ? updateCurrentDomainRenewal : updateCurrentDomainLinking;\n    setGlobal(updateState(getGlobal(), { error: 'Wrong password, please try again.' }));\n    return false;\n  }\n\n  global = getGlobal();\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n\n  const updateState = operationType === 'renewal' ? updateCurrentDomainRenewal : updateCurrentDomainLinking;\n  global = updateState(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n  await vibrateOnSuccess(true);\n\n  return true;\n}\n\naddActionHandler('checkDomainsRenewalDraft', async (global, actions, { nfts }) => {\n  const accountId = global.currentAccountId!;\n\n  const result = await callApi('checkDnsRenewalDraft', accountId, nfts);\n  if (!result || 'error' in result) {\n    actions.showError({ error: result?.error });\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentDomainRenewal(global, { realFee: result.realFee });\n  setGlobal(global);\n});\n\naddActionHandler('submitDomainsRenewal', async (global, actions, { password }) => {\n  const accountId = global.currentAccountId!;\n  const nftsByAddress = selectCurrentAccountState(global)?.nfts?.byAddress;\n  if (!nftsByAddress) return;\n\n  if (!(await verifyPasswordAndUpdateState(global, password, 'renewal'))) {\n    return;\n  }\n\n  global = getGlobal();\n\n  const nftAddresses = global.currentDomainRenewal.addresses!;\n  const realFee = global.currentDomainRenewal.realFee!;\n  const nfts = nftAddresses\n    .map((address) => nftsByAddress[address])\n    .filter<ApiNft>(Boolean);\n\n  if (!nfts.length) return;\n  const result = await callApi('submitDnsRenewal', accountId, password, nfts, realFee) ?? [undefined];\n\n  handleDomainOperationResult<'renewal'>(\n    getGlobal(),\n    result.map((subResult) => (\n      subResult && 'activityIds' in subResult ? subResult.activityIds[0] : subResult\n    )),\n    updateCurrentDomainRenewal,\n    DomainRenewalState.Complete,\n  );\n});\n\naddActionHandler('submitDomainsRenewalHardware', async (global) => {\n  const accountId = global.currentAccountId!;\n  const nftsByAddress = selectCurrentAccountState(global)?.nfts?.byAddress;\n  if (!nftsByAddress) return;\n\n  global = prepareHardwareOperation<'renewal'>(\n    global,\n    updateCurrentDomainRenewal,\n    DomainRenewalState.ConfirmHardware,\n  );\n\n  const { realFee, addresses } = global.currentDomainRenewal;\n  const nfts = addresses!\n    .map((address) => nftsByAddress[address])\n    .filter<ApiNft>(Boolean);\n  const ledgerApi = await import('../../../util/ledger');\n  const result: DomainOperationResult = [];\n\n  for (const nft of nfts) {\n    const renewResult = await ledgerApi.submitLedgerDnsRenewal(\n      accountId,\n      nft,\n      realFee! / BigInt(nfts.length),\n    );\n    result.push(renewResult);\n  }\n\n  handleDomainOperationResult<'renewal'>(\n    getGlobal(),\n    result,\n    updateCurrentDomainRenewal,\n    DomainRenewalState.Complete,\n  );\n});\n\naddActionHandler('checkDomainLinkingDraft', async (global, actions, { nft }) => {\n  const accountId = global.currentAccountId!;\n  const currentAddress = selectCurrentAccount(global)!.addressByChain.ton!;\n\n  const result = await callApi('checkDnsChangeWalletDraft', accountId, nft, currentAddress);\n  if (!result || 'error' in result) {\n    actions.showError({ error: result?.error });\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentDomainLinking(global, { realFee: result.realFee });\n  setGlobal(global);\n});\n\naddActionHandler('submitDomainLinking', async (global, actions, { password }) => {\n  const accountId = global.currentAccountId!;\n  const network = selectCurrentNetwork(global);\n  const nftsByAddress = selectCurrentAccountState(global)?.nfts?.byAddress;\n  const nftAddress = global.currentDomainLinking.address!;\n  const realFee = global.currentDomainLinking.realFee!;\n  const nft = nftsByAddress?.[nftAddress];\n  const currentAddress = global.currentDomainLinking.walletAddress!;\n  const checkAddressResult = await callApi('getAddressInfo', network, currentAddress);\n\n  if (checkAddressResult && 'error' in checkAddressResult) {\n    actions.showError({ error: checkAddressResult.error });\n    return;\n  }\n\n  if (!nft\n    || !checkAddressResult\n    || ('resolvedAddress' in checkAddressResult && !checkAddressResult.resolvedAddress)\n  ) return;\n\n  if (!(await verifyPasswordAndUpdateState(global, password, 'linking'))) {\n    return;\n  }\n\n  const result = await callApi(\n    'submitDnsChangeWallet',\n    accountId,\n    password,\n    nft,\n    checkAddressResult.resolvedAddress!,\n    realFee,\n  );\n\n  handleDomainOperationResult<'linking'>(\n    getGlobal(),\n    [result && 'activityId' in result ? result.activityId : result],\n    updateCurrentDomainLinking,\n    DomainLinkingState.Complete,\n  );\n});\n\naddActionHandler('submitDomainLinkingHardware', async (global, actions) => {\n  const accountId = global.currentAccountId!;\n  const network = selectCurrentNetwork(global);\n  const nftsByAddress = selectCurrentAccountState(global)?.nfts?.byAddress;\n  const nft = nftsByAddress?.[global.currentDomainLinking.address!];\n  const currentAddress = global.currentDomainLinking.walletAddress!;\n  const checkAddressResult = await callApi('getAddressInfo', network, currentAddress);\n  global = getGlobal();\n\n  if (checkAddressResult && 'error' in checkAddressResult) {\n    actions.showError({ error: checkAddressResult.error });\n    return;\n  }\n\n  if (!nft\n    || !checkAddressResult\n    || ('resolvedAddress' in checkAddressResult && !checkAddressResult.resolvedAddress)\n  ) return;\n\n  global = prepareHardwareOperation<'linking'>(\n    global,\n    updateCurrentDomainLinking,\n    DomainLinkingState.ConfirmHardware,\n  );\n\n  const { realFee } = global.currentDomainLinking;\n  const ledgerApi = await import('../../../util/ledger');\n\n  const result = await ledgerApi.submitLedgerDnsChangeWallet(\n    accountId,\n    nft,\n    checkAddressResult.resolvedAddress!,\n    realFee!,\n  );\n\n  handleDomainOperationResult<'linking'>(\n    getGlobal(),\n    [result],\n    updateCurrentDomainLinking,\n    DomainLinkingState.Complete,\n  );\n});\n\naddActionHandler('checkLinkingAddress', async (global, actions, { address }) => {\n  if (!address) {\n    global = updateCurrentDomainLinking(global, { walletAddressName: undefined, resolvedWalletAddress: undefined });\n    setGlobal(global);\n\n    return;\n  }\n\n  const network = selectCurrentNetwork(global);\n  const result = await callApi('getAddressInfo', network, address);\n\n  global = getGlobal();\n  if (!result || 'error' in result) {\n    global = updateCurrentDomainLinking(global, { walletAddressName: undefined, resolvedWalletAddress: undefined });\n  } else {\n    global = updateCurrentDomainLinking(global, {\n      walletAddressName: result.addressName,\n      resolvedWalletAddress: result.resolvedAddress,\n    });\n  }\n  setGlobal(global);\n});\n","import { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { updateActivity } from '../../reducers';\nimport { selectAccountState } from '../../selectors';\n\naddActionHandler('fetchActivityDetails', async (global, actions, { id }) => {\n  const accountId = global.currentAccountId!;\n  const activity = selectAccountState(global, accountId)?.activities?.byId[id];\n\n  if (!activity?.shouldLoadDetails) {\n    return;\n  }\n\n  const newActivity = await callApi('fetchTonActivityDetails', accountId, activity);\n\n  if (!newActivity) {\n    return;\n  }\n\n  global = updateActivity(getGlobal(), accountId, newActivity);\n  setGlobal(global);\n});\n","import type { ApiLiquidStakingState } from '../../../api/types';\nimport type { Account } from '../../types';\n\nimport {\n  DEFAULT_STAKING_STATE,\n  IS_CORE_WALLET,\n  MTW_CARDS_COLLECTION,\n  TELEGRAM_GIFTS_SUPER_COLLECTION,\n} from '../../../config';\nimport { areDeepEqual } from '../../../util/areDeepEqual';\nimport { buildCollectionByKey, unique } from '../../../util/iteratees';\nimport { callActionInNative } from '../../../util/multitab';\nimport { openUrl } from '../../../util/openUrl';\nimport { IS_DELEGATING_BOTTOM_SHEET, IS_IOS_APP } from '../../../util/windowEnvironment';\nimport { addActionHandler, setGlobal } from '../../index';\nimport {\n  addNft,\n  addUnorderedNfts,\n  createAccount,\n  removeNft,\n  updateAccount,\n  updateAccountSettingsBackgroundNft,\n  updateAccountStaking,\n  updateAccountState,\n  updateBalances,\n  updateNft,\n  updateRestrictions,\n  updateSettings,\n  updateStakingDefault,\n  updateSwapTokens,\n  updateTokens,\n  updateVesting,\n  updateVestingInfo,\n} from '../../reducers';\nimport {\n  selectAccount,\n  selectAccountNftByAddress,\n  selectAccountState,\n  selectVestingPartsReadyToUnfreeze,\n} from '../../selectors';\n\naddActionHandler('apiUpdate', (global, actions, update) => {\n  switch (update.type) {\n    case 'updateBalances': {\n      global = updateBalances(global, update.accountId, update.chain, update.balances);\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateStaking': {\n      const {\n        accountId,\n        states,\n        totalProfit,\n        shouldUseNominators,\n      } = update;\n\n      const stateById = buildCollectionByKey(states, 'id');\n\n      global = updateStakingDefault(global, {\n        ...stateById[DEFAULT_STAKING_STATE.id] as ApiLiquidStakingState,\n        balance: 0n,\n        unstakeRequestAmount: 0n,\n        tokenBalance: 0n,\n      });\n      global = updateAccountStaking(global, accountId, {\n        stateById,\n        shouldUseNominators,\n        totalProfit,\n      });\n\n      const { stakingId } = selectAccountState(global, accountId)?.staking ?? {};\n\n      if (!stakingId) {\n        const stateWithBiggestBalance = [...states].sort(\n          (state0, state1) => Number(state1.balance - state0.balance),\n        )[0];\n\n        if (stateWithBiggestBalance && stateWithBiggestBalance.balance > 0n) {\n          global = updateAccountStaking(global, accountId, {\n            stakingId: stateWithBiggestBalance.id,\n          });\n        } else if (shouldUseNominators && stateById.nominators) {\n          global = updateAccountStaking(global, accountId, {\n            stakingId: stateById.nominators.id,\n          });\n        }\n      }\n\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateTokens': {\n      const { tokens, baseCurrency } = update;\n      global = updateTokens(global, tokens, true);\n      global = updateSettings(global, {\n        baseCurrency,\n      });\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateSwapTokens': {\n      global = updateSwapTokens(global, update.tokens);\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'updateNfts': {\n      const { accountId, shouldAppend } = update;\n      const nfts = buildCollectionByKey(update.nfts, 'address');\n      const currentNfts = selectAccountState(global, accountId)?.nfts;\n      const newOrderedAddresses = Object.keys(nfts);\n\n      global = updateAccountState(global, accountId, {\n        nfts: {\n          ...currentNfts,\n          byAddress: { ...nfts, ...currentNfts?.byAddress },\n          orderedAddresses: unique(\n            shouldAppend\n              ? ([] as string[]).concat(currentNfts?.orderedAddresses ?? [], newOrderedAddresses)\n              : ([] as string[]).concat(newOrderedAddresses, currentNfts?.orderedAddresses ?? []),\n          ),\n        },\n      });\n\n      if (!IS_CORE_WALLET) {\n        update.nfts.forEach((nft) => {\n          if (nft.collectionAddress === MTW_CARDS_COLLECTION) {\n            global = updateAccountSettingsBackgroundNft(global, nft);\n          }\n        });\n      }\n\n      const hasTelegramGifts = update.nfts.some((nft) => nft.isTelegramGift);\n      if (hasTelegramGifts) {\n        actions.addCollectionTab({\n          collectionAddress: TELEGRAM_GIFTS_SUPER_COLLECTION,\n          isAuto: true,\n        });\n      }\n\n      setGlobal(global);\n\n      actions.checkCardNftOwnership();\n      break;\n    }\n\n    case 'nftSent': {\n      const { accountId, nftAddress, newOwnerAddress } = update;\n      const sentNft = selectAccountNftByAddress(global, accountId, nftAddress);\n      global = removeNft(global, accountId, nftAddress);\n\n      if (sentNft?.collectionAddress === MTW_CARDS_COLLECTION) {\n        sentNft.ownerAddress = newOwnerAddress;\n        global = updateAccountSettingsBackgroundNft(global, sentNft);\n      }\n      setGlobal(global);\n\n      actions.checkCardNftOwnership();\n      break;\n    }\n\n    case 'nftReceived': {\n      const { accountId, nft } = update;\n      global = addNft(global, accountId, nft);\n      setGlobal(global);\n\n      if (!IS_CORE_WALLET) {\n        actions.checkCardNftOwnership();\n        // If a user received an NFT card from the MyTonWallet collection, it is applied immediately\n        if (nft.collectionAddress === MTW_CARDS_COLLECTION) {\n          actions.setCardBackgroundNft({ nft });\n          actions.installAccentColorFromNft({ nft });\n        }\n      }\n      break;\n    }\n\n    case 'nftPutUpForSale': {\n      const { accountId, nftAddress } = update;\n      global = updateNft(global, accountId, nftAddress, {\n        isOnSale: true,\n      });\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateAccount': {\n      const { accountId, chain, domain, address } = update;\n      const account = selectAccount(global, accountId);\n      if (!account) {\n        break;\n      }\n\n      const accountUpdate: Partial<Account> = {};\n      if (address) {\n        accountUpdate.addressByChain = {\n          ...account.addressByChain,\n          [chain]: address,\n        };\n      }\n      if (domain !== undefined) {\n        accountUpdate.domainByChain = {\n          ...account.domainByChain,\n          [chain]: domain || undefined,\n        };\n      }\n      global = updateAccount(global, accountId, accountUpdate);\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateConfig': {\n      const {\n        isLimited: isLimitedRegion,\n        isCopyStorageEnabled,\n        supportAccountsCount,\n        countryCode,\n        isAppUpdateRequired,\n      } = update;\n\n      const shouldRestrictSwapsAndOnRamp = (IS_IOS_APP && isLimitedRegion) || IS_CORE_WALLET;\n      global = updateRestrictions(global, {\n        isLimitedRegion,\n        isSwapDisabled: shouldRestrictSwapsAndOnRamp,\n        isOnRampDisabled: shouldRestrictSwapsAndOnRamp,\n        isNftBuyingDisabled: shouldRestrictSwapsAndOnRamp,\n        isCopyStorageEnabled,\n        supportAccountsCount,\n        countryCode,\n      });\n      global = { ...global, isAppUpdateRequired: IS_CORE_WALLET ? undefined : isAppUpdateRequired };\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateWalletVersions': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateWalletVersions', update);\n      }\n\n      actions.apiUpdateWalletVersions(update);\n      break;\n    }\n\n    case 'openUrl': {\n      void openUrl(update.url, { isExternal: update.isExternal, title: update.title, subtitle: update.subtitle });\n      break;\n    }\n\n    case 'requestReconnectApi': {\n      actions.initApi();\n      break;\n    }\n\n    case 'incorrectTime': {\n      if (!global.isIncorrectTimeNotificationReceived) {\n        actions.showIncorrectTimeError();\n      }\n      break;\n    }\n\n    case 'updateVesting': {\n      const { accountId, vestingInfo } = update;\n      const unfreezeRequestedIds = selectVestingPartsReadyToUnfreeze(global, accountId);\n      global = updateVestingInfo(global, accountId, vestingInfo);\n      const newUnfreezeRequestedIds = selectVestingPartsReadyToUnfreeze(global, accountId);\n      if (!areDeepEqual(unfreezeRequestedIds, newUnfreezeRequestedIds)) {\n        global = updateVesting(global, accountId, { unfreezeRequestedIds: undefined });\n      }\n      setGlobal(global);\n      break;\n    }\n\n    case 'updatingStatus': {\n      const { kind, accountId, isUpdating } = update;\n      const key = kind === 'balance' ? 'balanceUpdateStartedAt' : 'activitiesUpdateStartedAt';\n      const accountState = selectAccountState(global, accountId);\n      if (isUpdating && accountState?.[key]) break;\n\n      setGlobal(updateAccountState(global, accountId, {\n        [key]: isUpdating ? Date.now() : undefined,\n      }));\n      break;\n    }\n\n    // Should be removed in future versions\n    case 'migrateCoreApplication': {\n      const {\n        accountId,\n        isTestnet,\n        address,\n        secondAddress,\n        secondAccountId,\n        isTonProxyEnabled,\n        isTonMagicEnabled,\n      } = update;\n\n      global = updateSettings(global, { isTestnet });\n      global = createAccount({\n        global,\n        accountId,\n        type: 'mnemonic',\n        addressByChain: { ton: address },\n      });\n      global = createAccount({\n        global,\n        accountId: secondAccountId,\n        type: 'mnemonic',\n        addressByChain: { ton: secondAddress },\n        network: isTestnet ? 'mainnet' : 'testnet', // Second account should be created on opposite network\n      });\n      setGlobal(global);\n\n      // Run the application only after the post-migration GlobalState has been applied\n      requestAnimationFrame(() => {\n        actions.tryAddNotificationAccount({ accountId });\n        actions.switchAccount({ accountId, newNetwork: isTestnet ? 'testnet' : 'mainnet' });\n        actions.afterSignIn();\n\n        if (isTonMagicEnabled) {\n          actions.toggleTonMagic({ isEnabled: true });\n        }\n        if (isTonProxyEnabled) {\n          actions.toggleTonProxy({ isEnabled: true });\n        }\n      });\n      break;\n    }\n\n    case 'updateAccountConfig': {\n      const { accountConfig, accountId } = update;\n      global = updateAccountState(global, accountId, { config: accountConfig });\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateAccountDomainData': {\n      const {\n        accountId,\n        expirationByAddress,\n        linkedAddressByAddress,\n        nfts: updatedNfts,\n      } = update;\n      const nfts = selectAccountState(global, accountId)?.nfts || { byAddress: {} };\n\n      global = updateAccountState(global, accountId, {\n        nfts: {\n          ...nfts,\n          dnsExpiration: expirationByAddress,\n          linkedAddressByAddress,\n        },\n      });\n      global = addUnorderedNfts(global, accountId, updatedNfts);\n      setGlobal(global);\n      break;\n    }\n  }\n});\n","import { registerPlugin } from \"@capacitor/core\";\nconst NativeAudio = registerPlugin(\"NativeAudio\", {\n    web: () => import(\"./web\").then((m) => new m.NativeAudioWeb()),\n});\nexport * from \"./definitions\";\nexport { NativeAudio };\n//# sourceMappingURL=index.js.map","import { NativeAudio } from '@capgo/native-audio';\n\nimport { IS_CAPACITOR } from '../config';\nimport { SECOND } from './dateFormat';\nimport { logDebug, logDebugError } from './logs';\nimport { debounce } from './schedulers';\nimport { IS_DELEGATED_BOTTOM_SHEET } from './windowEnvironment';\n\nimport incomingTransactionSound from '../assets/incoming-transaction.mp3';\n\nconst DEBOUNCE_MS = SECOND;\n\nconst AudioContextConstructor = window.AudioContext || window.webkitAudioContext;\nconst audioContext = new AudioContextConstructor();\nlet audioBuffer: AudioBuffer | undefined;\nlet isSoundInitialized = IS_CAPACITOR || audioContext.state === 'running';\n\n// Workaround: this function is called once on the first user interaction.\n// After that, it will be possible to play the notification without problems.\n// https://developer.chrome.com/blog/autoplay?hl=ru#webaudio\nexport function initializeSounds() {\n  if (isSoundInitialized) return;\n\n  audioContext\n    .resume()\n    .then(() => {\n      isSoundInitialized = true;\n    })\n    .catch((err: any) => {\n      logDebugError('appSounds:initializeSounds', err);\n    });\n}\n\nasync function loadSound() {\n  const audioSettings = {\n    assetId: 'incomingTransactionSound',\n    assetPath: 'public/incoming-transaction.mp3',\n    audioChannelNum: 1,\n    isUrl: false,\n  };\n\n  if (IS_CAPACITOR) {\n    if (await NativeAudio.isPreloaded(audioSettings)) {\n      return;\n    }\n\n    NativeAudio.preload(audioSettings).catch((err: any) => {\n      logDebugError('appSounds:loadSound', err);\n    });\n  } else {\n    fetch(incomingTransactionSound)\n      .then((response) => response.arrayBuffer())\n      .then((arrayBuffer) => audioContext.decodeAudioData(arrayBuffer))\n      .then((decodedAudioBuffer) => {\n        audioBuffer = decodedAudioBuffer;\n      })\n      .catch((err: any) => {\n        logDebugError('appSounds:loadSound', err);\n      });\n  }\n}\n\nvoid loadSound();\n\nexport const playIncomingTransactionSound = debounce(() => {\n  if (IS_DELEGATED_BOTTOM_SHEET) return;\n\n  if (!isSoundInitialized) {\n    logDebug('appSounds:playIncomingTransactionSound', 'sound is not initialized');\n    return;\n  }\n\n  if (IS_CAPACITOR) {\n    NativeAudio\n      .play({\n        assetId: 'incomingTransactionSound',\n      })\n      .catch((err: any) => {\n        logDebugError('appSounds:playIncomingTransactionSound', err);\n      });\n    return;\n  }\n\n  if (!audioBuffer) {\n    logDebug('playIncomingTransactionSound', 'audioBuffer is not loaded');\n    return;\n  }\n\n  const source = audioContext.createBufferSource();\n  source.buffer = audioBuffer;\n  source.connect(audioContext.destination);\n  source.start(0);\n}, DEBOUNCE_MS, true, false);\n","import type { ApiActivity, ApiChain, ApiTransactionActivity } from '../../../api/types';\nimport type { GlobalState } from '../../types';\nimport { TransferState } from '../../types';\n\nimport {\n  IS_CORE_WALLET,\n  MINT_CARD_ADDRESS,\n  MINT_CARD_REFUND_COMMENT,\n  MTW_CARDS_COLLECTION,\n} from '../../../config';\nimport { doesLocalActivityMatch, getActivityIdReplacements } from '../../../util/activities';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { playIncomingTransactionSound } from '../../../util/notificationSound';\nimport { getIsTransactionWithPoisoning } from '../../../util/poisoningHash';\nimport { waitFor } from '../../../util/schedulers';\nimport { getChainBySlug, getIsTonToken } from '../../../util/tokens';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n} from '../../../util/windowEnvironment';\nimport { SEC } from '../../../api/constants';\nimport { getIsTinyOrScamTransaction } from '../../helpers';\nimport { addActionHandler, getActions, getGlobal, setGlobal } from '../../index';\nimport {\n  addInitialActivities,\n  addNewActivities,\n  addNft,\n  clearIsPinAccepted,\n  removeActivities,\n  replaceCurrentActivityId,\n  replaceCurrentDomainLinkingId,\n  replaceCurrentDomainRenewalId,\n  replaceCurrentSwapId,\n  replaceCurrentTransferId,\n  replacePendingActivities,\n  updateAccountState,\n  updateCurrentTransfer,\n} from '../../reducers';\nimport {\n  selectAccountState,\n  selectAccountTokens,\n  selectLocalActivitiesSlow,\n  selectPendingActivitiesSlow,\n  selectRecentNonLocalActivitiesSlow,\n} from '../../selectors';\n\nconst TX_AGE_TO_PLAY_SOUND = 60000; // 1 min\nconst PRELOAD_ACTIVITY_TOKEN_COUNT = 10;\n\naddActionHandler('apiUpdate', (global, actions, update) => {\n  switch (update.type) {\n    case 'initialActivities': {\n      const { accountId, mainActivities, bySlug, chain } = update;\n\n      global = addInitialActivities(global, accountId, mainActivities, bySlug, chain);\n      setGlobal(global);\n\n      void preloadTopTokenHistory(accountId, chain);\n      break;\n    }\n\n    case 'newLocalActivities': {\n      const {\n        accountId,\n        activities,\n      } = update;\n\n      hideOutdatedLocalActivities(global, accountId, activities);\n      global = addNewActivities(global, accountId, activities);\n\n      for (const activity of activities) {\n        if (activity.kind === 'transaction' && -activity.amount === global.currentTransfer.amount) {\n          global = updateCurrentTransfer(global, {\n            txId: activity.txId,\n            state: TransferState.Complete,\n            isLoading: false,\n          });\n\n          if (getDoesUsePinPad()) {\n            global = clearIsPinAccepted(global);\n          }\n\n          if (getIsTonToken(activity.slug)) {\n            actions.fetchTransferDieselState({ tokenSlug: activity.slug });\n          }\n        }\n      }\n\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'newActivities': {\n      if (IS_DELEGATING_BOTTOM_SHEET && !update.noForward) {\n        // Local transaction in NBS was not updated after nft/transfer sending was completed\n        callActionInNative('apiUpdate', { ...update, noForward: true });\n      }\n      if (IS_DELEGATED_BOTTOM_SHEET && !update.noForward) {\n        // A local swap transaction is not created if the NBS is closed before the exchange is completed\n        callActionInMain('apiUpdate', { ...update, noForward: true });\n      }\n      const { accountId, activities: newConfirmedActivities, pendingActivities, chain } = update;\n\n      const replacedIds = getActivityIdReplacements(\n        [\n          ...selectLocalActivitiesSlow(global, accountId),\n          ...(chain ? selectPendingActivitiesSlow(global, accountId, chain) : []),\n        ],\n        [\n          ...(pendingActivities ?? []),\n          ...newConfirmedActivities,\n        ],\n      );\n\n      // A good TON address for testing: UQD5mxRgCuRNLxKxeOjG6r14iSroLF5FtomPnet-sgP5xI-e\n      global = removeActivities(global, accountId, Object.keys(replacedIds));\n      if (chain && pendingActivities !== undefined) {\n        global = replacePendingActivities(global, accountId, chain, pendingActivities);\n      }\n      global = addNewActivities(global, accountId, newConfirmedActivities);\n\n      global = replaceCurrentTransferId(global, replacedIds);\n      global = replaceCurrentDomainLinkingId(global, replacedIds);\n      global = replaceCurrentDomainRenewalId(global, replacedIds);\n      global = replaceCurrentSwapId(global, replacedIds);\n      global = replaceCurrentActivityId(global, accountId, replacedIds);\n      notifyAboutNewActivities(global, newConfirmedActivities);\n\n      if (!IS_CORE_WALLET) {\n        // NFT polling is executed at long intervals, so it is more likely that a user will see a new transaction\n        // rather than receiving a card in the collection. Therefore, when a new activity occurs,\n        // we check for a card from the MyTonWallet collection and apply it.\n        global = processCardMintingActivity(global, accountId, newConfirmedActivities);\n      }\n\n      setGlobal(global);\n      break;\n    }\n  }\n});\n\nfunction notifyAboutNewActivities(global: GlobalState, newActivities: ApiActivity[]) {\n  if (!global.settings.canPlaySounds) {\n    return;\n  }\n\n  const shouldPlaySound = newActivities.some((activity) => {\n    return activity.kind === 'transaction'\n      && activity.isIncoming\n      && activity.status === 'completed'\n      && (Date.now() - activity.timestamp < TX_AGE_TO_PLAY_SOUND)\n      && !(\n        global.settings.areTinyTransfersHidden\n        && getIsTinyOrScamTransaction(activity, global.tokenInfo?.bySlug[activity.slug])\n      )\n      && !getIsTransactionWithPoisoning(activity);\n  });\n\n  if (shouldPlaySound) {\n    playIncomingTransactionSound();\n  }\n}\n\nfunction processCardMintingActivity(global: GlobalState, accountId: string, activities: ApiActivity[]): GlobalState {\n  const { isCardMinting } = selectAccountState(global, accountId) || {};\n\n  if (!isCardMinting || !activities.length) {\n    return global;\n  }\n\n  const mintCardActivity = activities.find((activity) => {\n    return activity.kind === 'transaction'\n      && activity.isIncoming\n      && activity?.nft?.collectionAddress === MTW_CARDS_COLLECTION;\n  });\n\n  const refundActivity = activities.find((activity) => {\n    return activity.kind === 'transaction'\n      && activity.isIncoming\n      && activity.fromAddress === MINT_CARD_ADDRESS\n      && activity?.comment === MINT_CARD_REFUND_COMMENT;\n  });\n\n  if (mintCardActivity) {\n    const nft = (mintCardActivity as ApiTransactionActivity).nft!;\n\n    global = updateAccountState(global, accountId, { isCardMinting: undefined });\n    global = addNft(global, accountId, nft);\n    getActions().setCardBackgroundNft({ nft });\n    getActions().installAccentColorFromNft({ nft });\n  } else if (refundActivity) {\n    global = updateAccountState(global, accountId, { isCardMinting: undefined });\n  }\n\n  return global;\n}\n\n/**\n * Thanks to the socket, there is a possibility that a pending activity will arrive before the corresponding local\n * activity. Such local activities duplicate the pending activities, which is unwanted. They shouldn't be removed,\n * because other parts of the global state may point to their ids, so they get hidden instead.\n */\nfunction hideOutdatedLocalActivities(global: GlobalState, accountId: string, localActivities: ApiActivity[]) {\n  const maxCheckDepth = localActivities.length + 20;\n  const chainActivities = selectRecentNonLocalActivitiesSlow(global, accountId, maxCheckDepth);\n\n  for (const localActivity of localActivities) {\n    localActivity.shouldHide ||= chainActivities.some((chainActivity) => {\n      return doesLocalActivityMatch(localActivity, chainActivity);\n    });\n  }\n\n  return localActivities;\n}\n\nasync function preloadTopTokenHistory(accountId: string, chain: ApiChain) {\n  await waitFor(() => !!selectAccountTokens(getGlobal(), accountId), SEC, 10);\n  const global = getGlobal();\n\n  const tokens = (selectAccountTokens(global, accountId) ?? [])\n    .slice(0, PRELOAD_ACTIVITY_TOKEN_COUNT)\n    .filter((token) => getChainBySlug(token.slug) === chain);\n\n  const { idsBySlug } = selectAccountState(global, accountId)?.activities || {};\n  const { fetchPastActivities } = getActions();\n\n  for (const { slug } of tokens) {\n    if (idsBySlug?.[slug] === undefined) {\n      fetchPastActivities({ slug });\n    }\n  }\n}\n","import { SignDataState, TransferState } from '../../types';\n\nimport { TONCOIN } from '../../../config';\nimport { processDeeplink } from '../../../util/deeplink';\nimport { callActionInNative } from '../../../util/multitab';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, setGlobal } from '../../index';\nimport {\n  clearCurrentDappTransfer,\n  clearCurrentSignature,\n  clearCurrentTransfer,\n  clearDappConnectRequest,\n  updateCurrentDappSignData,\n  updateCurrentDappTransfer,\n  updateCurrentSignature,\n  updateCurrentTransfer,\n} from '../../reducers';\n\naddActionHandler('apiUpdate', (global, actions, update) => {\n  switch (update.type) {\n    case 'createTransaction': {\n      const {\n        promiseId,\n        amount,\n        toAddress,\n        fee,\n        realFee,\n        comment,\n        rawPayload,\n        parsedPayload,\n        stateInit,\n      } = update;\n\n      global = clearCurrentTransfer(global);\n      global = updateCurrentTransfer(global, {\n        state: TransferState.Confirm,\n        toAddress,\n        amount,\n        fee,\n        realFee,\n        comment,\n        promiseId,\n        tokenSlug: TONCOIN.slug,\n        rawPayload,\n        parsedPayload,\n        stateInit,\n      });\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'createSignature': {\n      const { promiseId, dataHex } = update;\n\n      global = clearCurrentSignature(global);\n      global = updateCurrentSignature(global, {\n        promiseId,\n        dataHex,\n      });\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'showError': {\n      const { error } = update;\n      actions.showError({ error });\n\n      break;\n    }\n\n    case 'dappConnect': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappConnect', update);\n      }\n\n      actions.apiUpdateDappConnect(update);\n\n      break;\n    }\n\n    case 'dappConnectComplete': {\n      global = clearDappConnectRequest(global);\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'dappDisconnect': {\n      const { url } = update;\n\n      if (global.currentDappTransfer.dapp?.url === url) {\n        global = clearCurrentDappTransfer(global);\n        setGlobal(global);\n      }\n      break;\n    }\n\n    case 'dappLoading': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappLoading', update);\n      }\n\n      actions.apiUpdateDappLoading(update);\n\n      break;\n    }\n\n    case 'dappCloseLoading': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappCloseLoading', update);\n      }\n\n      actions.apiUpdateDappCloseLoading(update);\n\n      break;\n    }\n\n    case 'dappSendTransactions': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappSendTransaction', update);\n      }\n\n      actions.apiUpdateDappSendTransaction(update);\n      break;\n    }\n\n    case 'dappSignData': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappSignData', update);\n      }\n\n      actions.apiUpdateDappSignData(update);\n      break;\n    }\n\n    case 'updateDapps': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('getDapps');\n      }\n\n      actions.getDapps();\n      break;\n    }\n\n    case 'prepareTransaction': {\n      const {\n        amount,\n        toAddress,\n        comment,\n        binPayload,\n      } = update;\n\n      global = clearCurrentTransfer(global);\n      global = updateCurrentTransfer(global, {\n        state: TransferState.Initial,\n        toAddress,\n        amount: amount ?? 0n,\n        comment,\n        tokenSlug: TONCOIN.slug,\n        binPayload,\n      });\n\n      setGlobal(global);\n      break;\n    }\n\n    case 'processDeeplink': {\n      const { url } = update;\n\n      void processDeeplink(url);\n      break;\n    }\n\n    case 'dappTransferComplete': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdate', update);\n      }\n\n      if (global.currentDappTransfer.state !== TransferState.None) {\n        global = updateCurrentDappTransfer(global, {\n          state: TransferState.Complete,\n          isLoading: false,\n        });\n        setGlobal(global);\n      }\n      break;\n    }\n\n    case 'dappSignDataComplete': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdate', update);\n      }\n\n      if (global.currentDappSignData.state !== SignDataState.None) {\n        global = updateCurrentDappSignData(global, {\n          state: SignDataState.Complete,\n          isLoading: false,\n        });\n        setGlobal(global);\n      }\n      break;\n    }\n  }\n});\n","import type { AnimationLevel } from '../global/types';\n\nimport { ANIMATION_LEVEL_MAX, ANIMATION_LEVEL_MED, ANIMATION_LEVEL_MIN } from '../config';\n\nconst ANIMATION_LEVEL_OPTIONS = [\n  ANIMATION_LEVEL_MIN,\n  ANIMATION_LEVEL_MED,\n  ANIMATION_LEVEL_MAX,\n];\n\nexport default function switchAnimationLevel(level: AnimationLevel) {\n  const levelClassName = `animation-level-${level}`;\n  if (document.documentElement.classList.contains(levelClassName)) {\n    return;\n  }\n\n  ANIMATION_LEVEL_OPTIONS.forEach((currentLevel) => {\n    document.documentElement.classList.toggle(`animation-level-${currentLevel}`, currentLevel === level);\n  });\n}\n","import type {\n  Account, AccountSettings, AccountState, NotificationType,\n} from '../../types';\nimport { ApiAuthError, ApiCommonError, ApiTransactionDraftError, ApiTransactionError } from '../../../api/types';\nimport { AppState } from '../../types';\n\nimport {\n  DEFAULT_SWAP_FIRST_TOKEN_SLUG,\n  DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  DEFAULT_TRANSFER_TOKEN_SLUG,\n  IS_CAPACITOR,\n  IS_EXTENSION,\n  IS_TELEGRAM_APP,\n  TONCOIN,\n} from '../../../config';\nimport { requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport { parseAccountId } from '../../../util/account';\nimport authApi from '../../../util/authApi';\nimport { initCapacitorWithGlobal } from '../../../util/capacitor';\nimport { processDeeplinkAfterSignIn } from '../../../util/deeplink';\nimport { omit } from '../../../util/iteratees';\nimport { clearPreviousLangpacks, setLanguage } from '../../../util/langProvider';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { initializeSounds } from '../../../util/notificationSound';\nimport switchAnimationLevel from '../../../util/switchAnimationLevel';\nimport switchTheme, { setStatusBarStyle } from '../../../util/switchTheme';\nimport { initTelegramWithGlobal } from '../../../util/telegram';\nimport {\n  getIsMobileTelegramApp,\n  IS_ANDROID,\n  IS_ANDROID_APP,\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n  IS_ELECTRON,\n  IS_IOS,\n  IS_LINUX,\n  IS_MAC_OS,\n  IS_OPERA,\n  IS_SAFARI,\n  IS_WINDOWS,\n  setScrollbarWidthProperty,\n} from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { updateCurrentAccountId, updateCurrentAccountState } from '../../reducers';\nimport {\n  selectCurrentNetwork,\n  selectNetworkAccounts,\n  selectNetworkAccountsMemoized,\n  selectNewestActivityTimestamps,\n  selectSwapTokens,\n} from '../../selectors';\n\nconst ANIMATION_DELAY_MS = 320;\n\naddActionHandler('init', (_, actions) => {\n  requestMutation(() => {\n    const { documentElement } = document;\n\n    if (IS_IOS) {\n      documentElement.classList.add('is-ios', 'is-mobile');\n    } else if (IS_ANDROID) {\n      documentElement.classList.add('is-android', 'is-mobile');\n      if (IS_ANDROID_APP) {\n        documentElement.classList.add('is-android-app');\n      }\n    } else if (IS_MAC_OS) {\n      documentElement.classList.add('is-macos');\n    } else if (IS_WINDOWS) {\n      documentElement.classList.add('is-windows');\n    } else if (IS_LINUX) {\n      documentElement.classList.add('is-linux');\n    }\n    if (IS_SAFARI) {\n      documentElement.classList.add('is-safari');\n    }\n    if (IS_OPERA) {\n      documentElement.classList.add('is-opera');\n    }\n    if (IS_EXTENSION) {\n      documentElement.classList.add('is-extension');\n    }\n    if (IS_ELECTRON) {\n      documentElement.classList.add('is-electron');\n    }\n    if (IS_TELEGRAM_APP) {\n      documentElement.classList.add('is-telegram-app');\n    }\n    if (getIsMobileTelegramApp()) {\n      documentElement.classList.add('is-mobile-telegram-app');\n    }\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      documentElement.classList.add('is-native-bottom-sheet');\n    }\n\n    setScrollbarWidthProperty();\n\n    actions.afterInit();\n  });\n});\n\naddActionHandler('afterInit', (global) => {\n  const {\n    theme, animationLevel, langCode, authConfig,\n  } = global.settings;\n\n  switchTheme(theme);\n  switchAnimationLevel(animationLevel);\n  setStatusBarStyle({\n    forceDarkBackground: false,\n  });\n  void setLanguage(langCode);\n  clearPreviousLangpacks();\n\n  if (IS_CAPACITOR) {\n    void initCapacitorWithGlobal(authConfig);\n  } else {\n    if (IS_TELEGRAM_APP) {\n      initTelegramWithGlobal(global);\n    }\n\n    document.addEventListener('click', initializeSounds, { once: true });\n  }\n});\n\naddActionHandler('afterSignIn', (global, actions) => {\n  setGlobal({ ...global, appState: AppState.Main });\n\n  setTimeout(() => {\n    actions.resetAuth();\n\n    processDeeplinkAfterSignIn();\n  }, ANIMATION_DELAY_MS);\n});\n\naddActionHandler('afterSignOut', (global, actions, payload) => {\n  if (payload?.shouldReset) {\n    if (global.settings.authConfig?.kind === 'native-biometrics') {\n      void authApi.removeNativeBiometrics();\n    }\n    actions.setInMemoryPassword({ password: undefined, force: true });\n\n    actions.resetApiSettings({ areAllDisabled: true });\n  }\n});\n\naddActionHandler('showDialog', (global, actions, payload) => {\n  const newDialogs = [...global.dialogs];\n  const existingMessageIndex = newDialogs.findIndex((dialog) => dialog.message === payload.message);\n  if (existingMessageIndex !== -1) {\n    newDialogs.splice(existingMessageIndex, 1);\n  }\n\n  newDialogs.push(payload);\n\n  return {\n    ...global,\n    dialogs: newDialogs,\n  };\n});\n\naddActionHandler('dismissDialog', (global) => {\n  if (IS_DELEGATING_BOTTOM_SHEET) {\n    callActionInNative('dismissDialog');\n  }\n\n  const newDialogs = [...global.dialogs];\n\n  newDialogs.pop();\n\n  return {\n    ...global,\n    dialogs: newDialogs,\n  };\n});\n\naddActionHandler('selectToken', (global, actions, { slug } = {}) => {\n  if (slug) {\n    const isToncoin = slug === TONCOIN.slug;\n    const tokens = selectSwapTokens(global);\n\n    if (isToncoin || tokens?.some((token) => token.slug === slug)) {\n      if (isToncoin) {\n        actions.setDefaultSwapParams({ tokenInSlug: DEFAULT_SWAP_SECOND_TOKEN_SLUG, tokenOutSlug: slug });\n      } else {\n        actions.setDefaultSwapParams({ tokenOutSlug: slug });\n      }\n      actions.changeTransferToken({ tokenSlug: slug });\n    }\n  } else {\n    const currentActivityToken = global.byAccountId[global.currentAccountId!].currentTokenSlug;\n\n    const isDefaultFirstTokenOutSwap = global.currentSwap.tokenOutSlug === DEFAULT_SWAP_FIRST_TOKEN_SLUG\n      && global.currentSwap.tokenInSlug === DEFAULT_SWAP_SECOND_TOKEN_SLUG;\n\n    const shouldResetSwap = global.currentSwap.tokenOutSlug === currentActivityToken\n      && (\n        (\n          global.currentSwap.tokenInSlug === DEFAULT_SWAP_FIRST_TOKEN_SLUG\n          && global.currentSwap.tokenOutSlug !== DEFAULT_SWAP_SECOND_TOKEN_SLUG\n        )\n        || isDefaultFirstTokenOutSwap\n      );\n\n    if (shouldResetSwap) {\n      actions.setDefaultSwapParams({ tokenInSlug: undefined, tokenOutSlug: undefined, withResetAmount: true });\n    }\n\n    const shouldResetTransfer = (global.currentTransfer.tokenSlug === currentActivityToken\n      && global.currentTransfer.tokenSlug !== DEFAULT_TRANSFER_TOKEN_SLUG)\n    && !global.currentTransfer.nfts?.length;\n\n    if (shouldResetTransfer) {\n      actions.changeTransferToken({ tokenSlug: DEFAULT_TRANSFER_TOKEN_SLUG, withResetAmount: true });\n    }\n  }\n\n  return updateCurrentAccountState(global, { currentTokenSlug: slug });\n});\n\naddActionHandler('showError', (global, actions, { error } = {}) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showError', { error });\n    return;\n  }\n\n  switch (error) {\n    case ApiTransactionDraftError.InvalidAmount:\n      actions.showDialog({ message: 'Invalid amount' });\n      break;\n\n    case ApiAuthError.InvalidAddress:\n    case ApiTransactionDraftError.InvalidToAddress:\n      actions.showDialog({ message: 'Invalid address' });\n      break;\n\n    case ApiTransactionDraftError.InvalidStateInit:\n      actions.showDialog({ message: '$state_init_invalid' });\n      break;\n\n    case ApiTransactionDraftError.InsufficientBalance:\n      actions.showDialog({ message: 'Insufficient balance' });\n      break;\n\n    case ApiAuthError.DomainNotResolved:\n    case ApiTransactionDraftError.DomainNotResolved:\n      actions.showDialog({ message: 'Domain is not connected to a wallet' });\n      break;\n\n    case ApiTransactionDraftError.WalletNotInitialized:\n      actions.showDialog({\n        message: 'Encryption is not possible. The recipient is not a wallet or has no outgoing transactions.',\n      });\n      break;\n\n    case ApiTransactionDraftError.InvalidAddressFormat:\n      actions.showDialog({\n        message: 'Invalid address format. Only URL Safe Base64 format is allowed.',\n      });\n      break;\n\n    case ApiTransactionError.PartialTransactionFailure:\n      actions.showDialog({ message: 'Not all transactions were sent successfully' });\n      break;\n\n    case ApiTransactionError.IncorrectDeviceTime:\n      actions.showDialog({ message: 'The time on your device is incorrect, sync it and try again' });\n      break;\n\n    case ApiTransactionError.UnsuccesfulTransfer:\n      actions.showDialog({ message: 'Transfer was unsuccessful. Try again later.' });\n      break;\n\n    case ApiTransactionDraftError.InactiveContract:\n      actions.showDialog({\n        message: '$transfer_inactive_contract_error',\n      });\n      break;\n\n    case ApiTransactionError.NotSupportedHardwareOperation:\n      actions.showDialog({\n        message: '$ledger_not_supported_operation',\n      });\n      break;\n\n    case ApiCommonError.ServerError:\n      actions.showDialog({\n        message: window.navigator.onLine\n          ? 'An error on the server side. Please try again.'\n          : 'No internet connection. Please check your connection and try again.',\n      });\n      break;\n\n    case ApiCommonError.DebugError:\n      actions.showDialog({ message: 'Unexpected error. Please let the support know.' });\n      break;\n\n    case ApiCommonError.Unexpected:\n    case undefined:\n      actions.showDialog({ message: 'Unexpected' });\n      break;\n\n    default:\n      actions.showDialog({ message: error });\n      break;\n  }\n});\n\naddActionHandler('showNotification', (global, actions, payload) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showNotification', payload);\n    return undefined;\n  }\n\n  const { message, icon } = payload;\n\n  const newNotifications: NotificationType[] = [...global.notifications];\n  const existingNotificationIndex = newNotifications.findIndex((n) => n.message === message);\n  if (existingNotificationIndex !== -1) {\n    newNotifications.splice(existingNotificationIndex, 1);\n  }\n\n  newNotifications.push({ message, icon });\n\n  return {\n    ...global,\n    notifications: newNotifications,\n  };\n});\n\naddActionHandler('dismissNotification', (global) => {\n  const newNotifications = [...global.notifications];\n\n  newNotifications.pop();\n\n  return {\n    ...global,\n    notifications: newNotifications,\n  };\n});\n\naddActionHandler('toggleTonProxy', (global, actions, { isEnabled }) => {\n  void callApi('doProxy', isEnabled);\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isTonProxyEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('toggleTonMagic', (global, actions, { isEnabled }) => {\n  void callApi('doMagic', isEnabled);\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isTonMagicEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('toggleDeeplinkHook', (global, actions, { isEnabled }) => {\n  if (IS_ELECTRON) {\n    void window.electron?.toggleDeeplinkHandler(isEnabled);\n  } else {\n    void callApi('doDeeplinkHook', isEnabled);\n  }\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isDeeplinkHookEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('signOut', async (global, actions, payload) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('signOut', payload);\n  }\n\n  const { level } = payload;\n\n  const network = selectCurrentNetwork(global);\n  const accounts = selectNetworkAccounts(global)!;\n  const accountIds = Object.keys(accounts);\n  const isFromAllAccounts = level !== 'account';\n\n  const otherNetwork = network === 'mainnet' ? 'testnet' : 'mainnet';\n  let otherNetworkAccountIds = Object.keys(selectNetworkAccountsMemoized(otherNetwork, global.accounts?.byId)!);\n\n  if (level === 'all' && otherNetworkAccountIds.length > 0) {\n    await callApi('removeNetworkAccounts', otherNetwork);\n    otherNetworkAccountIds = [];\n  }\n\n  if (isFromAllAccounts || accountIds.length === 1) {\n    actions.deleteAllNotificationAccounts({ accountIds });\n    if (otherNetworkAccountIds.length) {\n      await callApi('removeNetworkAccounts', network);\n\n      global = getGlobal();\n\n      const nextAccountId = otherNetworkAccountIds[0];\n      const accountsById = Object.entries(global.accounts!.byId).reduce((byId, [accountId, account]) => {\n        if (parseAccountId(accountId).network !== network) {\n          byId[accountId] = account;\n        }\n        return byId;\n      }, {} as Record<string, Account>);\n      const byAccountId = Object.entries(global.byAccountId).reduce((byId, [accountId, state]) => {\n        if (parseAccountId(accountId).network !== network) {\n          byId[accountId] = state;\n        }\n        return byId;\n      }, {} as Record<string, AccountState>);\n\n      const settingsById = Object.entries(global.settings.byAccountId).reduce((byId, [accountId, settings]) => {\n        if (parseAccountId(accountId).network !== network) {\n          byId[accountId] = settings;\n        }\n        return byId;\n      }, {} as Record<string, AccountSettings>);\n\n      global = updateCurrentAccountId(global, nextAccountId);\n\n      global = {\n        ...global,\n        accounts: {\n          ...global.accounts!,\n          byId: accountsById,\n        },\n        byAccountId,\n        settings: {\n          ...global.settings,\n          byAccountId: settingsById,\n        },\n      };\n\n      setGlobal(global);\n\n      actions.switchAccount({ accountId: nextAccountId, newNetwork: otherNetwork });\n      actions.closeSettings();\n      actions.afterSignOut();\n    } else {\n      await callApi('resetAccounts');\n\n      actions.afterSignOut({ shouldReset: true });\n      actions.init();\n    }\n  } else {\n    const prevAccountId = global.currentAccountId!;\n    const nextAccountId = accountIds.find((id) => id !== prevAccountId)!;\n    const nextNewestActivityTimestamps = selectNewestActivityTimestamps(global, nextAccountId);\n\n    await callApi('removeAccount', prevAccountId, nextAccountId, nextNewestActivityTimestamps);\n    actions.deleteNotificationAccount({ accountId: prevAccountId });\n\n    global = getGlobal();\n\n    const accountsById = omit(global.accounts!.byId, [prevAccountId]);\n    const byAccountId = omit(global.byAccountId, [prevAccountId]);\n    const settingsByAccountId = omit(global.settings.byAccountId, [prevAccountId]);\n\n    global = updateCurrentAccountId(global, nextAccountId);\n\n    global = {\n      ...global,\n      accounts: {\n        ...global.accounts!,\n        byId: accountsById,\n      },\n      byAccountId,\n      settings: {\n        ...global.settings,\n        byAccountId: settingsByAccountId,\n      },\n    };\n\n    setGlobal(global);\n\n    actions.afterSignOut();\n  }\n});\n","import { registerPlugin } from '@capacitor/core';\nconst BarcodeScanner = registerPlugin('BarcodeScanner', {\n    web: () => import('./web').then(m => new m.BarcodeScannerWeb()),\n});\nexport * from './definitions';\nexport { BarcodeScanner };\n//# sourceMappingURL=index.js.map","const APP_VERSION_REGEX = /^\\d+\\.\\d+(\\.\\d+)?$/;\n\nexport default function getIsAppUpdateNeeded(remoteVersion: string, appVersion: string, isStrict?: boolean) {\n  const sanitizedRemoteVersion = remoteVersion.trim();\n\n  if (!APP_VERSION_REGEX.test(sanitizedRemoteVersion)) {\n    return false;\n  }\n\n  if (isStrict) {\n    return sanitizedRemoteVersion.localeCompare(appVersion, undefined, { numeric: true, sensitivity: 'base' }) === 1;\n  }\n\n  return sanitizedRemoteVersion !== appVersion;\n}\n","import { useCallback, useState } from '../lib/teact/teact';\n\nconst useFlag = (initial = false, debugKey?: string): [boolean, NoneToVoidFunction, NoneToVoidFunction] => {\n  const [value, setValue] = useState(initial, debugKey);\n\n  const setTrue = useCallback(() => {\n    setValue(true);\n  }, []);\n\n  const setFalse = useCallback(() => {\n    setValue(false);\n  }, []);\n\n  return [value, setTrue, setFalse];\n};\n\nexport default useFlag;\n","import { useEffect } from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport { getHotkeyMatcher } from '../util/parseHotkey';\n\nconst IGNORE_TAGS = new Set(['INPUT', 'TEXTAREA', 'SELECT']);\n\nconst handlers = createCallbackManager();\ndocument.documentElement.addEventListener('keydown', handlers.runCallbacks);\n\nexport function useHotkeys(hotkeys?: Record<string, (e: KeyboardEvent) => void>) {\n  useEffect(() => {\n    if (!hotkeys) {\n      return undefined;\n    }\n\n    const entries = Object.entries(hotkeys);\n\n    function handleKeyDown(e: KeyboardEvent) {\n      if (!shouldFireEvent(e)) {\n        return;\n      }\n\n      entries.forEach(([hotkey, handler]) => {\n        if (getHotkeyMatcher(hotkey)(e)) {\n          handler(e);\n        }\n      });\n    }\n\n    return handlers.addCallback(handleKeyDown);\n  }, [hotkeys]);\n}\n\nfunction shouldFireEvent(e: KeyboardEvent) {\n  if (e.target instanceof HTMLElement) {\n    return !IGNORE_TAGS.has(e.target.tagName);\n  }\n\n  return true;\n}\n","// Original source from Mantine\n// https://github.com/mantinedev/mantine/blob/master/src/mantine-hooks/src/use-hotkeys/parse-hotkey.ts\n\nexport type KeyboardModifiers = {\n  alt: boolean;\n  ctrl: boolean;\n  meta: boolean;\n  mod: boolean;\n  shift: boolean;\n};\n\nexport type Hotkey = KeyboardModifiers & {\n  key?: string;\n};\n\ntype CheckHotkeyMatch = (event: KeyboardEvent) => boolean;\n\nexport function parseHotkey(hotkey: string): Hotkey {\n  const keys = hotkey\n    .toLowerCase()\n    .split('+')\n    .map((part) => part.trim());\n\n  const modifiers: KeyboardModifiers = {\n    alt: keys.includes('alt'),\n    ctrl: keys.includes('ctrl'),\n    meta: keys.includes('meta'),\n    mod: keys.includes('mod'),\n    shift: keys.includes('shift'),\n  };\n\n  const reservedKeys = ['alt', 'ctrl', 'meta', 'shift', 'mod'];\n\n  const freeKey = keys.find((key) => !reservedKeys.includes(key));\n\n  return {\n    ...modifiers,\n    key: freeKey,\n  };\n}\n\nfunction isExactHotkey(hotkey: Hotkey, event: KeyboardEvent): boolean {\n  const {\n    alt, ctrl, meta, mod, shift, key,\n  } = hotkey;\n  const {\n    altKey, ctrlKey, metaKey, shiftKey, key: pressedKey,\n  } = event;\n\n  if (alt !== altKey) {\n    return false;\n  }\n\n  if (mod) {\n    if (!ctrlKey && !metaKey) {\n      return false;\n    }\n  } else {\n    if (ctrl !== ctrlKey) {\n      return false;\n    }\n    if (meta !== metaKey) {\n      return false;\n    }\n  }\n  if (shift !== shiftKey) {\n    return false;\n  }\n\n  return Boolean(key\n    && (pressedKey.toLowerCase() === key.toLowerCase()\n      || event.code.replace('Key', '').toLowerCase() === key.toLowerCase()));\n}\n\nexport function getHotkeyMatcher(hotkey: string): CheckHotkeyMatch {\n  return (event) => isExactHotkey(parseHotkey(hotkey), event);\n}\n","import { useCallback, useMemo } from '../lib/teact/teact';\n\nimport type { Scheduler } from '../util/schedulers';\n\nimport { throttle, throttleWith } from '../util/schedulers';\n\nexport default function useThrottledCallback<T extends AnyToVoidFunction>(\n  fn: T,\n  deps: any[],\n  msOrSchedulerFn: number | Scheduler,\n  noFirst = false,\n) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  const fnMemo = useCallback(fn, deps);\n\n  return useMemo(() => {\n    if (typeof msOrSchedulerFn === 'number') {\n      return throttle(fnMemo, msOrSchedulerFn, !noFirst);\n    } else {\n      return throttleWith(msOrSchedulerFn, fnMemo);\n    }\n  }, [fnMemo, msOrSchedulerFn, noFirst]);\n}\n","import { useCallback, useMemo } from '../lib/teact/teact';\n\nimport { debounce } from '../util/schedulers';\n\nexport default function useDebouncedCallback<T extends AnyToVoidFunction>(\n  fn: T,\n  deps: any[],\n  ms: number,\n  noFirst = false,\n  noLast = false,\n) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  const fnMemo = useCallback(fn, deps);\n\n  return useMemo(() => {\n    return debounce(fnMemo, ms, !noFirst, !noLast);\n  }, [fnMemo, ms, noFirst, noLast]);\n}\n","import { useEffect, useMemo, useState } from '../lib/teact/teact';\n\nimport { throttle } from '../util/schedulers';\nimport windowSize from '../util/windowSize';\nimport useDebouncedCallback from './useDebouncedCallback';\n\nconst THROTTLE = 250;\n\nexport default function useWindowSize() {\n  const {\n    width: initialWidth,\n    height: initialHeight,\n    screenHeight: initialScreenHeight,\n  } = windowSize.get();\n  const [width, setWidth] = useState(initialWidth);\n  const [height, setHeight] = useState(initialHeight);\n  const [screenHeight, setScreenHeight] = useState(initialScreenHeight);\n  const [isResizing, setIsResizing] = useState(false);\n  const setIsResizingDebounced = useDebouncedCallback(setIsResizing, [setIsResizing], THROTTLE, true);\n\n  useEffect(() => {\n    const throttledSetIsResizing = throttle(() => {\n      setIsResizing(true);\n    }, THROTTLE, true);\n\n    const throttledSetSize = throttle(() => {\n      const { width: newWidth, height: newHeight, screenHeight: newScreenHeight } = windowSize.get();\n      setWidth(newWidth);\n      setHeight(newHeight);\n      setScreenHeight(newScreenHeight);\n      setIsResizingDebounced(false);\n    }, THROTTLE, false);\n\n    const handleResize = () => {\n      throttledSetIsResizing();\n      throttledSetSize();\n    };\n\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [setIsResizingDebounced]);\n\n  return useMemo(() => ({\n    width, height, screenHeight, isResizing,\n  }), [height, isResizing, screenHeight, width]);\n}\n","import { getActions } from '../../global';\n\nimport { AUTO_CONFIRM_DURATION_MINUTES } from '../../config';\nimport { MINUTE } from '../dateFormat';\nimport { setReliableTimeout } from '../setReliableTimeout';\nimport { createSignal } from '../signals';\nimport { IS_DELEGATING_BOTTOM_SHEET, IS_IOS_APP } from '../windowEnvironment';\n\ninterface EncryptedPasswordData {\n  ciphertext: ArrayBuffer;\n  iv: Uint8Array;\n}\n\nconst [\n  getEncryptedPasswordSignal,\n  setEncryptedPasswordSignal,\n] = createSignal<EncryptedPasswordData | undefined>(undefined);\n\nlet encryptionKey: CryptoKey;\n\nconst isMainStore = IS_IOS_APP ? IS_DELEGATING_BOTTOM_SHEET : true;\n\nlet clearTimeout: NoneToVoidFunction | undefined;\n\nfunction resetTimeout() {\n  if (!isMainStore) return;\n\n  clearTimeout?.();\n  clearTimeout = setReliableTimeout(() => {\n    getActions().setInMemoryPassword({ password: undefined });\n  }, AUTO_CONFIRM_DURATION_MINUTES * MINUTE);\n}\n\nasync function initEncryptionKey(): Promise<CryptoKey> {\n  if (encryptionKey) return encryptionKey;\n\n  encryptionKey = await window.crypto.subtle.generateKey(\n    {\n      name: 'AES-GCM',\n      length: 256,\n    },\n    false,\n    ['encrypt', 'decrypt'],\n  );\n\n  return encryptionKey;\n}\n\nvoid initEncryptionKey();\n\nasync function encryptPassword(password: string): Promise<EncryptedPasswordData> {\n  const key = await initEncryptionKey();\n\n  const encoder = new TextEncoder();\n  const passwordData = encoder.encode(password);\n\n  const iv = window.crypto.getRandomValues(new Uint8Array(12));\n\n  const ciphertext = await window.crypto.subtle.encrypt(\n    {\n      name: 'AES-GCM',\n      iv,\n    },\n    key,\n    passwordData,\n  );\n\n  return { ciphertext, iv };\n}\n\nasync function decryptPassword(encryptedData: EncryptedPasswordData): Promise<string> {\n  const key = await initEncryptionKey();\n\n  const decryptedData = await window.crypto.subtle.decrypt(\n    {\n      name: 'AES-GCM',\n      iv: encryptedData.iv,\n    },\n    key,\n    encryptedData.ciphertext,\n  );\n\n  const decoder = new TextDecoder();\n  return decoder.decode(decryptedData);\n}\n\nexport function getHasInMemoryPassword() {\n  return getEncryptedPasswordSignal() !== undefined;\n}\n\nexport async function getInMemoryPassword() {\n  const encryptedData = getEncryptedPasswordSignal();\n  if (!encryptedData) return undefined;\n\n  try {\n    return await decryptPassword(encryptedData);\n  } catch (error) {\n    return undefined;\n  }\n}\n\nexport function setInMemoryPasswordSignal(password?: string) {\n  resetTimeout();\n\n  if (password === undefined) {\n    setEncryptedPasswordSignal(undefined);\n    return;\n  }\n\n  void encryptPassword(password).then((encrypted) => {\n    setEncryptedPasswordSignal(encrypted);\n  });\n}\n","const CHECK_INTERVAL = 5000;\n\nexport function setReliableTimeout(callback: NoneToVoidFunction, delay: number): NoneToVoidFunction {\n  if (delay <= 0) {\n    callback();\n    return () => {};\n  }\n\n  const startTime = Date.now();\n  let intervalId: number | undefined;\n  let isCleared = false;\n\n  const clear = () => {\n    if (isCleared) return;\n    isCleared = true;\n    if (intervalId) {\n      clearInterval(intervalId);\n      intervalId = undefined;\n    }\n  };\n\n  intervalId = window.setInterval(() => {\n    if (isCleared) return;\n    if (Date.now() - startTime >= delay) {\n      clear();\n      callback();\n    }\n  }, CHECK_INTERVAL);\n\n  return clear;\n}\n","import { IS_CORE_WALLET } from '../../../config';\n\nimport iconAddDark from '../../../assets/lottie/add_dark.tgs';\nimport iconAddLight from '../../../assets/lottie/add_light.tgs';\nimport iconClockDark from '../../../assets/lottie/clock_dark.tgs';\nimport iconClockDarkBlue from '../../../assets/lottie/clock_dark_blue.tgs';\nimport iconClockDarkGray from '../../../assets/lottie/clock_dark_gray.tgs';\nimport iconClockDarkGreen from '../../../assets/lottie/clock_dark_green.tgs';\nimport iconClockDarkPurple from '../../../assets/lottie/clock_dark_purple.tgs';\nimport iconClockDarkPurpleWhite from '../../../assets/lottie/clock_dark_purple_white.tgs';\nimport iconClockDarkRed from '../../../assets/lottie/clock_dark_red.tgs';\nimport iconClockLight from '../../../assets/lottie/clock_light.tgs';\nimport iconClockLightBlue from '../../../assets/lottie/clock_light_blue.tgs';\nimport iconClockLightGray from '../../../assets/lottie/clock_light_gray.tgs';\nimport iconClockLightGreen from '../../../assets/lottie/clock_light_green.tgs';\nimport iconClockLightPurple from '../../../assets/lottie/clock_light_purple.tgs';\nimport iconClockLightPurpleWhite from '../../../assets/lottie/clock_light_purple_white.tgs';\nimport iconClockLightRed from '../../../assets/lottie/clock_light_red.tgs';\nimport coreWalletLogo from '../../../assets/lottie/core_wallet_logo.tgs';\nimport bill from '../../../assets/lottie/duck_bill.tgs';\nimport forge from '../../../assets/lottie/duck_forges.tgs';\nimport guard from '../../../assets/lottie/duck_guard.tgs';\nimport happy from '../../../assets/lottie/duck_happy.tgs';\nimport hello from '../../../assets/lottie/duck_hello.tgs';\nimport noData from '../../../assets/lottie/duck_no-data.tgs';\nimport run from '../../../assets/lottie/duck_run.tgs';\nimport snitch from '../../../assets/lottie/duck_snitch.tgs';\nimport thumbUp from '../../../assets/lottie/duck_thumb.tgs';\nimport holdTon from '../../../assets/lottie/duck_ton.tgs';\nimport wait from '../../../assets/lottie/duck_wait.tgs';\nimport yeee from '../../../assets/lottie/duck_yeee.tgs';\nimport iconEarnDark from '../../../assets/lottie/earn_dark.tgs';\nimport iconEarnDarkPurple from '../../../assets/lottie/earn_dark_purple.tgs';\nimport iconEarnLight from '../../../assets/lottie/earn_light.tgs';\nimport iconEarnLightPurple from '../../../assets/lottie/earn_light_purple.tgs';\nimport iconSendDark from '../../../assets/lottie/send_dark.tgs';\nimport iconSendLight from '../../../assets/lottie/send_light.tgs';\nimport iconSwapDark from '../../../assets/lottie/swap_dark.tgs';\nimport iconSwapLight from '../../../assets/lottie/swap_light.tgs';\nimport iconClockPreviewDark from '../../../assets/lottiePreview/clock_dark.svg';\nimport iconClockPreviewDarkBlue from '../../../assets/lottiePreview/clock_dark_blue.svg';\nimport iconClockPreviewDarkGray from '../../../assets/lottiePreview/clock_dark_gray.svg';\nimport iconClockPreviewDarkGreen from '../../../assets/lottiePreview/clock_dark_green.svg';\nimport iconClockPreviewDarkPurple from '../../../assets/lottiePreview/clock_dark_purple.svg';\nimport iconClockPreviewDarkPurpleWhite from '../../../assets/lottiePreview/clock_dark_purple_white.svg';\nimport iconClockPreviewDarkRed from '../../../assets/lottiePreview/clock_dark_red.svg';\nimport iconClockPreviewLight from '../../../assets/lottiePreview/clock_light.svg';\nimport iconClockPreviewLightBlue from '../../../assets/lottiePreview/clock_light_blue.svg';\nimport iconClockPreviewLightGray from '../../../assets/lottiePreview/clock_light_gray.svg';\nimport iconClockPreviewLightGreen from '../../../assets/lottiePreview/clock_light_green.svg';\nimport iconClockPreviewLightPurple from '../../../assets/lottiePreview/clock_light_purple.svg';\nimport iconClockPreviewLightPurpleWhite from '../../../assets/lottiePreview/clock_light_purple_white.svg';\nimport iconClockPreviewLightRed from '../../../assets/lottiePreview/clock_light_red.svg';\nimport coreWalletLogoPreview from '../../../assets/lottiePreview/core_wallet_logo.png';\nimport billPreview from '../../../assets/lottiePreview/duck_bill.png';\nimport forgePreview from '../../../assets/lottiePreview/duck_forges.png';\nimport guardPreview from '../../../assets/lottiePreview/duck_guard.png';\nimport happyPreview from '../../../assets/lottiePreview/duck_happy.png';\nimport helloPreview from '../../../assets/lottiePreview/duck_hello.png';\nimport noDataPreview from '../../../assets/lottiePreview/duck_no-data.png';\nimport runPreview from '../../../assets/lottiePreview/duck_run.png';\nimport snitchPreview from '../../../assets/lottiePreview/duck_snitch.png';\nimport thumbUpPreview from '../../../assets/lottiePreview/duck_thumb.png';\nimport holdTonPreview from '../../../assets/lottiePreview/duck_ton.png';\nimport waitPreview from '../../../assets/lottiePreview/duck_wait.png';\nimport yeeePreview from '../../../assets/lottiePreview/duck_yeee.png';\n\nexport const ANIMATED_STICKERS_PATHS = {\n  hello,\n  snitch,\n  bill,\n  thumbUp,\n  holdTon,\n  happy,\n  noData,\n  forge,\n  wait,\n  run,\n  yeee,\n  guard,\n  helloPreview,\n  snitchPreview,\n  billPreview,\n  thumbUpPreview,\n  holdTonPreview,\n  happyPreview,\n  noDataPreview,\n  forgePreview,\n  waitPreview,\n  runPreview,\n  yeeePreview,\n  guardPreview,\n  ...(IS_CORE_WALLET && {\n    coreWalletLogo,\n    coreWalletLogoPreview,\n  }),\n  light: {\n    iconAdd: iconAddLight,\n    iconClock: iconClockLight,\n    iconClockBlue: iconClockLightBlue,\n    iconClockGray: iconClockLightGray,\n    iconClockGreen: iconClockLightGreen,\n    iconClockPurple: iconClockLightPurple,\n    iconClockPurpleWhite: iconClockLightPurpleWhite,\n    iconClockRed: iconClockLightRed,\n    iconEarn: iconEarnLight,\n    iconEarnPurple: iconEarnLightPurple,\n    iconSend: iconSendLight,\n    iconSwap: iconSwapLight,\n    preview: {\n      iconClock: iconClockPreviewLight,\n      iconClockBlue: iconClockPreviewLightBlue,\n      iconClockGray: iconClockPreviewLightGray,\n      iconClockGreen: iconClockPreviewLightGreen,\n      iconClockPurple: iconClockPreviewLightPurple,\n      iconClockPurpleWhite: iconClockPreviewLightPurpleWhite,\n      iconClockRed: iconClockPreviewLightRed,\n    },\n  },\n  dark: {\n    iconAdd: iconAddDark,\n    iconClock: iconClockDark,\n    iconClockBlue: iconClockDarkBlue,\n    iconClockGray: iconClockDarkGray,\n    iconClockGreen: iconClockDarkGreen,\n    iconClockPurple: iconClockDarkPurple,\n    iconClockPurpleWhite: iconClockDarkPurpleWhite,\n    iconClockRed: iconClockDarkRed,\n    iconEarn: iconEarnDark,\n    iconEarnPurple: iconEarnDarkPurple,\n    iconSend: iconSendDark,\n    iconSwap: iconSwapDark,\n    preview: {\n      iconClock: iconClockPreviewDark,\n      iconClockBlue: iconClockPreviewDarkBlue,\n      iconClockGray: iconClockPreviewDarkGray,\n      iconClockGreen: iconClockPreviewDarkGreen,\n      iconClockPurple: iconClockPreviewDarkPurple,\n      iconClockPurpleWhite: iconClockPreviewDarkPurpleWhite,\n      iconClockRed: iconClockPreviewDarkRed,\n    },\n  },\n};\n","import { type ElementRef, useEffect } from '../lib/teact/teact';\n\nimport { IS_TOUCH_ENV } from '../util/windowEnvironment';\n\nconst DEFAULT_DURATION = 400;\n\nexport default function useFocusAfterAnimation(\n  ref: ElementRef<HTMLInputElement>, isDisabled = false, animationDuration = DEFAULT_DURATION,\n) {\n  useEffect(() => {\n    if (IS_TOUCH_ENV || isDisabled) {\n      return;\n    }\n\n    setTimeout(() => {\n      ref.current?.focus();\n    }, animationDuration);\n  }, [ref, animationDuration, isDisabled]);\n}\n","import { useRef } from '../lib/teact/teact';\n\nexport function useMatchCount(predicate: boolean, times: number): boolean {\n  const countRef = useRef(0);\n  const prevPredicateRef = useRef(false);\n\n  if (!prevPredicateRef.current && predicate && countRef.current < times) {\n    countRef.current += 1;\n  }\n\n  prevPredicateRef.current = predicate;\n\n  return countRef.current >= times;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"ydGmLQB9\",\"input\":\"aOFCdA5h\",\"content\":\"ZEXtFSPZ\"};","import type { ChangeEvent } from 'react';\nimport type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './Checkbox.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  className?: string;\n  contentClassName?: string;\n  children?: TeactNode;\n  checked: boolean;\n  isDisabled?: boolean;\n  onChange: (isChecked: boolean) => void;\n};\n\nfunction Checkbox({\n  id,\n  className,\n  contentClassName,\n  children,\n  checked,\n  isDisabled,\n  onChange,\n}: OwnProps) {\n  const handleChange = useLastCallback((e: ChangeEvent<HTMLInputElement>) => {\n    e.preventDefault();\n    onChange(e.currentTarget.checked);\n  });\n\n  return (\n    <label className={buildClassName(styles.wrapper, className)}>\n      <input\n        id={id}\n        type=\"checkbox\"\n        className={styles.input}\n        checked={checked}\n        disabled={isDisabled}\n        tabIndex={0}\n        onChange={!isDisabled ? handleChange : undefined}\n      />\n      <div className={buildClassName(styles.content, contentClassName)}>\n        {children}\n      </div>\n    </label>\n  );\n}\n\nexport default memo(Checkbox);\n","// extracted by mini-css-extract-plugin\nexport default {\"checkbox\":\"B2lzpHP0\",\"warning\":\"egsZTzXN\",\"accountLink\":\"mSBmBqo6\",\"accountLink_inner\":\"FsSJDg8c\",\"accountLinkInner\":\"FsSJDg8c\",\"penultimate\":\"T7L1H3Tm\"};","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { Account, AccountState } from '../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport { selectCurrentAccountState, selectNetworkAccounts } from '../../../global/selectors';\nimport { getAccountTitle } from '../../../util/account';\nimport buildClassName from '../../../util/buildClassName';\nimport { IS_IOS_APP } from '../../../util/windowEnvironment';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './LogOutModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  onClose: (shouldCloseSettings: boolean) => void;\n  isInAppLock?: boolean;\n}\n\ninterface StateProps {\n  currentAccountId: string;\n  hasManyAccounts: boolean;\n  accounts: Record<string, Account>;\n  accountStates: Record<string, AccountState>;\n  isBackupRequired?: boolean;\n}\n\ninterface LinkAccount {\n  id: string;\n  title: string;\n}\n\nfunction LogOutModal({\n  isOpen,\n  currentAccountId,\n  hasManyAccounts,\n  accounts,\n  accountStates,\n  isBackupRequired,\n  onClose,\n  isInAppLock,\n}: OwnProps & StateProps) {\n  const { signOut, switchAccount } = getActions();\n\n  const lang = useLang();\n  const [isLogOutFromAllAccounts, setIsLogOutFromAllAccounts] = useState<boolean>(IS_CORE_WALLET || !!isInAppLock);\n\n  const accountsWithoutBackups = useMemo(() => {\n    if (!hasManyAccounts) {\n      return [];\n    }\n\n    return Object.entries(accounts).reduce<LinkAccount[]>((acc, [id, account]) => {\n      if (id !== currentAccountId && accountStates[id]?.isBackupRequired) {\n        acc.push({\n          id,\n          title: getAccountTitle(account) ?? '',\n        });\n      }\n\n      return acc;\n    }, []);\n  }, [accounts, accountStates, currentAccountId, hasManyAccounts]);\n\n  useEffect(() => {\n    if (isOpen) {\n      setIsLogOutFromAllAccounts(IS_CORE_WALLET || !!isInAppLock);\n    }\n  }, [isOpen, isInAppLock]);\n\n  const handleSwitchAccount = (accountId: string) => {\n    onClose(false);\n    switchAccount({ accountId });\n  };\n\n  const handleLogOut = useLastCallback(() => {\n    onClose(!isLogOutFromAllAccounts && hasManyAccounts);\n    signOut({ level: IS_CORE_WALLET ? 'all' : isLogOutFromAllAccounts ? 'network' : 'account' });\n  });\n\n  const handleClose = useLastCallback(() => {\n    onClose(false);\n  });\n\n  function renderAccountLink(account: LinkAccount, idx: number) {\n    const { id, title } = account;\n\n    const fullClassName = buildClassName(\n      !isInAppLock && styles.accountLink,\n      idx + 2 === accountsWithoutBackups.length && styles.penultimate,\n    );\n\n    if (isInAppLock) {\n      return (\n        <span className={fullClassName}>\n          <strong>{title}</strong>\n        </span>\n      );\n    }\n\n    return (\n      <span className={fullClassName}>\n        <a\n          key={id}\n          href=\"#\"\n          className={styles.accountLink_inner}\n          onClick={(e: React.MouseEvent) => {\n            e.preventDefault();\n            handleSwitchAccount(id);\n          }}\n        >\n          {title}\n        </a>\n      </span>\n    );\n  }\n\n  function renderBackupWarning() {\n    return (\n      <p className={modalStyles.text}>\n        <b className={styles.warning}>{lang('Warning!')}</b> {lang('$logout_without_backup_warning')}\n      </p>\n    );\n  }\n\n  function renderBackupForAccountsWarning() {\n    return (\n      <p className={modalStyles.text}>\n        <b className={styles.warning}>{lang('Warning!')}</b>{' '}\n        {lang('$logout_accounts_without_backup_warning', {\n          links: <>{accountsWithoutBackups.map(renderAccountLink)}</>,\n        })}\n      </p>\n    );\n  }\n\n  const shouldRenderWarningForAnotherAccounts = isLogOutFromAllAccounts && accountsWithoutBackups.length > 0;\n  const shouldRenderWarningForCurrentAccount = isBackupRequired && !shouldRenderWarningForAnotherAccounts;\n  // Sibling button has wider text on iOS due to App Store \"Remove Wallet\" requirements\n  const cancelButtonClassNames = buildClassName(modalStyles.button, IS_IOS_APP && modalStyles.shortButton);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      title={IS_IOS_APP ? lang('Remove Wallet') : lang('Log Out')}\n      onClose={handleClose}\n      isInAppLock={isInAppLock}\n    >\n      <p className={buildClassName(modalStyles.text, modalStyles.text_noExtraMargin)}>\n        {renderText(lang('$logout_warning', '12/24'))}\n      </p>\n      {!(IS_CORE_WALLET || !!isInAppLock) && hasManyAccounts && (\n        <Checkbox\n          id=\"logount_all_accounts\"\n          className={styles.checkbox}\n          checked={isLogOutFromAllAccounts}\n          onChange={setIsLogOutFromAllAccounts}\n        >\n          {renderText(lang('$logout_confirm'))}\n        </Checkbox>\n      )}\n\n      {shouldRenderWarningForCurrentAccount && renderBackupWarning()}\n      {shouldRenderWarningForAnotherAccounts && renderBackupForAccountsWarning()}\n\n      <div className={modalStyles.buttons}>\n        <Button className={cancelButtonClassNames} onClick={handleClose}>\n          {lang('Cancel')}\n        </Button>\n        <Button isDestructive onClick={handleLogOut} className={modalStyles.button}>\n          {IS_IOS_APP ? lang('Remove Wallet') : lang('Exit')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global): StateProps => {\n    const accounts = selectNetworkAccounts(global) || {};\n    const currentAccountState = selectCurrentAccountState(global);\n    const accountIds = Object.keys(accounts);\n    const hasManyAccounts = accountIds.length > 1;\n\n    return {\n      currentAccountId: global.currentAccountId!,\n      hasManyAccounts,\n      accounts,\n      accountStates: global.byAccountId,\n      isBackupRequired: currentAccountState?.isBackupRequired,\n    };\n  })(LogOutModal),\n);\n","type Parts = (string | false | undefined)[];\n\nexport default function buildStyle(...parts: Parts) {\n  return parts.filter(Boolean).join(';');\n}\n","import useShowTransition, { type HookParams } from './useShowTransition';\n\nexport default function useMediaTransition<RefType extends HTMLElement = HTMLDivElement>(\n  mediaData?: unknown,\n  options?: Partial<HookParams<RefType>>,\n) {\n  const isMediaReady = Boolean(mediaData);\n\n  const { ref } = useShowTransition<RefType>({\n    isOpen: isMediaReady,\n    noMountTransition: isMediaReady,\n    className: 'slow',\n    ...options,\n  });\n\n  return ref;\n}\n","type RLottieClass = typeof import('./RLottie').default;\n\nlet promise: Promise<RLottieClass> | undefined;\nlet RLottie: RLottieClass;\n\n// Time for the main interface to completely load\nconst LOTTIE_LOAD_DELAY = 3000;\n\nexport async function ensureRLottie() {\n  if (!promise) {\n    promise = import('./RLottie').then((module) => module.default);\n    RLottie = await promise;\n  }\n\n  return promise;\n}\n\nexport function getRLottie() {\n  return RLottie;\n}\n\nsetTimeout(ensureRLottie, LOTTIE_LOAD_DELAY);\n","export type RGBColor = [number, number, number];\n\nexport function hex2rgb(param: string): RGBColor {\n  const hex = param.replace('#', '');\n  return [\n    parseInt(hex.substring(0, 2), 16),\n    parseInt(hex.substring(2, 4), 16),\n    parseInt(hex.substring(4, 6), 16),\n  ];\n}\n\nexport default function rgbToHex(rgb: [number, number, number]) {\n  return `#${rgb.map((x) => {\n    const hex = x.toString(16);\n    return hex.length === 1 ? `0${hex}` : hex;\n  }).join('')}`;\n}\n\nexport function euclideanDistance(color1: RGBColor, color2: RGBColor): number {\n  const r = 0.3 * ((color1[0] - color2[0]) ** 2);\n  const g = 0.59 * ((color1[1] - color2[1]) ** 2);\n  const b = 0.11 * ((color1[2] - color2[2]) ** 2);\n\n  return Math.sqrt(r + g + b);\n}\n\nfunction rgbToLab(rgb: RGBColor): RGBColor {\n  let [r, g, b] = rgb.map((value) => value / 255);\n  [r, g, b] = [r, g, b].map((value) => (value > 0.04045 ? ((value + 0.055) / 1.055) ** 2.4 : value / 12.92));\n\n  let x = r * 0.4124 + g * 0.3576 + b * 0.1805;\n  let y = r * 0.2126 + g * 0.7152 + b * 0.0722;\n  let z = r * 0.0193 + g * 0.1192 + b * 0.9505;\n\n  [x, y, z] = [x / 0.95047, y, z / 1.08883].map(\n    (value) => (value > 0.008856 ? value ** (1 / 3) : (7.787 * value) + 16 / 116),\n  );\n\n  return [(116 * y) - 16, 500 * (x - y), 200 * (y - z)];\n}\n\n/**\n * Calculates the perceptual difference between two RGB colors.\n *\n * Delta E is a metric for understanding how the human eye perceives color difference.\n * The following table provides a general guideline:\n *\n * Delta E  |  Perception\n * ---------|-------------------------------------------\n * <= 1.0   | Not perceptible by human eyes.\n * 1 - 2    | Perceptible through close observation.\n * 2 - 10   | Perceptible at a glance.\n * 11 - 49  | Colors are more similar than opposite.\n * 100      | Colors are exact opposite.\n *\n * @param rgbA The first color as an RGB array.\n * @param rgbB The second color as an RGB array.\n * @returns The Delta E value representing the color difference.\n */\nexport function deltaE(rgbA: RGBColor, rgbB: RGBColor): number {\n  const [l1, a1, b1] = rgbToLab(rgbA);\n  const [l2, a2, b2] = rgbToLab(rgbB);\n\n  const c1 = Math.sqrt(a1 * a1 + b1 * b1);\n  const c2 = Math.sqrt(a2 * a2 + b2 * b2);\n  const deltaC = c1 - c2;\n\n  const deltaL = l1 - l2;\n  const deltaA = a1 - a2;\n  const deltaB = b1 - b2;\n\n  const deltaH = Math.sqrt(deltaA * deltaA + deltaB * deltaB - deltaC * deltaC);\n\n  const sl = 1.0;\n  const sc = 1.0 + 0.045 * c1;\n  const sh = 1.0 + 0.015 * c1;\n\n  const deltaLKlsl = deltaL / sl;\n  const deltaCkcsc = deltaC / sc;\n  const deltaHkhsh = deltaH / sh;\n\n  return Math.sqrt(deltaLKlsl * deltaLKlsl + deltaCkcsc * deltaCkcsc + deltaHkhsh * deltaHkhsh);\n}\n","import {\n  getIsHeavyAnimating,\n  useCallback, useEffect, useMemo, useRef,\n} from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport useLastCallback from './useLastCallback';\n\nexport const startCallbacks = createCallbackManager();\nexport const endCallbacks = createCallbackManager();\n\ngetIsHeavyAnimating.subscribe(() => {\n  if (getIsHeavyAnimating()) {\n    startCallbacks.runCallbacks();\n  } else {\n    endCallbacks.runCallbacks();\n  }\n});\n\nexport default function useHeavyAnimation(\n  onStart?: AnyToVoidFunction,\n  onEnd?: AnyToVoidFunction,\n  isDisabled = false,\n) {\n  const lastOnStart = useLastCallback(onStart);\n  const lastOnEnd = useLastCallback(onEnd);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    if (getIsHeavyAnimating()) {\n      lastOnStart();\n    }\n\n    startCallbacks.addCallback(lastOnStart);\n    endCallbacks.addCallback(lastOnEnd);\n\n    return () => {\n      endCallbacks.removeCallback(lastOnEnd);\n      startCallbacks.removeCallback(lastOnStart);\n    };\n  }, [isDisabled, lastOnEnd, lastOnStart]);\n}\n\n// TODO  `onFullyIdle`?\nexport function useThrottleForHeavyAnimation<T extends AnyToVoidFunction>(afterHeavyAnimation: T, deps: unknown[]) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  const fnMemo = useCallback(afterHeavyAnimation, deps);\n\n  const isScheduledRef = useRef(false);\n\n  return useMemo(() => {\n    return (...args: Parameters<T>) => {\n      if (!isScheduledRef.current) {\n        if (!getIsHeavyAnimating()) {\n          fnMemo(...args);\n          return;\n        }\n\n        isScheduledRef.current = true;\n\n        const removeCallback = endCallbacks.addCallback(() => {\n          fnMemo(...args);\n          removeCallback();\n          isScheduledRef.current = false;\n        });\n      }\n    };\n  }, [fnMemo]);\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport useLastCallback from './useLastCallback';\n\nconst startCallbacks = createCallbackManager();\nconst endCallbacks = createCallbackManager();\n\nlet timeout: number | undefined;\nlet isActive = false;\n\nconst usePriorityPlaybackCheck = (\n  onStart?: AnyToVoidFunction,\n  onEnd?: AnyToVoidFunction,\n  isDisabled = false,\n) => {\n  const lastOnStart = useLastCallback(onStart);\n  const lastOnEnd = useLastCallback(onEnd);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    if (isActive) {\n      lastOnStart();\n    }\n\n    startCallbacks.addCallback(lastOnStart);\n    endCallbacks.addCallback(lastOnEnd);\n\n    return () => {\n      endCallbacks.removeCallback(lastOnEnd);\n      startCallbacks.removeCallback(lastOnStart);\n    };\n  }, [isDisabled, lastOnStart, lastOnEnd]);\n};\n\nexport function isPriorityPlaybackActive() {\n  return isActive;\n}\n\nexport function dispatchPriorityPlaybackEvent() {\n  if (!isActive) {\n    isActive = true;\n    startCallbacks.runCallbacks();\n  }\n\n  if (timeout) {\n    clearTimeout(timeout);\n    timeout = undefined;\n  }\n\n  // Race condition may happen if another `dispatchPriorityPlaybackEvent` is called before `onEnd`\n  function onEnd() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = undefined;\n    }\n\n    isActive = false;\n    endCallbacks.runCallbacks();\n  }\n\n  return onEnd;\n}\n\nexport default usePriorityPlaybackCheck;\n","import { type ElementRef, useEffect } from '../lib/teact/teact';\n\nimport type { CallbackManager } from '../util/callbacks';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport { useStateRef } from './useStateRef';\n\nconst elementObserverMap = new Map<HTMLElement, [IntersectionObserver, CallbackManager]>();\n\nexport default function useSharedIntersectionObserver(\n  refOrElement: ElementRef<HTMLElement> | HTMLElement | undefined,\n  onIntersectionChange: (entry: IntersectionObserverEntry) => void,\n  isDisabled = false,\n) {\n  const onIntersectionChangeRef = useStateRef(onIntersectionChange);\n\n  useEffect(() => {\n    const el = refOrElement && 'current' in refOrElement ? refOrElement.current : refOrElement;\n    if (!el || isDisabled) {\n      return undefined;\n    }\n\n    const callback: IntersectionObserverCallback = ([entry]) => {\n      // Ignore updates when element is not properly mounted (`display: none`)\n      if (!(entry.target as HTMLElement).offsetWidth || !(entry.target as HTMLElement).offsetHeight) {\n        return;\n      }\n\n      onIntersectionChangeRef.current(entry);\n    };\n\n    let [observer, callbackManager] = elementObserverMap.get(el) || [undefined, undefined];\n    if (!observer) {\n      callbackManager = createCallbackManager();\n      observer = new IntersectionObserver(callbackManager.runCallbacks);\n      elementObserverMap.set(el, [observer, callbackManager]);\n      observer.observe(el);\n    }\n    callbackManager!.addCallback(callback);\n\n    return () => {\n      callbackManager!.removeCallback(callback);\n      if (!callbackManager!.hasCallbacks()) {\n        observer.unobserve(el);\n        observer.disconnect();\n        elementObserverMap.delete(el);\n      }\n    };\n  }, [isDisabled, onIntersectionChangeRef, refOrElement]);\n}\n","import type { ElementRef, FC } from '../../lib/teact/teact';\nimport React, {\n  getIsHeavyAnimating, memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport type RLottieInstance from '../../lib/rlottie/RLottie';\n\nimport { requestMeasure } from '../../lib/fasterdom/fasterdom';\nimport { ensureRLottie, getRLottie } from '../../lib/rlottie/RLottie.async';\nimport buildStyle from '../../util/buildStyle';\nimport { hex2rgb } from '../../util/colors';\nimport generateUniqueId from '../../util/generateUniqueId';\nimport { IS_ELECTRON, IS_IOS } from '../../util/windowEnvironment';\n\nimport useBackgroundMode, { isBackgroundModeActive } from '../../hooks/useBackgroundMode';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useHeavyAnimation from '../../hooks/useHeavyAnimation';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePriorityPlaybackCheck, { isPriorityPlaybackActive } from '../../hooks/usePriorityPlaybackCheck';\nimport useSharedIntersectionObserver from '../../hooks/useSharedIntersectionObserver';\nimport { useStateRef } from '../../hooks/useStateRef';\nimport useSyncEffect from '../../hooks/useSyncEffect';\nimport useThrottledCallback from '../../hooks/useThrottledCallback';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nexport type OwnProps = {\n  ref?: ElementRef<HTMLDivElement>;\n  renderId?: string;\n  className?: string;\n  style?: string;\n  tgsUrl?: string;\n  play?: boolean | string;\n  playSegment?: [number, number];\n  speed?: number;\n  noLoop?: boolean;\n  size: number;\n  shouldStretch?: boolean;\n  quality?: number;\n  color?: string;\n  isLowPriority?: boolean;\n  forceOnHeavyAnimation?: boolean;\n  forceInBackground?: boolean;\n  sharedCanvas?: HTMLCanvasElement;\n  sharedCanvasCoords?: { x: number; y: number };\n  onClick?: NoneToVoidFunction;\n  onLoad?: NoneToVoidFunction;\n  onEnded?: NoneToVoidFunction;\n  onLoop?: NoneToVoidFunction;\n};\n\nconst THROTTLE_MS = 150;\n\nconst AnimatedSticker: FC<OwnProps> = ({\n  ref,\n  renderId,\n  className,\n  style,\n  tgsUrl,\n  play,\n  playSegment,\n  speed,\n  noLoop,\n  size,\n  shouldStretch,\n  quality,\n  isLowPriority,\n  color,\n  forceOnHeavyAnimation,\n  forceInBackground,\n  sharedCanvas,\n  sharedCanvasCoords,\n  onClick,\n  onLoad,\n  onEnded,\n  onLoop,\n}) => {\n  let containerRef = useRef<HTMLDivElement>();\n  if (ref) {\n    containerRef = ref;\n  }\n\n  const viewId = useUniqueId();\n\n  const [animation, setAnimation] = useState<RLottieInstance>();\n  const animationRef = useRef<RLottieInstance>();\n  const isFirstRender = useRef(true);\n\n  const playKey = play || (play === false ? false : playSegment);\n  const playRef = useStateRef(play);\n  const playSegmentRef = useStateRef(playSegment);\n\n  const rgbColor = useRef<[number, number, number] | undefined>();\n\n  const isUnmountedRef = useRef(false);\n  useEffect(() => {\n    return () => {\n      isUnmountedRef.current = true;\n    };\n  }, []);\n\n  useSyncEffect(() => {\n    if (color) {\n      const [r, g, b] = hex2rgb(color);\n      rgbColor.current = [r, g, b];\n    } else {\n      rgbColor.current = undefined;\n    }\n  }, [color]);\n\n  const init = useLastCallback(() => {\n    if (\n      animationRef.current\n      || isUnmountedRef.current\n      || !tgsUrl\n      || (sharedCanvas && (!sharedCanvasCoords || !sharedCanvas.offsetWidth || !sharedCanvas.offsetHeight))\n    ) {\n      return;\n    }\n\n    const container = containerRef.current || sharedCanvas;\n    if (!container) {\n      return;\n    }\n\n    const newAnimation = getRLottie().init(\n      tgsUrl,\n      container,\n      renderId || generateUniqueId(),\n      {\n        size,\n        shouldStretch,\n        noLoop,\n        quality,\n        isLowPriority,\n        coords: sharedCanvasCoords,\n      },\n      viewId,\n      rgbColor.current,\n      onLoad,\n      onEnded,\n      onLoop,\n    );\n\n    if (speed) {\n      newAnimation.setSpeed(speed);\n    }\n\n    setAnimation(newAnimation);\n    animationRef.current = newAnimation;\n  });\n\n  useEffect(() => {\n    if (getRLottie()) {\n      init();\n    } else {\n      void ensureRLottie().then(init);\n    }\n  }, [init, tgsUrl, sharedCanvas, sharedCanvasCoords]);\n\n  const throttledInit = useThrottledCallback(init, [init], THROTTLE_MS);\n  useSharedIntersectionObserver(sharedCanvas, throttledInit);\n\n  useEffect(() => {\n    if (!animation) return;\n\n    animation.setColor(rgbColor.current);\n  }, [color, animation]);\n\n  useEffect(() => {\n    return () => {\n      animationRef.current?.removeView(viewId);\n    };\n  }, [viewId]);\n\n  const playAnimation = useLastCallback((shouldRestart = false) => {\n    if (\n      !animation\n      || !(playRef.current || playSegmentRef.current)\n      || isFrozen(forceOnHeavyAnimation, forceInBackground)\n    ) {\n      return;\n    }\n\n    if (playSegmentRef.current) {\n      animation.playSegment(playSegmentRef.current, shouldRestart, viewId);\n    } else {\n      animation.play(shouldRestart, viewId);\n    }\n  });\n\n  const playAnimationOnRaf = useLastCallback(() => {\n    requestMeasure(playAnimation);\n  });\n\n  const pauseAnimation = useLastCallback(() => {\n    if (animation?.isPlaying()) {\n      animation.pause(viewId);\n    }\n  });\n\n  useEffectWithPrevDeps(([prevNoLoop]) => {\n    if (prevNoLoop !== undefined && noLoop !== prevNoLoop) {\n      animation?.setNoLoop(noLoop);\n    }\n  }, [noLoop, animation]);\n\n  useEffectWithPrevDeps(([prevSharedCanvasCoords]) => {\n    if (prevSharedCanvasCoords !== undefined && sharedCanvasCoords !== prevSharedCanvasCoords) {\n      void animation?.setSharedCanvasCoords(viewId, sharedCanvasCoords);\n    }\n  }, [sharedCanvasCoords, viewId, animation]);\n\n  useEffect(() => {\n    if (!animation) {\n      return;\n    }\n\n    if (playKey) {\n      if (!isFrozen(forceOnHeavyAnimation, forceInBackground)) {\n        playAnimation(noLoop);\n      }\n    } else {\n      pauseAnimation();\n    }\n  }, [animation, playKey, noLoop, playAnimation, pauseAnimation, forceOnHeavyAnimation, forceInBackground]);\n\n  useEffect(() => {\n    if (!animation) return;\n\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n    } else if (tgsUrl) {\n      animation.changeData(tgsUrl);\n      playAnimation(noLoop);\n    }\n  }, [playAnimation, animation, tgsUrl, noLoop]);\n\n  useHeavyAnimation(pauseAnimation, playAnimation, forceOnHeavyAnimation || IS_IOS || !playKey);\n  usePriorityPlaybackCheck(pauseAnimation, playAnimation, !playKey);\n  // Pausing frame may not happen in background,\n  // so we need to make sure it happens right after focusing,\n  // then we can play again.\n  useBackgroundMode(pauseAnimation, playAnimationOnRaf, !playKey || forceInBackground);\n\n  if (sharedCanvas) {\n    return undefined;\n  }\n\n  return (\n    <div\n      ref={containerRef}\n      className={className}\n      style={buildStyle(\n        size !== undefined && !shouldStretch && `width: ${size}px; height: ${size}px;`,\n        onClick && !IS_ELECTRON && 'cursor: pointer',\n        style,\n      )}\n      onClick={onClick}\n    />\n  );\n};\n\nexport default memo(AnimatedSticker);\n\nfunction isFrozen(forceOnHeavyAnimation = false, forceInBackground = false) {\n  return (!forceOnHeavyAnimation && !IS_IOS && getIsHeavyAnimating())\n    || isPriorityPlaybackActive()\n    || (!forceInBackground && isBackgroundModeActive());\n}\n","import React, {\n  memo, useState,\n} from '../../lib/teact/teact';\n\nimport type { OwnProps as AnimatedStickerProps } from './AnimatedSticker';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport AnimatedSticker from './AnimatedSticker';\n\nexport type OwnProps =\n  Partial<AnimatedStickerProps>\n  & { noTransition?: boolean; nonInteractive?: boolean; size: number };\n\nfunction AnimatedIcon(props: OwnProps) {\n  const {\n    size,\n    play = true,\n    noLoop = true,\n    className,\n    noTransition,\n    nonInteractive,\n    onLoad,\n    onClick,\n    ...otherProps\n  } = props;\n  const [isAnimationLoaded, markAnimationLoaded] = useFlag(false);\n  const ref = useMediaTransition(noTransition || isAnimationLoaded);\n\n  const handleLoad = useLastCallback(() => {\n    markAnimationLoaded();\n    onLoad?.();\n  });\n\n  const [playKey, setPlayKey] = useState(String(Math.random()));\n\n  const handleClick = useLastCallback(() => {\n    if (play === true) {\n      setPlayKey(String(Math.random()));\n    }\n\n    onClick?.();\n  });\n\n  return (\n    <AnimatedSticker\n      ref={ref}\n      className={className}\n      size={size}\n      play={play === true ? playKey : play}\n      noLoop={noLoop}\n      onClick={!nonInteractive ? handleClick : undefined}\n      onLoad={handleLoad}\n\n      {...otherProps}\n    />\n  );\n}\n\nexport default memo(AnimatedIcon);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"aNPdKxlh\",\"preview\":\"haM4SCte\"};","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { OwnProps as AnimatedIconProps } from './AnimatedIcon';\n\nimport { ANIMATION_LEVEL_MIN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport AnimatedIcon from './AnimatedIcon';\n\nimport styles from './AnimatedIconWithPreview.module.scss';\n\ntype OwnProps =\n  Partial<AnimatedIconProps>\n  & {\n    iconPreviewClass?: string;\n    previewUrl?: string;\n    thumbDataUri?: string;\n    noPreviewTransition?: boolean;\n  };\n\ninterface StateProps {\n  noAnimation?: boolean;\n}\n\nconst loadedPreviewUrls = new Set();\nconst DEFAULT_SIZE = 150;\n\nfunction AnimatedIconWithPreview(props: OwnProps & StateProps) {\n  const {\n    size = DEFAULT_SIZE,\n    previewUrl,\n    iconPreviewClass,\n    thumbDataUri,\n    className,\n    noAnimation,\n    noPreviewTransition,\n    ...otherProps\n  } = props;\n\n  const [isPreviewLoaded, markPreviewLoaded] = useFlag(\n    Boolean(iconPreviewClass) || Boolean(thumbDataUri) || loadedPreviewUrls.has(previewUrl),\n  );\n  const ref = useMediaTransition(isPreviewLoaded || noPreviewTransition);\n  const [isAnimationReady, markAnimationReady, markAnimationNotReady] = useFlag(false);\n\n  useEffect(() => {\n    if (noAnimation) {\n      markAnimationNotReady();\n    }\n  }, [markAnimationNotReady, noAnimation]);\n\n  const handlePreviewLoad = useLastCallback(() => {\n    markPreviewLoaded();\n    loadedPreviewUrls.add(previewUrl);\n  });\n\n  return (\n    <div\n      ref={!noPreviewTransition ? ref : undefined}\n      className={buildClassName(className, styles.root)}\n      style={buildStyle(\n        size !== undefined && !otherProps.shouldStretch && `width: ${size}px; height: ${size}px;`,\n      )}\n      data-preview-url={previewUrl}\n    >\n      {thumbDataUri && !previewUrl && !isAnimationReady && (\n        // eslint-disable-next-line jsx-a11y/alt-text\n        <img src={thumbDataUri} className={styles.preview} />\n      )}\n      {previewUrl && !isAnimationReady && (\n        // eslint-disable-next-line jsx-a11y/alt-text\n        <img\n          src={previewUrl}\n          className={styles.preview}\n          onLoad={handlePreviewLoad}\n        />\n      )}\n      {iconPreviewClass && !isAnimationReady && (\n        <i className={buildClassName(styles.preview, iconPreviewClass)} aria-hidden />\n      )}\n      {!noAnimation && <AnimatedIcon size={size} {...otherProps} onLoad={markAnimationReady} noTransition />}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    noAnimation: global.settings.animationLevel === ANIMATION_LEVEL_MIN,\n  };\n})(AnimatedIconWithPreview));\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"LCV_ofSL\",\"input\":\"O85V9ajV\",\"error\":\"hhZYLQar\",\"disabled\":\"sAhrzaLV\",\"input_password\":\"MawuFp3r\",\"inputPassword\":\"MawuFp3r\",\"rich\":\"_JfHIm8U\",\"rich__value\":\"VyaUZjoQ\",\"richValue\":\"VyaUZjoQ\",\"rich__placeholder\":\"Fd5oMpfT\",\"richPlaceholder\":\"Fd5oMpfT\",\"isLoading\":\"oLkTqd0H\",\"large\":\"cp2mDTzv\",\"inputWrapperStatic\":\"_30fntf1\",\"input__wrapper\":\"Q9N6yVvw\",\"inputWrapper\":\"Q9N6yVvw\",\"input__wrapper_hasFocus\":\"xJ8YLUEc\",\"inputWrapperHasFocus\":\"xJ8YLUEc\",\"visibilityToggle\":\"tXgxOPqo\",\"visibilityToggle_push\":\"uXlOxDsj\",\"visibilityTogglePush\":\"uXlOxDsj\",\"fractional\":\"Q68NbVRf\",\"label\":\"dGKNlTrc\",\"label_error\":\"PFA7oH6u\",\"labelError\":\"PFA7oH6u\",\"label_forPassword\":\"i9G7zfox\",\"labelForPassword\":\"i9G7zfox\",\"label_errorUnderInput\":\"N0y6_7Nt\",\"labelErrorUnderInput\":\"N0y6_7Nt\",\"label_errorBottom\":\"fAnhlq4h\",\"labelErrorBottom\":\"fAnhlq4h\",\"swapCorner\":\"hcCyNq6V\",\"swapCorner_error\":\"tRQeFT_t\",\"swapCornerError\":\"tRQeFT_t\",\"mask\":\"dYsHTHj3\",\"inputContainer\":\"vjJxciaS\",\"input_withValueOverlay\":\"qHmkgxAZ\",\"inputWithValueOverlay\":\"qHmkgxAZ\",\"valueOverlay\":\"yLnZrd5z\",\"static\":\"PXCfAg02\"};","import type {\n  ChangeEvent, FormEvent, HTMLAttributes, KeyboardEvent, RefObject,\n} from 'react';\nimport type { ElementRef, TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useState } from '../../lib/teact/teact';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Input.module.scss';\n\ntype OwnProps = {\n  ref?: ElementRef<HTMLInputElement | HTMLTextAreaElement>;\n  id?: string;\n  type?: 'text' | 'password';\n  label?: TeactNode;\n  placeholder?: string;\n  valueOverlay?: TeactNode;\n  value?: string | number;\n  inputMode?: 'numeric' | 'text' | 'search';\n  maxLength?: number;\n  isRequired?: boolean;\n  isDisabled?: boolean;\n  isMultiline?: boolean;\n  hasError?: boolean;\n  error?: string;\n  className?: string;\n  wrapperClassName?: string;\n  autoCapitalize?: string;\n  autoComplete?: string;\n  autoCorrect?: boolean;\n  isStatic?: boolean;\n  enterKeyHint?: HTMLAttributes<HTMLInputElement>['enterKeyHint'];\n  inputArg?: any;\n  children?: TeactNode;\n  onInput: (value: string, inputArg?: any) => void;\n  onKeyDown?: (e: KeyboardEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n  onFocus?: (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n  onBlur?: (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n};\n\nfunction Input({\n  ref,\n  id,\n  label,\n  placeholder,\n  valueOverlay,\n  inputMode,\n  isRequired,\n  isDisabled,\n  isMultiline,\n  hasError,\n  type = 'text',\n  error,\n  value = '',\n  maxLength,\n  inputArg,\n  className,\n  wrapperClassName,\n  autoCapitalize,\n  autoComplete,\n  autoCorrect,\n  isStatic,\n  enterKeyHint,\n  children,\n  onInput,\n  onKeyDown,\n  onFocus,\n  onBlur,\n}: OwnProps) {\n  const lang = useLang();\n  const [isPasswordVisible, setIsPasswordVisible] = useState<boolean>(false);\n  const [hasFocus, markHasFocus, unmarkHasFocus] = useFlag(false);\n\n  const showValueOverlay = Boolean(valueOverlay && !hasFocus);\n\n  const handleInput = (e: FormEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    onInput(e.currentTarget.value, inputArg);\n  };\n\n  const handleTogglePasswordVisibility = () => {\n    setIsPasswordVisible(!isPasswordVisible);\n  };\n\n  const handleChange = (e: ChangeEvent<HTMLTextAreaElement>) => {\n    const { currentTarget } = e;\n    const { scrollHeight } = currentTarget;\n\n    requestMutation(() => {\n      currentTarget.style.height = '0';\n      currentTarget.style.height = `${scrollHeight}px`;\n    });\n  };\n\n  const handleFocus = (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    markHasFocus();\n    onFocus?.(e);\n  };\n\n  const handleBlur = (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    unmarkHasFocus();\n    onBlur?.(e);\n  };\n\n  const finalType = type === 'text' || isPasswordVisible ? 'text' : 'password';\n  const inputFullClass = buildClassName(\n    styles.input,\n    className,\n    type === 'password' && styles.input_password,\n    (hasError || error) && styles.error,\n    isDisabled && styles.disabled,\n    valueOverlay && styles.input_withvalueOverlay,\n  );\n  const labelFullClass = buildClassName(\n    styles.label,\n    (hasError || error) && styles.error,\n    (hasError || error) && type === 'password' && styles.label_forPassword,\n  );\n\n  return (\n    <div className={buildClassName(styles.wrapper, wrapperClassName)}>\n      {error && !!label && (\n        <label className={buildClassName(styles.label, styles.label_error, styles.error)} htmlFor={id}>{error}</label>\n      )}\n      {!!label && (\n        <label className={labelFullClass} htmlFor={id}>\n          {label}\n        </label>\n      )}\n      <div className={styles.inputContainer}>\n        {isMultiline ? (\n          <textarea\n            ref={ref as RefObject<HTMLTextAreaElement>}\n            id={id}\n            className={inputFullClass}\n            value={value}\n            disabled={isDisabled}\n            maxLength={maxLength}\n            autoComplete={autoComplete}\n            onInput={handleInput}\n            onChange={handleChange}\n            onKeyDown={onKeyDown}\n            onFocus={handleFocus}\n            onBlur={handleBlur}\n            tabIndex={0}\n            required={isRequired}\n            placeholder={valueOverlay ? undefined : placeholder}\n          />\n        ) : (\n          <input\n            ref={ref as RefObject<HTMLInputElement>}\n            id={id}\n            className={inputFullClass}\n            type={finalType}\n            value={value}\n            disabled={isDisabled}\n            inputMode={inputMode}\n            maxLength={maxLength}\n            autoCapitalize={autoCapitalize}\n            autoComplete={autoComplete}\n            autoCorrect={autoCorrect}\n            spellCheck={autoCorrect}\n            onInput={handleInput}\n            onKeyDown={onKeyDown}\n            onFocus={handleFocus}\n            onBlur={handleBlur}\n            tabIndex={0}\n            required={isRequired}\n            placeholder={valueOverlay ? undefined : placeholder}\n            enterKeyHint={enterKeyHint}\n          />\n        )}\n\n        {showValueOverlay && (\n          <div className={buildClassName(styles.valueOverlay, isStatic && styles.static)}>\n            {valueOverlay}\n          </div>\n        )}\n      </div>\n\n      {type === 'password' && (\n        <button\n          className={buildClassName(styles.visibilityToggle, label && styles.visibilityToggle_push)}\n          type=\"button\"\n          onClick={handleTogglePasswordVisibility}\n          aria-label={lang('Change password visibility')}\n          tabIndex={-1}\n        >\n          <i className={isPasswordVisible ? 'icon-eye' : 'icon-eye-closed'} aria-hidden />\n        </button>\n      )}\n      {children}\n      {error && !label && (\n        <label className={buildClassName(styles.label, styles.label_errorBottom, styles.error)} htmlFor={id}>\n          {error}\n        </label>\n      )}\n    </div>\n  );\n}\n\nexport default memo(Input);\n","// Sometimes event is fired earlier than animation completes\nconst ANIMATION_END_DELAY = 50;\n\nexport function waitForTransitionEnd(\n  node: Node, handler: NoneToVoidFunction, propertyName?: string, fallbackMs?: number,\n) {\n  return waitForEndEvent('transitionend', node, handler, propertyName, fallbackMs);\n}\n\nexport function waitForAnimationEnd(\n  node: Node, handler: NoneToVoidFunction, animationName?: string, fallbackMs?: number,\n) {\n  return waitForEndEvent('animationend', node, handler, animationName, fallbackMs);\n}\n\nfunction waitForEndEvent(\n  eventType: 'transitionend' | 'animationend',\n  node: Node,\n  handler: NoneToVoidFunction,\n  detailedName?: string,\n  fallbackMs?: number,\n) {\n  let isHandled = false;\n\n  function cleanup() {\n    node.removeEventListener(eventType, handleAnimationEnd);\n  }\n\n  function handleAnimationEnd(e: TransitionEvent | AnimationEvent | Event) {\n    if (isHandled || e.target !== e.currentTarget) {\n      return;\n    }\n\n    if (detailedName && (\n      (e instanceof TransitionEvent && e.propertyName === detailedName)\n      || (e instanceof AnimationEvent && e.animationName === detailedName)\n    )) {\n      return;\n    }\n\n    isHandled = true;\n\n    cleanup();\n\n    setTimeout(() => {\n      handler();\n    }, ANIMATION_END_DELAY);\n  }\n\n  node.addEventListener(eventType, handleAnimationEnd);\n\n  if (fallbackMs) {\n    setTimeout(() => {\n      if (isHandled) return;\n\n      cleanup();\n\n      handler();\n    }, fallbackMs);\n  }\n\n  return cleanup;\n}\n","import type { MoveOffsets } from './captureEvents';\n\nimport { requestMeasure, requestMutation } from '../lib/fasterdom/fasterdom';\nimport { animateNumber, timingFunctions } from './animation';\nimport { captureEvents, SwipeDirection } from './captureEvents';\nimport { waitForAnimationEnd } from './cssAnimationEndListeners';\nimport { clamp } from './math';\nimport { IS_IOS } from './windowEnvironment';\n\nconst INERTIA_DURATION = 300;\nconst INERTIA_EASING = timingFunctions.easeOutCubic;\n\nexport const SWIPE_DISABLED_CLASS_NAME = 'swipe-disabled';\n\nlet isSwipeActive = false;\nlet swipeOffsets: MoveOffsets | undefined;\nlet onDrag: ((offsets: MoveOffsets) => void) | undefined;\nlet onRelease: ((onCancel: NoneToVoidFunction) => void) | undefined;\nlet cancelCurrentReleaseAnimation: NoneToVoidFunction | undefined;\n\nexport function captureControlledSwipe(\n  element: HTMLElement, options: {\n    onSwipeLeftStart?: NoneToVoidFunction;\n    onSwipeRightStart?: NoneToVoidFunction;\n    onCancel: NoneToVoidFunction;\n  },\n) {\n  return captureEvents(element, {\n    swipeThreshold: 10,\n\n    withNativeDrag: true,\n    excludedClosestSelector: `.${SWIPE_DISABLED_CLASS_NAME}`,\n\n    onSwipe(e, direction, offsets) {\n      if (direction === SwipeDirection.Left) {\n        options.onSwipeLeftStart?.();\n      } else if (direction === SwipeDirection.Right) {\n        options.onSwipeRightStart?.();\n      } else {\n        return false;\n      }\n\n      if (IS_IOS) {\n        isSwipeActive = true;\n        swipeOffsets = offsets;\n      }\n\n      return true;\n    },\n\n    onDrag(e, captureEvent, offsets) {\n      if (!isSwipeActive) return;\n\n      onDrag?.(offsets);\n    },\n\n    onRelease() {\n      if (!isSwipeActive) return;\n\n      isSwipeActive = false;\n\n      onRelease?.(options.onCancel);\n\n      onDrag = undefined;\n      onRelease = undefined;\n    },\n  });\n}\n\nexport function allowSwipeControlForTransition(\n  currentSlide: HTMLElement,\n  nextSlide: HTMLElement,\n  onCancelForTransition: NoneToVoidFunction,\n) {\n  cancelCurrentReleaseAnimation?.();\n\n  if (!isSwipeActive) return;\n\n  const targetPosition = extractAnimationEndPosition(currentSlide);\n  if (!targetPosition) return;\n\n  currentSlide.getAnimations().forEach((a) => a.pause());\n  nextSlide.getAnimations().forEach((a) => a.pause());\n\n  currentSlide.style.animationTimingFunction = 'linear';\n  nextSlide.style.animationTimingFunction = 'linear';\n\n  let currentDirection: 1 | -1 | undefined;\n\n  requestMeasure(() => {\n    const computedStyle = getComputedStyle(currentSlide);\n    const initialPositionPx = extractPositionFromMatrix(computedStyle.transform, targetPosition.axis);\n    const targetPositionPx = targetPosition.units === 'px'\n      ? targetPosition.value\n      : ((targetPosition.value / 100) * (\n        targetPosition.axis === 'X' ? currentSlide.offsetWidth : currentSlide.offsetHeight\n      ));\n    const distance = targetPositionPx - initialPositionPx;\n\n    let progress = 0;\n\n    onDrag = ({ dragOffsetX, dragOffsetY }) => {\n      const dragOffset = targetPosition.axis === 'X'\n        ? dragOffsetX - swipeOffsets!.dragOffsetX\n        : dragOffsetY - swipeOffsets!.dragOffsetY;\n\n      const newProgress = clamp(dragOffset / distance, 0, 1);\n      currentDirection = newProgress > progress ? 1 : -1;\n      progress = newProgress;\n\n      updateAnimationProgress([currentSlide, nextSlide], progress);\n    };\n\n    onRelease = (onCancelForClient: NoneToVoidFunction) => {\n      const isRevertSwipe = currentDirection === -1;\n\n      function cleanup() {\n        currentSlide.getAnimations().forEach((a) => a.cancel());\n        nextSlide.getAnimations().forEach((a) => a.cancel());\n\n        requestMutation(() => {\n          currentSlide.style.animationTimingFunction = '';\n          nextSlide.style.animationTimingFunction = '';\n        });\n      }\n\n      if (!isRevertSwipe) {\n        // For some reason animations are not cleared when CSS class is removed\n        waitForAnimationEnd(currentSlide, cleanup);\n      }\n\n      cancelCurrentReleaseAnimation = animateNumber({\n        from: progress,\n        to: isRevertSwipe ? 0 : 1,\n        duration: INERTIA_DURATION,\n        timing: INERTIA_EASING,\n        onUpdate(releaseProgress) {\n          updateAnimationProgress([currentSlide, nextSlide], releaseProgress);\n        },\n        onEnd(isCanceled = false) {\n          cancelCurrentReleaseAnimation = undefined;\n\n          if (isCanceled || isRevertSwipe) {\n            cleanup();\n            onCancelForTransition();\n            onCancelForClient();\n          }\n        },\n      });\n    };\n  });\n}\n\nfunction updateAnimationProgress(elements: HTMLElement[], progress: number) {\n  elements.map((e) => e.getAnimations()).flat().forEach((animation) => {\n    animation.currentTime = (animation.effect!.getTiming().duration as number) * progress;\n  });\n}\n\nfunction extractAnimationEndPosition(element: HTMLElement) {\n  for (const animation of element.getAnimations()) {\n    if (!(animation.effect instanceof KeyframeEffect)) continue;\n\n    for (const keyframe of animation.effect.getKeyframes()) {\n      if (keyframe.offset !== 1 || !keyframe.transform) continue;\n\n      const position = extractPositionFromTransform(keyframe.transform as string);\n      if (position) {\n        return position;\n      }\n    }\n  }\n\n  return undefined;\n}\n\nfunction extractPositionFromTransform(transformRule: string) {\n  const match = transformRule.match(/([XY])\\((-?\\d+)(%|px)\\)/);\n  if (!match) return undefined;\n\n  return {\n    axis: match[1] as 'X' | 'Y',\n    value: Number(match[2]),\n    units: match[3],\n  };\n}\n\nfunction extractPositionFromMatrix(transform: string, axis: 'X' | 'Y') {\n  const matrix = transform.slice(7, -1).split(',').map(Number);\n  return matrix[axis === 'X' ? 4 : 5];\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Lbq2gMzt\",\"title\":\"r4k7w6HQ\",\"dots\":\"__vkSP7q\",\"dotsError\":\"LI_tisFH\",\"shakeAnimation\":\"RrETnvf4\",\"dotsLoading\":\"HnSSbC5N\",\"spin\":\"WMJcrrfv\",\"appear\":\"rG3vC5Ev\",\"dot\":\"CH4h9HQz\",\"dotLoadingAnimation\":\"NJ5ujtVf\",\"firstDotLoadingAnimation\":\"rW78LwUS\",\"secondDotLoadingAnimation\":\"WITK5GhH\",\"thirdDotLoadingAnimation\":\"sRNwZpZb\",\"fourthDotLoadingAnimation\":\"_jBlKjPP\",\"dotFilled\":\"r_kAZ0Dm\",\"scaleAnimation\":\"AS8bxSS0\",\"grid\":\"CUQ0KIAI\",\"button\":\"lnaBx8hc\",\"minified\":\"MGnO4hqt\",\"buttonActive\":\"qBoIeNzV\",\"buttonHidden\":\"c_i4rWyo\",\"buttonDanger\":\"nvnxE80n\",\"error\":\"jLzZScDB\",\"success\":\"oVsGIXA4\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useState } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport { vibrate } from '../../util/haptics';\n\nimport styles from './PinPad.module.scss';\n\ninterface OwnProps {\n  value?: any;\n  children?: TeactNode;\n  className?: string;\n  isDisabled?: boolean;\n  onClick?: (value?: any) => void;\n}\n\nconst CLICKED_TIMEOUT_MS = 200;\n\nfunction PinPadButton({\n  value, children, className, isDisabled, onClick,\n}: OwnProps) {\n  const [isClicked, setIsClicked] = useState(false);\n\n  const handleClick = () => {\n    void vibrate();\n    onClick?.(value);\n    setIsClicked(true);\n    setTimeout(() => {\n      setIsClicked(false);\n    }, CLICKED_TIMEOUT_MS);\n  };\n  return (\n    <div\n      onMouseDown={!isDisabled ? handleClick : undefined}\n      className={buildClassName(styles.button, isClicked && styles.buttonActive, className)}\n      role=\"button\"\n      tabIndex={0}\n    >\n      {value || children}\n    </div>\n  );\n}\n\nexport default memo(PinPadButton);\n","import type { ElementRef, TeactNode } from '../../lib/teact/teact';\nimport React, { beginHeavyAnimation, useEffect, useLayoutEffect, useRef } from '../../lib/teact/teact';\nimport { addExtraClass, removeExtraClass, setExtraStyles, toggleExtraClass } from '../../lib/teact/teact-dom';\nimport { getGlobal } from '../../global';\n\nimport { ANIMATION_LEVEL_MIN } from '../../config';\nimport { requestForcedReflow, requestMutation } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\nimport { waitForAnimationEnd, waitForTransitionEnd } from '../../util/cssAnimationEndListeners';\nimport { SECOND } from '../../util/dateFormat';\nimport forceReflow from '../../util/forceReflow';\nimport { allowSwipeControlForTransition } from '../../util/swipeController';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport './Transition.scss';\n\ntype AnimationName = (\n  'none' | 'slide' | 'slideRtl' | 'slideFade' | 'zoomFade' | 'slideLayers'\n  | 'fade' | 'pushSlide' | 'reveal' | 'slideOptimized' | 'slideOptimizedRtl' | 'semiFade'\n  | 'slideVertical' | 'slideVerticalFade' | 'slideFadeAndroid'\n  );\nexport type ChildrenFn = (isActive: boolean, isFrom: boolean, currentKey: number, activeKey: number) => TeactNode;\nexport type TransitionProps = {\n  ref?: ElementRef<HTMLDivElement>;\n  activeKey: number;\n  prevKey?: number;\n  nextKey?: number;\n  name: AnimationName;\n  direction?: 'auto' | 'inverse' | 1 | -1;\n  renderCount?: number;\n  shouldRestoreHeight?: boolean;\n  shouldCleanup?: boolean;\n  cleanupExceptionKey?: number;\n  // Used by async components which are usually remounted during first animation\n  shouldWrap?: boolean;\n  wrapExceptionKey?: number;\n  id?: string;\n  className?: string;\n  slideClassName?: string;\n  withSwipeControl?: boolean;\n  onStart?: NoneToVoidFunction;\n  onStop?: NoneToVoidFunction;\n  onContainerClick?: NoneToVoidFunction;\n  onScroll?: (e: React.UIEvent<HTMLDivElement>) => void;\n  // Should be not a falsy value, otherwise some transitions will be delayed\n  children: TeactNode | ChildrenFn;\n};\n\nconst FALLBACK_ANIMATION_END = SECOND;\nconst CLASSES = {\n  slide: 'Transition_slide',\n  active: 'Transition_slide-active',\n  from: 'Transition_slide-from',\n  to: 'Transition_slide-to',\n  inactive: 'Transition_slide-inactive',\n};\n\nexport const ACTIVE_SLIDE_CLASS_NAME = CLASSES.active;\nexport const TO_SLIDE_CLASS_NAME = CLASSES.to;\n\nfunction Transition({\n  ref,\n  activeKey,\n  nextKey,\n  prevKey,\n  name,\n  direction = 'auto',\n  renderCount,\n  shouldRestoreHeight,\n  shouldCleanup,\n  cleanupExceptionKey,\n  shouldWrap,\n  wrapExceptionKey,\n  id,\n  className,\n  slideClassName,\n  withSwipeControl,\n  onStart,\n  onStop,\n  onContainerClick,\n  onScroll,\n  children,\n}: TransitionProps) {\n  const currentKeyRef = useRef<number>();\n  // No need for a container to update on change\n  const { animationLevel } = getGlobal().settings;\n  const shouldDisableAnimation = animationLevel === ANIMATION_LEVEL_MIN;\n\n  let containerRef = useRef<HTMLDivElement>();\n  if (ref) {\n    containerRef = ref;\n  }\n\n  const rendersRef = useRef<Record<number, TeactNode | ChildrenFn>>({});\n  const prevActiveKey = usePrevious<any>(activeKey);\n  const forceUpdate = useForceUpdate();\n  const isAnimatingRef = useRef(false);\n  const isSwipeJustCancelledRef = useRef(false);\n\n  const hasActiveKeyChanged = prevActiveKey !== undefined && activeKey !== prevActiveKey;\n\n  if (!renderCount && hasActiveKeyChanged) {\n    rendersRef.current = { [prevActiveKey]: rendersRef.current[prevActiveKey] };\n  }\n\n  rendersRef.current[activeKey] = children;\n  if (prevKey) {\n    rendersRef.current[prevKey] = children;\n  }\n  if (nextKey) {\n    rendersRef.current[nextKey] = children;\n  }\n\n  const isBackwards = (\n    direction === -1\n    || (direction === 'auto' && prevActiveKey > activeKey)\n    || (direction === 'inverse' && prevActiveKey < activeKey)\n  );\n\n  useLayoutEffect(() => {\n    function cleanup() {\n      if (!shouldCleanup) {\n        return;\n      }\n\n      const preservedRender = cleanupExceptionKey !== undefined ? rendersRef.current[cleanupExceptionKey] : undefined;\n\n      rendersRef.current = preservedRender ? { [cleanupExceptionKey!]: preservedRender } : {};\n\n      forceUpdate();\n    }\n\n    const isSlideOptimized = name === 'slideOptimized' || name === 'slideOptimizedRtl';\n    const container = containerRef.current!;\n    const keys = Object.keys(rendersRef.current).map(Number);\n    const prevActiveIndex = renderCount ? prevActiveKey : keys.indexOf(prevActiveKey);\n    const activeIndex = renderCount ? activeKey : keys.indexOf(activeKey);\n\n    const childNodes = Array.from(container.childNodes);\n    if (!childNodes.length) {\n      return;\n    }\n\n    const childElements = Array.from(container.children) as HTMLElement[];\n    childElements.forEach((el) => {\n      addExtraClass(el, CLASSES.slide);\n\n      if (slideClassName) {\n        slideClassName.split(/\\s+/).forEach((token) => {\n          addExtraClass(el, token);\n        });\n      }\n    });\n\n    if (!hasActiveKeyChanged) {\n      if (isAnimatingRef.current) {\n        return;\n      }\n\n      childElements.forEach((childElement) => {\n        if (childElement === childNodes[activeIndex]) {\n          addExtraClass(childElement, CLASSES.active);\n\n          if (isSlideOptimized) {\n            setExtraStyles(childElement, {\n              transition: 'none',\n              transform: 'translate3d(0, 0, 0)',\n            });\n          }\n        } else if (!isSlideOptimized) {\n          addExtraClass(childElement, CLASSES.inactive);\n        }\n      });\n\n      return;\n    }\n\n    currentKeyRef.current = activeKey;\n\n    if (isSlideOptimized) {\n      if (!childNodes[activeIndex]) {\n        return;\n      }\n\n      performSlideOptimized(\n        shouldDisableAnimation,\n        name,\n        isBackwards,\n        cleanup,\n        activeKey,\n        currentKeyRef,\n        isAnimatingRef,\n        container,\n        childNodes[activeIndex],\n        childNodes[prevActiveIndex],\n        shouldRestoreHeight,\n        onStart,\n        onStop,\n      );\n\n      return;\n    }\n\n    if (name === 'none' || shouldDisableAnimation || isSwipeJustCancelledRef.current) {\n      if (isSwipeJustCancelledRef.current) {\n        isSwipeJustCancelledRef.current = false;\n      }\n\n      childNodes.forEach((node, i) => {\n        if (node instanceof HTMLElement) {\n          removeExtraClass(node, CLASSES.from);\n          removeExtraClass(node, CLASSES.to);\n          toggleExtraClass(node, CLASSES.active, i === activeIndex);\n          toggleExtraClass(node, CLASSES.inactive, i !== activeIndex);\n        }\n      });\n\n      cleanup();\n\n      return;\n    }\n\n    childNodes.forEach((node, i) => {\n      if (node instanceof HTMLElement) {\n        removeExtraClass(node, CLASSES.active);\n        toggleExtraClass(node, CLASSES.from, i === prevActiveIndex);\n        toggleExtraClass(node, CLASSES.to, i === activeIndex);\n        toggleExtraClass(node, CLASSES.inactive, i !== prevActiveIndex && i !== activeIndex);\n      }\n    });\n\n    isAnimatingRef.current = true;\n    const endHeavyAnimation = beginHeavyAnimation();\n    onStart?.();\n\n    toggleExtraClass(container, `Transition-${name}`, !isBackwards);\n    toggleExtraClass(container, `Transition-${name}Backwards`, isBackwards);\n\n    function onAnimationEnd() {\n      const activeElement = container.querySelector<HTMLDivElement>(`.${CLASSES.active}`);\n      const { clientHeight } = activeElement || {};\n\n      requestMutation(() => {\n        if (activeKey !== currentKeyRef.current) {\n          endHeavyAnimation();\n          return;\n        }\n\n        removeExtraClass(container, `Transition-${name}`);\n        removeExtraClass(container, `Transition-${name}Backwards`);\n\n        childNodes.forEach((node, i) => {\n          if (node instanceof HTMLElement) {\n            removeExtraClass(node, CLASSES.from);\n            removeExtraClass(node, CLASSES.to);\n            toggleExtraClass(node, CLASSES.active, i === activeIndex);\n            toggleExtraClass(node, CLASSES.inactive, i !== activeIndex);\n          }\n        });\n\n        if (shouldRestoreHeight) {\n          if (activeElement) {\n            setExtraStyles(activeElement, { height: 'auto' });\n            setExtraStyles(container, { height: `${clientHeight}px` });\n          }\n        }\n\n        onStop?.();\n        endHeavyAnimation();\n        isAnimatingRef.current = false;\n\n        cleanup();\n      });\n    }\n\n    const watchedNode = (name === 'reveal' || name === 'slideFadeAndroid') && isBackwards\n      ? childNodes[prevActiveIndex]\n      : childNodes[activeIndex];\n\n    if (watchedNode) {\n      if (withSwipeControl && childNodes[prevActiveIndex]) {\n        const giveUpAnimationEnd = waitForAnimationEnd(watchedNode, onAnimationEnd);\n\n        allowSwipeControlForTransition(\n          childNodes[prevActiveIndex] as HTMLElement,\n          childNodes[activeIndex] as HTMLElement,\n          () => {\n            giveUpAnimationEnd();\n            isSwipeJustCancelledRef.current = true;\n            onStop?.();\n            endHeavyAnimation();\n            isAnimatingRef.current = false;\n          },\n        );\n      } else {\n        waitForAnimationEnd(watchedNode, onAnimationEnd, undefined, FALLBACK_ANIMATION_END);\n      }\n    } else {\n      onAnimationEnd();\n    }\n  }, [\n    activeKey,\n    nextKey,\n    prevActiveKey,\n    hasActiveKeyChanged,\n    isBackwards,\n    name,\n    onStart,\n    onStop,\n    renderCount,\n    shouldRestoreHeight,\n    shouldCleanup,\n    slideClassName,\n    cleanupExceptionKey,\n    shouldDisableAnimation,\n    forceUpdate,\n    withSwipeControl,\n  ]);\n\n  useEffect(() => {\n    if (!shouldRestoreHeight) {\n      return;\n    }\n\n    const container = containerRef.current!;\n    const activeElement = container.querySelector<HTMLDivElement>(`.${CLASSES.active}`)\n      || container.querySelector<HTMLDivElement>(`.${CLASSES.from}`);\n    if (!activeElement) {\n      return;\n    }\n\n    const { clientHeight } = activeElement || {};\n    if (!clientHeight) {\n      return;\n    }\n\n    requestMutation(() => {\n      setExtraStyles(activeElement, { height: 'auto' });\n      setExtraStyles(container, {\n        height: `${clientHeight}px`,\n        flexBasis: `${clientHeight}px`,\n      });\n    });\n  }, [shouldRestoreHeight, children]);\n\n  const asFastList = !renderCount;\n  const renders = rendersRef.current;\n  const renderKeys = Object.keys(renderCount ? new Array(renderCount).fill(undefined) : renders).map(Number);\n  const contents = renderKeys.map((key) => {\n    const render = renders[key];\n    if (!render) {\n      return undefined;\n    }\n\n    const rendered = typeof render === 'function'\n      ? render(key === activeKey, key === prevActiveKey, key, activeKey)\n      : render;\n\n    return (shouldWrap && key !== wrapExceptionKey) || asFastList\n      ? <div key={key} teactOrderKey={key}>{rendered}</div>\n      : rendered;\n  });\n\n  return (\n    <div\n      ref={containerRef}\n      onScroll={onScroll}\n      onClick={onContainerClick}\n      id={id}\n      className={buildClassName('Transition', className)}\n      teactFastList={asFastList}\n    >\n      {contents}\n    </div>\n  );\n}\n\nexport default Transition;\n\nfunction performSlideOptimized(\n  shouldDisableAnimation: boolean,\n  name: 'slideOptimized' | 'slideOptimizedRtl',\n  isBackwards: boolean,\n  cleanup: NoneToVoidFunction,\n  activeKey: number,\n  currentKeyRef: { current: number | undefined },\n  isAnimatingRef: { current: boolean | undefined },\n  container: HTMLElement,\n  toSlide: ChildNode,\n  fromSlide?: ChildNode,\n  shouldRestoreHeight?: boolean,\n  onStart?: NoneToVoidFunction,\n  onStop?: NoneToVoidFunction,\n) {\n  if (shouldDisableAnimation) {\n    toggleExtraClass(container, `Transition-${name}`, !isBackwards);\n    toggleExtraClass(container, `Transition-${name}Backwards`, isBackwards);\n\n    if (fromSlide instanceof HTMLElement) {\n      removeExtraClass(fromSlide, CLASSES.active);\n      setExtraStyles(fromSlide, {\n        transition: 'none',\n        transform: '',\n      });\n    }\n\n    if (toSlide instanceof HTMLElement) {\n      addExtraClass(toSlide, CLASSES.active);\n      setExtraStyles(toSlide, {\n        transition: 'none',\n        transform: 'translate3d(0, 0, 0)',\n      });\n    }\n\n    cleanup();\n\n    return;\n  }\n\n  if (name === 'slideOptimizedRtl') {\n    isBackwards = !isBackwards;\n  }\n\n  isAnimatingRef.current = true;\n  const endHeavyAnimation = beginHeavyAnimation();\n  onStart?.();\n\n  toggleExtraClass(container, `Transition-${name}`, !isBackwards);\n  toggleExtraClass(container, `Transition-${name}Backwards`, isBackwards);\n\n  if (fromSlide instanceof HTMLElement) {\n    setExtraStyles(fromSlide, {\n      transition: 'none',\n      transform: 'translate3d(0, 0, 0)',\n    });\n  }\n\n  if (toSlide instanceof HTMLElement) {\n    setExtraStyles(toSlide, {\n      transition: 'none',\n      transform: `translate3d(${isBackwards ? '-' : ''}100%, 0, 0)`,\n    });\n  }\n\n  requestForcedReflow(() => {\n    if (toSlide instanceof HTMLElement) {\n      forceReflow(toSlide);\n    }\n\n    return () => {\n      if (fromSlide instanceof HTMLElement) {\n        removeExtraClass(fromSlide, CLASSES.active);\n        setExtraStyles(fromSlide, {\n          transition: '',\n          transform: `translate3d(${isBackwards ? '' : '-'}100%, 0, 0)`,\n        });\n      }\n\n      if (toSlide instanceof HTMLElement) {\n        addExtraClass(toSlide, CLASSES.active);\n        setExtraStyles(toSlide, {\n          transition: '',\n          transform: 'translate3d(0, 0, 0)',\n        });\n      }\n    };\n  });\n\n  waitForTransitionEnd(toSlide, () => {\n    const clientHeight = toSlide instanceof HTMLElement ? toSlide.clientHeight : undefined;\n\n    requestMutation(() => {\n      if (activeKey !== currentKeyRef.current) {\n        endHeavyAnimation();\n        return;\n      }\n\n      if (fromSlide instanceof HTMLElement) {\n        setExtraStyles(fromSlide, {\n          transition: 'none',\n          transform: '',\n        });\n      }\n\n      if (shouldRestoreHeight && clientHeight && toSlide instanceof HTMLElement) {\n        setExtraStyles(toSlide, { height: 'auto' });\n        setExtraStyles(container, { height: `${clientHeight}px` });\n      }\n\n      onStop?.();\n      endHeavyAnimation();\n      isAnimatingRef.current = false;\n\n      cleanup();\n    });\n  });\n}\n","// Used before applying CSS transition\nexport default function forceReflow(element: HTMLElement) {\n  // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n  element.offsetWidth;\n}\n","import { BottomSheet } from '@mytonwallet/native-bottom-sheet';\nimport React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\n\nimport { WRONG_ATTEMPTS_BEFORE_LOG_OUT_SUGGESTION } from '../../config';\nimport { getIsFaceIdAvailable } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { vibrateOnError } from '../../util/haptics';\nimport { disableSwipeToClose, enableSwipeToClose } from '../../util/modalSwipeManager';\nimport { SWIPE_DISABLED_CLASS_NAME } from '../../util/swipeController';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../util/windowEnvironment';\n\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport { useMatchCount } from '../../hooks/useMatchCount';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport PinPadButton from './PinPadButton';\nimport Transition from './Transition';\n\nimport styles from './PinPad.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  title: string;\n  type?: 'error' | 'success';\n  value: string;\n  length?: number;\n  resetStateDelayMs?: number;\n  className?: string;\n  isMinified?: boolean;\n  topContent?: TeactJsx;\n  onBiometricsClick?: NoneToVoidFunction;\n  onChange: (value: string) => void;\n  onClearError?: NoneToVoidFunction;\n  onSubmit: (pin: string) => void;\n  onLogOutClick?: NoneToVoidFunction;\n}\n\ntype StateProps = Pick<GlobalState['settings'], 'authConfig'> & {\n  isPinAccepted?: boolean;\n};\n\nconst DEFAULT_PIN_LENGTH = 4;\nconst RESET_STATE_DELAY_MS = 1500;\n\nfunction PinPad({\n  isActive,\n  title,\n  type,\n  value,\n  resetStateDelayMs = RESET_STATE_DELAY_MS,\n  length = DEFAULT_PIN_LENGTH,\n  isPinAccepted,\n  className,\n  isMinified,\n  topContent,\n  onBiometricsClick,\n  onChange,\n  onClearError,\n  onSubmit,\n  onLogOutClick,\n}: OwnProps & StateProps) {\n  const { clearIsPinAccepted } = getActions();\n\n  const isFaceId = getIsFaceIdAvailable();\n  const canRenderBackspace = value.length > 0;\n  const isSuccess = type === 'success' || isPinAccepted;\n  const prevIsPinAccepted = usePrevious(isPinAccepted);\n  const arePinButtonsDisabled = isSuccess\n    || (value.length === length && type !== 'error'); // Allow pincode entry in case of an error\n\n  const titleClassName = buildClassName(\n    styles.title,\n    type === 'error' && styles.error,\n    isSuccess && styles.success,\n  );\n\n  const shouldSuggestLogout = useMatchCount(type === 'error', WRONG_ATTEMPTS_BEFORE_LOG_OUT_SUGGESTION);\n\n  useEffect(() => {\n    if (prevIsPinAccepted && !isPinAccepted && length === value.length) {\n      onChange('');\n    }\n  }, [isPinAccepted, length, onChange, prevIsPinAccepted, value.length]);\n\n  useEffect(() => clearIsPinAccepted, []);\n\n  // Fix for iOS, enable fast pinpad button presses\n  useEffectWithPrevDeps(([prevIsActive]) => {\n    if (!IS_DELEGATED_BOTTOM_SHEET) return;\n    if (isActive) {\n      void BottomSheet.clearScrollPatch();\n    } else if (prevIsActive) {\n      void BottomSheet.applyScrollPatch();\n    }\n  }, [isActive]);\n\n  useEffect(() => {\n    if (type !== 'error') return undefined;\n\n    const timeoutId = window.setTimeout(() => {\n      if (value.length === length) {\n        onChange('');\n      }\n      onClearError?.();\n    }, resetStateDelayMs);\n    void vibrateOnError();\n\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [length, onChange, onClearError, resetStateDelayMs, type, value.length]);\n\n  useEffect(() => {\n    if (!isActive) return undefined;\n\n    disableSwipeToClose();\n\n    return () => {\n      enableSwipeToClose();\n    };\n  }, [isActive]);\n\n  const handleClick = useLastCallback((char: string) => {\n    if (value.length === length || value.length === 0) {\n      onClearError?.();\n    }\n\n    if (value.length === length) {\n      onChange(char);\n\n      return;\n    }\n\n    const newValue = `${value}${char}`;\n    onChange(newValue);\n\n    if (newValue.length === length) {\n      onSubmit(newValue);\n    }\n  });\n\n  const handleBackspaceClick = useLastCallback(() => {\n    onClearError?.();\n    if (!value.length) return;\n\n    onChange(value.slice(0, -1));\n  });\n\n  function renderDots() {\n    const dotsClassName = buildClassName(\n      styles.dots,\n      type === 'error' && styles.dotsError,\n      isSuccess && styles.dotsLoading,\n    );\n\n    return (\n      <div className={dotsClassName} aria-hidden>\n        {Array.from({ length }, (_, i) => (\n          <div\n            key={i}\n            className={buildClassName(\n              styles.dot,\n              i < value.length && styles.dotFilled,\n              type === 'error' && styles.error,\n              isSuccess && styles.success,\n            )}\n          />\n        ))}\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.root, className, SWIPE_DISABLED_CLASS_NAME)}>\n      {topContent ?? <div className={titleClassName}>{title}</div>}\n      {renderDots()}\n\n      <div className={buildClassName(styles.grid, isMinified && styles.minified)}>\n        <PinPadButton value=\"1\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"2\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"3\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"4\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"5\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"6\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"7\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"8\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"9\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        {!onBiometricsClick ? <span /> : (\n          <PinPadButton onClick={onBiometricsClick} isDisabled={isSuccess}>\n            <i className={buildClassName('icon', isFaceId ? 'icon-face-id' : 'icon-touch-id')} aria-hidden />\n          </PinPadButton>\n        )}\n        <PinPadButton value=\"0\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <Transition\n          name=\"zoomFade\"\n          activeKey={shouldSuggestLogout && !value.length ? 0 : 1}\n        >\n          {onLogOutClick && shouldSuggestLogout && !value.length ? (\n            <PinPadButton\n              className={styles.buttonDanger}\n              onClick={onLogOutClick}\n            >\n              <i className=\"icon icon-exit\" aria-hidden />\n            </PinPadButton>\n          ) : (\n            <PinPadButton\n              className={!canRenderBackspace && styles.buttonHidden}\n              isDisabled={!canRenderBackspace || isSuccess}\n              onClick={handleBackspaceClick}\n            >\n              <i className=\"icon icon-backspace\" aria-hidden />\n            </PinPadButton>\n          )}\n        </Transition>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global) => {\n    const { isPinAccepted } = global;\n\n    return {\n      isPinAccepted,\n    };\n  },\n  (global, _, stickToFirst) => {\n    const { isPinAccepted } = global;\n\n    return stickToFirst(isPinAccepted);\n  },\n)(PinPad));\n","// extracted by mini-css-extract-plugin\nexport default {\"sticker\":\"ifHfFY2u\",\"label\":\"C3jlHNpF\",\"title\":\"kC9WGOYP\",\"errorMessage\":\"q8niLQND\",\"verify\":\"SDEJGboy\",\"error\":\"ZokzPDAj\",\"pinPadHeader\":\"sftOkqxr\",\"closeButton\":\"twjZlrDJ\",\"autoConfirmCheckbox\":\"MgA9JMMb\",\"logOutWrapper\":\"N0lWn9sM\",\"logOutButton\":\"jhtp0Nsp\"};","import type { RefObject, TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { AuthConfig } from '../../util/authApi/types';\n\nimport {\n  AUTO_CONFIRM_DURATION_MINUTES,\n  PIN_LENGTH,\n  SUPPORT_USERNAME,\n  WRONG_ATTEMPTS_BEFORE_LOG_OUT_SUGGESTION,\n} from '../../config';\nimport { selectIsBiometricAuthEnabled, selectIsNativeBiometricAuthEnabled } from '../../global/selectors';\nimport authApi from '../../util/authApi';\nimport { getHasInMemoryPassword, getInMemoryPassword } from '../../util/authApi/inMemoryPasswordStore';\nimport { getDoesUsePinPad, getIsFaceIdAvailable, getIsTouchIdAvailable } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { stopEvent } from '../../util/domEvents';\nimport { getTranslation } from '../../util/langProvider';\nimport { pause } from '../../util/schedulers';\nimport { createSignal } from '../../util/signals';\nimport { IS_ANDROID_APP, IS_DELEGATING_BOTTOM_SHEET } from '../../util/windowEnvironment';\nimport { callApi } from '../../api';\nimport { ANIMATED_STICKERS_PATHS } from './helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectOnce from '../../hooks/useEffectOnce';\nimport useFlag from '../../hooks/useFlag';\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport { useMatchCount } from '../../hooks/useMatchCount';\n\nimport LogOutModal from '../main/modals/LogOutModal';\nimport AnimatedIconWithPreview from './AnimatedIconWithPreview';\nimport Button from './Button';\nimport Checkbox from './Checkbox';\nimport Input from './Input';\nimport Modal from './Modal';\nimport PinPad from './PinPad';\n\nimport modalStyles from './Modal.module.scss';\nimport styles from './PasswordForm.module.scss';\n\ntype OperationType = 'transfer' | 'sending' | 'staking' | 'unstaking' | 'swap'\n  | 'unfreeze' | 'passcode' | 'unlock' | 'claim' | 'turnOnBiometrics' | 'mintCard';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  operationType?: OperationType;\n  cancelLabel?: string;\n  submitLabel: string | TeactNode[];\n  stickerSize?: number;\n  placeholder?: string;\n  error?: string;\n  help?: string;\n  resetStateDelayMs?: number;\n  containerClassName?: string;\n  pinPadClassName?: string;\n  withCloseButton?: boolean;\n  children?: TeactNode;\n  noAnimatedIcon?: boolean;\n  inputWrapperClassName?: string;\n  forceBiometricsInMain?: boolean;\n  // Works only if the password is memoized. If `true`, the component will render\n  // a separate screen with an action info and buttons 'Cancel' and 'Confirm'.\n  skipAuthScreen?: boolean;\n  onCancel?: NoneToVoidFunction;\n  onUpdate: NoneToVoidFunction;\n  onSubmit: (password: string) => void;\n}\n\ninterface StateProps {\n  isPasswordNumeric?: boolean;\n  isBiometricAuthEnabled: boolean;\n  isNativeBiometricAuthEnabled: boolean;\n  authConfig?: AuthConfig;\n  isAutoConfirmEnabled?: boolean;\n}\n\nconst STICKER_SIZE = 180;\nconst APPEAR_ANIMATION_DURATION_MS = 300;\n\nconst [getHandleBiometricsSignal, setHandleBiometricsSignal] = createSignal(Date.now());\n\nexport function triggerPasswordFormHandleBiometrics(e?: MouseEvent | KeyboardEvent) {\n  if (e) {\n    stopEvent(e);\n  }\n  setHandleBiometricsSignal(Date.now());\n}\n\nfunction useInMemoryPassword(inMemoryPasswordRef: RefObject<string | undefined>) {\n  const hasInMemoryPassword = useMemo(() => getHasInMemoryPassword(), []);\n  if (hasInMemoryPassword && !inMemoryPasswordRef.current) {\n    void getInMemoryPassword().then((password) => {\n      inMemoryPasswordRef.current = password;\n    });\n  }\n  return hasInMemoryPassword;\n}\n\nfunction useStorageClearedDialog(operationType?: OperationType) {\n  const { showDialog } = getActions();\n\n  return useLastCallback(() => {\n    showDialog({\n      title: '$storage_cleared_title',\n      message: getTranslation('$storage_cleared_message', {\n        support_link: (\n          <a href={`https://t.me/${SUPPORT_USERNAME}`} target=\"_blank\" rel=\"noreferrer\">\n            @{SUPPORT_USERNAME}\n          </a>\n        ),\n      }),\n      buttons: {\n        cancel: { title: 'Cancel' },\n        confirm: { title: 'Log Out', isDestructive: true, action: 'signOutAll' },\n      },\n      noBackdropClose: true,\n      isInAppLock: operationType === 'unlock',\n    });\n  });\n}\n\nfunction PasswordForm({\n  isActive,\n  isLoading,\n  operationType,\n  isPasswordNumeric,\n  isBiometricAuthEnabled,\n  isNativeBiometricAuthEnabled,\n  authConfig,\n  cancelLabel,\n  submitLabel,\n  stickerSize = STICKER_SIZE,\n  placeholder = 'Enter your password',\n  error,\n  help,\n  resetStateDelayMs,\n  containerClassName,\n  pinPadClassName,\n  children,\n  withCloseButton,\n  noAnimatedIcon,\n  inputWrapperClassName,\n  forceBiometricsInMain,\n  skipAuthScreen,\n  isAutoConfirmEnabled,\n  onUpdate,\n  onCancel,\n  onSubmit,\n}: OwnProps & StateProps) {\n  const { openSettings, setInMemoryPassword, setIsAutoConfirmEnabled } = getActions();\n\n  const lang = useLang();\n\n  const memoizedPasswordRef = useRef<string>();\n  const hasInMemoryPassword = useInMemoryPassword(memoizedPasswordRef);\n\n  const showOnlyConfirmScreen = skipAuthScreen && hasInMemoryPassword;\n\n  const passwordRef = useRef<HTMLInputElement>();\n  const [password, setPassword] = useState<string>('');\n  const [localError, setLocalError] = useState<string>('');\n  const [wrongAttempts, setWrongAttempts] = useState(0);\n  const [isResetBiometricsWarningOpen, openResetBiometricsWarning, closeResetBiometricsWarning] = useFlag(false);\n  const { isSmallHeight, isPortrait } = useDeviceScreen();\n  const isSubmitDisabled = !password.length && !showOnlyConfirmScreen;\n  const canUsePinPad = getDoesUsePinPad();\n  const [isLogOutModalOpened, openLogOutModal, closeLogOutModal] = useFlag(false);\n  const shouldSuggestLogout = useMatchCount(!!error || !!localError, WRONG_ATTEMPTS_BEFORE_LOG_OUT_SUGGESTION);\n  const showStorageClearedDialog = useStorageClearedDialog(operationType);\n\n  useEffect(() => {\n    if (isActive) {\n      setLocalError('');\n      setPassword('');\n      setWrongAttempts(0);\n    }\n  }, [isActive]);\n\n  const submitCallback = useLastCallback(async (enteredPassword: string) => {\n    const passwordToReturn = showOnlyConfirmScreen ? memoizedPasswordRef.current! : enteredPassword;\n    onSubmit(passwordToReturn);\n\n    if (showOnlyConfirmScreen) return;\n\n    const passwordVerified = await callApi('verifyPassword', passwordToReturn);\n    if (!passwordVerified) {\n      // Password verification failed - check if it's due to storage corruption\n      const isStorageOk = await callApi('checkWorkerStorageIntegrity');\n      if (!isStorageOk) {\n        return showStorageClearedDialog();\n      }\n      // Storage is intact, so it's just a wrong password - let normal error handling proceed\n    }\n\n    if (passwordVerified) {\n      setInMemoryPassword({ password: passwordToReturn });\n    }\n  });\n\n  const handleSubmit = useLastCallback(() => {\n    void submitCallback(password);\n  });\n\n  const handleBiometrics = useLastCallback(async () => {\n    try {\n      setLocalError('');\n      const biometricPassword = await authApi.getPassword(authConfig!);\n      if (!biometricPassword) {\n        setWrongAttempts(wrongAttempts + 1);\n        setLocalError('Biometric confirmation failed');\n\n        if (IS_ANDROID_APP && wrongAttempts > 2) {\n          openResetBiometricsWarning();\n        }\n      } else {\n        void submitCallback(biometricPassword);\n      }\n    } catch (err: any) {\n      setLocalError(err.message || lang('Something went wrong.'));\n    }\n  });\n\n  useEffect(() => {\n    if (\n      (IS_DELEGATING_BOTTOM_SHEET && !forceBiometricsInMain)\n      || !isActive\n      || !isBiometricAuthEnabled\n      || showOnlyConfirmScreen\n    ) {\n      return;\n    }\n\n    void pause(APPEAR_ANIMATION_DURATION_MS).then(handleBiometrics);\n  }, [forceBiometricsInMain, handleBiometrics, isActive, isBiometricAuthEnabled, showOnlyConfirmScreen]);\n\n  useEffectOnce(() => {\n    return getHandleBiometricsSignal.subscribe(handleBiometrics);\n  });\n\n  useFocusAfterAnimation(passwordRef, !isActive || isBiometricAuthEnabled);\n\n  const handleClearError = useLastCallback(() => {\n    setLocalError('');\n    onUpdate();\n  });\n\n  const handleOpenSettings = useLastCallback(() => {\n    closeResetBiometricsWarning();\n    onCancel?.();\n    openSettings();\n  });\n\n  const handleInput = useLastCallback((value: string) => {\n    setPassword(value);\n    if (error) {\n      onUpdate();\n    }\n  });\n\n  const handleAutoConfirmChange = useLastCallback((isEnabled: boolean) => {\n    setIsAutoConfirmEnabled({ isEnabled });\n  });\n\n  const handleOpenLogOutModal = useLastCallback((e: React.MouseEvent) => {\n    stopEvent(e);\n    openLogOutModal();\n  });\n\n  useEffect(() => {\n    return isSubmitDisabled || isLoading\n      ? undefined\n      : captureKeyboardListeners({ onEnter: handleSubmit });\n  }, [handleSubmit, isLoading, isSubmitDisabled]);\n\n  function getPinPadTitle() {\n    switch (operationType) {\n      case 'unfreeze':\n        return 'Confirm Unfreezing';\n      case 'passcode':\n      case 'turnOnBiometrics':\n        return 'Confirm Passcode';\n      case 'transfer':\n      case 'sending':\n        return 'Confirm Sending';\n      case 'staking':\n        return 'Confirm Staking';\n      case 'unstaking':\n        return 'Confirm Unstaking';\n      case 'swap':\n        return 'Confirm Swap';\n      case 'unlock':\n        return undefined;\n      case 'claim':\n        return 'Confirm Rewards Claim';\n      case 'mintCard':\n        return 'Confirm Upgrading';\n      default:\n        return 'Confirm Action';\n    }\n  }\n\n  const shouldRenderFullWidthButton = operationType === 'unlock';\n  const footerButtonsClassName = buildClassName(\n    modalStyles.footerButtons,\n    shouldRenderFullWidthButton && modalStyles.footerButtonFullWidth,\n  );\n\n  function renderFooterButtons() {\n    return (\n      <div className={footerButtonsClassName}>\n        {onCancel && (\n          <Button\n            isLoading={isLoading && isBiometricAuthEnabled}\n            isDisabled={isLoading && !isBiometricAuthEnabled}\n            className={modalStyles.buttonHalfWidth}\n            onClick={onCancel}\n          >\n            {cancelLabel || lang('Cancel')}\n          </Button>\n        )}\n        {isBiometricAuthEnabled && Boolean(localError) && (\n          <Button\n            isPrimary\n            isLoading={isLoading}\n            isDisabled={isLoading}\n            className={modalStyles.buttonHalfWidth}\n            onClick={!isLoading ? handleBiometrics : undefined}\n            shouldStopPropagation\n          >\n            {lang('Try Again')}\n          </Button>\n        )}\n        {(!isBiometricAuthEnabled || showOnlyConfirmScreen) && (\n          <Button\n            isPrimary\n            isLoading={isLoading}\n            isDisabled={isSubmitDisabled}\n            className={!shouldRenderFullWidthButton ? modalStyles.buttonHalfWidth : modalStyles.buttonFullWidth}\n            onClick={!isLoading ? handleSubmit : undefined}\n          >\n            {submitLabel || lang('Send')}\n          </Button>\n        )}\n      </div>\n    );\n  }\n\n  function renderAutoConfirmCheckbox() {\n    return (\n      <Checkbox\n        checked={!!isAutoConfirmEnabled}\n        onChange={handleAutoConfirmChange}\n        className={styles.autoConfirmCheckbox}\n      >\n        {lang('Remember for %1$d minutes', AUTO_CONFIRM_DURATION_MINUTES)}\n      </Checkbox>\n    );\n  }\n\n  const shouldRenderAutoConfirmCheckbox = operationType !== 'turnOnBiometrics' && !isBiometricAuthEnabled;\n\n  if (canUsePinPad) {\n    const hasError = Boolean(localError || error);\n    const title = getPinPadTitle();\n    const actionName = lang(\n      !isNativeBiometricAuthEnabled\n        ? 'Enter code'\n        : (getIsFaceIdAvailable()\n          ? 'Enter code or use Face ID'\n          : (getIsTouchIdAvailable()\n            ? 'Enter code or use Touch ID'\n            : 'Enter code or use biometrics')\n        ),\n    );\n\n    const content = (\n      <>\n        {withCloseButton && (\n          <Button\n            isRound\n            className={buildClassName(modalStyles.closeButton, styles.closeButton)}\n            ariaLabel={lang('Close')}\n            onClick={onCancel}\n          >\n            <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n          </Button>\n        )}\n        <div className={styles.pinPadHeader}>\n          {isPortrait && !noAnimatedIcon && (\n            <AnimatedIconWithPreview\n              play={isActive}\n              tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n              previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n              noLoop={false}\n              nonInteractive\n            />\n          )}\n          {!isSmallHeight && title && <div className={styles.title}>{lang(title)}</div>}\n          {children}\n        </div>\n\n        {showOnlyConfirmScreen ? renderFooterButtons() : (\n          <PinPad\n            isActive={isActive}\n            title={lang(hasError ? (localError || error!) : (isSmallHeight && title ? title : actionName))}\n            type={hasError ? 'error' : undefined}\n            length={PIN_LENGTH}\n            resetStateDelayMs={resetStateDelayMs}\n            value={password}\n            topContent={shouldRenderAutoConfirmCheckbox ? renderAutoConfirmCheckbox() : undefined}\n            className={pinPadClassName}\n            onBiometricsClick={isNativeBiometricAuthEnabled ? handleBiometrics : undefined}\n            onLogOutClick={operationType === 'unlock' ? openLogOutModal : undefined}\n            onChange={setPassword}\n            onClearError={handleClearError}\n            onSubmit={submitCallback}\n          />\n        )}\n        {operationType === 'unlock' && (\n          <LogOutModal isOpen={isLogOutModalOpened} onClose={closeLogOutModal} isInAppLock />\n        )}\n      </>\n    );\n\n    return showOnlyConfirmScreen ? (\n      <div className={modalStyles.transitionContent}>\n        {content}\n      </div>\n    ) : content;\n  }\n\n  function renderBiometricPrompt() {\n    const renderingError = localError || error;\n    if (renderingError) {\n      return (\n        <div className={styles.error}>{lang(renderingError)}</div>\n      );\n    }\n\n    return (\n      <div className={styles.verify}>\n        {lang(operationType === 'transfer'\n          ? 'Please confirm transaction using biometrics' : 'Please confirm operation using biometrics')}\n      </div>\n    );\n  }\n\n  function renderPasswordForm() {\n    return (\n      <>\n        <Input\n          ref={passwordRef}\n          type=\"password\"\n          isRequired\n          id=\"first-password\"\n          wrapperClassName={inputWrapperClassName}\n          inputMode={isPasswordNumeric ? 'numeric' : undefined}\n          error={error ? lang(error) : localError}\n          placeholder={lang(placeholder)}\n          value={password}\n          onInput={handleInput}\n          maxLength={isPasswordNumeric ? PIN_LENGTH : undefined}\n        />\n        {localError && (\n          <div className={styles.errorMessage}>{lang(localError)}</div>\n        )}\n        {help && !error && (\n          <div className={styles.label}>{help}</div>\n        )}\n        {shouldRenderAutoConfirmCheckbox && renderAutoConfirmCheckbox()}\n      </>\n    );\n  }\n\n  return (\n    <div className={buildClassName(modalStyles.transitionContent, containerClassName)}>\n      {!noAnimatedIcon && (\n        <AnimatedIconWithPreview\n          tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n          previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n          play={isActive}\n          size={stickerSize}\n          nonInteractive\n          noLoop={false}\n          className={styles.sticker}\n        />\n      )}\n\n      {children}\n\n      {!showOnlyConfirmScreen && (isBiometricAuthEnabled ? renderBiometricPrompt() : renderPasswordForm())}\n\n      {shouldSuggestLogout && operationType === 'unlock' && (\n        <div className={styles.logOutWrapper}>\n          {lang('Can\\'t confirm?')}\n          <span\n            role=\"button\"\n            tabIndex={0}\n            className={styles.logOutButton}\n            onClick={handleOpenLogOutModal}\n          >\n            {lang('Exit all wallets')}\n            <i className={buildClassName('icon-chevron-right', styles.detailsIcon)} aria-hidden />\n          </span>\n        </div>\n      )}\n\n      {renderFooterButtons()}\n\n      <Modal\n        isOpen={isResetBiometricsWarningOpen}\n        isCompact\n        title={lang('Biometric authentication failed')}\n        onClose={closeResetBiometricsWarning}\n      >\n        <p className={modalStyles.text}>\n          {lang('Reinstall biometrics in your device\\'s system settings, or use a passcode.')}\n        </p>\n\n        <div className={modalStyles.buttons}>\n          <Button className={modalStyles.button} onClick={closeResetBiometricsWarning}>{lang('Close')}</Button>\n          <Button isPrimary className={modalStyles.button} onClick={handleOpenSettings}>\n            {lang('Settings')}\n          </Button>\n        </div>\n      </Modal>\n      {operationType === 'unlock' && (\n        <LogOutModal isOpen={isLogOutModalOpened} onClose={closeLogOutModal} isInAppLock />\n      )}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { isPasswordNumeric, authConfig, isAutoConfirmEnabled } = global.settings;\n  const isBiometricAuthEnabled = selectIsBiometricAuthEnabled(global);\n  const isNativeBiometricAuthEnabled = selectIsNativeBiometricAuthEnabled(global);\n\n  return {\n    isPasswordNumeric,\n    isBiometricAuthEnabled,\n    isNativeBiometricAuthEnabled,\n    authConfig,\n    isAutoConfirmEnabled,\n  };\n})(PasswordForm));\n","import { useEffect, useState } from '../lib/teact/teact';\n\nimport type { AppTheme, Theme } from '../global/types';\n\nimport useLastCallback from './useLastCallback';\n\nconst prefersDark = window.matchMedia('(prefers-color-scheme: dark)');\n\nfunction useAppTheme(currentTheme: Theme) {\n  const [theme, setTheme] = useState<AppTheme>(\n    currentTheme === 'system'\n      ? (prefersDark.matches ? 'dark' : 'light')\n      : currentTheme,\n  );\n\n  const handlePrefersColorSchemeChange = useLastCallback(() => {\n    setTheme(() => {\n      if (currentTheme === 'system') {\n        return prefersDark.matches ? 'dark' : 'light';\n      }\n\n      return currentTheme;\n    });\n  });\n\n  useEffect(() => {\n    if (currentTheme !== 'system') return undefined;\n\n    prefersDark.addEventListener('change', handlePrefersColorSchemeChange);\n\n    return () => {\n      prefersDark.removeEventListener('change', handlePrefersColorSchemeChange);\n    };\n  }, [currentTheme]);\n\n  handlePrefersColorSchemeChange();\n\n  return theme;\n}\n\nexport default useAppTheme;\n","export const preloadedImageUrls = new Set();\n\nexport function preloadImage(url: string): Promise<HTMLImageElement> {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => {\n      preloadedImageUrls.add(url);\n      resolve(img);\n    };\n    img.onerror = reject;\n    img.src = url;\n  });\n}\n","import React, { memo, useRef } from '../../lib/teact/teact';\n\nimport { preloadedImageUrls } from '../../util/preloadImage';\n\nimport useFlag from '../../hooks/useFlag';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\ninterface OwnProps {\n  url?: string;\n  alt?: string;\n  loading?: 'lazy' | 'eager';\n  isSlow?: boolean;\n  className?: string;\n  imageClassName?: string;\n  children?: TeactJsx;\n  fallback?: TeactJsx;\n}\n\nfunction ImageComponent({\n  url,\n  alt,\n  loading,\n  isSlow,\n  className,\n  imageClassName,\n  children,\n  fallback,\n}: OwnProps) {\n  const ref = useRef<HTMLImageElement>();\n  const [isLoaded, markIsLoaded] = useFlag(preloadedImageUrls.has(url));\n  const [hasError, markHasError] = useFlag();\n\n  const handleLoad = () => {\n    markIsLoaded();\n    preloadedImageUrls.add(url);\n  };\n\n  const shouldShowFallback = (hasError || !url) && !!fallback;\n\n  const divRef = useMediaTransition(isLoaded || shouldShowFallback);\n\n  return (\n    <div ref={divRef} className={className} style={isSlow ? 'transition-duration: 0.5s;' : undefined}>\n      {!shouldShowFallback ? (\n        <img\n          ref={ref}\n          src={url}\n          alt={alt}\n          loading={loading}\n          className={imageClassName}\n          draggable={false}\n          referrerPolicy=\"same-origin\"\n          onLoad={!isLoaded ? handleLoad : undefined}\n          onError={markHasError}\n        />\n      ) : fallback}\n      {children}\n    </div>\n  );\n}\n\nexport default memo(ImageComponent);\n","// extracted by mini-css-extract-plugin\nexport default {\"appLocked\":\"VzAZj1DO\",\"innerContent\":\"a0ISx2DN\",\"withPinPad\":\"KGdyJD8j\",\"appLockedFixed\":\"bO3Yeq_N\",\"title\":\"Mg8ZA3ww\",\"passwordFormContent\":\"y8VDu2CW\",\"pinPadContent\":\"TBzkDy1l\",\"logo\":\"AfTARhCR\",\"passwordInputWrapper\":\"lpSqrTfE\",\"appLockedWrapper\":\"F1wWh0wj\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport type { Theme } from '../../global/types';\n\nimport { IS_CORE_WALLET } from '../../config';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useLang from '../../hooks/useLang';\n\nimport Image from '../ui/Image';\n\nimport styles from './AppLocked.module.scss';\n\nimport coreWalletLogoPath from '../../assets/logoCoreWallet.svg';\nimport logoDarkPath from '../../assets/logoDark.svg';\nimport logoLightPath from '../../assets/logoLight.svg';\n\ninterface OwnProps {\n  theme: Theme;\n}\nfunction Logo({ theme }: OwnProps) {\n  const lang = useLang();\n  const appTheme = useAppTheme(theme);\n\n  const logoPath = IS_CORE_WALLET\n    ? coreWalletLogoPath\n    : appTheme === 'light' ? logoLightPath : logoDarkPath;\n\n  return (\n    <div className={styles.logo}>\n      <Image className={styles.logo} imageClassName={styles.logo} url={logoPath} alt={lang('Logo')} />\n    </div>\n  );\n}\n\nexport default memo(Logo);\n","import React, { type ElementRef, memo, useState } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { Theme } from '../../global/types';\n\nimport { APP_NAME } from '../../config';\nimport { getDoesUsePinPad, getIsNativeBiometricAuthSupported } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { vibrateOnSuccess } from '../../util/haptics';\nimport { callApi } from '../../api';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport PasswordForm from '../ui/PasswordForm';\nimport Logo from './Logo';\n\nimport styles from './AppLocked.module.scss';\n\nconst PINPAD_RESET_DELAY = 300;\n\ninterface OwnProps {\n  isActive: boolean;\n  ref: ElementRef<HTMLDivElement>;\n  theme: Theme;\n  innerContentTopPosition?: number;\n  shouldHideBiometrics: boolean;\n  onSubmit: NoneToVoidFunction;\n}\n\nfunction PasswordFormSlide({\n  isActive,\n  ref,\n  theme,\n  innerContentTopPosition = 0,\n  shouldHideBiometrics,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n  const { setIsPinAccepted } = getActions();\n  const [passwordError, setPasswordError] = useState('');\n\n  const handleSubmitPassword = useLastCallback(async (password: string) => {\n    const result = await callApi('verifyPassword', password);\n\n    if (!result) {\n      setPasswordError('Wrong password, please try again.');\n      return;\n    }\n\n    if (getDoesUsePinPad()) {\n      setIsPinAccepted();\n      await vibrateOnSuccess(true);\n    }\n    onSubmit();\n  });\n\n  const handlePasswordChange = useLastCallback(() => setPasswordError(''));\n\n  return (\n    <div\n      ref={ref}\n      className={styles.innerContent}\n      style={`--position-top: ${innerContentTopPosition}px;`}\n    >\n      <PasswordForm\n        isActive={!isActive ? false : getIsNativeBiometricAuthSupported() ? !shouldHideBiometrics : true}\n        noAnimatedIcon\n        forceBiometricsInMain\n        error={passwordError}\n        resetStateDelayMs={PINPAD_RESET_DELAY}\n        operationType=\"unlock\"\n        containerClassName={buildClassName(styles.passwordFormContent, 'custom-scroll')}\n        pinPadClassName={styles.pinPadContent}\n        inputWrapperClassName={styles.passwordInputWrapper}\n        submitLabel={lang('Unlock')}\n        onSubmit={handleSubmitPassword}\n        onUpdate={handlePasswordChange}\n      >\n        <Logo theme={theme} />\n        <span className={buildClassName(styles.title, 'rounded-font')}>{APP_NAME}</span>\n      </PasswordForm>\n    </div>\n  );\n}\n\nexport default memo(PasswordFormSlide);\n","import React, { type ElementRef, memo } from '../../lib/teact/teact';\n\nimport type { Theme } from '../../global/types';\n\nimport { APP_NAME } from '../../config';\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport Logo from './Logo';\n\nimport styles from './AppLocked.module.scss';\n\ninterface OwnProps {\n  ref: ElementRef<HTMLDivElement>;\n  theme: Theme;\n  innerContentTopPosition?: number;\n  handleChangeSlideForBiometricAuth: NoneToVoidFunction;\n}\n\nfunction UnlockButtonSlide({\n  ref,\n  theme,\n  innerContentTopPosition = 0,\n  handleChangeSlideForBiometricAuth,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <div\n      ref={ref}\n      className={styles.innerContent}\n      style={`--position-top: ${innerContentTopPosition}px;`}\n    >\n      <Logo theme={theme} />\n      <span className={buildClassName(styles.title, 'rounded-font')}>{APP_NAME}</span>\n      <Button isPrimary onClick={handleChangeSlideForBiometricAuth}>\n        {lang('Unlock')}\n      </Button>\n    </div>\n  );\n}\n\nexport default memo(UnlockButtonSlide);\n","import { BottomSheet } from '@mytonwallet/native-bottom-sheet';\nimport React, { memo, useEffect, useMemo, useRef, useState } from '../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../global';\n\nimport type { AutolockValueType, Theme } from '../../global/types';\n\nimport { AUTOLOCK_OPTIONS_LIST, DEBUG, IS_TELEGRAM_APP } from '../../config';\nimport {\n  selectIsBiometricAuthEnabled,\n  selectIsNativeBiometricAuthEnabled,\n  selectIsPasswordPresent,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { vibrate } from '../../util/haptics';\nimport { createSignal } from '../../util/signals';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON } from '../../util/windowEnvironment';\n\nimport useBackgroundMode, { isBackgroundModeActive } from '../../hooks/useBackgroundMode';\nimport useEffectOnce from '../../hooks/useEffectOnce';\nimport useFlag from '../../hooks/useFlag';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport { useHotkeys } from '../../hooks/useHotkeys';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useThrottledCallback from '../../hooks/useThrottledCallback';\nimport useWindowSize from '../../hooks/useWindowSize';\n\nimport { getInAppBrowser } from '../ui/InAppBrowser';\nimport { triggerPasswordFormHandleBiometrics } from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport PasswordFormSlide from './PasswordFormSlide';\nimport UnlockButtonSlide from './UnlockButtonSlide';\n\nimport styles from './AppLocked.module.scss';\n\nconst WINDOW_EVENTS_LATENCY = 5000;\nconst INTERVAL_CHECK_PERIOD = 5000;\nconst ACTIVATION_EVENT_NAMES = [\n  'focus', // For Web\n  'mousemove', // For Web\n  'touch', // For Capacitor\n  'wheel',\n  'keydown',\n];\n// `capture: true` is necessary because otherwise a `stopPropagation` call inside the main UI will prevent the event\n// from getting to the listeners inside `AppLocked`.\nconst ACTIVATION_EVENT_OPTIONS = { capture: true };\n\ninterface StateProps {\n  isNonNativeBiometricAuthEnabled: boolean;\n  autolockValue?: AutolockValueType;\n  theme: Theme;\n  isManualLockActive?: boolean;\n  isAppLockEnabled?: boolean;\n  shouldHideBiometrics?: boolean;\n  canRender: boolean;\n}\n\nconst enum SLIDES {\n  button,\n  passwordForm,\n}\n\nconst [getActivitySignal, setActivitySignal] = createSignal(Date.now());\n\nexport function reportAppLockActivityEvent() {\n  setActivitySignal(Date.now());\n}\n\nfunction useAppLockState(autolockValue: AutolockValueType, isManualLockActive: boolean, canRender: boolean) {\n  const isFirstRunRef = useRef(true);\n  const isLockedRef = useRef(autolockValue !== 'never' || isManualLockActive);\n  const lockReasonRef = useRef<'autolock' | 'manual'>();\n  const forceUpdate = useForceUpdate();\n\n  // For cases when `canRender` changes from `true` -> `false`, e.g. when all accounts are deleted\n  if (isLockedRef.current && !canRender) {\n    isLockedRef.current = false;\n  }\n\n  const lock = useLastCallback(() => {\n    isLockedRef.current = true;\n    forceUpdate();\n  });\n\n  const unlock = useLastCallback(() => {\n    isLockedRef.current = false;\n    lockReasonRef.current = undefined;\n    forceUpdate();\n  });\n\n  // For case when on cold start the app was manually locked at the previous session, this should be treated as a auto lock.\n  lockReasonRef.current = isManualLockActive && !(isFirstRunRef.current && autolockValue !== 'never')\n    ? 'manual'\n    : 'autolock';\n  isFirstRunRef.current = false;\n\n  return [!!isLockedRef.current, lock, unlock, lockReasonRef.current] as const;\n}\n\nfunction useContentSlide(\n  isNonNativeBiometricAuthEnabled: boolean, isLocked: boolean, lockReason?: 'autolock' | 'manual',\n) {\n  const ref = useRef<HTMLDivElement>();\n\n  function getDefaultSlideForBiometricAuth() {\n    return (\n      (isBackgroundModeActive() || lockReason === 'manual')\n      && isNonNativeBiometricAuthEnabled ? SLIDES.button : SLIDES.passwordForm\n    );\n  }\n\n  const [slideForBiometricAuth, setSlideForBiometricAuth] = useState(getDefaultSlideForBiometricAuth());\n\n  // After the first rendering of the password form, it is necessary to remember the `top` position\n  // so that when changing the height of the container, there is no shift in content.\n  // This logic is only applicable to the two-slides mode except for TMA as it has a pin pad.\n  const [innerContentTopPosition, setInnerContentTopPosition] = useState<number>();\n  const isFixedState = innerContentTopPosition !== undefined;\n\n  const isFixingSlideEnv = !getDoesUsePinPad() && isNonNativeBiometricAuthEnabled;\n\n  function fixSlide(force?: boolean) {\n    const innerContent = ref.current;\n\n    if (innerContent && (!isFixedState || force) && isLocked && isFixingSlideEnv) {\n      const top = innerContent.getBoundingClientRect().top;\n\n      setInnerContentTopPosition(top);\n    }\n  }\n\n  function unfixSlide() {\n    setInnerContentTopPosition(undefined);\n  }\n\n  function refixSlide() {\n    unfixSlide();\n    requestAnimationFrame(() => fixSlide(true));\n  }\n\n  useEffect(() => {\n    fixSlide();\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [isLocked]);\n\n  const { height } = useWindowSize();\n\n  useEffect(() => {\n    if (!isFixingSlideEnv) return;\n\n    refixSlide();\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [height]);\n\n  return {\n    ref,\n    innerContentTopPosition,\n    unfixSlide,\n    slideForBiometricAuth,\n    setSlideForBiometricAuth,\n    getDefaultSlideForBiometricAuth,\n  };\n}\n\nfunction AppLocked({\n  isNonNativeBiometricAuthEnabled,\n  autolockValue = 'never',\n  theme,\n  isManualLockActive,\n  isAppLockEnabled,\n  shouldHideBiometrics,\n  canRender,\n}: StateProps): TeactJsx {\n  const {\n    clearIsPinAccepted, submitAppLockActivityEvent, setIsManualLockActive, setIsAppLockActive,\n  } = getActions();\n\n  const [isLocked, lock, unlock, lockReason] = useAppLockState(autolockValue, !!isManualLockActive, canRender);\n  const [shouldRenderUi, showUi, hideUi] = useFlag(isLocked);\n  const lastActivityTime = useRef(Date.now());\n\n  const {\n    ref,\n    innerContentTopPosition,\n    unfixSlide,\n    slideForBiometricAuth,\n    setSlideForBiometricAuth,\n    getDefaultSlideForBiometricAuth,\n  } = useContentSlide(isNonNativeBiometricAuthEnabled, isLocked, lockReason);\n\n  const handleActivity = useLastCallback(() => {\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      submitAppLockActivityEvent();\n      return;\n    }\n    lastActivityTime.current = Date.now();\n  });\n\n  const handleActivityThrottled = useThrottledCallback(handleActivity, [handleActivity], WINDOW_EVENTS_LATENCY);\n\n  const afterUnlockCallback = useLastCallback(() => {\n    hideUi();\n    setSlideForBiometricAuth(getDefaultSlideForBiometricAuth());\n    getInAppBrowser()?.show();\n    clearIsPinAccepted();\n    handleActivity();\n    setIsManualLockActive({ isActive: undefined, shouldHideBiometrics: undefined });\n    if (IS_DELEGATING_BOTTOM_SHEET) void BottomSheet.show();\n    unfixSlide();\n    setIsAppLockActive({ isActive: false });\n    void vibrate();\n  });\n\n  const autolockPeriod = useMemo(\n    () => AUTOLOCK_OPTIONS_LIST.find((option) => option.value === autolockValue)!.period, [autolockValue],\n  );\n\n  const { ref: transitionRef } = useShowTransition({\n    isOpen: isLocked,\n    noMountTransition: true,\n    className: 'slow',\n    onCloseAnimationEnd: afterUnlockCallback,\n  });\n\n  useEffect(() => {\n    if (isLocked !== getGlobal().isAppLockActive) {\n      setIsAppLockActive({ isActive: !!isLocked });\n    }\n  }, [isLocked]);\n\n  const forceLockApp = useLastCallback(() => {\n    lock();\n    showUi();\n    if (document.activeElement) {\n      (document.activeElement as HTMLElement).blur();\n    }\n    if (IS_DELEGATING_BOTTOM_SHEET) void BottomSheet.hide();\n    void getInAppBrowser()?.hide();\n    setSlideForBiometricAuth(getDefaultSlideForBiometricAuth());\n    setIsAppLockActive({ isActive: true });\n  });\n\n  const handleLock = useLastCallback(() => {\n    if ((autolockValue !== 'never' || isManualLockActive) && canRender) forceLockApp();\n  });\n\n  if (DEBUG) (window as any).lock = handleLock;\n\n  if (isManualLockActive && !isLocked && !shouldRenderUi) handleLock();\n\n  const handleChangeSlideForBiometricAuth = useLastCallback(() => {\n    setSlideForBiometricAuth(SLIDES.passwordForm);\n  });\n\n  useEffectOnce(() => {\n    for (const eventName of ACTIVATION_EVENT_NAMES) {\n      window.addEventListener(eventName, handleActivityThrottled, ACTIVATION_EVENT_OPTIONS);\n    }\n\n    return () => {\n      for (const eventName of ACTIVATION_EVENT_NAMES) {\n        window.removeEventListener(eventName, handleActivityThrottled, ACTIVATION_EVENT_OPTIONS);\n      }\n    };\n  });\n\n  useEffectOnce(() => {\n    if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    return getActivitySignal.subscribe(handleActivityThrottled);\n  });\n\n  const handleLockScreenHotkey = useLastCallback((e: KeyboardEvent) => {\n    stopEvent(e);\n    setIsManualLockActive({ isActive: true, shouldHideBiometrics: true });\n  });\n\n  useHotkeys(useMemo(() => (isAppLockEnabled && !isLocked ? {\n    'Ctrl+Shift+L': handleLockScreenHotkey,\n    'Alt+Shift+L': handleLockScreenHotkey,\n    'Meta+Shift+L': handleLockScreenHotkey,\n    ...(IS_ELECTRON && { 'Mod+L': handleLockScreenHotkey }),\n  } : undefined), [isAppLockEnabled, isLocked]));\n\n  useEffect(() => {\n    if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    const interval = setInterval(() => {\n      if (isAppLockEnabled && !isLocked && Date.now() - lastActivityTime.current > autolockPeriod) {\n        handleLock();\n      }\n    }, INTERVAL_CHECK_PERIOD);\n    return () => clearInterval(interval);\n  }, [isLocked, autolockPeriod, handleLock, isAppLockEnabled]);\n\n  useBackgroundMode(undefined, handleChangeSlideForBiometricAuth);\n\n  function renderTransitionContent(isActive: boolean) {\n    return (\n      <div\n        className={buildClassName(\n          styles.appLocked,\n          innerContentTopPosition !== undefined && styles.appLockedFixed,\n          getDoesUsePinPad() && slideForBiometricAuth === SLIDES.passwordForm && styles.withPinPad,\n        )}\n      >\n        {\n          slideForBiometricAuth === SLIDES.button && isNonNativeBiometricAuthEnabled\n            ? (\n              <UnlockButtonSlide\n                ref={ref}\n                theme={theme}\n                innerContentTopPosition={innerContentTopPosition}\n                handleChangeSlideForBiometricAuth={handleChangeSlideForBiometricAuth}\n              />\n            )\n            : (\n              <PasswordFormSlide\n                ref={ref}\n                isActive={isActive}\n                theme={theme}\n                innerContentTopPosition={innerContentTopPosition}\n                shouldHideBiometrics={!!shouldHideBiometrics}\n                onSubmit={unlock}\n              />\n            )\n        }\n      </div>\n    );\n  }\n\n  const transitionKey = Number(slideForBiometricAuth === SLIDES.passwordForm) + Number(shouldRenderUi) * 2;\n\n  const handleUnlockIntent = isNonNativeBiometricAuthEnabled\n    ? slideForBiometricAuth === SLIDES.passwordForm\n      ? (!IS_TELEGRAM_APP ? triggerPasswordFormHandleBiometrics : undefined)\n      : handleChangeSlideForBiometricAuth\n    : undefined;\n\n  useHotkeys(useMemo(() => (isAppLockEnabled && isLocked && handleUnlockIntent ? {\n    Space: handleUnlockIntent,\n    Enter: handleUnlockIntent,\n    Escape: handleUnlockIntent,\n  } : undefined), [isAppLockEnabled, isLocked, handleUnlockIntent]));\n\n  if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n  return (\n    <Transition\n      ref={transitionRef}\n      name={isNonNativeBiometricAuthEnabled && IS_TELEGRAM_APP ? 'slideFade' : 'semiFade'}\n      onContainerClick={handleUnlockIntent}\n      activeKey={transitionKey}\n      className={styles.appLockedWrapper}\n      shouldCleanup\n    >\n      {shouldRenderUi ? renderTransitionContent : undefined}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { autolockValue, isAppLockEnabled } = global.settings;\n\n  const isPasswordPresent = selectIsPasswordPresent(global);\n\n  const isBiometricAuthEnabled = selectIsBiometricAuthEnabled(global);\n  const isNativeBiometricAuthEnabled = selectIsNativeBiometricAuthEnabled(global);\n  const isNonNativeBiometricAuthEnabled = isBiometricAuthEnabled && (!isNativeBiometricAuthEnabled || IS_TELEGRAM_APP);\n\n  return {\n    isNonNativeBiometricAuthEnabled,\n    autolockValue,\n    canRender: Boolean(isAppLockEnabled && isPasswordPresent),\n    isAppLockEnabled,\n    theme: global.settings.theme,\n    isManualLockActive: global.isManualLockActive,\n    shouldHideBiometrics: global.appLockHideBiometrics,\n  };\n})(AppLocked));\n","import { BarcodeScanner } from '@capacitor-mlkit/barcode-scanning';\n\nimport type { GlobalState } from '../../types';\nimport {\n  AppState,\n  AuthState,\n  ContentTab,\n  DomainLinkingState,\n  SettingsState,\n  SwapState,\n  TransferState,\n} from '../../types';\n\nimport {\n  ANIMATION_LEVEL_MIN,\n  APP_VERSION,\n  BETA_URL,\n  BOT_USERNAME,\n  DEBUG,\n  IS_PRODUCTION,\n  PRODUCTION_URL,\n} from '../../../config';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { openDeeplinkOrUrl, parseDeeplinkTransferParams, processDeeplink } from '../../../util/deeplink';\nimport getIsAppUpdateNeeded from '../../../util/getIsAppUpdateNeeded';\nimport { vibrate, vibrateOnSuccess } from '../../../util/haptics';\nimport { omit } from '../../../util/iteratees';\nimport { getTranslation } from '../../../util/langProvider';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { openUrl } from '../../../util/openUrl';\nimport { getTelegramApp } from '../../../util/telegram';\nimport {\n  getIsMobileTelegramApp,\n  IS_ANDROID_APP,\n  IS_BIOMETRIC_AUTH_SUPPORTED,\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n  IS_ELECTRON,\n} from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { closeAllOverlays, parsePlainAddressQr } from '../../helpers/misc';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearCurrentSwap,\n  clearCurrentTransfer,\n  clearIsPinAccepted,\n  renameAccount,\n  setCurrentTransferAddress,\n  setIsPinAccepted,\n  updateAccounts,\n  updateAuth,\n  updateCurrentAccountSettings,\n  updateCurrentAccountState,\n  updateCurrentDomainLinking,\n  updateCurrentSwap,\n  updateCurrentTransfer,\n  updateSettings,\n} from '../../reducers';\nimport {\n  selectCurrentAccount,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsPasswordPresent,\n} from '../../selectors';\nimport { switchAccount } from '../api/auth';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\n\nimport { reportAppLockActivityEvent } from '../../../components/appLocked/AppLocked';\nimport { closeModal } from '../../../components/ui/Modal';\n\nconst APP_VERSION_URL = IS_ANDROID_APP ? `${IS_PRODUCTION ? PRODUCTION_URL : BETA_URL}/version.txt` : 'version.txt';\n\naddActionHandler('showActivityInfo', (global, actions, { id }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showActivityInfo', { id });\n    return undefined;\n  }\n\n  return updateCurrentAccountState(global, { currentActivityId: id });\n});\n\naddActionHandler('showAnyAccountTx', async (global, actions, { txId, accountId, network }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showAnyAccountTx', { txId, accountId, network });\n    return;\n  }\n\n  await Promise.all([\n    closeAllOverlays(),\n    switchAccount(global, accountId, network),\n  ]);\n\n  actions.showActivityInfo({ id: txId });\n});\n\naddActionHandler('showAnyAccountTokenActivity', async (global, actions, { slug, accountId, network }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showAnyAccountTokenActivity', { slug, accountId, network });\n    return;\n  }\n\n  await Promise.all([\n    closeAllOverlays(),\n    switchAccount(global, accountId, network),\n  ]);\n\n  actions.showTokenActivity({ slug });\n});\n\naddActionHandler('closeActivityInfo', (global, actions, { id }) => {\n  if (selectCurrentAccountState(global)?.currentActivityId !== id) {\n    return undefined;\n  }\n\n  return updateCurrentAccountState(global, { currentActivityId: undefined });\n});\n\naddActionHandler('addSavedAddress', (global, actions, { address, name, chain }) => {\n  const { savedAddresses = [] } = selectCurrentAccountState(global) || {};\n\n  return updateCurrentAccountState(global, {\n    savedAddresses: [\n      ...savedAddresses,\n      { address, name, chain },\n    ],\n  });\n});\n\naddActionHandler('removeFromSavedAddress', (global, actions, { address, chain }) => {\n  const { savedAddresses = [] } = selectCurrentAccountState(global) || {};\n\n  const newSavedAddresses = savedAddresses.filter((item) => !(item.address === address && item.chain === chain));\n\n  return updateCurrentAccountState(global, { savedAddresses: newSavedAddresses });\n});\n\naddActionHandler('toggleTinyTransfersHidden', (global, actions, { isEnabled } = {}) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      areTinyTransfersHidden: isEnabled,\n    },\n  };\n});\n\naddActionHandler('setCurrentTokenPeriod', (global, actions, { period }) => {\n  return updateCurrentAccountState(global, {\n    currentTokenPeriod: period,\n  });\n});\n\naddActionHandler('addAccount', async (global, actions, { method, password, isAuthFlow }) => {\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const isMnemonicImport = method === 'importMnemonic';\n\n  if (isPasswordPresent) {\n    if (!isAuthFlow) {\n      global = updateAccounts(global, {\n        isLoading: true,\n      });\n      setGlobal(global);\n    }\n\n    if (!(await callApi('verifyPassword', password))) {\n      global = getGlobal();\n      if (isAuthFlow) {\n        global = updateAuth(global, {\n          isLoading: undefined,\n          error: 'Wrong password, please try again.',\n        });\n      } else {\n        global = updateAccounts(getGlobal(), {\n          isLoading: undefined,\n          error: 'Wrong password, please try again.',\n        });\n      }\n      setGlobal(global);\n      return;\n    }\n\n    if (getDoesUsePinPad()) {\n      global = setIsPinAccepted(getGlobal());\n      setGlobal(global);\n    }\n    await vibrateOnSuccess(true);\n  }\n\n  global = getGlobal();\n  if (isMnemonicImport || !isPasswordPresent) {\n    global = { ...global, isAddAccountModalOpen: undefined };\n  } else {\n    global = updateAccounts(global, { isLoading: true });\n  }\n  setGlobal(global);\n\n  if (!IS_DELEGATED_BOTTOM_SHEET) {\n    actions.addAccount2({ method, password });\n  } else {\n    callActionInMain('addAccount2', { method, password });\n  }\n});\n\naddActionHandler('addAccount2', (global, actions, { method, password }) => {\n  const isMnemonicImport = method === 'importMnemonic';\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const authState = isPasswordPresent\n    ? isMnemonicImport\n      ? AuthState.importWallet\n      : undefined\n    : (\n      getDoesUsePinPad()\n        ? AuthState.createPin\n        : (IS_BIOMETRIC_AUTH_SUPPORTED ? AuthState.createBiometrics : AuthState.createPassword)\n    );\n\n  if (isMnemonicImport || !isPasswordPresent) {\n    global = { ...global, appState: AppState.Auth };\n  }\n  global = updateAuth(global, { password, state: authState });\n  global = clearCurrentTransfer(global);\n  global = clearCurrentSwap(global);\n\n  setGlobal(global);\n\n  if (isMnemonicImport) {\n    actions.startImportingWallet();\n  } else {\n    actions.startCreatingWallet();\n  }\n});\n\naddActionHandler('renameAccount', (global, actions, { accountId, title }) => {\n  global = { ...global, shouldForceAccountEdit: false };\n\n  setGlobal(renameAccount(global, accountId, title));\n\n  actions.renameNotificationAccount({ accountId });\n});\n\naddActionHandler('clearAccountError', (global) => {\n  return updateAccounts(global, { error: undefined });\n});\n\naddActionHandler('openAddAccountModal', (global, _, props) => {\n  const { forceAddingTonOnlyAccount } = props || {};\n\n  if (IS_DELEGATED_BOTTOM_SHEET && !global.areSettingsOpen) {\n    callActionInMain('openAddAccountModal', props);\n    return;\n  }\n\n  global = { ...global, isAddAccountModalOpen: true };\n\n  if (forceAddingTonOnlyAccount) {\n    global = updateAuth(global, { forceAddingTonOnlyAccount });\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('closeAddAccountModal', (global, _, props) => {\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n\n  global = updateAuth(global, { forceAddingTonOnlyAccount: undefined });\n  global = { ...global, isAddAccountModalOpen: undefined };\n\n  return global;\n});\n\naddActionHandler('changeNetwork', (global, actions, { network }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isTestnet: network === 'testnet',\n    },\n  };\n});\n\naddActionHandler('openSettings', (global) => {\n  global = updateSettings(global, { state: SettingsState.Initial });\n\n  return { ...global, areSettingsOpen: true };\n});\n\naddActionHandler('openSettingsWithState', (global, actions, { state }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET && !global.areSettingsOpen) {\n    callActionInMain('openSettingsWithState', { state });\n    return;\n  }\n\n  global = updateSettings(global, { state });\n  setGlobal({ ...global, areSettingsOpen: true });\n});\n\naddActionHandler('setSettingsState', (global, actions, { state }) => {\n  global = updateSettings(global, { state });\n  setGlobal(global);\n});\n\naddActionHandler('closeSettings', (global) => {\n  if (!global.currentAccountId) {\n    return global;\n  }\n\n  return { ...global, areSettingsOpen: false };\n});\n\naddActionHandler('openBackupWalletModal', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openBackupWalletModal');\n    return undefined;\n  }\n\n  return { ...global, isBackupWalletModalOpen: true };\n});\n\naddActionHandler('closeBackupWalletModal', (global) => {\n  return { ...global, isBackupWalletModalOpen: undefined };\n});\n\naddActionHandler('toggleInvestorView', (global, actions, { isEnabled } = {}) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isInvestorViewEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('changeLanguage', (global, actions, { langCode }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      langCode,\n    },\n  };\n});\n\naddActionHandler('toggleCanPlaySounds', (global, actions, { isEnabled } = {}) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      canPlaySounds: isEnabled,\n    },\n  };\n});\n\naddActionHandler('setLandscapeActionsActiveTabIndex', (global, actions, { index }) => {\n  return updateCurrentAccountState(global, {\n    landscapeActionsActiveTabIndex: index,\n  });\n});\n\naddActionHandler('closeSecurityWarning', (global) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isSecurityWarningHidden: true,\n    },\n  };\n});\n\naddActionHandler('toggleTokensWithNoCost', (global, actions, { isEnabled }) => {\n  return updateSettings(global, { areTokensWithNoCostHidden: isEnabled });\n});\n\naddActionHandler('toggleSortByValue', (global, actions, { isEnabled }) => {\n  return updateSettings(global, { isSortByValueEnabled: isEnabled });\n});\n\naddActionHandler('updateOrderedSlugs', (global, actions, { orderedSlugs }) => {\n  const accountSettings = selectCurrentAccountSettings(global);\n  return updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    orderedSlugs,\n  });\n});\n\naddActionHandler('toggleTokenVisibility', (global, actions, { slug, shouldShow }) => {\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  const { alwaysShownSlugs = [], alwaysHiddenSlugs = [] } = accountSettings;\n  const alwaysShownSlugsSet = new Set(alwaysShownSlugs);\n  const alwaysHiddenSlugsSet = new Set(alwaysHiddenSlugs);\n\n  if (shouldShow) {\n    alwaysHiddenSlugsSet.delete(slug);\n    alwaysShownSlugsSet.add(slug);\n  } else {\n    alwaysShownSlugsSet.delete(slug);\n    alwaysHiddenSlugsSet.add(slug);\n  }\n\n  return updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    alwaysHiddenSlugs: Array.from(alwaysHiddenSlugsSet),\n    alwaysShownSlugs: Array.from(alwaysShownSlugsSet),\n  });\n});\n\naddActionHandler('deleteToken', (global, actions, { slug }) => {\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  return updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    orderedSlugs: accountSettings.orderedSlugs?.filter((s) => s !== slug),\n    alwaysHiddenSlugs: accountSettings.alwaysHiddenSlugs?.filter((s) => s !== slug),\n    alwaysShownSlugs: accountSettings.alwaysShownSlugs?.filter((s) => s !== slug),\n    deletedSlugs: [...accountSettings.deletedSlugs ?? [], slug],\n    importedSlugs: accountSettings.importedSlugs?.filter((s) => s !== slug),\n  });\n});\n\naddActionHandler('checkAppVersion', (global) => {\n  fetch(`${APP_VERSION_URL}?${Date.now()}`)\n    .then((response) => response.text())\n    .then((version) => {\n      version = version.trim();\n\n      if (getIsAppUpdateNeeded(version, APP_VERSION)) {\n        global = getGlobal();\n        global = {\n          ...global,\n          isAppUpdateAvailable: true,\n          latestAppVersion: version.trim(),\n        };\n        setGlobal(global);\n      }\n    })\n    .catch((err) => {\n      if (DEBUG) {\n        // eslint-disable-next-line no-console\n        console.error('[checkAppVersion failed] ', err);\n      }\n    });\n});\n\naddActionHandler('requestConfetti', (global) => {\n  if (global.settings.animationLevel === ANIMATION_LEVEL_MIN) return global;\n\n  return {\n    ...global,\n    confettiRequestedAt: Date.now(),\n  };\n});\n\naddActionHandler('requestOpenQrScanner', async (global, actions) => {\n  if (getIsMobileTelegramApp()) {\n    const webApp = getTelegramApp();\n    webApp?.showScanQrPopup({}, (data) => {\n      void vibrateOnSuccess();\n      webApp.closeScanQrPopup();\n      actions.handleQrCode({ data });\n    });\n    return;\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('requestOpenQrScanner');\n    return;\n  }\n\n  let currentQrScan: GlobalState['currentQrScan'];\n  if (global.currentTransfer.state === TransferState.Initial) {\n    currentQrScan = { currentTransfer: global.currentTransfer };\n  } else if (global.currentSwap.state === SwapState.Blockchain) {\n    currentQrScan = { currentSwap: global.currentSwap };\n  } else if (global.currentDomainLinking.state === DomainLinkingState.Initial) {\n    currentQrScan = { currentDomainLinking: global.currentDomainLinking };\n  }\n\n  const { camera } = await BarcodeScanner.requestPermissions();\n  const isGranted = camera === 'granted' || camera === 'limited';\n  if (!isGranted) {\n    actions.showNotification({\n      message: getTranslation('Permission denied. Please grant camera permission to use the QR code scanner.'),\n    });\n    return;\n  }\n\n  global = getGlobal();\n  global = {\n    ...global,\n    isQrScannerOpen: true,\n    currentQrScan,\n  };\n\n  setGlobal(global);\n});\n\naddActionHandler('closeQrScanner', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('closeQrScanner');\n  }\n\n  return {\n    ...global,\n    isQrScannerOpen: undefined,\n    currentQrScan: undefined,\n  };\n});\n\naddActionHandler('handleQrCode', async (global, actions, { data }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('handleQrCode', { data });\n    return;\n  }\n\n  const { currentTransfer, currentSwap, currentDomainLinking } = global.currentQrScan || {};\n\n  if (currentTransfer) {\n    const transferParams = parseDeeplinkTransferParams(data, global);\n    if (transferParams) {\n      if ('error' in transferParams) {\n        actions.showError({ error: transferParams.error });\n        // Not returning on error is intentional\n      }\n      setGlobal(updateCurrentTransfer(global, {\n        ...currentTransfer,\n        ...omit(transferParams, ['error']),\n      }));\n    } else {\n      // Assuming that the QR code content is a plain wallet address\n      setGlobal(setCurrentTransferAddress(updateCurrentTransfer(global, currentTransfer), data));\n    }\n    return;\n  }\n\n  if (currentSwap || currentDomainLinking) {\n    const linkParams = parseDeeplinkTransferParams(data, global);\n    const toAddress = linkParams?.toAddress ?? data;\n    if (currentSwap) {\n      setGlobal(updateCurrentSwap(global, { ...currentSwap, toAddress }));\n    } else {\n      setGlobal(updateCurrentDomainLinking(global, { ...currentDomainLinking, walletAddress: toAddress }));\n    }\n    return;\n  }\n\n  if (await processDeeplink(data)) {\n    return;\n  }\n\n  global = getGlobal();\n\n  const plainAddressData = parsePlainAddressQr(global, data);\n  if (plainAddressData) {\n    actions.startTransfer({\n      ...plainAddressData,\n      isPortrait: getIsPortrait(),\n    });\n    return;\n  }\n\n  actions.showDialog({ title: 'This QR Code is not supported', message: '' });\n});\n\naddActionHandler('changeBaseCurrency', async (global, actions, { currency }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('changeBaseCurrency', { currency });\n  }\n\n  await callApi('setBaseCurrency', currency);\n  await callApi('tryUpdateTokens');\n  // Swap tokens will be merged with the new prices loaded in `tryUpdateTokens`\n  await callApi('tryUpdateSwapTokens');\n});\n\naddActionHandler('setIsPinAccepted', (global) => {\n  return setIsPinAccepted(global);\n});\n\naddActionHandler('clearIsPinAccepted', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    // Sometimes this action is called after the delegated bottom sheet is closed, e.g. on a component unmount.\n    // The problem is, delegated bottom sheet doesn't synchronize the global state when it's closed, so the pin pad\n    // can get stuck in the accepted state. To fix that, this action is called in the main WebView using a more reliable\n    // mechanism.\n    callActionInMain('clearIsPinAccepted');\n  }\n\n  return clearIsPinAccepted(global);\n});\n\naddActionHandler('openOnRampWidgetModal', (global, actions, { chain }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openOnRampWidgetModal', { chain });\n    return;\n  }\n\n  setGlobal({ ...global, chainForOnRampWidgetModal: chain });\n});\n\naddActionHandler('closeOnRampWidgetModal', (global) => {\n  setGlobal({ ...global, chainForOnRampWidgetModal: undefined });\n});\n\naddActionHandler('openMediaViewer', (global, actions, {\n  mediaId, mediaType, txId, hiddenNfts, noGhostAnimation,\n}) => {\n  const accountState = selectCurrentAccountState(global);\n  const { byAddress } = accountState?.nfts || {};\n  const nft = byAddress?.[mediaId];\n\n  if (!nft) return undefined;\n\n  return {\n    ...global,\n    mediaViewer: {\n      mediaId,\n      mediaType,\n      txId,\n      hiddenNfts,\n      noGhostAnimation,\n    },\n  };\n});\n\naddActionHandler('closeMediaViewer', (global) => {\n  return {\n    ...global,\n    mediaViewer: {\n      mediaId: undefined,\n      mediaType: undefined,\n    },\n  };\n});\n\naddActionHandler('setReceiveActiveTab', (global, actions, { chain }): GlobalState => {\n  return updateCurrentAccountState(global, { receiveModalChain: chain });\n});\n\naddActionHandler('openReceiveModal', (global, actions, params) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openReceiveModal', params);\n    return;\n  }\n\n  global = updateCurrentAccountState(global, { receiveModalChain: params?.chain });\n  global = { ...global, isReceiveModalOpen: true };\n  setGlobal(global);\n});\n\naddActionHandler('closeReceiveModal', (global): GlobalState => {\n  global = updateCurrentAccountState(global, { receiveModalChain: undefined });\n  return { ...global, isReceiveModalOpen: undefined };\n});\n\naddActionHandler('openInvoiceModal', (global, actions, params) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openInvoiceModal', params);\n    return;\n  }\n\n  global = updateCurrentAccountState(global, { invoiceTokenSlug: params?.tokenSlug });\n  setGlobal({ ...global, isInvoiceModalOpen: true });\n});\n\naddActionHandler('changeInvoiceToken', (global, actions, params) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('changeInvoiceToken', params);\n  }\n\n  global = updateCurrentAccountState(global, { invoiceTokenSlug: params.tokenSlug });\n  setGlobal(global);\n});\n\naddActionHandler('closeInvoiceModal', (global): GlobalState => {\n  global = updateCurrentAccountState(global, { invoiceTokenSlug: undefined });\n  return { ...global, isInvoiceModalOpen: undefined };\n});\n\naddActionHandler('showIncorrectTimeError', (global, actions) => {\n  actions.showDialog({\n    message: getTranslation('Time synchronization issue. Please ensure your device\\'s time settings are correct.'),\n  });\n\n  return { ...global, isIncorrectTimeNotificationReceived: true };\n});\n\naddActionHandler('openLoadingOverlay', (global) => {\n  setGlobal({ ...global, isLoadingOverlayOpen: true });\n});\n\naddActionHandler('closeLoadingOverlay', (global) => {\n  setGlobal({ ...global, isLoadingOverlayOpen: undefined });\n});\n\naddActionHandler('clearAccountLoading', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('clearAccountLoading');\n  }\n\n  setGlobal(updateAccounts(global, { isLoading: undefined }));\n});\n\naddActionHandler('setIsAccountLoading', (global, actions, { isLoading }) => {\n  setGlobal(updateAccounts(global, { isLoading }));\n});\n\naddActionHandler('authorizeDiesel', (global) => {\n  const address = selectCurrentAccount(global)!.addressByChain.ton;\n  if (!address) throw new Error('TON address missing');\n  setGlobal(updateCurrentAccountState(global, { isDieselAuthorizationStarted: true }));\n  void openUrl(`https://t.me/${BOT_USERNAME}?start=auth-${address}`);\n});\n\naddActionHandler('submitAppLockActivityEvent', () => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitAppLockActivityEvent');\n    return;\n  }\n  reportAppLockActivityEvent();\n});\n\naddActionHandler('closeAnyModal', () => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('closeAnyModal');\n    return;\n  }\n\n  closeModal();\n});\n\naddActionHandler('openExplore', (global) => {\n  return { ...global, isExploreOpen: true };\n});\n\naddActionHandler('closeExplore', (global) => {\n  return { ...global, isExploreOpen: undefined };\n});\n\naddActionHandler('openFullscreen', (global) => {\n  setGlobal({ ...global, isFullscreen: true });\n\n  void vibrate();\n});\n\naddActionHandler('closeFullscreen', (global) => {\n  setGlobal({ ...global, isFullscreen: undefined });\n\n  void vibrate();\n});\n\naddActionHandler('setIsSensitiveDataHidden', (global, actions, { isHidden }) => {\n  setGlobal(updateSettings(global, { isSensitiveDataHidden: isHidden ? true : undefined }));\n\n  void vibrate();\n});\n\naddActionHandler('setIsAppLockActive', (global, actions, { isActive }) => {\n  if (IS_DELEGATING_BOTTOM_SHEET) {\n    callActionInNative('setIsAppLockActive', { isActive });\n  }\n\n  setGlobal({ ...global, isAppLockActive: isActive || undefined });\n});\n\naddActionHandler('switchAccountAndOpenUrl', async (global, actions, payload) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('switchAccountAndOpenUrl', payload);\n    return;\n  }\n\n  await Promise.all([\n    // The browser is closed before opening the new URL, because otherwise the browser won't apply the new\n    // parameters from `payload`. It's important to wait for `closeAllOverlays` to finish, because until the in-app\n    // browser is closed, it won't open again.\n    closeAllOverlays(),\n    payload.accountId && switchAccount(global, payload.accountId, payload.network),\n  ]);\n\n  await openDeeplinkOrUrl(payload.url, payload);\n});\n\naddActionHandler('switchToWallet', (global: GlobalState, actions) => {\n  const { areSettingsOpen, isExploreOpen } = global;\n  const accountState = selectCurrentAccountState(global);\n  const areAssetsActive = accountState?.activeContentTab === ContentTab.Assets;\n  const isWalletTabActive = !isExploreOpen && !areSettingsOpen;\n\n  actions.closeExplore(undefined, { forceOnHeavyAnimation: true });\n  actions.closeSettings(undefined, { forceOnHeavyAnimation: true });\n\n  if (!areAssetsActive && isWalletTabActive) {\n    actions.selectToken({ slug: undefined }, { forceOnHeavyAnimation: true });\n    actions.setActiveContentTab({ tab: ContentTab.Assets }, { forceOnHeavyAnimation: true });\n  }\n});\n\naddActionHandler('switchToExplore', (global: GlobalState, actions) => {\n  const { isExploreOpen } = global;\n\n  if (isExploreOpen) {\n    actions.closeSiteCategory(undefined, { forceOnHeavyAnimation: true });\n  }\n\n  actions.closeSettings(undefined, { forceOnHeavyAnimation: true });\n  actions.openExplore(undefined, { forceOnHeavyAnimation: true });\n});\n\naddActionHandler('switchToSettings', (global: GlobalState, actions) => {\n  actions.closeExplore(undefined, { forceOnHeavyAnimation: true });\n  actions.openSettings(undefined, { forceOnHeavyAnimation: true });\n});\n\naddActionHandler('setAppLayout', (global, actions, { layout }) => {\n  if (IS_ELECTRON) {\n    void window.electron?.changeAppLayout(layout);\n  } else {\n    void callApi('setAppLayout', layout);\n  }\n});\n","import { SignDataState, TransferState } from '../../types';\n\nimport { BROWSER_HISTORY_LIMIT } from '../../../config';\nimport { getInMemoryPassword } from '../../../util/authApi/inMemoryPasswordStore';\nimport { unique } from '../../../util/iteratees';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearDappConnectRequestError,\n  resetHardware,\n  updateCurrentAccountState,\n  updateCurrentDappSignData,\n  updateCurrentDappTransfer,\n} from '../../reducers';\nimport { selectCurrentAccountState, selectIsHardwareAccount } from '../../selectors';\n\naddActionHandler('clearDappConnectRequestError', (global) => {\n  global = clearDappConnectRequestError(global);\n  setGlobal(global);\n});\n\naddActionHandler('showDappTransferTransaction', (global, actions, payload) => {\n  const { transactionIdx } = payload;\n\n  global = updateCurrentDappTransfer(global, {\n    state: TransferState.Confirm,\n    viewTransactionOnIdx: transactionIdx,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setDappTransferScreen', (global, actions, payload) => {\n  const { state } = payload;\n\n  global = updateCurrentDappTransfer(global, { state });\n  setGlobal(global);\n});\n\naddActionHandler('submitDappTransferConfirm', async (global, actions) => {\n  const inMemoryPassword = await getInMemoryPassword();\n\n  global = getGlobal();\n\n  if (selectIsHardwareAccount(global)) {\n    global = resetHardware(global);\n    global = updateCurrentDappTransfer(global, { state: TransferState.ConnectHardware });\n    setGlobal(global);\n  } else if (inMemoryPassword) {\n    global = updateCurrentDappTransfer(global, { isLoading: true });\n    setGlobal(global);\n    actions.submitDappTransferPassword({ password: inMemoryPassword });\n  } else {\n    global = updateCurrentDappTransfer(global, { state: TransferState.Password });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('clearDappTransferError', (global) => {\n  global = updateCurrentDappTransfer(global, {\n    error: undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('openBrowser', (global, actions, {\n  url, title, subtitle,\n}) => {\n  global = {\n    ...global,\n    currentBrowserOptions: {\n      url, title, subtitle,\n    },\n  };\n  setGlobal(global);\n});\n\naddActionHandler('closeBrowser', (global) => {\n  global = { ...global, currentBrowserOptions: undefined };\n  setGlobal(global);\n});\n\naddActionHandler('addSiteToBrowserHistory', (global, actions, { url }) => {\n  const accountState = selectCurrentAccountState(global);\n\n  const newHistory = unique([\n    url,\n    ...accountState?.browserHistory || [],\n  ]).slice(0, BROWSER_HISTORY_LIMIT);\n\n  global = updateCurrentAccountState(global, {\n    browserHistory: newHistory,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('removeSiteFromBrowserHistory', (global, actions, { url }) => {\n  const accountState = selectCurrentAccountState(global);\n\n  const newHistory = accountState?.browserHistory?.filter((currentUrl) => currentUrl !== url);\n\n  global = updateCurrentAccountState(global, {\n    browserHistory: newHistory?.length ? newHistory : undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('updateDappLastOpenedAt', (global, actions, { url }) => {\n  const { dappLastOpenedDatesByUrl } = selectCurrentAccountState(global)!;\n\n  const newDates = {\n    ...dappLastOpenedDatesByUrl,\n    [url]: Date.now(),\n  };\n\n  global = updateCurrentAccountState(global, { dappLastOpenedDatesByUrl: newDates });\n  setGlobal(global);\n});\n\naddActionHandler('openSiteCategory', (global, actions, { id }) => {\n  return updateCurrentAccountState(global, { currentSiteCategoryId: id });\n});\n\naddActionHandler('closeSiteCategory', (global) => {\n  return updateCurrentAccountState(global, { currentSiteCategoryId: undefined });\n});\n\naddActionHandler('closeDappTransfer', (global) => {\n  global = updateCurrentDappTransfer(global, { state: TransferState.None });\n  setGlobal(global);\n});\n\naddActionHandler('setDappSignDataScreen', (global, actions, payload) => {\n  const { state } = payload;\n\n  return updateCurrentDappSignData(global, { state });\n});\n\naddActionHandler('submitDappSignDataConfirm', async (global, actions) => {\n  const inMemoryPassword = await getInMemoryPassword();\n\n  global = getGlobal();\n\n  if (inMemoryPassword) {\n    global = updateCurrentDappSignData(global, { isLoading: true });\n    setGlobal(global);\n    actions.submitDappSignDataPassword({ password: inMemoryPassword });\n  } else {\n    global = updateCurrentDappSignData(global, { state: SignDataState.Password });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('clearDappSignDataError', (global) => {\n  return updateCurrentDappSignData(global, { error: undefined });\n});\n\naddActionHandler('closeDappSignData', (global) => {\n  return updateCurrentDappSignData(global, { state: SignDataState.None });\n});\n","import type { LedgerTransport } from '../../../util/ledger/types';\nimport { AppState, HardwareConnectState } from '../../types';\n\nimport { IS_CAPACITOR, IS_EXTENSION } from '../../../config';\nimport { closeThisTab, onLedgerTabClose, openLedgerTab } from '../../../util/ledger/tab';\nimport { isLedgerConnectionBroken } from '../../../util/ledger/utils';\nimport { logDebugError } from '../../../util/logs';\nimport { pause } from '../../../util/schedulers';\nimport { IS_LEDGER_EXTENSION_TAB } from '../../../util/windowEnvironment';\nimport { addActionHandler, getActions, getGlobal, setGlobal } from '../../index';\nimport { resetHardware, updateHardware } from '../../reducers';\nimport { selectAllHardwareAccounts, selectCurrentNetwork, selectLedgerAccountIndexToImport } from '../../selectors';\n\n// There is no long-term Ledger connection state in the application. Every time the application needs to interact with\n// a Ledger device, it ensures the device is connected using the <LedgerConnect> component, and communicates with the\n// device immediately after that.\n\nconst OPEN_LEDGER_TAB_DELAY = 500;\n\naddActionHandler('initLedgerPage', (global) => {\n  return { ...global, appState: AppState.Ledger };\n});\n\naddActionHandler('openHardwareWalletModal', (global) => {\n  global = resetHardware(global);\n\n  return { ...global, isHardwareModalOpen: true };\n});\n\naddActionHandler('closeHardwareWalletModal', (global) => {\n  return { ...global, isHardwareModalOpen: false };\n});\n\naddActionHandler('initializeHardwareWalletModal', async (global, actions) => {\n  const ledgerApi = await import('../../../util/ledger');\n  const {\n    isBluetoothAvailable,\n    isUsbAvailable,\n  } = await ledgerApi.detectAvailableTransports();\n  const hasUsbDevice = await ledgerApi.hasUsbDevice();\n  const availableTransports: LedgerTransport[] = [];\n  if (isUsbAvailable) {\n    availableTransports.push('usb');\n  }\n  if (isBluetoothAvailable) {\n    availableTransports.push('bluetooth');\n  }\n\n  global = getGlobal();\n  global = updateHardware(global, { availableTransports });\n\n  if (availableTransports.length === 0) {\n    setGlobal(global);\n    if (IS_CAPACITOR) {\n      actions.showDialog({\n        title: 'Bluetooth unavailable',\n        message: '$bluetooth_enable_guide',\n        buttons: {\n          confirm: { title: 'Open Settings', action: 'openBluetoothSettings' },\n          cancel: { title: 'Cancel' },\n        },\n      });\n    } else {\n      actions.showNotification({\n        message: 'Ledger is not supported on this device.',\n      });\n    }\n  } else if (availableTransports.length === 1) {\n    setGlobal(global);\n\n    // Chrome requires a user gesture before showing the WebHID permission dialog in extension tabs.\n    if (!IS_LEDGER_EXTENSION_TAB) {\n      actions.initializeHardwareWalletConnection({ transport: availableTransports[0] });\n    }\n  } else {\n    if (!hasUsbDevice) {\n      global = updateHardware(global, { lastUsedTransport: 'bluetooth' });\n    }\n    setGlobal(global);\n  }\n});\n\naddActionHandler('initializeHardwareWalletConnection', async (global, actions, params) => {\n  await connectLedger(params.transport);\n});\n\nasync function connectLedger(transport: LedgerTransport, noRetry?: boolean, noRemoteTab?: boolean) {\n  let global = getGlobal();\n\n  setGlobal(updateHardware(global, {\n    hardwareState: HardwareConnectState.Connecting,\n    hardwareWallets: undefined,\n    isLedgerConnected: undefined,\n    isTonAppConnected: undefined,\n  }));\n\n  const ledgerApi = await import('../../../util/ledger');\n  const isLedgerConnected = await ledgerApi.connectLedger(transport);\n  global = getGlobal();\n\n  if (!isLedgerConnected) {\n    if (IS_EXTENSION && !IS_LEDGER_EXTENSION_TAB && !noRemoteTab) {\n      return connectLedgerViaRemoteTab(transport);\n    }\n\n    global = updateHardware(global, {\n      isLedgerConnected: false,\n      hardwareState: HardwareConnectState.Failed,\n    });\n\n    if (transport === 'usb' && global.hardware.availableTransports?.includes('bluetooth')) {\n      global = updateHardware(global, { lastUsedTransport: 'bluetooth' });\n    }\n\n    setGlobal(global);\n    return;\n  }\n\n  setGlobal(updateHardware(global, {\n    isLedgerConnected: true,\n  }));\n\n  // The only thing needed from the remote tab is getting the user permission to use the HID device (see the\n  // `openLedgerTab` description for more details). Successful connection means that the permission is granted.\n  if (IS_LEDGER_EXTENSION_TAB) {\n    return closeThisTab();\n  }\n\n  try {\n    const isTonAppConnected = await ledgerApi.waitLedgerTonApp();\n    global = getGlobal();\n\n    if (!isTonAppConnected) {\n      setGlobal(updateHardware(global, {\n        isTonAppConnected: false,\n        hardwareState: HardwareConnectState.Failed,\n      }));\n      return;\n    }\n\n    setGlobal(updateHardware(global, {\n      isTonAppConnected: true,\n    }));\n\n    // todo: Load the wallets only during authentication\n    const hardwareWallets = await getLedgerWallets(ledgerApi);\n    const nextHardwareState = hardwareWallets.length === 1\n      ? HardwareConnectState.ConnectedWithSingleWallet\n      : HardwareConnectState.ConnectedWithSeveralWallets;\n\n    setGlobal(updateHardware(getGlobal(), {\n      hardwareWallets,\n      hardwareState: nextHardwareState,\n      lastUsedTransport: transport,\n    }));\n  } catch (err: any) {\n    const isLedgerDisconnected = isLedgerConnectionBroken(err.name);\n\n    if (isLedgerDisconnected && !noRetry) {\n      return connectLedger(transport, true, noRemoteTab);\n    }\n\n    global = getGlobal();\n    setGlobal(updateHardware(global, {\n      isLedgerConnected: !isLedgerDisconnected,\n      isTonAppConnected: isLedgerDisconnected ? undefined : global.hardware.isTonAppConnected,\n      hardwareState: HardwareConnectState.Failed,\n    }));\n\n    logDebugError('connectHardwareWallet', err);\n  }\n}\n\nasync function connectLedgerViaRemoteTab(transport: LedgerTransport) {\n  setGlobal(updateHardware(getGlobal(), {\n    hardwareState: HardwareConnectState.WaitingForRemoteTab,\n  }));\n\n  await pause(OPEN_LEDGER_TAB_DELAY);\n  const id = await openLedgerTab();\n  const popup = await chrome.windows.getCurrent();\n\n  await new Promise<void>((resolve) => onLedgerTabClose(id, resolve));\n  await chrome.windows.update(popup.id!, { focused: true });\n  await connectLedger(transport, false, true);\n}\n\nasync function getLedgerWallets(ledgerApi: typeof import('../../../util/ledger')) {\n  const global = getGlobal();\n  const network = selectCurrentNetwork(global);\n  const lastIndex = selectLedgerAccountIndexToImport(global, network);\n  const currentHardwareAddresses = selectAllHardwareAccounts(global, network)\n    .map((account) => account.addressByChain.ton)\n    .filter(Boolean);\n  const hardwareWallets = await ledgerApi.getNextLedgerWallets(\n    network,\n    lastIndex,\n    currentHardwareAddresses,\n  );\n\n  if ('error' in hardwareWallets) {\n    getActions().showError({ error: hardwareWallets.error });\n    throw Error(hardwareWallets.error);\n  }\n\n  return hardwareWallets;\n}\n\naddActionHandler('resetHardwareWalletConnect', (global) => {\n  return resetHardware(global);\n});\n\naddActionHandler('loadMoreHardwareWallets', async (global, actions, { lastIndex }) => {\n  const network = selectCurrentNetwork(global);\n  const oldHardwareWallets = global.hardware.hardwareWallets ?? [];\n  const ledgerApi = await import('../../../util/ledger');\n  const hardwareWallets = await ledgerApi.getNextLedgerWallets(network, lastIndex);\n\n  global = getGlobal();\n\n  if ('error' in hardwareWallets) {\n    actions.showError({ error: hardwareWallets.error });\n    throw Error(hardwareWallets.error);\n  }\n\n  global = updateHardware(global, {\n    hardwareWallets: oldHardwareWallets.concat(hardwareWallets),\n  });\n  setGlobal(global);\n});\n","import { addCallback } from '../../../lib/teact/teactn';\n\nimport type { GlobalState } from '../../types';\nimport { SettingsState } from '../../types';\n\nimport { setInMemoryPasswordSignal } from '../../../util/authApi/inMemoryPasswordStore';\nimport { setLanguage } from '../../../util/langProvider';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport switchTheme from '../../../util/switchTheme';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, setGlobal } from '../..';\nimport { resetHardware, updateAccountSettings, updateSettings } from '../../reducers';\nimport { selectIsBiometricAuthEnabled } from '../../selectors';\n\nlet prevGlobal: GlobalState | undefined;\n\naddCallback((global: GlobalState) => {\n  if (!prevGlobal || !(prevGlobal as AnyLiteral).settings) {\n    prevGlobal = global;\n    return;\n  }\n\n  const { settings: prevSettings } = prevGlobal;\n  const { settings } = global;\n\n  if (settings.theme !== prevSettings.theme) {\n    switchTheme(settings.theme);\n  }\n\n  if (settings.langCode !== prevSettings.langCode) {\n    void setLanguage(settings.langCode);\n  }\n\n  prevGlobal = global;\n});\n\naddActionHandler('setAppLockValue', (global, actions, { value, isEnabled }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      autolockValue: value,\n      isAppLockEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('setIsManualLockActive', (global, actions, { isActive, shouldHideBiometrics }) => {\n  return {\n    ...global,\n    isManualLockActive: isActive,\n    appLockHideBiometrics: shouldHideBiometrics,\n  };\n});\n\naddActionHandler('setIsAutoConfirmEnabled', (global, actions, { isEnabled }) => {\n  if (!isEnabled) {\n    actions.setInMemoryPassword({ password: undefined, force: true });\n  }\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isAutoConfirmEnabled: isEnabled || undefined,\n    },\n  };\n});\n\naddActionHandler('setIsAllowSuspiciousActions', (global, actions, { isEnabled }) => {\n  const accountId = global.currentAccountId!;\n\n  return updateAccountSettings(global, accountId, {\n    isAllowSuspiciousActions: isEnabled || undefined,\n  });\n});\n\naddActionHandler('setInMemoryPassword', (global, actions, { password, isFinalCall, force }) => {\n  // `global` is not loaded in the NBS until it's opened for the first time, so `isAutoConfirmEnabled` may be\n  // incorrectly `undefined` when Auto Confirm is actually enabled. To mitigate that, we skip checking the setting\n  // when `isFinalCall` is `true`, because in this case the action is fired by the main WebView only when Auto Confirm is enabled.\n  if (!(global.settings.isAutoConfirmEnabled || isFinalCall || force)) {\n    return global;\n  }\n\n  // If biometrics are enabled, we don't need to set the password in memory\n  const isBiometricAuthEnabled = selectIsBiometricAuthEnabled(global);\n  if (isBiometricAuthEnabled) {\n    return global;\n  }\n\n  setInMemoryPasswordSignal(password);\n\n  if (!isFinalCall) {\n    if (IS_DELEGATING_BOTTOM_SHEET) {\n      void callActionInNative('setInMemoryPassword', { password, isFinalCall: true });\n    }\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      void callActionInMain('setInMemoryPassword', { password, isFinalCall: true });\n    }\n  }\n\n  return global;\n});\n\naddActionHandler('openSettingsHardwareWallet', (global) => {\n  global = resetHardware(global);\n  global = updateSettings(global, { state: SettingsState.LedgerConnectHardware });\n\n  setGlobal(global);\n});\n","import { TELEGRAM_GIFTS_SUPER_COLLECTION } from '../../../config';\nimport { addActionHandler, setGlobal } from '../../index';\nimport {\n  addToSelectedAddresses,\n  removeFromSelectedAddresses,\n  updateAccountState,\n  updateCurrentAccountState,\n} from '../../reducers';\nimport { selectAccountState, selectCurrentAccountState } from '../../selectors';\n\naddActionHandler('openNftCollection', (global, actions, { address }) => {\n  const accountId = global.currentAccountId!;\n  const accountState = selectAccountState(global, accountId);\n  global = updateAccountState(global, accountId, {\n    nfts: {\n      ...accountState!.nfts!,\n      currentCollectionAddress: address,\n    },\n  });\n  return global;\n});\n\naddActionHandler('closeNftCollection', (global) => {\n  const accountState = selectCurrentAccountState(global);\n  global = updateCurrentAccountState(global, {\n    nfts: {\n      ...accountState!.nfts!,\n      currentCollectionAddress: undefined,\n    },\n    selectedNftsToHide: undefined,\n  });\n  return global;\n});\n\naddActionHandler('selectNfts', (global, actions, { addresses }) => {\n  const accountId = global.currentAccountId!;\n  global = addToSelectedAddresses(global, accountId, addresses);\n  setGlobal(global);\n});\n\naddActionHandler('selectAllNfts', (global, actions, { collectionAddress }) => {\n  const accountId = global.currentAccountId!;\n  const {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n  } = selectAccountState(global, accountId) || {};\n\n  const whitelistedNftAddressesSet = new Set(whitelistedNftAddresses);\n  const blacklistedNftAddressesSet = new Set(blacklistedNftAddresses);\n  const { nfts: accountNfts } = selectAccountState(global, accountId)!;\n  const nfts = Object.values(accountNfts!.byAddress!).filter((nft) => (\n    !nft.isHidden || whitelistedNftAddressesSet.has(nft.address)\n  ) && !blacklistedNftAddressesSet.has(nft.address) && (\n    collectionAddress === undefined || (nft.collectionAddress === collectionAddress)\n  ));\n\n  global = updateAccountState(global, accountId, {\n    nfts: {\n      ...accountNfts!,\n      selectedAddresses: nfts.map(({ address }) => address),\n    },\n  });\n  setGlobal(global);\n});\n\naddActionHandler('clearNftSelection', (global, actions, { address }) => {\n  const accountId = global.currentAccountId!;\n  global = removeFromSelectedAddresses(global, accountId, address);\n  setGlobal(global);\n});\n\naddActionHandler('clearNftsSelection', (global) => {\n  const accountId = global.currentAccountId!;\n  const accountState = selectAccountState(global, accountId);\n  global = updateAccountState(global, accountId, {\n    nfts: {\n      ...accountState!.nfts!,\n      selectedAddresses: [],\n    },\n  });\n  setGlobal(global);\n});\n\naddActionHandler('addCollectionTab', (global, actions, { collectionAddress, isAuto }) => {\n  const accountId = global.currentAccountId!;\n  const accountState = selectAccountState(global, accountId);\n  const currentNfts = accountState?.nfts || { byAddress: {} };\n\n  if (isAuto && collectionAddress === TELEGRAM_GIFTS_SUPER_COLLECTION && currentNfts.wasTelegramGiftsAutoAdded) {\n    return global;\n  }\n\n  const existingCollectionTabs = currentNfts.collectionTabs || [];\n\n  if (!existingCollectionTabs.includes(collectionAddress)) {\n    global = updateAccountState(global, accountId, {\n      nfts: {\n        ...currentNfts,\n        collectionTabs: [...existingCollectionTabs, collectionAddress],\n        ...(isAuto && collectionAddress === TELEGRAM_GIFTS_SUPER_COLLECTION && { wasTelegramGiftsAutoAdded: true }),\n      },\n    });\n  }\n\n  return global;\n});\n\naddActionHandler('removeCollectionTab', (global, actions, { collectionAddress }) => {\n  const accountId = global.currentAccountId!;\n  const accountState = selectAccountState(global, accountId);\n  const currentNfts = accountState?.nfts || { byAddress: {} };\n\n  if (!currentNfts.collectionTabs) {\n    return global;\n  }\n\n  global = updateAccountState(global, accountId, {\n    nfts: {\n      ...currentNfts,\n      collectionTabs: currentNfts.collectionTabs.filter((address) => address !== collectionAddress),\n    },\n  });\n\n  return global;\n});\n","import { VestingUnfreezeState } from '../../types';\n\nimport { callActionInMain } from '../../../util/multitab';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, setGlobal } from '../../index';\nimport { resetHardware, updateVesting } from '../../reducers';\nimport { selectIsHardwareAccount } from '../../selectors';\n\naddActionHandler('openVestingModal', (global) => {\n  setGlobal({ ...global, isVestingModalOpen: true });\n});\n\naddActionHandler('closeVestingModal', (global) => {\n  setGlobal({ ...global, isVestingModalOpen: undefined });\n});\n\naddActionHandler('startClaimingVesting', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('startClaimingVesting');\n    return;\n  }\n\n  const accountId = global.currentAccountId!;\n  global = { ...global, isVestingModalOpen: undefined };\n  global = updateVesting(global, accountId, { isConfirmRequested: true });\n  if (selectIsHardwareAccount(global)) {\n    global = resetHardware(global);\n    global = updateVesting(global, accountId, { unfreezeState: VestingUnfreezeState.ConnectHardware });\n  } else {\n    global = updateVesting(global, accountId, { unfreezeState: VestingUnfreezeState.Password });\n  }\n  setGlobal(global);\n});\n\naddActionHandler('cancelClaimingVesting', (global) => {\n  const accountId = global.currentAccountId!;\n  global = updateVesting(global, accountId, { isConfirmRequested: undefined });\n  setGlobal(global);\n});\n\naddActionHandler('clearVestingError', (global) => {\n  const accountId = global.currentAccountId!;\n  global = updateVesting(global, accountId, { error: undefined });\n  setGlobal(global);\n});\n","import { ContentTab } from '../../types';\n\nimport { areSortedArraysEqual, unique } from '../../../util/iteratees';\nimport { addActionHandler } from '../../index';\nimport { updateCurrentAccountSettings } from '../../reducers';\nimport { selectCurrentAccountSettings, selectCurrentAccountTokens } from '../../selectors';\n\naddActionHandler('rebuildOrderedSlugs', (global) => {\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  const { orderedSlugs = [] } = accountSettings;\n  const accountTokens = selectCurrentAccountTokens(global) ?? [];\n  const allSlugs = accountTokens.map(({ slug }) => slug);\n  const newOrderedSlugs = unique([...orderedSlugs, ...allSlugs]);\n\n  if (areSortedArraysEqual(orderedSlugs, newOrderedSlugs)) {\n    return global;\n  }\n\n  return updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    orderedSlugs: newOrderedSlugs,\n  });\n});\n\naddActionHandler('showTokenActivity', (global, actions, { slug }) => {\n  actions.selectToken({ slug }, { forceOnHeavyAnimation: true });\n  actions.setActiveContentTab({ tab: ContentTab.Activity });\n});\n","import { ActiveTab, TransferState } from '../../types';\n\nimport { getInMemoryPassword } from '../../../util/authApi/inMemoryPasswordStore';\nimport { fromDecimal, toDecimal } from '../../../util/decimals';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { resetHardware, setCurrentTransferAddress, updateCurrentTransfer } from '../../reducers';\nimport { selectIsHardwareAccount } from '../../selectors';\n\naddActionHandler('startTransfer', (global, actions, payload) => {\n  const isOpen = global.currentTransfer.state !== TransferState.None;\n  if (IS_DELEGATED_BOTTOM_SHEET && !isOpen) {\n    callActionInMain('startTransfer', payload);\n    return;\n  }\n\n  const { isPortrait, ...rest } = payload ?? {};\n\n  const nftTokenSlug = Symbol('nft');\n  const previousFeeTokenSlug = global.currentTransfer.nfts?.length ? nftTokenSlug : global.currentTransfer.tokenSlug;\n  const nextFeeTokenSlug = payload?.nfts?.length ? nftTokenSlug : payload?.tokenSlug;\n  const shouldClearFee = nextFeeTokenSlug && nextFeeTokenSlug !== previousFeeTokenSlug;\n\n  setGlobal(updateCurrentTransfer(global, {\n    state: isPortrait ? TransferState.Initial : TransferState.None,\n    error: undefined,\n    ...(shouldClearFee ? { fee: undefined, realFee: undefined, diesel: undefined } : {}),\n    ...rest,\n  }));\n\n  if (!isPortrait) {\n    actions.setLandscapeActionsActiveTabIndex({ index: ActiveTab.Transfer });\n  }\n});\n\naddActionHandler('changeTransferToken', (global, actions, { tokenSlug, withResetAmount }) => {\n  const { amount, tokenSlug: currentTokenSlug, nfts } = global.currentTransfer;\n  if (!nfts?.length && tokenSlug === currentTokenSlug && !withResetAmount) {\n    return;\n  }\n\n  const currentToken = currentTokenSlug ? global.tokenInfo.bySlug[currentTokenSlug] : undefined;\n  const newToken = global.tokenInfo.bySlug[tokenSlug];\n\n  if (withResetAmount) {\n    global = updateCurrentTransfer(global, { amount: undefined });\n  } else if (amount && currentToken?.decimals !== newToken?.decimals) {\n    global = updateCurrentTransfer(global, {\n      amount: fromDecimal(toDecimal(amount, currentToken?.decimals), newToken?.decimals),\n    });\n  }\n\n  setGlobal(updateCurrentTransfer(global, {\n    tokenSlug,\n    fee: undefined,\n    realFee: undefined,\n    diesel: undefined,\n    nfts: undefined,\n  }));\n});\n\naddActionHandler('setTransferScreen', (global, actions, payload) => {\n  const { state } = payload;\n\n  return updateCurrentTransfer(global, { state });\n});\n\naddActionHandler('setTransferAmount', (global, actions, { amount }) => {\n  return updateCurrentTransfer(global, { amount });\n});\n\naddActionHandler('setTransferToAddress', (global, actions, { toAddress }) => {\n  return setCurrentTransferAddress(global, toAddress);\n});\n\naddActionHandler('setTransferComment', (global, actions, { comment }) => {\n  return updateCurrentTransfer(global, { comment });\n});\n\naddActionHandler('setTransferShouldEncrypt', (global, actions, { shouldEncrypt }) => {\n  return updateCurrentTransfer(global, { shouldEncrypt });\n});\n\naddActionHandler('submitTransferConfirm', async (global, actions) => {\n  const inMemoryPassword = await getInMemoryPassword();\n\n  global = getGlobal();\n\n  if (selectIsHardwareAccount(global)) {\n    global = resetHardware(global);\n    global = updateCurrentTransfer(global, { state: TransferState.ConnectHardware });\n    setGlobal(global);\n  } else if (inMemoryPassword) {\n    global = updateCurrentTransfer(global, { isLoading: true });\n    setGlobal(global);\n    actions.submitTransferPassword({ password: inMemoryPassword });\n  } else {\n    global = updateCurrentTransfer(global, { state: TransferState.Password });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('clearTransferError', (global) => {\n  setGlobal(updateCurrentTransfer(global, { error: undefined }));\n});\n\naddActionHandler('dismissTransferScamWarning', (global) => {\n  if (IS_DELEGATING_BOTTOM_SHEET) {\n    callActionInNative('dismissTransferScamWarning');\n  }\n\n  global = updateCurrentTransfer(global, { scamWarningType: undefined });\n  setGlobal(global);\n});\n\naddActionHandler('showTransferScamWarning', (global, actions, { type }) => {\n  global = updateCurrentTransfer(global, { scamWarningType: type });\n  setGlobal(global);\n});\n","import { addActionHandler } from '../../index';\n\naddActionHandler('setTheme', (global, actions, { theme }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      theme,\n    },\n  };\n});\n\naddActionHandler('setAnimationLevel', (global, actions, { level }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      animationLevel: level,\n    },\n  };\n});\n","import { MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT } from '../../../config';\nimport { isKeyCountGreater } from '../../../util/isEmptyObject';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  deleteAllNotificationAccounts,\n} from '../../reducers/notifications';\nimport { selectAccounts } from '../../selectors';\nimport { selectNotificationTonAddressesSlow } from '../../selectors/notifications';\n\naddActionHandler('tryAddNotificationAccount', (global, actions, { accountId }) => {\n  if (\n    global.pushNotifications.isAvailable\n    && Object.keys(selectAccounts(global) || {}).length <= MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT\n  ) {\n    actions.createNotificationAccount({ accountId });\n  }\n});\n\naddActionHandler('renameNotificationAccount', (global, actions, { accountId }) => {\n  const { enabledAccounts, isAvailable } = global.pushNotifications;\n\n  if (\n    isAvailable\n    && enabledAccounts?.[accountId]\n  ) {\n    actions.createNotificationAccount({ accountId });\n  }\n});\n\naddActionHandler('toggleNotificationAccount', (global, actions, { accountId }) => {\n  const {\n    enabledAccounts, userToken, platform,\n  } = global.pushNotifications;\n\n  if (!userToken || !platform) {\n    return;\n  }\n\n  const isExists = enabledAccounts && enabledAccounts[accountId];\n\n  if (!isExists && enabledAccounts && isKeyCountGreater(enabledAccounts, MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT - 1)) {\n    return;\n  }\n\n  if (isExists) {\n    actions.deleteNotificationAccount({ accountId, withAbort: true });\n  } else {\n    actions.createNotificationAccount({ accountId, withAbort: true });\n  }\n});\n\naddActionHandler('deleteAllNotificationAccounts', async (global, actions, props) => {\n  const {\n    enabledAccounts, userToken,\n  } = global.pushNotifications;\n\n  if (!enabledAccounts || !userToken) {\n    return;\n  }\n\n  const accountIds = props?.accountIds || Object.keys(enabledAccounts);\n\n  await callApi(\n    'unsubscribeNotifications',\n    {\n      userToken,\n      addresses: Object.values(selectNotificationTonAddressesSlow(global, accountIds)),\n    },\n  );\n\n  global = getGlobal();\n  setGlobal(deleteAllNotificationAccounts(global));\n});\n","export const COLOR_COUNT = 2;\nexport const QUALITY = 1;\n\nexport const ACCENT_COLORS = {\n  light: [\n    '#31AFC7', '#35C759', '#FF9500', '#FF2C55',\n    '#AF52DE', '#5856D7', '#73AAED', '#FFB07A',\n    '#B76C78', '#9689D1', '#E572CC', '#6BA07A',\n    '#338FCC', '#1FC863', '#929395', '#E4B102',\n    '#000000',\n  ],\n  dark: [\n    '#3AB5CC', '#32D74B', '#FF9F0B', '#FF325A',\n    '#BF5AF2', '#7977FF', '#73AAED', '#FFB07A',\n    '#B76C78', '#9689D1', '#E572CC', '#6BA07A',\n    '#338FCC', '#2CD36F', '#C3C5C6', '#DDBA00',\n    '#FFFFFF',\n  ],\n} as const;\nexport const ACCENT_RADIOACTIVE_INDEX = 13;\nexport const ACCENT_SILVER_INDEX = 14;\nexport const ACCENT_GOLD_INDEX = 15;\nexport const ACCENT_BNW_INDEX = 16;\n\nconst excludedIndices = new Set([\n  ACCENT_RADIOACTIVE_INDEX,\n  ACCENT_SILVER_INDEX,\n  ACCENT_GOLD_INDEX,\n  ACCENT_BNW_INDEX,\n]);\n\nexport const COLORS_TO_DETECT = ACCENT_COLORS.light\n  .map((color, index) => ({ color, index }))\n  .filter(({ index }) => !excludedIndices.has(index));\n","import { type ElementRef, useLayoutEffect } from '../../lib/teact/teact';\nimport { setExtraStyles, toggleExtraClass } from '../../lib/teact/teact-dom';\n\nimport type { ApiNft } from '../../api/types';\nimport type { AppTheme } from '../../global/types';\n\nimport { MAX_WORKERS, requestMediaWorker } from '../launchMediaWorkers';\nimport { logDebugError } from '../logs';\nimport { getCardNftImageUrl } from '../url';\nimport {\n  ACCENT_BNW_INDEX,\n  ACCENT_COLORS,\n  ACCENT_GOLD_INDEX,\n  ACCENT_RADIOACTIVE_INDEX,\n  ACCENT_SILVER_INDEX,\n  COLOR_COUNT,\n  QUALITY,\n} from './constants';\n\nconst HEX_80_PERCENT = 'CC';\nconst HEX_10_PERCENT = '1A';\n\nexport function useAccentColor(\n  elementRefOrBody: ElementRef<HTMLElement> | 'body',\n  appTheme: AppTheme,\n  accentColorIndex: number | undefined,\n) {\n  const accentColor = accentColorIndex ? ACCENT_COLORS[appTheme][accentColorIndex] : undefined;\n\n  useLayoutEffect(() => {\n    const element = elementRefOrBody === 'body' ? document.body : elementRefOrBody.current;\n    if (!element) return;\n\n    setExtraStyles(element, {\n      '--color-accent': accentColor || 'inherit',\n      '--color-accent-10o': accentColor ? `${accentColor}${HEX_10_PERCENT}` : 'inherit',\n      '--color-accent-button-background': accentColor || 'inherit',\n      '--color-accent-button-background-hover': accentColor ? `${accentColor}${HEX_80_PERCENT}` : 'inherit',\n      '--color-accent-button-text': accentColor === '#FFFFFF' ? '#000000' : 'inherit',\n      '--color-accent-button-text-hover': accentColor === '#FFFFFF' ? '#000000' : 'inherit',\n    });\n\n    toggleExtraClass(document.documentElement, 'is-white-accent', accentColor === '#FFFFFF');\n  }, [elementRefOrBody, accentColor]);\n}\n\nexport async function getAccentColorIndexFromNft(nft: ApiNft) {\n  const { mtwCardType, mtwCardBorderShineType } = nft.metadata;\n\n  if (mtwCardBorderShineType === 'radioactive') {\n    return ACCENT_RADIOACTIVE_INDEX;\n  }\n  if (mtwCardType === 'silver') {\n    return ACCENT_SILVER_INDEX;\n  }\n  if (mtwCardType === 'gold') {\n    return ACCENT_GOLD_INDEX;\n  }\n  if (mtwCardType === 'platinum' || mtwCardType === 'black') {\n    return ACCENT_BNW_INDEX;\n  }\n\n  const src = getCardNftImageUrl(nft);\n  if (!src) return undefined;\n\n  try {\n    return await requestMediaWorker({\n      name: 'offscreen-canvas:processNftImage',\n      args: [src, QUALITY, COLOR_COUNT],\n    }, Math.round(nft.index) % MAX_WORKERS);\n  } catch (error) {\n    logDebugError('getAccentColorIndexFromNft', error);\n    return undefined;\n  }\n}\n","import type { GlobalState } from '../../types';\nimport { MintCardState } from '../../types';\n\nimport { getAccentColorIndexFromNft } from '../../../util/accentColor';\nimport { callActionInMain } from '../../../util/multitab';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { resetHardware, updateCurrentAccountSettings, updateMintCards } from '../../reducers';\nimport { selectIsHardwareAccount } from '../../selectors';\n\naddActionHandler('openMintCardModal', (global): GlobalState => {\n  return updateMintCards(global, { state: MintCardState.Initial });\n});\n\naddActionHandler('closeMintCardModal', (global): GlobalState => {\n  return { ...global, currentMintCard: undefined };\n});\n\naddActionHandler('startCardMinting', (global, action, { type }): GlobalState => {\n  if (selectIsHardwareAccount(global)) {\n    global = resetHardware(global);\n    global = updateMintCards(global, { state: MintCardState.ConnectHardware });\n  } else {\n    global = updateMintCards(global, { state: MintCardState.Password });\n  }\n\n  return global;\n});\n\naddActionHandler('clearMintCardError', (global): GlobalState => {\n  return updateMintCards(global, { error: undefined });\n});\n\naddActionHandler('setCardBackgroundNft', (global, actions, { nft }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('setCardBackgroundNft', { nft });\n    return;\n  }\n\n  global = updateCurrentAccountSettings(global, { cardBackgroundNft: nft });\n  setGlobal(global);\n});\n\naddActionHandler('clearCardBackgroundNft', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('clearCardBackgroundNft');\n    return;\n  }\n\n  global = updateCurrentAccountSettings(global, { cardBackgroundNft: undefined });\n  setGlobal(global);\n});\n\naddActionHandler('installAccentColorFromNft', async (global, actions, { nft }) => {\n  const accentColorIndex = await getAccentColorIndexFromNft(nft);\n\n  global = getGlobal();\n  global = updateCurrentAccountSettings(global, {\n    accentColorNft: nft,\n    accentColorIndex,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('clearAccentColorFromNft', (global) => {\n  return updateCurrentAccountSettings(global, {\n    accentColorNft: undefined,\n    accentColorIndex: undefined,\n  });\n});\n","import { DomainLinkingState, DomainRenewalState } from '../../types';\n\nimport { waitFor } from '../../../util/schedulers';\nimport { closeAllOverlays } from '../../helpers/misc';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { INITIAL_STATE } from '../../initialState';\nimport { resetHardware, updateCurrentDomainLinking, updateCurrentDomainRenewal } from '../../reducers';\nimport { selectCurrentAccountState, selectIsHardwareAccount } from '../../selectors';\nimport { switchAccount } from '../api/auth';\n\naddActionHandler('openDomainRenewalModal', async (global, actions, { accountId, network, addresses }) => {\n  if (accountId) {\n    await Promise.all([\n      closeAllOverlays(),\n      switchAccount(global, accountId, network),\n    ]);\n  }\n  // After switching account, wait for nft domains to be fetched\n  if (!(await waitFor(() => Boolean(selectCurrentAccountState(getGlobal())?.nfts?.byAddress), 1000, 30))) {\n    return;\n  }\n\n  global = getGlobal();\n\n  const { byAddress } = selectCurrentAccountState(global)?.nfts || {};\n  addresses = (addresses || []).filter((address) => byAddress?.[address]);\n  if (!addresses.length) {\n    return;\n  }\n\n  global = updateCurrentDomainRenewal(global, {\n    state: DomainRenewalState.Initial,\n    addresses,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('startDomainsRenewal', (global) => {\n  if (selectIsHardwareAccount(global)) {\n    global = resetHardware(global);\n    global = updateCurrentDomainRenewal(global, { state: DomainRenewalState.ConnectHardware });\n  } else {\n    global = updateCurrentDomainRenewal(global, { state: DomainRenewalState.Password });\n  }\n\n  return global;\n});\n\naddActionHandler('clearDomainsRenewalError', (global) => {\n  return updateCurrentDomainRenewal(global, {\n    error: undefined,\n  });\n});\n\naddActionHandler('cancelDomainsRenewal', (global) => {\n  return {\n    ...global,\n    currentDomainRenewal: INITIAL_STATE.currentDomainRenewal,\n  };\n});\n\naddActionHandler('openDomainLinkingModal', (global, actions, { address }) => {\n  return updateCurrentDomainLinking(global, {\n    state: DomainLinkingState.Initial,\n    address,\n  });\n});\n\naddActionHandler('startDomainLinking', (global) => {\n  if (selectIsHardwareAccount(global)) {\n    global = resetHardware(global);\n    global = updateCurrentDomainLinking(global, { state: DomainLinkingState.ConnectHardware });\n  } else {\n    global = updateCurrentDomainLinking(global, { state: DomainLinkingState.Password });\n  }\n\n  return global;\n});\n\naddActionHandler('clearDomainLinkingError', (global) => {\n  return updateCurrentDomainLinking(global, {\n    error: undefined,\n  });\n});\n\naddActionHandler('cancelDomainLinking', (global) => {\n  return {\n    ...global,\n    currentDomainLinking: INITIAL_STATE.currentDomainLinking,\n  };\n});\n\naddActionHandler('setDomainLinkingWalletAddress', (global, actions, { address }) => {\n  return updateCurrentDomainLinking(global, { walletAddress: address });\n});\n","import { getIsHeavyAnimating, onFullyIdle } from '../lib/teact/teact';\nimport { addCallback, removeCallback } from '../lib/teact/teactn';\n\nimport type { ApiActivity } from '../api/types';\nimport type {\n  AccountState,\n  GlobalState,\n  SavedAddress,\n  TokenPeriod,\n} from './types';\nimport {\n  StakingState,\n} from './types';\n\nimport {\n  DEBUG,\n  GLOBAL_STATE_CACHE_DISABLED,\n  GLOBAL_STATE_CACHE_KEY,\n  IS_CAPACITOR,\n  MAIN_ACCOUNT_ID,\n  TOKEN_INFO,\n  TONCOIN,\n} from '../config';\nimport { buildAccountId, parseAccountId } from '../util/account';\nimport { getActivityTokenSlugs, getIsActivityPending, getIsTxIdLocal } from '../util/activities';\nimport { bigintReviver } from '../util/bigint';\nimport isEmptyObject from '../util/isEmptyObject';\nimport {\n  cloneDeep, extractKey, filterValues, mapValues, pick, pickTruthy,\n} from '../util/iteratees';\nimport { clearPoisoningCache, updatePoisoningCache } from '../util/poisoningHash';\nimport { onBeforeUnload, throttle } from '../util/schedulers';\nimport { getIsActiveStakingState } from '../util/staking';\nimport { IS_ELECTRON } from '../util/windowEnvironment';\nimport { addActionHandler, getGlobal } from './index';\nimport { INITIAL_STATE, STATE_VERSION } from './initialState';\nimport { selectAccountState, selectAccountTokens } from './selectors';\n\nconst UPDATE_THROTTLE = IS_CAPACITOR ? 500 : 5000;\nconst ACTIVITIES_LIMIT = 20;\nconst ACTIVITY_TOKENS_LIMIT = 30;\nconst STAKING_HISTORY_LIMIT = 30;\n\nconst updateCacheThrottled = throttle(() => onFullyIdle(() => updateCache()), UPDATE_THROTTLE, false);\nconst updateCacheForced = () => updateCache(true);\n\nlet isCaching = false;\nlet unsubscribeFromBeforeUnload: NoneToVoidFunction | undefined;\nlet preloadedData: Partial<GlobalState> | undefined;\n\nexport function initCache() {\n  if (GLOBAL_STATE_CACHE_DISABLED) {\n    return;\n  }\n\n  addActionHandler('afterSignIn', setupCaching);\n\n  addActionHandler('afterSignOut', (global, actions, payload) => {\n    clearPoisoningCache();\n\n    if (payload?.shouldReset) {\n      preloadedData = pick(global, ['swapTokenInfo', 'tokenInfo', 'restrictions']);\n      clearCaching();\n      localStorage.removeItem(GLOBAL_STATE_CACHE_KEY);\n    }\n  });\n\n  addActionHandler('cancelCaching', clearCaching);\n}\n\nfunction setupCaching() {\n  if (isCaching) return;\n\n  isCaching = true;\n\n  addCallback(updateCacheThrottled);\n  unsubscribeFromBeforeUnload = onBeforeUnload(updateCacheForced, true);\n  window.addEventListener('blur', updateCacheForced);\n\n  updateCacheForced();\n}\n\nfunction clearCaching() {\n  if (!isCaching) return;\n\n  window.removeEventListener('blur', updateCacheForced);\n  unsubscribeFromBeforeUnload?.();\n  removeCallback(updateCacheThrottled);\n\n  isCaching = false;\n}\n\nexport function loadCache(initialState: GlobalState): GlobalState {\n  if (GLOBAL_STATE_CACHE_DISABLED) {\n    return initialState;\n  }\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.time('global-state-cache-read');\n  }\n\n  const json = localStorage.getItem(GLOBAL_STATE_CACHE_KEY);\n  let cached = json ? JSON.parse(json, bigintReviver) as GlobalState : undefined;\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.timeEnd('global-state-cache-read');\n  }\n\n  if (cached) {\n    try {\n      migrateCache(cached, initialState);\n      loadMemoryCache(cached);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error(err);\n\n      cached = undefined;\n    }\n  }\n\n  return {\n    ...initialState,\n    ...preloadedData,\n    ...cached,\n  };\n}\n\nfunction migrateCache(cached: GlobalState, initialState: GlobalState) {\n  // Pre-fill settings with defaults\n  cached.settings = {\n    ...initialState.settings,\n    ...cached.settings,\n  };\n\n  if (cached.stateVersion === STATE_VERSION) {\n    return;\n  }\n\n  // Migration to multi-accounts\n  if (!cached.byAccountId) {\n    (cached as any).accounts = {\n      byId: {\n        [MAIN_ACCOUNT_ID]: {\n          address: (cached as any).addresses.byAccountId[MAIN_ACCOUNT_ID],\n          title: 'Main Account',\n        },\n      },\n    };\n\n    delete (cached as any).addresses;\n\n    cached.byAccountId = {};\n    cached.byAccountId[MAIN_ACCOUNT_ID] = {\n      isBackupRequired: Boolean((cached as any).isBackupRequired),\n      currentTokenSlug: (cached as any).currentTokenSlug as string,\n      currentTokenPeriod: (cached as any).currentTokenPeriod as TokenPeriod,\n    };\n\n    if ('balances' in cached) {\n      cached.byAccountId[MAIN_ACCOUNT_ID].balances = (cached as any).balances.byAccountId[MAIN_ACCOUNT_ID];\n      delete (cached as any).balances;\n    }\n\n    if ('transactions' in cached) {\n      (cached.byAccountId[MAIN_ACCOUNT_ID] as any).transactions = (cached as any).transactions;\n      delete (cached as any).transactions;\n    }\n\n    if ('nfts' in cached) {\n      cached.byAccountId[MAIN_ACCOUNT_ID].nfts = (cached as any).nfts;\n      delete (cached as any).nfts;\n    }\n\n    if ('savedAddresses' in cached) {\n      cached.byAccountId[MAIN_ACCOUNT_ID].savedAddresses = (cached as any).savedAddresses;\n      delete (cached as any).savedAddresses;\n    }\n\n    if ('backupWallet' in cached) {\n      delete (cached as any).backupWallet;\n    }\n  }\n\n  if (\n    (!cached.currentAccountId || !cached.byAccountId[cached.currentAccountId]) && Object.keys(cached.byAccountId).length\n  ) {\n    cached.currentAccountId = Object.keys(cached.byAccountId)[0];\n  }\n\n  // Initializing the v1\n  if (!cached.stateVersion && cached.accounts && !isEmptyObject(cached.accounts)) {\n    cached.stateVersion = 1;\n  }\n\n  if (cached.stateVersion === 1) {\n    cached.stateVersion = 2;\n\n    if (cached.tokenInfo?.bySlug) {\n      cached.tokenInfo.bySlug = {\n        toncoin: {\n          ...cached.tokenInfo.bySlug.toncoin,\n          decimals: TONCOIN.decimals,\n        },\n      };\n    }\n\n    if (cached.byAccountId) {\n      Object.values(cached.byAccountId).forEach((accountState) => {\n        if (accountState.balances?.bySlug) {\n          accountState.balances.bySlug = pick(accountState.balances.bySlug, ['toncoin']);\n        }\n        if ((accountState as any).transactions) {\n          delete (accountState as any).transactions;\n        }\n      });\n    }\n  }\n\n  if (cached.stateVersion === 2) {\n    cached.stateVersion = 3;\n\n    // Normalization of MAIN_ACCOUNT_ID '0' => '0-ton-mainnet'\n    const oldId = '0';\n    const newId = MAIN_ACCOUNT_ID;\n    if (cached.accounts && oldId in cached.accounts.byId) {\n      if (cached.currentAccountId === oldId) {\n        cached.currentAccountId = newId;\n      }\n      cached.accounts.byId[newId] = cached.accounts.byId[oldId];\n      delete cached.accounts.byId[oldId];\n      cached.byAccountId[newId] = cached.byAccountId[oldId];\n      delete cached.byAccountId[oldId];\n    }\n\n    // Add testnet accounts\n    if (cached.accounts) {\n      for (const accountId of Object.keys(cached.accounts.byId)) {\n        const testnetAccountId = buildAccountId({\n          ...parseAccountId(accountId),\n          network: 'testnet',\n        });\n        cached.accounts.byId[testnetAccountId] = cloneDeep(cached.accounts.byId[accountId]);\n        cached.byAccountId[testnetAccountId] = {};\n      }\n    }\n  }\n\n  if (cached.stateVersion === 3) {\n    cached.stateVersion = 4;\n\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).transactions;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 4) {\n    cached.stateVersion = 5;\n\n    (cached as any).staking = {\n      state: StakingState.None,\n    };\n  }\n\n  if (cached.stateVersion === 5) {\n    cached.stateVersion = 6;\n\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).transactions;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 6) {\n    cached.stateVersion = 7;\n\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).transactions;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 7) {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).backupWallet;\n      }\n    }\n\n    cached.stateVersion = 8;\n  }\n\n  if (cached.stateVersion === 8) {\n    if (cached.settings && IS_ELECTRON) {\n      cached.settings.isDeeplinkHookEnabled = true;\n    }\n\n    cached.stateVersion = 9;\n  }\n\n  function clearActivities() {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).activities;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 9) {\n    clearActivities();\n    cached.stateVersion = 10;\n  }\n\n  if (cached.stateVersion === 10) {\n    if ((cached.settings as any).areTokensWithNoBalanceHidden === undefined) {\n      (cached.settings as any).areTokensWithNoBalanceHidden = true;\n    }\n    cached.stateVersion = 11;\n  }\n\n  if (cached.stateVersion === 11) {\n    clearActivities();\n    cached.stateVersion = 12;\n  }\n\n  if (cached.stateVersion === 12) {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete cached.byAccountId[accountId].activities;\n\n        const { balances } = cached.byAccountId[accountId];\n        if (balances) {\n          balances.bySlug = Object.entries(balances.bySlug).reduce((acc, [slug, balance]) => {\n            acc[slug] = BigInt(balance);\n            return acc;\n          }, {} as Record<string, bigint>);\n        }\n      }\n    }\n    cached.stateVersion = 13;\n  }\n\n  if (cached.stateVersion === 13) {\n    const { areTokensWithNoPriceHidden, areTokensWithNoBalanceHidden } = cached.settings as any as {\n      areTokensWithNoPriceHidden?: boolean;\n      areTokensWithNoBalanceHidden?: boolean;\n    };\n\n    cached.settings.areTokensWithNoCostHidden = Boolean(areTokensWithNoPriceHidden || areTokensWithNoBalanceHidden);\n    cached.stateVersion = 14;\n  }\n\n  if (cached.stateVersion >= 14 && cached.stateVersion <= 17) {\n    clearActivities();\n    cached.stateVersion = 18;\n  }\n\n  if (cached.stateVersion === 18 || cached.stateVersion === 19) {\n    for (const accountId of Object.keys(cached.byAccountId)) {\n      cached.byAccountId[accountId].currentTokenPeriod = '1D';\n    }\n    cached.stateVersion = 20;\n  }\n\n  if (cached.stateVersion >= 20 && cached.stateVersion <= 22) {\n    clearActivities();\n    cached.stateVersion = 23;\n  }\n\n  if (cached.stateVersion === 23) {\n    if (!('isSortByValueEnabled' in cached.settings)) {\n      cached.settings.isSortByValueEnabled = initialState.settings.isSortByValueEnabled;\n    }\n    cached.stateVersion = 24;\n  }\n\n  if (cached.stateVersion === 24) {\n    if (cached.accounts) {\n      clearActivities();\n      for (const account of Object.values(cached.accounts.byId)) {\n        account.addressByChain = { ton: (account as any).address } as any;\n        delete (account as any).address;\n      }\n    }\n    cached.stateVersion = 25;\n  }\n\n  if (cached.stateVersion === 25) {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        const savedAddresses = cached.byAccountId[accountId].savedAddresses;\n        if (savedAddresses && !('length' in savedAddresses)) {\n          cached.byAccountId[accountId].savedAddresses = Object.keys(savedAddresses as Record<string, string>)\n            .map((address) => ({\n              name: savedAddresses[address],\n              address,\n              chain: 'ton',\n            } as SavedAddress));\n        }\n      }\n    }\n    cached.stateVersion = 26;\n  }\n\n  if (cached.stateVersion === 26) {\n    clearActivities();\n    cached.stateVersion = 27;\n  }\n\n  if (cached.stateVersion === 27) {\n    delete (cached.settings as any).dapps;\n    cached.stateVersion = 28;\n  }\n\n  if (cached.stateVersion === 28) {\n    const accountIds = Object.keys(cached.settings.byAccountId);\n    for (const accountId of accountIds) {\n      const exceptionSlugs = (cached.settings.byAccountId[accountId] as any).exceptionSlugs as string[] | undefined;\n      if (cached.settings.areTokensWithNoCostHidden) {\n        cached.settings.byAccountId[accountId].alwaysShownSlugs = exceptionSlugs;\n      } else {\n        cached.settings.byAccountId[accountId].alwaysHiddenSlugs = exceptionSlugs;\n      }\n    }\n    cached.stateVersion = 29;\n  }\n\n  if (cached.stateVersion === 29) {\n    cached.currentTransfer.tokenSlug = TONCOIN.slug;\n    cached.stateVersion = 30;\n  }\n\n  if (cached.stateVersion === 30) {\n    clearActivities();\n    cached.stateVersion = 31;\n  }\n\n  if (cached.stateVersion === 31) {\n    if (cached.settings.autolockValue && cached.settings.autolockValue !== 'never') {\n      cached.settings.isAppLockEnabled = true;\n    }\n    cached.stateVersion = 32;\n  }\n\n  if (cached.stateVersion >= 32 && cached.stateVersion <= 35) {\n    clearActivities();\n    cached.stateVersion = 36;\n  }\n\n  if (cached.stateVersion === 36) {\n    for (const account of Object.values(cached.accounts?.byId ?? {})) {\n      account.type = (account as { isHardware?: boolean }).isHardware ? 'hardware' : 'mnemonic';\n      delete (account as { isHardware?: boolean }).isHardware;\n    }\n    cached.stateVersion = 37;\n  }\n\n  if (cached.stateVersion === 37) {\n    for (const token of Object.values(cached.tokenInfo.bySlug) as any[]) {\n      if (!token.price) token.price = 0;\n      if (!token.percentChange24h) token.percentChange24h = 0;\n      if (!token.priceUsd) token.priceUsd = 0;\n      if (token.quote) delete token.quote;\n    }\n    cached.stateVersion = 38;\n  }\n\n  if (cached.stateVersion >= 38 && cached.stateVersion <= 41) {\n    clearActivities();\n    cached.stateVersion = 42;\n  }\n\n  if (cached.stateVersion === 41) {\n    for (const accountId of Object.keys(cached.byAccountId)) {\n      const accountState = cached.byAccountId[accountId];\n      if ((accountState as any).dappLastOpenedDatesByOrigin) {\n        accountState.dappLastOpenedDatesByUrl = (accountState as any).dappLastOpenedDatesByOrigin;\n        delete (accountState as any).dappLastOpenedDatesByOrigin;\n      }\n    }\n    cached.stateVersion = 42;\n  }\n\n  if (cached.stateVersion >= 42 && cached.stateVersion <= 43) {\n    clearActivities();\n    cached.stateVersion = 44;\n  }\n\n  // When adding migration here, increase `STATE_VERSION`\n}\n\nfunction loadMemoryCache(cached: GlobalState) {\n  if (!cached.currentAccountId) return;\n\n  const { byId, newestActivitiesBySlug } = cached.byAccountId[cached.currentAccountId].activities || {};\n\n  if (byId) {\n    Object.values(byId).forEach((tx) => {\n      if (tx.kind === 'transaction' && tx.isIncoming) {\n        updatePoisoningCache(tx);\n      }\n    });\n  }\n\n  if (newestActivitiesBySlug) {\n    Object.values(newestActivitiesBySlug).forEach((activity) => {\n      if (activity.kind === 'transaction' && activity.isIncoming) {\n        updatePoisoningCache(activity);\n      }\n    });\n  }\n}\n\nconst getUsedTokenSlugs = (reducedGlobal: GlobalState): string[] => {\n  const usedTokenSlugs = new Set<string>(Object.keys(TOKEN_INFO));\n\n  if (reducedGlobal.currentAccountId) {\n    const currentTokenSlug = reducedGlobal.byAccountId[reducedGlobal.currentAccountId]?.currentTokenSlug;\n    if (currentTokenSlug) {\n      usedTokenSlugs.add(currentTokenSlug);\n    }\n  }\n\n  Object.values(reducedGlobal.byAccountId).forEach((state) => {\n    const { balances, activities, staking } = state;\n\n    Object.keys(balances?.bySlug ?? {}).forEach((slug) => usedTokenSlugs.add(slug));\n    Object.keys(activities?.byId ?? {}).forEach((transactionId) => {\n      getActivityTokenSlugs(activities!.byId[transactionId]).forEach((slug) => usedTokenSlugs.add(slug));\n    });\n    Object.keys(activities?.idsBySlug ?? {}).forEach((slug) => usedTokenSlugs.add(slug));\n    Object.keys(staking?.stateById ?? {}).forEach((id) => {\n      usedTokenSlugs.add(staking!.stateById![id].tokenSlug);\n    });\n  });\n\n  return Array.from(usedTokenSlugs);\n};\n\nfunction getAccountTokenSlugs(global: GlobalState, accountId: string) {\n  const { currentTokenSlug } = selectAccountState(global, accountId) ?? {};\n  const tokenSlugs = extractKey(selectAccountTokens(global, accountId) ?? [], 'slug')\n    .slice(0, ACTIVITY_TOKENS_LIMIT);\n\n  if (!tokenSlugs.includes(TONCOIN.slug)) {\n    tokenSlugs.push(TONCOIN.slug);\n  }\n\n  if (currentTokenSlug && !tokenSlugs.includes(currentTokenSlug)) {\n    tokenSlugs.push(currentTokenSlug);\n  }\n\n  return tokenSlugs;\n}\n\nfunction updateCache(force?: boolean) {\n  if (GLOBAL_STATE_CACHE_DISABLED || !isCaching || (!force && getIsHeavyAnimating())) {\n    return;\n  }\n\n  const global = getGlobal();\n\n  const accountsById = global.accounts?.byId || {};\n  const reducedGlobal: GlobalState = {\n    ...INITIAL_STATE,\n    ...pick(global, [\n      'currentAccountId',\n      'stateVersion',\n      'restrictions',\n      'pushNotifications',\n      'isFullscreen',\n      'isManualLockActive',\n      'stakingDefault',\n    ]),\n    accounts: {\n      byId: accountsById,\n    },\n    byAccountId: reduceByAccountId(global),\n    settings: {\n      ...global.settings,\n      byAccountId: pick(global.settings.byAccountId, Object.keys(accountsById)),\n    },\n  };\n\n  const usedTokenSlugs = getUsedTokenSlugs(reducedGlobal);\n\n  reducedGlobal.tokenInfo = {\n    bySlug: pickTruthy(global.tokenInfo.bySlug, usedTokenSlugs),\n  };\n\n  const json = JSON.stringify(reducedGlobal);\n  localStorage.setItem(GLOBAL_STATE_CACHE_KEY, json);\n}\n\nfunction reduceByAccountId(global: GlobalState) {\n  return Object.entries(global.byAccountId).reduce((acc, [accountId, state]) => {\n    if (!global.accounts?.byId[accountId]) {\n      return acc;\n    }\n\n    acc[accountId] = pick(state, [\n      'isBackupRequired',\n      'currentTokenSlug',\n      'currentTokenPeriod',\n      'savedAddresses',\n      'staking',\n      'activeContentTab',\n      'landscapeActionsActiveTabIndex',\n      'browserHistory',\n      'blacklistedNftAddresses',\n      'whitelistedNftAddresses',\n      'dappLastOpenedDatesByUrl',\n      'dapps',\n    ]);\n\n    if (state.nfts?.collectionTabs) {\n      acc[accountId].nfts = {\n        collectionTabs: state.nfts.collectionTabs,\n        wasTelegramGiftsAutoAdded: state.nfts.wasTelegramGiftsAutoAdded,\n      };\n    }\n\n    const accountTokenSlugs = getAccountTokenSlugs(global, accountId);\n    acc[accountId].balances = reduceAccountBalances(state.balances, accountTokenSlugs);\n    acc[accountId].activities = reduceAccountActivities(state.activities, accountTokenSlugs);\n    acc[accountId].staking = reduceAccountStaking(state.staking);\n    acc[accountId].stakingHistory = state.stakingHistory?.length\n      ? state.stakingHistory.slice(0, STAKING_HISTORY_LIMIT)\n      : undefined;\n\n    return acc;\n  }, {} as GlobalState['byAccountId']);\n}\n\nfunction reduceAccountBalances(balances?: AccountState['balances'], tokenSlugs?: string[]) {\n  if (!balances?.bySlug || !tokenSlugs) return balances;\n\n  return {\n    ...balances,\n    bySlug: pick(balances.bySlug, tokenSlugs),\n  };\n}\n\nfunction reduceAccountActivities(activities?: AccountState['activities'], tokenSlugs?: string[]) {\n  const {\n    idsBySlug, newestActivitiesBySlug, byId, idsMain,\n  } = activities || {};\n  if (!tokenSlugs || !idsBySlug || !byId || !idsMain) return undefined;\n\n  const reducedIdsMain = pickVisibleActivities(idsMain, byId);\n  const reducedIdsBySlug = mapValues(pickTruthy(idsBySlug, tokenSlugs), (ids) => pickVisibleActivities(ids, byId));\n\n  const reducedNewestActivitiesBySlug = newestActivitiesBySlug\n    ? pick(newestActivitiesBySlug, tokenSlugs)\n    : undefined;\n\n  const reducedIds = Object.values(reducedIdsBySlug).concat(reducedIdsMain).flat();\n  const reducedById = pick(byId, reducedIds);\n\n  return {\n    byId: reducedById,\n    idsMain: reducedIdsMain,\n    idsBySlug: reducedIdsBySlug,\n    newestActivitiesBySlug: reducedNewestActivitiesBySlug,\n  };\n}\n\nfunction reduceAccountStaking(staking?: AccountState['staking']) {\n  let { stakingId, stateById } = staking ?? {};\n\n  if (stateById && !isEmptyObject(stateById)) {\n    stateById = filterValues(stateById, getIsActiveStakingState);\n\n    if (!stakingId || !(stakingId in stateById)) {\n      stakingId = Object.values(stateById)[0]?.id;\n    }\n  }\n\n  return {\n    ...staking,\n    stateById,\n    stakingId,\n  };\n}\n\nfunction pickVisibleActivities(ids: string[], byId: Record<string, ApiActivity>) {\n  const result: string[] = [];\n\n  let visibleIdCount = 0;\n\n  ids\n    .filter((id) => shouldCacheActivity(id, byId))\n    .forEach((id) => {\n      if (visibleIdCount === ACTIVITIES_LIMIT) return;\n\n      if (!byId[id].shouldHide) {\n        visibleIdCount += 1;\n      }\n\n      result.push(id);\n    });\n\n  return result;\n}\n\nfunction shouldCacheActivity(id: string, byId: Record<string, ApiActivity>) {\n  const activity = byId[id];\n  return activity\n    && !getIsTxIdLocal(id)\n    && !getIsActivityPending(activity);\n}\n","import { cloneDeep } from '../util/iteratees';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_LEDGER_EXTENSION_TAB } from '../util/windowEnvironment';\nimport { initCache, loadCache } from './cache';\nimport { addActionHandler } from './index';\nimport { INITIAL_STATE } from './initialState';\nimport { selectHasSession } from './selectors';\n\nif (!IS_DELEGATED_BOTTOM_SHEET) {\n  initCache();\n}\n\naddActionHandler('init', (_, actions) => {\n  const initial = cloneDeep(INITIAL_STATE);\n\n  const global = loadCache(initial);\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    return {\n      ...initial,\n      settings: {\n        ...initial.settings,\n        theme: global.settings.theme,\n      },\n    };\n  }\n\n  if (IS_LEDGER_EXTENSION_TAB) {\n    actions.initLedgerPage();\n    return {\n      ...initial,\n      settings: {\n        ...initial.settings,\n        theme: global.settings.theme,\n      },\n    };\n  }\n\n  if (selectHasSession(global)) {\n    actions.afterSignIn();\n  }\n\n  return global;\n});\n","import { BIGINT_PREFIX } from './bigint';\n\n// Fixes serialization of objects containing `bigint` values.\n// Extracted to a separate file to avoid leaking into Extension Page Script.\n// @ts-ignore\nBigInt.prototype.toJSON = function toJSON() {\n  return `${BIGINT_PREFIX}${this.toString()}`;\n};\n","import { animate } from './animation';\nimport { fastRaf } from './schedulers';\nimport { IS_IOS } from './windowEnvironment';\n\nconst TEST_INTERVAL = 5000; // 5 sec\nconst FRAMES_TO_TEST = 10;\nconst REDUCED_FPS = 35;\n\nlet isImproved = false;\n\nexport function betterView() {\n  if (!IS_IOS) return;\n\n  let interval: number | undefined;\n  let lastFocusAt = Date.now();\n\n  function setupInterval() {\n    if (interval || isImproved) return;\n\n    interval = window.setInterval(testAndImprove, TEST_INTERVAL);\n  }\n\n  window.addEventListener('focus', () => {\n    const now = Date.now();\n    if (now - lastFocusAt < 100) return; // iOS triggers two `focus` events for some reason\n    lastFocusAt = now;\n\n    setupInterval();\n    void testAndImprove();\n  });\n\n  window.addEventListener('blur', () => {\n    clearInterval(interval);\n    interval = undefined;\n  });\n\n  if (document.hasFocus()) {\n    setupInterval();\n    void testAndImprove();\n  }\n}\n\nasync function testAndImprove() {\n  const fps = await testFps();\n  if (fps <= REDUCED_FPS) {\n    improveView();\n  }\n}\n\nfunction testFps() {\n  return new Promise<number>((resolve) => {\n    const frames: number[] = [];\n    let lastFrameAt = performance.now();\n\n    animate(() => {\n      const now = performance.now();\n      frames.push(now - lastFrameAt);\n      lastFrameAt = now;\n\n      if (frames.length === FRAMES_TO_TEST) {\n        const mean = frames.sort()[Math.floor(frames.length / 2)];\n        resolve(Math.round(1000 / mean));\n        return false;\n      }\n\n      return true;\n    }, fastRaf);\n  });\n}\n\nfunction improveView() {\n  isImproved = true;\n\n  const containerEl = document.createElement('div');\n  containerEl.style.cssText = 'position: absolute; top: 0; left: 0; width: 0; height: 100%; overflow: hidden;';\n\n  const boosterEl = document.createElement('div');\n  const height = window.screen.height * 1.5;\n  boosterEl.style.cssText = `width: 0; height: ${height}px; transform: translateX(100%); transition: transform 100ms;`;\n  boosterEl.innerHTML = '&nbsp;';\n\n  containerEl.appendChild(boosterEl);\n  document.body.appendChild(containerEl);\n\n  requestAnimationFrame(() => {\n    boosterEl.addEventListener('transitionend', () => {\n      containerEl.remove();\n    });\n\n    boosterEl.style.transform = '';\n  });\n}\n","import type { AppLayout } from '../global/types';\n\nexport enum ElectronEvent {\n  DEEPLINK = 'deeplink',\n  UPDATE_ERROR = 'update-error',\n  UPDATE_DOWNLOADED = 'update-downloaded',\n}\n\nexport enum ElectronAction {\n  CLOSE = 'close',\n  MINIMIZE = 'minimize',\n  MAXIMIZE = 'maximize',\n  UNMAXIMIZE = 'unmaximize',\n  GET_IS_MAXIMIZED = 'get-is-maximized',\n\n  INSTALL_UPDATE = 'install-update',\n  HANDLE_DOUBLE_CLICK = 'handle-double-click',\n\n  TOGGLE_DEEPLINK_HANDLER = 'toggle-deeplink-handler',\n\n  GET_IS_TOUCH_ID_SUPPORTED = 'get-is-touch-id-supported',\n  ENCRYPT_PASSWORD = 'encrypt-password',\n  DECRYPT_PASSWORD = 'decrypt-password',\n\n  SET_IS_TRAY_ICON_ENABLED = 'set-is-tray-icon-enabled',\n  GET_IS_TRAY_ICON_ENABLED = 'get-is-tray-icon-enabled',\n  SET_IS_AUTO_UPDATE_ENABLED = 'set-is-auto-update-enabled',\n  GET_IS_AUTO_UPDATE_ENABLED = 'get-is-auto-update-enabled',\n  CHANGE_APP_LAYOUT = 'change-app-layout',\n\n  RESTORE_STORAGE = 'restore-storage',\n}\n\nexport interface ElectronApi {\n  close: VoidFunction;\n  minimize: VoidFunction;\n  maximize: VoidFunction;\n  unmaximize: VoidFunction;\n  getIsMaximized: () => Promise<boolean>;\n\n  installUpdate: () => Promise<void>;\n  handleDoubleClick: () => Promise<void>;\n\n  toggleDeeplinkHandler: (isEnabled: boolean) => Promise<void>;\n\n  getIsTouchIdSupported: () => Promise<boolean>;\n  encryptPassword: (password: string) => Promise<string>;\n  decryptPassword: (encrypted: string) => Promise<string | undefined>;\n\n  setIsTrayIconEnabled: (value: boolean) => Promise<void>;\n  getIsTrayIconEnabled: () => Promise<boolean>;\n  setIsAutoUpdateEnabled: (value: boolean) => Promise<void>;\n  getIsAutoUpdateEnabled: () => Promise<boolean>;\n  changeAppLayout: (layout: AppLayout) => Promise<void>;\n\n  restoreStorage: () => Promise<void>;\n\n  on: (eventName: ElectronEvent, callback: any) => VoidFunction;\n}\n\ndeclare global {\n  interface Window {\n    electron?: ElectronApi;\n  }\n}\n","import { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { requestMeasure, requestMutation } from '../lib/fasterdom/fasterdom';\nimport { IS_ANDROID, IS_IOS } from './windowEnvironment';\nimport { onVirtualKeyboardOpen } from './windowSize';\n\nconst focusScroller = createFocusScroller();\n\nfunction isFocusable(element: Element): boolean {\n  const tagName = element.tagName.toLowerCase();\n  return tagName === 'input'\n    || tagName === 'textarea'\n    || tagName === 'select'\n    || element.hasAttribute('contenteditable');\n}\n\n/**\n * Implements a custom scroll behavior on input focus. Designed for Capacitor platforms only. Meets the following goals:\n * - Allow to customize where to scroll the focused element to (via the `data-focus-scroll-position` HTML attribute).\n * - Scroll to show the focused element if it's behind by the virtual keyboard at the moment when it opens.\n * - Scroll to the focused element smoothly whenever possible.\n *\n * Warning: this functions requires the @capacitor/keyboard plugin to be activated. It also relies on a\n * `scroll-behavior: smooth;` style set in scrollable elements to implement smooth scrolling depending on the animation\n * preferences.\n */\nexport function initFocusScrollController() {\n  if (IS_CAPACITOR) {\n    initForCapacitor();\n  } else if ((IS_IOS || IS_ANDROID) && window.visualViewport) {\n    initForVisualViewport();\n  }\n}\n\nfunction initForCapacitor() {\n  // `scrollToActiveElement` shouldn't be called in `keyboardWillShow` because the <body> size won't be patched yet, so\n  // if the focused input at the bottom of the scrollable element, it won't be scrolled to.\n  // `keyboardWillShow` could be used if the screen scroll height increased (instead of decreasing the <body> height).\n  // Note: on iOS `onVirtualKeyboardOpen` calls the callback on every focus (it doesn't affect the scroll behavior).\n  onVirtualKeyboardOpen(() => {\n    // The manual focus scroller is activated only when the virtual keyboard is open it order to avoid a scroll when the\n    // keyboard starts opening (it would scroll the 2nd time when the keyboard has opened).\n    // This has a side effect of keeping the natural scroll behavior when a hardware keyboard is used (it's ok).\n    focusScroller.install();\n    scrollToActiveElement();\n  });\n\n  void import('@capacitor/keyboard').then(({ Keyboard }) => {\n    void Keyboard.addListener('keyboardWillHide', focusScroller.uninstall);\n  });\n}\n\nfunction initForVisualViewport() {\n  const { visualViewport } = window;\n  let viewportHeight = visualViewport!.height;\n\n  function handleViewportResize() {\n    const newHeight = visualViewport!.height;\n    const activeElement = document.activeElement;\n\n    // If the viewport height has decreased (the keyboard has opened) and the active element is focusable,\n    // we activate the scroller and scroll to the element\n    if (newHeight < viewportHeight && activeElement && isFocusable(activeElement)) {\n      focusScroller.install();\n      scrollToActiveElement();\n    } else if (newHeight > viewportHeight) {\n      // If the viewport height has increased (the keyboard has closed), we deactivate the scroller\n      focusScroller.uninstall();\n    }\n\n    // The viewport height is updated for the next comparison\n    viewportHeight = newHeight;\n  }\n\n  // In the TMA application on iOS, the VisualViewport behaves incorrectly,\n  // not taking into account the height of the virtual keyboard. Therefore,\n  // the height compensation is performed first (see the `windowSize` file),\n  // and then the `handleViewportResize` processing should be executed.\n  function delayedViewportResizeHandler() {\n    requestMutation(() => {\n      requestMeasure(handleViewportResize);\n    });\n  }\n\n  visualViewport!.addEventListener(\n    'resize',\n    IS_IOS && IS_TELEGRAM_APP ? delayedViewportResizeHandler : handleViewportResize,\n  );\n}\n\nfunction createFocusScroller() {\n  let originalFocus: HTMLElement['focus'] | undefined;\n  let isProgrammaticFocus = false;\n\n  // Prevents native scroll for all `focus()` calls, because if the element is outside the viewport, `focus()` scrolls\n  // the screen instantly to place the element in the middle (we don't want that).\n  const patchedFocus: HTMLElement['focus'] = function focus(this: HTMLElement, options) {\n    isProgrammaticFocus = true;\n    // Does not work on Android, because it doesn't support `preventScroll`\n    originalFocus?.call(this, { ...options, preventScroll: true });\n  };\n\n  const handleFocus = () => {\n    // Because Android doesn't support `preventScroll`, we make the scroll instant to prevent excessive back-and-forth\n    // scrolls. Doing it only for programmatic `focus` calls allows to have smooth scrolling when the user focuses the\n    // input by tapping it while the keyboard is open.\n    scrollToActiveElement(IS_ANDROID && isProgrammaticFocus);\n    isProgrammaticFocus = false;\n  };\n\n  return {\n    install() {\n      if (originalFocus) {\n        return; // This branch is reached when the scroller is already installed\n      }\n\n      originalFocus = HTMLElement.prototype.focus;\n      HTMLElement.prototype.focus = patchedFocus;\n\n      window.addEventListener('focusin', handleFocus);\n    },\n    uninstall() {\n      if (!originalFocus) {\n        return; // This branch is reached when the scroller is already uninstalled\n      }\n\n      HTMLElement.prototype.focus = originalFocus;\n      originalFocus = undefined;\n\n      window.removeEventListener('focusin', handleFocus);\n    },\n  };\n}\n\nfunction scrollToActiveElement(enforceInstantScroll?: boolean) {\n  const scrollTarget = document.activeElement;\n  if (!scrollTarget) {\n    return;\n  }\n  const scrollPosition = scrollTarget.dataset.focusScrollPosition ?? 'nearest';\n  requestMeasure(() => {\n    scrollTarget.scrollIntoView({\n      block: scrollPosition,\n      behavior: enforceInstantScroll ? 'instant' : 'auto',\n    });\n  });\n}\n","import { ACTIVE_TAB_STORAGE_KEY, IS_TELEGRAM_APP } from '../config';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET, IS_ELECTRON, IS_LEDGER_EXTENSION_TAB,\n} from './windowEnvironment';\n\nconst IS_DISABLED = IS_LEDGER_EXTENSION_TAB || IS_DELEGATED_BOTTOM_SHEET || IS_ELECTRON || IS_TELEGRAM_APP;\n\nconst INTERVAL = 2000;\n\nconst tabKey = String(Date.now() + Math.random());\n\nif (!IS_DISABLED) {\n  localStorage.setItem(ACTIVE_TAB_STORAGE_KEY, tabKey);\n}\n\nlet callback: NoneToVoidFunction;\n\nconst interval = window.setInterval(() => {\n  if (!IS_DISABLED && callback && localStorage.getItem(ACTIVE_TAB_STORAGE_KEY) !== tabKey) {\n    callback();\n    clearInterval(interval);\n  }\n}, INTERVAL);\n\nexport function setActiveTabChangeListener(_callback: NoneToVoidFunction) {\n  callback = _callback;\n}\n","import { registerPlugin } from '@capacitor/core';\nconst Filesystem = registerPlugin('Filesystem', {\n    web: () => import('./web').then(m => new m.FilesystemWeb()),\n});\nexport * from './definitions';\nexport { Filesystem };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst Share = registerPlugin('Share', {\n    web: () => import('./web').then(m => new m.ShareWeb()),\n});\nexport * from './definitions';\nexport { Share };\n//# sourceMappingURL=index.js.map","// The file is about sending data using the OS social sharing UI\n\nimport { Directory, Encoding, Filesystem } from '@capacitor/filesystem';\nimport type { ShareOptions } from '@capacitor/share';\nimport { Share } from '@capacitor/share';\nimport { getActions } from '../global';\n\nimport { IS_CAPACITOR } from '../config';\nimport { copyTextToClipboard } from './clipboard';\nimport { getTranslation } from './langProvider';\nimport { IS_IOS, IS_TOUCH_ENV } from './windowEnvironment';\n\nexport async function shareUrl(url: string, title?: string) {\n  const shareData = { url, title };\n\n  if (await tryCapacitorShare(shareData) || await tryNavigatorShare(shareData)) {\n    return;\n  }\n\n  await copyTextToClipboard(url);\n  getActions().showNotification({\n    message: getTranslation('Link was copied!'),\n    icon: 'icon-link',\n  });\n}\n\nexport async function shareFile(name: string, content: string, mimeType: string) {\n  if (IS_CAPACITOR) {\n    const fileLocation = {\n      path: name,\n      directory: Directory.Cache,\n    };\n    const file = await Filesystem.writeFile({\n      ...fileLocation,\n      data: content,\n      encoding: Encoding.UTF8,\n    });\n\n    try {\n      if (await tryCapacitorShare({ url: file.uri })) {\n        return;\n      }\n    } finally {\n      void Filesystem.deleteFile(fileLocation);\n    }\n  }\n\n  const file = new File([content], name, { type: mimeType });\n  if (await tryNavigatorShare({ files: [file] })) {\n    return;\n  }\n\n  const url = URL.createObjectURL(file);\n\n  try {\n    if (IS_IOS) {\n      window.open(url, '_blank', 'noreferrer');\n    } else {\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = name;\n      link.click();\n    }\n  } finally {\n    URL.revokeObjectURL(url);\n  }\n}\n\n/**\n * Returns `true` if the sharing is successful. Returns `false` if the sharing is unsuccessful and another sharing\n * method should be tried. Throws in case of an unexpected error.\n */\nasync function tryCapacitorShare(data: ShareOptions) {\n  if (!IS_CAPACITOR) {\n    return false;\n  }\n\n  try {\n    await Share.share(data);\n    return true;\n  } catch (error) {\n    // Occurs when the user closes the sharing UI without choosing a sharing destination\n    if (error instanceof Error && error.message === 'Share canceled') {\n      return true;\n    }\n\n    // Sometimes on iOS a false \"Can't share while sharing is in progress\" error is thrown\n    if (error instanceof Error && error.message === 'Can\\'t share while sharing is in progress') {\n      return false;\n    }\n\n    throw error;\n  }\n}\n\n/**\n * Returns `true` if the sharing is successful. Returns `false` if the sharing is unsuccessful and another sharing\n * method should be tried. Throws in case of an unexpected error.\n */\nasync function tryNavigatorShare(data: ShareData) {\n  if (!IS_TOUCH_ENV || !navigator.share) {\n    return false;\n  }\n\n  try {\n    await navigator.share(data);\n    return true;\n  } catch (error) {\n    // Occurs when the user closes the sharing UI without choosing a sharing destination\n    if (error instanceof Error && error.name === 'AbortError') {\n      return true;\n    }\n\n    // Occurs when the sharing API is called not in response to a user gesture\n    if (error instanceof Error && error.name === 'NotAllowedError') {\n      return false;\n    }\n\n    throw error;\n  }\n}\n","import usePrevious from './usePrevious';\n\nexport default function useCurrentOrPrev<T>(\n  current: T, shouldSkipUndefined = false, shouldForceCurrent = false,\n): T | undefined {\n  const prev = usePrevious(current, shouldSkipUndefined);\n\n  // eslint-disable-next-line no-null/no-null\n  return shouldForceCurrent || (current !== null && current !== undefined) ? current : prev;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"zVKWQb4E\",\"item\":\"p6wqAx5G\",\"wide\":\"r6y8uqO8\",\"interactive\":\"Q9ntFVQX\",\"label\":\"D1GD_LrJ\",\"light\":\"soVchDDr\",\"inherit\":\"wFCZ8RVE\",\"disabled\":\"pvIBCUiV\",\"dangerous\":\"pGdKfZ0g\",\"buttonIcon\":\"N6o0srlb\",\"item_selected\":\"RsC78CT6\",\"itemSelected\":\"RsC78CT6\",\"item_with_icon\":\"U_181tTH\",\"itemWithIcon\":\"U_181tTH\",\"itemIcon\":\"Y6vHSLLj\",\"itemMainIcon\":\"j8oqwmMI\",\"itemOverlayIcon\":\"Kyq0Mbfk\",\"fontIcon\":\"YG4KjBia\",\"itemName\":\"Mj3kpKk7\",\"itemDescription\":\"SGTt7OqT\",\"delimiter\":\"MtXTN7mi\",\"delimiterAfter\":\"K5zqNd8W\",\"dropdownButtonWrapper\":\"M88J3eDx\",\"spinner\":\"O6oZGmyS\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { DropdownItem } from './Dropdown';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Dropdown.module.scss';\n\ninterface OwnProps<T extends string> {\n  item: DropdownItem<T>;\n  shouldUseSelectedName?: boolean;\n  shouldTranslate?: boolean;\n  prefix?: TeactNode;\n  suffix?: TeactNode;\n  className?: string;\n  iconClassName?: string;\n  iconOverlayClassName?: string;\n  fontIconClassName?: string;\n  itemClassName?: string;\n  itemDescriptionClassName?: string;\n  onClick?(event: React.MouseEvent<HTMLButtonElement, MouseEvent>, value: T): void;\n}\n\nfunction DropdownItemContent<T extends string>({\n  item,\n  shouldUseSelectedName,\n  shouldTranslate,\n  prefix,\n  suffix,\n  className,\n  iconClassName,\n  iconOverlayClassName,\n  fontIconClassName,\n  itemClassName,\n  itemDescriptionClassName,\n  onClick,\n}: OwnProps<T>) {\n  const lang = useLang();\n  const displayedName = shouldUseSelectedName ? (item.selectedName ?? item.name) : item.name;\n\n  const fullClassName = buildClassName(\n    item.isDisabled && styles.disabled,\n    item.isDangerous && styles.dangerous,\n    className,\n  );\n\n  return (\n    <button\n      type=\"button\"\n      className={fullClassName}\n      disabled={item.isDisabled}\n      onClick={onClick && ((e) => onClick(e, item.value))}\n    >\n      {prefix}\n      {item.icon && (\n        <span className={buildClassName('icon', styles.itemIcon, iconClassName)}>\n          <img src={item.icon} alt=\"\" className={styles.itemMainIcon} />\n          {item.overlayIcon && (\n            <img\n              src={item.overlayIcon}\n              alt=\"\"\n              className={buildClassName('icon', styles.itemOverlayIcon, iconOverlayClassName)}\n            />\n          )}\n        </span>\n      )}\n      {item.fontIcon && (\n        <i\n          className={buildClassName(`icon icon-${item.fontIcon}`, styles.fontIcon, fontIconClassName)}\n          aria-hidden\n        />\n      )}\n      <span className={buildClassName(styles.itemName, itemClassName)}>\n        {shouldTranslate ? lang(displayedName) : displayedName}\n        {!!item.description && (\n          <span className={buildClassName(styles.itemDescription, itemDescriptionClassName)}>\n            {shouldTranslate && typeof item.description === 'string'\n              ? lang(item.description)\n              : item.description}\n          </span>\n        )}\n      </span>\n      {suffix}\n    </button>\n  );\n}\n\nexport default memo(DropdownItemContent);\n","import captureKeyboardListener from './captureKeyboardListeners';\n\nexport default function captureEscKeyListener(handler: NoneToVoidFunction) {\n  return captureKeyboardListener({\n    onEsc: () => {\n      handler();\n    },\n  });\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"VydD7Rve\",\"inPortal\":\"vcuzKHhA\",\"bubble\":\"mY0hTIiL\",\"top\":\"FsyRNnQH\",\"bottom\":\"tkKrx8OR\",\"left\":\"MvEERemq\",\"right\":\"y6xJQNRF\",\"backdrop\":\"gc2eH8vQ\",\"menu\":\"gtd29jbF\",\"suggestion\":\"BYQgxGEv\",\"dropdown\":\"IxGdkmhI\"};","import { type ElementRef, useLayoutEffect } from '../lib/teact/teact';\nimport { addExtraClass, removeExtraClass, setExtraStyles } from '../lib/teact/teact-dom';\n\nimport type { IAnchorPosition } from '../types';\n\nimport { requestForcedReflow } from '../lib/fasterdom/fasterdom';\nimport { clamp } from '../util/math';\nimport windowSize from '../util/windowSize';\nimport { useStateRef } from './useStateRef';\n\nimport styles from '../components/ui/Menu.module.scss';\n\ninterface Coordinates {\n  x: number;\n  y: number;\n}\n\ninterface Bounds {\n  width: number;\n  height: number;\n  left: number;\n  top: number;\n  right: number;\n  bottom: number;\n}\n\ninterface MenuDimensions {\n  width: number;\n  height: number;\n  marginTop: number;\n}\n\ninterface GatherBoundsParams {\n  getTriggerElement?: () => (HTMLElement | null | undefined);\n  getRootElement: () => (HTMLElement | null | undefined);\n  getMenuElement: () => (HTMLElement | null | undefined);\n  layout: Layout;\n  anchor: IAnchorPosition;\n}\n\ninterface PositionResult {\n  positionX: 'left' | 'right';\n  positionY: 'top' | 'bottom';\n  coordinates: Coordinates;\n  transformOrigin: Coordinates;\n}\n\ninterface StaticPositionOptions {\n  anchor?: IAnchorPosition;\n  positionX?: 'left' | 'right';\n  positionY?: 'top' | 'bottom';\n  transformOriginX?: number;\n  transformOriginY?: number;\n  style?: string;\n  bubbleStyle?: string;\n}\n\ninterface DynamicPositionOptions {\n  anchor: IAnchorPosition;\n  getTriggerElement?: () => HTMLElement | undefined | null;\n  getRootElement: () => HTMLElement | undefined | null;\n  getMenuElement: () => HTMLElement | undefined | null;\n  getLayout?: () => Layout;\n  withMaxHeight?: boolean;\n}\n\nexport type MenuPositionOptions = StaticPositionOptions | DynamicPositionOptions;\n\nexport interface Layout {\n  extraPaddingX?: number;\n  extraTopPadding?: number;\n  extraMarginTop?: number;\n  menuElMinWidth?: number;\n  doNotCoverTrigger?: boolean;\n  centerHorizontally?: boolean;\n  deltaX?: number;\n  topShiftY?: number;\n  shouldAvoidNegativePosition?: boolean;\n  withPortal?: boolean;\n  isDense?: boolean; //  Allows you to place the menu as close to the edges of the area as possible\n  preferredPositionX?: 'left' | 'right';\n  preferredPositionY?: 'top' | 'bottom';\n}\n\nconst POSITIONING = {\n  VISUAL_COMFORT_SPACE: 16,\n  BOTTOM_MARGIN: 12,\n  HORIZONTAL_OFFSET: 3,\n  FALLBACK_X: 16,\n  TRIGGER_OFFSET: 6,\n} as const;\n\nconst EMPTY_RECT = {\n  width: 0, left: 0, height: 0, top: 0, right: 0, bottom: 0,\n};\n\nexport default function useMenuPosition(\n  isOpen: boolean,\n  containerRef: ElementRef<HTMLDivElement>,\n  bubbleRef: ElementRef<HTMLDivElement>,\n  options: MenuPositionOptions,\n) {\n  const optionsRef = useStateRef(options);\n\n  useLayoutEffect(() => {\n    if (!isOpen) return;\n\n    const options2 = optionsRef.current;\n\n    if (isDynamicPositionOptions(options2)) {\n      requestForcedReflow(() => {\n        const staticOptions = processDynamically(options2);\n\n        return () => {\n          applyStaticOptions(containerRef, bubbleRef, staticOptions);\n        };\n      });\n    } else {\n      applyStaticOptions(containerRef, bubbleRef, options2);\n    }\n  }, [isOpen, containerRef, bubbleRef, optionsRef]);\n}\n\nfunction applyStaticOptions(\n  containerRef: ElementRef<HTMLDivElement>,\n  bubbleRef: ElementRef<HTMLDivElement>,\n  {\n    anchor,\n    positionX = 'left',\n    positionY = 'top',\n    transformOriginX,\n    transformOriginY,\n    style,\n    bubbleStyle,\n  }: StaticPositionOptions,\n) {\n  const containerEl = containerRef.current!;\n  const bubbleEl = bubbleRef.current!;\n\n  let finalStyle = style;\n  if (anchor && !style) {\n    finalStyle = `left: ${anchor.x}px; top: ${anchor.y}px`;\n  }\n\n  if (finalStyle) {\n    containerEl.style.cssText = finalStyle;\n  }\n\n  if (bubbleStyle) {\n    bubbleEl.style.cssText = bubbleStyle;\n  }\n\n  if (positionX) {\n    removeExtraClass(bubbleEl, styles.left);\n    removeExtraClass(bubbleEl, styles.right);\n    addExtraClass(bubbleEl, styles[positionX]);\n  }\n\n  if (positionY) {\n    removeExtraClass(bubbleEl, styles.top);\n    removeExtraClass(bubbleEl, styles.bottom);\n    addExtraClass(bubbleEl, styles[positionY]);\n  }\n\n  setExtraStyles(bubbleEl, {\n    transformOrigin: [\n      transformOriginX ? `${transformOriginX}px` : positionX,\n      transformOriginY ? `${transformOriginY}px` : positionY,\n    ].join(' '),\n  });\n}\n\nfunction gatherBounds({\n  getTriggerElement,\n  getRootElement,\n  getMenuElement,\n  layout,\n  anchor,\n}: GatherBoundsParams): {\n    triggerRect: DOMRect;\n    rootRect: Bounds;\n    menuDimensions: MenuDimensions;\n  } {\n  const triggerEl = getTriggerElement?.();\n  const rootEl = getRootElement();\n  const menuEl = getMenuElement();\n\n  const { extraMarginTop = 0, menuElMinWidth = 0 } = layout;\n\n  const triggerRect = triggerEl\n    ? triggerEl.getBoundingClientRect()\n    : { ...EMPTY_RECT, left: anchor.x, top: anchor.y, right: anchor.x, bottom: anchor.y } as DOMRect;\n  const rootRect = rootEl ? rootEl.getBoundingClientRect() : EMPTY_RECT;\n\n  rootRect.height -= windowSize.get().safeAreaBottom;\n\n  let menuDimensions: MenuDimensions;\n  if (menuEl) {\n    const marginTop = parseInt(getComputedStyle(menuEl).marginTop, 10) + extraMarginTop;\n    const { offsetWidth, offsetHeight } = menuEl;\n    menuDimensions = {\n      width: Math.max(offsetWidth, menuElMinWidth),\n      height: offsetHeight + marginTop,\n      marginTop,\n    };\n  } else {\n    menuDimensions = { width: 0, height: 0, marginTop: 0 };\n  }\n\n  return { triggerRect, rootRect, menuDimensions };\n}\n\nfunction determineHorizontalPosition(\n  anchor: Coordinates,\n  rootRect: Bounds,\n  menuWidth: number,\n  deltaX: number,\n  preferredPositionX: 'left' | 'right' = 'right',\n): { positionX: 'left' | 'right'; x: number } {\n  let x = anchor.x;\n  let positionX: 'left' | 'right';\n\n  if (preferredPositionX === 'right') {\n    // Prefer left-leaning (opening leftward): try 'right' position first\n    if (x - menuWidth >= rootRect.left + POSITIONING.VISUAL_COMFORT_SPACE) {\n      positionX = 'right';\n      x -= POSITIONING.HORIZONTAL_OFFSET;\n    } else {\n      // Fall back to right-leaning (opening rightward)\n      positionX = 'left';\n      x += POSITIONING.HORIZONTAL_OFFSET;\n    }\n  } else {\n    // Prefer right-leaning (opening rightward): try 'left' position first\n    if (x + menuWidth <= rootRect.right - POSITIONING.VISUAL_COMFORT_SPACE) {\n      positionX = 'left';\n      x += POSITIONING.HORIZONTAL_OFFSET;\n    } else {\n      // Fall back to left-leaning (opening leftward)\n      positionX = 'right';\n      x -= POSITIONING.HORIZONTAL_OFFSET;\n    }\n  }\n\n  x += deltaX;\n\n  return { positionX, x };\n}\n\nfunction determineVerticalPosition(\n  anchor: Coordinates,\n  triggerRect: DOMRect,\n  rootRect: Bounds,\n  menuHeight: number,\n  layout: Layout,\n): { positionY: 'top' | 'bottom'; y: number } {\n  const {\n    topShiftY = 0,\n    extraTopPadding = 0,\n    isDense = false,\n    doNotCoverTrigger = false,\n    preferredPositionY,\n  } = layout;\n  let y = anchor.y;\n  let positionY: 'top' | 'bottom';\n\n  // For `doNotCoverTrigger` we use the position relative to the trigger\n  if (doNotCoverTrigger) {\n    const hasSpaceBelow = triggerRect.bottom + POSITIONING.TRIGGER_OFFSET + menuHeight <= rootRect.bottom;\n    const hasSpaceAbove = triggerRect.top - POSITIONING.TRIGGER_OFFSET - menuHeight >= rootRect.top;\n\n    if (hasSpaceBelow && preferredPositionY !== 'bottom') {\n      positionY = 'top';\n      y = triggerRect.bottom + POSITIONING.TRIGGER_OFFSET;\n    } else if (hasSpaceAbove) {\n      positionY = 'bottom';\n      y = triggerRect.top - POSITIONING.TRIGGER_OFFSET;\n    } else {\n      // If there is no room at the top or bottom, we use standard logic\n      positionY = 'bottom';\n      y = rootRect.top + rootRect.height;\n    }\n  } else {\n    const yWithTopShift = y + topShiftY;\n    const hasSpaceBelow = yWithTopShift + triggerRect.height + menuHeight < rootRect.height + rootRect.top;\n    const hasSpaceAbove = y - triggerRect.height - menuHeight >= rootRect.top + extraTopPadding;\n\n    if ((preferredPositionY === 'bottom' && hasSpaceAbove) || (!isDense && !hasSpaceBelow)) {\n      positionY = 'bottom';\n      if (!hasSpaceAbove) {\n        y = rootRect.top + rootRect.height;\n      }\n    } else {\n      positionY = 'top';\n      y = yWithTopShift;\n    }\n  }\n\n  return { positionY, y };\n}\n\nfunction applyBoundaryConstraints(\n  coordinates: Coordinates,\n  positionX: 'left' | 'right',\n  triggerRect: DOMRect,\n  rootRect: Bounds,\n  menuDimensions: MenuDimensions,\n  layout: Layout,\n): Coordinates {\n  const {\n    shouldAvoidNegativePosition = false,\n    withPortal = false,\n    isDense = false,\n    menuElMinWidth = 0,\n    centerHorizontally = false,\n  } = layout;\n\n  let { x, y } = coordinates;\n\n  // Centering the menu with respect to the trigger\n  if (centerHorizontally) {\n    x = triggerRect.left + (triggerRect.width - menuDimensions.width) / 2;\n\n    // Check that the menu does not extend beyond the edges of the screen\n    x = clamp(\n      x,\n      rootRect.left + POSITIONING.VISUAL_COMFORT_SPACE,\n      rootRect.right - menuDimensions.width - POSITIONING.VISUAL_COMFORT_SPACE,\n    );\n\n    if (!withPortal) {\n      y -= triggerRect.top;\n    }\n  } else {\n    // Calculate relative position to trigger\n    const leftWithPossibleNegative = Math.min(\n      x - triggerRect.left,\n      rootRect.width - menuDimensions.width - POSITIONING.VISUAL_COMFORT_SPACE,\n    );\n\n    // Apply horizontal constraints\n    if (positionX === 'left') {\n      if (withPortal || shouldAvoidNegativePosition) {\n        x = Math.max(POSITIONING.VISUAL_COMFORT_SPACE, leftWithPossibleNegative);\n      } else {\n        x = leftWithPossibleNegative;\n      }\n    } else {\n      x -= triggerRect.left;\n    }\n\n    // Apply portal positioning\n    if (withPortal) {\n      x += triggerRect.left;\n      // For portal, Y coordinate should remain unchanged (already in viewport coordinates)\n      // y stays as is\n    } else {\n      // For non-portal, convert from anchor coordinates to relative coordinates\n      y -= triggerRect.top;\n    }\n  }\n\n  // Apply dense mode constraints\n  if (isDense) {\n    x = Math.min(x, rootRect.width - menuDimensions.width - POSITIONING.VISUAL_COMFORT_SPACE);\n    y = Math.min(y, rootRect.height - menuDimensions.height - POSITIONING.VISUAL_COMFORT_SPACE);\n  }\n\n  // Handle portal edge constraints\n  if (withPortal && !centerHorizontally) {\n    if (positionX === 'left') {\n      x = Math.min(x, rootRect.width - menuDimensions.width - POSITIONING.VISUAL_COMFORT_SPACE);\n    } else {\n      x = Math.max(x, POSITIONING.VISUAL_COMFORT_SPACE + menuDimensions.width);\n    }\n  }\n\n  // Handle minimum width adjustments\n  const addedXForMenuPositioning = menuElMinWidth ? Math.max(0,\n    (menuElMinWidth - (menuDimensions.width - menuElMinWidth)) / 2) : 0;\n  if (x - addedXForMenuPositioning < 0 && shouldAvoidNegativePosition) {\n    x = addedXForMenuPositioning + POSITIONING.VISUAL_COMFORT_SPACE;\n  }\n\n  return { x, y };\n}\n\nfunction calculateTransformOrigin(\n  anchor: Coordinates,\n  finalCoordinates: Coordinates,\n  positionResult: Pick<PositionResult, 'positionX' | 'positionY'>,\n  triggerRect: DOMRect,\n  menuDimensions: MenuDimensions,\n  withPortal: boolean,\n): Coordinates {\n  const portalOffset = withPortal ? { x: triggerRect.left, y: triggerRect.top } : { x: 0, y: 0 };\n\n  const offsetX = (anchor.x + portalOffset.x - triggerRect.left) - finalCoordinates.x;\n  const offsetY = (anchor.y + portalOffset.y - triggerRect.top) - finalCoordinates.y - menuDimensions.marginTop;\n\n  const transformOriginX = positionResult.positionX === 'left'\n    ? offsetX\n    : menuDimensions.width + offsetX;\n\n  const transformOriginY = positionResult.positionY === 'bottom'\n    ? menuDimensions.height + offsetY\n    : offsetY;\n\n  return { x: transformOriginX, y: transformOriginY };\n}\n\nfunction processDynamically(\n  {\n    anchor,\n    getRootElement,\n    getMenuElement,\n    getTriggerElement,\n    getLayout,\n    withMaxHeight,\n  }: DynamicPositionOptions,\n) {\n  const layout = getLayout?.() || {};\n\n  const { triggerRect, rootRect, menuDimensions } = gatherBounds({\n    getTriggerElement,\n    getRootElement,\n    getMenuElement,\n    layout,\n    anchor,\n  });\n\n  const { positionX, x } = determineHorizontalPosition(\n    anchor,\n    rootRect,\n    menuDimensions.width,\n    layout.deltaX || 0,\n    layout.preferredPositionX,\n  );\n\n  const { positionY, y } = determineVerticalPosition(\n    anchor,\n    triggerRect,\n    rootRect,\n    menuDimensions.height,\n    layout,\n  );\n\n  const finalCoordinates = applyBoundaryConstraints(\n    { x, y },\n    positionX,\n    triggerRect,\n    rootRect,\n    menuDimensions,\n    layout,\n  );\n\n  const transformOrigin = calculateTransformOrigin(\n    anchor,\n    finalCoordinates,\n    { positionX, positionY },\n    triggerRect,\n    menuDimensions,\n    layout.withPortal || false,\n  );\n\n  const style = `left: ${finalCoordinates.x}px; top: ${finalCoordinates.y}px; --menu-width: ${menuDimensions.width}px;`;\n\n  let bubbleStyle;\n  if (withMaxHeight) {\n    const menuMaxHeight = rootRect.height - POSITIONING.BOTTOM_MARGIN - menuDimensions.marginTop;\n    bubbleStyle = `max-height: ${menuMaxHeight}px;`;\n  }\n\n  return {\n    positionX,\n    positionY,\n    transformOriginX: transformOrigin.x,\n    transformOriginY: transformOrigin.y,\n    style,\n    bubbleStyle,\n  };\n}\n\nfunction isDynamicPositionOptions(options: MenuPositionOptions): options is DynamicPositionOptions {\n  return 'getRootElement' in options;\n}\n","import type { ElementRef, FC, TeactNode } from '../../lib/teact/teact';\nimport React, { beginHeavyAnimation, useEffect, useRef } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { stopEvent } from '../../util/domEvents';\n\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useMenuPosition, { type MenuPositionOptions } from '../../hooks/useMenuPosition';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useVirtualBackdrop from '../../hooks/useVirtualBackdrop';\n\nimport Portal from './Portal';\n\nimport styles from './Menu.module.scss';\n\nexport type { MenuPositionOptions } from '../../hooks/useMenuPosition';\n\ntype OwnProps = {\n  children: TeactNode;\n  menuRef?: ElementRef<HTMLDivElement>;\n  isOpen: boolean;\n  id?: string;\n  className?: string;\n  bubbleClassName?: string;\n  type?: 'menu' | 'suggestion' | 'dropdown';\n  autoClose?: boolean;\n  shouldSkipTransition?: boolean;\n  noBackdrop?: boolean;\n  withPortal?: boolean;\n  noCloseOnBackdrop?: boolean;\n  shouldCleanup?: boolean;\n  onCloseAnimationEnd?: NoneToVoidFunction;\n  onClose?: NoneToVoidFunction;\n  onMouseEnter?: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n  onMouseLeave?: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n} & MenuPositionOptions;\n\nexport const ANIMATION_DURATION = 200;\n\nconst Menu: FC<OwnProps> = ({\n  children,\n  isOpen,\n  id,\n  menuRef,\n  className,\n  bubbleClassName,\n  type = 'menu',\n  autoClose = false,\n  shouldSkipTransition,\n  noBackdrop = false,\n  withPortal,\n  noCloseOnBackdrop = false,\n  shouldCleanup,\n  onCloseAnimationEnd,\n  onClose,\n  onMouseEnter,\n  onMouseLeave,\n  ...positionOptions\n}) => {\n  const containerRef = useRef<HTMLDivElement>();\n  let bubbleRef = useRef<HTMLDivElement>();\n  if (menuRef) {\n    bubbleRef = menuRef;\n  }\n\n  useMenuPosition(isOpen, containerRef, bubbleRef, positionOptions);\n\n  useHistoryBack({\n    isActive: Boolean(isOpen && onClose),\n    onBack: onClose!,\n    shouldBeReplaced: true,\n  });\n\n  const {\n    shouldRender,\n  } = useShowTransition({\n    isOpen,\n    ref: bubbleRef,\n    onCloseAnimationEnd,\n    noMountTransition: shouldSkipTransition,\n    noCloseTransition: shouldSkipTransition,\n    withShouldRender: true,\n  });\n\n  useEffect(\n    () => (isOpen && onClose ? captureEscKeyListener(onClose) : undefined),\n    [isOpen, onClose],\n  );\n\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    if (isOpen || (!isOpen && prevIsOpen === true)) {\n      beginHeavyAnimation(ANIMATION_DURATION);\n    }\n  }, [isOpen]);\n\n  useVirtualBackdrop(isOpen && !noBackdrop, containerRef, noCloseOnBackdrop ? undefined : onClose);\n\n  const fullBubbleClassName = buildClassName(\n    styles.bubble,\n    bubbleClassName,\n    'menu-bubble',\n    styles[type],\n  );\n\n  if (shouldCleanup && !shouldRender) {\n    return undefined;\n  }\n\n  const menu = (\n    <div\n      ref={containerRef}\n      id={id}\n      className={buildClassName(styles.wrapper, className, withPortal && styles.inPortal)}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={isOpen ? onMouseLeave : undefined}\n    >\n      {isOpen && !noBackdrop && (\n        // This only prevents click events triggering on underlying elements\n        <div className={styles.backdrop} onClick={stopEvent} />\n      )}\n      <div\n        ref={bubbleRef}\n        className={fullBubbleClassName}\n        onClick={autoClose ? onClose : undefined}\n      >\n        {children}\n      </div>\n    </div>\n  );\n\n  if (withPortal) {\n    return <Portal>{menu}</Portal>;\n  }\n\n  return menu;\n};\n\nexport default Menu;\n","import type { ElementRef } from '../lib/teact/teact';\nimport { useEffect } from '../lib/teact/teact';\n\nimport styles from '../components/ui/Menu.module.scss';\n\n// This effect implements closing menus by clicking outside of them\n// without adding extra elements to the DOM\nexport default function useVirtualBackdrop(\n  isOpen: boolean,\n  menuRef: ElementRef<HTMLDivElement>,\n  onClose?: () => void | undefined,\n) {\n  useEffect(() => {\n    const handleEvent = (e: Event) => {\n      const menu = menuRef.current;\n      const target = e.target as HTMLElement | null;\n      if (!menu || !target) {\n        return;\n      }\n\n      if (\n        !menu.contains(e.target as Node | null)\n        || target.classList.contains(styles.backdrop)\n      ) {\n        e.preventDefault();\n        e.stopPropagation();\n        if (onClose) {\n          onClose();\n        }\n      }\n    };\n\n    if (isOpen && onClose) {\n      document.addEventListener('mousedown', handleEvent);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleEvent);\n    };\n  }, [isOpen, menuRef, onClose]);\n}\n","import React, { type ElementRef, memo, useRef } from '../../lib/teact/teact';\n\nimport type { IAnchorPosition } from '../../global/types';\nimport type { DropdownItem } from './Dropdown';\nimport type { MenuPositionOptions } from './Menu';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport DropdownItemContent from './DropdownItemContent';\nimport Menu from './Menu';\n\nimport styles from './Dropdown.module.scss';\n\ninterface OwnProps<T extends string> {\n  isOpen: boolean;\n  ref?: ElementRef<HTMLDivElement>;\n  selectedValue?: T;\n  items: DropdownItem<T>[];\n  withPortal?: boolean;\n  menuAnchor?: IAnchorPosition;\n  menuPositionY?: 'top' | 'bottom';\n  menuPositionX?: 'right' | 'left';\n  shouldTranslateOptions?: boolean;\n  className?: string;\n  bubbleClassName?: string;\n  buttonClassName?: string;\n  iconClassName?: string;\n  fontIconClassName?: string;\n  itemDescriptionClassName?: string;\n  shouldCleanup?: boolean;\n  onSelect?: (value: T, e?: React.MouseEvent) => void;\n  onClose: NoneToVoidFunction;\n  getTriggerElement?: () => HTMLElement | undefined | null;\n  getRootElement?: () => HTMLElement | undefined | null;\n  getMenuElement?: () => HTMLElement | undefined | null;\n  getLayout?: () => { withPortal?: boolean };\n  onCloseAnimationEnd?: NoneToVoidFunction;\n}\n\nfunction DropdownMenu<T extends string>({\n  isOpen,\n  ref,\n  selectedValue,\n  items,\n  withPortal,\n  menuAnchor,\n  menuPositionX,\n  menuPositionY,\n  shouldTranslateOptions,\n  className,\n  bubbleClassName,\n  buttonClassName,\n  iconClassName,\n  fontIconClassName,\n  itemDescriptionClassName,\n  shouldCleanup,\n  onSelect,\n  onClose,\n  getTriggerElement,\n  getRootElement,\n  getMenuElement,\n  getLayout,\n  onCloseAnimationEnd,\n}: OwnProps<T>) {\n  let menuRef = useRef<HTMLDivElement>();\n  if (ref) {\n    menuRef = ref;\n  }\n\n  // Create position options\n  const menuPositionOptions: MenuPositionOptions = menuAnchor && getTriggerElement && getRootElement && getMenuElement\n    ? {\n      anchor: menuAnchor,\n      getTriggerElement,\n      getRootElement,\n      getMenuElement,\n      getLayout,\n    }\n    : menuAnchor && getRootElement && getMenuElement\n      ? {\n        anchor: menuAnchor,\n        getRootElement,\n        getMenuElement,\n        getLayout,\n        positionX: menuPositionX,\n        positionY: menuPositionY,\n      }\n      : {\n        anchor: menuAnchor,\n        positionX: menuPositionX,\n        positionY: menuPositionY,\n      };\n\n  const handleItemClick = useLastCallback((e: React.MouseEvent, value: T) => {\n    e.stopPropagation();\n    onSelect?.(value, e);\n    onClose();\n  });\n\n  return (\n    <Menu\n      menuRef={menuRef}\n      isOpen={isOpen}\n      type=\"dropdown\"\n      withPortal={withPortal}\n      className={className}\n      bubbleClassName={bubbleClassName}\n      shouldCleanup={shouldCleanup}\n      onClose={onClose}\n      onCloseAnimationEnd={onCloseAnimationEnd}\n      {...menuPositionOptions}\n    >\n      {items.map((item, index) => {\n        const fullButtonClassName = buildClassName(\n          styles.item,\n          (item.icon || item.fontIcon) && styles.item_with_icon,\n          item.withDelimiter && index > 0 && styles.delimiter,\n          item.withDelimiterAfter && styles.delimiterAfter,\n          selectedValue === item.value && styles.item_selected,\n          buttonClassName,\n          'capture-scroll',\n        );\n        return (\n          <DropdownItemContent\n            key={item.value}\n            item={item}\n            shouldTranslate={shouldTranslateOptions}\n            className={fullButtonClassName}\n            iconClassName={iconClassName}\n            fontIconClassName={fontIconClassName}\n            itemClassName=\"menuItemName\"\n            itemDescriptionClassName={itemDescriptionClassName}\n            onClick={handleItemClick}\n          />\n        );\n      })}\n    </Menu>\n  );\n}\n\nexport default memo(DropdownMenu);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useRef, useState } from '../../lib/teact/teact';\n\nimport type { IAnchorPosition } from '../../global/types';\nimport type { DropdownItem } from './Dropdown';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from './Button';\nimport DropdownMenu from './DropdownMenu';\n\nimport modalStyles from './Modal.module.scss';\n\ntype OwnProps<T extends string> = {\n  title?: string | TeactNode;\n  className?: string;\n  withNotch?: boolean;\n  closeClassName?: string;\n  menuItems?: DropdownItem<T>[];\n  onClose?: NoneToVoidFunction;\n  onBackButtonClick?: () => void;\n  onMenuItemClick?: (value: T) => void;\n};\n\nfunction ModalHeader<T extends string>({\n  title, className, withNotch, closeClassName, menuItems, onClose, onBackButtonClick, onMenuItemClick,\n}: OwnProps<T>) {\n  const lang = useLang();\n\n  const menuRef = useRef<HTMLDivElement>();\n  const menuButtonRef = useRef<HTMLButtonElement>();\n  const [menuAnchor, setMenuAnchor] = useState<IAnchorPosition | undefined>();\n\n  const hasMenu = Boolean(menuItems?.length);\n  const isMenuOpen = Boolean(menuAnchor);\n\n  const getTriggerElement = useLastCallback(() => menuButtonRef.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback(() => ({ withPortal: true }));\n  const closeMenu = useLastCallback(() => setMenuAnchor(undefined));\n\n  const handleMenuButtonClick = useLastCallback(() => {\n    if (isMenuOpen) {\n      closeMenu();\n    } else {\n      const { right: x, y, height } = menuButtonRef.current!.getBoundingClientRect();\n      setMenuAnchor({ x, y: y + height });\n    }\n  });\n\n  return (\n    <div\n      className={buildClassName(\n        modalStyles.header,\n        'with-notch-on-scroll',\n        withNotch && 'is-scrolled',\n        !onBackButtonClick && modalStyles.header_wideContent,\n        className,\n        isMenuOpen && 'is-menu-open',\n      )}\n    >\n      {onBackButtonClick && (\n        <Button isSimple isText onClick={onBackButtonClick} className={modalStyles.header_back}>\n          <i className={buildClassName(modalStyles.header_backIcon, 'icon-chevron-left')} aria-hidden />\n          <span>{lang('Back')}</span>\n        </Button>\n      )}\n      {title !== undefined && <div className={buildClassName(modalStyles.title, modalStyles.singleTitle)}>{title}</div>}\n      {hasMenu && (\n        <Button\n          ref={menuButtonRef}\n          isSimple\n          className={buildClassName(modalStyles.menuButton, closeClassName)}\n          ariaLabel={lang('Menu')}\n          onClick={handleMenuButtonClick}\n        >\n          <i className={buildClassName(modalStyles.menuIcon, 'icon-menu-dots')} aria-hidden />\n        </Button>\n      )}\n      {onClose && (\n        <Button\n          isRound\n          className={buildClassName(modalStyles.closeButton, closeClassName)}\n          ariaLabel={lang('Close')}\n          onClick={onClose}\n        >\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </Button>\n      )}\n      {hasMenu && (\n        <DropdownMenu\n          isOpen={isMenuOpen}\n          ref={menuRef}\n          items={menuItems}\n          withPortal\n          shouldTranslateOptions\n          menuPositionX=\"right\"\n          menuAnchor={menuAnchor}\n          getTriggerElement={getTriggerElement}\n          getRootElement={getRootElement}\n          getMenuElement={getMenuElement}\n          getLayout={getLayout}\n          onSelect={onMenuItemClick}\n          onClose={closeMenu}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(ModalHeader);\n","import React, { memo, useMemo, useRef } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { DropdownItem } from './Dropdown';\n\nimport { copyTextToClipboard } from '../../util/clipboard';\nimport { useIFrameBridgeProvider } from '../../util/embeddedDappBridge/provider/useIFrameBridgeProvider';\nimport { openUrl } from '../../util/openUrl';\nimport { shareUrl } from '../../util/share';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Modal from './Modal';\nimport ModalHeader from './ModalHeader';\n\nimport styles from './IFrameBrowser.module.scss';\n\ninterface StateProps {\n  url?: string;\n  title?: string;\n}\n\ntype MenuHandler = 'reload' | 'openInBrowser' | 'copyUrl' | 'share' | 'close';\n\nconst TITLES = {\n  'tonscan.org': 'TON Explorer',\n  'multisend.mytonwallet.io': 'Multi-Send',\n  'localhost:4323': 'Multi-Send',\n};\n\nconst MENU_ITEMS: DropdownItem<MenuHandler>[] = [{\n  value: 'reload',\n  name: 'Reload',\n  fontIcon: 'menu-reload',\n}, {\n  value: 'openInBrowser',\n  name: 'Open in Browser',\n  fontIcon: 'menu-globe',\n}, {\n  value: 'copyUrl',\n  name: 'Copy Link',\n  fontIcon: 'menu-copy',\n}, {\n  value: 'close',\n  name: 'Close',\n  fontIcon: 'menu-close',\n  withDelimiter: true,\n}];\n\nfunction IFrameBrowser({\n  url, title,\n}: StateProps) {\n  const { closeBrowser, showNotification } = getActions();\n  const lang = useLang();\n\n  const iframeRef = useRef<HTMLIFrameElement>();\n\n  const { setupDappBridge } = useIFrameBridgeProvider(url);\n\n  const host = useMemo(() => url && (new URL(url)).host, [url]);\n  const renderingTitle = useCurrentOrPrev(title || (host && (TITLES[host as keyof typeof TITLES] || host)));\n\n  const handleMenuItemClick = useLastCallback((value: MenuHandler) => {\n    if (!url) return;\n\n    const frame = iframeRef.current!;\n\n    switch (value) {\n      case 'reload':\n        frame.src = 'about:blank';\n        frame.addEventListener('load', () => {\n          frame.src = url;\n        }, { once: true });\n\n        break;\n\n      case 'openInBrowser':\n        void openUrl(url, { isExternal: true });\n        break;\n\n      case 'copyUrl':\n        void copyTextToClipboard(url);\n        showNotification({ message: lang('URL was copied!'), icon: 'icon-copy' });\n        break;\n\n      case 'share':\n        void shareUrl(url, renderingTitle);\n        break;\n\n      case 'close':\n        closeBrowser();\n        break;\n    }\n  });\n\n  return (\n    <Modal isOpen={Boolean(url)} dialogClassName={styles.dialog} onClose={closeBrowser}>\n      <ModalHeader\n        title={renderingTitle}\n        menuItems={MENU_ITEMS}\n        onMenuItemClick={handleMenuItemClick}\n        className={styles.modalHeader}\n      />\n      <iframe\n        ref={iframeRef}\n        title={renderingTitle}\n        src={url}\n        className={styles.iframe}\n        allow=\"web-share; clipboard-write\"\n        onLoad={setupDappBridge}\n      />\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { currentBrowserOptions } = global;\n\n  return {\n    url: currentBrowserOptions?.url,\n    title: currentBrowserOptions?.title,\n  };\n})(IFrameBrowser));\n","import { useEffect, useRef } from '../../../lib/teact/teact';\n\nimport { EMBEDDED_DAPP_BRIDGE_CHANNEL } from '../../../config';\nimport { createReverseIFrameInterface } from '../../createPostMessageInterface';\nimport { buildBridgeApi } from './bridgeApi';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nexport function useIFrameBridgeProvider(pageUrl?: string) {\n  const cleanupRef = useRef<NoneToVoidFunction>();\n\n  const setupDappBridge = useLastCallback((e) => {\n    cleanupRef.current?.();\n\n    const iframe = e.target as HTMLIFrameElement;\n    cleanupRef.current = createReverseIFrameInterface(\n      buildBridgeApi(pageUrl!),\n      new URL(pageUrl!).origin,\n      iframe.contentWindow!,\n      EMBEDDED_DAPP_BRIDGE_CHANNEL,\n    );\n  });\n\n  useEffect(() => {\n    if (!pageUrl) return;\n\n    return () => {\n      cleanupRef.current?.();\n    };\n  }, [pageUrl]);\n\n  return {\n    setupDappBridge,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"iframe\":\"qm6h4mWP\",\"dialog\":\"sszvWMpD\",\"modalHeader\":\"ndvLaNkq\"};","import { type ElementRef, useEffect, useRef, useSignal } from '../lib/teact/teact';\n\nimport type { Scheduler } from '../util/schedulers';\n\nimport { debounce, throttle, throttleWith } from '../util/schedulers';\nimport useDerivedState from './useDerivedState';\nimport useHeavyAnimation from './useHeavyAnimation';\nimport useLastCallback from './useLastCallback';\n\ntype TargetCallback = (entry: IntersectionObserverEntry) => void;\ntype RootCallback = (entries: IntersectionObserverEntry[]) => void;\ntype ObserveCleanup = NoneToVoidFunction;\nexport type ObserveFn = (target: HTMLElement, targetCallback?: TargetCallback) => ObserveCleanup;\n\ninterface IntersectionController {\n  observer: IntersectionObserver;\n  callbacks: Map<HTMLElement, TargetCallback>;\n}\n\ninterface Response {\n  observe: ObserveFn;\n  freeze: NoneToVoidFunction;\n  unfreeze: NoneToVoidFunction;\n}\n\nexport function useIntersectionObserver({\n  rootRef,\n  throttleMs,\n  throttleScheduler,\n  debounceMs,\n  shouldSkipFirst,\n  margin,\n  threshold,\n  isDisabled,\n}: {\n  rootRef?: ElementRef<HTMLDivElement>;\n  throttleMs?: number;\n  throttleScheduler?: Scheduler;\n  debounceMs?: number;\n  shouldSkipFirst?: boolean;\n  margin?: number;\n  threshold?: number | number[];\n  isDisabled?: boolean;\n}, rootCallback?: RootCallback): Response {\n  const controllerRef = useRef<IntersectionController>();\n  const rootCallbackRef = useRef<RootCallback>();\n  const freezeFlagsRef = useRef(0);\n  const onUnfreezeRef = useRef<NoneToVoidFunction>();\n\n  rootCallbackRef.current = rootCallback;\n\n  const freeze = useLastCallback(() => {\n    freezeFlagsRef.current++;\n  });\n\n  const unfreeze = useLastCallback(() => {\n    if (!freezeFlagsRef.current) {\n      return;\n    }\n\n    freezeFlagsRef.current--;\n\n    if (!freezeFlagsRef.current && onUnfreezeRef.current) {\n      onUnfreezeRef.current();\n      onUnfreezeRef.current = undefined;\n    }\n  });\n\n  useHeavyAnimation(freeze, unfreeze);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    return () => {\n      if (controllerRef.current) {\n        controllerRef.current.observer.disconnect();\n        controllerRef.current.callbacks.clear();\n        controllerRef.current = undefined;\n      }\n    };\n  }, [isDisabled]);\n\n  function initController() {\n    const callbacks = new Map();\n    const entriesAccumulator = new Map<Element, IntersectionObserverEntry>();\n\n    let observerCallback: typeof observerCallbackSync;\n    if (typeof throttleScheduler === 'function') {\n      observerCallback = throttleWith(throttleScheduler, observerCallbackSync);\n    } else if (throttleMs) {\n      observerCallback = throttle(observerCallbackSync, throttleMs, !shouldSkipFirst);\n    } else if (debounceMs) {\n      observerCallback = debounce(observerCallbackSync, debounceMs, !shouldSkipFirst);\n    } else {\n      observerCallback = observerCallbackSync;\n    }\n\n    function observerCallbackSync() {\n      if (freezeFlagsRef.current) {\n        onUnfreezeRef.current = observerCallback;\n        return;\n      }\n\n      const entries = Array.from(entriesAccumulator.values());\n\n      entries.forEach((entry: IntersectionObserverEntry) => {\n        const callback = callbacks.get(entry.target);\n        if (callback) {\n          callback!(entry, entries);\n        }\n      });\n\n      if (rootCallbackRef.current) {\n        rootCallbackRef.current(entries);\n      }\n\n      entriesAccumulator.clear();\n    }\n\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          entriesAccumulator.set(entry.target, entry);\n        });\n\n        if (freezeFlagsRef.current) {\n          onUnfreezeRef.current = observerCallback;\n        } else {\n          observerCallback();\n        }\n      },\n      {\n        root: rootRef?.current,\n        rootMargin: margin ? `${margin}px` : undefined,\n        threshold,\n      },\n    );\n\n    controllerRef.current = { observer, callbacks };\n  }\n\n  const observe = useLastCallback((target, targetCallback) => {\n    if (!controllerRef.current) {\n      initController();\n    }\n\n    const controller = controllerRef.current!;\n    controller.observer.observe(target);\n\n    if (targetCallback) {\n      controller.callbacks.set(target, targetCallback);\n    }\n\n    return () => {\n      if (targetCallback) {\n        controller.callbacks.delete(target);\n      }\n\n      controller.observer.unobserve(target);\n    };\n  });\n\n  return { observe, freeze, unfreeze };\n}\n\nexport function useOnIntersect(\n  targetRef: ElementRef<HTMLElement>, observe?: ObserveFn, callback?: TargetCallback,\n) {\n  const lastCallback = useLastCallback(callback);\n\n  useEffect(() => {\n    return observe ? observe(targetRef.current!, lastCallback) : undefined;\n  }, [lastCallback, observe, targetRef]);\n}\n\nexport function useGetIsIntersecting(\n  targetRef: ElementRef<HTMLElement>, observe?: ObserveFn, callback?: TargetCallback,\n) {\n  const [getIsIntersecting, setIsIntersecting] = useSignal(!observe);\n\n  useOnIntersect(targetRef, observe, (entry) => {\n    setIsIntersecting(entry.isIntersecting);\n\n    if (callback) {\n      callback(entry);\n    }\n  });\n\n  return getIsIntersecting;\n}\n\nexport function useIsIntersecting(\n  targetRef: ElementRef<HTMLElement>, observe?: ObserveFn, callback?: TargetCallback,\n) {\n  return useDerivedState(useGetIsIntersecting(targetRef, observe, callback));\n}\n","import type { ElementRef } from '../lib/teact/teact';\n\nimport type { ObserveFn } from './useIntersectionObserver';\n\nimport { useGetIsIntersecting, useIntersectionObserver } from './useIntersectionObserver';\n\nlet observeIntersection: ObserveFn;\n\nconst THROTTLE = 350;\n\nexport function useAppIntersectionObserver() {\n  const { observe } = useIntersectionObserver({\n    throttleMs: THROTTLE,\n  });\n\n  observeIntersection = observe;\n}\n\nexport function useGetIsIntersectingWithApp(targetRef: ElementRef<HTMLElement>) {\n  return useGetIsIntersecting(targetRef, observeIntersection);\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport useLastCallback from './useLastCallback';\n\nfunction useInterval(callback: NoneToVoidFunction, delay?: number, noFirst = false) {\n  const lastCallback = useLastCallback(callback);\n\n  useEffect(() => {\n    if (delay === undefined) {\n      return undefined;\n    }\n\n    const id = setInterval(lastCallback, delay);\n    if (!noFirst) lastCallback();\n\n    return () => clearInterval(id);\n  }, [delay, lastCallback, noFirst]);\n}\n\nexport default useInterval;\n","import { useEffect } from '../lib/teact/teact';\n\nimport { setCancellableTimeout } from '../util/schedulers';\nimport useLastCallback from './useLastCallback';\n\nfunction useTimeout(callback: () => void, delay?: number, dependencies: readonly any[] = []) {\n  const savedCallback = useLastCallback(callback);\n\n  useEffect(() => {\n    if (typeof delay !== 'number') {\n      return undefined;\n    }\n\n    return setCancellableTimeout(delay, savedCallback);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [delay, savedCallback, ...dependencies]);\n}\n\nexport default useTimeout;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"cFGCnqcA\",\"content\":\"sRTywfr2\",\"actions\":\"u6bKEBnR\",\"title\":\"UervEVFY\",\"description\":\"rO8yQetD\",\"img\":\"T1ztMNGQ\",\"button\":\"eymlW7_B\"};","import React from '../lib/teact/teact';\n\nimport { APP_NAME } from '../config';\nimport renderText from '../global/helpers/renderText';\n\nimport useLang from '../hooks/useLang';\nimport useLastCallback from '../hooks/useLastCallback';\n\nimport Button from './ui/Button';\n\nimport styles from './AppInactive.module.scss';\n\nimport appInactivePathPng from '../assets/app-inactive.png';\nimport appInactivePathWebP from '../assets/app-inactive.webp';\n\nfunction AppInactive() {\n  const lang = useLang();\n\n  const handleReload = useLastCallback(() => {\n    window.location.reload();\n  });\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.content}>\n        <picture className={styles.img}>\n          <source src={appInactivePathWebP} />\n          <img src={appInactivePathPng} alt=\"\" className={styles.img} />\n        </picture>\n\n        <h3 className={styles.title}>{lang('Such error, many tabs')}</h3>\n\n        <div className={styles.description}>\n          {renderText(lang('$many_tabs_error_description', { app_name: APP_NAME }))}\n        </div>\n\n        <div className={styles.actions}>\n          <Button isText className={styles.button} onClick={handleReload}>\n            {lang('Reload App')}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default AppInactive;\n","import { useState } from '../lib/teact/teact';\n\nimport useLastCallback from './useLastCallback';\n\nconst THRESHOLD = 1;\n\nexport default function useScrolledState(threshold = THRESHOLD) {\n  const [isAtBeginning, setIsAtBeginning] = useState(true);\n  const [isAtEnd, setIsAtEnd] = useState(true);\n\n  const update = useLastCallback((element?: HTMLElement | null) => {\n    if (!element) return;\n\n    const { scrollHeight, scrollTop, clientHeight } = element;\n\n    setIsAtBeginning(scrollTop < threshold);\n    setIsAtEnd(scrollHeight - scrollTop - clientHeight < threshold);\n  });\n\n  const handleScroll = useLastCallback((e: React.UIEvent<HTMLElement>) => {\n    update(e.target as HTMLElement);\n  });\n\n  return {\n    isAtBeginning,\n    isAtEnd,\n    isScrolled: !isAtBeginning,\n    handleScroll,\n    update,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"YO7I0Ma0\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport styles from './Emoji.module.scss';\n\nexport type EmojiIcon = '' | '' | '';\n\ninterface OwnProps {\n  from: EmojiIcon;\n}\n\nconst PATH_BY_EMOJI = {\n  '': '1f977',\n  '': '1f984',\n  '': '26a0',\n};\n\nconst loadedImages = new Set();\n\nfunction Emoji({ from }: OwnProps) {\n  const key = from in PATH_BY_EMOJI ? PATH_BY_EMOJI[from as keyof typeof PATH_BY_EMOJI] : from;\n  const src = `./emoji/${key}.png`;\n  const [isLoaded, markLoaded] = useFlag(loadedImages.has(src));\n  const ref = useMediaTransition<HTMLImageElement>(isLoaded);\n\n  const handleLoad = useLastCallback(() => {\n    markLoaded();\n    loadedImages.add(src);\n  });\n\n  return (\n    <img\n      ref={ref}\n      src={src}\n      alt={from}\n      className={buildClassName(styles.root, styles[`key-${key}`])}\n      onLoad={handleLoad}\n    />\n  );\n}\n\nexport default memo(Emoji);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"T7fZ5IMk\",\"slide\":\"syDfunZP\",\"modalDialog\":\"xRqyv_rX\",\"header\":\"aDfdss28\",\"withTopSpace\":\"dtjdV8GY\",\"nestedTransition\":\"jX5Ya3FK\",\"transitionContainer\":\"yVzk5dwl\",\"developerCloseButton\":\"yn74reot\",\"onlyTextHeader\":\"CgjtBlIK\",\"headerInsideModal\":\"eFeOVzRI\",\"languageHeader\":\"ZrejUKsI\",\"headerBack\":\"ehDj7x2p\",\"isInsideModal\":\"Wccw6pgw\",\"hidden\":\"yTnK4aVo\",\"iconChevron\":\"Qea3kUMy\",\"headerBackInContent\":\"zvnNb8eo\",\"headerTitle\":\"aZVKC5O6\",\"modalHeader\":\"vwHnpdwF\",\"content\":\"rgMxxE39\",\"content_noScroll\":\"lh0I5gIh\",\"contentNoScroll\":\"lh0I5gIh\",\"withBottomSpace\":\"cjfvEx15\",\"contentInModal\":\"ug6WizbB\",\"contentFullSize\":\"BpFwAWae\",\"blockTitle\":\"dBOj5NnG\",\"menuIcon\":\"M1WSmGuc\",\"themeWrapper\":\"cfK5v5m1\",\"blockAbout\":\"yuZIbS8n\",\"theme\":\"N5nUfRHH\",\"theme_active\":\"eTa03cXj\",\"themeActive\":\"eTa03cXj\",\"themeIcon\":\"tZRnZj9J\",\"themeIcon_active\":\"eEiBESrS\",\"themeIconActive\":\"eEiBESrS\",\"themeImg\":\"H_nvpBU5\",\"colorList\":\"ftMWz1de\",\"colorButton\":\"OaFvanYP\",\"colorButtonCurrent\":\"GthJhaus\",\"iconLock\":\"n1s4Ycb6\",\"iconLockInverted\":\"r9kXSmsP\",\"subBlockAsButton\":\"ImElqofC\",\"block\":\"wJjymc4L\",\"text\":\"sU0zQDmb\",\"settingsBlockWithDescription\":\"xosGoD5d\",\"settingsBlock\":\"_0TWKZFz4\",\"iconChevronRight\":\"RHurCQ9b\",\"iconQuestion\":\"CLKLBCVt\",\"item\":\"o1nQhJ_F\",\"draggable\":\"k2juknci\",\"item_red\":\"yYJCYbbd\",\"itemRed\":\"yYJCYbbd\",\"item_small\":\"cC1nd9dM\",\"itemSmall\":\"cC1nd9dM\",\"item_lang\":\"kIWs2Jxk\",\"itemLang\":\"kIWs2Jxk\",\"item_wallet_version\":\"tTZZHEdN\",\"itemWalletVersion\":\"tTZZHEdN\",\"item_token\":\"LMTs4OeN\",\"itemToken\":\"LMTs4OeN\",\"item_disabled\":\"F3nzrEuV\",\"itemDisabled\":\"F3nzrEuV\",\"itemAutoLock\":\"TAmUTusj\",\"itemInfo\":\"S5Kk31wp\",\"small\":\"gq4usdgr\",\"version\":\"oGJ2X15D\",\"languageMain\":\"cIO_6vYD\",\"languageNative\":\"NGS7pE5c\",\"wideTooltip\":\"xZy_xEHS\",\"disconnectButton\":\"Wu3RiwSF\",\"dapps\":\"eyE78PWW\",\"changePasswordButton\":\"xBpPU4Jb\",\"passwordFormContent\":\"KQuDNpn5\",\"passwordFormContentInModal\":\"OzmF3O5t\",\"sticker\":\"aMwtPBfB\",\"blockDescription\":\"HuH8igQi\",\"emptyList\":\"ThoQya6m\",\"emptyListTitle\":\"lek7Y5aS\",\"dapp\":\"xc0VaBDP\",\"backButton\":\"QlOjly_V\",\"logo\":\"LQ5MMcSf\",\"stickerNativeBiometric\":\"nLxfZG3p\",\"pinPadHeader\":\"tnqhb1Qi\",\"pinPadHeaderMinified\":\"K1fiksuZ\",\"pinPadTitle\":\"MxOcmI0_\",\"title\":\"sDP2AWSj\",\"titleLink\":\"r7iIIH6q\",\"heading\":\"Sh2kuIH2\",\"github\":\"dBqNllGm\",\"telegram\":\"sggkOqTT\",\"tokenSortIcon\":\"V7Nh7XEi\",\"tokenTitle\":\"wkk1b7Dc\",\"tokenDescription\":\"cv6gw8az\",\"tokenAmount\":\"BekK0Dwp\",\"dot\":\"Zfi1H_we\",\"dotLarge\":\"LIr9yHMx\",\"contentRelative\":\"EiFz4WrA\",\"sortableContainer\":\"zmQzVO7l\",\"modalDialogWeb\":\"E67Qdj_t\",\"modalContent\":\"mjHzkDZB\",\"deleteText\":\"d8sxNodF\",\"languageInfo\":\"AXAMGE3T\",\"tokenInfo\":\"ll1f03qi\",\"stickerAndTitle\":\"upR_yI1c\",\"sideTitle\":\"atPnEcVz\",\"aboutFooterWrapper\":\"EYMlspWb\",\"aboutFooterContent\":\"U1sbe5pk\",\"blockWalletVersionText\":\"poUctQOF\",\"walletVersionInfo\":\"spNULnGc\",\"walletVersionInfoRight\":\"Ez0t7GFF\",\"walletVersionTitle\":\"DbBBKMBg\",\"walletVersionTokens\":\"DUzHgWKY\",\"walletVersionAddress\":\"xPrZcrFZ\",\"walletVersionAmount\":\"nvPRmXTF\",\"blockWalletVersionReadMore\":\"g3U3zj6y\",\"nftPrimaryCell\":\"zpLwMrPQ\",\"nftName\":\"JHu8TtpB\",\"nftCollection\":\"mbtZbU1u\",\"nftImage\":\"pifBd9KV\",\"nftButtonUnhide\":\"_o8QIssq\",\"account\":\"TXe6O6ZF\",\"accountDisabled\":\"vf82b5zy\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport { type Theme } from '../../global/types';\n\nimport {\n  APP_ENV_MARKER, APP_NAME, APP_REPO_URL, APP_VERSION, IS_CORE_WALLET, IS_EXTENSION,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { handleUrlClick } from '../../util/openUrl';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport Emoji from '../ui/Emoji';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\nimport logoDarkPath from '../../assets/logoDark.svg';\nimport logoLightPath from '../../assets/logoLight.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInsideModal?: boolean;\n  headerClassName?: string;\n  theme: Theme;\n  handleBackClick: NoneToVoidFunction;\n}\n\nfunction SettingsAbout({\n  isActive, isInsideModal, theme, headerClassName, handleBackClick,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const appTheme = useAppTheme(theme);\n  const logoPath = appTheme === 'light' ? logoLightPath : logoDarkPath;\n  const aboutExtensionTitle = lang('$about_extension_link_text', { app_name: APP_NAME });\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('About %app_name%', { app_name: APP_NAME })}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(\n          styles.header,\n          headerClassName,\n          'with-notch-on-scroll',\n          isScrolled && 'is-scrolled',\n        )}\n        >\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('About %app_name%', { app_name: APP_NAME })}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(\n          styles.content,\n          isInsideModal && 'custom-scroll',\n          !isInsideModal && styles.content_noScroll,\n        )}\n        onScroll={isInsideModal ? handleContentScroll : undefined}\n      >\n        <img src={logoPath} alt={lang('Logo')} className={styles.logo} />\n        <h2 className={styles.title}>\n          {APP_NAME} {APP_VERSION} {APP_ENV_MARKER}\n          {!IS_CORE_WALLET && (\n            <a href=\"https://mytonwallet.io/\" target=\"_blank\" className={styles.titleLink} rel=\"noreferrer\">\n              mytonwallet.io\n            </a>\n          )}\n        </h2>\n        <div className={buildClassName(styles.blockAbout, !isInsideModal && 'custom-scroll')}>\n          <p className={styles.text}>\n            {renderText(lang('$about_description1'))}\n          </p>\n          <p className={styles.text}>\n            {renderText(lang('$about_description2'))}\n          </p>\n          {IS_EXTENSION ? (\n            <>\n              <h3 className={buildClassName(styles.text, styles.heading)}>\n                <Emoji from=\"\" /> {lang('What is TON Proxy?')}\n              </h3>\n              <p className={styles.text}>\n                {renderText(lang('$about_extension_description1'))}{' '}\n                <a\n                  href=\"https://telegra.ph/TON-Sites-TON-WWW-and-TON-Proxy-09-29-2\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  {lang('More info and demo.')}\n                </a>\n              </p>\n              <h3 className={buildClassName(styles.text, styles.heading)}>\n                <Emoji from=\"\" /> {lang('What is TON Magic?')}\n              </h3>\n              <p className={styles.text}>\n                {renderText(lang('$about_extension_description2'))}\n              </p>\n              <p className={styles.text}>\n                {lang('$about_extension_description3')}{' '}\n                <a href=\"https://telegra.ph/Telegram--TON-11-10\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  {lang('More info and demo.')}\n                </a>\n              </p>\n            </>\n          ) : (\n            <>\n              <h3 className={buildClassName(styles.text, styles.heading)}>\n                {lang('$about_proxy_magic_title', { ninja: <Emoji from=\"\" />, unicorn: <Emoji from=\"\" /> })}\n              </h3>\n              <p className={styles.text}>\n                {lang('$about_proxy_magic_description', {\n                  extension_link: (\n                    <a href=\"https://mytonwallet.io/\" target=\"_blank\" rel=\"noreferrer\">\n                      {renderText(aboutExtensionTitle)}\n                    </a>\n                  ),\n                })}\n              </p>\n            </>\n          )}\n          <h3 className={buildClassName(styles.text, styles.heading)}>\n            <i className={buildClassName(styles.github, 'icon-github')} aria-hidden /> {lang('Is it open source?')}\n          </h3>\n          <p className={styles.text}>\n            {lang('$about_wallet_github', {\n              github_link: (\n                <a href={APP_REPO_URL} target=\"_blank\" rel=\"noreferrer\">\n                  {renderText(lang('$about_github_link_text'))}\n                </a>\n              ),\n            })}\n          </p>\n          <h3 className={styles.heading}>\n            <i\n              className={buildClassName(styles.telegram, 'icon-telegram')}\n              aria-hidden\n            /> {lang('Is there a community?')}\n          </h3>\n          <p className={styles.text}>\n            {lang('$about_wallet_community', {\n              community_link: (\n                <a\n                  href={lang.code === 'ru' ? 'https://t.me/MyTonWalletRu' : 'https://t.me/MyTonWalletEn'}\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                >\n                  {renderText(lang('$about_community_link_text'))}\n                </a>\n              ),\n            })}\n          </p>\n        </div>\n        <div className={styles.aboutFooterWrapper}>\n          <div className={styles.aboutFooterContent}>\n            <a\n              href=\"https://mytonwallet.io/terms-of-use\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              onClick={handleUrlClick}\n            >{lang('Terms of Use')}\n            </a>\n            <i className={styles.dotLarge} aria-hidden />\n            <a\n              href=\"https://mytonwallet.io/privacy-policy\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              onClick={handleUrlClick}\n            >{lang('Privacy Policy')}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsAbout);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"ULZ34zm7\",\"transitionContainer\":\"IpdZLqJd\",\"transitionSlide\":\"XE9A_oIT\",\"container\":\"PaAMLiEx\",\"container_scrollable\":\"Kl8WYoh1\",\"containerScrollable\":\"Kl8WYoh1\",\"container_password\":\"UbkFqyhU\",\"containerPassword\":\"UbkFqyhU\",\"containerAlignTop\":\"kjX3jz7x\",\"containerFullSize\":\"TyvpW2dz\",\"aboutHeader\":\"fW4ULVz8\",\"logo\":\"ehC1Upu8\",\"appName\":\"IDG3Q9do\",\"title\":\"GWv6k9kV\",\"title_afterSmallSticker\":\"A9um3wzK\",\"titleAfterSmallSticker\":\"A9um3wzK\",\"titleSmallMargin\":\"XUVoSlvz\",\"infoBlock\":\"PxIcz2Ce\",\"text\":\"ehvMomrX\",\"informationCheckbox\":\"EnuqqZk3\",\"informationCheckboxContent\":\"GFpWMNm5\",\"info\":\"WrpQj6v4\",\"info_push\":\"I7MJaI4h\",\"infoPush\":\"I7MJaI4h\",\"info__space\":\"D8smEaJr\",\"infoSpace\":\"D8smEaJr\",\"infoPull\":\"NnW2gTZ2\",\"infoSmallFont\":\"NNleMmCd\",\"counter\":\"BMrG2A2B\",\"counterTitle\":\"IFpNJ6G4\",\"counterDigit\":\"FvuWBVMK\",\"small\":\"I1fhFmAn\",\"sticker\":\"hkc_A2ok\",\"viewModeSticker\":\"lD3yvgO7\",\"stickerAndTitle\":\"I_XB4JzC\",\"backupNotice\":\"jSFFHbPH\",\"backupNoticeButtons\":\"kUt_RfrB\",\"modalSticker\":\"oxNcdksx\",\"form\":\"VKREIrDv\",\"formWidgets\":\"Vj7_u12z\",\"passwordForm\":\"Stc9sPH6\",\"errors\":\"vozeQrSV\",\"passwordRules\":\"usE91GiK\",\"passwordRule\":\"zwUB1a_J\",\"valid\":\"tAmeBNo9\",\"error\":\"B8vH7CYQ\",\"buttons\":\"ODle5ROH\",\"buttons__inner\":\"oNN6ymiQ\",\"buttonsInner\":\"oNN6ymiQ\",\"footerButton\":\"sarw89g5\",\"btn\":\"SWvNin2D\",\"btn_push\":\"W1k0H_HF\",\"btnPush\":\"W1k0H_HF\",\"btn_text\":\"qoCa264k\",\"btnText\":\"qoCa264k\",\"btn_about\":\"hc6SmKii\",\"btnAbout\":\"hc6SmKii\",\"btn_wide\":\"nfn0Ol3p\",\"btnWide\":\"nfn0Ol3p\",\"btn_mini\":\"Q2imCrap\",\"btnMini\":\"Q2imCrap\",\"btn_single\":\"uEEAE1sZ\",\"btnSingle\":\"uEEAE1sZ\",\"btnHalfWidth\":\"X7zz6SZl\",\"modalDialog\":\"fGexmyHI\",\"privateKey\":\"q7ZIxYSc\",\"importingContent\":\"NH8rGjmE\",\"footerError\":\"BZGziOTc\",\"importButtonsBlock\":\"NM17kdjV\",\"importButtonsBlockSimple\":\"PPE4xSFG\",\"importText\":\"MHwkgrIZ\",\"importButtons\":\"dYD_CpfV\",\"biometricsStep\":\"t3qgjBKg\",\"warning\":\"bs9tLaLO\",\"biometricsError\":\"Es3mlsbs\",\"stepTransition\":\"POUbGjea\",\"passwordFormContainer\":\"t9A5nUYe\",\"header\":\"iowmPhKV\",\"headerTitle\":\"x58Cmt9r\",\"pinPadHeader\":\"yHcMeGVS\",\"headerBack\":\"ZzxVO58v\",\"headerBackBlock\":\"NVF8z8CV\",\"iconChevron\":\"vP8i059j\",\"biometricsIcon\":\"ss3uFaAC\",\"biometricsTitle\":\"VTH_ATCk\",\"biometricsSubtitle\":\"C3vZhdz7\",\"actionsSection\":\"Lfkf9AW5\",\"importModalContent\":\"vb2ESy1T\",\"disclaimerBackupDialog\":\"ZjhuaYXI\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport PasswordForm from '../ui/PasswordForm';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  method?: AuthMethod;\n  error?: string;\n}\n\nfunction AuthCheckPassword({\n  isActive, isLoading, error, method,\n}: OwnProps) {\n  const { resetAuth, cleanAuthError, addAccount } = getActions();\n  const lang = useLang();\n\n  const isImporting = method !== 'createAccount';\n\n  const handleSubmit = useLastCallback((password: string) => {\n    addAccount({ method: isImporting ? 'importMnemonic' : 'createAccount', password, isAuthFlow: true });\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <PasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        error={error}\n        containerClassName={styles.passwordForm}\n        submitLabel={lang('Send')}\n        cancelLabel={lang('Back')}\n        onSubmit={handleSubmit}\n        onCancel={resetAuth}\n        onUpdate={cleanAuthError}\n      >\n        <div className={styles.title}>{lang('Enter your password')}</div>\n      </PasswordForm>\n    </div>\n  );\n}\n\nexport default memo(AuthCheckPassword);\n","// extracted by mini-css-extract-plugin\nexport default {\"suggestions\":\"wSbrkEKB\",\"bottom\":\"YGdWEJ33\",\"top\":\"jKY8_1nT\",\"suggestion\":\"MtG_CWxm\",\"active\":\"kdLCV21p\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './SuggestionList.module.scss';\n\ntype OwnProps = {\n  position?: 'top' | 'bottom';\n  suggestions: string[];\n  activeIndex?: number;\n  isInModal?: boolean;\n  onSelect: (suggest: string) => void;\n};\n\nfunction SuggestionList({\n  position = 'bottom',\n  suggestions,\n  activeIndex,\n  isInModal,\n  onSelect,\n}: OwnProps) {\n  const lang = useLang();\n\n  const handleClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n\n    const suggest = (e.target as HTMLLIElement).innerText.trim();\n    onSelect(suggest);\n  };\n\n  return suggestions.length ? (\n    <ul className={buildClassName(styles.suggestions, styles[position], isInModal && styles.embedded)}>\n      {suggestions.map((suggestion, index) => {\n        return (\n          <li\n            key={suggestion}\n            role=\"button\"\n            tabIndex={0}\n            className={buildClassName(styles.suggestion, index === activeIndex && styles.active)}\n            onMouseDown={handleClick}\n          >\n            {suggestion}\n          </li>\n        );\n      })}\n    </ul>\n  ) : (\n    <div className={styles.suggestions}>\n      <li className={styles.suggestion}>{lang('No suggestions, you\\'re on your own!')}</li>\n    </div>\n  );\n}\n\nexport default memo(SuggestionList);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"fZW_3WXP\",\"wrapper_focus\":\"sqh1ynr8\",\"wrapperFocus\":\"sqh1ynr8\",\"wrapper_error\":\"z4J8kfq3\",\"wrapperError\":\"z4J8kfq3\",\"input\":\"L1vlW70a\",\"label\":\"Qg48sdUG\"};","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\n\nimport { PRIVATE_KEY_HEX_LENGTH } from '../../config';\nimport { requestMeasure } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { callApi } from '../../api';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SuggestionList from '../ui/SuggestionList';\n\nimport styles from './InputMnemonic.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  nextId?: string;\n  labelText?: string;\n  className?: string;\n  value?: string;\n  isInModal?: boolean;\n  suggestionsPosition?: 'top' | 'bottom';\n  inputArg?: any;\n  onInput: (value: string, inputArg?: any) => void;\n  onEnter?: NoneToVoidFunction;\n};\n\nconst SUGGESTION_WORDS_COUNT = 7;\n\nfunction InputMnemonic({\n  id, nextId, labelText, className, value = '', isInModal, suggestionsPosition, inputArg, onInput, onEnter,\n}: OwnProps) {\n  const [hasFocus, markFocus, unmarkFocus] = useFlag();\n  const [hasError, setHasError] = useState<boolean>(false);\n  const [filteredSuggestions, setFilteredSuggestions] = useState<string[]>([]);\n  const [activeSuggestionIndex, setActiveSuggestionIndex] = useState<number>(0);\n  const [areSuggestionsShown, setAreSuggestionsShown] = useState<boolean>(false);\n  const [wordlist, setWordlist] = useState<string[]>([]);\n  const shouldRenderSuggestions = areSuggestionsShown && value && filteredSuggestions.length > 0;\n\n  useEffect(() => {\n    void callApi('getMnemonicWordList').then((words) => setWordlist(words ?? []));\n  }, []);\n\n  useEffect(() => {\n    const noError = !value\n      || (areSuggestionsShown && filteredSuggestions.length > 0)\n      || isCorrectMnemonic(value, wordlist);\n    setHasError(!noError);\n  }, [areSuggestionsShown, filteredSuggestions.length, value, wordlist]);\n\n  const processSuggestions = (userInput: string) => {\n    // Filter our suggestions that don't contain the user's input\n    const unLinked = wordlist.filter(\n      (suggestion) => suggestion.toLowerCase().startsWith(userInput.toLowerCase()),\n    ).slice(0, SUGGESTION_WORDS_COUNT);\n\n    onInput(userInput, inputArg);\n    setFilteredSuggestions(unLinked);\n    setActiveSuggestionIndex(0);\n    setAreSuggestionsShown(true);\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const userInput = e.target.value;\n\n    processSuggestions(userInput);\n  };\n\n  const handlePaste = (e: React.ClipboardEvent<HTMLInputElement>) => {\n    const pastedValue = e.clipboardData.getData('text');\n\n    if (!pastedValue) return;\n\n    processSuggestions(pastedValue);\n  };\n\n  const handleEnter = useLastCallback((e: KeyboardEvent) => {\n    if (!value) return;\n\n    if (onEnter && !areSuggestionsShown) {\n      onEnter();\n    }\n\n    const suggestedValue = filteredSuggestions[activeSuggestionIndex];\n    if (!suggestedValue) return;\n    onInput(suggestedValue, inputArg);\n    setFilteredSuggestions([suggestedValue]);\n    setActiveSuggestionIndex(0);\n    setAreSuggestionsShown(false);\n\n    if (areSuggestionsShown) {\n      e.preventDefault();\n    }\n\n    if (nextId) {\n      requestMeasure(() => {\n        requestMeasure(() => {\n          const nextInput = document.getElementById(nextId);\n          nextInput?.focus();\n          (nextInput as HTMLInputElement)?.select();\n        });\n      });\n    }\n  });\n\n  useEffect(() => {\n    return hasFocus ? captureKeyboardListeners({\n      onEnter: handleEnter,\n      onTab: (e: KeyboardEvent) => {\n        if (!(e.shiftKey || e.ctrlKey || e.altKey || e.metaKey)) {\n          handleEnter(e);\n        }\n      },\n      onUp: () => {\n        if (activeSuggestionIndex > 0) {\n          setActiveSuggestionIndex(activeSuggestionIndex - 1);\n        }\n      },\n      onDown: () => {\n        if (activeSuggestionIndex < filteredSuggestions.length - 1) {\n          setActiveSuggestionIndex(activeSuggestionIndex + 1);\n        }\n      },\n    }) : undefined;\n  });\n\n  const handleClick = useLastCallback((suggestion: string) => {\n    onInput(suggestion, inputArg);\n    setAreSuggestionsShown(false);\n    setActiveSuggestionIndex(0);\n    setFilteredSuggestions([]);\n\n    if (nextId) {\n      requestMeasure(() => {\n        requestMeasure(() => {\n          const nextInput = document.getElementById(nextId);\n          nextInput?.focus();\n          (nextInput as HTMLInputElement)?.select();\n        });\n      });\n    }\n  });\n\n  const handleFocus = (e: React.FocusEvent<HTMLInputElement>) => {\n    processSuggestions(e.target.value);\n    markFocus();\n  };\n\n  const handleBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n    // Remove focus from the input element to ensure correct blur handling, especially when triggered by window switching\n    e.target.blur();\n\n    unmarkFocus();\n    requestAnimationFrame(() => {\n      setAreSuggestionsShown(false);\n      setFilteredSuggestions([]);\n    });\n  };\n\n  return (\n    <div className={buildClassName(\n      styles.wrapper,\n      className,\n      hasFocus && styles.wrapper_focus,\n      hasError && styles.wrapper_error,\n    )}\n    >\n      {shouldRenderSuggestions && (\n        <SuggestionList\n          suggestions={filteredSuggestions}\n          activeIndex={activeSuggestionIndex}\n          position={suggestionsPosition}\n          isInModal={isInModal}\n          onSelect={handleClick}\n        />\n      )}\n      <label className={styles.label} htmlFor={id}>{labelText}.</label>\n      <input\n        id={id}\n        className={buildClassName(styles.input, value !== '' && styles.touched)}\n        type=\"text\"\n        autoCapitalize=\"none\"\n        autoComplete=\"off\"\n        autoCorrect={false}\n        spellCheck={false}\n        onChange={handleChange}\n        onFocus={handleFocus}\n        onBlur={handleBlur}\n        onPaste={handlePaste}\n        value={value}\n        tabIndex={0}\n        data-focus-scroll-position={suggestionsPosition === 'top' ? 'end' : 'start'}\n      />\n    </div>\n  );\n}\n\nfunction isCorrectMnemonic(mnemonic: string, wordlist: string[]) {\n  return mnemonic.length === PRIVATE_KEY_HEX_LENGTH || wordlist.includes(mnemonic);\n}\n\nexport default memo(InputMnemonic);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalSticker\":\"L6u18JBd\",\"buttonWrapper\":\"NvN6uNIF\",\"footerButton\":\"u7rnL9q6\",\"checkMnemonicInput\":\"_YK5KiZw\",\"error\":\"WeqRS7VQ\",\"checkMnemonicForm\":\"ftYLMV0R\",\"info\":\"o4FCVeIa\",\"mnemonicContainer\":\"lRHp5zzY\",\"warning\":\"jCCt2XRK\",\"words\":\"Yaqcau6G\",\"word\":\"qdW2OhFc\",\"small\":\"pfd8fIrT\"};","import type { FormEvent } from 'react';\nimport React, { memo, useEffect, useState } from '../../../lib/teact/teact';\n\nimport { MNEMONIC_CHECK_COUNT } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport { areSortedArraysEqual } from '../../../util/iteratees';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport InputMnemonic from '../InputMnemonic';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInModal?: boolean;\n  checkIndexes?: number[];\n  mnemonic?: string[];\n  descriptionClassName?: string;\n  formClassName?: string;\n  errorClassName?: string;\n  onSubmit: AnyFunction;\n}\n\nfunction CheckWordsForm({\n  isActive,\n  isInModal,\n  checkIndexes,\n  mnemonic,\n  descriptionClassName,\n  formClassName,\n  errorClassName,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n  const [words, setWords] = useState<Record<number, string>>({});\n  const [hasMnemonicError, setHasMnemonicError] = useState(false);\n\n  const handleMnemonicCheckSubmit = useLastCallback((e: FormEvent) => {\n    e.preventDefault();\n    const answer = mnemonic && checkIndexes?.map((index) => mnemonic[index]);\n    if (answer && areSortedArraysEqual(answer, Object.values(words))) {\n      onSubmit();\n    } else {\n      setHasMnemonicError(true);\n    }\n  });\n\n  useEffect(() => {\n    if (isActive) {\n      setWords({});\n      setHasMnemonicError(false);\n    }\n  }, [isActive]);\n\n  const handleSetWord = useLastCallback((value: string, index: number) => {\n    setWords({\n      ...words,\n      [index]: value?.toLowerCase(),\n    });\n  });\n\n  return (\n    <>\n      <p className={descriptionClassName}>\n        {renderText(lang('$mnemonic_check_words_list', checkIndexes?.map((n) => n + 1)?.join(', ')))}\n      </p>\n\n      <form className={formClassName} onSubmit={handleMnemonicCheckSubmit} id=\"check_mnemonic_form\">\n        {checkIndexes!.map((key, i) => (\n          <InputMnemonic\n            key={key}\n            id={`check-mnemonic-${i}`}\n            nextId={i + 1 < MNEMONIC_CHECK_COUNT ? `check-mnemonic-${i + 1}` : undefined}\n            labelText={`${key + 1}`}\n            value={words[key]}\n            isInModal={isInModal}\n            suggestionsPosition={i <= 1 ? 'bottom' : 'top'}\n            inputArg={key}\n            className={styles.checkMnemonicInput}\n            onInput={handleSetWord}\n          />\n        ))}\n      </form>\n\n      {hasMnemonicError && (\n        <div className={errorClassName}>\n          {renderText(lang('$mnemonic_check_error'))}\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default memo(CheckWordsForm);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport CheckWordsForm from './CheckWordsForm';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  checkIndexes?: number[];\n  mnemonic?: string[];\n}\n\nfunction CheckWordsContent({\n  isActive,\n  checkIndexes,\n  mnemonic,\n}: OwnProps) {\n  const { closeCheckWordsPage } = getActions();\n\n  const onSubmit = useLastCallback(() => {\n    closeCheckWordsPage({ isBackupCreated: true });\n  });\n\n  const lang = useLang();\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n        previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n        size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n        play={isActive}\n        nonInteractive\n        noLoop={false}\n        className={styles.modalSticker}\n      />\n      <p className={buildClassName(styles.info, styles.small)}>\n        {renderText(lang('$check_words_description'))}\n      </p>\n\n      <CheckWordsForm\n        descriptionClassName={buildClassName(styles.info, styles.small)}\n        formClassName={styles.checkMnemonicForm}\n        isActive={isActive}\n        mnemonic={mnemonic}\n        checkIndexes={checkIndexes}\n        errorClassName={styles.error}\n        onSubmit={onSubmit}\n      />\n\n      <div className={styles.buttonWrapper}>\n        <Button\n          isPrimary\n          forFormId=\"check_mnemonic_form\"\n          className={styles.footerButton}\n        >\n          {lang('Continue')}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(CheckWordsContent);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport CheckWordsContent from '../common/backup/CheckWordsContent';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  mnemonic?: string[];\n  checkIndexes?: number[];\n}\n\nconst AuthCheckWords = ({ isActive, mnemonic, checkIndexes }: OwnProps) => {\n  const { openMnemonicPage } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({ isActive, onBack: openMnemonicPage });\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, 'custom-scroll')}>\n\n        <div className={styles.header}>\n          <Button isSimple isText onClick={openMnemonicPage} className={styles.headerBackBlock}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Let\\'s Check!')}</span>\n        </div>\n\n        <CheckWordsContent\n          isActive={isActive}\n          mnemonic={mnemonic}\n          checkIndexes={checkIndexes}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCheckWords);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useTimeout from '../../hooks/useTimeout';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isLoading?: boolean;\n  error?: string;\n  biometricsStep?: 1 | 2;\n}\n\nconst START_BIOMETRICS_CONFIRMATION_DELAY_MS = SECOND;\n\nfunction AuthConfirmBiometrics({\n  isActive,\n  biometricsStep,\n  error,\n  isLoading,\n}: OwnProps) {\n  const {\n    afterCreateBiometrics,\n    resetAuth,\n    cancelCreateBiometrics,\n  } = getActions();\n\n  useTimeout(afterCreateBiometrics, isActive ? START_BIOMETRICS_CONFIRMATION_DELAY_MS : undefined, [isActive]);\n\n  const lang = useLang();\n  const shouldRenderSteps = Boolean(biometricsStep);\n  const shouldRenderError = Boolean(error && !shouldRenderSteps);\n  const renderingError = useCurrentOrPrev(error, true);\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n        previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n      />\n      <div className={styles.title}>{lang('Turn On Biometrics')}</div>\n\n      {shouldRenderSteps && (\n        <div className={styles.biometricsStep}>\n          {lang(biometricsStep === 1 ? 'Step 1 of 2. Registration' : 'Step 2 of 2. Verification')}\n        </div>\n      )}\n      {shouldRenderError && (\n        <div className={buildClassName(styles.biometricsError)}>\n          <div>{lang(renderingError || 'Unknown error')}</div>\n          <div>{lang('Please try to confirm your biometrics again')}</div>\n        </div>\n      )}\n\n      <div className={styles.buttons}>\n        <div className={styles.buttons__inner}>\n          <Button\n            isDisabled={Boolean(biometricsStep) || isLoading}\n            className={buildClassName(styles.btn, styles.btnHalfWidth)}\n            onClick={cancelCreateBiometrics}\n          >\n            {lang('Cancel')}\n          </Button>\n\n          {shouldRenderError && (\n            <Button\n              isPrimary\n              className={buildClassName(styles.btn, styles.btnHalfWidth)}\n              isDisabled={Boolean(biometricsStep) || isLoading}\n              onClick={afterCreateBiometrics}\n            >\n              {lang('Try Again')}\n            </Button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(AuthConfirmBiometrics);\n","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport { PIN_LENGTH } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { pause } from '../../util/schedulers';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport PinPad from '../ui/PinPad';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n}\n\ninterface StateProps {\n  pin: string;\n}\n\nconst SUBMIT_PAUSE_MS = 1500;\n\nconst AuthConfirmPin = ({\n  isActive,\n  method,\n  pin,\n}: OwnProps & StateProps) => {\n  const { confirmPin, cancelConfirmPin } = getActions();\n\n  const lang = useLang();\n  const [pinConfirm, setPinConfirm] = useState<string>('');\n  const [error, setError] = useState<string>('');\n  const [isConfirmed, setIsConfirmed] = useState<boolean>(false);\n  const isImporting = method !== 'createAccount';\n\n  const handleBackClick = useLastCallback(() => {\n    cancelConfirmPin({ isImporting });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  useEffect(() => {\n    if (isActive) {\n      setPinConfirm('');\n      setError('');\n      setIsConfirmed(false);\n    }\n  }, [isActive]);\n\n  const handleChange = useLastCallback((value: string) => {\n    setPinConfirm(value);\n    setError('');\n  });\n\n  const handleSubmit = useLastCallback(async (value: string) => {\n    if (value === pin) {\n      setIsConfirmed(true);\n      await pause(SUBMIT_PAUSE_MS);\n      confirmPin({ isImporting });\n    } else {\n      setError(lang('Codes don\\'t match'));\n    }\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.containerFullSize)}>\n      <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n        <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <div className={styles.pinPadHeader}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n          previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n          noLoop={false}\n          nonInteractive\n        />\n        <div className={styles.title}>{lang(isImporting ? 'Wallet is imported!' : 'Wallet is ready!')}</div>\n      </div>\n\n      <PinPad\n        isActive={isActive}\n        title={isConfirmed ? lang('Code set successfully') : (error || lang('Enter your code again'))}\n        type={isConfirmed ? 'success' : (error ? 'error' : undefined)}\n        length={PIN_LENGTH}\n        value={pinConfirm}\n        onChange={handleChange}\n        onSubmit={handleSubmit}\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global) => {\n  return {\n    pin: global.auth.password,\n  };\n})(AuthConfirmPin));\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { IS_PRODUCTION } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\nfunction AuthCreateBackup({ isActive }: OwnProps) {\n  const { skipCheckMnemonic, openAuthBackupWalletModal, resetAuth } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  const canSkipMnemonicCheck = !IS_PRODUCTION;\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, 'custom-scroll')}>\n        <div className={styles.header}>\n          <Button isSimple isText onClick={resetAuth} className={styles.headerBackBlock}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}> </span>\n        </div>\n\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n          previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n          noLoop={false}\n          nonInteractive\n          className={styles.sticker}\n        />\n        <div className={styles.title}>{lang('Create Backup')}</div>\n        <div className={styles.info}>\n          <p className={styles.info__space}>{renderText(lang('$auth_backup_description1'))}</p>\n          <p>{renderText(lang('$auth_backup_description2'))}</p>\n          <p>{renderText(lang('$auth_backup_description3'))}</p>\n        </div>\n        <div className={styles.buttons}>\n          <Button\n            isPrimary\n            className={buildClassName(styles.btn, styles.btn_wide, !canSkipMnemonicCheck && styles.btn_single)}\n            onClick={openAuthBackupWalletModal}\n          >\n            {lang('$back_up_auth')}\n          </Button>\n          {canSkipMnemonicCheck && (\n            <Button\n              isDestructive\n              isText\n              className={buildClassName(styles.btn, styles.btn_push)}\n              onClick={skipCheckMnemonic}\n            >\n              {lang('Later')}\n            </Button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(AuthCreateBackup);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n}\n\nconst AuthCreateBiometrics = ({\n  isActive,\n  method,\n}: OwnProps) => {\n  const {\n    startCreatingBiometrics,\n    resetAuth,\n    skipCreateBiometrics,\n  } = getActions();\n\n  const lang = useLang();\n  const isImporting = method !== 'createAccount';\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.happy}\n        previewUrl={ANIMATED_STICKERS_PATHS.happyPreview}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n      />\n      <div className={styles.title}>{lang('Congratulations!')}</div>\n      <p className={styles.info}>\n        <b>{lang(isImporting ? 'The wallet is imported' : 'The wallet is ready')}.</b>\n      </p>\n      <p className={styles.info}>\n        {lang('Create a password or use biometric authentication to protect it.')}\n      </p>\n\n      <div className={styles.buttons}>\n        <Button\n          isPrimary\n          className={styles.btn}\n          onClick={startCreatingBiometrics}\n        >\n          {lang('Connect Biometrics')}\n        </Button>\n        <Button\n          isText\n          className={buildClassName(styles.btn, styles.btn_text)}\n          onClick={skipCreateBiometrics}\n        >\n          {lang('Use Password')}\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCreateBiometrics);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { getIsFaceIdAvailable, getIsTouchIdAvailable } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\nimport touchIdSvg from '../../assets/settings/settings_biometrics.svg';\nimport faceIdSvg from '../../assets/settings/settings_face-id.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isLoading?: boolean;\n}\n\nconst AuthCreateNativeBiometrics = ({ isActive, isLoading }: OwnProps) => {\n  const { afterCreateNativeBiometrics, skipCreateNativeBiometrics, resetAuth } = getActions();\n\n  const lang = useLang();\n\n  const isFaceId = getIsFaceIdAvailable();\n  const isTouchId = getIsTouchIdAvailable();\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  return (\n    <div className={styles.container}>\n      <Button isSimple isText onClick={resetAuth} className={styles.headerBack}>\n        <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <img\n        src={isFaceId ? faceIdSvg : touchIdSvg}\n        alt=\"\"\n        className={styles.biometricsIcon}\n      />\n\n      <div className={styles.biometricsTitle}>\n        {isFaceId ? lang('Use Face ID') : (isTouchId ? lang('Use Touch ID') : lang('Use Biometrics'))}\n      </div>\n      <div className={styles.biometricsSubtitle}>\n        {lang('You can connect your biometric data for more convenience')}\n      </div>\n\n      <div className={styles.buttons}>\n        <Button\n          isPrimary\n          className={styles.btn}\n          isLoading={isLoading}\n          onClick={!isLoading ? afterCreateNativeBiometrics : undefined}\n        >\n          {lang(isFaceId ? 'Connect Face ID' : (isTouchId ? 'Connect Touch ID' : 'Connect Biometrics'))}\n        </Button>\n        <Button\n          isText\n          isDisabled={isLoading}\n          className={buildClassName(styles.btn, styles.btn_text)}\n          onClick={skipCreateNativeBiometrics}\n        >\n          {lang('Not Now')}\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCreateNativeBiometrics);\n","import { useEffect, useState } from '../lib/teact/teact';\n\nconst SPECIAL_CHARS_REGEX = /[`!@#$%^&*()_+\\-=\\]{};':\"\\\\|,.<>?~]/;\n\ninterface OwnProps {\n  firstPassword?: string;\n  secondPassword?: string;\n  requiredMinLength?: number;\n  requiredLength?: number;\n  isOnlyNumbers?: boolean;\n}\n\nexport const usePasswordValidation = ({\n  firstPassword = '',\n  secondPassword = '',\n  requiredMinLength = 8,\n  requiredLength,\n  isOnlyNumbers,\n}: OwnProps) => {\n  const [invalidLength, setInvalidLength] = useState(false);\n  const [noNumber, setNoNumber] = useState(false);\n  const [noUpperCase, setNoUpperCase] = useState(false);\n  const [noLowerCase, setNoLowerCase] = useState(false);\n  const [noSpecialChar, setNoSpecialChar] = useState(false);\n  const [noEqual, setNoEqual] = useState(false);\n\n  useEffect(() => {\n    const isInvalidLength = Boolean(\n      (!requiredLength && firstPassword.length < requiredMinLength)\n      || (requiredLength && firstPassword.length !== requiredLength),\n    );\n    setInvalidLength(isInvalidLength);\n    setNoUpperCase(!isOnlyNumbers && firstPassword.toLowerCase() === firstPassword);\n    setNoLowerCase(!isOnlyNumbers && firstPassword.toUpperCase() === firstPassword);\n    setNoNumber(!/\\d/.test(firstPassword));\n    setNoEqual(Boolean(firstPassword && firstPassword !== secondPassword));\n    setNoSpecialChar(!isOnlyNumbers && !SPECIAL_CHARS_REGEX.test(firstPassword));\n  }, [firstPassword, secondPassword, requiredMinLength, isOnlyNumbers, requiredLength]);\n\n  return {\n    invalidLength, noNumber, noUpperCase, noLowerCase, noEqual, noSpecialChar,\n  };\n};\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport { PIN_LENGTH } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { IS_ANDROID, IS_IOS } from '../../util/windowEnvironment';\n\nimport useFlag from '../../hooks/useFlag';\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport { usePasswordValidation } from '../../hooks/usePasswordValidation';\n\nimport Button from './Button';\nimport Input from './Input';\nimport Modal from './Modal';\n\nimport styles from '../auth/Auth.module.scss';\nimport modalStyles from './Modal.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isLoading?: boolean;\n  containerClassName?: string;\n  formId: string;\n  onCancel: NoneToVoidFunction;\n  onSubmit: (password: string, isPasswordNumeric: boolean) => void;\n}\n\nfunction CreatePasswordForm({\n  isActive, isLoading, formId, onCancel, onSubmit, containerClassName,\n}: OwnProps) {\n  const lang = useLang();\n  const isMobile = IS_IOS || IS_ANDROID;\n\n  const firstInputRef = useRef<HTMLInputElement>();\n\n  const [isJustSubmitted, setIsJustSubmitted] = useState<boolean>(false);\n  const [firstPassword, setFirstPassword] = useState<string>('');\n  const [secondPassword, setSecondPassword] = useState<string>('');\n  const [isPasswordFocused, markPasswordFocused, unmarkPasswordFocused] = useFlag(false);\n  const [isWeakPasswordModalOpen, openWeakPasswordModal, closeWeakPasswordModal] = useFlag(false);\n\n  const [hasError, setHasError] = useState<boolean>(false);\n  const [isPasswordsNotEqual, setIsPasswordsNotEqual] = useState<boolean>(false);\n  const [isSecondPasswordFocused, markSecondPasswordFocused, unmarkSecondPasswordFocused] = useFlag(false);\n  const canSubmit = isActive && firstPassword.length > 0 && secondPassword.length > 0 && !hasError;\n\n  const shouldRenderError = hasError && !isPasswordFocused;\n\n  const validation = usePasswordValidation({\n    firstPassword,\n    secondPassword,\n    isOnlyNumbers: isMobile,\n    requiredLength: isMobile ? PIN_LENGTH : undefined,\n  });\n\n  useFocusAfterAnimation(firstInputRef, !isActive);\n\n  useEffect(() => {\n    setIsPasswordsNotEqual(false);\n    if (firstPassword === '' || !isActive || isPasswordFocused) {\n      setHasError(false);\n      return;\n    }\n\n    const { noEqual, invalidLength } = validation;\n\n    if ((!isSecondPasswordFocused || isJustSubmitted) && noEqual && secondPassword !== '') {\n      setHasError(true);\n      setIsPasswordsNotEqual(true);\n    } else if (!noEqual || secondPassword === '' || (isSecondPasswordFocused && !isJustSubmitted)) {\n      setHasError(false);\n    }\n    if (isMobile && invalidLength && !isJustSubmitted) {\n      setHasError(true);\n    }\n  }, [\n    isActive, firstPassword, secondPassword, validation, isSecondPasswordFocused, isPasswordFocused, isJustSubmitted,\n    isMobile,\n  ]);\n\n  const handleFirstPasswordChange = useLastCallback((value: string) => {\n    setFirstPassword(value);\n    if (isJustSubmitted) {\n      setIsJustSubmitted(false);\n    }\n  });\n\n  const handleSecondPasswordChange = useLastCallback((value: string) => {\n    setSecondPassword(value);\n    if (isJustSubmitted) {\n      setIsJustSubmitted(false);\n    }\n  });\n\n  const handleSubmit = useLastCallback((e: React.FormEvent) => {\n    stopEvent(e);\n\n    if (!canSubmit) {\n      return;\n    }\n\n    if (firstPassword !== secondPassword) {\n      setIsJustSubmitted(true);\n      setHasError(true);\n      setIsPasswordsNotEqual(true);\n      return;\n    }\n\n    const isWeakPassword = Object.values(validation).find((rule) => rule);\n\n    if (!isMobile && isWeakPassword && !isWeakPasswordModalOpen) {\n      openWeakPasswordModal();\n      return;\n    }\n\n    if (isWeakPasswordModalOpen) {\n      closeWeakPasswordModal();\n    }\n\n    onSubmit(firstPassword, isMobile);\n  });\n\n  function renderErrors() {\n    if (isPasswordsNotEqual) {\n      return (\n        <div className={buildClassName(styles.errors, styles.error)}>\n          {lang('Passwords must be equal.')}\n        </div>\n      );\n    }\n\n    const {\n      invalidLength,\n      noUpperCase,\n      noLowerCase,\n      noNumber,\n      noSpecialChar,\n    } = validation;\n\n    if (isMobile) {\n      return (\n        <div className={styles.passwordRules}>\n          <span className={getValidationRuleClass(shouldRenderError, invalidLength || noNumber)}>\n            {lang('Password must contain %length% digits.', { length: PIN_LENGTH })}\n          </span>\n        </div>\n      );\n    }\n\n    return (\n      <div className={styles.passwordRules}>\n        {lang('To protect your wallet as much as possible, use a password with')}\n        <span className={getValidationRuleClass(shouldRenderError, invalidLength)}>\n          {' '}{lang('$auth_password_rule_8chars')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noLowerCase)}>\n          {' '}{lang('$auth_password_rule_one_small_char')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noUpperCase)}>\n          {' '}{lang('$auth_password_rule_one_capital_char')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noNumber)}>\n          {' '}{lang('$auth_password_rule_one_digit')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noSpecialChar)}>\n          {' '}{lang('$auth_password_rule_one_special_char')}\n        </span>.\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <form id={formId} className={buildClassName(styles.form, containerClassName)} onSubmit={handleSubmit}>\n        <div className={styles.formWidgets}>\n          <Input\n            ref={firstInputRef}\n            type=\"password\"\n            isRequired\n            id=\"first-password\"\n            inputMode={isMobile ? 'numeric' : undefined}\n            hasError={shouldRenderError}\n            placeholder={lang('Enter your password...')}\n            value={firstPassword}\n            autoComplete=\"new-password\"\n            onInput={handleFirstPasswordChange}\n            onFocus={markPasswordFocused}\n            onBlur={unmarkPasswordFocused}\n            className={styles.input}\n            maxLength={isMobile ? PIN_LENGTH : undefined}\n            enterKeyHint=\"next\"\n          />\n          <Input\n            type=\"password\"\n            isRequired\n            id=\"second-password\"\n            inputMode={isMobile ? 'numeric' : undefined}\n            placeholder={lang('...and repeat it')}\n            hasError={isPasswordsNotEqual}\n            value={secondPassword}\n            autoComplete=\"new-password\"\n            onInput={handleSecondPasswordChange}\n            onFocus={markSecondPasswordFocused}\n            onBlur={unmarkSecondPasswordFocused}\n            className={styles.input}\n            maxLength={isMobile ? PIN_LENGTH : undefined}\n            enterKeyHint=\"next\"\n          />\n        </div>\n\n        {renderErrors()}\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onCancel} className={modalStyles.button} isDisabled={isLoading}>\n            {lang('Cancel')}\n          </Button>\n          <Button\n            isSubmit\n            isPrimary\n            isDisabled={isPasswordsNotEqual || firstPassword === ''}\n            isLoading={isLoading}\n            className={modalStyles.button}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      </form>\n\n      <Modal\n        isOpen={isWeakPasswordModalOpen}\n        isCompact\n        onClose={closeWeakPasswordModal}\n        title={lang('Insecure Password')}\n      >\n        <p className={modalStyles.text}>\n          {lang('Your have entered an insecure password, which can be easily guessed by scammers.')}\n        </p>\n        <p className={modalStyles.text}>\n          {lang('Continue or change password to something more secure?')}\n        </p>\n        <div className={buildClassName(modalStyles.buttons, modalStyles.buttonsNoExtraSpace)}>\n          <Button isPrimary onClick={closeWeakPasswordModal} className={modalStyles.button}>{lang('Change')}</Button>\n          <Button forFormId={formId} isSubmit isDestructive className={modalStyles.button}>{lang('Continue')}</Button>\n        </div>\n      </Modal>\n    </>\n  );\n}\n\nexport default memo(CreatePasswordForm);\n\nfunction getValidationRuleClass(shouldRenderError: boolean, ruleHasError: boolean) {\n  return buildClassName(\n    styles.passwordRule,\n    !ruleHasError ? styles.valid : shouldRenderError ? styles.invalid : undefined,\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport { getIsBiometricAuthSupported } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport CreatePasswordForm from '../ui/CreatePasswordForm';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n  isLoading?: boolean;\n}\n\nconst AuthCreatePassword = ({\n  isActive,\n  method,\n  isLoading,\n}: OwnProps) => {\n  const { afterCreatePassword, resetAuth } = getActions();\n\n  const lang = useLang();\n  const isImporting = method !== 'createAccount';\n  const formId = getFormId(method!);\n  const withDescription = !getIsBiometricAuthSupported();\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  const handleSubmit = useLastCallback((password: string, isPasswordNumeric: boolean) => {\n    afterCreatePassword({ password, isPasswordNumeric });\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n        previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n      />\n      <div className={buildClassName(styles.title, !withDescription && styles.titleSmallMargin)}>\n        {lang(withDescription ? 'Congratulations!' : 'Create Password')}\n      </div>\n      {withDescription && (\n        <>\n          <p className={styles.info}>\n            <b>{lang(isImporting ? 'The wallet is imported' : 'The wallet is ready')}.</b>\n          </p>\n          <p className={styles.info}>\n            {lang('Create a password to protect it.')}\n          </p>\n        </>\n      )}\n\n      <CreatePasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        formId={formId}\n        onCancel={resetAuth}\n        onSubmit={handleSubmit}\n      />\n    </div>\n  );\n};\n\nfunction getFormId(method: AuthMethod) {\n  switch (method) {\n    case 'createAccount':\n      return 'auth_create_password';\n    case 'importMnemonic':\n      return 'auth_import_mnemonic_password';\n    case 'importHardwareWallet':\n      return 'auth_import_hardware_password';\n  }\n}\n\nexport default memo(AuthCreatePassword);\n","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport { PIN_LENGTH } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { pause } from '../../util/schedulers';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport PinPad from '../ui/PinPad';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n}\n\nconst SUBMIT_PAUSE_MS = 750;\n\nconst AuthCreatePin = ({\n  isActive,\n  method,\n}: OwnProps) => {\n  const { createPin, resetAuth } = getActions();\n\n  const lang = useLang();\n  const [pin, setPin] = useState<string>('');\n  const isImporting = method !== 'createAccount';\n\n  useEffect(() => {\n    if (isActive) {\n      setPin('');\n    }\n  }, [isActive]);\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  const handleSubmit = useLastCallback(async (value: string) => {\n    await pause(SUBMIT_PAUSE_MS);\n    createPin({ pin: value, isImporting });\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.containerFullSize)}>\n      <Button isSimple isText onClick={resetAuth} className={styles.headerBack}>\n        <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <div className={styles.pinPadHeader}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n          previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n          noLoop={false}\n          nonInteractive\n        />\n        <div className={styles.title}>{lang(isImporting ? 'Wallet is imported!' : 'Wallet is ready!')}</div>\n      </div>\n      <PinPad\n        isActive={isActive}\n        title={lang('Create a code to protect it')}\n        length={PIN_LENGTH}\n        value={pin}\n        onChange={setPin}\n        onSubmit={handleSubmit}\n      />\n    </div>\n  );\n};\n\nexport default memo(AuthCreatePin);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useMediaTransition from '../../hooks/useMediaTransition';\nimport useTimeout from '../../hooks/useTimeout';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\nconst START_DELAY = 700;\nconst INTERVAL = SECOND;\n\nconst AuthCreatingWallet = ({ isActive }: OwnProps) => {\n  const lang = useLang();\n  const [one, markOne] = useFlag();\n  const [two, markTwo] = useFlag();\n  const [three, markThree] = useFlag();\n\n  useTimeout(markOne, isActive ? START_DELAY : undefined);\n  useTimeout(markTwo, isActive ? START_DELAY + INTERVAL : undefined);\n  useTimeout(markThree, isActive ? START_DELAY + INTERVAL * 2 : undefined);\n\n  const oneRef = useMediaTransition<HTMLElement>(one);\n  const twoRef = useMediaTransition<HTMLElement>(two);\n  const threeRef = useMediaTransition<HTMLElement>(three);\n\n  return (\n    <div className={buildClassName(styles.container, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.hello}\n        previewUrl={ANIMATED_STICKERS_PATHS.helloPreview}\n        nonInteractive\n        noLoop={false}\n      />\n      <div className={styles.title}>{lang('Creating Wallet...')}</div>\n\n      <div className={styles.counter}>\n        <p className={styles.counterTitle}>{lang('On the count of three...')}</p>\n        <b ref={oneRef} className={buildClassName(styles.counterDigit, 'rounded-font')}>1</b>\n        <b ref={twoRef} className={buildClassName(styles.counterDigit, 'rounded-font')}>2</b>\n        <b ref={threeRef} className={buildClassName(styles.counterDigit, 'rounded-font')}>3</b>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCreatingWallet);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { IS_PRODUCTION } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  onSkip: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction AuthBackupWarning({ isOpen, onSkip, onClose }: OwnProps) {\n  const { openAuthBackupWalletModal } = getActions();\n\n  const handleBackupClick = useLastCallback(() => {\n    onClose();\n    openAuthBackupWalletModal();\n  });\n\n  const lang = useLang();\n\n  const canSkipMnemonicCheck = !IS_PRODUCTION;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      forceBottomSheet\n      nativeBottomSheetKey=\"backup-warning\"\n      dialogClassName={styles.disclaimerBackupDialog}\n    >\n      <p className={styles.backupNotice}>{renderText(lang('$auth_backup_warning_notice'))}</p>\n      <div className={styles.backupNoticeButtons}>\n        <Button\n          isPrimary\n          className={buildClassName(styles.btn, styles.btn_wide, !canSkipMnemonicCheck && styles.btn_single)}\n          onClick={handleBackupClick}\n        >\n          {lang('Back Up Now')}\n        </Button>\n        {canSkipMnemonicCheck && (\n          <Button\n            isDestructive\n            className={buildClassName(styles.btn, styles.btn_mini)}\n            onClick={onSkip}\n          >\n            {lang('Later')}\n          </Button>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(AuthBackupWarning);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX, APP_NAME } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { useOpenFromMainBottomSheet } from '../../hooks/useDelegatedBottomSheet';\nimport useFlag from '../../hooks/useFlag';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Checkbox from '../ui/Checkbox';\nimport AuthBackupWarning from './AuthBackupWarning';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isImport?: boolean;\n}\n\nconst CONFIRM_DELAY_MS = 350;\n\nconst AuthDisclaimer = ({\n  isActive, isImport,\n}: OwnProps) => {\n  const {\n    skipCheckMnemonic,\n    confirmDisclaimer,\n    cancelDisclaimer,\n  } = getActions();\n\n  const lang = useLang();\n  const [isInformationConfirmed, markInformationConfirmed, unmarkInformationConfirmed] = useFlag(false);\n\n  useHistoryBack({\n    isActive,\n    onBack: cancelDisclaimer,\n  });\n\n  const setIsInformationConfirmed = useLastCallback((isConfirmed: boolean) => {\n    if (isConfirmed) {\n      markInformationConfirmed();\n\n      if (isImport) {\n        window.setTimeout(confirmDisclaimer, CONFIRM_DELAY_MS);\n      }\n    } else {\n      unmarkInformationConfirmed();\n    }\n  });\n\n  useOpenFromMainBottomSheet('backup-warning', markInformationConfirmed);\n\n  const handleCloseBackupWarningModal = useLastCallback(() => {\n    setIsInformationConfirmed(false);\n  });\n\n  const handleSkipMnemonic = useLastCallback(() => {\n    skipCheckMnemonic();\n    handleCloseBackupWarningModal();\n  });\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n        <div className={styles.stickerAndTitle}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n            previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n            noLoop={false}\n            nonInteractive\n            size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n            className={styles.sticker}\n          />\n          <div className={styles.title}>{lang('Use Responsibly')}</div>\n        </div>\n        <div className={styles.infoBlock}>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description1', { app_name: APP_NAME }))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description2'))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description3', { app_name: APP_NAME }))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description4'))}</p>\n        </div>\n\n        <Checkbox\n          id=\"information-confirmed\"\n          checked={isInformationConfirmed}\n          isDisabled={isImport && isInformationConfirmed}\n          className={styles.informationCheckbox}\n          contentClassName={styles.informationCheckboxContent}\n          onChange={setIsInformationConfirmed}\n        >\n          {lang('I have read and accept this information')}\n        </Checkbox>\n\n        {!isImport && (\n          <AuthBackupWarning\n            isOpen={isInformationConfirmed}\n            onClose={handleCloseBackupWarningModal}\n            onSkip={handleSkipMnemonic}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthDisclaimer);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport {\n  ANIMATED_STICKER_SMALL_SIZE_PX, IS_BIP39_MNEMONIC_ENABLED, MNEMONIC_COUNT, MNEMONIC_COUNTS, PRIVATE_KEY_HEX_LENGTH,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport isMnemonicPrivateKey from '../../util/isMnemonicPrivateKey';\nimport { compact } from '../../util/iteratees';\nimport { callApi } from '../../api';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useClipboardPaste from '../../hooks/useClipboardPaste';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport InputMnemonic from '../common/InputMnemonic';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ntype StateProps = {\n  error?: string;\n  isLoading?: boolean;\n};\n\nconst MNEMONIC_INPUTS = [...Array(MNEMONIC_COUNT)].map((_, index) => ({\n  id: index,\n  label: `${index + 1}`,\n}));\nconst MAX_LENGTH = PRIVATE_KEY_HEX_LENGTH;\nconst SLIDE_ANIMATION_DURATION_MS = 250;\n\nconst AuthImportMnemonic = ({ isActive, isLoading, error }: OwnProps & StateProps) => {\n  const {\n    afterImportMnemonic,\n    resetAuth,\n    cleanAuthError,\n  } = getActions();\n\n  const lang = useLang();\n  const [mnemonic, setMnemonic] = useState<Record<number, string>>({});\n  const { isPortrait } = useDeviceScreen();\n\n  const handleMnemonicSet = useLastCallback((pastedMnemonic: string[]) => {\n    if (!MNEMONIC_COUNTS.includes(pastedMnemonic.length) && !isMnemonicPrivateKey(pastedMnemonic)) {\n      return;\n    }\n\n    // RAF is a workaround for several Android browsers (e.g. Vivaldi)\n    requestAnimationFrame(() => {\n      setMnemonic(pastedMnemonic);\n    });\n\n    if (document.activeElement?.id.startsWith('import-mnemonic-')) {\n      (document.activeElement as HTMLInputElement).blur();\n    }\n  });\n\n  const handlePasteMnemonic = useLastCallback((pastedText: string) => {\n    const pastedMnemonic = parsePastedText(pastedText);\n\n    if (pastedMnemonic.length === 1 && document.activeElement?.id.startsWith('import-mnemonic-')) {\n      (document.activeElement as HTMLInputElement).value = pastedMnemonic[0];\n\n      const event = new Event('input');\n      (document.activeElement as HTMLInputElement).dispatchEvent(event);\n\n      return;\n    }\n\n    handleMnemonicSet(pastedMnemonic);\n  });\n\n  useClipboardPaste(Boolean(isActive), handlePasteMnemonic);\n\n  const isSubmitDisabled = useMemo(() => {\n    const mnemonicValues = compact(Object.values(mnemonic));\n\n    return (!MNEMONIC_COUNTS.includes(mnemonicValues.length) && !isMnemonicPrivateKey(mnemonicValues))\n      || !!error;\n  }, [mnemonic, error]);\n\n  const handleSetWord = useLastCallback((value: string, index: number) => {\n    cleanAuthError();\n    const pastedMnemonic = parsePastedText(value);\n    if (MNEMONIC_COUNTS.includes(pastedMnemonic.length)) {\n      handleMnemonicSet(pastedMnemonic);\n      return;\n    }\n\n    setMnemonic({\n      ...mnemonic,\n      [index]: pastedMnemonic[0].toLowerCase(),\n    });\n  });\n\n  const handleCancel = useLastCallback(() => {\n    setTimeout(() => {\n      resetAuth();\n    }, SLIDE_ANIMATION_DURATION_MS);\n  });\n\n  const handleSubmit = useLastCallback(async () => {\n    if (isSubmitDisabled) return;\n\n    const mnemonicValues = compact(Object.values(mnemonic));\n    if (mnemonicValues.length === 12) {\n      const isShortMnemonicValid = await callApi('validateMnemonic', mnemonicValues);\n      if (!isShortMnemonicValid) return;\n    }\n\n    afterImportMnemonic({ mnemonic: mnemonicValues });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleCancel,\n  });\n\n  useEffect(() => {\n    return isSubmitDisabled || isLoading\n      ? undefined\n      : captureKeyboardListeners({\n        onEnter: { handler: handleSubmit, noStopPropagation: true },\n      });\n  }, [handleSubmit, isLoading, isSubmitDisabled, mnemonic]);\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        size={ANIMATED_STICKER_SMALL_SIZE_PX}\n        tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n        previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n        nonInteractive\n        noLoop={false}\n        className={styles.sticker}\n      />\n      <div className={buildClassName(styles.title, styles.title_afterSmallSticker)}>\n        {lang('Enter Secret Words')}\n      </div>\n      <div className={buildClassName(styles.info, styles.infoSmallFont, styles.infoPull)}>\n        {renderText(lang(IS_BIP39_MNEMONIC_ENABLED\n          ? '$auth_import_mnemonic_description'\n          : '$auth_import_24_mnemonic_description'))}\n      </div>\n\n      <div className={styles.importingContent}>\n        {MNEMONIC_INPUTS.map(({ id, label }, i) => (\n          <InputMnemonic\n            key={id}\n            id={`import-mnemonic-${id}`}\n            nextId={id + 1 < MNEMONIC_COUNT ? `import-mnemonic-${id + 1}` : undefined}\n            labelText={label}\n            value={mnemonic[id]}\n            suggestionsPosition={getSuggestPosition(id, isPortrait)}\n            inputArg={id}\n            onInput={handleSetWord}\n            onEnter={i === MNEMONIC_COUNT - 1 ? handleSubmit : undefined}\n          />\n        ))}\n      </div>\n\n      <div className={styles.buttons}>\n        {error && <div className={styles.footerError}>{lang(error)}</div>}\n        <div className={styles.buttons__inner}>\n          <Button onClick={handleCancel} className={styles.footerButton}>\n            {lang('Cancel')}\n          </Button>\n          <Button\n            isPrimary\n            isDisabled={isSubmitDisabled}\n            isLoading={isLoading}\n            className={styles.footerButton}\n            onClick={handleSubmit}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    error: global.auth.error,\n    isLoading: global.auth.isLoading,\n  };\n})(AuthImportMnemonic));\n\nfunction parsePastedText(str = '') {\n  return str\n    .replace(/(?:\\r\\n)+|[\\r\\n\\s;,\\t]+/g, ' ')\n    .trim()\n    .split(' ')\n    .map((w) => w.slice(0, MAX_LENGTH));\n}\n\nfunction getSuggestPosition(id: number, isPortrait: boolean = false) {\n  if (isPortrait) {\n    return 'top';\n  }\n\n  return ((id > 5 && id < 8) || (id > 13 && id < 16) || id > 21) ? 'top' : undefined;\n}\n","import { useEffect } from '../lib/teact/teact';\n\nconst MAX_MESSAGE_LENGTH = 4096;\n\nconst useClipboardPaste = (isActive: boolean, onPaste: (value: string) => void) => {\n  useEffect(() => {\n    if (!isActive) {\n      return undefined;\n    }\n\n    function handlePaste(e: ClipboardEvent) {\n      if (!e.clipboardData) {\n        return;\n      }\n\n      const pastedText = e.clipboardData.getData('text').substring(0, MAX_MESSAGE_LENGTH);\n\n      if (!pastedText) {\n        return;\n      }\n\n      e.preventDefault();\n\n      onPaste(pastedText);\n    }\n\n    document.addEventListener('paste', handlePaste, false);\n\n    return () => {\n      document.removeEventListener('paste', handlePaste, false);\n    };\n  }, [isActive, onPaste]);\n};\n\nexport default useClipboardPaste;\n","import React, {\n  memo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiImportAddressByChain } from '../../api/types';\n\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Input from '../ui/Input';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  isLoading?: boolean;\n  onCancel: NoneToVoidFunction;\n  onClose?: NoneToVoidFunction;\n};\n\nfunction AuthImportViewAccount({\n  isActive, isLoading, onCancel, onClose,\n}: OwnProps) {\n  const { importViewAccount } = getActions();\n\n  const lang = useLang();\n\n  const inputRef = useRef<HTMLInputElement>();\n  const [value, setValue] = useState<string>('');\n  const [isInvalidAddress, setIsInvalidAddress] = useState<boolean>(false);\n\n  useFocusAfterAnimation(inputRef, !isActive);\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel,\n  });\n\n  const handleChange = useLastCallback((newValue: string) => {\n    setValue(newValue);\n    if (isInvalidAddress) {\n      setIsInvalidAddress(false);\n    }\n  });\n\n  function handleSubmit(e: React.FormEvent<HTMLFormElement>) {\n    stopEvent(e);\n\n    if (isInvalidAddress || isLoading) return;\n\n    const addresses = value.trim().split(/\\s+/);\n    const addressByChain: ApiImportAddressByChain = {};\n\n    const hasValidAddress = addresses.reduce((isValid, address) => {\n      if (isValidAddressOrDomain(address, 'ton')) {\n        addressByChain.ton = address;\n        return true;\n      }\n\n      if (isValidAddressOrDomain(address, 'tron')) {\n        addressByChain.tron = address;\n        return true;\n      }\n\n      return isValid;\n    }, false);\n\n    if (hasValidAddress) {\n      importViewAccount({ addressByChain });\n      inputRef.current?.blur(); // To hide the virtual keyboard to show the loading indicator in the button\n    } else {\n      setIsInvalidAddress(true);\n    }\n  }\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('View Any Address')} onClose={onClose} onBackButtonClick={onCancel} />\n      <form\n        action=\"#\"\n        className={buildClassName(modalStyles.transitionContent, 'custom-scroll')}\n        onSubmit={handleSubmit}\n      >\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n          previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n          noLoop={false}\n          nonInteractive\n          className={styles.viewModeSticker}\n        />\n\n        <Input\n          ref={inputRef}\n          value={value}\n          hasError={isInvalidAddress}\n          placeholder={lang('Wallet Address or Domain')}\n          autoCapitalize=\"none\"\n          autoComplete=\"off\"\n          autoCorrect={false}\n          enterKeyHint=\"done\"\n          onInput={handleChange}\n        />\n\n        <p className={styles.info}>{renderText(lang('$import_view_account_note'))}</p>\n\n        <div className={modalStyles.buttons}>\n          <Button\n            isPrimary\n            isSubmit\n            className={modalStyles.buttonFullWidth}\n            isLoading={isLoading}\n            isDisabled={isInvalidAddress}\n          >\n            {isInvalidAddress ? lang('Invalid Address') : lang('Continue')}\n          </Button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default memo(AuthImportViewAccount);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  customStickerClassName?: string;\n  customButtonWrapperClassName?: string;\n  isFullSizeButton?: boolean;\n  isActive?: boolean;\n  isFirstCheckboxSelected: boolean;\n  isSecondCheckboxSelected: boolean;\n  isThirdCheckboxSelected: boolean;\n  onFirstCheckboxClick: AnyFunction;\n  onSecondCheckboxClick: AnyFunction;\n  onThirdCheckboxClick: AnyFunction;\n  textFirst: string;\n  textSecond: string;\n  textThird: string;\n  onSubmit: () => void;\n}\n\nfunction SafetyRulesContent({\n  customStickerClassName,\n  customButtonWrapperClassName,\n  isFullSizeButton,\n  isActive,\n  isFirstCheckboxSelected,\n  isSecondCheckboxSelected,\n  isThirdCheckboxSelected,\n  textFirst,\n  textSecond,\n  textThird,\n  onFirstCheckboxClick,\n  onSecondCheckboxClick,\n  onThirdCheckboxClick,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n\n  const canSubmit = isFirstCheckboxSelected && isSecondCheckboxSelected && isThirdCheckboxSelected;\n\n  const handleSubmit = useLastCallback(() => {\n    if (!canSubmit) {\n      return;\n    }\n\n    onSubmit();\n  });\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n        previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n        size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n        play={isActive}\n        nonInteractive\n        noLoop={false}\n        className={customStickerClassName || styles.modalSticker}\n      />\n      <Checkbox\n        checked={isFirstCheckboxSelected}\n        onChange={onFirstCheckboxClick}\n      >\n        {renderText(textFirst)}\n      </Checkbox>\n\n      <Checkbox\n        checked={isSecondCheckboxSelected}\n        onChange={onSecondCheckboxClick}\n      >\n        {renderText(textSecond)}\n      </Checkbox>\n\n      <Checkbox\n        checked={isThirdCheckboxSelected}\n        onChange={onThirdCheckboxClick}\n      >\n        {renderText(textThird)}\n      </Checkbox>\n\n      <div className={customButtonWrapperClassName || styles.buttonWrapper}>\n        <Button\n          isPrimary\n          isDisabled={!canSubmit}\n          className={isFullSizeButton ? styles.footerButton : undefined}\n          onClick={handleSubmit}\n        >\n          {lang('Understood')}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SafetyRulesContent);\n","import React, { memo, useState } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport SafetyRulesContent from '../common/backup/SafetyRulesContent';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\nconst AuthSafetyRules = ({ isActive }: OwnProps) => {\n  const { openCreateBackUpPage, openMnemonicPage } = getActions();\n\n  const [firstChecked, setFirstChecked] = useState(false);\n  const [secondChecked, setSecondChecked] = useState(false);\n  const [thirdChecked, setThirdChecked] = useState(false);\n\n  useHistoryBack({ isActive, onBack: openCreateBackUpPage });\n\n  const lang = useLang();\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, 'custom-scroll')}>\n        <div className={styles.header}>\n          <Button isSimple isText onClick={openCreateBackUpPage} className={styles.headerBackBlock}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Safety Rules')}</span>\n        </div>\n\n        <SafetyRulesContent\n          isActive={isActive}\n          isFullSizeButton\n          textFirst={lang('$safety_rules_one')}\n          textSecond={lang('$safety_rules_two')}\n          textThird={lang('$safety_rules_three')}\n          isFirstCheckboxSelected={firstChecked}\n          onFirstCheckboxClick={setFirstChecked}\n          isSecondCheckboxSelected={secondChecked}\n          onSecondCheckboxClick={setSecondChecked}\n          isThirdCheckboxSelected={thirdChecked}\n          onThirdCheckboxClick={setThirdChecked}\n          onSubmit={openMnemonicPage}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthSafetyRules);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  mnemonic?: string[];\n}\n\nfunction SecretWordsList({\n  mnemonic,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <>\n      <p className={buildClassName(styles.info, styles.small)}>\n        {renderText(lang('$mnemonic_list_description'))}\n      </p>\n      <p className={buildClassName(styles.warning)}>\n        {renderText(lang('$mnemonic_warning'))}\n      </p>\n      <ol className={styles.words}>\n        {mnemonic?.map((word, i) => (\n\n          <li key={i} className={styles.word}>{word}</li>\n        ))}\n      </ol>\n    </>\n  );\n}\n\nexport default memo(SecretWordsList);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX } from '../../../config';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport SecretWordsList from './SecretWordsList';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  mnemonic?: string[];\n  onSubmit: () => void;\n  buttonText: string;\n}\n\nfunction SecretWordsContent({\n  isActive,\n  mnemonic,\n  onSubmit,\n  buttonText,\n}: OwnProps) {\n  return (\n    <>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n        previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n        size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n        play={isActive}\n        nonInteractive\n        noLoop={false}\n        className={styles.modalSticker}\n      />\n      <SecretWordsList mnemonic={mnemonic} />\n      <div className={styles.buttonWrapper}>\n        <Button\n          isPrimary\n          onClick={onSubmit}\n          className={styles.footerButton}\n        >\n          {buttonText}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SecretWordsContent);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport SecretWordsContent from '../common/backup/SecretWordsContent';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  mnemonic?: string[];\n}\n\nconst AuthSecretWords = ({ isActive, mnemonic }: OwnProps) => {\n  const { openAuthBackupWalletModal, openCheckWordsPage } = getActions();\n\n  const lang = useLang();\n  useHistoryBack({ isActive, onBack: openAuthBackupWalletModal });\n\n  const wordsCount = mnemonic?.length || 0;\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, styles.containerAlignTop, 'custom-scroll')}>\n\n        <div className={styles.header}>\n          <Button isSimple isText onClick={openAuthBackupWalletModal} className={styles.headerBackBlock}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('%1$d Secret Words', wordsCount) as string}</span>\n        </div>\n\n        <SecretWordsContent\n          isActive={isActive}\n          mnemonic={mnemonic}\n          onSubmit={openCheckWordsPage}\n          buttonText={lang('Let\\'s Check')}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthSecretWords);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { type Theme } from '../../global/types';\n\nimport { APP_NAME, IS_CORE_WALLET } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_LEDGER_SUPPORTED } from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\nimport logoDarkPath from '../../assets/logoDark.svg';\nimport logoLightPath from '../../assets/logoLight.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ninterface StateProps {\n  hasAccounts?: boolean;\n  isLoading?: boolean;\n  theme: Theme;\n}\n\nfunction AuthStart({\n  isActive,\n  hasAccounts,\n  isLoading,\n  theme,\n}: OwnProps & StateProps) {\n  const {\n    startCreatingWallet,\n    startImportingWallet,\n    openAbout,\n    openHardwareWalletModal,\n    resetAuth,\n    openAuthImportWalletModal,\n  } = getActions();\n\n  const lang = useLang();\n  const appTheme = useAppTheme(theme);\n  const logoPath = appTheme === 'light' ? logoLightPath : logoDarkPath;\n  const [isLogoReady, markLogoReady] = useFlag();\n  const logoRef = useMediaTransition<HTMLImageElement>(isLogoReady);\n\n  function renderSimpleImportForm() {\n    return (\n      <>\n        <span className={styles.importText}>{lang('or import from')}</span>\n        <div className={styles.importButtons}>\n          <Button\n            className={buildClassName(styles.btn, !IS_LEDGER_SUPPORTED && styles.btn_single)}\n            onClick={!isLoading ? startImportingWallet : undefined}\n          >\n            {lang('Secret Words')}\n          </Button>\n          {IS_LEDGER_SUPPORTED && (\n            <Button\n              className={buildClassName(styles.btn, styles.btn_mini)}\n              onClick={!isLoading ? openHardwareWalletModal : undefined}\n            >\n              {lang('Ledger')}\n            </Button>\n          )}\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.container, 'custom-scroll')}>\n      {hasAccounts && (\n        <Button isSimple isText onClick={resetAuth} className={styles.headerBack}>\n          <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n          <span>{lang('Back')}</span>\n        </Button>\n      )}\n\n      {IS_CORE_WALLET ? (\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.coreWalletLogo}\n          previewUrl={ANIMATED_STICKERS_PATHS.coreWalletLogoPreview}\n          noLoop={false}\n          nonInteractive\n        />\n      ) : (\n        <img\n          ref={logoRef}\n          src={logoPath}\n          alt={APP_NAME}\n          className={styles.logo}\n          onLoad={markLogoReady}\n        />\n      )}\n\n      <div className={buildClassName(styles.appName, 'rounded-font')}>{APP_NAME}</div>\n      <div className={styles.info}>\n        {renderText(lang('$auth_intro'))}\n      </div>\n\n      {!IS_CORE_WALLET && (\n        <Button\n          isText\n          className={buildClassName(styles.btn, styles.btn_about)}\n          onClick={openAbout}\n        >\n          {lang('More about %app_name%', { app_name: APP_NAME })}\n          <i className=\"icon-chevron-right\" aria-hidden />\n        </Button>\n      )}\n      <div className={buildClassName(styles.importButtonsBlock, IS_CORE_WALLET && styles.importButtonsBlockSimple)}>\n        <Button\n          isPrimary\n          className={buildClassName(\n            styles.btn,\n            !IS_CORE_WALLET && styles.btn_single,\n            !IS_CORE_WALLET && styles.btn_wide,\n          )}\n          isLoading={isLoading}\n          onClick={!isLoading ? startCreatingWallet : undefined}\n        >\n          {lang('Create Wallet')}\n        </Button>\n        {IS_CORE_WALLET ? renderSimpleImportForm() : (\n          <Button\n            className={buildClassName(styles.btn, styles.btn_wide, styles.btn_single)}\n            onClick={!isLoading ? openAuthImportWalletModal : undefined}\n          >\n            {lang('Import Existing Wallet')}\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    hasAccounts: Boolean(global.currentAccountId),\n    isLoading: global.auth.isLoading,\n    theme: global.settings.theme,\n  };\n})(AuthStart));\n","import React, { memo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState, Theme } from '../../global/types';\nimport { AuthState } from '../../global/types';\n\nimport { pick } from '../../util/iteratees';\nimport { IS_ANDROID } from '../../util/windowEnvironment';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SettingsAbout from '../settings/SettingsAbout';\nimport Transition from '../ui/Transition';\nimport AuthCheckPassword from './AuthCheckPassword';\nimport AuthCheckWords from './AuthCheckWords';\nimport AuthConfirmBiometrics from './AuthConfirmBiometrics';\nimport AuthConfirmPin from './AuthConfirmPin';\nimport AuthCreateBackup from './AuthCreateBackup';\nimport AuthCreateBiometrics from './AuthCreateBiometrics';\nimport AuthCreateNativeBiometrics from './AuthCreateNativeBiometrics';\nimport AuthCreatePassword from './AuthCreatePassword';\nimport AuthCreatePin from './AuthCreatePin';\nimport AuthCreatingWallet from './AuthCreatingWallet';\nimport AuthDisclaimer from './AuthDisclaimer';\nimport AuthImportMnemonic from './AuthImportMnemonic';\nimport AuthImportViewAccount from './AuthImportViewAccount';\nimport AuthSafetyRules from './AuthSafetyRules';\nimport AuthSecretWords from './AuthSecretWords';\nimport AuthStart from './AuthStart';\n\nimport styles from './Auth.module.scss';\n\ntype StateProps = Pick<GlobalState['auth'], (\n  'state' | 'biometricsStep' | 'error' | 'mnemonic' | 'mnemonicCheckIndexes' | 'isLoading' | 'method'\n)> & { theme: Theme };\n\nconst RENDER_COUNT = Object.keys(AuthState).length / 2;\n\nconst Auth = ({\n  state,\n  biometricsStep,\n  error,\n  isLoading,\n  mnemonic,\n  mnemonicCheckIndexes,\n  method,\n  theme,\n}: StateProps) => {\n  const {\n    closeAbout,\n    closeImportViewAccount,\n  } = getActions();\n\n  const { isPortrait } = useDeviceScreen();\n\n  // Transitioning to ready state is done in another component\n  const renderingAuthState = useCurrentOrPrev(\n    state === AuthState.ready ? undefined : state,\n    true,\n  ) ?? -1;\n\n  const [prevKey, setPrevKey] = useState<AuthState | undefined>(undefined);\n  const [nextKey, setNextKey] = useState(renderingAuthState + 1);\n  const updateRenderingKeys = useLastCallback(() => {\n    setNextKey(renderingAuthState + 1);\n    setPrevKey(renderingAuthState === AuthState.confirmPin ? AuthState.createPin : undefined);\n  });\n\n  function renderAuthScreen(isActive: boolean, isFrom: boolean, currentKey: AuthState) {\n    switch (currentKey) {\n      case AuthState.none:\n        return <AuthStart isActive={isActive} />;\n      case AuthState.createWallet:\n        return <AuthCreatingWallet isActive={isActive} />;\n      case AuthState.checkPassword:\n        return (\n          <AuthCheckPassword\n            isActive={isActive}\n            isLoading={isLoading}\n            method=\"createAccount\"\n            error={error}\n          />\n        );\n      case AuthState.createPin:\n        return <AuthCreatePin isActive={isActive} method=\"createAccount\" />;\n      case AuthState.confirmPin:\n        return <AuthConfirmPin isActive={isActive} method=\"createAccount\" />;\n      case AuthState.createBiometrics:\n        return <AuthCreateBiometrics isActive={isActive} method=\"createAccount\" />;\n      case AuthState.confirmBiometrics:\n        return (\n          <AuthConfirmBiometrics\n            isActive={isActive}\n            isLoading={isLoading}\n            error={error}\n            biometricsStep={biometricsStep}\n          />\n        );\n      case AuthState.createNativeBiometrics:\n        return (\n          <AuthCreateNativeBiometrics isActive={isActive} isLoading={isLoading} />\n        );\n      case AuthState.createPassword:\n        return <AuthCreatePassword isActive={isActive} isLoading={isLoading} method=\"createAccount\" />;\n      case AuthState.createBackup:\n        return <AuthCreateBackup isActive={isActive} />;\n      case AuthState.disclaimerAndBackup:\n        return (\n          <AuthDisclaimer key=\"create\" isActive={isActive} />\n        );\n      case AuthState.importWallet:\n        return <AuthImportMnemonic isActive={isActive} />;\n      case AuthState.importWalletCreatePin:\n        return <AuthCreatePin isActive={isActive} method=\"importMnemonic\" />;\n      case AuthState.importWalletConfirmPin:\n        return <AuthConfirmPin isActive={isActive} method=\"importMnemonic\" />;\n      case AuthState.importWalletCheckPassword:\n        return (\n          <AuthCheckPassword\n            isActive={isActive}\n            isLoading={isLoading}\n            method=\"importMnemonic\"\n            error={error}\n          />\n        );\n      case AuthState.disclaimer:\n        return (\n          <AuthDisclaimer\n            key=\"import\"\n            isActive={isActive}\n            isImport\n          />\n        );\n      case AuthState.importWalletCreateNativeBiometrics:\n        return (\n          <AuthCreateNativeBiometrics isActive={isActive} isLoading={isLoading} />\n        );\n      case AuthState.importWalletCreatePassword:\n        return <AuthCreatePassword isActive={isActive} isLoading={isLoading} method={method} />;\n      case AuthState.importWalletCreateBiometrics:\n        return <AuthCreateBiometrics isActive={isActive} method={method} />;\n      case AuthState.importWalletConfirmBiometrics:\n        return (\n          <AuthConfirmBiometrics\n            isActive={isActive}\n            isLoading={isLoading}\n            error={error}\n            biometricsStep={biometricsStep}\n          />\n        );\n      case AuthState.about:\n        return (\n          <SettingsAbout\n            isActive={isActive}\n            theme={theme}\n            headerClassName={styles.aboutHeader}\n            handleBackClick={closeAbout}\n          />\n        );\n      case AuthState.safetyRules:\n        return <AuthSafetyRules isActive={isActive} />;\n      case AuthState.mnemonicPage:\n        return <AuthSecretWords isActive={isActive} mnemonic={mnemonic} />;\n      case AuthState.checkWords:\n        return <AuthCheckWords isActive={isActive} mnemonic={mnemonic} checkIndexes={mnemonicCheckIndexes} />;\n      case AuthState.importViewAccount:\n        return (\n          <AuthImportViewAccount\n            isActive={isActive}\n            isLoading={isLoading}\n            onCancel={closeImportViewAccount}\n          />\n        );\n    }\n  }\n\n  return (\n    <Transition\n      name={isPortrait ? (IS_ANDROID ? 'slideFade' : 'slideLayers') : 'semiFade'}\n      activeKey={renderingAuthState}\n      renderCount={RENDER_COUNT}\n      shouldCleanup\n      className={styles.transitionContainer}\n      slideClassName={styles.transitionSlide}\n      prevKey={prevKey}\n      nextKey={nextKey}\n      onStop={updateRenderingKeys}\n      shouldWrap\n    >\n      {renderAuthScreen}\n    </Transition>\n  );\n};\n\nexport default memo(withGlobal((global): StateProps => {\n  const authProps = pick(global.auth, [\n    'state', 'biometricsStep', 'error', 'mnemonic', 'mnemonicCheckIndexes', 'isLoading', 'method',\n  ]);\n  return {\n    ...authProps,\n    theme: global.settings.theme,\n  };\n})(Auth));\n","// extracted by mini-css-extract-plugin\nexport default {\"spinner\":\"o7Soo94L\",\"inner\":\"fnzgQDjn\",\"spin\":\"dPrfSpVS\",\"white\":\"ZwvOHvLC\"};","import React, { type ElementRef, memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Spinner.module.scss';\n\ntype OwnProps = {\n  ref?: ElementRef<HTMLDivElement>;\n  color?: 'white';\n  className?: string;\n};\n\nfunction Spinner({ ref, color, className }: OwnProps) {\n  const lang = useLang();\n\n  const fullClassName = buildClassName(\n    styles.spinner,\n    color && styles[color],\n    className,\n  );\n\n  return (\n    <div ref={ref} className={fullClassName} aria-label={lang('Loading...')}>\n      <i className={buildClassName(styles.inner, 'icon-spinner')} aria-hidden />\n    </div>\n  );\n}\n\nexport default memo(Spinner);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"h8WmgaJB\",\"icon\":\"KW5fEe2q\",\"rightItem\":\"yxdpwMGG\",\"spinner\":\"_o9pbmfe\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport Spinner from './Spinner';\n\nimport styles from './ListItem.module.scss';\n\ninterface OwnProps {\n  icon?: string;\n  label: string;\n  className?: string;\n  isLoading?: boolean;\n  onClick: NoneToVoidFunction;\n}\n\nfunction ListItem({\n  icon,\n  label,\n  className,\n  isLoading,\n  onClick,\n}: OwnProps) {\n  return (\n    <button type=\"button\" className={buildClassName(styles.root, className)} onClick={onClick} disabled={isLoading}>\n      <i className={buildClassName(styles.icon, `icon-${icon}`)} aria-hidden />\n      <span className={styles.label}>{label}</span>\n      {\n        isLoading ? (\n          <Spinner className={buildClassName(styles.rightItem, styles.spinner)} />\n        ) : (\n          <i className={buildClassName(styles.rightItem, 'icon-chevron-right')} aria-hidden />\n        )\n      }\n    </button>\n  );\n}\n\nexport default memo(ListItem);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { IS_CORE_WALLET } from '../../config';\nimport { IS_LEDGER_SUPPORTED } from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport ListItem from '../ui/ListItem';\nimport Modal from '../ui/Modal';\n\nimport styles from './Auth.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n}\n\nfunction AuthImportWalletModal({ isOpen }: StateProps) {\n  const {\n    startImportingWallet,\n    startImportViewAccount,\n    openHardwareWalletModal,\n    closeAuthImportWalletModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const handleSecretWordsClick = useLastCallback(() => {\n    closeAuthImportWalletModal();\n    startImportingWallet();\n  });\n\n  const handleImportHardwareWalletClick = useLastCallback(() => {\n    closeAuthImportWalletModal();\n    openHardwareWalletModal();\n  });\n\n  const handleImportViewAccountClick = useLastCallback(() => {\n    closeAuthImportWalletModal();\n    startImportViewAccount();\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={lang('Import Wallet')}\n      hasCloseButton\n      forceBottomSheet\n      nativeBottomSheetKey=\"import-account\"\n      contentClassName={styles.importModalContent}\n      onClose={closeAuthImportWalletModal}\n    >\n      <div className={styles.actionsSection}>\n        <ListItem\n          icon=\"key\"\n          label={lang(IS_CORE_WALLET ? '24 Secret Words' : '12/24 Secret Words')}\n          onClick={handleSecretWordsClick}\n        />\n        {IS_LEDGER_SUPPORTED && (\n          <ListItem\n            icon=\"ledger-alt\"\n            label={lang('Ledger')}\n            onClick={handleImportHardwareWalletClick}\n          />\n        )}\n      </div>\n\n      {!IS_CORE_WALLET && (\n        <div className={styles.actionsSection}>\n          <ListItem\n            icon=\"wallet-view\"\n            label={lang('View Any Address')}\n            onClick={handleImportViewAccountClick}\n          />\n        </div>\n      )}\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    isOpen: global.auth.isImportModalOpen,\n  };\n})(AuthImportWalletModal));\n","import { IS_ANDROID, IS_IOS } from './windowEnvironment';\n\nexport default function resolveSlideTransitionName() {\n  return IS_ANDROID ? 'slideFadeAndroid' : IS_IOS ? 'slideLayers' : 'slideFade';\n}\n","import { useEffect, useState } from '../lib/teact/teact';\n\nimport type { TransferState } from '../global/types';\n\nimport useCurrentOrPrev from './useCurrentOrPrev';\nimport useLastCallback from './useLastCallback';\n\nconst ANIMATION_DURATION = 300;\n\nexport default function useModalTransitionKeys(activeKey: number, isOpen: boolean) {\n  // Use previous key during closing animation\n  const renderingKey = useCurrentOrPrev(isOpen ? activeKey : undefined, true) ?? -1;\n  const [nextKey, setNextKey] = useState<TransferState>();\n\n  const updateNextKey = useLastCallback(() => {\n    setNextKey(isOpen ? renderingKey + 1 : undefined);\n  });\n\n  // Set next key after modal is fully open\n  useEffect(() => {\n    if (isOpen) {\n      setTimeout(updateNextKey, ANIMATION_DURATION);\n    }\n  }, [isOpen, updateNextKey]);\n\n  return { renderingKey, nextKey, updateNextKey };\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport { getCachedImageUrl } from '../util/getCachedImageUrl';\nimport useAsync from './useAsync';\n\nexport function useCachedImage(src?: string) {\n  const { result: imageUrl } = useAsync(\n    () => (src ? getCachedImageUrl(src) : Promise.resolve(undefined)),\n    [src],\n  );\n\n  useEffect(() => {\n    return imageUrl ? () => {\n      URL.revokeObjectURL(imageUrl);\n    } : undefined;\n  }, [imageUrl]);\n\n  return { imageUrl };\n}\n","import { useEffect, useState } from '../lib/teact/teact';\n\nconst useAsync = <T>(fn: () => Promise<T>, deps: any[], defaultValue?: T) => {\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [error, setError] = useState<Error | undefined>();\n  const [result, setResult] = useState<T | undefined>(defaultValue);\n  useEffect(() => {\n    setIsLoading(true);\n    let wasCancelled = false;\n    fn().then((res) => {\n      if (wasCancelled) return;\n      setIsLoading(false);\n      setResult(res);\n    }, (err) => {\n      if (wasCancelled) return;\n      setIsLoading(false);\n      setError(err);\n    });\n    return () => {\n      wasCancelled = true;\n    };\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, deps);\n  return { isLoading, error, result };\n};\n\nexport default useAsync;\n","import { IMAGE_CACHE_NAME } from '../config';\n\nexport async function getCachedImageUrl(url: string) {\n  const cache = await caches.open(IMAGE_CACHE_NAME);\n\n  const cachedResponse = await cache.match(url);\n  if (cachedResponse) {\n    const blob = await cachedResponse.blob();\n\n    return URL.createObjectURL(blob);\n  }\n\n  const response = await fetch(url);\n  if (!response.ok) {\n    throw new Error(`Image loading error: ${response.statusText}. URL: ${url}`);\n  }\n\n  await cache.put(url, response.clone());\n  const blob = await response.blob();\n\n  return URL.createObjectURL(blob);\n}\n","import type { ApiMtwCardBorderShineType, ApiNft } from '../api/types';\n\nimport buildClassName from '../util/buildClassName';\nimport { getCardNftImageUrl } from '../util/url';\n\ninterface CardCustomizationResult {\n  backgroundImageUrl?: string;\n  withTextGradient: boolean;\n  classNames: string;\n  borderShineType?: ApiMtwCardBorderShineType;\n}\n\nexport default function useCardCustomization(\n  cardNft?: ApiNft,\n): CardCustomizationResult {\n  const { mtwCardType, mtwCardTextType, mtwCardBorderShineType } = cardNft?.metadata || {};\n  const withTextGradient = !!mtwCardType && mtwCardType !== 'standard';\n  const mtwCardTextTypeClass = mtwCardType !== 'standard'\n    ? undefined\n    : (mtwCardTextType === 'dark' ? 'MtwCard__darkText' : 'MtwCard__lightText');\n\n  const backgroundImageUrl = cardNft ? getCardNftImageUrl(cardNft) : undefined;\n\n  return {\n    backgroundImageUrl,\n    withTextGradient,\n    classNames: buildClassName(mtwCardType && `MtwCard__${mtwCardType}`, mtwCardTextTypeClass),\n    borderShineType: mtwCardBorderShineType,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"bdfebopt\",\"current\":\"bMmcsmZO\",\"customCard\":\"HF2p9CT1\",\"accountName\":\"MUMjgNQ5\",\"accountAddressBlock\":\"dhGETdr1\",\"edit\":\"FRX4SQTO\"};","import React from '../../../../lib/teact/teact';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { Account, AccountType } from '../../../../global/types';\n\nimport { getMainAccountAddress } from '../../../../util/account';\nimport buildClassName from '../../../../util/buildClassName';\nimport buildStyle from '../../../../util/buildStyle';\nimport { stopEvent } from '../../../../util/domEvents';\nimport { isKeyCountGreater } from '../../../../util/isEmptyObject';\nimport { shortenAddress } from '../../../../util/shortenAddress';\n\nimport { useCachedImage } from '../../../../hooks/useCachedImage';\nimport useCardCustomization from '../../../../hooks/useCardCustomization';\nimport useLang from '../../../../hooks/useLang';\n\nimport styles from './AccountButton.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  accountId: string;\n  addressByChain: Account['addressByChain'];\n  accountType: AccountType;\n  title?: string;\n  cardBackgroundNft?: ApiNft;\n  canEditAccount?: boolean;\n  onClick: (accountId: string) => void;\n  onEdit: NoneToVoidFunction;\n}\n\nexport const ACCOUNT_WITH_ICON_ADDRESS_SHIFT = 3;\nexport const ACCOUNT_ADDRESS_SHIFT = 4;\n\nfunction AccountButton({\n  isActive,\n  accountId,\n  addressByChain,\n  accountType,\n  title,\n  cardBackgroundNft,\n  canEditAccount,\n  onClick,\n  onEdit,\n}: OwnProps) {\n  const lang = useLang();\n\n  const isHardware = accountType === 'hardware';\n  const isViewMode = accountType === 'view';\n\n  const addressOrMultichain = isKeyCountGreater(addressByChain, 1)\n    ? lang('Multichain')\n    : shortenAddress(\n      getMainAccountAddress(addressByChain) ?? '',\n      accountType !== 'mnemonic' ? ACCOUNT_WITH_ICON_ADDRESS_SHIFT : ACCOUNT_ADDRESS_SHIFT,\n      ACCOUNT_ADDRESS_SHIFT,\n    );\n\n  const {\n    backgroundImageUrl,\n    withTextGradient,\n    classNames: mtwCardClassNames,\n  } = useCardCustomization(cardBackgroundNft);\n  const { imageUrl } = useCachedImage(backgroundImageUrl);\n  const fullClassName = buildClassName(\n    styles.button,\n    isActive && styles.current,\n    imageUrl && styles.customCard,\n    imageUrl && mtwCardClassNames,\n  );\n\n  const handleEditClick = (e: React.MouseEvent) => {\n    stopEvent(e);\n\n    onEdit();\n  };\n\n  return (\n    <div\n      className={fullClassName}\n      aria-label={lang('Switch Account')}\n      onClick={isActive ? undefined : () => onClick(accountId)}\n      style={buildStyle(imageUrl && `--bg: url(${imageUrl})`)}\n    >\n      {title && <span className={buildClassName(styles.accountName, withTextGradient && 'gradientText')}>{title}</span>}\n      <div className={buildClassName(styles.accountAddressBlock, withTextGradient && 'gradientText')}>\n        {isHardware && <i className=\"icon-ledger\" aria-hidden />}\n        {isViewMode && <i className=\"icon-eye-filled\" aria-hidden />}\n        <span>{addressOrMultichain}</span>\n      </div>\n\n      {isActive && canEditAccount && (\n        <div className={styles.edit} onClick={handleEditClick}>\n          <i className=\"icon-pen\" aria-hidden />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default AccountButton;\n","// extracted by mini-css-extract-plugin\nexport default {\"accounts\":\"DP7r4ob0\",\"accounts_two\":\"aMoUTjsw\",\"accountsTwo\":\"aMoUTjsw\",\"account\":\"feJs1qiP\",\"account_current\":\"LGBe77Zo\",\"accountCurrent\":\"LGBe77Zo\",\"account_disabled\":\"QT4AQhSL\",\"accountDisabled\":\"QT4AQhSL\",\"account_inactive\":\"JLVV6MK1\",\"accountInactive\":\"JLVV6MK1\",\"accounts_single\":\"xq8sJcx0\",\"accountsSingle\":\"xq8sJcx0\",\"customCard\":\"QrKEFAWF\",\"accountName\":\"xRepCoTw\",\"button_current\":\"CMlJY5eP\",\"buttonCurrent\":\"CMlJY5eP\",\"accountFooter\":\"aSHneDhG\",\"icon\":\"FzVzsW0Z\",\"accountAddress\":\"U1ocd7xK\",\"accountCheckMark\":\"WoJjd6rF\",\"accountCheckMark_active\":\"Xs5JWZXM\",\"accountCheckMarkActive\":\"Xs5JWZXM\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiNft } from '../../api/types';\nimport type { AccountType } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport { useCachedImage } from '../../hooks/useCachedImage';\nimport useCardCustomization from '../../hooks/useCardCustomization';\n\nimport { ACCOUNT_ADDRESS_SHIFT, ACCOUNT_WITH_ICON_ADDRESS_SHIFT } from '../main/sections/Header/AccountButton';\n\nimport styles from './AccountButton.module.scss';\n\ninterface StateProps {\n  accountId: string;\n  address: string;\n  title?: string;\n  accountType: AccountType;\n  isActive?: boolean;\n  isLoading?: boolean;\n  ariaLabel?: string;\n  className?: string;\n  withCheckbox?: boolean;\n  cardBackgroundNft?: ApiNft;\n  onClick?: NoneToVoidFunction;\n}\n\nfunction AccountButton({\n  accountId,\n  address,\n  title,\n  accountType,\n  ariaLabel,\n  isActive,\n  isLoading,\n  className,\n  withCheckbox,\n  cardBackgroundNft,\n  onClick,\n}: StateProps) {\n  const {\n    backgroundImageUrl,\n    withTextGradient,\n    classNames: mtwCardClassNames,\n  } = useCardCustomization(cardBackgroundNft);\n  const { imageUrl } = useCachedImage(backgroundImageUrl);\n\n  const isHardware = accountType === 'hardware';\n  const isViewMode = accountType === 'view';\n  const fullClassName = buildClassName(\n    className,\n    styles.account,\n    imageUrl && styles.customCard,\n    imageUrl && mtwCardClassNames,\n    isActive && !withCheckbox && styles.account_current,\n    isLoading && styles.account_disabled,\n    !onClick && styles.account_inactive,\n  );\n\n  return (\n    <div\n      key={accountId}\n      className={fullClassName}\n      onClick={onClick}\n      style={buildStyle(imageUrl && `--bg: url(${imageUrl})`)}\n      aria-label={ariaLabel}\n    >\n      {title && <span className={buildClassName(styles.accountName, withTextGradient && 'gradientText')}>{title}</span>}\n      <div className={buildClassName(styles.accountFooter, withTextGradient && 'gradientText')}>\n        {isViewMode && <i className={buildClassName('icon-eye-filled', styles.icon)} aria-hidden />}\n        {isHardware && <i className={buildClassName('icon-ledger', styles.icon)} aria-hidden />}\n        <span className={styles.accountAddress}>\n          {shortenAddress(\n            address,\n            isHardware ? ACCOUNT_WITH_ICON_ADDRESS_SHIFT : ACCOUNT_ADDRESS_SHIFT,\n            ACCOUNT_ADDRESS_SHIFT,\n          )}\n        </span>\n      </div>\n      {withCheckbox\n        && <div className={buildClassName(styles.accountCheckMark, isActive && styles.accountCheckMark_active)} />}\n    </div>\n  );\n}\n\nexport default memo(AccountButton);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './AccountButton.module.scss';\n\ninterface StateProps {\n  accountLength: number;\n  labelText?: string;\n  children: TeactNode;\n  className?: string;\n}\n\nfunction AccountButtonWrapper({\n  accountLength,\n  labelText,\n  children,\n  className,\n}: StateProps) {\n  const fullClassName = buildClassName(\n    className,\n    styles.accounts,\n    'custom-scroll',\n    accountLength === 1 && styles.accounts_single,\n    accountLength === 2 && styles.accounts_two,\n  );\n  return (\n    <>\n      {labelText && <p className={styles.label}>{labelText}</p>}\n      <div className={fullClassName}>\n        {children}\n      </div>\n    </>\n  );\n}\n\nexport default memo(AccountButtonWrapper);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"zdmLsynF\",\"modalDialogInsideSettings\":\"kYjygKEY\",\"slide\":\"a2oy8Zll\",\"container\":\"eM1PpsST\",\"containerStatic\":\"jHYtCW5T\",\"content\":\"_3mWK1CH\",\"iconBlockSlide\":\"WEcWgMzV\",\"iconBlockSlideStatic\":\"VCK1YGjr\",\"iconBlock\":\"KE3Egymz\",\"mobile\":\"kpjonisY\",\"ledgerIcon\":\"iuLLqpxI\",\"textBlock\":\"bn1fb2en\",\"textBlock_gap\":\"bBaOfZlx\",\"textBlockGap\":\"bBaOfZlx\",\"textBlock_success\":\"j8GYzR5R\",\"textBlockSuccess\":\"j8GYzR5R\",\"textBlock_small\":\"Rt2IdHAB\",\"textBlockSmall\":\"Rt2IdHAB\",\"text\":\"GuAw_sFJ\",\"textIcon\":\"SOw0Xtct\",\"text_failed\":\"XPczA9Ds\",\"textFailed\":\"XPczA9Ds\",\"text_connected\":\"YyHAVq6P\",\"textConnected\":\"YyHAVq6P\",\"text_success\":\"tTgIgIgG\",\"textSuccess\":\"tTgIgIgG\",\"actionBlock\":\"hiaAxVr_\",\"actionBlock_single\":\"ApwM97qB\",\"actionBlockSingle\":\"ApwM97qB\",\"button\":\"LZNOcG4M\",\"button_single\":\"Hm4XX1NN\",\"buttonSingle\":\"Hm4XX1NN\",\"accounts\":\"qG6SFrZs\",\"accounts_two\":\"o_4z0gP4\",\"accountsTwo\":\"o_4z0gP4\",\"account\":\"_Vsrbub9\",\"account_current\":\"uo8yhRNU\",\"accountCurrent\":\"uo8yhRNU\",\"addAccountContainer\":\"E5i9UUtD\",\"addAccountIcon\":\"j5VZHMly\",\"accountName\":\"V6_KYxce\",\"accountFooter\":\"LXgNcuuY\",\"accountCurrencyIcon\":\"g_b7EuV5\",\"accountAddress\":\"pL4iTSDM\",\"accountCheckMark\":\"mpVXcyoe\",\"accountCheckMark_active\":\"lVx2a3if\",\"accountCheckMarkActive\":\"lVx2a3if\",\"sticker\":\"MfAU5ZEs\",\"declinedLabel\":\"aWyFXa02\",\"declinedLabelDetailed\":\"q1lhwUmL\",\"dropdownBlock\":\"_2MGoq5H\"};","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './LedgerModal.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  text: string;\n  error?: string;\n  onClose: () => void;\n  onTryAgain: () => void;\n}\n\nenum ConfirmTransactionState {\n  Waiting,\n  Error,\n}\n\nfunction LedgerConfirmOperation({\n  isActive, text, error, onClose, onTryAgain,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [activeState, setActiveState] = useState(ConfirmTransactionState.Waiting);\n  const [nextKey, setNextKey] = useState(ConfirmTransactionState.Error);\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useEffect(() => {\n    if (error) {\n      setActiveState(ConfirmTransactionState.Error);\n      setNextKey(ConfirmTransactionState.Waiting);\n    } else {\n      setActiveState(ConfirmTransactionState.Waiting);\n      setNextKey(ConfirmTransactionState.Error);\n    }\n  }, [error]);\n\n  function renderWaitingConfirm(isActiveSlide: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Confirm via Ledger')} onClose={onClose} />\n        <div className={styles.container}>\n          <AnimatedIconWithPreview\n            size={ANIMATED_STICKER_BIG_SIZE_PX}\n            play={isActiveSlide}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n            previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n          />\n          <div className={buildClassName(styles.textBlock, styles.textBlock_small)}>\n            <span className={styles.text}>{text}</span>\n          </div>\n          <div className={buildClassName(styles.actionBlock, styles.actionBlock_single)}>\n            <Button onClick={onClose} className={buildClassName(styles.button, styles.button_single)}>\n              {lang('Cancel')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderTryAgain(isActiveSlide: boolean) {\n    const isErrorDetailed = error && [\n      '$hardware_blind_sign_not_enabled',\n      '$hardware_blind_sign_not_enabled_internal',\n    ].includes(error);\n    const errorMessage = isErrorDetailed\n      ? (<span>{renderText(lang(error))}</span>)\n      : renderText(lang(error!));\n\n    return (\n      <>\n        <ModalHeader title={lang('Confirm via Ledger')} onClose={onClose} />\n        <div className={styles.container}>\n          <AnimatedIconWithPreview\n            size={ANIMATED_STICKER_BIG_SIZE_PX}\n            play={isActiveSlide}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n            previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n          />\n          <div className={buildClassName(styles.declinedLabel, isErrorDetailed && styles.declinedLabelDetailed)}>\n            {errorMessage}\n          </div>\n          <div className={styles.actionBlock}>\n            <Button onClick={onClose} className={styles.button}>{lang('Cancel')}</Button>\n            <Button isPrimary onClick={onTryAgain} className={styles.button}>{lang('Try Again')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActiveSlide: boolean, isFrom: boolean, currentKey: ConfirmTransactionState) {\n    switch (currentKey) {\n      case ConfirmTransactionState.Waiting:\n        return renderWaitingConfirm(isActiveSlide);\n      case ConfirmTransactionState.Error:\n        return renderTryAgain(isActiveSlide);\n    }\n  }\n\n  return (\n    <Transition\n      name={resolveSlideTransitionName()}\n      className={buildClassName(modalStyles.transition, 'custom-scroll')}\n      slideClassName={buildClassName(modalStyles.transitionSlide, styles.slide)}\n      activeKey={activeState}\n      nextKey={nextKey}\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(LedgerConfirmOperation);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport DropdownItemContent from './DropdownItemContent';\nimport DropdownMenu from './DropdownMenu';\nimport Spinner from './Spinner';\n\nimport styles from './Dropdown.module.scss';\n\nexport interface DropdownItem<T extends string = string> {\n  value: T;\n  name: string;\n  selectedName?: string;\n  description?: string | TeactNode;\n  icon?: string;\n  overlayIcon?: string;\n  fontIcon?: string;\n  isDisabled?: boolean;\n  isDangerous?: boolean;\n  withDelimiter?: boolean;\n  withDelimiterAfter?: boolean;\n}\n\ninterface OwnProps<T extends string> {\n  label?: string;\n  selectedValue?: T;\n  items: DropdownItem<T>[];\n  className?: string;\n  itemClassName?: string;\n  menuClassName?: string;\n  theme?: 'light' | 'inherit';\n  arrow?: 'caret' | 'chevron';\n  menuPositionX?: 'right' | 'left';\n  menuPositionY?: 'top' | 'bottom';\n  disabled?: boolean;\n  shouldTranslateOptions?: boolean;\n  onChange?: (value: T) => void;\n  isLoading?: boolean;\n  buttonPrefix?: TeactNode;\n}\n\nconst DEFAULT_ARROW = 'caret';\nconst DEFAULT_MENU_POSITION_X = 'right';\n\nfunction Dropdown<T extends string>({\n  label,\n  items,\n  selectedValue,\n  className,\n  itemClassName,\n  menuClassName,\n  theme,\n  arrow = DEFAULT_ARROW,\n  menuPositionX = DEFAULT_MENU_POSITION_X,\n  menuPositionY,\n  disabled,\n  shouldTranslateOptions,\n  onChange,\n  isLoading = false,\n  buttonPrefix,\n}: OwnProps<T>): TeactJsx {\n  const [isMenuOpen, openMenu, closeMenu] = useFlag();\n  const withMenu = items.length > 1;\n  const isFullyInteractive = Boolean(label);\n\n  const selectedItem = useMemo<DropdownItem<T>>(() => {\n    let item = selectedValue !== undefined && items.find((i) => i.value === selectedValue);\n    item ||= { value: '' as T, name: '' };\n    return {\n      ...item,\n      isDisabled: !isFullyInteractive && disabled,\n    };\n  }, [items, selectedValue, isFullyInteractive, disabled]);\n\n  const handleSelect = useLastCallback((value: T) => {\n    if (value !== selectedValue) {\n      onChange?.(value);\n    }\n  });\n\n  if (!items.length) {\n    return undefined;\n  }\n\n  const fullClassName = buildClassName(\n    className,\n    withMenu && styles.interactive,\n    isFullyInteractive && styles.wide,\n    isFullyInteractive && disabled && styles.disabled,\n  );\n  const buttonFullClassName = buildClassName(\n    styles.button,\n    withMenu && styles.interactive,\n    withMenu && menuClassName,\n    theme && styles[theme],\n    itemClassName,\n  );\n\n  const buttonSuffix = useMemo(() => {\n    return withMenu && (\n      <i\n        className={buildClassName(\n          styles.buttonIcon,\n          arrow === 'chevron' ? 'icon-chevron-down' : 'icon-caret-down',\n        )}\n        aria-hidden\n      />\n    );\n  }, [withMenu, arrow]);\n\n  return (\n    <div\n      className={fullClassName}\n      onClick={isFullyInteractive && !disabled && withMenu ? openMenu : undefined}\n    >\n      {label && <span className={styles.label}>{label}</span>}\n\n      {isLoading ? (\n        <Spinner className={styles.spinner} />\n      ) : (\n        <DropdownItemContent\n          item={selectedItem}\n          prefix={buttonPrefix}\n          suffix={buttonSuffix}\n          shouldTranslate={shouldTranslateOptions}\n          shouldUseSelectedName\n          className={buttonFullClassName}\n          itemClassName={buildClassName('itemName', itemClassName)}\n          onClick={!isFullyInteractive && withMenu ? openMenu : undefined}\n        />\n      )}\n\n      {withMenu && (\n        <DropdownMenu\n          isOpen={isMenuOpen && !isLoading}\n          menuPositionX={menuPositionX}\n          menuPositionY={menuPositionY}\n          items={items}\n          shouldTranslateOptions={shouldTranslateOptions}\n          selectedValue={selectedValue}\n          buttonClassName={itemClassName}\n          onSelect={handleSelect}\n          onClose={closeMenu}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(Dropdown);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { Theme } from '../../global/types';\nimport type { LedgerTransport } from '../../util/ledger/types';\nimport { HardwareConnectState } from '../../global/types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { closeLedgerTab } from '../../util/ledger/tab';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { IS_ANDROID, IS_IOS, IS_IOS_APP, IS_LEDGER_EXTENSION_TAB } from '../../util/windowEnvironment';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Button from '../ui/Button';\nimport Dropdown from '../ui/Dropdown';\nimport Image from '../ui/Image';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport settingsStyles from '../settings/Settings.module.scss';\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './LedgerModal.module.scss';\n\nimport ledgerDesktopSrc from '../../assets/ledger/desktop.png';\nimport ledgerDesktopDarkSrc from '../../assets/ledger/desktop-dark.png';\nimport ledgerIosSrc from '../../assets/ledger/ios.png';\nimport ledgerIosDarkSrc from '../../assets/ledger/ios-dark.png';\nimport ledgerMobileBluetoothSrc from '../../assets/ledger/mobile-bluetooth.png';\nimport ledgerMobileBluetoothDarkSrc from '../../assets/ledger/mobile-bluetooth-dark.png';\nimport ledgerMobileUsbSrc from '../../assets/ledger/mobile-usb.png';\nimport ledgerMobileUsbDarkSrc from '../../assets/ledger/mobile-usb-dark.png';\n\ninterface OwnProps {\n  isActive: boolean;\n  isStatic?: boolean;\n  className?: string;\n  onConnected: (isSingleWallet: boolean) => void;\n  onBackButtonClick?: NoneToVoidFunction;\n  onCancel?: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  state: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  availableTransports?: LedgerTransport[];\n  lastUsedTransport?: LedgerTransport;\n  currentTheme: Theme;\n}\n\nconst NEXT_SLIDE_DELAY = 500;\nconst TRANSPORT_NAMES: Record<LedgerTransport, string> = {\n  usb: 'USB',\n  bluetooth: 'Bluetooth',\n};\n\nfunction LedgerConnect({\n  isActive,\n  isStatic,\n  state,\n  isLedgerConnected,\n  isTonAppConnected,\n  availableTransports,\n  lastUsedTransport,\n  currentTheme,\n  className,\n  onConnected,\n  onBackButtonClick,\n  onCancel,\n  onClose,\n}: OwnProps & StateProps) {\n  const { initializeHardwareWalletModal, initializeHardwareWalletConnection } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const [selectedTransport, setSelectedTransport] = useState<LedgerTransport | undefined>(lastUsedTransport);\n  const appTheme = useAppTheme(currentTheme);\n\n  const isLedgerFailed = isLedgerConnected === false;\n  const isTonAppFailed = isTonAppConnected === false;\n  const isConnected = state === HardwareConnectState.ConnectedWithSingleWallet\n    || state === HardwareConnectState.ConnectedWithSeveralWallets;\n  const isConnecting = state === HardwareConnectState.Connecting;\n  const isWaitingForRemoteTab = state === HardwareConnectState.WaitingForRemoteTab;\n  const title = isConnected ? lang('Ledger Connected!') : lang('Connect Ledger');\n  const shouldCloseOnCancel = !onCancel;\n\n  const renderingAvailableTransports = useMemo(() => {\n    return (availableTransports || []).map((transport) => ({\n      value: transport,\n      name: TRANSPORT_NAMES[transport],\n    }));\n  }, [availableTransports]);\n  const {\n    shouldRender: shouldRenderAvailableTransports,\n    ref: availableTransportsRef,\n  } = useShowTransition({\n    isOpen: Boolean(renderingAvailableTransports.length > 1 && selectedTransport),\n    withShouldRender: true,\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel ?? onClose,\n  });\n\n  useEffect(() => {\n    if (selectedTransport) return;\n    if (availableTransports?.length) {\n      setSelectedTransport(availableTransports?.[0]);\n    } else if (IS_IOS_APP) {\n      setSelectedTransport('bluetooth');\n    }\n  }, [availableTransports, selectedTransport]);\n\n  useEffect(() => {\n    if (!isActive) return;\n\n    initializeHardwareWalletModal();\n  }, [isActive]);\n\n  useEffectWithPrevDeps(([prevLastUsedTransport]) => {\n    if (lastUsedTransport && prevLastUsedTransport !== lastUsedTransport) {\n      setSelectedTransport(lastUsedTransport);\n    }\n  }, [lastUsedTransport]);\n\n  const handleConnected = useLastCallback((isSingleWallet: boolean) => {\n    if (IS_LEDGER_EXTENSION_TAB) {\n      return;\n    }\n\n    setTimeout(() => {\n      onConnected(isSingleWallet);\n    }, NEXT_SLIDE_DELAY);\n  });\n\n  useEffect(() => {\n    if (isConnected && isActive) {\n      handleConnected(state === HardwareConnectState.ConnectedWithSingleWallet);\n    }\n  }, [isConnected, isActive, state, handleConnected]);\n\n  const handleCloseWithRemoteTab = useLastCallback(() => {\n    const closeAction = shouldCloseOnCancel ? onClose : onCancel;\n    closeLedgerTab(); // To close the remote extension tab when the connection is cancelled in the popup\n    closeAction();\n  });\n\n  const handleSubmit = useLastCallback(() => {\n    if (selectedTransport) {\n      initializeHardwareWalletConnection({ transport: selectedTransport });\n    }\n  });\n\n  function renderAvailableTransports() {\n    return (\n      <div ref={availableTransportsRef} className={styles.dropdownBlock}>\n        <Dropdown\n          label={lang('Connection Type')}\n          items={renderingAvailableTransports}\n          selectedValue={selectedTransport}\n          theme=\"light\"\n          arrow=\"chevron\"\n          disabled={isConnecting}\n          className={buildClassName(styles.item, styles.item_small)}\n          onChange={setSelectedTransport}\n        />\n      </div>\n    );\n  }\n\n  function renderButtons() {\n    const isFailed = state === HardwareConnectState.Failed;\n\n    if (IS_LEDGER_EXTENSION_TAB && isConnected) {\n      return (\n        <div className={buildClassName(styles.actionBlock, isConnected && styles.actionBlock_single)}>\n          <Button\n            isDisabled={isConnecting}\n            className={buildClassName(styles.button, isConnected && styles.button_single)}\n            onClick={onClose}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      );\n    }\n\n    return (\n      <div className={styles.actionBlock}>\n        <Button\n          className={styles.button}\n          onClick={shouldCloseOnCancel ? onClose : onCancel}\n        >\n          {lang(shouldCloseOnCancel ? 'Cancel' : 'Back')}\n        </Button>\n        <Button\n          isPrimary\n          isLoading={isConnecting}\n          isDisabled={isConnecting || isConnected || !availableTransports?.length}\n          className={styles.button}\n          onClick={handleSubmit}\n        >\n          {isFailed ? lang('Try Again') : lang('Continue')}\n        </Button>\n      </div>\n    );\n  }\n\n  function getLedgerIconSrc() {\n    const isDarkTheme = appTheme === 'dark';\n    const iconData = {\n      desktop: isDarkTheme ? ledgerDesktopDarkSrc : ledgerDesktopSrc,\n      mobileUsb: isDarkTheme ? ledgerMobileUsbDarkSrc : ledgerMobileUsbSrc,\n      ios: isDarkTheme ? ledgerIosDarkSrc : ledgerIosSrc,\n      mobileBluetooth: isDarkTheme ? ledgerMobileBluetoothDarkSrc : ledgerMobileBluetoothSrc,\n    };\n\n    if (!IS_CAPACITOR) {\n      // Ledger is only supported on iOS for Capacitor app\n      return IS_ANDROID ? iconData.mobileUsb : iconData.desktop;\n    }\n\n    if (IS_IOS) {\n      return iconData.ios;\n    }\n\n    return selectedTransport === 'bluetooth' ? iconData.mobileBluetooth : iconData.mobileUsb;\n  }\n\n  function renderScreen(handleClose: NoneToVoidFunction, children: TeactNode) {\n    return (\n      <>\n        {!isStatic ? (\n          <ModalHeader\n            title={title}\n            onBackButtonClick={onBackButtonClick}\n            onClose={!onBackButtonClick ? handleClose : undefined}\n          />\n        ) : (\n          <div className={settingsStyles.header}>\n            <Button isSimple isText onClick={handleClose} className={settingsStyles.headerBack}>\n              <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n              <span>{lang('Back')}</span>\n            </Button>\n            <span className={settingsStyles.headerTitle}>{title}</span>\n          </div>\n        )}\n        <div\n          className={buildClassName(\n            styles.container, isStatic && styles.containerStatic, isStatic && 'static-container',\n          )}\n        >\n          <Transition\n            activeKey={!IS_CAPACITOR ? 0 : (selectedTransport !== 'bluetooth' ? 1 : 2)}\n            name=\"semiFade\"\n            className={buildClassName(styles.iconBlock, (isPortrait || IS_IOS) && styles.mobile)}\n            slideClassName={isStatic ? styles.iconBlockSlideStatic : styles.iconBlockSlide}\n          >\n            <Image\n              url={getLedgerIconSrc()}\n              imageClassName={styles.ledgerIcon}\n            />\n          </Transition>\n          {children}\n        </div>\n      </>\n    );\n  }\n\n  function renderWaitingForRemoteTab() {\n    return renderScreen(handleCloseWithRemoteTab, (\n      <>\n        <div\n          className={buildClassName(\n            styles.textBlock,\n            styles.textBlock_gap,\n          )}\n        >\n          <span className={styles.text}>\n            <i className={buildClassName(styles.textIcon, 'icon-dot')} aria-hidden />\n            {lang('Switch to the newly opened tab to connect Ledger.')}\n          </span>\n          <span className={styles.text}>\n            <i className={buildClassName(styles.textIcon, 'icon-dot')} aria-hidden />\n            {lang('Once connected, switch back to this window to proceed.')}\n          </span>\n        </div>\n        <div className={buildClassName(styles.actionBlock, styles.actionBlock_single)}>\n          <Button\n            className={buildClassName(styles.button, styles.button_single)}\n            onClick={handleCloseWithRemoteTab}\n          >\n            {lang(shouldCloseOnCancel ? 'Cancel' : 'Back')}\n          </Button>\n        </div>\n      </>\n    ));\n  }\n\n  function renderConnect() {\n    return renderScreen(onClose, (\n      <>\n        <div\n          className={buildClassName(\n            styles.textBlock,\n            isConnected && styles.textBlock_success,\n          )}\n        >\n          <span\n            className={buildClassName(\n              styles.text,\n              isLedgerFailed && styles.text_failed,\n              isLedgerConnected && styles.text_connected,\n              isConnected && styles.text_success,\n            )}\n          >\n            <i\n              className={buildClassName(styles.textIcon, isLedgerConnected ? 'icon-accept' : 'icon-dot')}\n              aria-hidden\n            />\n            {lang('Connect your Ledger')}\n          </span>\n          <span\n            className={buildClassName(\n              styles.text,\n              isTonAppFailed && styles.text_failed,\n              isTonAppConnected && styles.text_connected,\n              isConnected && styles.text_success,\n            )}\n          >\n            <i\n              className={buildClassName(styles.textIcon, isTonAppConnected ? 'icon-accept' : 'icon-dot')}\n              aria-hidden\n            />\n            {lang('Unlock it and open the TON App')}\n          </span>\n        </div>\n\n        {shouldRenderAvailableTransports && renderAvailableTransports()}\n        {renderButtons()}\n      </>\n    ));\n  }\n\n  function renderContent() {\n    if (isWaitingForRemoteTab) {\n      return renderWaitingForRemoteTab();\n    }\n\n    return renderConnect();\n  }\n\n  return (\n    <Transition\n      name={resolveSlideTransitionName()}\n      className={buildClassName(modalStyles.transition, 'custom-scroll', className)}\n      slideClassName={modalStyles.transitionSlide}\n      activeKey={isWaitingForRemoteTab ? 1 : 0}\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    availableTransports,\n    lastUsedTransport,\n  } = global.hardware;\n\n  return {\n    state: hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    availableTransports,\n    lastUsedTransport,\n    currentTheme: global.settings.theme,\n  };\n})(LedgerConnect));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './Skeleton.module.scss';\n\ninterface OwnProps {\n  className?: string;\n}\n\nfunction Skeleton({ className }: OwnProps) {\n  return <div className={buildClassName(styles.skeleton, className)} />;\n}\n\nexport default memo(Skeleton);\n","// extracted by mini-css-extract-plugin\nexport default {\"skeleton\":\"JOe_K6bB\",\"shimmerMobile\":\"wTtjfA1C\",\"shimmerDesktop\":\"B07u4Rga\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"DL3GDV2h\",\"tooltip\":\"pPTN8epJ\",\"small\":\"S0YjnQBy\",\"medium\":\"fisd9cYz\",\"arrow\":\"mw4HrHNN\",\"icon\":\"DsxlgjFS\",\"fontIcon\":\"T3riE15T\",\"color-warning\":\"G6MdAror\",\"colorWarning\":\"G6MdAror\"};","import type { FC, TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useRef,\n} from '../../lib/teact/teact';\n\nimport type { EmojiIcon } from './Emoji';\n\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { IS_TOUCH_ENV, REM } from '../../util/windowEnvironment';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nimport Emoji from './Emoji';\nimport Portal from './Portal';\n\nimport styles from './IconWithTooltip.module.scss';\n\ntype OwnProps = {\n  message: TeactNode;\n  emoji?: EmojiIcon;\n  size?: 'small' | 'medium';\n  type?: 'hint' | 'warning';\n  iconClassName?: string;\n  tooltipClassName?: string;\n};\n\nconst ARROW_WIDTH = 0.6875 * REM;\nconst GAP = 2 * REM;\n\n/** The component is designed to be positioned inline in text. Use a space symbol to create a gap on the left. */\nconst IconWithTooltip: FC<OwnProps> = ({\n  message,\n  emoji,\n  size = 'medium',\n  type = 'hint',\n  iconClassName,\n  tooltipClassName,\n}) => {\n  const [isOpen, open, close] = useFlag();\n  const { shouldRender, ref: tooltipContainerRef } = useShowTransition({\n    isOpen,\n    withShouldRender: true,\n  });\n  const colorClassName = type === 'warning' && styles[`color-${type}`];\n\n  const iconRef = useRef<HTMLDivElement>();\n  const tooltipRef = useRef<HTMLDivElement>();\n\n  const tooltipStyle = useRef<string>();\n  const arrowStyle = useRef<string>();\n\n  const randomTooltipKey = useUniqueId();\n\n  const handleClickOutside = useLastCallback((event: Event) => {\n    if (!(event.target as HTMLElement).closest(`[data-tooltip-key=\"${randomTooltipKey}\"]`)) {\n      close();\n    }\n  });\n\n  useEffect(() => {\n    if (!isOpen) return undefined;\n    document.addEventListener('touchstart', handleClickOutside);\n\n    return () => {\n      document.removeEventListener('touchstart', handleClickOutside);\n    };\n  }, [isOpen, close, handleClickOutside]);\n\n  useEffect(() => {\n    if (!iconRef.current || !tooltipRef.current) return;\n\n    const { top, left, width } = iconRef.current.getBoundingClientRect();\n    const {\n      width: tooltipWidth,\n      height: tooltipHeight,\n    } = tooltipRef.current.getBoundingClientRect();\n\n    const tooltipCenter = (window.innerWidth - tooltipWidth) / 2;\n    const arrowPosition = left - tooltipCenter + width / 2 - ARROW_WIDTH / 2;\n    const horizontalOffset = arrowPosition < GAP ? GAP - arrowPosition : 0;\n\n    const tooltipVerticalStyle = `top: ${top - tooltipHeight - ARROW_WIDTH}px;`;\n    const tooltipHorizontalStyle = `left: ${tooltipCenter - horizontalOffset}px;`;\n    const arrowHorizontalStyle = `left: ${arrowPosition + horizontalOffset}px;`;\n    const arrowVerticalStyle = `top: ${tooltipHeight - ARROW_WIDTH / 2 - 1}px;`;\n\n    tooltipStyle.current = `${tooltipVerticalStyle} ${tooltipHorizontalStyle}`;\n    arrowStyle.current = `${arrowVerticalStyle} ${arrowHorizontalStyle}`;\n  }, [shouldRender]);\n\n  function renderIcon() {\n    const commonClassName = buildClassName(styles.icon, iconClassName, styles[size], colorClassName);\n    const onClick = IS_TOUCH_ENV ? stopEvent : undefined;\n\n    if (emoji) {\n      return (\n        <span\n          ref={iconRef}\n          className={commonClassName}\n          data-tooltip-key={randomTooltipKey}\n          onClick={onClick}\n          onMouseEnter={open}\n          onMouseLeave={close}\n        >\n          <Emoji from={emoji} />\n        </span>\n      );\n    }\n\n    return (\n      <i\n        ref={iconRef}\n        className={buildClassName(\n          commonClassName,\n          styles.fontIcon,\n          type === 'warning' ? 'icon-exclamation' : 'icon-question',\n        )}\n        data-tooltip-key={randomTooltipKey}\n        onClick={onClick}\n        onMouseEnter={open}\n        onMouseLeave={close}\n      />\n    );\n  }\n\n  return (\n    <>\n      {shouldRender && (\n        <Portal>\n          <div\n            ref={tooltipContainerRef}\n            className={styles.container}\n            onClick={stopEvent}\n            style={tooltipStyle.current}\n          >\n            <div\n              ref={tooltipRef}\n              className={buildClassName(styles.tooltip, styles[size], colorClassName, tooltipClassName)}\n            >\n              {message}\n            </div>\n            <div className={styles.arrow} style={arrowStyle.current} />\n          </div>\n        </Portal>\n      )}\n      {renderIcon()}\n    </>\n  );\n};\n\nexport default memo(IconWithTooltip);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"rtKXhN4A\",\"modalDialogExtraHeight\":\"ow4XXlQr\",\"dapp\":\"naRjGTN0\",\"dapp_first\":\"LUz47fCn\",\"dappFirst\":\"LUz47fCn\",\"dapp_push\":\"AxygZABC\",\"dappPush\":\"AxygZABC\",\"dappIcon\":\"Utxlqsar\",\"dappLogo\":\"dqbsWkDq\",\"dappLogo_icon\":\"RGl7OFHd\",\"dappLogoIcon\":\"RGl7OFHd\",\"transactionAccount\":\"ut5A6NM6\",\"dappInfo\":\"cL2nTyJm\",\"dappName\":\"IZ831cu4\",\"dappHost\":\"ODsQl3Iq\",\"dappHostWarningIcon\":\"rYesJSbN\",\"dappHostWarningText\":\"B9KF5fSL\",\"dappHostWarningButton\":\"Go1goEAT\",\"dappDisconnect\":\"Dpv9gVfh\",\"label\":\"ooIjdCk3\",\"description\":\"d20jMAO6\",\"footer\":\"lvIWoC_b\",\"buttons\":\"XvGbWtVh\",\"button\":\"TBS2qSdm\",\"rowContainerSkeleton\":\"XcidIimi\",\"dataField\":\"URk9skQT\",\"receivingAddress\":\"NfKwqXNd\",\"payloadField\":\"IpEvYlyO\",\"payloadField_expanded\":\"mtQbMtDU\",\"payloadFieldExpanded\":\"mtQbMtDU\",\"payloadField_text\":\"leFXfJnu\",\"payloadFieldText\":\"leFXfJnu\",\"payloadFieldExpand\":\"l7ty8x8l\",\"payloadFieldTerm\":\"iNOlk2G5\",\"transactionList\":\"TddQIzLn\",\"transactionRow\":\"qfq9TmLL\",\"transactionRowAmount\":\"rqZIiXwE\",\"currencySymbol\":\"WdW2dRfZ\",\"transactionRowAddress\":\"p87NWFTH\",\"transactionRowChevron\":\"gKLbD42t\",\"scam\":\"Kgein0KH\",\"scamImage\":\"gw394drP\",\"transactionDirection\":\"by1Uv_HG\",\"accountTitle\":\"nBWVm1mf\",\"accountBalance\":\"_ogqtbzH\",\"transactionDapp\":\"Uyz5mVM_\",\"sticker\":\"noPlTaoE\",\"sticker_sizeSmall\":\"E9iT0WHT\",\"stickerSizeSmall\":\"E9iT0WHT\",\"descriptionContent\":\"LiakNgEl\",\"dappInfoSkeleton\":\"wOmNbpWs\",\"accountWrapperSkeleton\":\"cWnAUfkt\",\"dappInfoIconSkeleton\":\"e3oGDhNq\",\"dappInfoTextSkeleton\":\"cAdLb2FM\",\"nameSkeleton\":\"tO1IUhnj\",\"descSkeleton\":\"u2wkCYw7\",\"nameDappSkeleton\":\"z0IluCrP\",\"descDappSkeleton\":\"JYgy9un6\",\"transactionDirectionLeftSkeleton\":\"YHLHftpe\",\"transactionDirectionRightSkeleton\":\"VzwVb3o_\",\"dappInfoDataSkeleton\":\"L8RwZKiN\",\"rowSkeleton\":\"IVSbVRoG\",\"rowLargeSkeleton\":\"qNqaxuw6\",\"rowLabelSkeleton\":\"oRChyGCN\",\"rowTextLargeSkeleton\":\"q_gxYI6j\",\"rowFeeSkeleton\":\"lbFcqU2u\",\"skeletonTransitionWrapper\":\"US9q0wug\",\"skeletonBackground\":\"A7lv8DFx\",\"transferWarning\":\"Jgu5kw0W\",\"warningForPayload\":\"fHoMTSia\",\"emulation\":\"ZCewpbCA\",\"emulationFee\":\"ClQaAvrV\",\"transferButtons\":\"if1jAISL\",\"transactionContent\":\"yj9FIjaY\",\"balanceError\":\"IHLQKILq\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiDapp } from '../../api/types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { getDappConnectionUniqueId } from '../../util/getDappConnectionUniqueId';\nimport { openUrl } from '../../util/openUrl';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport IconWithTooltip from '../ui/IconWithTooltip';\n\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  dapp?: ApiDapp;\n  className?: string;\n  onDisconnect?: (origin: string) => void;\n}\n\nfunction DappInfo({\n  dapp,\n  className,\n  onDisconnect,\n}: OwnProps) {\n  const { deleteDapp } = getActions();\n\n  const lang = useLang();\n\n  const { name, iconUrl, url, isUrlEnsured } = dapp || {};\n  const host = useMemo(() => url ? new URL(url).host : undefined, [url]);\n\n  const shouldShowDisconnect = Boolean(onDisconnect && url);\n\n  const handleDisconnect = useLastCallback(() => {\n    onDisconnect!(url!);\n  });\n\n  function handleHostWarningIabButtonClick() {\n    deleteDapp({ url: url!, uniqueId: getDappConnectionUniqueId(dapp!) });\n    void openUrl(url!);\n  }\n\n  function renderIcon() {\n    if (iconUrl) {\n      return (\n        <img src={iconUrl} alt={lang('Logo')} className={styles.dappLogo} />\n      );\n    }\n\n    return (\n      <div className={buildClassName(styles.dappLogo, styles.dappLogo_icon)}>\n        <i className={buildClassName(styles.dappIcon, 'icon-laptop')} aria-hidden />\n      </div>\n    );\n  }\n\n  function renderWarningIcon() {\n    return (\n      <IconWithTooltip\n        message={(\n          <>\n            <b>{lang('Unverified Source')}</b>\n            <p className={styles.dappHostWarningText}>\n              {renderText(lang('$reopen_in_iab', {\n                browserButton: IS_CAPACITOR && url?.startsWith('http') ? (\n                  <button className={styles.dappHostWarningButton} onClick={handleHostWarningIabButtonClick}>\n                    {lang('MyTonWallet Browser')}\n                  </button>\n                ) : (\n                  <b>{lang('MyTonWallet Browser')}</b>\n                ),\n              }))}\n            </p>\n          </>\n        )}\n        type=\"warning\"\n        size=\"small\"\n        iconClassName={styles.dappHostWarningIcon}\n      />\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.dapp, className)}>\n      {renderIcon()}\n      <div className={styles.dappInfo}>\n        <span className={styles.dappName}>{name}</span>\n        <span className={styles.dappHost}>\n          {!isUrlEnsured && renderWarningIcon()}\n          {host}\n        </span>\n      </div>\n      {shouldShowDisconnect && (\n        <Button\n          isSmall\n          isPrimary\n          className={styles.dappDisconnect}\n          onClick={handleDisconnect}\n        >\n          {lang('Disconnect')}\n        </Button>\n      )}\n    </div>\n  );\n}\n\nexport default memo(DappInfo);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { IS_CAPACITOR } from '../../config';\nimport { getDoesUsePinPad } from '../../util/biometrics';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\n\ninterface OwnProps {\n  isActive: boolean;\n  error?: string;\n  onSubmit: (password: string) => void;\n  onCancel: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction DappPassword({\n  isActive,\n  error,\n  onSubmit,\n  onCancel,\n  onClose,\n}: OwnProps) {\n  const { clearDappConnectRequestError } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel,\n  });\n\n  return (\n    <>\n      {!getDoesUsePinPad() && <ModalHeader title={lang('Enter Password')} onClose={onClose} />}\n      <PasswordForm\n        isActive={isActive}\n        error={error}\n        withCloseButton={IS_CAPACITOR}\n        submitLabel={lang('Connect')}\n        cancelLabel={lang('Cancel')}\n        onSubmit={onSubmit}\n        onCancel={onCancel}\n        onUpdate={clearDappConnectRequestError}\n      />\n    </>\n  );\n}\n\nexport default memo(DappPassword);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTonConnectProof } from '../../api/tonConnect/types';\nimport type { ApiDapp, ApiDappPermissions } from '../../api/types';\nimport type { Account, AccountSettings, AccountType } from '../../global/types';\nimport { DappConnectState } from '../../global/types';\n\nimport { selectNetworkAccounts } from '../../global/selectors';\nimport { getMainAccountAddress } from '../../util/account';\nimport { getHasInMemoryPassword, getInMemoryPassword } from '../../util/authApi/inMemoryPasswordStore';\nimport buildClassName from '../../util/buildClassName';\nimport { isKeyCountGreater } from '../../util/isEmptyObject';\nimport isViewAccount from '../../util/isViewAccount';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport AccountButton from '../common/AccountButton';\nimport AccountButtonWrapper from '../common/AccountButtonWrapper';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport Skeleton from '../ui/Skeleton';\nimport Transition from '../ui/Transition';\nimport DappInfo from './DappInfo';\nimport DappPassword from './DappPassword';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface StateProps {\n  state?: DappConnectState;\n  hasConnectRequest: boolean;\n  dapp?: ApiDapp;\n  error?: string;\n  requiredPermissions?: ApiDappPermissions;\n  requiredProof?: ApiTonConnectProof;\n  currentAccountId: string;\n  accounts?: Record<string, Account>;\n  settingsByAccountId?: Record<string, AccountSettings>;\n}\n\nfunction DappConnectModal({\n  state,\n  hasConnectRequest,\n  dapp,\n  error,\n  requiredPermissions,\n  requiredProof,\n  accounts,\n  currentAccountId,\n  settingsByAccountId,\n}: StateProps) {\n  const {\n    submitDappConnectRequestConfirm,\n    submitDappConnectRequestConfirmHardware,\n    cancelDappConnectRequestConfirm,\n    setDappConnectRequestState,\n    resetHardwareWalletConnect,\n  } = getActions();\n\n  const lang = useLang();\n  const [selectedAccount, setSelectedAccount] = useState<string>(currentAccountId);\n  const [isConfirmOpen, openConfirm, closeConfirm] = useFlag(false);\n\n  const isOpen = hasConnectRequest;\n\n  const { renderingKey, nextKey } = useModalTransitionKeys(state ?? 0, isOpen);\n\n  const iterableAccounts = useMemo(() => Object.entries(accounts || {}), [accounts]);\n  const isLoading = dapp === undefined;\n\n  useEffect(() => {\n    if (!currentAccountId) return;\n\n    setSelectedAccount(currentAccountId);\n  }, [currentAccountId]);\n\n  const shouldRenderAccounts = accounts && isKeyCountGreater(accounts, 1);\n\n  const handleSubmit = useLastCallback(async () => {\n    closeConfirm();\n    const isViewMode = isViewAccount(accounts![selectedAccount].type);\n    const isHardware = accounts![selectedAccount].type === 'hardware';\n    const { isPasswordRequired, isAddressRequired } = requiredPermissions || {};\n\n    if (isViewMode) return;\n\n    if (!requiredProof || (!isHardware && isAddressRequired && !isPasswordRequired)) {\n      submitDappConnectRequestConfirm({\n        accountId: selectedAccount,\n      });\n\n      cancelDappConnectRequestConfirm();\n    } else if (isHardware) {\n      resetHardwareWalletConnect();\n      setDappConnectRequestState({ state: DappConnectState.ConnectHardware });\n    } else if (getHasInMemoryPassword()) {\n      submitDappConnectRequestConfirm({\n        accountId: selectedAccount,\n        password: await getInMemoryPassword(),\n      });\n    } else {\n      // The confirmation window must be closed before the password screen is displayed\n      requestAnimationFrame(() => {\n        setDappConnectRequestState({ state: DappConnectState.Password });\n      });\n    }\n  });\n\n  const handlePasswordCancel = useLastCallback(() => {\n    setDappConnectRequestState({ state: DappConnectState.Info });\n  });\n\n  const submitDappConnectRequestHardware = useLastCallback(() => {\n    submitDappConnectRequestConfirmHardware({\n      accountId: selectedAccount,\n    });\n  });\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    submitDappConnectRequestConfirm({\n      accountId: selectedAccount,\n      password,\n    });\n  });\n\n  function renderAccount(\n    accountId: string,\n    addressByChain: Account['addressByChain'],\n    accountType: AccountType,\n    title?: string,\n  ) {\n    const hasTonWallet = Boolean(addressByChain.ton);\n    const onClick = !hasTonWallet || isViewAccount(accountType) ? undefined : () => setSelectedAccount(accountId);\n    const address = getMainAccountAddress(addressByChain) ?? '';\n    const { cardBackgroundNft } = settingsByAccountId?.[accountId] || {};\n\n    return (\n      <AccountButton\n        key={accountId}\n        accountId={accountId}\n        address={address}\n        title={title}\n        ariaLabel={lang('Switch Account')}\n        accountType={accountType}\n        isActive={accountId === selectedAccount}\n        isLoading={isLoading}\n\n        onClick={onClick}\n        cardBackgroundNft={cardBackgroundNft}\n      />\n    );\n  }\n\n  function renderAccounts() {\n    return (\n      <AccountButtonWrapper\n        accountLength={iterableAccounts.length}\n        labelText={lang('Select wallet to use on this dapp')}\n      >\n        {iterableAccounts.map(\n          ([accountId, { title, addressByChain, type }]) => {\n            return renderAccount(accountId, addressByChain, type, title);\n          },\n        )}\n      </AccountButtonWrapper>\n    );\n  }\n\n  function renderDappInfo() {\n    const isViewMode = Boolean(selectedAccount && isViewAccount(accounts?.[selectedAccount].type));\n\n    return (\n      <div className={buildClassName(modalStyles.transitionContent, styles.skeletonBackground)}>\n        <DappInfo\n          dapp={dapp}\n          className={buildClassName(styles.dapp_first, styles.dapp_push)}\n        />\n        {shouldRenderAccounts && renderAccounts()}\n\n        <div className={styles.footer}>\n          <Button\n            isPrimary\n            isDisabled={isViewMode}\n            className={modalStyles.buttonFullWidth}\n            onClick={openConfirm}\n          >\n            {lang('Connect')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  function renderWaitForConnection() {\n    return (\n      <div className={buildClassName(modalStyles.transitionContent, styles.skeletonBackground)}>\n        <div className={buildClassName(styles.dappInfoSkeleton, styles.dapp_first)}>\n          <Skeleton className={styles.dappInfoIconSkeleton} />\n          <div className={styles.dappInfoTextSkeleton}>\n            <Skeleton className={styles.nameSkeleton} />\n            <Skeleton className={styles.descSkeleton} />\n          </div>\n        </div>\n        <div className={styles.accountWrapperSkeleton}>\n          {shouldRenderAccounts && renderAccounts()}\n        </div>\n      </div>\n    );\n  }\n\n  function renderDappInfoWithSkeleton() {\n    return (\n      <Transition name=\"semiFade\" activeKey={isLoading ? 0 : 1} slideClassName={styles.skeletonTransitionWrapper}>\n        <ModalHeader title={lang('Connect Dapp')} onClose={cancelDappConnectRequestConfirm} />\n        {isLoading ? renderWaitForConnection() : renderDappInfo()}\n      </Transition>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: DappConnectState) {\n    switch (currentKey) {\n      case DappConnectState.Info:\n        return renderDappInfoWithSkeleton();\n      case DappConnectState.Password:\n        return (\n          <DappPassword\n            isActive={isActive}\n            error={error}\n            onSubmit={handlePasswordSubmit}\n            onCancel={handlePasswordCancel}\n            onClose={cancelDappConnectRequestConfirm}\n          />\n        );\n      case DappConnectState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={submitDappConnectRequestHardware}\n            onClose={handlePasswordCancel}\n          />\n        );\n      case DappConnectState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            isActive={isActive}\n            text={lang('Please confirm operation on your Ledger')}\n            error={error}\n            onTryAgain={submitDappConnectRequestHardware}\n            onClose={handlePasswordCancel}\n          />\n        );\n    }\n  }\n\n  return (\n    <>\n      <Modal\n        isOpen={isOpen}\n        dialogClassName={styles.modalDialog}\n        nativeBottomSheetKey=\"dapp-connect\"\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n        forceFullNative={renderingKey !== DappConnectState.Info}\n        onClose={cancelDappConnectRequestConfirm}\n        onCloseAnimationEnd={cancelDappConnectRequestConfirm}\n      >\n        <Transition\n          name={resolveSlideTransitionName()}\n          className={buildClassName(modalStyles.transition, 'custom-scroll')}\n          slideClassName={modalStyles.transitionSlide}\n          activeKey={renderingKey}\n          nextKey={nextKey}\n        >\n          {renderContent}\n        </Transition>\n      </Modal>\n      <Modal\n        isOpen={isConfirmOpen}\n        isCompact\n        title={lang('Dapp Permissions')}\n        onClose={closeConfirm}\n      >\n        <div className={styles.description}>\n          {lang('$dapp_can_view_balance', {\n            dappname: <strong>{dapp?.name}</strong>,\n          })}\n        </div>\n        <div className={styles.buttons}>\n          <Button onClick={closeConfirm} className={styles.button}>{lang('Cancel')}</Button>\n          <Button isPrimary onClick={handleSubmit} className={styles.button}>{lang('Connect')}</Button>\n        </div>\n      </Modal>\n    </>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n  const hasConnectRequest = global.dappConnectRequest?.state !== undefined;\n\n  const {\n    state, dapp, error, accountId, permissions, proof,\n  } = global.dappConnectRequest || {};\n\n  const currentAccountId = accountId || global.currentAccountId!;\n\n  return {\n    state,\n    hasConnectRequest,\n    dapp,\n    error,\n    requiredPermissions: permissions,\n    requiredProof: proof,\n    currentAccountId,\n    accounts,\n    settingsByAccountId: global.settings.byAccountId,\n  };\n})(DappConnectModal));\n","import React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiDapp } from '../../api/types';\nimport type { Account } from '../../global/types';\n\nimport { TONCOIN } from '../../config';\nimport { selectCurrentToncoinBalance, selectNetworkAccounts } from '../../global/selectors';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\n\nimport DappInfo from './DappInfo';\n\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  dapp?: ApiDapp;\n  customTokenBalance?: bigint;\n  customTokenSymbol?: string;\n  customTokenDecimals?: number;\n}\n\ninterface StateProps {\n  toncoinBalance: bigint;\n  currentAccountId: string;\n  accounts?: Record<string, Account>;\n}\n\nfunction DappInfoWithAccount({\n  dapp,\n  toncoinBalance,\n  currentAccountId,\n  accounts,\n  customTokenBalance,\n  customTokenSymbol,\n  customTokenDecimals,\n}: OwnProps & StateProps) {\n  // Use custom token display if provided, otherwise use TON balance\n  const displayBalance = customTokenBalance !== undefined ? customTokenBalance : toncoinBalance;\n  const displaySymbol = customTokenSymbol || TONCOIN.symbol;\n  const displayDecimals = customTokenDecimals !== undefined ? customTokenDecimals : TONCOIN.decimals;\n\n  return (\n    <div className={styles.transactionDirection}>\n      <div className={styles.transactionAccount}>\n        <div className={styles.accountTitle}>{accounts?.[currentAccountId]?.title}</div>\n        <div className={styles.accountBalance}>\n          {formatCurrency(toDecimal(displayBalance, displayDecimals), displaySymbol)}\n        </div>\n      </div>\n\n      <DappInfo\n        dapp={dapp}\n        className={styles.transactionDapp}\n      />\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n\n  return {\n    toncoinBalance: selectCurrentToncoinBalance(global),\n    currentAccountId: global.currentAccountId!,\n    accounts,\n  };\n})(DappInfoWithAccount));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport Skeleton from '../ui/Skeleton';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  rows?: DappSkeletonRow[];\n}\n\nexport type DappSkeletonRow = {\n  isLarge?: boolean;\n  hasFee?: boolean;\n};\n\nfunction DappSkeletonWithContent({ rows }: OwnProps) {\n  return (\n    <div className={buildClassName(modalStyles.transitionContent, styles.skeletonBackground)}>\n      <div className={styles.transactionDirection}>\n        <div className={styles.transactionDirectionLeftSkeleton}>\n          <Skeleton className={buildClassName(styles.nameSkeleton, styles.nameDappSkeleton)} />\n          <Skeleton className={buildClassName(styles.descSkeleton, styles.descDappSkeleton)} />\n        </div>\n        <div className={styles.transactionDirectionRightSkeleton}>\n          <Skeleton className={styles.dappInfoIconSkeleton} />\n          <div className={styles.dappInfoDataSkeleton}>\n            <Skeleton className={buildClassName(styles.nameSkeleton, styles.nameDappSkeleton)} />\n            <Skeleton className={buildClassName(styles.descSkeleton, styles.descDappSkeleton)} />\n          </div>\n        </div>\n      </div>\n      {rows?.map(renderRow)}\n    </div>\n  );\n}\n\nexport default memo(DappSkeletonWithContent);\n\nfunction renderRow({ isLarge, hasFee }: DappSkeletonRow) {\n  return (\n    <div className={styles.rowContainerSkeleton}>\n      <Skeleton className={buildClassName(styles.rowLabelSkeleton, isLarge && styles.rowTextLargeSkeleton)} />\n      <Skeleton className={buildClassName(styles.rowSkeleton, isLarge && styles.rowLargeSkeleton)} />\n      {hasFee && <Skeleton className={styles.rowFeeSkeleton} />}\n    </div>\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { pick } from '../../util/iteratees';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\nimport DappInfoWithAccount from './DappInfoWithAccount';\nimport DappSkeletonWithContent, { type DappSkeletonRow } from './DappSkeletonWithContent';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ntype StateProps = Pick<GlobalState['currentDappSignData'], 'dapp' | 'isLoading' | 'payloadToSign'>;\n\nconst skeletonRows: DappSkeletonRow[] = [\n  { isLarge: false, hasFee: false },\n];\n\nfunction DappSignDataInitial({\n  dapp,\n  isLoading,\n  payloadToSign,\n}: StateProps) {\n  const { closeDappSignData, submitDappSignDataConfirm } = getActions();\n\n  const lang = useLang();\n  const renderingPayloadToSign = useCurrentOrPrev(payloadToSign, true);\n\n  const isDappLoading = dapp === undefined;\n\n  function renderContent() {\n    return (\n      <div className={buildClassName(modalStyles.transitionContent, styles.skeletonBackground)}>\n        <DappInfoWithAccount dapp={dapp} />\n\n        {renderSignDataByType()}\n\n        <div className={buildClassName(modalStyles.buttons, styles.transferButtons)}>\n          <Button className={modalStyles.button} onClick={closeDappSignData}>{lang('Cancel')}</Button>\n          <Button\n            isPrimary\n            isSubmit\n            isLoading={isLoading}\n            className={modalStyles.button}\n            onClick={submitDappSignDataConfirm}\n          >\n            {lang('Sign')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  function renderSignDataByType() {\n    switch (renderingPayloadToSign?.type) {\n      case 'text': {\n        const { text } = renderingPayloadToSign;\n\n        return (\n          <>\n            <p className={styles.label}>{lang('Message')}</p>\n            <div className={buildClassName(styles.payloadField, styles.payloadField_text)}>\n              {text}\n            </div>\n          </>\n        );\n      }\n\n      case 'binary': {\n        const { bytes } = renderingPayloadToSign;\n\n        return (\n          <>\n            <p className={styles.label}>{lang('Binary Data')}</p>\n            <div className={buildClassName(styles.payloadField, styles.payloadField_expanded)}>\n              {bytes}\n            </div>\n            <div className={styles.warningForPayload}>\n              {lang('The binary data content is unclear. Sign it only if you trust the service.')}\n            </div>\n          </>\n        );\n      }\n\n      case 'cell': {\n        const { cell, schema } = renderingPayloadToSign;\n\n        return (\n          <>\n            {!!schema && (\n              <>\n                <p className={styles.label}>{lang('Cell Schema')}</p>\n                <div className={buildClassName(styles.payloadField, styles.payloadField_text)}>\n                  {schema}\n                </div>\n              </>\n            )}\n\n            <p className={styles.label}>{lang('Cell Data')}</p>\n            <div className={buildClassName(styles.dataField, styles.payloadField, styles.payloadField_expanded)}>\n              {cell}\n            </div>\n\n            <div className={styles.warningForPayload}>\n              {lang('The binary data content is unclear. Sign it only if you trust the service.')}\n            </div>\n          </>\n        );\n      }\n    }\n  }\n\n  return (\n    <Transition\n      name=\"semiFade\"\n      activeKey={isDappLoading ? 0 : 1}\n      slideClassName={styles.skeletonTransitionWrapper}\n    >\n      <ModalHeader title={lang('Sign Data')} onClose={closeDappSignData} />\n      {isDappLoading\n        ? <DappSkeletonWithContent rows={skeletonRows} />\n        : renderContent()}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => pick(\n  global.currentDappSignData,\n  ['dapp', 'isLoading', 'payloadToSign'],\n))(DappSignDataInitial));\n","// extracted by mini-css-extract-plugin\nexport default {\"sticker\":\"BQ2dFF1C\",\"amount\":\"ZK1jiZZ7\",\"amount_purple\":\"A4q4bGl9\",\"amountPurple\":\"A4q4bGl9\",\"amount_green\":\"juLGV08g\",\"amountGreen\":\"juLGV08g\",\"amountSymbol\":\"pIw09HQw\",\"amountFraction\":\"AxDVO85U\",\"buttons\":\"VBRINuzy\",\"buttonsAfterNft\":\"kg0TjtvC\",\"button\":\"ONW_pS7t\"};","import React, { memo, useEffect } from '../../lib/teact/teact';\n\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from '../common/TransferResult.module.scss';\nimport modalStyles from '../ui/Modal.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  onClose: NoneToVoidFunction;\n  type?: 'transfer' | 'signData';\n}\n\nfunction DappTransferComplete({\n  isActive,\n  onClose,\n  type = 'transfer',\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useEffect(() => {\n    return isActive\n      ? captureKeyboardListeners({ onEnter: onClose })\n      : undefined;\n  }, [isActive, onClose]);\n\n  const title = type === 'signData' ? lang('Data Signed!') : lang('Transaction Sent!');\n\n  return (\n    <>\n      <ModalHeader title={title} onClose={onClose} />\n\n      <div className={modalStyles.transitionContent}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          noLoop={false}\n          nonInteractive\n          className={styles.sticker}\n          tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n          previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n        />\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onClose} isPrimary>{lang('Close')}</Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(DappTransferComplete);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\nimport { SignDataState } from '../../global/types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { pick } from '../../util/iteratees';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport DappSignDataInitial from './DappSignDataInitial';\nimport DappTransferComplete from './DappTransferComplete';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ntype StateProps = Pick<GlobalState['currentDappSignData'], 'isLoading' | 'state' | 'error'>;\n\nfunction DappSignDataModal({\n  isLoading,\n  state,\n  error,\n}: StateProps) {\n  const {\n    setDappSignDataScreen,\n    submitDappSignDataPassword,\n    clearDappSignDataError,\n    closeDappSignData,\n    cancelDappSignData,\n  } = getActions();\n\n  const lang = useLang();\n\n  const isOpen = state !== SignDataState.None;\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === SignDataState.Password) {\n      setDappSignDataScreen({ state: SignDataState.Initial });\n    }\n  });\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    submitDappSignDataPassword({ password });\n  });\n\n  const handleResetSignData = useLastCallback(() => {\n    cancelDappSignData();\n    updateNextKey();\n  });\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && (\n          <ModalHeader title={lang('Sign Data')} onClose={closeDappSignData} />\n        )}\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          error={error}\n          withCloseButton={IS_CAPACITOR}\n          submitLabel={lang('Sign')}\n          cancelLabel={lang('Back')}\n          onSubmit={handlePasswordSubmit}\n          onCancel={handleBackClick}\n          onUpdate={clearDappSignDataError}\n        />\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: SignDataState) {\n    switch (currentKey) {\n      case SignDataState.Initial:\n        return <DappSignDataInitial />;\n\n      case SignDataState.Password:\n        return renderPassword(isActive);\n\n      case SignDataState.Complete:\n        return (\n          <DappTransferComplete\n            isActive={isActive}\n            onClose={closeDappSignData}\n            type=\"signData\"\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"dapp-sign-data\"\n      noBackdropClose\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n      forceFullNative={renderingKey === SignDataState.Password}\n      onClose={closeDappSignData}\n      onCloseAnimationEnd={handleResetSignData}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => pick(\n  global.currentDappSignData,\n  ['isLoading', 'state', 'error'],\n))(DappSignDataModal));\n","// Converts a string to a numeric seed using a simple hashing algorithm\nfunction stringToNumberSeed(str: string) {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    // hash * 31 + charCode\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n    // Conversion to a 32-bit integer\n    hash |= 0;\n  }\n\n  return hash;\n}\n\nexport default function getPseudoRandomNumber(min: number, max: number, seed: string) {\n  const numberSeed = stringToNumberSeed(seed);\n  // Convert `seed` to a pseudorandom number using `Math.sin`\n  const x = Math.sin(numberSeed) * 10000;\n  const randomFraction = x - Math.floor(x);\n\n  return Math.floor(randomFraction * (max - min + 1)) + min;\n}\n","import type { ApiSwapAsset } from '../../api/types';\n\nimport { TONCOIN } from '../../config';\nimport { Big } from '../../lib/big.js';\nimport { formatNumber } from '../formatNumber';\n\nconst BTC = new Set(['jWBTC', 'oWBTC', 'BTC']);\nconst USD = new Set(['jUSDT', 'oUSDT', 'USDT', 'jUSDC', 'oUSDC', 'USDC', 'USD']);\nconst FIAT = new Set(['USD', 'RUB', 'EUR', 'CNY']);\n\nconst LARGE_NUMBER = 1000;\n\nfunction getCurrencyPriority(symbol: string) {\n  if (FIAT.has(symbol)) return 5;\n  if (USD.has(symbol)) return 4;\n  if (BTC.has(symbol)) return 3;\n  if (symbol === TONCOIN.symbol) return 2;\n\n  return 1;\n}\n\nexport default function getSwapRate(\n  fromAmount?: string,\n  toAmount?: string,\n  fromToken?: Pick<ApiSwapAsset, 'symbol'>,\n  toToken?: Pick<ApiSwapAsset, 'symbol'>,\n  shouldTrimLargeNumber = false,\n) {\n  if (!fromAmount || !toAmount || !fromToken || !toToken) {\n    return undefined;\n  }\n\n  let firstCurrencySymbol = fromToken.symbol;\n  let secondCurrencySymbol = toToken.symbol;\n  let price: string;\n  const fromAmountBig = new Big(fromAmount);\n  const toAmountBig = new Big(toAmount);\n\n  if (fromAmountBig.eq(0) || toAmountBig.eq(0)) {\n    return undefined;\n  }\n\n  const fromPriority = getCurrencyPriority(firstCurrencySymbol);\n  const toPriority = getCurrencyPriority(secondCurrencySymbol);\n\n  if (toPriority < fromPriority) {\n    firstCurrencySymbol = toToken.symbol;\n    secondCurrencySymbol = fromToken.symbol;\n    const ratio = fromAmountBig.div(toAmount);\n    const isLargeNumber = shouldTrimLargeNumber && ratio.gte(LARGE_NUMBER);\n    price = formatNumber(ratio.toNumber(), isLargeNumber ? 0 : 4);\n  } else {\n    const ratio = toAmountBig.div(fromAmount);\n    const isLargeNumber = shouldTrimLargeNumber && ratio.gte(LARGE_NUMBER);\n    price = formatNumber(ratio.toNumber(), isLargeNumber ? 0 : 4);\n  }\n\n  return {\n    firstCurrencySymbol,\n    secondCurrencySymbol,\n    price,\n  };\n}\n","import avalancheBlockchainIcon from '../../assets/blockchain/chain_avalanche.svg';\nimport bitcoinBlockchainIcon from '../../assets/blockchain/chain_bitcoin.svg';\nimport bitcoincashBlockchainIcon from '../../assets/blockchain/chain_bitcoincash.svg';\nimport bnbBlockchainIcon from '../../assets/blockchain/chain_bnb.svg';\nimport cardanoBlockchainIcon from '../../assets/blockchain/chain_cardano.svg';\nimport cosmosBlockchainIcon from '../../assets/blockchain/chain_cosmos.svg';\nimport dashBlockchainIcon from '../../assets/blockchain/chain_dash.svg';\nimport dogeBlockchainIcon from '../../assets/blockchain/chain_doge.svg';\nimport eosBlockchainIcon from '../../assets/blockchain/chain_eos.svg';\nimport ethereumBlockchainIcon from '../../assets/blockchain/chain_ethereum.svg';\nimport ethereumclassicBlockchainIcon from '../../assets/blockchain/chain_ethereumclassic.svg';\nimport internetcomputerBlockchainIcon from '../../assets/blockchain/chain_internetcomputer.svg';\nimport iotaBlockchainIcon from '../../assets/blockchain/chain_iota.svg';\nimport litecoinBlockchainIcon from '../../assets/blockchain/chain_litecoin.svg';\nimport moneroBlockchainIcon from '../../assets/blockchain/chain_monero.svg';\nimport polkadotBlockchainIcon from '../../assets/blockchain/chain_polkadot.svg';\nimport rippleBlockchainIcon from '../../assets/blockchain/chain_ripple.svg';\nimport solanaBlockchainIcon from '../../assets/blockchain/chain_solana.svg';\nimport stellarBlockchainIcon from '../../assets/blockchain/chain_stellar.svg';\nimport tonBlockchainIcon from '../../assets/blockchain/chain_ton.svg';\nimport tronBlockchainIcon from '../../assets/blockchain/chain_tron.svg';\nimport zcashBlockchainIcon from '../../assets/blockchain/chain_zcash.svg';\n\nconst CHAIN_ICON_MAP: Record<string, string> = {\n  avalanche: avalancheBlockchainIcon,\n  bitcoin: bitcoinBlockchainIcon,\n  bitcoin_cash: bitcoincashBlockchainIcon,\n  binance_smart_chain: bnbBlockchainIcon,\n  binance_dex: bnbBlockchainIcon,\n  cardano: cardanoBlockchainIcon,\n  cosmos: cosmosBlockchainIcon,\n  dash: dashBlockchainIcon,\n  doge: dogeBlockchainIcon,\n  eos: eosBlockchainIcon,\n  ethereum: ethereumBlockchainIcon,\n  ethereum_classic: ethereumclassicBlockchainIcon,\n  internet_computer: internetcomputerBlockchainIcon,\n  iota: iotaBlockchainIcon,\n  litecoin: litecoinBlockchainIcon,\n  monero: moneroBlockchainIcon,\n  polkadot: polkadotBlockchainIcon,\n  ripple: rippleBlockchainIcon,\n  solana: solanaBlockchainIcon,\n  stellar: stellarBlockchainIcon,\n  ton: tonBlockchainIcon,\n  tron: tronBlockchainIcon,\n  zcash: zcashBlockchainIcon,\n};\n\nexport default function getChainNetworkIcon(networkName?: string) {\n  if (!networkName) return '';\n\n  return CHAIN_ICON_MAP[networkName] ?? networkName;\n}\n","import btc from '../../../assets/coins/coin_btc.png';\nimport my from '../../../assets/coins/coin_my.svg';\nimport ton from '../../../assets/coins/coin_ton.png';\nimport trx from '../../../assets/coins/coin_trx.svg';\nimport usdt from '../../../assets/coins/coin_usdt.svg';\n\nexport const ASSET_LOGO_PATHS = {\n  ton,\n  btc,\n  trx,\n  usdt,\n  my,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"XPeM0_U7\",\"icon\":\"FoSSGfFn\",\"large\":\"wjhynzvL\",\"x-large\":\"CRkmFyTA\",\"xLarge\":\"CRkmFyTA\",\"x-small\":\"TGv989qd\",\"xSmall\":\"TGv989qd\",\"small\":\"Zb5vM0UM\",\"middle\":\"d5dxI69w\",\"fallbackIcon\":\"p13LUS2n\",\"blockchainIcon\":\"CMIQ9vCY\"};","import React, { memo, type TeactNode } from '../../lib/teact/teact';\n\nimport type { ApiSwapAsset, ApiToken } from '../../api/types';\nimport type { UserSwapToken, UserToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport getChainNetworkIcon from '../../util/swap/getChainNetworkIcon';\nimport { ASSET_LOGO_PATHS } from '../ui/helpers/assetLogos';\n\nimport useFlag from '../../hooks/useFlag';\n\nimport styles from './TokenIcon.module.scss';\n\ninterface OwnProps {\n  token: UserToken | UserSwapToken | ApiSwapAsset | ApiToken;\n  withChainIcon?: boolean;\n  size?: 'x-small' | 'small' | 'middle' | 'large' | 'x-large';\n  className?: string;\n  iconClassName?: string;\n  children?: TeactNode;\n}\n\nfunction TokenIcon({\n  token, size, withChainIcon, className, iconClassName, children,\n}: OwnProps) {\n  const { symbol, image, chain } = token;\n  const logoPath = ASSET_LOGO_PATHS[symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS] || image;\n  const [isLoadingError, markLoadingError] = useFlag(false);\n\n  function renderDefaultIcon() {\n    return (\n      <div className={buildClassName(styles.icon, size && styles[size], iconClassName, styles.fallbackIcon)}>\n        {token.symbol.slice(0, 1)}\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.wrapper, className)}>\n      {\n        !isLoadingError ? (\n          <img\n            src={logoPath}\n            alt={symbol}\n            className={buildClassName(styles.icon, size && styles[size], iconClassName)}\n            draggable={false}\n            onError={markLoadingError}\n          />\n        ) : renderDefaultIcon()\n      }\n      {withChainIcon && chain && (\n        <img\n          src={getChainNetworkIcon(chain)}\n          alt=\"\"\n          className={buildClassName(styles.blockchainIcon, size && styles[size])}\n          draggable={false}\n        />\n      )}\n      {children}\n    </div>\n  );\n}\n\nexport default memo(TokenIcon);\n","import type { RefObject } from 'react';\nimport React, { memo, useLayoutEffect, useRef } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { Theme } from '../../global/types';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport { animateInstantly } from '../../util/animation';\nimport buildClassName from '../../util/buildClassName';\nimport { clamp } from '../../util/math';\nimport { random } from '../../util/random';\nimport { DPR } from '../../util/windowEnvironment';\n\nimport { useGetIsIntersectingWithApp } from '../../hooks/useAppIntersectionObserver';\nimport useAppTheme from '../../hooks/useAppTheme';\nimport { getIsInBackground } from '../../hooks/useBackgroundMode';\nimport useDerivedSignal from '../../hooks/useDerivedSignal';\n\nimport styles from './SensitiveDataMask.module.scss';\n\nexport type SensitiveDataMaskSkin = (\n  'lightTheme' | 'darkTheme' | 'cardLightText' | 'cardDarkText' | 'cardGoldText' | 'purple' | 'green'\n  );\n\ninterface OwnProps {\n  ref?: RefObject<HTMLCanvasElement>;\n  cols: number;\n  rows: number;\n  cellSize: number;\n  skin?: SensitiveDataMaskSkin;\n  className?: string;\n}\n\ninterface StateProps {\n  theme: Theme;\n}\n\ninterface AnimationState {\n  opacityValues: number[][];\n  steps: number[][];\n  lastSpeedChangeAt?: number;\n  isRendered: boolean;\n}\n\ninterface RenderOptions {\n  ctx: CanvasRenderingContext2D;\n  cols: number;\n  rows: number;\n  width: number;\n  height: number;\n  cellSizeDpr: number;\n  color: string;\n}\n\n// STEPS values are pre-multiplied by 1 / (1000 / 60) to compensate for FPS\nconst STEPS = [\n  0.0001 * 0.06,\n  0.0001 * 0.06,\n  0.00001 * 0.06,\n  0.0003 * 0.06,\n  0.0001 * 0.06,\n  0.0025 * 0.06,\n];\nconst FROM = 0.07;\nconst TO = 0.25;\nconst CHANGE_SPEED_INTERVAL = 3000;\nconst SKIN_COLORS: Record<SensitiveDataMaskSkin, string> = {\n  lightTheme: '120, 121, 122',\n  darkTheme: '240, 241, 242',\n  cardLightText: '250, 250, 250',\n  cardDarkText: '10, 10, 10',\n  cardGoldText: '101, 73, 16',\n  purple: '96, 107, 215',\n  green: '43, 196, 105',\n};\n\nfunction SensitiveDataMask({\n  ref,\n  cols,\n  rows,\n  cellSize,\n  skin,\n  className,\n  theme,\n}: OwnProps & StateProps) {\n  let canvasRef = useRef<HTMLCanvasElement>();\n  if (ref) {\n    canvasRef = ref;\n  }\n\n  const cellSizeDpr = cellSize * DPR;\n\n  const appTheme = useAppTheme(theme);\n  const color = SKIN_COLORS[skin ?? `${appTheme}Theme`];\n\n  const animationStateRef = useRef<AnimationState>({\n    opacityValues: [],\n    steps: [],\n    lastSpeedChangeAt: undefined,\n    isRendered: false,\n  });\n\n  const getIsIntersecting = useGetIsIntersectingWithApp(canvasRef);\n  const getIsInBackground2 = getIsInBackground;\n  const getShouldAnimate = useDerivedSignal(\n    () => getIsIntersecting() && !getIsInBackground2(),\n    [getIsIntersecting, getIsInBackground2],\n  );\n\n  useLayoutEffect(() => {\n    const state = animationStateRef.current;\n\n    if (state.isRendered && !getShouldAnimate()) return undefined;\n\n    const canvas = canvasRef.current!;\n    const ctx = canvas.getContext('2d')!;\n    const width = cols * cellSizeDpr;\n    const height = rows * cellSizeDpr;\n\n    let shouldStop = false;\n    let lastFrameAt: number | undefined;\n\n    canvas.width = width;\n    canvas.height = height;\n\n    state.lastSpeedChangeAt = undefined;\n\n    const renderOptions = { ctx, cols, rows, width, height, cellSizeDpr, color };\n\n    animateInstantly(() => {\n      if (shouldStop || (state.isRendered && !getShouldAnimate())) return false;\n\n      const now = performance.now();\n      const frameDuration = lastFrameAt ? now - lastFrameAt : 0;\n      renderFrame(renderOptions, state, frameDuration);\n      lastFrameAt = now;\n\n      return true;\n    }, requestMutation);\n\n    return () => {\n      shouldStop = true;\n    };\n  }, [cols, rows, cellSizeDpr, getShouldAnimate, color]);\n\n  return (\n    <canvas\n      ref={canvasRef}\n      style={`width: ${cellSize * cols}px; height: ${cellSize * rows}px`}\n      className={buildClassName(styles.canvas, className)}\n    />\n  );\n}\n\nfunction renderFrame(\n  options: RenderOptions,\n  state: AnimationState,\n  frameDuration = 0,\n) {\n  const {\n    ctx, cols, rows, cellSizeDpr, width, height, color,\n  } = options;\n\n  const now = performance.now();\n  const shouldChangeSpeed = state.lastSpeedChangeAt ? now - state.lastSpeedChangeAt >= CHANGE_SPEED_INTERVAL : false;\n\n  if (shouldChangeSpeed || !state.lastSpeedChangeAt) {\n    state.lastSpeedChangeAt = now;\n  }\n\n  ctx.clearRect(0, 0, width, height);\n\n  for (let row = 0; row < rows; row++) {\n    for (let col = 0; col < cols; col++) {\n      state.steps[row] ??= [];\n      state.opacityValues[row] ??= [];\n\n      if (shouldChangeSpeed) {\n        state.steps[row][col] = sample(STEPS) * (state.steps[row][col] < 0 ? -1 : 1);\n      } else {\n        state.steps[row][col] ??= sample(STEPS);\n      }\n\n      let nextOpacity = state.opacityValues[row][col] ?? (Math.random() * (TO - FROM) + FROM);\n      nextOpacity += state.steps[row][col] * frameDuration;\n      if (nextOpacity > TO || nextOpacity < FROM) {\n        state.steps[row][col] *= -1;\n        nextOpacity = clamp(nextOpacity, FROM, TO);\n      }\n\n      state.opacityValues[row][col] = nextOpacity;\n\n      ctx.fillStyle = `rgba(${color}, ${nextOpacity})`;\n      ctx.fillRect(col * cellSizeDpr, row * cellSizeDpr, cellSizeDpr, cellSizeDpr);\n\n      state.isRendered ||= true;\n    }\n  }\n}\n\n// Returns a random element from the array\nfunction sample<T>(array: T[]): T {\n  return array[random(0, array.length - 1)];\n}\n\nexport default memo(withGlobal((global) => {\n  return {\n    theme: global.settings.theme,\n  };\n})(SensitiveDataMask));\n","// extracted by mini-css-extract-plugin\nexport default {\"canvas\":\"_5lZqlhE\"};","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"iXsFkRU7\",\"center\":\"FEWWktrI\",\"right\":\"FXNTlsIy\",\"interactive\":\"O6dWAwYM\",\"content\":\"GAvxZ7xR\",\"spoiler\":\"ynSPM0hu\",\"left\":\"DSH91Ntx\",\"fixedWidth\":\"CBhjF9XS\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { SensitiveDataMaskSkin } from '../common/SensitiveDataMask';\n\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport { stopEvent } from '../../util/domEvents';\nimport { vibrate } from '../../util/haptics';\n\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport SensitiveDataMask from '../common/SensitiveDataMask';\n\nimport styles from './SensitiveData.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  rows: number;\n  cols: number;\n  cellSize: number;\n  align?: 'left' | 'center' | 'right';\n  maskSkin?: SensitiveDataMaskSkin;\n  shouldHoldSize?: boolean;\n  className?: string;\n  maskClassName?: string;\n  contentClassName?: string;\n  children: TeactNode;\n}\n\nfunction SensitiveData({\n  isActive,\n  rows,\n  cols,\n  cellSize = 0,\n  align = 'left',\n  maskSkin,\n  shouldHoldSize,\n  className,\n  maskClassName,\n  contentClassName,\n  children,\n}: OwnProps) {\n  const { setIsSensitiveDataHidden } = getActions();\n\n  const {\n    ref: contentRef,\n  } = useShowTransition<HTMLDivElement>({\n    isOpen: !isActive,\n    noMountTransition: !isActive,\n    className: 'slow',\n  });\n\n  const {\n    shouldRender: shouldRenderSpoiler,\n    ref: spoilerRef,\n  } = useShowTransition<HTMLCanvasElement>({\n    isOpen: isActive,\n    withShouldRender: true,\n    className: 'slow',\n  });\n\n  function handleClick(e: React.UIEvent) {\n    stopEvent(e);\n\n    setIsSensitiveDataHidden({ isHidden: false });\n    void vibrate();\n  }\n\n  const fullClassName = buildClassName(\n    styles.wrapper,\n    className,\n    isActive && styles.interactive,\n    styles[align],\n  );\n  const spoilerClassName = buildClassName(\n    styles.spoiler,\n    maskClassName,\n    styles[align],\n  );\n  const wrapperStyle = buildStyle(\n    `--spoiler-width: calc(${cellSize * cols}px + var(--sensitive-data-extra-width, 0px))`,\n    `min-height: ${cellSize * rows}px`,\n    (isActive || shouldHoldSize) && 'min-width: var(--spoiler-width);',\n  );\n  const contentFullClassName = buildClassName(\n    styles.content,\n    contentClassName,\n    isActive && styles.fixedWidth,\n  );\n\n  return (\n    <div\n      style={wrapperStyle}\n      className={fullClassName}\n      onClick={isActive ? handleClick : undefined}\n    >\n      {shouldRenderSpoiler && (\n        <SensitiveDataMask\n          ref={spoilerRef}\n          cols={cols}\n          rows={rows}\n          cellSize={cellSize}\n          skin={maskSkin}\n          className={spoilerClassName}\n        />\n      )}\n      <div ref={contentRef} className={contentFullClassName}>\n        {children}\n      </div>\n    </div>\n  );\n}\n\nexport default SensitiveData;\n","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"voGmKods\",\"interactive\":\"JKuqFIMs\",\"active\":\"vPKs_EfD\",\"itemLast\":\"ithY1XA8\",\"icon\":\"MwNQsICc\",\"dnsIcon\":\"phy9vVLZ\",\"iconFromToken\":\"PVRC8YXZ\",\"iconWaiting\":\"hJkwVF68\",\"iconError\":\"QEx5s5VW\",\"header\":\"pEdRQT_R\",\"subheader\":\"lp28p1if\",\"atMiddle\":\"O_xYgdgM\",\"operationName\":\"mNtPH759\",\"date\":\"koKI7xJv\",\"subheaderHighlight\":\"PQ56yxoE\",\"chainIcon\":\"cSKmXwko\",\"amount\":\"cPGOyB7W\",\"amountTokenIcon\":\"fY8lBeMI\",\"commentIcon\":\"gBryI_V5\",\"comment\":\"HZlzXBrP\",\"outgoing\":\"pDncMEIU\",\"scamImage\":\"q57qlNaF\",\"swapArrowRight\":\"O_3HTad8\",\"swapSell\":\"i_ICee_w\",\"swapBuy\":\"mTZ6NzL2\",\"swapHold\":\"aPXkRlmy\",\"swapError\":\"zT_yLEe8\",\"nft\":\"e3BuV9xi\",\"nonInteractive\":\"ajtoDEwn\",\"nftImage\":\"D2P00KCV\",\"nftData\":\"q0pHgkH5\",\"nftName\":\"nyPEMK4u\",\"nftCollection\":\"Qpo6_7BK\",\"attachment\":\"oLA5mzy7\",\"attachmentsInFullSubheader\":\"WHdvfTWr\",\"attachmentsInLeftSubheader\":\"h_nAGYlh\",\"colorIn\":\"Zw8K7_jM\",\"colorOut\":\"X1ICSpcc\",\"colorStake\":\"eSMoqURj\",\"colorNegative\":\"r0qJPY3I\",\"colorSwap\":\"ubpNbJEy\"};","import React, { memo } from '../../../../lib/teact/teact';\n\nimport type { AppTheme } from '../../../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\n\nimport styles from './Activity.module.scss';\n\nconst iconNamePrefix = 'iconClock';\n\nexport type Color = keyof typeof ANIMATED_STICKERS_PATHS.light.preview extends `${typeof iconNamePrefix}${infer C}`\n  ? C : never;\n\ninterface OwnProps {\n  isPending?: boolean;\n  isError?: boolean;\n  /** The error icon is always red */\n  color?: Color;\n  appTheme: AppTheme;\n}\n\nfunction ActivityStatusIcon({ isPending, isError, color = 'Gray', appTheme }: OwnProps) {\n  const { shouldRender: shouldRenderClock, ref: clockRef } = useShowTransition({\n    isOpen: isPending,\n    withShouldRender: true,\n  });\n\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n  const clockIconName = `${iconNamePrefix}${color}` as `${typeof iconNamePrefix}${Color}`;\n\n  return (\n    <>\n      {isError && <i className={buildClassName(styles.iconError, 'icon-close-filled')} aria-hidden />}\n      {shouldRenderClock && (\n        <div ref={clockRef} className={styles.iconWaiting}>\n          <AnimatedIconWithPreview\n            play\n            size={ANIMATED_STICKER_TINY_ICON_PX}\n            nonInteractive\n            noLoop={false}\n            forceOnHeavyAnimation\n            tgsUrl={ANIMATED_STICKERS_PATHS[appTheme][clockIconName]}\n            previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview[clockIconName]}\n          />\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default memo(ActivityStatusIcon);\n","import type { Ref, RefObject } from 'react';\nimport type { TeactNode } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../../../lib/teact/teact';\n\nimport type { ApiSwapActivity, ApiSwapAsset } from '../../../../api/types';\nimport type { Account, AppTheme } from '../../../../global/types';\nimport type { Color as PendingIndicatorColor } from './ActivityStatusIcon';\n\nimport { TONCOIN, WHOLE_PART_DELIMITER } from '../../../../config';\nimport { getIsInternalSwap, resolveSwapAsset } from '../../../../global/helpers';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatTime } from '../../../../util/dateFormat';\nimport { formatCurrencyExtended } from '../../../../util/formatNumber';\nimport getPseudoRandomNumber from '../../../../util/getPseudoRandomNumber';\nimport getSwapRate from '../../../../util/swap/getSwapRate';\n\nimport useLang from '../../../../hooks/useLang';\n\nimport TokenIcon from '../../../common/TokenIcon';\nimport Button from '../../../ui/Button';\nimport SensitiveData from '../../../ui/SensitiveData';\nimport ActivityStatusIcon from './ActivityStatusIcon';\n\nimport styles from './Activity.module.scss';\n\ntype OwnProps = {\n  ref?: Ref<HTMLElement>;\n  tokensBySlug: Record<string, ApiSwapAsset> | undefined;\n  isLast?: boolean;\n  activity: ApiSwapActivity;\n  isActive?: boolean;\n  appTheme: AppTheme;\n  addressByChain: Account['addressByChain'] | undefined;\n  isSensitiveDataHidden?: boolean;\n  isFuture?: boolean;\n  onClick?: (id: string) => void;\n};\n\nconst SWAP_HEIGHT = 4; // rem\nconst CHANGELLY_PENDING_STATUSES = new Set(['new', 'waiting', 'confirming', 'exchanging', 'sending', 'hold']);\nconst CHANGELLY_EXPIRED_STATUSES = new Set(['failed', 'expired', 'refunded', 'overdue']);\nconst ONCHAIN_ERROR_STATUSES = new Set(['expired', 'failed']);\n\nfunction Swap({\n  ref,\n  tokensBySlug,\n  activity,\n  isLast,\n  isActive,\n  appTheme,\n  addressByChain,\n  isSensitiveDataHidden,\n  isFuture,\n  onClick,\n}: OwnProps) {\n  const lang = useLang();\n\n  const {\n    id,\n    timestamp,\n    status,\n    from,\n    to,\n    cex,\n  } = activity;\n\n  const fromToken = useMemo(() => {\n    if (!from || !tokensBySlug) return undefined;\n\n    return resolveSwapAsset(tokensBySlug, from);\n  }, [from, tokensBySlug]);\n  const toToken = useMemo(() => {\n    if (!to || !tokensBySlug) return undefined;\n\n    return resolveSwapAsset(tokensBySlug, to);\n  }, [to, tokensBySlug]);\n\n  const fromAmount = Number(activity.fromAmount);\n  const toAmount = Number(activity.toAmount);\n  const isPending = status === 'pending'\n    || CHANGELLY_PENDING_STATUSES.has(cex?.status ?? '');\n  const isError = ONCHAIN_ERROR_STATUSES.has(status)\n    || CHANGELLY_EXPIRED_STATUSES.has(cex?.status ?? '');\n  const isHold = cex?.status === 'hold';\n  const amountCols = useMemo(() => getPseudoRandomNumber(5, 13, timestamp.toString()), [timestamp]);\n\n  const isFromToncoin = from === TONCOIN.slug;\n  const isInternalSwap = getIsInternalSwap({\n    from: fromToken,\n    to: toToken,\n    toAddress: cex?.payoutAddress,\n    addressByChain,\n  });\n\n  function renderIcon() {\n    let statusClass: string | undefined = styles.colorSwap;\n    let pendingIndicatorColor: PendingIndicatorColor = 'Green';\n    if (isError) {\n      statusClass = styles.colorNegative;\n      pendingIndicatorColor = 'Red';\n    } else if (isHold) {\n      statusClass = undefined;\n      pendingIndicatorColor = 'Gray';\n    }\n\n    return (\n      <i className={buildClassName('icon-swap', styles.icon, statusClass)} aria-hidden>\n        <ActivityStatusIcon\n          isPending={isPending}\n          isError={isError}\n          color={pendingIndicatorColor}\n          appTheme={appTheme}\n        />\n      </i>\n    );\n  }\n\n  function renderAmount() {\n    const statusClass = buildClassName(isError && styles.swapError, isHold && styles.swapHold);\n\n    return (\n      <SensitiveData\n        isActive={isSensitiveDataHidden}\n        cols={amountCols}\n        rows={2}\n        cellSize={8}\n        align=\"right\"\n        contentClassName={styles.amount}\n      >\n        <span className={buildClassName(styles.swapSell, statusClass)}>\n          {formatCurrencyExtended(\n            Math.abs(fromAmount),\n            fromToken?.symbol || TONCOIN.symbol,\n            true,\n          )}\n        </span>\n        <i\n          className={buildClassName(styles.swapArrowRight, 'icon-chevron-right', statusClass)}\n          aria-hidden\n        />\n        <span className={buildClassName(styles.swapBuy, statusClass)}>\n          {formatCurrencyExtended(\n            Math.abs(toAmount),\n            toToken?.symbol || TONCOIN.symbol,\n            true,\n          )}\n        </span>\n        {fromToken && <TokenIcon token={fromToken} size=\"x-small\" className={styles.amountTokenIcon} />}\n        {toToken && <TokenIcon token={toToken} size=\"x-small\" className={styles.amountTokenIcon} />}\n      </SensitiveData>\n    );\n  }\n\n  function renderStatusAndDate() {\n    if (isFuture) {\n      return <div />;\n    }\n\n    const date: string | TeactNode[] = formatTime(timestamp);\n    let state = '';\n    const cexStatus = cex?.status;\n\n    if (cexStatus === 'expired' || cexStatus === 'overdue') {\n      state = lang('Expired');\n    } else if (cexStatus === 'refunded') {\n      state = lang('Refunded');\n    } else if (cexStatus === 'hold') {\n      state = lang('On Hold');\n    } else if (cexStatus === 'failed' || isError) {\n      state = lang('Failed');\n    } else if (cexStatus === 'waiting' && !isFromToncoin && !isInternalSwap) {\n      // Skip the 'waiting' status for transactions from Toncoin to account or from Tron to Ton\n      // inside the multichain wallet for delayed status updates from hangelly\n      state = lang('Waiting for Payment');\n    } else if (isPending) {\n      state = lang('In Progress');\n    }\n\n    return (\n      <div className={styles.date}>\n        {state && <span className={styles.subheaderHighlight}>{state}</span>}\n        {state && `${WHOLE_PART_DELIMITER}${WHOLE_PART_DELIMITER}`}\n        {date}\n      </div>\n    );\n  }\n\n  function renderTitle() {\n    if (isHold || isError || isFuture) {\n      return lang('$swap_action');\n    } else if (isPending) {\n      return lang('Swapping');\n    }\n\n    return lang('Swapped');\n  }\n\n  function renderCurrency() {\n    const rate = getSwapRate(activity.fromAmount, activity.toAmount, fromToken, toToken);\n\n    if (!rate) return undefined;\n\n    const [priceWhole, priceFraction] = rate.price.split('.');\n\n    return (\n      <div>\n        {rate.firstCurrencySymbol}{'  '}\n        <span className={styles.subheaderHighlight}>\n          {priceWhole}\n          <small>.{priceFraction}{' '}{rate.secondCurrencySymbol}</small>\n        </span>\n      </div>\n    );\n  }\n\n  return (\n    <Button\n      ref={ref as RefObject<HTMLButtonElement>}\n      className={buildClassName(\n        styles.item,\n        isLast && styles.itemLast,\n        isActive && styles.active,\n        onClick && styles.interactive,\n      )}\n      onClick={onClick && (() => onClick(id))}\n      isSimple\n    >\n      {renderIcon()}\n      <div className={styles.header}>\n        <div className={buildClassName(styles.operationName, isFuture && styles.atMiddle)}>\n          {renderTitle()}\n        </div>\n        {renderAmount()}\n      </div>\n      <div className={styles.subheader}>\n        {renderStatusAndDate()}\n        {renderCurrency()}\n      </div>\n    </Button>\n  );\n}\n\nexport default memo(Swap);\n\nexport function getSwapHeight() {\n  return SWAP_HEIGHT;\n}\n","import type { ApiChain } from '../api/types';\nimport type { Account, SavedAddress } from '../global/types';\n\nexport function getLocalAddressName({\n  address,\n  chain,\n  currentAccountId,\n  accounts,\n  savedAddresses,\n}: {\n  address?: string;\n  chain: ApiChain;\n  currentAccountId: string;\n  accounts?: Record<string, Account>;\n  savedAddresses?: SavedAddress[];\n}) {\n  if (!address) return undefined;\n\n  const otherAccount = accounts\n    ? Object.keys(accounts).find((accountId) => {\n      return accountId !== currentAccountId && accounts[accountId].addressByChain?.[chain] === address;\n    })\n    : undefined;\n\n  if (otherAccount) {\n    return accounts![otherAccount].title;\n  }\n\n  return savedAddresses?.find((item) => {\n    return item.address === address && item.chain === chain;\n  })?.name;\n}\n","import type { Ref, RefObject } from 'react';\nimport type { TeactNode } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type {\n  ApiBaseCurrency,\n  ApiNft,\n  ApiTokenWithPrice,\n  ApiTransactionActivity,\n  ApiTransactionType,\n  ApiYieldType,\n} from '../../../../api/types';\nimport type { Account, AppTheme, SavedAddress } from '../../../../global/types';\nimport type { Color as PendingIndicatorColor } from './ActivityStatusIcon';\n\nimport {\n  FRACTION_DIGITS,\n  NFT_MARKETPLACE_TITLES,\n  SWAP_DEX_LABELS,\n  TONCOIN,\n  TRANSACTION_ADDRESS_SHIFT,\n  WHOLE_PART_DELIMITER,\n} from '../../../../config';\nimport {\n  DNS_TRANSACTION_TYPES,\n  getTransactionAmountDisplayMode,\n  getTransactionTitle,\n  isScamTransaction,\n  shouldShowTransactionAddress,\n  shouldShowTransactionAnnualYield,\n  shouldShowTransactionComment,\n  STAKING_TRANSACTION_TYPES,\n} from '../../../../util/activities';\nimport { bigintAbs } from '../../../../util/bigint';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatTime } from '../../../../util/dateFormat';\nimport { toDecimal } from '../../../../util/decimals';\nimport { getDnsDomainZone } from '../../../../util/dns';\nimport { formatBaseCurrencyAmount, formatCurrencyExtended } from '../../../../util/formatNumber';\nimport { getLocalAddressName } from '../../../../util/getLocalAddressName';\nimport getPseudoRandomNumber from '../../../../util/getPseudoRandomNumber';\nimport { vibrate } from '../../../../util/haptics';\nimport { shortenAddress } from '../../../../util/shortenAddress';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport TokenIcon from '../../../common/TokenIcon';\nimport Button from '../../../ui/Button';\nimport SensitiveData from '../../../ui/SensitiveData';\nimport ActivityStatusIcon from './ActivityStatusIcon';\n\nimport styles from './Activity.module.scss';\n\nimport scamImg from '../../../../assets/scam.svg';\n\ntype OwnProps = {\n  ref?: Ref<HTMLElement>;\n  tokensBySlug: Record<string, ApiTokenWithPrice>;\n  transaction: ApiTransactionActivity;\n  isLast?: boolean;\n  isActive?: boolean;\n  withChainIcon?: boolean;\n  annualYield: number | undefined;\n  yieldType: ApiYieldType | undefined;\n  appTheme: AppTheme;\n  savedAddresses: SavedAddress[] | undefined;\n  doesNftExist?: boolean;\n  isSensitiveDataHidden?: boolean;\n  isFuture?: boolean;\n  accounts: Record<string, Account> | undefined;\n  currentAccountId: string;\n  baseCurrency: ApiBaseCurrency | undefined;\n  onClick?: (id: string) => void;\n};\n\nconst TRANSACTION_HEIGHT = 4; // rem\nconst NFT_EXTRA_HEIGHT = 3.875; // rem\nconst COMMENT_EXTRA_HEIGHT = 2.375; // rem\nconst SUBHEADER_RELEASE_HEIGHT = 1.25; // rem\n\nconst OUT_TRANSACTION_TYPES = new Set<ApiTransactionType>([\n  undefined, 'unstakeRequest', 'nftTrade', 'auctionBid', 'liquidityDeposit',\n]);\n\nfunction Transaction({\n  ref,\n  tokensBySlug,\n  transaction,\n  isActive,\n  annualYield,\n  yieldType,\n  savedAddresses,\n  isLast,\n  appTheme,\n  withChainIcon,\n  doesNftExist,\n  isSensitiveDataHidden,\n  isFuture,\n  accounts,\n  currentAccountId,\n  baseCurrency,\n  onClick,\n}: OwnProps) {\n  const { openNftAttributesModal } = getActions();\n  const lang = useLang();\n\n  const {\n    txId,\n    amount,\n    fromAddress,\n    toAddress,\n    timestamp,\n    comment,\n    encryptedComment,\n    isIncoming,\n    type,\n    metadata,\n    slug,\n    nft,\n    extra,\n    status,\n  } = transaction;\n\n  const isStaking = STAKING_TRANSACTION_TYPES.has(type);\n  const isDnsOperation = DNS_TRANSACTION_TYPES.has(type);\n\n  const token = tokensBySlug[slug];\n  const { chain } = token || {};\n  const address = isIncoming ? fromAddress : toAddress;\n  const localAddressName = useMemo(() => {\n    if (!chain) return undefined;\n\n    return getLocalAddressName({\n      address,\n      chain,\n      currentAccountId,\n      accounts,\n      savedAddresses,\n    });\n  }, [accounts, address, chain, currentAccountId, savedAddresses]);\n  const addressName = localAddressName || metadata?.name;\n  const dnsIconText = useMemo(() => isDnsOperation ? getDnsIconText(nft) : '', [isDnsOperation, nft]);\n  const amountCols = useMemo(() => getPseudoRandomNumber(5, 13, timestamp.toString()), [timestamp]);\n  const attachmentsTakeSubheader = shouldAttachmentTakeSubheader(transaction, isFuture);\n  const isNoSubheaderLeft = getIsNoSubheaderLeft(transaction, isFuture);\n  const titleTense = isFuture || status === 'failed' ? 'future' : 'past';\n\n  let operationColorClass: string | undefined;\n  let pendingIndicatorColor: PendingIndicatorColor = 'Gray';\n  if (status === 'failed' || type === 'burn') {\n    operationColorClass = styles.colorNegative;\n    pendingIndicatorColor = 'Red';\n  } else if (isIncoming) {\n    operationColorClass = styles.colorIn;\n    pendingIndicatorColor = 'Green';\n  } else if (type === 'stake') {\n    operationColorClass = styles.colorStake;\n    pendingIndicatorColor = 'PurpleWhite';\n  } else if (OUT_TRANSACTION_TYPES.has(type)) {\n    operationColorClass = styles.colorOut;\n    pendingIndicatorColor = 'Blue';\n  }\n\n  const handleNftClick = useLastCallback((event: React.MouseEvent) => {\n    event.stopPropagation();\n\n    void vibrate();\n    openNftAttributesModal({ nft: nft! });\n  });\n\n  function renderNft() {\n    return (\n      <div\n        className={buildClassName(\n          styles.attachment,\n          styles.nft,\n          !doesNftExist && styles.nonInteractive,\n          'transaction-nft',\n        )}\n        onClick={doesNftExist ? handleNftClick : undefined}\n        data-nft-address={nft?.address}\n        data-tx-id={txId}\n      >\n        <img src={nft!.thumbnail} alt={nft!.name} className={styles.nftImage} />\n        <div className={styles.nftData}>\n          <div className={styles.nftName}>{nft!.name}</div>\n          <div className={styles.nftCollection}>{nft!.collectionName}</div>\n        </div>\n      </div>\n    );\n  }\n\n  function renderComment() {\n    const className = buildClassName(\n      styles.attachment,\n      styles.comment,\n      !isIncoming && styles.outgoing,\n      operationColorClass,\n    );\n\n    return (\n      <div className={className}>\n        {encryptedComment && <i className={buildClassName(styles.commentIcon, 'icon-lock')} aria-hidden />}\n        {encryptedComment ? <i>{lang('Encrypted Message')}</i> : comment}\n      </div>\n    );\n  }\n\n  function renderIcon() {\n    let iconName: string;\n    if (isStaking) {\n      iconName = 'icon-earn';\n    } else if (type === 'callContract' || type === 'contractDeploy') {\n      iconName = 'icon-cog';\n    } else if (isDnsOperation) {\n      iconName = buildClassName('rounded-font', styles.dnsIcon);\n    } else if (type === 'mint') {\n      iconName = 'icon-magic-wand';\n    } else if (type === 'burn') {\n      iconName = 'icon-fire';\n    } else if (type === 'auctionBid') {\n      iconName = 'icon-auction-alt';\n    } else if (type === 'nftTrade') {\n      iconName = isIncoming ? 'icon-tag' : 'icon-purchase';\n    } else if (type === 'liquidityDeposit') {\n      iconName = 'icon-can-in';\n    } else if (type === 'liquidityWithdraw') {\n      iconName = 'icon-can-out';\n    } else if (isIncoming) {\n      iconName = 'icon-receive-alt';\n    } else {\n      iconName = 'icon-send-alt';\n    }\n\n    return (\n      <i className={buildClassName(styles.icon, iconName, operationColorClass)} aria-hidden>\n        {isDnsOperation && (\n          <span style={isDnsOperation ? `font-size: ${Math.min(1, 4 / dnsIconText.length) * 100}%` : undefined}>\n            {dnsIconText}\n          </span>\n        )}\n        <ActivityStatusIcon\n          isPending={status === 'pending'}\n          isError={status === 'failed'}\n          color={pendingIndicatorColor}\n          appTheme={appTheme}\n        />\n      </i>\n    );\n  }\n\n  function renderAmount() {\n    const amountDisplayMode = getTransactionAmountDisplayMode(transaction);\n    const noSign = amountDisplayMode === 'noSign';\n\n    if (amountDisplayMode === 'hide') {\n      return;\n    }\n\n    return (\n      <SensitiveData\n        isActive={isSensitiveDataHidden}\n        cols={amountCols}\n        rows={2}\n        cellSize={8}\n        align=\"right\"\n        contentClassName={buildClassName(\n          styles.amount,\n          operationColorClass !== styles.colorOut && operationColorClass,\n        )}\n      >\n        {formatCurrencyExtended(\n          toDecimal(noSign ? bigintAbs(amount) : amount, token?.decimals ?? FRACTION_DIGITS),\n          token?.symbol || TONCOIN.symbol,\n          noSign,\n          undefined,\n          !isIncoming,\n        )}\n        {token && <TokenIcon token={token} size=\"x-small\" className={styles.amountTokenIcon} />}\n      </SensitiveData>\n    );\n  }\n\n  function renderBaseCurrencyAmount() {\n    if (getTransactionAmountDisplayMode(transaction) === 'hide' || !token) {\n      return undefined;\n    }\n\n    return (\n      <SensitiveData\n        isActive={isSensitiveDataHidden}\n        cols={Math.round(3 + (amountCols - 5) / 3)}\n        rows={2}\n        cellSize={8}\n        align=\"right\"\n      >\n        {formatBaseCurrencyAmount(amount, baseCurrency, token)}\n      </SensitiveData>\n    );\n  }\n\n  function renderAddressAndDate() {\n    const children: TeactNode[] = [];\n    const delimiter = `${WHOLE_PART_DELIMITER}${WHOLE_PART_DELIMITER}`;\n\n    if (transaction.status === 'failed') {\n      children.push(delimiter, lang('Failed'));\n    }\n\n    if (shouldShowTransactionAddress(transaction).includes('list')) {\n      const dexName = extra?.dex && SWAP_DEX_LABELS[extra.dex];\n      const marketplaceName = extra?.marketplace && NFT_MARKETPLACE_TITLES[extra.marketplace];\n\n      children.push(delimiter, lang(\n        (dexName || marketplaceName) ? '$transaction_on' : isIncoming ? '$transaction_from' : '$transaction_to',\n        {\n          address: (\n            <span className={styles.subheaderHighlight}>\n              {withChainIcon && Boolean(chain) && (\n                <i\n                  className={buildClassName(styles.chainIcon, `icon-chain-${chain.toLowerCase()}`)}\n                  aria-label={chain}\n                />\n              )}\n              {dexName || marketplaceName || addressName || shortenAddress(address, TRANSACTION_ADDRESS_SHIFT)}\n            </span>\n          ),\n        },\n      ));\n    }\n\n    if (shouldShowTransactionAnnualYield(transaction)) {\n      children.push(delimiter, lang('at %annual_yield%', {\n        annual_yield: <span className={styles.subheaderHighlight}>{yieldType} {annualYield}%</span>,\n      }));\n    }\n\n    if (!isFuture) {\n      children.push(delimiter, formatTime(timestamp));\n    }\n\n    // Warning! Keep this function result in sync with `getIsNoSubheaderLeft`\n    return (\n      <div className={styles.date}>\n        {children.slice(1)}\n      </div>\n    );\n  }\n\n  return (\n    <Button\n      ref={ref as RefObject<HTMLButtonElement>}\n      className={buildClassName(\n        styles.item,\n        isLast && styles.itemLast,\n        isActive && styles.active,\n        onClick && styles.interactive,\n        attachmentsTakeSubheader === 'full' ? styles.attachmentsInFullSubheader\n          : attachmentsTakeSubheader === 'left' ? styles.attachmentsInLeftSubheader : undefined,\n      )}\n      onClick={onClick && (() => onClick(txId))}\n      isSimple\n    >\n      {renderIcon()}\n      <div className={styles.header}>\n        <div\n          className={buildClassName(\n            styles.operationName,\n            isNoSubheaderLeft && attachmentsTakeSubheader === 'none' && styles.atMiddle,\n          )}\n        >\n          {getTransactionTitle(transaction, titleTense, lang)}\n          {isScamTransaction(transaction) && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n        </div>\n        {renderAmount()}\n      </div>\n      <div className={styles.subheader}>\n        {renderAddressAndDate()}\n        {renderBaseCurrencyAmount()}\n      </div>\n      {nft && renderNft()}\n      {shouldShowTransactionComment(transaction) && renderComment()}\n    </Button>\n  );\n}\n\nexport default memo(Transaction);\n\nexport function getTransactionHeight(transaction: ApiTransactionActivity, isFuture?: boolean) {\n  return TRANSACTION_HEIGHT\n    + (transaction.nft ? NFT_EXTRA_HEIGHT : 0)\n    + (shouldShowTransactionComment(transaction) ? COMMENT_EXTRA_HEIGHT : 0)\n    - (shouldAttachmentTakeSubheader(transaction, isFuture) !== 'none' ? SUBHEADER_RELEASE_HEIGHT : 0);\n}\n\nfunction shouldAttachmentTakeSubheader(\n  transaction: ApiTransactionActivity,\n  isFuture?: boolean,\n): 'none' | 'left' | 'full' {\n  if (!transaction.nft && !shouldShowTransactionComment(transaction)) {\n    return 'none';\n  }\n\n  if (!getIsNoSubheaderLeft(transaction, isFuture)) {\n    return 'none'; // The attachment won't fit in the right slot, because the left subheader is too wide\n  }\n\n  if (getIsNoSubheaderRight(transaction)) {\n    return 'full';\n  }\n\n  const isAttachmentOnTheLeft = transaction.nft || transaction.isIncoming;\n  return isAttachmentOnTheLeft ? 'left' : 'none';\n}\n\nfunction getIsNoSubheaderLeft(transaction: ApiTransactionActivity, isFuture?: boolean) {\n  return isFuture\n    && transaction.status !== 'failed'\n    && !shouldShowTransactionAddress(transaction).includes('list')\n    && !shouldShowTransactionAnnualYield(transaction);\n}\n\nfunction getIsNoSubheaderRight(transaction: ApiTransactionActivity) {\n  return getTransactionAmountDisplayMode(transaction) === 'hide';\n}\n\nfunction getDnsIconText(nft: ApiNft | undefined) {\n  if (nft?.name) {\n    const resolved = getDnsDomainZone(nft.name);\n    if (resolved) {\n      return `.${resolved.zone.suffixes[0]}`;\n    }\n  }\n\n  return 'DNS';\n}\n","import React from '../../../../lib/teact/teact';\n\nimport type {\n  ApiActivity,\n  ApiBaseCurrency,\n  ApiNft,\n  ApiStakingState,\n  ApiSwapAsset,\n  ApiTokenWithPrice,\n} from '../../../../api/types';\nimport type { Account, AppTheme, SavedAddress } from '../../../../global/types';\n\nimport Swap, { getSwapHeight } from './Swap';\nimport Transaction, { getTransactionHeight } from './Transaction';\n\ninterface OwnProps {\n  activity: ApiActivity;\n  isLast?: boolean;\n  isActive?: boolean;\n  isSensitiveDataHidden?: boolean;\n  isFuture?: boolean;\n  withChainIcon?: boolean;\n  tokensBySlug: Record<string, ApiTokenWithPrice>;\n  swapTokensBySlug: Record<string, ApiSwapAsset> | undefined;\n  appTheme: AppTheme;\n  nftsByAddress: Record<string, ApiNft> | undefined;\n  currentAccountId: string;\n  stakingStateBySlug: Record<string, ApiStakingState>;\n  savedAddresses: SavedAddress[] | undefined;\n  accounts: Record<string, Account> | undefined;\n  baseCurrency: ApiBaseCurrency | undefined;\n  onClick?: (id: string) => void;\n}\n\nexport default function Activity({\n  activity,\n  isLast,\n  isActive,\n  isSensitiveDataHidden,\n  isFuture,\n  withChainIcon,\n  tokensBySlug,\n  swapTokensBySlug,\n  appTheme,\n  nftsByAddress,\n  currentAccountId,\n  stakingStateBySlug,\n  savedAddresses,\n  accounts,\n  baseCurrency,\n  onClick,\n}: OwnProps) {\n  if (activity.kind === 'swap') {\n    return (\n      <Swap\n        activity={activity}\n        tokensBySlug={swapTokensBySlug}\n        isLast={isLast}\n        isActive={isActive}\n        appTheme={appTheme}\n        addressByChain={accounts?.[currentAccountId]?.addressByChain}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        isFuture={isFuture}\n        onClick={onClick}\n      />\n    );\n  } else {\n    const doesNftExist = Boolean(activity.nft && nftsByAddress?.[activity.nft.address]);\n    const { annualYield, yieldType } = stakingStateBySlug[activity.slug] ?? {};\n\n    return (\n      <Transaction\n        currentAccountId={currentAccountId}\n        transaction={activity}\n        tokensBySlug={tokensBySlug}\n        isActive={isActive}\n        annualYield={annualYield}\n        yieldType={yieldType}\n        isLast={isLast}\n        savedAddresses={savedAddresses}\n        withChainIcon={withChainIcon}\n        appTheme={appTheme}\n        doesNftExist={doesNftExist}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        isFuture={isFuture}\n        accounts={accounts}\n        baseCurrency={baseCurrency}\n        onClick={onClick}\n      />\n    );\n  }\n}\n\nexport function getActivityHeight(activity: ApiActivity, isFuture?: boolean) {\n  return activity.kind === 'swap' ? getSwapHeight() : getTransactionHeight(activity, isFuture);\n}\n","import React, {\n  memo,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiDapp } from '../../api/types';\nimport { type Account, TransferState } from '../../global/types';\n\nimport { TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { selectCurrentToncoinBalance, selectNetworkAccounts } from '../../global/selectors';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport DappInfo from './DappInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface StateProps {\n  currentAccount?: Account;\n  toncoinBalance: bigint;\n  dapp?: ApiDapp;\n}\n\nfunction DappLedgerWarning({\n  currentAccount,\n  toncoinBalance,\n  dapp,\n}: StateProps) {\n  const { cancelDappTransfer, setDappTransferScreen } = getActions();\n\n  const lang = useLang();\n\n  const handleAgree = useLastCallback(() => {\n    setDappTransferScreen({ state: TransferState.Initial });\n  });\n\n  function renderDapp() {\n    return (\n      <div className={styles.transactionDirection}>\n        <div className={styles.transactionAccount}>\n          <div className={styles.accountTitle}>{currentAccount?.title}</div>\n          <div className={styles.accountBalance}>{formatCurrency(toDecimal(toncoinBalance), TONCOIN.symbol)}</div>\n        </div>\n\n        <DappInfo\n          dapp={dapp}\n          className={styles.transactionDapp}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className={modalStyles.transitionContent}>\n      {renderDapp()}\n\n      <div className={styles.descriptionContent}>\n        <span>{renderText(lang('$dapp_ledger_warning1'))}</span>\n        <span>{renderText(lang('$dapp_ledger_warning2'))}</span>\n      </div>\n\n      <div className={modalStyles.buttons}>\n        <Button className={modalStyles.button} onClick={cancelDappTransfer}>{lang('Cancel')}</Button>\n        <Button\n          isPrimary\n          isSubmit\n          className={modalStyles.button}\n          onClick={handleAgree}\n        >\n          {lang('Agree')}\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { dapp } = global.currentDappTransfer;\n  const accounts = selectNetworkAccounts(global);\n\n  return {\n    currentAccount: accounts?.[global.currentAccountId!],\n    toncoinBalance: selectCurrentToncoinBalance(global),\n    dapp,\n  };\n})(DappLedgerWarning));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"DZJAgO1_\",\"icon\":\"DNxf1fb1\",\"interactive\":\"GU6t4snd\",\"rootStatic\":\"frL0b5SW\",\"thumbnail\":\"l7Jv2Ysl\",\"info\":\"cjX8maBi\",\"title\":\"nfp5rpIc\",\"description\":\"qBj00Hsz\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, getGlobal } from '../../global';\n\nimport { MediaType, type NftTransfer } from '../../global/types';\n\nimport { ANIMATED_STICKER_TINY_SIZE_PX } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { openUrl } from '../../util/openUrl';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport { getExplorerName, getExplorerNftUrl } from '../../util/url';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\n\nimport styles from './NftInfo.module.scss';\n\ninterface OwnProps {\n  nft?: NftTransfer;\n  isStatic?: boolean;\n  withTonExplorer?: boolean;\n  // Currently, MediaViewer can only display NFTs that are owned by the user\n  withMediaViewer?: boolean;\n}\n\nfunction NftInfo({\n  nft, isStatic, withTonExplorer, withMediaViewer,\n}: OwnProps) {\n  const { openMediaViewer } = getActions();\n  const lang = useLang();\n\n  const tonExplorerTitle = useMemo(() => {\n    return (lang('Open on %ton_explorer_name%', {\n      ton_explorer_name: getExplorerName('ton'),\n    }) as string[]\n    ).join('');\n  }, [lang]);\n\n  const handleClickInfo = (event: React.MouseEvent) => {\n    event.stopPropagation();\n    const url = getExplorerNftUrl(nft!.address, getGlobal().settings.isTestnet)!;\n\n    void openUrl(url);\n  };\n\n  const handleClick = useLastCallback(() => {\n    openMediaViewer({ mediaId: nft!.address, mediaType: MediaType.Nft });\n  });\n\n  if (!nft) {\n    return (\n      <div className={buildClassName(styles.root, isStatic && styles.rootStatic)}>\n        <AnimatedIconWithPreview\n          play\n          noLoop={false}\n          nonInteractive\n          size={ANIMATED_STICKER_TINY_SIZE_PX}\n          className={styles.thumbnail}\n          tgsUrl={ANIMATED_STICKERS_PATHS.wait}\n          previewUrl={ANIMATED_STICKERS_PATHS.waitPreview}\n        />\n\n        <div className={styles.info}>\n          <div className={styles.title}>NFT</div>\n          <div className={styles.description}>\n            {lang('Name and collection are not available. Please check back later.')}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const name = nft.name || shortenAddress(nft.address);\n\n  function renderContent() {\n    return (\n      <>\n        <img src={nft!.thumbnail} alt={name} className={styles.thumbnail} />\n\n        <div className={styles.info}>\n          <div className={styles.title}>\n            {name}\n            {\n              withTonExplorer && (\n                <i\n                  className={buildClassName(styles.icon, 'icon-tonexplorer-small')}\n                  onClick={handleClickInfo}\n                  title={tonExplorerTitle}\n                  aria-label={tonExplorerTitle}\n                  role=\"button\"\n                  tabIndex={0}\n                />\n              )\n            }\n          </div>\n          <div className={styles.description}>{nft!.collectionName}</div>\n        </div>\n      </>\n    );\n  }\n\n  if (!withMediaViewer) {\n    return (\n      <div className={buildClassName(styles.root, isStatic && styles.rootStatic)}>\n        {renderContent()}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      role=\"button\"\n      tabIndex={0}\n      aria-label={lang('NFT')}\n      className={buildClassName(styles.root, styles.interactive, isStatic && styles.rootStatic)}\n      onClick={handleClick}\n    >\n      {renderContent()}\n    </div>\n  );\n}\n\nexport default memo(NftInfo);\n","import { useCallback, useRef } from '../lib/teact/teact';\n\nimport useEffectOnce from './useEffectOnce';\n\nconst DEFAULT_THRESHOLD = 350;\n\nfunction useLongPress({\n  onClick, onStart, onEnd, threshold = DEFAULT_THRESHOLD,\n}: {\n  onStart?: NoneToVoidFunction;\n  onClick?: (event: React.MouseEvent | React.TouchEvent) => void;\n  onEnd?: NoneToVoidFunction;\n  threshold?: number;\n}) {\n  const isLongPressActive = useRef(false);\n  const isPressed = useRef(false);\n  const timerId = useRef<number | undefined>(undefined);\n\n  const start = useCallback((e: React.MouseEvent | React.TouchEvent) => {\n    const canProcessEvent = ('button' in e && e.button === 0) || ('touches' in e && e.touches.length > 0);\n    if (isPressed.current || !canProcessEvent) {\n      return;\n    }\n\n    isPressed.current = true;\n    timerId.current = window.setTimeout(() => {\n      onStart?.();\n      isLongPressActive.current = true;\n    }, threshold);\n  }, [onStart, threshold]);\n\n  const cancel = useCallback((e: React.MouseEvent | React.TouchEvent) => {\n    if (!isPressed.current) return;\n\n    if (isLongPressActive.current) {\n      onEnd?.();\n    } else {\n      onClick?.(e);\n    }\n\n    isLongPressActive.current = false;\n    isPressed.current = false;\n    window.clearTimeout(timerId.current);\n  }, [onEnd, onClick]);\n\n  useEffectOnce(() => {\n    return () => {\n      window.clearTimeout(timerId.current);\n    };\n  });\n\n  return {\n    onMouseDown: start,\n    onMouseUp: cancel,\n    onMouseLeave: cancel,\n    onTouchStart: start,\n    onTouchEnd: cancel,\n    onTouchCancel: cancel,\n  };\n}\n\nexport default useLongPress;\n","// extracted by mini-css-extract-plugin\nexport default {\"text\":\"r5lsJ1c8\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiChain } from '../../../api/types';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './DeleteSavedAddressModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  address?: string;\n  chain?: ApiChain;\n  onClose: NoneToVoidFunction;\n}\n\nfunction DeleteSavedAddressModal({\n  isOpen, address, chain, onClose,\n}: OwnProps) {\n  const { removeFromSavedAddress, showNotification } = getActions();\n\n  const lang = useLang();\n\n  const handleDeleteSavedAddress = useLastCallback(() => {\n    removeFromSavedAddress({ address: address!, chain: chain! });\n    showNotification({ message: lang('Address removed from saved'), icon: 'icon-trash' });\n    onClose();\n  });\n\n  return (\n    <Modal\n      title={lang('Delete Saved Address')}\n      isCompact\n      isOpen={isOpen}\n      onClose={onClose}\n    >\n      <p className={styles.text}>{lang('Are you sure you want to remove this address from your saved ones?')}</p>\n\n      <p className={styles.text}>{lang('You will be able to save it again via Transaction Info with this address.')}</p>\n\n      <div className={modalStyles.buttons}>\n        <Button onClick={onClose} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleDeleteSavedAddress} className={modalStyles.button}>\n          {lang('Delete')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(DeleteSavedAddressModal);\n","import React, { type ElementRef, memo, useLayoutEffect } from '../../lib/teact/teact';\nimport { toggleExtraClass } from '../../lib/teact/teact-dom';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useToggleClass from '../../hooks/useToggleClass';\n\nimport styles from './MenuBackdrop.module.scss';\n\ninterface OwnProps {\n  isMenuOpen?: boolean;\n  contentRef: ElementRef<HTMLElement>;\n  contentClassName?: string;\n}\n\nfunction MenuBackdrop({ isMenuOpen, contentRef, contentClassName }: OwnProps) {\n  const {\n    shouldRender: menuBackdropShouldRender,\n    ref: menuBackdropRef,\n  } = useShowTransition({\n    isOpen: isMenuOpen,\n    withShouldRender: true,\n  });\n\n  useLayoutEffect(() => {\n    if (!contentRef.current) return;\n\n    toggleExtraClass(contentRef.current, styles.wrapperVisible, menuBackdropShouldRender);\n    toggleExtraClass(contentRef.current, styles.wrapperHide, menuBackdropShouldRender && !isMenuOpen);\n    if (contentClassName) {\n      toggleExtraClass(contentRef.current, contentClassName, menuBackdropShouldRender);\n    }\n  }, [contentClassName, contentRef, isMenuOpen, menuBackdropShouldRender]);\n\n  useToggleClass({ className: 'with-menu-backdrop', isActive: isMenuOpen });\n\n  if (!menuBackdropShouldRender) return undefined;\n\n  return (\n    <div\n      ref={menuBackdropRef}\n      className={buildClassName(styles.backdrop, isMenuOpen && styles.visible)}\n    />\n  );\n}\n\nexport default memo(MenuBackdrop);\n","// extracted by mini-css-extract-plugin\nexport default {\"backdrop\":\"aLk6q3zd\",\"visible\":\"LULg10Df\",\"wrapperVisible\":\"qhlMQSuq\",\"wrapperHide\":\"y0lYOYF9\"};","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"qrcsFk0p\",\"button\":\"tQGrt_Qw\",\"button_spoiler\":\"RpBIB1I4\",\"buttonSpoiler\":\"RpBIB1I4\",\"icon\":\"RdTchw5a\",\"iconCaretDown\":\"DdQbhVKr\",\"iconStar\":\"p87ao4no\",\"iconShare\":\"GuQHudIr\",\"nameInput\":\"lL2_LCB0\",\"shortAddress\":\"hofQbGX_\",\"scam\":\"nwdDECq8\",\"revealSpoiler\":\"W5z38O2d\",\"scamImage\":\"KBuV_80E\",\"chainIcon\":\"xEGdgotG\",\"meaningfulPart\":\"tKeqWu_9\",\"menuIcon\":\"iyUEV5xt\",\"dimmedPart\":\"NNrfqpvB\",\"menu\":\"E31wd_4J\",\"menuItem\":\"HbftB0iE\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiChain } from '../../api/types';\nimport type { IAnchorPosition, SavedAddress } from '../../global/types';\nimport type { Layout } from '../../hooks/useMenuPosition';\nimport type { DropdownItem } from './Dropdown';\n\nimport { selectCurrentAccountState, selectIsMultichainAccount } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { copyTextToClipboard } from '../../util/clipboard';\nimport { stopEvent } from '../../util/domEvents';\nimport { handleUrlClick, openUrl } from '../../util/openUrl';\nimport { shareUrl } from '../../util/share';\nimport { MEANINGFUL_CHAR_LENGTH, shortenAddress } from '../../util/shortenAddress';\nimport { getExplorerAddressUrl, getExplorerName, getHostnameFromUrl } from '../../util/url';\nimport { IS_IOS, IS_TOUCH_ENV, REM } from '../../util/windowEnvironment';\nimport windowSize from '../../util/windowSize';\n\nimport useFlag from '../../hooks/useFlag';\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useLongPress from '../../hooks/useLongPress';\n\nimport DeleteSavedAddressModal from '../main/modals/DeleteSavedAddressModal';\nimport Button from './Button';\nimport DropdownMenu from './DropdownMenu';\nimport Input from './Input';\nimport MenuBackdrop from './MenuBackdrop';\nimport Modal from './Modal';\nimport Transition from './Transition';\n\nimport styles from './InteractiveTextField.module.scss';\nimport modalStyles from './Modal.module.scss';\n\nimport scamImg from '../../assets/scam.svg';\n\ninterface OwnProps {\n  chain?: ApiChain;\n  address?: string;\n  addressName?: string;\n  addressUrl?: string;\n  isScam?: boolean;\n  isTransaction?: boolean;\n  text?: string;\n  spoiler?: string;\n  spoilerRevealText?: string;\n  spoilerCallback?: NoneToVoidFunction;\n  copyNotification?: string;\n  className?: string;\n  textClassName?: string;\n  noDimming?: boolean;\n  noSavedAddress?: boolean;\n  noExplorer?: boolean;\n  withShareInMenu?: boolean;\n}\n\ninterface StateProps {\n  savedAddresses?: SavedAddress[];\n  isMultichainAccount?: boolean;\n  isTestnet?: boolean;\n}\n\ntype MenuHandler = 'copy' | 'share' | 'addressBook' | 'explorer';\n\nconst SAVED_ADDRESS_NAME_MAX_LENGTH = 255;\nconst MENU_VERTICAL_OFFSET_PX = -16;\nconst MENU_ITEM_HEIGHT_PX = 3 * REM;\nconst COMFORT_MARGIN_PX = REM;\n\nfunction InteractiveTextField({\n  chain,\n  address,\n  addressName,\n  addressUrl,\n  isScam,\n  isTransaction,\n  text = '',\n  spoiler,\n  spoilerRevealText,\n  spoilerCallback,\n  copyNotification,\n  noSavedAddress,\n  noExplorer,\n  className,\n  textClassName,\n  savedAddresses,\n  isTestnet,\n  isMultichainAccount,\n  noDimming,\n  withShareInMenu,\n}: OwnProps & StateProps) {\n  const { showNotification, addSavedAddress } = getActions();\n\n  const addressNameRef = useRef<HTMLInputElement>();\n  const contentRef = useRef<HTMLDivElement>();\n  const menuRef = useRef<HTMLDivElement>();\n  const lang = useLang();\n  const [isSaveAddressModalOpen, openSaveAddressModal, closeSaveAddressModal] = useFlag();\n  const [isDeleteSavedAddressModalOpen, openDeletedSavedAddressModal, closeDeleteSavedAddressModal] = useFlag();\n  const [savedAddressName, setSavedAddressName] = useState<string | undefined>(addressName);\n  const [isConcealedWithSpoiler, , revealSpoiler] = useFlag(Boolean(spoiler));\n  const isAddressAlreadySaved = useMemo(() => {\n    return Boolean(address && chain && (savedAddresses || []).find((savedAddress) => {\n      return savedAddress.address === address && savedAddress.chain === chain;\n    }));\n  }, [address, chain, savedAddresses]);\n\n  addressUrl = addressUrl ?? (chain ? getExplorerAddressUrl(chain, address, isTestnet) : undefined);\n  const saveAddressTitle = lang(isAddressAlreadySaved ? 'Remove From Saved' : 'Save Address');\n  const explorerTitle = lang('View on Explorer');\n  const withSavedAddresses = Boolean(!isScam && !noSavedAddress && address);\n  const withExplorer = Boolean(!noExplorer && addressUrl);\n\n  useEffect(() => {\n    if (isSaveAddressModalOpen) {\n      setSavedAddressName('');\n    }\n  }, [isSaveAddressModalOpen]);\n\n  const handleSaveAddressSubmit = useLastCallback(() => {\n    if (!savedAddressName || !address || !chain) {\n      return;\n    }\n\n    addSavedAddress({ address, chain, name: savedAddressName });\n    showNotification({ message: lang('Address was saved!'), icon: 'icon-star' });\n    closeSaveAddressModal();\n  });\n\n  useEffect(() => (\n    isSaveAddressModalOpen\n      ? captureKeyboardListeners({ onEnter: handleSaveAddressSubmit })\n      : undefined\n  ), [handleSaveAddressSubmit, isSaveAddressModalOpen]);\n\n  useFocusAfterAnimation(addressNameRef, !isSaveAddressModalOpen);\n\n  const handleCopy = useLastCallback(() => {\n    if (!copyNotification) return;\n    showNotification({ message: copyNotification, icon: 'icon-copy' });\n    void copyTextToClipboard(address || text);\n  });\n\n  const handleShare = useLastCallback(() => {\n    void shareUrl(addressUrl!, chain ? getExplorerName(chain) : undefined);\n  });\n\n  const handleTonExplorerOpen = useLastCallback(() => {\n    void openUrl(addressUrl!, { title: getExplorerName(chain!), subtitle: getHostnameFromUrl(addressUrl!) });\n  });\n\n  const {\n    isActionsMenuOpen,\n    menuAnchor,\n    menuPositionY,\n    menuItems,\n    handleMenuShow,\n    handleMenuItemSelect,\n    closeActionsMenu,\n  } = useDropdownMenu({\n    copy: handleCopy,\n    share: handleShare,\n    addressBook: isAddressAlreadySaved ? openDeletedSavedAddressModal : openSaveAddressModal,\n    explorer: handleTonExplorerOpen,\n  }, {\n    isAddressAlreadySaved,\n    isWalletAddress: Boolean(address && chain && noSavedAddress && !isTransaction),\n    isTransaction,\n    withSavedAddresses,\n    withExplorer,\n    withShare: withShareInMenu,\n  });\n\n  const shouldUseMenu = !spoiler && IS_TOUCH_ENV && menuItems.length > 1;\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback((): Layout => ({ withPortal: true, preferredPositionY: menuPositionY }));\n\n  const longPressHandlers = useLongPress({\n    onClick: handleMenuShow,\n    onStart: handleCopy,\n  });\n\n  const handleRevealSpoiler = useLastCallback(() => {\n    revealSpoiler();\n    spoilerCallback?.();\n  });\n\n  function renderContentOrSpoiler() {\n    const content = addressName || address || text;\n\n    if (!spoiler) {\n      return renderContent(content);\n    }\n\n    const isConcealed = isConcealedWithSpoiler || !content;\n    return (\n      <Transition activeKey={isConcealed ? 1 : 0} name=\"fade\" className={styles.commentContainer}>\n        {isConcealed ? (\n          <span className={buildClassName(styles.button, styles.button_spoiler, textClassName)}>\n            <i>{spoiler}</i>{' '}\n            <span\n              onClick={handleRevealSpoiler}\n              tabIndex={0}\n              role=\"button\"\n              className={styles.revealSpoiler}\n            >\n              {spoilerRevealText}\n            </span>\n          </span>\n        ) : renderContent(content)}\n      </Transition>\n    );\n  }\n\n  function renderContent(content: string) {\n    let renderedContent: string | TeactNode = content;\n    if (!noDimming && !isTransaction && content === address && content.length > MEANINGFUL_CHAR_LENGTH * 2) {\n      const prefix = content.substring(0, MEANINGFUL_CHAR_LENGTH);\n      const suffixStart = content.length - MEANINGFUL_CHAR_LENGTH;\n      const middle = content.substring(MEANINGFUL_CHAR_LENGTH, suffixStart);\n      const suffix = content.substring(suffixStart);\n\n      renderedContent = (\n        <>\n          <span className={styles.meaningfulPart}>{prefix}</span>\n          <span className={styles.dimmedPart}>{middle}</span>\n          <span className={styles.meaningfulPart}>{suffix}</span>\n        </>\n      );\n    } else if (!noDimming && isTransaction) {\n      renderedContent = <span className={styles.dimmedPart}>{content}</span>;\n    }\n\n    return (\n      <span\n        className={buildClassName(styles.button, isScam && styles.scam, textClassName)}\n        tabIndex={0}\n        role=\"button\"\n        title={!shouldUseMenu ? lang('Copy') : undefined}\n        onClick={!shouldUseMenu ? handleCopy : undefined}\n      >\n        {isScam && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n        {isMultichainAccount && !isTransaction && (\n          <i className={buildClassName(styles.chainIcon, `icon-chain-${chain}`)} aria-label={chain} />\n        )}\n        {renderedContent}\n        {Boolean(addressName) && (\n          <span className={buildClassName(styles.shortAddress, isScam && styles.scam)}>{shortenAddress(address!)}</span>\n        )}\n        {Boolean(copyNotification) && !shouldUseMenu && (\n          <i className={buildClassName(styles.icon, 'icon-copy')} aria-hidden />\n        )}\n      </span>\n    );\n  }\n\n  function renderActions() {\n    if (shouldUseMenu) {\n      const iconClassName = buildClassName(\n        styles.icon,\n        styles.iconCaretDown,\n        'icon-caret-down',\n        isScam && styles.scam,\n      );\n\n      return (\n        <>\n          <i className={iconClassName} aria-hidden />\n          <DropdownMenu\n            ref={menuRef}\n            withPortal\n            shouldTranslateOptions\n            isOpen={isActionsMenuOpen}\n            items={menuItems}\n            menuPositionY={menuPositionY}\n            menuAnchor={menuAnchor}\n            getLayout={getLayout}\n            getMenuElement={getMenuElement}\n            getRootElement={getRootElement}\n            bubbleClassName={styles.menu}\n            buttonClassName={styles.menuItem}\n            fontIconClassName={styles.menuIcon}\n            onSelect={handleMenuItemSelect}\n            onClose={closeActionsMenu}\n          />\n        </>\n      );\n    }\n\n    return (\n      <>\n        {withSavedAddresses && (\n          <span\n            className={styles.button}\n            title={saveAddressTitle}\n            aria-label={saveAddressTitle}\n            tabIndex={0}\n            role=\"button\"\n            onClick={isAddressAlreadySaved ? openDeletedSavedAddressModal : openSaveAddressModal}\n          >\n            <i\n              className={buildClassName(\n                styles.icon,\n                styles.iconStar,\n                isAddressAlreadySaved ? 'icon-star-filled' : 'icon-star',\n              )}\n              aria-hidden\n            />\n          </span>\n        )}\n\n        {isTransaction && (\n          <span\n            className={styles.button}\n            title={lang('Share Link')}\n            aria-label={lang('Share Link')}\n            onClick={handleShare}\n          >\n            <i className={buildClassName(styles.icon, styles.iconShare, 'icon-link')} aria-hidden />\n          </span>\n        )}\n        {withExplorer && (\n          <a\n            href={addressUrl}\n            className={styles.button}\n            title={explorerTitle}\n            aria-label={explorerTitle}\n            target=\"_blank\"\n            rel=\"noreferrer noopener\"\n            onClick={handleUrlClick}\n          >\n            <i className={buildClassName(styles.icon, 'icon-tonexplorer-small')} aria-hidden />\n          </a>\n        )}\n      </>\n    );\n  }\n\n  function renderSaveAddressModal() {\n    return (\n      <Modal\n        title={lang('Save Address')}\n        isCompact\n        isOpen={isSaveAddressModalOpen}\n        onClose={closeSaveAddressModal}\n      >\n        <p>{lang('You can save this address for quick access while sending.')}</p>\n        <Input\n          ref={addressNameRef}\n          placeholder={lang('Name')}\n          onInput={setSavedAddressName}\n          value={savedAddressName}\n          maxLength={SAVED_ADDRESS_NAME_MAX_LENGTH}\n          className={styles.nameInput}\n        />\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={closeSaveAddressModal} className={modalStyles.button}>{lang('Cancel')}</Button>\n          <Button\n            onClick={handleSaveAddressSubmit}\n            isPrimary\n            isDisabled={!savedAddressName}\n            className={modalStyles.button}\n          >\n            {lang('Save')}\n          </Button>\n        </div>\n      </Modal>\n    );\n  }\n\n  return (\n    <>\n      <MenuBackdrop\n        isMenuOpen={isActionsMenuOpen && shouldUseMenu}\n        contentRef={contentRef}\n      />\n      <div\n        ref={contentRef}\n        className={buildClassName(styles.wrapper, className)}\n        {...(shouldUseMenu && !isActionsMenuOpen && {\n          ...longPressHandlers,\n          tabIndex: 0,\n          role: 'button',\n        })}\n        onContextMenu={shouldUseMenu ? stopEvent : undefined}\n      >\n        {renderContentOrSpoiler()}\n        {renderActions()}\n      </div>\n\n      {address && (\n        <>\n          {renderSaveAddressModal()}\n          <DeleteSavedAddressModal\n            isOpen={isDeleteSavedAddressModalOpen}\n            address={address}\n            chain={chain}\n            onClose={closeDeleteSavedAddressModal}\n          />\n        </>\n      )}\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const accountState = selectCurrentAccountState(global);\n\n    return {\n      savedAddresses: accountState?.savedAddresses,\n      isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n      isTestnet: global.settings.isTestnet,\n    };\n  },\n)(InteractiveTextField));\n\nfunction useDropdownMenu(\n  menuHandlers: Record<MenuHandler, NoneToVoidFunction>,\n  options: {\n    withSavedAddresses?: boolean;\n    withExplorer?: boolean;\n    isAddressAlreadySaved?: boolean;\n    isWalletAddress?: boolean;\n    isTransaction?: boolean;\n    withShare?: boolean;\n  },\n) {\n  const [menuPositionY, setMenuPositionY] = useState<'top' | 'bottom'>('top');\n  const [menuAnchor, setMenuAnchor] = useState<IAnchorPosition | undefined>();\n  const closeActionsMenu = useLastCallback(() => setMenuAnchor(undefined));\n  const isActionsMenuOpen = Boolean(menuAnchor);\n\n  const menuItems = useMemo<DropdownItem<MenuHandler>[]>(() => {\n    const {\n      isAddressAlreadySaved, isWalletAddress, isTransaction, withSavedAddresses, withExplorer, withShare,\n    } = options;\n\n    const items: DropdownItem<MenuHandler>[] = [{\n      name: withSavedAddresses || isWalletAddress\n        ? 'Copy Address'\n        : (isTransaction ? 'Copy Transaction ID' : 'Copy'),\n      fontIcon: 'copy',\n      value: 'copy',\n    }];\n\n    if (withSavedAddresses) {\n      items.push({\n        name: isAddressAlreadySaved ? 'Remove From Saved' : 'Save Address',\n        fontIcon: isAddressAlreadySaved ? 'star-filled' : 'star',\n        value: 'addressBook',\n      });\n    }\n\n    if (isTransaction || withShare) {\n      items.push({\n        name: 'Share Link',\n        fontIcon: IS_IOS ? 'share-ios' : 'share-android',\n        value: 'share',\n      });\n    }\n\n    if (withExplorer) {\n      items.push({\n        name: 'View on Explorer',\n        fontIcon: 'tonexplorer',\n        value: 'explorer',\n      });\n    }\n\n    return items;\n  }, [options]);\n\n  const handleMenuItemSelect = useLastCallback((value: MenuHandler) => {\n    menuHandlers[value]?.();\n    closeActionsMenu();\n  });\n\n  const handleMenuShow = useLastCallback((e: React.MouseEvent | React.TouchEvent) => {\n    stopEvent(e);\n\n    let x: number;\n    if (e.type.startsWith('touch')) {\n      const { changedTouches, touches } = e as React.TouchEvent;\n      if (touches.length > 0) {\n        x = touches[0].clientX;\n      } else {\n        x = changedTouches[0].clientX;\n      }\n    } else {\n      x = (e as React.MouseEvent).clientX;\n    }\n    const { top, bottom } = e.currentTarget.getBoundingClientRect();\n    const menuHeight = menuItems.length * MENU_ITEM_HEIGHT_PX;\n    const screenHeight = windowSize.get().height;\n    if (bottom + menuHeight + MENU_VERTICAL_OFFSET_PX + COMFORT_MARGIN_PX >= screenHeight) {\n      setMenuPositionY('bottom');\n      setMenuAnchor({ x, y: top });\n    } else {\n      setMenuPositionY('top');\n      setMenuAnchor({ x, y: bottom + MENU_VERTICAL_OFFSET_PX });\n    }\n  });\n\n  return {\n    isActionsMenuOpen,\n    menuAnchor,\n    menuPositionY,\n    menuItems,\n    handleMenuShow,\n    handleMenuItemSelect,\n    closeActionsMenu,\n  };\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiTokenWithPrice } from '../../api/types';\n\nimport { UNKNOWN_TOKEN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport isEmptyObject from '../../util/isEmptyObject';\n\nimport styles from './Dapp.module.scss';\n\ntype OwnProps = {\n  label: TeactNode;\n  amountsBySlug: Record<string, bigint>;\n  nftCount?: number;\n};\n\ntype StateProps = {\n  tokensBySlug: Record<string, ApiTokenWithPrice>;\n  baseCurrency?: ApiBaseCurrency;\n};\n\nfunction DappAmountField({\n  label,\n  amountsBySlug,\n  nftCount,\n  tokensBySlug,\n  baseCurrency,\n}: OwnProps & StateProps) {\n  const amountTerms: TeactNode[] = [];\n\n  if (nftCount) {\n    amountTerms.push(\n      <span className={styles.payloadFieldTerm}>\n        {`${nftCount} NFT${nftCount > 1 ? 's' : ''}`}\n      </span>,\n    );\n  }\n\n  for (const [tokenSlug, amount] of Object.entries(amountsBySlug)) {\n    if (amountTerms.length) {\n      amountTerms.push(' + ');\n    }\n\n    const token = tokensBySlug[tokenSlug] ?? UNKNOWN_TOKEN;\n\n    amountTerms.push(\n      <span className={styles.payloadFieldTerm}>\n        {formatCurrency(toDecimal(amount, token.decimals), token.symbol)}\n      </span>,\n    );\n  }\n\n  if (!isEmptyObject(amountsBySlug)) {\n    const totalCost = getTotalCost(amountsBySlug, tokensBySlug);\n    amountTerms.push(` (${formatCurrency(totalCost, getShortCurrencySymbol(baseCurrency))})`);\n  }\n\n  return (\n    <>\n      <span className={styles.label}>\n        {label}\n      </span>\n      <div className={buildClassName(styles.payloadField, styles.payloadField_expanded)}>\n        {amountTerms}\n      </div>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    tokensBySlug: global.tokenInfo.bySlug,\n    baseCurrency: global.settings.baseCurrency,\n  };\n})(DappAmountField));\n\nfunction getTotalCost(amountsBySlug: Record<string, bigint>, tokensBySlug: Record<string, ApiTokenWithPrice>) {\n  return Object.entries(amountsBySlug).reduce((sum, [tokenSlug, amount]) => {\n    const token = tokensBySlug[tokenSlug];\n    if (!token) {\n      return sum;\n    }\n    return sum + toBig(amount, token.decimals).toNumber() * token.price;\n  }, 0);\n}\n","import React, { memo, useEffect, useRef } from '../../lib/teact/teact';\n\nimport type { ApiDappTransfer, ApiToken } from '../../api/types';\n\nimport renderText from '../../global/helpers/renderText';\nimport { BIGINT_PREFIX } from '../../util/bigint';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { isNftTransferPayload, isTokenTransferPayload } from '../../util/ton/transfer';\nimport { DEFAULT_DECIMALS } from '../../api/chains/ton/constants';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  transaction: ApiDappTransfer;\n  tokensBySlug: Record<string, ApiToken>;\n}\n\nconst FRACTION_DIGITS = 2;\n\nfunction DappTransactionPayload({ transaction, tokensBySlug }: OwnProps) {\n  const lang = useLang();\n  const payloadRef = useRef<HTMLDivElement>();\n  const [isPayloadExpanded, expandPayload] = useFlag(false);\n\n  useEffect(() => {\n    const payloadElement = payloadRef.current;\n    if (payloadElement && payloadElement.scrollWidth <= payloadElement.clientWidth) {\n      expandPayload();\n    }\n  }, [expandPayload]);\n\n  function renderPayload() {\n    const { payload, rawPayload } = transaction;\n\n    if (!payload || isNftTransferPayload(payload) || isTokenTransferPayload(payload)) {\n      return undefined;\n    }\n\n    switch (payload.type) {\n      case 'comment':\n        return payload.comment;\n\n      case 'tokens:burn': {\n        const { slug: tokenSlug, amount } = payload;\n        const token = tokensBySlug[tokenSlug];\n        const decimals = token?.decimals ?? DEFAULT_DECIMALS;\n        const symbol = token?.symbol ?? '';\n\n        return lang('$dapp_transfer_tokens_burn', {\n          amount: formatCurrency(toDecimal(amount, decimals), symbol, FRACTION_DIGITS),\n        });\n      }\n\n      case 'dns:change-record': {\n        const { record } = payload;\n        const category = record.type !== 'unknown' ? record.type : record.key;\n\n        if (record.type === 'wallet' && record.value) {\n          return lang('$dapp_dns_set_wallet_payload', {\n            address: record.value,\n          });\n        } else if (record.type === 'wallet' && !record.value) {\n          return lang('$dapp_dns_delete_wallet_payload');\n        } else if (record.value) {\n          return lang('$dapp_dns_change_record_payload', {\n            category,\n            value: record.value,\n          });\n        } else {\n          return lang('$dapp_dns_delete_record_payload', {\n            category,\n          });\n        }\n      }\n\n      case 'token-bridge:pay-swap': {\n        return lang('$dapp_token_bridge_pay_swap_payload', {\n          swapId: payload.swapId,\n        });\n      }\n\n      case 'liquid-staking:deposit': {\n        return lang('$dapp_liquid_staking_deposit_payload');\n      }\n\n      case 'liquid-staking:vote': {\n        return lang('$dapp_liquid_staking_vote_payload', {\n          votingAddress: payload.votingAddress,\n          vote: payload.vote,\n        });\n      }\n\n      case 'single-nominator:change-validator': {\n        return lang('$dapp_single_nominator_change_validator_payload', {\n          address: payload.address,\n        });\n      }\n\n      case 'single-nominator:withdraw': {\n        return lang('$dapp_single_nominator_withdraw_payload', {\n          amount: toDecimal(payload.amount),\n        });\n      }\n\n      case 'vesting:add-whitelist': {\n        return lang('$dapp_vesting_add_whitelist_payload', {\n          address: payload.address,\n        });\n      }\n\n      case 'unknown': {\n        return rawPayload;\n      }\n\n      default:\n        return JSON.stringify(payload, undefined, 2)\n          .replace(`/\"${BIGINT_PREFIX}/g`, '\"');\n    }\n  }\n\n  function renderPayloadLabel() {\n    switch (transaction.payload?.type) {\n      case 'comment':\n        return lang('Comment');\n      case 'unknown':\n        return lang('Payload');\n      default:\n        return lang('Nested Transaction');\n    }\n  }\n\n  const payloadElement = renderPayload();\n\n  if (!payloadElement) {\n    return undefined;\n  }\n\n  return (\n    <>\n      <p className={styles.label}>{renderPayloadLabel()}</p>\n      <div\n        ref={payloadRef}\n        className={buildClassName(styles.payloadField, isPayloadExpanded && styles.payloadField_expanded)}\n      >\n        {payloadElement}\n        {!isPayloadExpanded && (\n          <div className={styles.payloadFieldExpand} onClick={expandPayload}>\n            {lang('View')}\n          </div>\n        )}\n      </div>\n      {transaction.isDangerous && (\n        <div className={styles.warningForPayload}>{renderText(lang('$hardware_payload_warning'))}</div>\n      )}\n    </>\n  );\n}\n\nexport default memo(DappTransactionPayload);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { ApiDappTransfer, ApiToken } from '../../api/types';\n\nimport { TONCOIN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport isEmptyObject from '../../util/isEmptyObject';\nimport { isNftTransferPayload, isTokenTransferPayload } from '../../util/ton/transfer';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport NftInfo from '../transfer/NftInfo';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport ModalHeader from '../ui/ModalHeader';\nimport DappAmountField from './DappAmountField';\nimport DappTransactionPayload from './DappTransactionPayload';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  transaction?: ApiDappTransfer;\n  tokensBySlug: Record<string, ApiToken>;\n  isActive: boolean;\n  onClose: NoneToVoidFunction;\n  onBack: NoneToVoidFunction;\n}\n\nfunction DappTransaction({ transaction, tokensBySlug, isActive, onClose, onBack }: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({ isActive, onBack });\n\n  return (\n    <>\n      <ModalHeader\n        title={lang('Transaction Info')}\n        onBackButtonClick={onBack}\n        onClose={onClose}\n      />\n      <div className={buildClassName(modalStyles.transitionContent, styles.transactionContent)}>\n        {transaction && (\n          <DappTransactionContent\n            transaction={transaction}\n            tokensBySlug={tokensBySlug}\n          />\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default memo(DappTransaction);\n\nfunction DappTransactionContent({\n  transaction,\n  tokensBySlug,\n}: Required<Pick<OwnProps, 'transaction' | 'tokensBySlug'>>) {\n  const lang = useLang();\n\n  const amountBySlug = useMemo(() => {\n    const { amount: tonAmount, payload } = transaction;\n    const amountBySlug: Record<string, bigint> = {};\n\n    if (isTokenTransferPayload(payload)) {\n      amountBySlug[payload.slug] = payload.amount;\n    }\n\n    if (tonAmount !== 0n || (!isNftTransferPayload(payload) && isEmptyObject(amountBySlug))) {\n      amountBySlug[TONCOIN.slug] = tonAmount;\n    }\n\n    return amountBySlug;\n  }, [transaction]);\n\n  const feeBySlug = useMemo(\n    () => ({ [TONCOIN.slug]: transaction.networkFee }),\n    [transaction.networkFee],\n  );\n\n  return (\n    <>\n      {isNftTransferPayload(transaction.payload) && <NftInfo nft={transaction.payload.nft} />}\n      <p className={styles.label}>{lang('Receiving Address')}</p>\n      <InteractiveTextField\n        chain={TONCOIN.chain}\n        address={transaction.displayedToAddress}\n        isScam={transaction.isScam}\n        className={buildClassName(styles.dataField, styles.receivingAddress)}\n        copyNotification={lang('Address was copied!')}\n      />\n      {!isEmptyObject(amountBySlug) && (\n        <DappAmountField\n          label={isNftTransferPayload(transaction.payload) ? lang('Additional Amount Sent') : lang('Amount')}\n          amountsBySlug={amountBySlug}\n        />\n      )}\n      <DappAmountField label={lang('Fee')} amountsBySlug={feeBySlug} />\n      <DappTransactionPayload transaction={transaction} tokensBySlug={tokensBySlug} />\n    </>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"term\":\"KQKXQCYl\",\"tokenIcon\":\"hrsxYQfo\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiToken } from '../../api/types';\nimport type { FeePrecision, FeeTerms, FeeValue } from '../../util/fee/types';\n\nimport { STARS_SYMBOL, TONCOIN, TRX } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { findChainConfig } from '../../util/chain';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { getChainBySlug } from '../../util/tokens';\n\nimport styles from './Fee.module.scss';\n\nconst TERM_SEPARATOR = ' + ';\nconst PRECISION_PREFIX: Record<FeePrecision, string> = {\n  exact: '',\n  approximate: '~\\u202F',\n  lessThan: '<\\u202F',\n};\nconst STARS_TOKEN: FeeToken = {\n  slug: '__stars__',\n  symbol: STARS_SYMBOL,\n  decimals: 0,\n};\nconst UNKNOWN_TOKEN: FeeToken = {\n  slug: '__unknown__',\n  symbol: '',\n  decimals: 0,\n};\nconst TOKEN_ICONS: Record<string, string | undefined> = {\n  [TONCOIN.slug]: 'icon-chain-ton',\n  [TRX.slug]: 'icon-chain-tron',\n};\n\nexport type FeeToken = Pick<ApiToken, 'slug' | 'symbol' | 'decimals'>;\n\ntype FeeListTerm = {\n  tokenType: keyof FeeTerms;\n  amount: FeeValue;\n};\n\nexport type OwnProps = {\n  terms: FeeTerms;\n  /** The token acting as the transferred token in the `terms` object */\n  token: FeeToken;\n  /** Affects the sign indicating the fee precision and standing before the terms. */\n  precision: FeePrecision;\n  shouldPreferIcons?: boolean;\n  termClassName?: string;\n  symbolClassName?: string;\n};\n\n/**\n * Formats a complex fee (containing multiple terms) into a human-readable span\n */\nfunction Fee({\n  terms,\n  token,\n  precision,\n  shouldPreferIcons,\n  termClassName,\n  symbolClassName,\n}: OwnProps) {\n  const nativeToken = findChainConfig(getChainBySlug(token.slug))?.nativeToken ?? UNKNOWN_TOKEN;\n  const content: TeactNode[] = [PRECISION_PREFIX[precision]];\n\n  convertTermsObjectToList(terms).forEach(({ tokenType, amount }, index) => {\n    if (index > 0) {\n      content.push(TERM_SEPARATOR);\n    }\n\n    const currentToken = tokenType === 'stars' ? STARS_TOKEN : tokenType === 'native' ? nativeToken : token;\n    const icon = shouldPreferIcons ? TOKEN_ICONS[currentToken.slug] : undefined;\n\n    if (typeof amount === 'bigint') {\n      amount = toDecimal(amount, currentToken.decimals);\n    }\n\n    let symbolNode = icon\n      ? <i className={buildClassName(icon, styles.tokenIcon)} aria-label={currentToken.symbol} />\n      : currentToken.symbol;\n    if (symbolClassName) {\n      symbolNode = <span className={symbolClassName}>{symbolNode}</span>;\n    }\n\n    content.push(\n      <span className={buildClassName(styles.term, termClassName)}>\n        {formatCurrency(amount, '', undefined, true)}\n        {symbolNode}\n      </span>,\n    );\n  });\n\n  return content;\n}\n\nexport default memo(Fee);\n\nfunction convertTermsObjectToList(terms: FeeTerms) {\n  const termList: FeeListTerm[] = [];\n  let firstDefinedTerm: FeeListTerm | undefined;\n\n  for (const [tokenType, amount] of Object.entries(terms) as [keyof FeeTerms, bigint | undefined][]) {\n    if (amount === undefined) {\n      continue;\n    }\n\n    const term = { tokenType, amount };\n    firstDefinedTerm ||= term;\n\n    if (Number(amount)) {\n      termList.push(term);\n    }\n  }\n\n  // Keeping at least 1 term for better UX\n  if (termList.length === 0) {\n    termList.push(firstDefinedTerm ?? { tokenType: 'native', amount: 0 });\n  }\n\n  return termList;\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { OwnProps as FeeProps } from './Fee';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport Fee from './Fee';\nimport Transition from './Transition';\n\nimport styles from './FeeLine.module.scss';\n\n/**\n * The component will be rendered empty unless all the required options from `FeeProps` are provided.\n * After that it will fade in.\n */\ntype OwnProps = Partial<Pick<FeeProps, 'terms' | 'token'>> & Pick<FeeProps, 'precision'> & {\n  className?: string;\n  /** Whether the component is rendered on a landscape layout (with a lighter background) */\n  isStatic?: boolean;\n  /** If true, the \"Details\" button will be shown even when no fee can be displayed. */\n  keepDetailsButtonWithoutFee?: boolean;\n  /** If undefined, the details button is not shown */\n  onDetailsClick?(): void;\n};\n\nfunction FeeLine({\n  className,\n  isStatic,\n  terms,\n  token,\n  precision,\n  keepDetailsButtonWithoutFee,\n  onDetailsClick,\n}: OwnProps) {\n  const lang = useLang();\n  let content: TeactNode | undefined;\n\n  if (terms && token) {\n    const langKey = precision === 'exact' ? '$fee_value_with_colon' : '$fee_value';\n    content = lang(langKey, {\n      fee: <Fee terms={terms} token={token} precision={precision} />,\n    });\n  }\n\n  return (\n    <FeeLineContainer\n      className={className}\n      isStatic={isStatic}\n      onDetailsClick={content || keepDetailsButtonWithoutFee ? onDetailsClick : undefined}\n      transitionKey={content ? 1 : 0}\n    >\n      {content}\n    </FeeLineContainer>\n  );\n}\n\nexport default memo(FeeLine);\n\ntype ContainerProps = Pick<OwnProps, 'className' | 'isStatic' | 'onDetailsClick'> & {\n  children?: TeactNode;\n  transitionKey?: number;\n};\n\n/**\n * Use this component when you want to show a content that looks like `FeeLine`, but is not `FeeLine`.\n */\nexport function FeeLineContainer({\n  className,\n  isStatic,\n  onDetailsClick,\n  children,\n  transitionKey = 0,\n}: ContainerProps) {\n  const lang = useLang();\n\n  return (\n    <Transition\n      name=\"fade\"\n      activeKey={transitionKey + (onDetailsClick ? 0x10000 : 0)}\n      className={buildClassName(styles.container, className, isStatic && styles.static)}\n    >\n      {children}\n      {Boolean(children) && onDetailsClick && '  '}\n      {onDetailsClick && (\n        <span\n          role=\"button\"\n          tabIndex={0}\n          className={styles.details}\n          onClick={() => onDetailsClick()}\n        >\n          {lang('Details')}\n          <i className={buildClassName('icon-chevron-right', styles.detailsIcon)} aria-hidden />\n        </span>\n      )}\n    </Transition>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"fJgsdA7d\",\"static\":\"swvIvbGd\",\"details\":\"K7iB61lh\",\"detailsIcon\":\"WDhuwtt6\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type {\n  ApiBaseCurrency,\n  ApiDapp,\n  ApiDappTransfer,\n  ApiEmulationResult,\n  ApiNft,\n  ApiStakingState,\n  ApiSwapAsset,\n  ApiTokenWithPrice,\n} from '../../api/types';\nimport type { Account, SavedAddress, Theme } from '../../global/types';\n\nimport { TONCOIN, UNKNOWN_TOKEN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectAccountStakingStatesBySlug,\n  selectCurrentAccountState,\n  selectCurrentDappTransferTotals,\n  selectDappTransferInsufficientTokens,\n  selectNetworkAccounts,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport isEmptyObject from '../../util/isEmptyObject';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport { isNftTransferPayload, isTokenTransferPayload } from '../../util/ton/transfer';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useLang from '../../hooks/useLang';\n\nimport Activity from '../main/sections/Content/Activity';\nimport Button from '../ui/Button';\nimport FeeLine from '../ui/FeeLine';\nimport IconWithTooltip from '../ui/IconWithTooltip';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\nimport DappAmountField from './DappAmountField';\nimport DappInfoWithAccount from './DappInfoWithAccount';\nimport DappSkeletonWithContent, { type DappSkeletonRow } from './DappSkeletonWithContent';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\nimport scamImg from '../../assets/scam.svg';\n\ninterface OwnProps {\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  transactions?: ApiDappTransfer[];\n  totalAmountsBySlug: Record<string, bigint>;\n  emulation?: Pick<ApiEmulationResult, 'activities' | 'realFee'>;\n  isScam: boolean;\n  isDangerous: boolean;\n  nftCount: number;\n  dapp?: ApiDapp;\n  isLoading?: boolean;\n  tokensBySlug: Record<string, ApiTokenWithPrice>;\n  swapTokensBySlug?: Record<string, ApiSwapAsset>;\n  theme: Theme;\n  baseCurrency?: ApiBaseCurrency;\n  nftsByAddress?: Record<string, ApiNft>;\n  currentAccountId: string;\n  stakingStateBySlug: Record<string, ApiStakingState>;\n  savedAddresses?: SavedAddress[];\n  accounts?: Record<string, Account>;\n  insufficientTokens?: string;\n  balancesBySlug?: Record<string, bigint>;\n}\n\ninterface SortedDappTransfer extends ApiDappTransfer {\n  index: number;\n  sortingCost: number;\n}\n\nconst NFT_FAKE_COST_USD = 1_000_000_000;\n\nconst skeletonRows: DappSkeletonRow[] = [\n  { isLarge: false, hasFee: false },\n  { isLarge: true, hasFee: true },\n];\n\nfunction DappTransferInitial({\n  transactions,\n  totalAmountsBySlug,\n  emulation,\n  isScam,\n  isDangerous,\n  nftCount,\n  dapp,\n  isLoading,\n  tokensBySlug,\n  swapTokensBySlug,\n  theme,\n  baseCurrency,\n  nftsByAddress,\n  currentAccountId,\n  stakingStateBySlug,\n  savedAddresses,\n  accounts,\n  insufficientTokens,\n  balancesBySlug,\n  onClose,\n}: OwnProps & StateProps) {\n  const { closeDappTransfer, showDappTransferTransaction, submitDappTransferConfirm } = getActions();\n\n  const lang = useLang();\n  const appTheme = useAppTheme(theme);\n  const renderingTransactions = useCurrentOrPrev(transactions, true);\n  const sortedTransactions = useMemo(\n    () => sortTransactions(renderingTransactions, tokensBySlug),\n    [renderingTransactions, tokensBySlug],\n  );\n  const isDappLoading = dapp === undefined;\n  const hasSufficientBalance = !insufficientTokens;\n\n  const tokenToDisplay = useMemo(() => (\n    calculateTokenToDisplay(totalAmountsBySlug, balancesBySlug, tokensBySlug)\n  ), [totalAmountsBySlug, balancesBySlug, tokensBySlug]);\n\n  function renderContent() {\n    return (\n      <div className={buildClassName(modalStyles.transitionContent, styles.skeletonBackground)}>\n        <DappInfoWithAccount\n          dapp={dapp}\n          customTokenBalance={tokenToDisplay.balance}\n          customTokenSymbol={tokenToDisplay.symbol}\n          customTokenDecimals={tokenToDisplay.decimals}\n        />\n        {isDangerous && (\n          <div className={buildClassName(styles.transferWarning, styles.warningForPayload)}>\n            {renderText(lang('$hardware_payload_warning'))}\n          </div>\n        )}\n        {renderTransactions()}\n        {renderEmulation()}\n\n        <div className={styles.footer}>\n          {!hasSufficientBalance && (\n            <div className={styles.balanceError}>\n              {lang('Not Enough %symbol%', { symbol: insufficientTokens })}\n            </div>\n          )}\n          <div className={buildClassName(modalStyles.buttons, styles.transferButtons)}>\n            <Button className={modalStyles.button} onClick={onClose}>{lang('Cancel')}</Button>\n            <Button\n              isPrimary\n              isSubmit\n              isLoading={isLoading}\n              isDisabled={isScam || !hasSufficientBalance}\n              className={modalStyles.button}\n              onClick={!isScam && hasSufficientBalance ? submitDappTransferConfirm : undefined}\n            >\n              {lang('Send')}\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  function renderTransactionRow(transaction: SortedDappTransfer) {\n    const { payload } = transaction;\n\n    const amountText: string[] = [];\n    if (isNftTransferPayload(payload)) {\n      amountText.push('1 NFT');\n    } else if (isTokenTransferPayload(payload)) {\n      const { slug: tokenSlug, amount } = payload;\n      const { decimals, symbol } = tokensBySlug[tokenSlug] ?? UNKNOWN_TOKEN;\n      amountText.push(formatCurrency(toDecimal(amount, decimals), symbol));\n    }\n\n    amountText.push(formatCurrency(toDecimal(transaction.amount + transaction.networkFee), TONCOIN.symbol));\n\n    return (\n      <div\n        key={transaction.index}\n        className={styles.transactionRow}\n        onClick={() => showDappTransferTransaction({ transactionIdx: transaction.index })}\n      >\n        {transaction.isScam && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n        <span className={buildClassName(styles.transactionRowAmount, transaction.isScam && styles.scam)}>\n          {amountText.join(' + ')}\n        </span>\n        {' '}\n        <span className={buildClassName(styles.transactionRowAddress, transaction.isScam && styles.scam)}>\n          {lang('$transaction_to', {\n            address: shortenAddress(transaction.displayedToAddress),\n          })}\n        </span>\n        <i className={buildClassName(styles.transactionRowChevron, 'icon-chevron-right')} aria-hidden />\n      </div>\n    );\n  }\n\n  function renderTransactions() {\n    if (!renderingTransactions) {\n      return undefined;\n    }\n\n    const hasAmount = nftCount > 0 || !isEmptyObject(totalAmountsBySlug);\n\n    return (\n      <>\n        <p className={styles.label}>{lang('$many_transactions', renderingTransactions.length, 'i')}</p>\n        <div className={styles.transactionList}>\n          {sortedTransactions?.map(renderTransactionRow)}\n        </div>\n        {renderingTransactions.length > 1 && hasAmount && (\n          <DappAmountField label={lang('Total Amount')} amountsBySlug={totalAmountsBySlug} nftCount={nftCount} />\n        )}\n      </>\n    );\n  }\n\n  function renderEmulation() {\n    if (!emulation?.activities?.length) {\n      return undefined;\n    }\n\n    const { activities, realFee } = emulation;\n\n    return (\n      <>\n        <p className={styles.label}>\n          {lang('Preview')}\n          {' '}\n          <IconWithTooltip message={renderText(lang('$preview_not_guaranteed'))} type=\"warning\" size=\"small\" />\n        </p>\n        <div className={buildClassName(styles.transactionList, styles.emulation)}>\n          {activities.map((activity, index) => (\n            <Activity\n              key={activity.id}\n              activity={activity}\n              isFuture\n              isLast={index === activities.length - 1}\n              tokensBySlug={tokensBySlug}\n              swapTokensBySlug={swapTokensBySlug}\n              appTheme={appTheme}\n              nftsByAddress={nftsByAddress}\n              currentAccountId={currentAccountId}\n              stakingStateBySlug={stakingStateBySlug}\n              savedAddresses={savedAddresses}\n              accounts={accounts}\n              baseCurrency={baseCurrency}\n            />\n          ))}\n        </div>\n        {realFee !== 0n && (\n          <FeeLine\n            terms={{ native: realFee }}\n            token={TONCOIN}\n            precision=\"approximate\"\n            className={styles.emulationFee}\n          />\n        )}\n      </>\n    );\n  }\n\n  return (\n    <Transition name=\"semiFade\" activeKey={isDappLoading ? 0 : 1} slideClassName={styles.skeletonTransitionWrapper}>\n      <ModalHeader\n        title={lang(isNftTransferPayload(renderingTransactions?.[0]?.payload) ? 'Send NFT' : 'Send Transaction')}\n        onClose={closeDappTransfer}\n      />\n      {isDappLoading ? <DappSkeletonWithContent rows={skeletonRows} /> : renderContent()}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { isLoading, dapp, transactions, emulation } = global.currentDappTransfer;\n\n  const accountId = global.currentAccountId!;\n  const accountState = selectCurrentAccountState(global);\n  const accounts = selectNetworkAccounts(global);\n\n  const {\n    amountsBySlug: totalAmountsBySlug,\n    isScam,\n    isDangerous,\n    nftCount,\n  } = selectCurrentDappTransferTotals(global);\n\n  return {\n    transactions,\n    totalAmountsBySlug,\n    emulation,\n    isScam,\n    isDangerous,\n    nftCount,\n    dapp,\n    isLoading,\n    tokensBySlug: global.tokenInfo.bySlug,\n    swapTokensBySlug: global.swapTokenInfo?.bySlug,\n    theme: global.settings.theme,\n    baseCurrency: global.settings.baseCurrency,\n    nftsByAddress: accountState?.nfts?.byAddress,\n    currentAccountId: accountId,\n    stakingStateBySlug: selectAccountStakingStatesBySlug(global, accountId),\n    savedAddresses: accountState?.savedAddresses,\n    accounts,\n    insufficientTokens: selectDappTransferInsufficientTokens(global),\n    balancesBySlug: accountState?.balances?.bySlug,\n  };\n})(DappTransferInitial));\n\ninterface TokenDisplayInfo {\n  balance: bigint;\n  symbol: string;\n  decimals: number;\n}\n\nfunction calculateTokenToDisplay(\n  totalAmountsBySlug?: Record<string, bigint>,\n  balancesBySlug?: Record<string, bigint>,\n  tokensBySlug?: Record<string, ApiTokenWithPrice>,\n): TokenDisplayInfo {\n  // Default to TON if no data\n  if (!totalAmountsBySlug || !balancesBySlug || !tokensBySlug) {\n    return {\n      balance: balancesBySlug?.[TONCOIN.slug] ?? 0n,\n      symbol: TONCOIN.symbol,\n      decimals: TONCOIN.decimals,\n    };\n  }\n\n  const insufficientTokens: Array<{\n    slug: string;\n    insufficientUsdValue: number;\n    balance: bigint;\n    symbol: string;\n    decimals: number;\n  }> = [];\n\n  const sufficientTokens: Array<{\n    slug: string;\n    transactionUsdValue: number;\n    balance: bigint;\n    symbol: string;\n    decimals: number;\n  }> = [];\n\n  // Analyze each token in the transaction\n  for (const [slug, requiredAmount] of Object.entries(totalAmountsBySlug)) {\n    const availableBalance = balancesBySlug[slug] ?? 0n;\n    const token = tokensBySlug[slug];\n\n    if (!token) continue;\n\n    const { symbol, decimals, priceUsd = 0 } = token;\n\n    if (availableBalance < requiredAmount) {\n      // Token is insufficient\n      const insufficientAmount = requiredAmount - availableBalance;\n      const insufficientUsdValue = toBig(insufficientAmount, decimals).toNumber() * priceUsd;\n\n      insufficientTokens.push({\n        slug,\n        insufficientUsdValue,\n        balance: availableBalance,\n        symbol,\n        decimals,\n      });\n    } else {\n      // Token is sufficient\n      const transactionUsdValue = toBig(requiredAmount, decimals).toNumber() * priceUsd;\n\n      sufficientTokens.push({\n        slug,\n        transactionUsdValue,\n        balance: availableBalance,\n        symbol,\n        decimals,\n      });\n    }\n  }\n\n  // If some tokens are insufficient, show the one with maximum insufficient USD value\n  if (insufficientTokens.length > 0) {\n    const maxInsufficientToken = insufficientTokens.reduce((max, current) =>\n      current.insufficientUsdValue > max.insufficientUsdValue ? current : max,\n    );\n\n    return {\n      balance: maxInsufficientToken.balance,\n      symbol: maxInsufficientToken.symbol,\n      decimals: maxInsufficientToken.decimals,\n    };\n  }\n\n  // If all tokens are sufficient, show the one with maximum transaction USD value\n  if (sufficientTokens.length > 0) {\n    const maxTransactionToken = sufficientTokens.reduce((max, current) =>\n      current.transactionUsdValue > max.transactionUsdValue ? current : max,\n    );\n\n    return {\n      balance: maxTransactionToken.balance,\n      symbol: maxTransactionToken.symbol,\n      decimals: maxTransactionToken.decimals,\n    };\n  }\n\n  // Fallback to TON\n  return {\n    balance: balancesBySlug[TONCOIN.slug] ?? 0n,\n    symbol: TONCOIN.symbol,\n    decimals: TONCOIN.decimals,\n  };\n}\n\nfunction sortTransactions(\n  transactions: readonly ApiDappTransfer[] | undefined,\n  tokensBySlug: Record<string, ApiTokenWithPrice>,\n) {\n  if (!transactions) {\n    return transactions;\n  }\n\n  return transactions\n    .map((transaction, index): SortedDappTransfer => ({\n      ...transaction,\n      index,\n      sortingCost: getTransactionCostForSorting(transaction, tokensBySlug),\n    }))\n    .sort((transaction0, transaction1) => transaction1.sortingCost - transaction0.sortingCost);\n}\n\nfunction getTransactionCostForSorting(transaction: ApiDappTransfer, tokensBySlug: Record<string, ApiTokenWithPrice>) {\n  const tonAmount = toBig(transaction.amount + transaction.networkFee, TONCOIN.decimals).toNumber();\n  let cost = tokensBySlug[TONCOIN.slug].priceUsd * tonAmount;\n\n  if (isTokenTransferPayload(transaction.payload)) {\n    const { amount, slug } = transaction.payload;\n    const token = tokensBySlug[slug];\n    if (token) {\n      cost += token.priceUsd * toBig(amount, token.decimals).toNumber();\n    }\n  } else if (isNftTransferPayload(transaction.payload)) {\n    // Simple way to display NFT at top of list\n    cost += NFT_FAKE_COST_USD;\n  }\n\n  return cost;\n}\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiActivity, ApiDappTransfer, ApiToken } from '../../api/types';\nimport type { GlobalState } from '../../global/types';\nimport { TransferState } from '../../global/types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport { selectCurrentDappTransferTotals } from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport { getActivityHeight } from '../main/sections/Content/Activity';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport DappLedgerWarning from './DappLedgerWarning';\nimport DappTransaction from './DappTransaction';\nimport DappTransferComplete from './DappTransferComplete';\nimport DappTransferInitial from './DappTransferInitial';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface StateProps {\n  currentDappTransfer: GlobalState['currentDappTransfer'];\n  tokensBySlug: Record<string, ApiToken>;\n  isMediaViewerOpen?: boolean;\n  isDangerous: boolean;\n}\n\nfunction DappTransferModal({\n  currentDappTransfer: {\n    isLoading,\n    viewTransactionOnIdx,\n    state,\n    transactions,\n    emulation,\n    error,\n  },\n  tokensBySlug,\n  isMediaViewerOpen,\n  isDangerous,\n}: StateProps) {\n  const {\n    setDappTransferScreen,\n    clearDappTransferError,\n    submitDappTransferPassword,\n    submitDappTransferHardware,\n    closeDappTransfer,\n    cancelDappTransfer,\n  } = getActions();\n\n  const lang = useLang();\n\n  const isOpen = state !== TransferState.None;\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n  const needsExtraHeight = useMemo(\n    () => shouldForceFullScreen(transactions, emulation?.activities, isDangerous),\n    [transactions, emulation, isDangerous],\n  );\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === TransferState.Confirm || state === TransferState.Password) {\n      setDappTransferScreen({ state: TransferState.Initial });\n    }\n  });\n\n  const handleTransferPasswordSubmit = useLastCallback((password: string) => {\n    submitDappTransferPassword({ password });\n  });\n\n  const handleLedgerConnect = useLastCallback(() => {\n    submitDappTransferHardware();\n  });\n\n  const handleResetTransfer = useLastCallback(() => {\n    cancelDappTransfer();\n    updateNextKey();\n  });\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && (\n          <ModalHeader title={lang('Confirm Action')} onClose={closeDappTransfer} />\n        )}\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          error={error}\n          withCloseButton={IS_CAPACITOR}\n          submitLabel={lang('Send')}\n          cancelLabel={lang('Back')}\n          onSubmit={handleTransferPasswordSubmit}\n          onCancel={handleBackClick}\n          onUpdate={clearDappTransferError}\n        />\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: TransferState) {\n    switch (currentKey) {\n      case TransferState.Initial:\n        return <DappTransferInitial onClose={closeDappTransfer} />;\n\n      case TransferState.WarningHardware:\n        return (\n          <>\n            <ModalHeader title={lang('Send Transaction')} onClose={closeDappTransfer} />\n            <DappLedgerWarning />\n          </>\n        );\n\n      case TransferState.Confirm:\n        return (\n          <DappTransaction\n            transaction={viewTransactionOnIdx !== undefined ? transactions?.[viewTransactionOnIdx] : undefined}\n            tokensBySlug={tokensBySlug}\n            isActive={isActive}\n            onBack={handleBackClick}\n            onClose={closeDappTransfer}\n          />\n        );\n\n      case TransferState.Password:\n        return renderPassword(isActive);\n\n      case TransferState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleLedgerConnect}\n            onClose={closeDappTransfer}\n          />\n        );\n\n      case TransferState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onTryAgain={submitDappTransferHardware}\n            onClose={closeDappTransfer}\n          />\n        );\n\n      case TransferState.Complete:\n        return (\n          <DappTransferComplete\n            isActive={isActive}\n            onClose={closeDappTransfer}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen && !isMediaViewerOpen}\n      noBackdropClose\n      dialogClassName={buildClassName(styles.modalDialog, needsExtraHeight && styles.modalDialogExtraHeight)}\n      nativeBottomSheetKey=\"dapp-transfer\"\n      forceFullNative={\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n        (needsExtraHeight || renderingKey === TransferState.Password) && renderingKey !== TransferState.Complete\n      }\n      onClose={closeDappTransfer}\n      onCloseAnimationEnd={handleResetTransfer}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { isDangerous } = selectCurrentDappTransferTotals(global);\n\n  return {\n    currentDappTransfer: global.currentDappTransfer,\n    tokensBySlug: global.tokenInfo.bySlug,\n    isMediaViewerOpen: Boolean(global.mediaViewer.mediaId),\n    isDangerous,\n  };\n})(DappTransferModal));\n\nfunction shouldForceFullScreen(transactions?: ApiDappTransfer[], activities?: ApiActivity[], isDangerous?: boolean) {\n  let height = 0; // rem\n\n  if (transactions) {\n    height += transactions.length * 3;\n    if (transactions.length > 1) height += 5.125; // The Total Amount field\n  }\n\n  if (activities) {\n    for (const activity of activities) {\n      height += getActivityHeight(activity, true);\n    }\n  }\n\n  if (isDangerous) {\n    height += 4.6;\n  }\n\n  return height >= 14.5; // The actual available height is 15.125. Leaving a margin just in case.\n}\n","import { Dialog } from '@capacitor/dialog';\nimport React, { type FC, memo, useEffect } from '../lib/teact/teact';\nimport { getActions, withGlobal } from '../global';\n\nimport type { DialogAction, DialogType } from '../global/types';\n\nimport { IS_CAPACITOR } from '../config';\nimport renderText from '../global/helpers/renderText';\nimport { pick } from '../util/iteratees';\n\nimport useFlag from '../hooks/useFlag';\nimport useLang from '../hooks/useLang';\nimport useLastCallback from '../hooks/useLastCallback';\n\nimport Button from './ui/Button';\nimport Modal from './ui/Modal';\n\nimport modalStyles from './ui/Modal.module.scss';\n\ntype StateProps = {\n  dialogs: DialogType[];\n};\n\nconst Dialogs: FC<StateProps> = ({ dialogs }) => {\n  const { dismissDialog } = getActions();\n\n  const lang = useLang();\n  const [isModalOpen, openModal, closeModal] = useFlag();\n\n  const dialog = dialogs[dialogs.length - 1];\n  const title = lang(dialog?.title ?? 'Something went wrong');\n\n  const buttons = dialog?.buttons ?? { confirm: {} };\n  const hasCancel = Boolean(dialog?.buttons?.cancel);\n  const confirmTitle = lang(buttons.confirm.title ?? 'OK');\n  const cancelTitle = hasCancel ? lang(buttons.cancel?.title ?? 'Cancel') : undefined;\n  const isNativeDialog = IS_CAPACITOR && typeof dialog?.message === 'string';\n\n  const handleAction = useLastCallback(() => {\n    if (buttons.confirm.action) {\n      void executeDialogAction(buttons.confirm.action);\n    }\n\n    if (isNativeDialog) {\n      dismissDialog();\n    } else {\n      closeModal();\n    }\n  });\n\n  useEffect(() => {\n    if (!dialog) {\n      closeModal();\n      return;\n    }\n\n    if (isNativeDialog) {\n      if (hasCancel) {\n        void Dialog.confirm({\n          title,\n          message: lang(dialog.message as string),\n          okButtonTitle: confirmTitle,\n          cancelButtonTitle: cancelTitle,\n        }).then((result) => {\n          if (result.value) {\n            handleAction();\n          } else {\n            dismissDialog();\n          }\n        });\n      } else {\n        void Dialog.alert({\n          title,\n          message: lang(dialog.message as string),\n          buttonTitle: confirmTitle,\n        }).then(handleAction);\n      }\n    } else {\n      openModal();\n    }\n  }, [cancelTitle, confirmTitle, dialog, hasCancel, isNativeDialog, lang, title]);\n\n  if (!dialog) {\n    return undefined;\n  }\n\n  return (\n    <Modal\n      isOpen={isModalOpen}\n      isCompact\n      title={title}\n      noBackdropClose={dialog.noBackdropClose}\n      isInAppLock={dialog.isInAppLock}\n      onClose={closeModal}\n      onCloseAnimationEnd={dismissDialog}\n    >\n      <div>\n        {\n          typeof dialog.message === 'string'\n            ? renderText(lang(dialog.message, dialog.entities))\n            : dialog.message\n        }\n      </div>\n      <div className={modalStyles.footerButtons}>\n        {hasCancel && <Button onClick={closeModal}>{cancelTitle}</Button>}\n        <Button\n          isPrimary\n          isDestructive={buttons.confirm.isDestructive}\n          onClick={handleAction}\n        >\n          {confirmTitle}\n        </Button>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => pick(global, ['dialogs']),\n)(Dialogs));\n\nasync function executeDialogAction(action: DialogAction) {\n  switch (action) {\n    case 'openBluetoothSettings': {\n      const { openSystemBluetoothSettings } = await import('../util/ledger');\n\n      openSystemBluetoothSettings();\n      break;\n    }\n\n    case 'signOutAll': {\n      const { signOut } = getActions();\n\n      signOut({ level: 'all' });\n      break;\n    }\n  }\n}\n","import React, {\n  memo, useEffect, useState,\n} from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { ElectronEvent } from '../../electron/types';\n\nimport { APP_NAME, PRODUCTION_URL } from '../../config';\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport styles from './UpdateApp.module.scss';\n\ntype StateProps = {\n  isAppUpdateAvailable?: boolean;\n};\n\nfunction UpdateApp({ isAppUpdateAvailable }: StateProps) {\n  const lang = useLang();\n\n  const [isElectronUpdateDownloaded, setIsElectronUpdateDownloaded] = useState(false);\n  const [isElectronAutoUpdateEnabled, setIsElectronAutoUpdateEnabled] = useState(false);\n  const [isDisabled, disable] = useFlag(false);\n\n  useEffect(() => {\n    const removeUpdateErrorListener = window.electron?.on(ElectronEvent.UPDATE_ERROR, () => {\n      setIsElectronUpdateDownloaded(false);\n    });\n    const removeUpdateDownloadedListener = window.electron?.on(ElectronEvent.UPDATE_DOWNLOADED, () => {\n      setIsElectronUpdateDownloaded(true);\n    });\n\n    void window.electron?.getIsAutoUpdateEnabled().then(setIsElectronAutoUpdateEnabled);\n\n    return () => {\n      removeUpdateErrorListener?.();\n      removeUpdateDownloadedListener?.();\n    };\n  }, []);\n\n  const handleClick = useLastCallback(async () => {\n    if (isDisabled) {\n      return;\n    }\n\n    if (!isElectronAutoUpdateEnabled) {\n      window.open(`${PRODUCTION_URL}/get`, '_blank', 'noopener');\n      return;\n    }\n\n    if (isElectronUpdateDownloaded) {\n      disable();\n      await window.electron?.installUpdate();\n      return;\n    }\n\n    if (isAppUpdateAvailable) {\n      window.location.reload();\n    }\n  });\n\n  const { ref, shouldRender } = useShowTransition({\n    isOpen: isElectronUpdateDownloaded || isAppUpdateAvailable,\n    withShouldRender: true,\n  });\n\n  if (!shouldRender) {\n    return null; // eslint-disable-line no-null/no-null\n  }\n\n  return (\n    <div\n      ref={ref}\n      className={buildClassName(\n        styles.container,\n        isDisabled && styles.disabled,\n      )}\n      onClick={handleClick}\n    >\n      <div className={styles.iconWrapper}>\n        <i className={buildClassName('icon-update', styles.icon)} />\n      </div>\n\n      <div className={styles.text}>{lang('Update %app_name%', { app_name: APP_NAME })}</div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { isAppUpdateAvailable } = global;\n\n  return { isAppUpdateAvailable };\n})(UpdateApp));\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"m3oYVPLL\",\"icon\":\"O2khIMww\",\"disabled\":\"Hz_3Tm4Q\",\"icon-wrapper\":\"cAAhDZj9\",\"iconWrapper\":\"cAAhDZj9\",\"text\":\"vvQKF4lC\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"o0YiMAP8\",\"wrapper\":\"B1_vmNNd\",\"applicationName\":\"F4gGoZNE\",\"buttons\":\"oUKLixL4\",\"windowsButtons\":\"hKXvGlWy\",\"windowsButton\":\"Pgysk0gP\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useRef } from '../../lib/teact/teact';\n\nimport { APP_NAME } from '../../config';\nimport { IS_WINDOWS } from '../../util/windowEnvironment';\n\nimport useElectronDrag from '../../hooks/useElectronDrag';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport UpdateApp from './UpdateApp';\n\nimport styles from './ElectronHeader.module.scss';\n\ntype Props = {\n  children?: TeactNode;\n  withTitle?: boolean;\n};\n\nexport const ELECTRON_HEADER_HEIGHT_REM = 3;\n\nfunction ElectronHeader({ children, withTitle }: Props) {\n  const containerRef = useRef<HTMLDivElement>();\n  useElectronDrag(containerRef);\n\n  const handleMinimize = useLastCallback(() => {\n    window.electron?.minimize();\n  });\n\n  const handleMaximize = useLastCallback(async () => {\n    if (await window.electron?.getIsMaximized()) {\n      window.electron?.unmaximize();\n    } else {\n      window.electron?.maximize();\n    }\n  });\n\n  const handleClose = useLastCallback(() => {\n    window.electron?.close();\n  });\n\n  const handleDoubleClick = useLastCallback(() => {\n    void window.electron?.handleDoubleClick();\n  });\n\n  if (IS_WINDOWS) {\n    return (\n      <div ref={containerRef} className={styles.container} onDoubleClick={handleDoubleClick}>\n        <div className={styles.wrapper}>\n          {Boolean(children) && <div className={styles.buttons}>{children}</div>}\n\n          {withTitle && <div className={styles.applicationName}>{APP_NAME}</div>}\n        </div>\n\n        <div className={styles.windowsButtons}>\n          <UpdateApp />\n\n          <div className={styles.windowsButton} onClick={handleMinimize}>\n            <i className=\"icon-windows-minimize\" />\n          </div>\n\n          <div className={styles.windowsButton} onClick={handleMaximize}>\n            <i className=\"icon-windows-maximize\" />\n          </div>\n\n          <div className={styles.windowsButton} onClick={handleClose}>\n            <i className=\"icon-windows-close\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div ref={containerRef} className={styles.container} onDoubleClick={handleDoubleClick}>\n      <div className={styles.wrapper}>\n        {withTitle && <div className={styles.applicationName}>{APP_NAME}</div>}\n\n        <div className={styles.buttons}>\n          <UpdateApp />\n\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(ElectronHeader);\n","import { type ElementRef, useEffect, useRef } from '../lib/teact/teact';\n\nimport { IS_ELECTRON, IS_MAC_OS } from '../util/windowEnvironment';\n\nconst DRAG_DISTANCE_THRESHOLD = 5;\n\nconst useElectronDrag = (ref: ElementRef<HTMLDivElement>) => {\n  const isDragging = useRef(false);\n\n  const x = useRef(window.screenX);\n  const y = useRef(window.screenY);\n  const distance = useRef(0);\n\n  useEffect(() => {\n    const element = ref.current;\n    if (!element || !(IS_ELECTRON && IS_MAC_OS)) return undefined;\n\n    const handleClick = (event: MouseEvent) => {\n      distance.current = 0;\n\n      if (isDragging.current) {\n        event.preventDefault();\n        event.stopPropagation();\n        isDragging.current = false;\n      }\n    };\n\n    const handleMousedown = (event: MouseEvent) => {\n      if (isDragging.current) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    };\n\n    const handleDrag = (event: MouseEvent) => {\n      if (event.buttons === 1) {\n        distance.current += Math.sqrt((x.current - window.screenX) ** 2 + (y.current - window.screenY) ** 2);\n\n        x.current = window.screenX;\n        y.current = window.screenY;\n\n        if (!isDragging.current && distance.current > DRAG_DISTANCE_THRESHOLD) {\n          isDragging.current = true;\n        }\n      }\n    };\n\n    const handleDoubleClick = (event: MouseEvent) => {\n      if (event.currentTarget === event.target) {\n        void window.electron?.handleDoubleClick();\n      }\n    };\n\n    element.addEventListener('click', handleClick);\n    element.addEventListener('mousedown', handleMousedown);\n    element.addEventListener('mousemove', handleDrag);\n    element.addEventListener('dblclick', handleDoubleClick);\n\n    return () => {\n      element.removeEventListener('click', handleClick);\n      element.removeEventListener('mouseup', handleMousedown);\n      element.removeEventListener('mousemove', handleDrag);\n      element.removeEventListener('dblclick', handleDoubleClick);\n    };\n  }, [ref]);\n};\n\nexport default useElectronDrag;\n","import { useEffect, useRef } from '../../../lib/teact/teact';\n\nimport { IS_IOS } from '../../windowEnvironment';\nimport { disableTelegramMiniAppSwipeToClose, enableTelegramMiniAppSwipeToClose } from '../index';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nexport default function useTelegramMiniAppSwipeToClose(isActive?: boolean) {\n  const isSwipeDisabledRef = useRef(false);\n\n  useEffect(() => {\n    if (!IS_IOS) return;\n\n    if (!isActive && isSwipeDisabledRef.current) {\n      enableTelegramMiniAppSwipeToClose();\n      isSwipeDisabledRef.current = false;\n    }\n  }, [isActive]);\n\n  const disableSwipeToClose = useLastCallback(() => {\n    if (IS_IOS && !isSwipeDisabledRef.current) {\n      disableTelegramMiniAppSwipeToClose();\n      isSwipeDisabledRef.current = true;\n    }\n  });\n\n  const enableSwipeToClose = useLastCallback(() => {\n    if (IS_IOS && isSwipeDisabledRef.current) {\n      enableTelegramMiniAppSwipeToClose();\n      isSwipeDisabledRef.current = false;\n    }\n  });\n\n  return {\n    disableSwipeToClose,\n    enableSwipeToClose,\n  };\n}\n","import { getActions } from '../../../global';\n\nimport type { ApiSite } from '../../../api/types';\n\nimport { openUrl } from '../../../util/openUrl';\nimport { getHostnameFromUrl, isValidUrl } from '../../../util/url';\n\nexport interface SearchSuggestions {\n  history?: string[];\n  sites?: ApiSite[];\n  isEmpty: boolean;\n}\n\nexport interface ProcessedSites {\n  trendingSites: ApiSite[];\n  allSites: Record<number, ApiSite[]>;\n}\nconst GOOGLE_SEARCH_URL = 'https://www.google.com/search?q=';\n\nexport function filterSites(sites?: ApiSite[], shouldRestrict?: boolean) {\n  if (!sites) {\n    return undefined;\n  }\n\n  return shouldRestrict\n    ? sites.filter((site) => !site.canBeRestricted)\n    : sites;\n}\n\nexport function generateSearchSuggestions(\n  searchValue: string,\n  browserHistory?: string[],\n  filteredSites?: ApiSite[],\n) {\n  const search = searchValue.toLowerCase();\n  const historyResult = browserHistory?.filter((url) => url.toLowerCase().includes(search));\n  const sitesResult = search.length && filteredSites\n    ? filteredSites.filter(({ url, name, description }) => {\n      return url.toLowerCase().includes(search)\n        || name.toLowerCase().includes(search)\n        || description.toLowerCase().includes(search);\n    })\n    : undefined;\n\n  return {\n    history: historyResult,\n    sites: sitesResult,\n    isEmpty: (historyResult?.length || 0) + (sitesResult?.length || 0) === 0,\n  };\n}\n\nexport function processSites(sites?: ApiSite[]): ProcessedSites {\n  return (sites || []).reduce((acc, site) => {\n    if (site.isFeatured) {\n      acc.trendingSites.push(site);\n    }\n\n    if (!acc.allSites[site.categoryId!]) {\n      acc.allSites[site.categoryId!] = [];\n    }\n    acc.allSites[site.categoryId!].push(site);\n\n    return acc;\n  }, { trendingSites: [], allSites: {} } as ProcessedSites);\n}\n\nexport function findSiteByUrl(sites?: ApiSite[], targetUrl?: string): ApiSite | undefined {\n  return sites?.find(({ url }) => url === targetUrl);\n}\n\nexport function openSite(originalUrl: string, isExternal?: boolean, title?: string) {\n  let url = originalUrl;\n  if (!url.startsWith('http:') && !url.startsWith('https:')) {\n    url = `https://${url}`;\n  }\n  if (!isValidUrl(url)) {\n    url = `${GOOGLE_SEARCH_URL}${encodeURIComponent(originalUrl)}`;\n  } else {\n    getActions().addSiteToBrowserHistory({ url });\n  }\n\n  void openUrl(url, { isExternal, title, subtitle: getHostnameFromUrl(url) });\n}\n","import { type ElementRef, useEffect } from '../lib/teact/teact';\n\ninterface OwnProps {\n  containerRef: ElementRef<HTMLDivElement>;\n  isDisabled?: boolean;\n  shouldPreventDefault?: boolean;\n  contentSelector?: string;\n}\n\nfunction useHorizontalScroll({\n  containerRef,\n  isDisabled,\n  shouldPreventDefault = false,\n  contentSelector,\n}: OwnProps) {\n  useEffect(() => {\n    const container = containerRef.current;\n\n    if (isDisabled || !container) {\n      return undefined;\n    }\n\n    function handleScroll(e: WheelEvent) {\n      // Ignore horizontal scroll and let it work natively (e.g. on touchpad)\n      if (!e.deltaX) {\n        const content = contentSelector ? container!.querySelector(contentSelector) : container;\n        if (!content) return;\n\n        content.scrollLeft += e.deltaY / 4;\n        if (shouldPreventDefault) e.preventDefault();\n      }\n    }\n\n    container.addEventListener('wheel', handleScroll, { passive: !shouldPreventDefault });\n\n    return () => {\n      container.removeEventListener('wheel', handleScroll);\n    };\n  }, [containerRef, contentSelector, isDisabled, shouldPreventDefault]);\n}\n\nexport default useHorizontalScroll;\n","import { useRef } from '../lib/teact/teact';\n\n// This is not render-dependent and will never allow previous to match current\nexport default function usePrevious2<T>(current: T) {\n  const prevRef = useRef<T>();\n  const lastRef = useRef<T>();\n\n  if (lastRef.current !== current) {\n    prevRef.current = lastRef.current;\n  }\n\n  lastRef.current = current;\n\n  return prevRef.current;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"MEbg8jIh\",\"header\":\"P97rYp1K\",\"folder\":\"uC9KwIK7\",\"interactive\":\"db2WsIPg\",\"subfolder\":\"qqdPrxSH\",\"site\":\"dNJuuV1f\",\"small\":\"rQOZaBwJ\",\"icon\":\"yWoCn5kk\",\"scalable\":\"d8pMxoBU\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiSite, ApiSiteCategory } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { openUrl } from '../../util/openUrl';\nimport { getHostnameFromUrl } from '../../util/url';\n\nimport useLang from '../../hooks/useLang';\n\nimport Image from '../ui/Image';\n\nimport styles from './Category.module.scss';\n\ninterface OwnProps {\n  category: ApiSiteCategory;\n  sites: ApiSite[];\n}\n\nfunction Category({ category, sites }: OwnProps) {\n  const { openSiteCategory } = getActions();\n\n  const lang = useLang();\n  const [bigSites, smallSites] = useMemo(() => {\n    if (sites.length <= 4) {\n      return [sites, []];\n    }\n\n    return [\n      sites.slice(0, 3),\n      sites.slice(3, 7),\n    ];\n  }, [sites]);\n\n  function handleCategoryClick() {\n    openSiteCategory({ id: category.id });\n  }\n\n  return (\n    <div className={styles.root}>\n      <h3\n        className={styles.header}\n        role=\"button\"\n        tabIndex={0}\n        onClick={handleCategoryClick}\n      >\n        {lang(category.name)}\n      </h3>\n\n      <div\n        className={buildClassName(styles.folder, smallSites.length > 0 && styles.interactive)}\n        onClick={smallSites.length > 0 ? handleCategoryClick : undefined}\n      >\n        {bigSites.map((site) => (\n          <button\n            key={`${site.url}-${site.name}`}\n            type=\"button\"\n            className={buildClassName(styles.site, styles.scalable)}\n            onClick={(e: React.MouseEvent) => {\n              stopEvent(e);\n\n              void openUrl(\n                site.url, { isExternal: site.isExternal, title: site.name, subtitle: getHostnameFromUrl(site.url) },\n              );\n            }}\n          >\n            <Image\n              url={site.icon}\n              alt={site.name}\n              imageClassName={styles.icon}\n            />\n          </button>\n        ))}\n        {smallSites.length > 0 && (\n          <div className={buildClassName(styles.subfolder, styles.scalable)}>\n            {smallSites.map((site) => (\n              <Image\n                key={`${site.url}-${site.name}`}\n                url={site.icon}\n                alt={site.name}\n                className={buildClassName(styles.site, styles.small)}\n                imageClassName={styles.icon}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(Category);\n","export const MEMO_EMPTY_ARRAY = [];\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_3Om0rcJ\",\"feed\":\"nA5QFADu\",\"feedEmpty\":\"RcpQnS7j\",\"tiles\":\"y5gkmCay\",\"pills\":\"YTIqRcid\",\"dapp\":\"uOCr1XIF\",\"icon\":\"ZwXhUWQR\",\"dappName\":\"mqKHkpx5\",\"dappTile\":\"in10zDBl\",\"dappPill\":\"x3JEisHt\",\"settingsLabel\":\"CDOOWV_8\",\"iconPill\":\"B18NDC8N\",\"iconTile\":\"ws8erUzz\",\"fallbackIcon\":\"JdTfrjba\",\"settingsButton\":\"kqZ8FwHA\",\"settingsIconContainer\":\"S5zvywKS\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\nimport { openUrl } from '../../util/openUrl';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Image from '../ui/Image';\n\nimport dappStyles from '../dapps/Dapp.module.scss';\nimport styles from './DappFeed.module.scss';\n\ninterface OwnProps {\n  iconUrl: string;\n  name: string;\n  url: string;\n  mode: 'pill' | 'tile';\n  isExternal: boolean;\n}\n\nconst RERENDER_DAPPS_FEED_DELAY_MS = SECOND;\n\nconst POPULAR_DAPP_URL_REPLACEMENTS = [{\n  name: 'Fanzee Battles',\n  manifestUrl: 'https://battles-tg-app.fanz.ee/tc-manifest.json',\n  originalUrl: 'https://t.me/fanzeebattlesbot',\n  replacementUrl: 'https://t.me/battlescryptobot?start=myTonWallet',\n}, {\n  name: 'Hamster Kombat',\n  manifestUrl: 'https://hamsterkombatgame.io/tonconnect-manifest.json',\n  originalUrl: 'https://hamsterkombatgame.io/',\n  replacementUrl: 'https://t.me/hamster_kombat_bot/start',\n}, {\n  name: 'Dogs',\n  manifestUrl: 'https://cdn.onetime.dog/manifest.json',\n  originalUrl: 'https://onetime.dog',\n  replacementUrl: 'https://t.me/dogshouse_bot/join',\n}, {\n  name: 'Earn',\n  manifestUrl: 'https://cdn.joincommunity.xyz/earn/manifest.json',\n  originalUrl: 'https://earncommunity.xyz',\n  replacementUrl: 'https://t.me/earn?startapp',\n}];\n\nconst REPLACEMENTS_BY_URL = POPULAR_DAPP_URL_REPLACEMENTS.reduce(\n  (acc: Record<string, string>, { originalUrl, replacementUrl }) => {\n    acc[originalUrl] = replacementUrl;\n\n    return acc;\n  }, {},\n);\n\nfunction DappFeedItem({\n  iconUrl,\n  name,\n  url,\n  mode,\n  isExternal,\n}: OwnProps) {\n  const { updateDappLastOpenedAt } = getActions();\n\n  const lang = useLang();\n\n  function renderIcon() {\n    const iconClassName = mode === 'pill' ? styles.iconPill : styles.iconTile;\n\n    const fallbackIcon = useMemo(() => (\n      <div className={buildClassName(dappStyles.dappLogo, dappStyles.dappLogoIcon, iconClassName)}>\n        <i className={buildClassName(styles.fallbackIcon, 'icon-laptop')} aria-hidden />\n      </div>\n    ), [iconClassName]);\n\n    return (\n      <Image\n        url={iconUrl}\n        className={iconClassName}\n        imageClassName={styles.icon}\n        alt={lang('Icon')}\n        fallback={fallbackIcon}\n      />\n    );\n  }\n\n  const openDapp = useLastCallback(async () => {\n    await openUrl(REPLACEMENTS_BY_URL[url] || url, { isExternal });\n\n    setTimeout(() => void updateDappLastOpenedAt({ url }), RERENDER_DAPPS_FEED_DELAY_MS);\n  });\n\n  return (\n    <button\n      type=\"button\"\n      className={buildClassName(styles.dapp, mode === 'pill' ? styles.dappPill : styles.dappTile)}\n      onClick={openDapp}\n    >\n      {renderIcon()}\n      <span className={styles.dappName}>{name}</span>\n    </button>\n  );\n}\n\nexport default memo(DappFeedItem);\n","// extracted by mini-css-extract-plugin\nexport default {\"rootSlide\":\"ZqS6W7iF\",\"slide\":\"FbWMWVID\",\"list\":\"eHKjqPA4\",\"landscapeList\":\"ajulW8PQ\",\"suggestionsMenu\":\"AcA4Inhz\",\"suggestions\":\"Rr_OedMn\",\"suggestion\":\"goh_kbKG\",\"suggestionIcon\":\"BHtFAOhh\",\"suggestionAddress\":\"hX1s9Ru4\",\"clearSuggestion\":\"k4u3y6_t\",\"item\":\"gSQkL6Gj\",\"trendingImage\":\"bIf54cAx\",\"imageWrapperScalable\":\"jnZY0Ppv\",\"trending\":\"dsHH5C4L\",\"badge\":\"PI6bQC1A\",\"imageWrapper\":\"oZIOx6b0\",\"infoWrapper\":\"SmLsrv__\",\"extended\":\"Qe5qRpIb\",\"withBorder\":\"yvQQOHrd\",\"badgeLabel\":\"vHZqxLRV\",\"image\":\"RpIwnHrh\",\"title\":\"ToW8q6Vp\",\"description\":\"kd6qUnJ8\",\"telegram\":\"Y4mdR7QN\",\"emptyList\":\"OLtywBQ9\",\"emptyListLoading\":\"i6uQ6HHm\",\"searchWrapper\":\"VQJfovbk\",\"searchContainer\":\"Wr0eK8xW\",\"searchIcon\":\"DdYW9BBn\",\"searchInput\":\"Gy204QbI\",\"sectionHeader\":\"HElxzEtm\",\"trendingSection\":\"bX0D8BEZ\",\"trendingList\":\"bZc6NN6v\"};","import React, { memo, useMemo, useRef } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { type ApiDapp } from '../../api/types';\nimport { SettingsState } from '../../global/types';\n\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { getDappConnectionUniqueId } from '../../util/getDappConnectionUniqueId';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport useHorizontalScroll from '../../hooks/useHorizontalScroll';\nimport useLang from '../../hooks/useLang';\n\nimport DappFeedItem from './DappFeedItem';\n\nimport styles from './DappFeed.module.scss';\nimport exploreStyles from './Explore.module.scss';\n\ninterface StateProps {\n  dapps: ApiDapp[];\n  dappLastOpenedDatesByUrl?: Record<string, number>;\n}\n\ntype DappWithLastOpenedDate = ApiDapp & { lastOpenedAt?: number };\n\nconst MAX_DAPPS_FOR_PILL_MODE = 3;\nconst HIDDEN_FROM_FEED_DAPP_URLS = new Set(['https://checkin.mytonwallet.org']);\n\nfunction DappFeed({ dapps: dappsFromState, dappLastOpenedDatesByUrl }: StateProps) {\n  const { openSettingsWithState, closeExplore } = getActions();\n\n  const lang = useLang();\n\n  const containerRef = useRef<HTMLDivElement>();\n  const dapps: DappWithLastOpenedDate[] = useMemo(() => {\n    const sortedDapps = dappsFromState\n      .slice()\n      .filter((dapp) => !HIDDEN_FROM_FEED_DAPP_URLS.has(dapp.url))\n      .map((dapp) => ({ ...dapp, lastOpenedAt: dappLastOpenedDatesByUrl?.[dapp.url] }))\n      .sort(compareDapps);\n\n    // Remove duplicates, since we now support multiple connections per dapp. Keep the most recent connection.\n    const seen = new Set<string>();\n    return sortedDapps.filter(({ url }) => {\n      if (seen.has(url)) return false;\n      seen.add(url);\n      return true;\n    });\n  }, [dappLastOpenedDatesByUrl, dappsFromState]);\n\n  const mode = dapps.length > MAX_DAPPS_FOR_PILL_MODE ? 'tile' : 'pill';\n  const isPillMode = mode === 'pill';\n  const iconWrapperClassName = isPillMode ? styles.iconPill : styles.iconTile;\n  const fullClassName = buildClassName(\n    styles.feed,\n    isPillMode ? styles.pills : styles.tiles,\n    !dapps.length && styles.feedEmpty,\n    'dapps-feed',\n  );\n\n  function openSettings() {\n    closeExplore(undefined, { forceOnHeavyAnimation: true });\n    openSettingsWithState({ state: SettingsState.Dapps }, { forceOnHeavyAnimation: true });\n  }\n\n  useHorizontalScroll({\n    containerRef,\n    isDisabled: IS_TOUCH_ENV || dapps.length === 0,\n    shouldPreventDefault: true,\n    contentSelector: '.dapps-feed',\n  });\n\n  if (!dapps.length) {\n    return undefined;\n  }\n\n  return (\n    <div className={styles.root} ref={containerRef}>\n      <h2 className={exploreStyles.sectionHeader}>{lang('Connected')}</h2>\n\n      <div className={fullClassName}>\n        {dapps?.map((dapp) => renderDapp(dapp, mode))}\n\n        {!!dapps.length && (\n          <div\n            className={styles.settingsButton}\n            role=\"button\"\n            tabIndex={0}\n            title={isPillMode ? lang('Settings') : undefined}\n            aria-label={isPillMode ? lang('Settings') : undefined}\n            onClick={openSettings}\n          >\n            <div className={buildClassName(styles.settingsIconContainer, iconWrapperClassName)}>\n              <i className=\"icon-params\" aria-hidden />\n            </div>\n            {!isPillMode && <span className={styles.settingsLabel}>{lang('Settings')}</span>}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { dapps = MEMO_EMPTY_ARRAY } = selectCurrentAccountState(global) || {};\n  const { dappLastOpenedDatesByUrl } = selectCurrentAccountState(global) || {};\n\n  return { dapps, dappLastOpenedDatesByUrl };\n})(DappFeed));\n\nfunction compareDapps(a: DappWithLastOpenedDate, b: DappWithLastOpenedDate) {\n  const aLastOpened = a.lastOpenedAt || 0;\n  const bLastOpened = b.lastOpenedAt || 0;\n\n  if (aLastOpened !== bLastOpened) {\n    return bLastOpened - aLastOpened;\n  }\n\n  return b.connectedAt - a.connectedAt;\n}\n\nfunction renderDapp(dapp: DappWithLastOpenedDate, mode: 'pill' | 'tile') {\n  const {\n    iconUrl, name, url,\n  } = dapp;\n\n  const key = `dapp-${url}-${getDappConnectionUniqueId(dapp)}`;\n\n  return (\n    <DappFeedItem\n      key={key}\n      iconUrl={iconUrl}\n      name={name}\n      url={url}\n      mode={mode}\n      isExternal={!!dapp.sse}\n    />\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"menuItem\":\"eMFKmXs8\",\"destructive\":\"C84vY_ER\"};","import type { FC, TeactNode } from '../../lib/teact/teact';\nimport React from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './MenuItem.module.scss';\n\ntype OnClickHandler = (e: React.SyntheticEvent<HTMLDivElement | HTMLAnchorElement>, arg?: any) => void;\n\ninterface OwnProps {\n  className?: string;\n  href?: string;\n  children: TeactNode;\n  onClick?: OnClickHandler;\n  clickArg?: string;\n  isDestructive?: boolean;\n}\n\nconst MenuItem: FC<OwnProps> = (props) => {\n  const {\n    className,\n    href,\n    children,\n    onClick,\n    clickArg,\n    isDestructive,\n  } = props;\n\n  const handleClick = useLastCallback((e: React.MouseEvent<HTMLDivElement>) => {\n    if (!onClick) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      return;\n    }\n\n    onClick(e, clickArg);\n  });\n\n  const handleKeyDown = useLastCallback((e: React.KeyboardEvent<HTMLDivElement>) => {\n    if (e.code !== 'Enter' && e.code !== 'Space') {\n      return;\n    }\n\n    if (!onClick) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      return;\n    }\n\n    onClick(e);\n  });\n\n  const fullClassName = buildClassName(\n    styles.menuItem,\n    className,\n    isDestructive && styles.destructive,\n  );\n\n  if (href) {\n    return (\n      <a href={href} target=\"_blank\" rel=\"noopener noreferrer\" className={fullClassName}>\n        {children}\n      </a>\n    );\n  }\n\n  return (\n    <div\n      role=\"button\"\n      tabIndex={0}\n      className={fullClassName}\n      onClick={handleClick}\n      onKeyDown={handleKeyDown}\n    >\n      {children}\n    </div>\n  );\n};\n\nexport default MenuItem;\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiSite } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { vibrate } from '../../util/haptics';\nimport { openUrl } from '../../util/openUrl';\nimport { getHostnameFromUrl, isTelegramUrl } from '../../util/url';\n\nimport Image from '../ui/Image';\n\nimport styles from './Explore.module.scss';\n\ninterface OwnProps {\n  site: ApiSite;\n  isTrending?: boolean;\n  isInList?: boolean;\n  className?: string;\n}\n\nfunction Site({\n  site: {\n    url, icon, name, description, isExternal, extendedIcon, withBorder, badgeText,\n  },\n  isTrending,\n  isInList,\n  className,\n}: OwnProps) {\n  function handleClick() {\n    void vibrate();\n    void openUrl(url, { isExternal, title: name, subtitle: getHostnameFromUrl(url) });\n  }\n\n  return (\n    <div\n      className={buildClassName(\n        styles.item,\n        (extendedIcon && isTrending) && styles.extended,\n        isTrending && styles.trending,\n        !isInList && withBorder && styles.withBorder,\n        className,\n      )}\n      tabIndex={0}\n      role=\"button\"\n      onClick={handleClick}\n    >\n      <Image\n        url={extendedIcon && isTrending ? extendedIcon : icon}\n        className={buildClassName(styles.imageWrapper, !isTrending && styles.imageWrapperScalable)}\n        imageClassName={buildClassName(styles.image, isTrending && styles.trendingImage)}\n      />\n      <div className={styles.infoWrapper}>\n        <b className={styles.title}>\n          {name}\n\n          {!isTrending && isTelegramUrl(url) && (\n            <i className={buildClassName(styles.telegram, 'icon-telegram-filled')} aria-hidden />\n          )}\n          {isInList && badgeText && <div className={styles.badgeLabel}>{badgeText}</div>}\n        </b>\n        <div className={styles.description}>{description}</div>\n      </div>\n      {!isInList && badgeText && <div className={styles.badge}>{badgeText}</div>}\n    </div>\n  );\n}\n\nexport default memo(Site);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { SearchSuggestions } from './helpers/utils';\n\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { getHostnameFromUrl } from '../../util/url';\n\nimport useLang from '../../hooks/useLang';\n\nimport Menu from '../ui/Menu';\nimport MenuItem from '../ui/MenuItem';\nimport Site from './Site';\n\nimport styles from './Explore.module.scss';\n\ninterface OwnProps {\n  isSuggestionsVisible: boolean;\n  searchSuggestions: SearchSuggestions;\n  searchValue: string;\n  onSiteClick: (e: React.SyntheticEvent<HTMLDivElement | HTMLAnchorElement>, url: string) => void;\n  onSiteClear: (e: React.MouseEvent, url: string) => void;\n  onClose: NoneToVoidFunction;\n}\n\nfunction ExploreSearchSuggestions({\n  isSuggestionsVisible,\n  searchSuggestions,\n  searchValue,\n  onSiteClick,\n  onSiteClear,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <Menu\n      type=\"suggestion\"\n      noBackdrop\n      isOpen={Boolean(isSuggestionsVisible && !searchSuggestions.isEmpty)}\n      className={styles.suggestions}\n      bubbleClassName={styles.suggestionsMenu}\n      onClose={onClose}\n    >\n      {searchSuggestions?.history?.map((url) => (\n        <MenuItem key={`history-${url}`} className={styles.suggestion} onClick={onSiteClick} clickArg={url}>\n          <i\n            className={buildClassName(styles.suggestionIcon, searchValue.length ? 'icon-search' : 'icon-globe')}\n            aria-hidden\n          />\n          <span className={styles.suggestionAddress}>{getHostnameFromUrl(url)}</span>\n\n          <button\n            className={styles.clearSuggestion}\n            type=\"button\"\n            aria-label={lang('Clear')}\n            title={lang('Clear')}\n            onMouseDown={(e) => onSiteClear(e, url)}\n            onClick={stopEvent}\n          >\n            <i className=\"icon-close\" aria-hidden />\n          </button>\n        </MenuItem>\n      ))}\n      {searchSuggestions?.sites?.map((site) => (\n        <Site key={`site-${site.url}-${site.name}`} className={styles.suggestion} site={site} />\n      ))}\n    </Menu>\n  );\n}\n\nexport default memo(ExploreSearchSuggestions);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSiteCategory } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\n\nimport styles from './CategoryHeader.module.scss';\n\ninterface OwnProps {\n  id: number;\n  withNotch?: boolean;\n}\n\ninterface StateProps {\n  categories?: ApiSiteCategory[];\n}\n\nfunction CategoryHeader({ id, withNotch, categories }: OwnProps & StateProps) {\n  const { closeSiteCategory } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const category = useMemo(() => {\n    return (categories || [])?.find((item) => id === item.id);\n  }, [categories, id]);\n\n  return (\n    <div className={buildClassName(\n      styles.root,\n      isPortrait && 'with-notch-on-scroll',\n      withNotch && 'is-scrolled',\n    )}\n    >\n      <Button className={styles.backButton} isSimple isText onClick={closeSiteCategory}>\n        <i className={buildClassName(styles.backIcon, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <h3 className={styles.title}>\n        {lang(category?.name || '')}\n      </h3>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    categories: global.exploreData?.categories,\n  };\n})(CategoryHeader));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"xWsj5_Wk\",\"backButton\":\"P2bhPLw0\",\"backIcon\":\"FmQAR1hK\",\"title\":\"kW1ssngj\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiSite } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport CategoryHeader from './CategoryHeader';\nimport Site from './Site';\n\nimport styles from './SiteList.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  categoryId: number;\n  sites: ApiSite[];\n}\n\nfunction SiteList({ isActive, categoryId, sites }: OwnProps) {\n  const { closeSiteCategory } = getActions();\n\n  const { isPortrait } = useDeviceScreen();\n\n  useHistoryBack({\n    isActive,\n    onBack: closeSiteCategory,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div\n      onScroll={isPortrait ? handleContentScroll : undefined}\n      className={buildClassName(styles.root, 'custom-scroll')}\n    >\n      {isPortrait && <CategoryHeader id={categoryId} withNotch={isScrolled} />}\n      <div className={styles.list}>\n        {sites.map((site) => (\n          <Site\n            key={`${site.url}-${site.name}`}\n            site={site}\n            isInList\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SiteList);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"LxPuuiTJ\",\"list\":\"Eml6INN5\"};","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSite, ApiSiteCategory } from '../../api/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX } from '../../config';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { stopEvent } from '../../util/domEvents';\nimport { vibrate } from '../../util/haptics';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { captureControlledSwipe } from '../../util/swipeController';\nimport useTelegramMiniAppSwipeToClose from '../../util/telegram/hooks/useTelegramMiniAppSwipeToClose';\nimport {\n  IS_ANDROID, IS_ANDROID_APP, IS_IOS_APP, IS_TOUCH_ENV,\n} from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\nimport {\n  filterSites,\n  findSiteByUrl,\n  generateSearchSuggestions,\n  openSite,\n  processSites,\n  type SearchSuggestions,\n} from './helpers/utils';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useFlag from '../../hooks/useFlag';\nimport useHorizontalScroll from '../../hooks/useHorizontalScroll';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport usePrevious2 from '../../hooks/usePrevious2';\nimport useScrolledState from '../../hooks/useScrolledState';\nimport { useStateRef } from '../../hooks/useStateRef';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Spinner from '../ui/Spinner';\nimport Transition from '../ui/Transition';\nimport Category from './Category';\nimport DappFeed from './DappFeed';\nimport ExploreSearchSuggestions from './ExploreSearchSuggestions';\nimport Site from './Site';\nimport SiteList from './SiteList';\n\nimport styles from './Explore.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  onScroll?: (e: React.UIEvent<HTMLDivElement>) => void;\n}\n\ninterface StateProps {\n  categories?: ApiSiteCategory[];\n  sites?: ApiSite[];\n  shouldRestrict: boolean;\n  browserHistory?: string[];\n  currentSiteCategoryId?: number;\n}\n\nconst SUGGESTIONS_OPEN_DELAY = 300;\nconst enum SLIDES {\n  main,\n  category,\n}\n\nfunction Explore({\n  isActive, categories, sites: originalSites, shouldRestrict, browserHistory, currentSiteCategoryId, onScroll,\n}: OwnProps & StateProps) {\n  const {\n    loadExploreSites,\n    getDapps,\n    removeSiteFromBrowserHistory,\n    openSiteCategory,\n    closeSiteCategory,\n  } = getActions();\n\n  const inputRef = useRef<HTMLInputElement>();\n  const suggestionsTimeoutRef = useRef<number | undefined>(undefined);\n  const transitionRef = useRef<HTMLDivElement>();\n  const trendingContainerRef = useRef<HTMLDivElement>();\n\n  const lang = useLang();\n  const { isLandscape, isPortrait } = useDeviceScreen();\n  const [searchValue, setSearchValue] = useState<string>('');\n  const [isSearchFocused, markSearchFocused, unmarkSearchFocused] = useFlag(false);\n  const [isSuggestionsVisible, showSuggestions, hideSuggestions] = useFlag(false);\n  const { renderingKey } = useModalTransitionKeys(currentSiteCategoryId || 0, !!isActive);\n  const prevSiteCategoryIdRef = useStateRef(usePrevious2(renderingKey));\n  const { disableSwipeToClose, enableSwipeToClose } = useTelegramMiniAppSwipeToClose(isActive);\n\n  // On desktop should be used external scroll detection via `onScroll` prop\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  useEffect(\n    () => (renderingKey ? captureEscKeyListener(closeSiteCategory) : undefined),\n    [closeSiteCategory, renderingKey],\n  );\n\n  const filteredSites = useMemo(() => filterSites(originalSites, shouldRestrict), [originalSites, shouldRestrict]);\n\n  const searchSuggestions = useMemo<SearchSuggestions>(\n    () => generateSearchSuggestions(searchValue, browserHistory, filteredSites),\n    [browserHistory, searchValue, filteredSites],\n  );\n\n  const { trendingSites, allSites } = useMemo(() => processSites(filteredSites), [filteredSites]);\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV || !filteredSites?.length) {\n      return undefined;\n    }\n\n    return captureControlledSwipe(transitionRef.current!, {\n      onSwipeRightStart: () => {\n        closeSiteCategory();\n\n        disableSwipeToClose();\n      },\n      onCancel: () => {\n        openSiteCategory({ id: prevSiteCategoryIdRef.current! });\n\n        enableSwipeToClose();\n      },\n    });\n  }, [disableSwipeToClose, enableSwipeToClose, filteredSites?.length, prevSiteCategoryIdRef]);\n\n  useHorizontalScroll({\n    containerRef: trendingContainerRef,\n    isDisabled: IS_TOUCH_ENV || trendingSites.length === 0,\n    shouldPreventDefault: true,\n    contentSelector: `.${styles.trendingList}`,\n  });\n\n  const filteredCategories = useMemo(() => {\n    return categories?.filter((category) => allSites[category.id]?.length > 0);\n  }, [categories, allSites]);\n\n  useEffect(() => {\n    if (!isActive) return;\n\n    getDapps();\n    loadExploreSites({ isLandscape });\n  }, [isActive, isLandscape]);\n\n  const safeShowSuggestions = useLastCallback(() => {\n    if (searchSuggestions.isEmpty) return;\n\n    // Simultaneous opening of the virtual keyboard and display of Saved Addresses causes animation degradation\n    if (IS_ANDROID) {\n      suggestionsTimeoutRef.current = window.setTimeout(showSuggestions, SUGGESTIONS_OPEN_DELAY);\n    } else {\n      showSuggestions();\n    }\n  });\n\n  const safeHideSuggestions = useLastCallback(() => {\n    if (isSuggestionsVisible) {\n      hideSuggestions();\n    }\n    window.clearTimeout(suggestionsTimeoutRef.current);\n  });\n\n  useEffectWithPrevDeps(([prevIsSearchFocused]) => {\n    if ((prevIsSearchFocused && !isSearchFocused) || searchSuggestions.isEmpty) {\n      safeHideSuggestions();\n    }\n    if (isSearchFocused && !searchSuggestions.isEmpty) {\n      safeShowSuggestions();\n    }\n  }, [isSearchFocused, searchSuggestions.isEmpty]);\n\n  const handleSiteClick = useLastCallback((\n    e: React.SyntheticEvent<HTMLDivElement | HTMLAnchorElement>,\n    url: string,\n  ) => {\n    void vibrate();\n    hideSuggestions();\n    const site = findSiteByUrl(originalSites, url);\n    openSite(url, site?.isExternal, site?.name);\n  });\n\n  const handleSiteClear = useLastCallback((e: React.MouseEvent, url: string) => {\n    stopEvent(e);\n\n    removeSiteFromBrowserHistory({ url });\n  });\n\n  function handleSearchValueChange(e: React.ChangeEvent<HTMLInputElement>) {\n    setSearchValue(e.target.value);\n  }\n\n  const handleMenuClose = useLastCallback(() => {\n    inputRef.current?.blur();\n  });\n\n  function handleSearchSubmit(e: React.FormEvent<HTMLFormElement>) {\n    stopEvent(e);\n\n    handleMenuClose();\n\n    if (searchValue.length > 0) {\n      openSite(searchValue);\n      setSearchValue('');\n    }\n  }\n\n  function renderSearch() {\n    return (\n      <form action=\"#\" onSubmit={handleSearchSubmit} className={styles.searchContainer} autoComplete=\"off\">\n        <i className={buildClassName(styles.searchIcon, 'icon-search')} aria-hidden />\n        <input\n          name=\"explore-search\"\n          className={styles.searchInput}\n          placeholder={lang('Search or enter address')}\n          value={searchValue}\n          autoCorrect={false}\n          autoCapitalize=\"none\"\n          spellCheck={false}\n          inputMode=\"url\"\n          onChange={handleSearchValueChange}\n          onFocus={markSearchFocused}\n          onBlur={unmarkSearchFocused}\n        />\n      </form>\n    );\n  }\n\n  function renderTrending() {\n    return (\n      <div ref={trendingContainerRef} className={styles.trendingSection}>\n        <h2 className={styles.sectionHeader}>{lang('Trending')}</h2>\n        <div className={styles.trendingList}>\n          {trendingSites.map((site) => (\n            <Site key={`${site.url}-${site.name}`} site={site} isTrending />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  function renderContent(isContentActive: boolean, isFrom: boolean, currentKey: SLIDES) {\n    switch (currentKey) {\n      case SLIDES.main:\n        return (\n          <div\n            className={buildClassName(styles.slide, 'custom-scroll')}\n            onScroll={isPortrait ? handleContentScroll : onScroll}\n          >\n            <div className={buildClassName(styles.searchWrapper, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n              {renderSearch()}\n              <ExploreSearchSuggestions\n                isSuggestionsVisible={isSuggestionsVisible}\n                searchSuggestions={searchSuggestions}\n                searchValue={searchValue}\n                onSiteClick={handleSiteClick}\n                onSiteClear={handleSiteClear}\n                onClose={handleMenuClose}\n              />\n            </div>\n\n            <DappFeed />\n\n            {Boolean(trendingSites.length) && renderTrending()}\n\n            {Boolean(filteredCategories?.length) && (\n              <>\n                <h2 className={styles.sectionHeader}>{lang('All Dapps')}</h2>\n                <div className={buildClassName(styles.list, isLandscape && styles.landscapeList)}>\n                  {filteredCategories.map((category) => (\n                    <Category key={category.id} category={category} sites={allSites[category.id]} />\n                  ))}\n                </div>\n              </>\n            )}\n          </div>\n        );\n\n      case SLIDES.category: {\n        const currentSiteCategory = allSites[renderingKey];\n        if (!currentSiteCategory) return undefined;\n\n        return (\n          <SiteList\n            key={renderingKey}\n            isActive={isContentActive}\n            categoryId={renderingKey}\n            sites={currentSiteCategory}\n          />\n        );\n      }\n    }\n  }\n\n  if (filteredSites === undefined) {\n    return (\n      <div className={buildClassName(styles.emptyList, styles.emptyListLoading)}>\n        <Spinner />\n      </div>\n    );\n  }\n\n  if (filteredSites.length === 0) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.happy}\n          previewUrl={ANIMATED_STICKERS_PATHS.happyPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n          className={styles.sticker}\n          noLoop={false}\n          nonInteractive\n        />\n        <p className={styles.emptyListTitle}>{lang('No partners yet')}</p>\n      </div>\n    );\n  }\n\n  return (\n    <Transition\n      ref={transitionRef}\n      name={resolveSlideTransitionName()}\n      activeKey={renderingKey ? SLIDES.category : SLIDES.main}\n      withSwipeControl\n      className={styles.rootSlide}\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { browserHistory, currentSiteCategoryId } = selectCurrentAccountState(global) || {};\n  const { categories, sites } = global.exploreData || {};\n\n  return {\n    sites,\n    categories,\n    shouldRestrict: global.restrictions.isLimitedRegion && (IS_IOS_APP || IS_ANDROID_APP),\n    browserHistory,\n    currentSiteCategoryId,\n  };\n})(Explore));\n","import React, {\n  memo, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { Account } from '../../global/types';\nimport type { LedgerWalletInfo } from '../../util/ledger/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport settingsStyles from '../settings/Settings.module.scss';\nimport styles from './LedgerModal.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  isStatic?: boolean;\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  onBackButtonClick?: NoneToVoidFunction;\n  onCancel?: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n};\n\nconst ACCOUNT_ADDRESS_SHIFT = 4;\nconst ACCOUNT_BALANCE_DECIMALS = 3;\n\nfunction LedgerSelectWallets({\n  isActive,\n  isStatic,\n  hardwareWallets,\n  accounts,\n  onBackButtonClick,\n  onCancel,\n  onClose,\n}: OwnProps) {\n  const {\n    afterSelectHardwareWallets,\n    loadMoreHardwareWallets,\n  } = getActions();\n  const lang = useLang();\n\n  const [selectedAccountIndices, setSelectedAccountIndices] = useState<number[]>([]);\n  const shouldCloseOnCancel = !onCancel;\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel ?? onClose,\n  });\n\n  const handleAccountToggle = useLastCallback((index: number) => {\n    if (selectedAccountIndices.includes(index)) {\n      setSelectedAccountIndices(selectedAccountIndices.filter((id) => id !== index));\n    } else {\n      setSelectedAccountIndices(selectedAccountIndices.concat([index]));\n    }\n  });\n\n  const handleAddLedgerWallets = useLastCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: selectedAccountIndices });\n    onClose();\n  });\n\n  const alreadyConnectedList = useMemo(\n    () => Object.values(accounts ?? [])\n      .map(({ addressByChain: { ton: address } }) => address)\n      .filter(Boolean),\n    [accounts],\n  );\n\n  const handleAddWalletClick = useLastCallback(() => {\n    const list = hardwareWallets ?? [];\n    const lastIndex = list[list.length - 1]?.index ?? 0;\n\n    loadMoreHardwareWallets({ lastIndex });\n  });\n\n  function renderAddAccount() {\n    return (\n      <Button\n        className={styles.addAccountContainer}\n        onClick={handleAddWalletClick}\n      >\n        {lang('Add Wallet')}\n        <i className={buildClassName(styles.addAccountIcon, 'icon-plus')} aria-hidden />\n      </Button>\n    );\n  }\n\n  function renderAccount(address: string, balance: bigint, index: number, isConnected: boolean) {\n    const isActiveAccount = isConnected || selectedAccountIndices.includes(index);\n\n    return (\n      <div\n        key={address}\n        className={buildClassName(styles.account, isActiveAccount && styles.account_current)}\n        onClick={isConnected ? undefined : () => handleAccountToggle(index)}\n      >\n        <span className={styles.accountName}>\n          <i className={buildClassName(styles.accountCurrencyIcon, 'icon-ton')} aria-hidden />\n          {formatCurrency(toDecimal(balance), '', ACCOUNT_BALANCE_DECIMALS)}\n        </span>\n        <div className={styles.accountFooter}>\n          <span className={styles.accountAddress}>\n            {shortenAddress(address, ACCOUNT_ADDRESS_SHIFT, ACCOUNT_ADDRESS_SHIFT)}\n          </span>\n        </div>\n\n        <div className={buildClassName(styles.accountCheckMark, isActiveAccount && styles.accountCheckMark_active)} />\n      </div>\n    );\n  }\n\n  function renderAccounts() {\n    const list = hardwareWallets ?? [];\n    const fullClassName = buildClassName(\n      styles.accounts,\n      list.length === 1 && styles.accounts_two,\n      'custom-scroll',\n    );\n\n    return (\n      <div className={fullClassName}>\n        {list.map(\n          ({ address, balance, index }) => renderAccount(\n            address,\n            balance,\n            index,\n            alreadyConnectedList.includes(address),\n          ),\n        )}\n        {renderAddAccount()}\n      </div>\n    );\n  }\n\n  const areAccountsSelected = !selectedAccountIndices.length;\n  const title = selectedAccountIndices.length\n    ? lang('%1$d Selected', selectedAccountIndices.length) as string\n    : lang('Select Ledger Wallets');\n\n  return (\n    <>\n      {!isStatic ? (\n        <ModalHeader\n          title={title}\n          onBackButtonClick={onBackButtonClick}\n          onClose={!onBackButtonClick ? onClose : undefined}\n        />\n      ) : (\n        <div className={settingsStyles.header}>\n          <Button isSimple isText onClick={onClose} className={settingsStyles.headerBack}>\n            <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={settingsStyles.headerTitle}>{title}</span>\n        </div>\n      )}\n      <div className={buildClassName(\n        styles.container, isStatic && styles.containerStatic, isStatic && 'static-container',\n      )}\n      >\n        {renderAccounts()}\n        <div className={styles.actionBlock}>\n          <Button\n            className={styles.button}\n            onClick={shouldCloseOnCancel ? onClose : onCancel}\n          >\n            {lang(shouldCloseOnCancel ? 'Cancel' : 'Back')}\n          </Button>\n          <Button\n            isPrimary\n            isDisabled={areAccountsSelected}\n            onClick={handleAddLedgerWallets}\n            className={styles.button}\n          >\n            {lang('Add')}\n          </Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(LedgerSelectWallets);\n","import React, {\n  memo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { Account } from '../../global/types';\nimport type { LedgerWalletInfo } from '../../util/ledger/types';\n\nimport { selectNetworkAccounts } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Modal from '../ui/Modal';\nimport Transition from '../ui/Transition';\nimport LedgerConnect from './LedgerConnect';\nimport LedgerSelectWallets from './LedgerSelectWallets';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './LedgerModal.module.scss';\n\ntype OwnProps = {\n  isOpen?: boolean;\n  noBackdropClose?: boolean;\n  onClose: () => void;\n};\n\ntype StateProps = {\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  areSettingsOpen?: boolean;\n};\n\nenum LedgerModalState {\n  Password,\n  Connect,\n  SelectWallets,\n}\n\nfunction LedgerModal({\n  isOpen,\n  noBackdropClose,\n  onClose,\n  hardwareWallets,\n  accounts,\n  areSettingsOpen,\n}: OwnProps & StateProps) {\n  const { afterSelectHardwareWallets } = getActions();\n\n  const [currentSlide, setCurrentSlide] = useState<LedgerModalState>(\n    LedgerModalState.Connect,\n  );\n  const [nextKey] = useState<LedgerModalState | undefined>(\n    LedgerModalState.SelectWallets,\n  );\n\n  const handleAddLedgerWallet = useLastCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: [hardwareWallets![0].index] });\n    onClose();\n  });\n\n  const handleConnected = useLastCallback((isSingleWallet: boolean) => {\n    if (isSingleWallet) {\n      handleAddLedgerWallet();\n      return;\n    }\n    setCurrentSlide(LedgerModalState.SelectWallets);\n  });\n\n  const handleLedgerModalClose = useLastCallback(() => {\n    setCurrentSlide(LedgerModalState.Connect);\n  });\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: LedgerModalState) {\n    switch (currentKey) {\n      case LedgerModalState.Connect:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleConnected}\n            onClose={onClose}\n          />\n        );\n      case LedgerModalState.SelectWallets:\n        return (\n          <LedgerSelectWallets\n            isActive={isActive}\n            accounts={accounts}\n            hardwareWallets={hardwareWallets}\n            onClose={onClose}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      onClose={onClose}\n      onCloseAnimationEnd={handleLedgerModalClose}\n      dialogClassName={buildClassName(styles.modalDialog, areSettingsOpen && styles.modalDialogInsideSettings)}\n      noBackdropClose={noBackdropClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n\n  const { hardwareWallets } = global.hardware;\n\n  return {\n    accounts,\n    hardwareWallets,\n    areSettingsOpen: global.areSettingsOpen,\n  };\n})(LedgerModal));\n","import { IS_CAPACITOR, IS_EXTENSION, IS_TELEGRAM_APP } from '../../../config';\nimport { getSafeAreaTop, getStatusBarHeight } from '../../../util/capacitor';\nimport { getTelegramApp } from '../../../util/telegram';\nimport { IS_ELECTRON, IS_LINUX, IS_OPERA, IS_WINDOWS, REM } from '../../../util/windowEnvironment';\nimport windowSize from '../../../util/windowSize';\n\nimport { ELECTRON_HEADER_HEIGHT_REM } from '../../electron/ElectronHeader';\n\nconst WINDOWS_OPERA_EXTENSION_EXTRA_HEIGHT = 30;\n\nexport function calcSafeAreaTop() {\n  const { safeAreaTop } = windowSize.get();\n  const { safeAreaInset, contentSafeAreaInset } = IS_TELEGRAM_APP ? getTelegramApp()! : {};\n\n  return IS_CAPACITOR\n    // On some iPhones, the result of `getSafeAreaTop` is greater than the result of `getStatusBarHeight`.\n    // Also, the CSS `safeAreaTop` value is calculated with an error due to the specifics of NBS.\n    // In turn, some Android devices calculate `getSafeAreaTop` slightly less than `safeAreaTop` from CSS.\n    // So we need to take the maximum value between `getSafeAreaTop` , `getStatusBarHeight` and `safeAreaTop` from CSS.\n    ? Math.max(getSafeAreaTop(), getStatusBarHeight(), safeAreaTop)\n    : IS_TELEGRAM_APP\n      ? safeAreaInset!.top + contentSafeAreaInset!.top\n      : safeAreaTop\n        + (IS_ELECTRON && !IS_LINUX ? ELECTRON_HEADER_HEIGHT_REM * REM : 0)\n        + (IS_OPERA && IS_WINDOWS && IS_EXTENSION ? WINDOWS_OPERA_EXTENSION_EXTRA_HEIGHT : 0);\n}\n","import type { ElementRef } from '../lib/teact/teact';\nimport { useEffect, useState } from '../lib/teact/teact';\n\ninterface OwnProps {\n  rootMargin: string;\n  threshold?: number[];\n  isDisabled?: boolean;\n  targetRef: ElementRef<HTMLDivElement | undefined>;\n  cb?: (entry: IntersectionObserverEntry) => void;\n}\n\nexport default function useElementVisibility(options: OwnProps) {\n  const {\n    rootMargin,\n    threshold = [0],\n    isDisabled,\n    targetRef,\n    cb,\n  } = options;\n\n  const [isVisible, setIsVisible] = useState(true);\n\n  useEffect(() => {\n    if (isDisabled || !targetRef.current) return undefined;\n\n    const observer = new IntersectionObserver((entries) => {\n      const entry = entries[0];\n\n      setIsVisible(entry.isIntersecting);\n      cb?.(entry);\n    }, {\n      rootMargin,\n      threshold,\n    });\n\n    observer.observe(targetRef.current);\n\n    return () => {\n      observer.disconnect();\n    };\n  }, [rootMargin, threshold, isDisabled, targetRef, cb]);\n\n  return { isVisible };\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport { stopEvent } from '../util/domEvents';\nimport { IS_IOS, IS_PWA, IS_TOUCH_ENV } from '../util/windowEnvironment';\n\nconst metaViewport = document.querySelector('meta[name=\"viewport\"]');\nconst defaultViewportContent = metaViewport?.getAttribute('content') || '';\nconst allowedZoomViewportContent = 'width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover';\n\nexport default function usePreventPinchZoomGesture(isDisabled = false) {\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      return undefined;\n    }\n\n    if (isDisabled) {\n      // Clean viewport content from values that disable the ability to zoom a webpage\n      // https://web.dev/meta-viewport/\n      metaViewport?.setAttribute('content', allowedZoomViewportContent);\n      return undefined;\n    }\n\n    metaViewport?.setAttribute('content', defaultViewportContent);\n\n    // Since iOS 10 `user-scaleable=no` is disabled in Safari for iOS,\n    // this is only applicable for the browser and does not apply to the PWA mode.\n    // https://newbedev.com/how-do-you-disable-viewport-zooming-on-mobile-safari\n    if (IS_IOS && !IS_PWA) {\n      document.addEventListener('gesturestart', stopEvent);\n    }\n\n    return () => {\n      metaViewport?.setAttribute('content', allowedZoomViewportContent);\n      if (IS_IOS && !IS_PWA) {\n        document.removeEventListener('gesturestart', stopEvent);\n      }\n    };\n  }, [isDisabled]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"o0ZmVyIN\",\"purple\":\"DJCb7ytz\",\"tokenIcon\":\"O2XO33Bj\",\"chainIcon\":\"UKA4ZfVj\",\"green\":\"IHTEYaZx\",\"twoIcons\":\"UD000onR\",\"nftIcon\":\"kRGDvyHS\",\"stacked\":\"gdAuuzmF\",\"image\":\"Q3m3aAJ1\",\"text\":\"LrHNEZly\",\"bold\":\"GQC2YXcS\",\"nftTitle\":\"BAWd380W\",\"address\":\"gWbbue48\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport { useMemo } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiSwapAsset, ApiToken } from '../../api/types';\nimport type { UserSwapToken, UserToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { unique } from '../../util/iteratees';\nimport getChainNetworkIcon from '../../util/swap/getChainNetworkIcon';\n\nimport useLang from '../../hooks/useLang';\n\nimport TokenIcon from './TokenIcon';\n\nimport styles from './TransactionBanner.module.scss';\n\ninterface OwnProps {\n  tokenIn?: UserToken | UserSwapToken | ApiSwapAsset | ApiToken;\n  imageUrl?: string | string[];\n  text?: string | TeactNode[];\n  withChainIcon?: boolean;\n  tokenOut?: UserToken | UserSwapToken | ApiSwapAsset | ApiToken;\n  secondText?: string;\n  color?: 'purple' | 'green';\n  className?: string;\n}\n\nfunction TransactionBanner({\n  tokenIn,\n  imageUrl,\n  text,\n  withChainIcon,\n  tokenOut,\n  secondText,\n  color,\n  className,\n}: OwnProps) {\n  const lang = useLang();\n\n  const fullClassName = buildClassName(\n    styles.root,\n    color && styles[color],\n    tokenOut && styles.twoIcons,\n    className,\n  );\n\n  const isNftTransaction = !!imageUrl;\n\n  const imageUrls = useMemo(() => {\n    return unique(Array.isArray(imageUrl) ? imageUrl : [imageUrl]);\n  }, [imageUrl]);\n\n  function renderNftIcon() {\n    return (\n      <div className={buildClassName(styles.nftIcon, Array.isArray(imageUrl) && imageUrl.length > 1 && styles.stacked)}>\n        {imageUrls.map((image) => (\n          <img src={image} alt=\"\" key={image} className={styles.image} />\n        ))}\n        {withChainIcon && tokenIn?.chain && (\n          <img\n            src={getChainNetworkIcon(tokenIn.chain)}\n            alt=\"\"\n            className={styles.chainIcon}\n            draggable={false}\n          />\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className={fullClassName}>\n      {tokenIn && !isNftTransaction && (\n        <TokenIcon\n          token={tokenIn}\n          withChainIcon={withChainIcon}\n          size=\"small\"\n          className={styles.tokenIcon}\n        />\n      )}\n      {isNftTransaction && renderNftIcon()}\n      <span className={styles.text}>\n        {secondText\n          ? text\n            ? (\n              lang('%amount% to %address%', {\n                amount: (\n                  <span className={buildClassName(styles.bold, isNftTransaction && styles.nftTitle)}>\n                    {text}\n                  </span>\n                ),\n                address: <span className={buildClassName(styles.bold, styles.address)}>{secondText}</span>,\n              })\n            )\n            : lang('$transaction_to', { address: <span className={styles.bold}>{secondText}</span> })\n          : <span className={styles.bold}>{text}</span>}\n      </span>\n      {tokenOut && (\n        <TokenIcon\n          token={tokenOut}\n          withChainIcon={withChainIcon}\n          size=\"small\"\n          className={styles.tokenIcon}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(TransactionBanner);\n","import { BarcodeScanner } from '@capacitor-mlkit/barcode-scanning';\n\nimport { IS_CAPACITOR } from '../config';\nimport { getIsMobileTelegramApp } from '../util/windowEnvironment';\nimport useEffectOnce from './useEffectOnce';\nimport useForceUpdate from './useForceUpdate';\n\nlet isQrScannerSupported = getIsMobileTelegramApp();\n\nexport default function useQrScannerSupport() {\n  const forceUpdate = useForceUpdate();\n\n  useEffectOnce(() => {\n    if (!IS_CAPACITOR || isQrScannerSupported) return;\n\n    void BarcodeScanner\n      .isSupported()\n      .then((result) => {\n        isQrScannerSupported = result.supported;\n        forceUpdate();\n      });\n  });\n\n  return isQrScannerSupported;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"NvbEOoOC\",\"help\":\"LugNLsCQ\",\"label\":\"erx70q4_\",\"balanceError\":\"Jag9KEHr\",\"description\":\"s8vGyddw\",\"addressWidget\":\"fVQ8S1pD\",\"inputReadOnly\":\"Pne6FnQc\",\"inputReadOnly_words\":\"NH87E1kW\",\"inputReadOnlyWords\":\"NH87E1kW\",\"currencySymbol\":\"aNzt5kkC\",\"commentInputWrapper\":\"eBKrZtom\",\"sticker\":\"ZDG5rllO\",\"sticker_sizeSmall\":\"ol7Kgi48\",\"stickerSizeSmall\":\"ol7Kgi48\",\"buttonLoading\":\"PYuzODzS\",\"buttonText\":\"Cso7xEQu\",\"button-loading-spinner\":\"Kx52LskK\",\"buttonLoadingSpinner\":\"Kx52LskK\",\"savedAddressBubble\":\"keyC_8Hs\",\"savedAddressItem\":\"WI13wV5I\",\"savedAddressName\":\"ZEsl45OR\",\"savedAddressNameText\":\"HLnOPUyB\",\"iconLedger\":\"bdYXzf2H\",\"savedAddressAddress\":\"sDGTQ4jr\",\"savedAddressDelete\":\"ozjjQpYQ\",\"savedAddressDeleteInner\":\"UWDrZutz\",\"savedAddressDeleteIcon\":\"rO6SGoH9\",\"chainIcon\":\"g2vfXFiv\",\"inputStatic\":\"RJsBtjCe\",\"inputWithIcon\":\"uMO1BRcS\",\"footer\":\"yVExFE73\",\"footer_shifted\":\"NGWUkuR3\",\"footerShifted\":\"NGWUkuR3\",\"buttons\":\"oMCN3Z8P\",\"button\":\"U6ZAbMe2\",\"warningTooltipContainer\":\"lcmy9IMt\",\"transactionBanner\":\"Pxmu6Hot\",\"infoBox\":\"vKJsXVsk\",\"burnWarning\":\"CWZdgy5e\",\"error\":\"pUMdj3j5\",\"spinner\":\"gigiDFmZ\",\"formSlide\":\"TEJfM3gl\",\"formSlide_static\":\"mfCYg0_s\",\"formSlideStatic\":\"mfCYg0_s\"};","import type { MouseEvent } from 'react';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiChain } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport styles from '../transfer/Transfer.module.scss';\n\ninterface OwnProps {\n  address: string;\n  name?: string;\n  chain?: ApiChain;\n  isHardware?: boolean;\n  isSavedAddress?: boolean;\n  deleteLabel?: string;\n  onClick: (address: string) => void;\n  onDeleteClick?: (address: string) => void;\n}\n\nfunction AddressBookItem({\n  address,\n  name,\n  chain,\n  isHardware,\n  isSavedAddress,\n  deleteLabel,\n  onClick,\n  onDeleteClick,\n}: OwnProps) {\n  const handleClick = () => {\n    onClick(address);\n  };\n\n  const handleDeleteClick = (e: MouseEvent) => {\n    stopEvent(e);\n\n    onDeleteClick!(address);\n  };\n\n  return (\n    <div\n      tabIndex={-1}\n      role=\"button\"\n      onMouseDown={IS_TOUCH_ENV ? undefined : handleClick}\n      onClick={IS_TOUCH_ENV ? handleClick : undefined}\n      className={styles.savedAddressItem}\n    >\n      <span className={styles.savedAddressName}>\n        <span className={styles.savedAddressNameText}>\n          {name || shortenAddress(address)}\n        </span>\n        {isHardware && <i className={buildClassName(styles.iconLedger, 'icon-ledger')} aria-hidden />}\n      </span>\n      {isSavedAddress && onDeleteClick && (\n        <span className={styles.savedAddressDelete}>\n          <span\n            tabIndex={-1}\n            role=\"button\"\n            className={styles.savedAddressDeleteInner}\n            onMouseDown={handleDeleteClick}\n          >\n            {deleteLabel}\n          </span>\n        </span>\n      )}\n      {name && (\n        <span className={styles.savedAddressAddress}>\n          {chain && <i className={buildClassName(styles.chainIcon, `icon-chain-${chain}`)} aria-hidden />}\n          {shortenAddress(address)}\n        </span>\n      )}\n      {isSavedAddress && onDeleteClick && (\n        <span\n          className={styles.savedAddressDeleteIcon}\n          role=\"button\"\n          tabIndex={-1}\n          onMouseDown={handleDeleteClick}\n          onClick={stopEvent}\n          aria-label={deleteLabel}\n        >\n          <i className=\"icon-trash\" aria-hidden />\n        </span>\n      )}\n    </div>\n  );\n}\n\nexport default memo(AddressBookItem);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiChain } from '../../api/types';\nimport type { Account, SavedAddress } from '../../global/types';\n\nimport { TONCOIN } from '../../config';\nimport { selectCurrentAccountState, selectIsMultichainAccount, selectNetworkAccounts } from '../../global/selectors';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useLang from '../../hooks/useLang';\n\nimport AddressBookItem from './AddressBookItem';\nimport Menu from './Menu';\n\nimport styles from '../transfer/Transfer.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  currentChain?: ApiChain;\n  currentAddress?: string;\n  otherAccountIds?: string[];\n  onClose: NoneToVoidFunction;\n  onAddressSelect: (address: string) => void;\n  onSavedAddressDelete: (address: string) => void;\n}\n\ninterface StateProps {\n  savedAddresses?: SavedAddress[];\n  accounts?: Record<string, Account>;\n  isMultichainAccount?: boolean;\n}\n\nfunction AddressBook({\n  isOpen, currentChain, currentAddress = '', otherAccountIds,\n  accounts, savedAddresses, isMultichainAccount,\n  onAddressSelect, onSavedAddressDelete, onClose,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n\n  const renderedSavedAddresses = useMemo(() => {\n    if (!savedAddresses || savedAddresses.length === 0) {\n      return undefined;\n    }\n\n    return savedAddresses\n      .filter((item) => {\n        return (!currentChain || item.chain === currentChain) && doesSavedAddressFitSearch(item, currentAddress);\n      })\n      .map((item) => (\n        <AddressBookItem\n          key={`saved-${item.address}-${item.chain}`}\n          address={item.address}\n          name={item.name}\n          chain={isMultichainAccount ? item.chain : undefined}\n          deleteLabel={lang('Delete')}\n          isSavedAddress\n          onClick={onAddressSelect}\n          onDeleteClick={onSavedAddressDelete}\n        />\n      ));\n  }, [currentAddress, isMultichainAccount, currentChain, lang, onAddressSelect, onSavedAddressDelete, savedAddresses]);\n\n  const renderedOtherAccounts = useMemo(() => {\n    if (!otherAccountIds || otherAccountIds.length === 0) return undefined;\n\n    const addressesToBeIgnored = savedAddresses?.map((item) => `${item.chain}:${item.address}`) ?? [];\n    const uniqueAddresses = new Set<string>();\n    const otherAccounts = otherAccountIds\n      .reduce((acc, accountId) => {\n        const account = accounts![accountId];\n\n        Object.keys(account.addressByChain).forEach((addressChain) => {\n          const address = account.addressByChain[addressChain as ApiChain];\n          const key = `${addressChain}:${address}`;\n          if (\n            address\n            && !uniqueAddresses.has(key)\n            && (!currentChain || addressChain === currentChain)\n            && (isMultichainAccount || addressChain === TONCOIN.chain)\n            && !addressesToBeIgnored.includes(`${addressChain}:${address}`)\n          ) {\n            uniqueAddresses.add(key);\n            acc.push({\n              name: account.title || shortenAddress(address)!,\n              address,\n              chain: addressChain as ApiChain,\n              isHardware: account.type === 'hardware',\n            });\n          }\n        });\n\n        return acc;\n      }, [] as (SavedAddress & { isHardware?: boolean })[]);\n\n    return otherAccounts.filter(\n      (item) => doesSavedAddressFitSearch(item, currentAddress),\n    ).map(({\n      address, name, chain: addressChain, isHardware,\n    }) => (\n      <AddressBookItem\n        key={`address-${address}-${addressChain}`}\n        address={address}\n        name={name}\n        chain={isMultichainAccount ? addressChain : undefined}\n        isHardware={isHardware}\n        onClick={onAddressSelect}\n      />\n    ));\n  }, [otherAccountIds, savedAddresses, accounts, currentChain, isMultichainAccount, currentAddress, onAddressSelect]);\n\n  const shouldRender = Boolean(renderedOtherAccounts?.length || renderedSavedAddresses?.length);\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <Menu\n      positionX=\"right\"\n      type=\"suggestion\"\n      noBackdrop\n      bubbleClassName={styles.savedAddressBubble}\n      isOpen={isOpen}\n      onClose={onClose}\n    >\n      {renderedSavedAddresses}\n      {renderedOtherAccounts}\n    </Menu>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n\n  return {\n    savedAddresses: accountState?.savedAddresses,\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n    accounts: selectNetworkAccounts(global),\n  };\n})(AddressBook));\n\nfunction doesSavedAddressFitSearch(savedAddress: SavedAddress, search: string) {\n  const searchQuery = search.toLowerCase();\n  const { address, name } = savedAddress;\n\n  return (\n    address.toLowerCase().startsWith(searchQuery)\n    || address.toLowerCase().endsWith(searchQuery)\n    || name.toLowerCase().split(/\\s+/).some((part) => part.startsWith(searchQuery))\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"inputButtonWrapper\":\"L_5kIPIy\",\"inputButtonWrapperWithFocus\":\"BJFtkvaJ\",\"inputButton\":\"vnQc1YiQ\",\"inputButtonClear\":\"tl4TUzu3\",\"inputButtonTransition\":\"ayhHYxLn\",\"addressName\":\"S1nUS2km\",\"addressValue\":\"DdHkCftA\",\"addressValueSingle\":\"m2Fe0uv6\",\"inputStatic\":\"Nrn6AoJg\",\"inputWithIcon\":\"K9Nd_zOE\"};","import React, {\n  type ElementRef,\n  memo,\n  useMemo,\n  useRef,\n  useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiChain } from '../../api/types';\nimport type { Account, SavedAddress } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { readClipboardContent } from '../../util/clipboard';\nimport { isDnsDomain } from '../../util/dns';\nimport { getLocalAddressName } from '../../util/getLocalAddressName';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport {\n  getIsMobileTelegramApp,\n  IS_ANDROID,\n  IS_CLIPBOARDS_SUPPORTED,\n  IS_IOS,\n} from '../../util/windowEnvironment';\n\nimport useEffectOnce from '../../hooks/useEffectOnce';\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useQrScannerSupport from '../../hooks/useQrScannerSupport';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nimport DeleteSavedAddressModal from '../main/modals/DeleteSavedAddressModal';\nimport AddressBook from './AddressBook';\nimport Button from './Button';\nimport Input from './Input';\nimport Transition from './Transition';\n\nimport styles from './AddressInput.module.scss';\n\nexport const INPUT_CLEAR_BUTTON_ID = 'input-clear-button';\n\ninterface OwnProps {\n  ref?: ElementRef<HTMLInputElement | HTMLTextAreaElement>;\n  label: string;\n  value: string;\n  chain?: ApiChain;\n  isStatic?: boolean;\n  withQrScan?: boolean;\n  address: string;\n  addressName: string;\n  addressBookChain?: ApiChain;\n  accounts?: Record<string, Account>;\n  currentAccountId: string;\n  savedAddresses?: SavedAddress[];\n  validateAddress?: ({ address }: { address?: string }) => void;\n  error?: string;\n  onInput: (value: string, isValueReplaced?: boolean) => void;\n  onClose: NoneToVoidFunction;\n}\n\nconst SHORT_ADDRESS_SHIFT = 4;\nconst SHORT_SINGLE_ADDRESS_SHIFT = 11;\nconst MIN_ADDRESS_LENGTH_TO_SHORTEN = SHORT_SINGLE_ADDRESS_SHIFT * 2;\nconst SAVED_ADDRESS_OPEN_DELAY = 300;\n\nfunction AddressInput({\n  ref,\n  label,\n  value,\n  chain,\n  isStatic,\n  withQrScan,\n  address,\n  addressName,\n  addressBookChain,\n  accounts,\n  currentAccountId,\n  savedAddresses,\n  validateAddress,\n  error,\n  onInput,\n  onClose,\n}: OwnProps) {\n  const {\n    showNotification,\n    requestOpenQrScanner,\n  } = getActions();\n\n  const lang = useLang();\n\n  const addressBookTimeoutRef = useRef<number>();\n\n  const [addressForDeletion, setAddressForDeletion] = useState<string | undefined>();\n  const [chainForDeletion, setChainForDeletion] = useState<ApiChain | undefined>();\n  const [isAddressBookOpen, openAddressBook, closeAddressBook] = useFlag();\n  const [isFocused, markFocused, unmarkFocused] = useFlag();\n  const [shouldRenderPasteButton, setShouldRenderPasteButton] = useState(IS_CLIPBOARDS_SUPPORTED);\n  const isQrScannerSupported = useQrScannerSupport();\n  const inputId = useUniqueId('address-');\n\n  const isAddressValid = chain ? isValidAddressOrDomain(value, chain) : undefined;\n  const hasAddressError = value.length > 0 && !isAddressValid;\n  const localError = hasAddressError ? lang('Incorrect address') : undefined;\n\n  const addressBookAccountIds = useMemo(() => {\n    return accounts ? Object.keys(accounts).filter((accountId) => accountId !== currentAccountId) : [];\n  }, [currentAccountId, accounts]);\n  const shouldUseAddressBook = useMemo(() => {\n    return addressBookAccountIds.length > 0 || (savedAddresses && savedAddresses.length > 0);\n  }, [addressBookAccountIds.length, savedAddresses]);\n\n  const localAddressName = useMemo(() => {\n    return chain && value ? getLocalAddressName({\n      address: value,\n      chain,\n      currentAccountId,\n      savedAddresses,\n      accounts: accounts!,\n    }) : undefined;\n  }, [accounts, chain, currentAccountId, savedAddresses, value]);\n\n  const withPasteButton = shouldRenderPasteButton && !value;\n  const withQrButton = withQrScan && isQrScannerSupported;\n  const withButton = withQrButton || withPasteButton || !!value.length;\n\n  useEffectOnce(() => {\n    return () => {\n      if (addressBookTimeoutRef.current) {\n        window.clearTimeout(addressBookTimeoutRef.current);\n      }\n    };\n  });\n\n  const addressOverlay = useMemo(() => {\n    if (!address) return undefined;\n    const renderedAddressName = localAddressName || addressName;\n\n    const addressShort = !renderedAddressName && address.length > MIN_ADDRESS_LENGTH_TO_SHORTEN\n      ? shortenAddress(address, SHORT_SINGLE_ADDRESS_SHIFT) || ''\n      : address;\n\n    return (\n      <>\n        {renderedAddressName && <span className={styles.addressName}>{renderedAddressName}</span>}\n        <span className={buildClassName(styles.addressValue, !renderedAddressName && styles.addressValueSingle)}>\n          {renderedAddressName ? shortenAddress(address, SHORT_ADDRESS_SHIFT) : addressShort}\n        </span>\n      </>\n    );\n  }, [address, localAddressName, addressName]);\n\n  const handlePasteClick = useLastCallback(async () => {\n    try {\n      const { type, text } = await readClipboardContent();\n\n      if (type === 'text/plain') {\n        const newValue = text.trim();\n        onInput(newValue, true);\n\n        handleAddressCheck(newValue);\n      }\n    } catch (err: any) {\n      showNotification({ message: lang('Error reading clipboard') });\n      setShouldRenderPasteButton(false);\n    }\n  });\n\n  const handleQrScanClick = useLastCallback(() => {\n    if (IS_IOS && getIsMobileTelegramApp()) {\n      alert('Scanning is temporarily not available');\n      return;\n    }\n\n    requestOpenQrScanner();\n    onClose();\n  });\n\n  const handleAddressCheck = useLastCallback((address?: string) => {\n    if (!validateAddress) return;\n\n    if ((address && chain && isValidAddressOrDomain(address, chain)) || !address) {\n      validateAddress({ address });\n    }\n  });\n\n  const handleAddressFocus = useLastCallback(() => {\n    markFocused();\n\n    if (shouldUseAddressBook) {\n      // Simultaneous opening of the virtual keyboard and display of Saved Addresses causes animation degradation\n      if (IS_ANDROID) {\n        addressBookTimeoutRef.current = window.setTimeout(openAddressBook, SAVED_ADDRESS_OPEN_DELAY);\n      } else {\n        openAddressBook();\n      }\n    }\n  });\n\n  const handleAddressBlur = useLastCallback((e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    unmarkFocused();\n\n    if (e.relatedTarget?.id === INPUT_CLEAR_BUTTON_ID) {\n      handleAddressBookClose();\n      handleAddressCheck(value);\n\n      return;\n    }\n\n    let addressToCheck = value;\n    if (isDnsDomain(value) && value !== value.toLowerCase()) {\n      addressToCheck = value.toLowerCase().trim();\n      onInput(addressToCheck);\n    } else if (value !== value.trim()) {\n      addressToCheck = value.trim();\n      onInput(addressToCheck);\n    }\n\n    requestAnimationFrame(() => {\n      handleAddressBookClose();\n      handleAddressCheck(addressToCheck);\n    });\n  });\n\n  const handleAddressClear = useLastCallback(() => {\n    onInput('');\n    handleAddressCheck();\n  });\n\n  const handleAddressBookClose = useLastCallback(() => {\n    if (!shouldUseAddressBook || !isAddressBookOpen) return;\n\n    closeAddressBook();\n\n    if (addressBookTimeoutRef.current) {\n      window.clearTimeout(addressBookTimeoutRef.current);\n    }\n  });\n\n  const handleDeleteSavedAddressClick = useLastCallback((address: string) => {\n    setAddressForDeletion(address);\n    setChainForDeletion(chain);\n    closeAddressBook();\n  });\n\n  const handleDeleteSavedAddressModalClose = useLastCallback(() => {\n    setAddressForDeletion(undefined);\n    setChainForDeletion(undefined);\n  });\n\n  const handleAddressBookItemSelect = useLastCallback((address: string) => {\n    onInput(address, true);\n    closeAddressBook();\n  });\n\n  function renderInputActions() {\n    const wrapperClassName = buildClassName(\n      styles.inputButtonWrapper,\n      isFocused && styles.inputButtonWrapperWithFocus,\n    );\n\n    return (\n      <Transition className={styles.inputButtonTransition} activeKey={value.length ? 0 : 1} name=\"fade\">\n        {value.length ? (\n          <div className={wrapperClassName}>\n            <Button\n              isSimple\n              id={INPUT_CLEAR_BUTTON_ID}\n              className={buildClassName(styles.inputButton, styles.inputButtonClear)}\n              onClick={handleAddressClear}\n              ariaLabel={lang('Clear')}\n            >\n              <i className=\"icon-close-filled\" aria-hidden />\n            </Button>\n          </div>\n        ) : (\n          <div className={wrapperClassName}>\n            {withQrButton && (\n              <Button\n                isSimple\n                className={styles.inputButton}\n                onClick={handleQrScanClick}\n                ariaLabel={lang('Scan QR Code')}\n              >\n                <i className=\"icon-qr-scanner-alt\" aria-hidden />\n              </Button>\n            )}\n            {withPasteButton && (\n              <Button isSimple className={styles.inputButton} onClick={handlePasteClick} ariaLabel={lang('Paste')}>\n                <i className=\"icon-paste\" aria-hidden />\n              </Button>\n            )}\n          </div>\n        )}\n      </Transition>\n    );\n  }\n\n  return (\n    <>\n      <Input\n        id={inputId}\n        ref={ref}\n        className={buildClassName(isStatic && styles.inputStatic, withButton && styles.inputWithIcon)}\n        isRequired\n        isStatic={isStatic}\n        label={label}\n        placeholder={lang('Wallet address or domain')}\n        value={value}\n        error={localError || error}\n        autoCorrect={false}\n        valueOverlay={!localError ? addressOverlay : undefined}\n        onInput={onInput}\n        onFocus={handleAddressFocus}\n        onBlur={handleAddressBlur}\n      >\n        {renderInputActions()}\n      </Input>\n      {shouldUseAddressBook && (\n        <>\n          <AddressBook\n            isOpen={isAddressBookOpen}\n            currentChain={addressBookChain}\n            currentAddress={value}\n            otherAccountIds={addressBookAccountIds}\n            onAddressSelect={handleAddressBookItemSelect}\n            onSavedAddressDelete={handleDeleteSavedAddressClick}\n            onClose={closeAddressBook}\n          />\n          <DeleteSavedAddressModal\n            isOpen={Boolean(addressForDeletion)}\n            address={addressForDeletion}\n            chain={chainForDeletion}\n            onClose={handleDeleteSavedAddressModalClose}\n          />\n        </>\n      )}\n    </>\n  );\n}\n\nexport default memo(AddressInput);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"gRT6bZt3\",\"modalTitle\":\"cmL5TjIH\",\"headerTitle\":\"NtG0ddPE\",\"headerDate\":\"u4jvqiGf\",\"sticker\":\"BrPVwQU4\",\"transactionBanner\":\"Ps7kqvix\",\"nftContainer\":\"Dnc6lzH5\",\"multiNftChips\":\"p6JeJnTy\",\"footer\":\"W2G5uyVG\",\"button\":\"hdNHgPt2\",\"buttons\":\"jQftqhh0\",\"buttonsAfterNft\":\"uM1QBU1t\"};","import React, { memo, useEffect, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\nimport type { Account, GlobalState, SavedAddress } from '../../global/types';\nimport { DomainLinkingState } from '../../global/types';\n\nimport { TONCOIN } from '../../config';\nimport {\n  selectCurrentAccount,\n  selectCurrentAccountState,\n  selectCurrentToncoinBalance,\n  selectNetworkAccounts,\n  selectTonDnsLinkedAddress,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport useSyncEffectWithPrevDeps from '../../hooks/useSyncEffectWithPrevDeps';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport NftInfo from '../transfer/NftInfo';\nimport AddressInput from '../ui/AddressInput';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport FeeLine from '../ui/FeeLine';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './RenewDomainModal.module.scss';\n\ninterface StateProps {\n  isMediaViewerOpen?: boolean;\n  currentDomainLinking: GlobalState['currentDomainLinking'];\n  byAddress?: Record<string, ApiNft>;\n  tonBalance: bigint;\n  savedAddresses?: SavedAddress[];\n  accounts?: Record<string, Account>;\n  currentTonAddress?: string;\n  currentLinkedWalletAddress?: string;\n}\n\nconst FULL_NATIVE_STATES = new Set([\n  DomainLinkingState.Password,\n  DomainLinkingState.ConnectHardware,\n  DomainLinkingState.ConfirmHardware,\n]);\n\nfunction LinkingDomainModal({\n  currentDomainLinking: {\n    address,\n    state,\n    error,\n    isLoading,\n    realFee,\n    walletAddress = '',\n    walletAddressName = '',\n    resolvedWalletAddress,\n    txId,\n  },\n  isMediaViewerOpen,\n  byAddress,\n  tonBalance,\n  accounts,\n  savedAddresses,\n  currentTonAddress,\n  currentLinkedWalletAddress,\n}: StateProps) {\n  const {\n    startDomainLinking,\n    cancelDomainLinking,\n    clearDomainLinkingError,\n    submitDomainLinking,\n    submitDomainLinkingHardware,\n    checkDomainLinkingDraft,\n    checkLinkingAddress,\n    setDomainLinkingWalletAddress,\n    showActivityInfo,\n  } = getActions();\n\n  const lang = useLang();\n\n  const isOpen = state !== DomainLinkingState.None && !isMediaViewerOpen;\n  const { renderingKey, nextKey } = useModalTransitionKeys(state ?? 0, isOpen);\n  const domainNft = address ? byAddress?.[address] : undefined;\n  const isInsufficientBalance = realFee ? tonBalance < realFee : undefined;\n  const forceFullNative = FULL_NATIVE_STATES.has(renderingKey);\n  const feeTerms = useMemo(() => (realFee ? { native: realFee } : undefined), [realFee]);\n  const modalTitle = currentLinkedWalletAddress ? 'Change Linked Wallet' : 'Link to Wallet';\n  const isAddressValid = isValidAddressOrDomain(walletAddress, 'ton');\n\n  const handleWalletAddressInput = useLastCallback((newToAddress?: string) => {\n    setDomainLinkingWalletAddress({ address: newToAddress });\n  });\n\n  const canSubmit = isAddressValid && walletAddress !== currentLinkedWalletAddress\n    && !isInsufficientBalance && !isLoading;\n\n  useSyncEffectWithPrevDeps(([prevIsOpen]) => {\n    if (!prevIsOpen && isOpen) {\n      handleWalletAddressInput(walletAddress || currentLinkedWalletAddress || currentTonAddress);\n    }\n  }, [isOpen, currentLinkedWalletAddress, walletAddress, currentTonAddress]);\n\n  useEffect(() => {\n    if (isOpen) {\n      checkDomainLinkingDraft({ nft: domainNft! });\n    }\n  }, [domainNft, isOpen]);\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    if (canSubmit) {\n      submitDomainLinking({ password });\n    }\n  });\n\n  const handleHardwareSubmit = useLastCallback(() => {\n    if (canSubmit) {\n      submitDomainLinkingHardware();\n    }\n  });\n\n  const handleInfoClick = useLastCallback(() => {\n    cancelDomainLinking();\n    showActivityInfo({ id: txId! });\n  });\n\n  function renderInitialContent() {\n    return (\n      <>\n        <ModalHeader title={lang(modalTitle)} onClose={cancelDomainLinking} />\n\n        <div className={modalStyles.transitionContent}>\n          <div className={styles.nftContainer}>\n            <NftInfo nft={domainNft} withMediaViewer />\n\n            <AddressInput\n              withQrScan\n              value={walletAddress}\n              // It is necessary to allow linking of current wallet address to the domain, so pass an empty string\n              currentAccountId=\"\"\n              // Domain linking is available only for TON blockchain\n              addressBookChain=\"ton\"\n              chain=\"ton\"\n              accounts={accounts}\n              savedAddresses={savedAddresses}\n              validateAddress={checkLinkingAddress}\n              label={currentLinkedWalletAddress ? lang('Linked Wallet') : lang('Wallet')}\n              address={resolvedWalletAddress || walletAddress}\n              addressName={walletAddressName}\n              onInput={handleWalletAddressInput}\n              onClose={cancelDomainLinking}\n            />\n          </div>\n\n          <FeeLine terms={feeTerms} token={TONCOIN} precision=\"exact\" />\n          <div className={buildClassName(modalStyles.buttons, styles.footer)}>\n            <Button\n              isPrimary\n              isDestructive={isInsufficientBalance}\n              isDisabled={!canSubmit}\n              isLoading={!realFee || isLoading}\n              className={styles.button}\n              onClick={startDomainLinking}\n            >\n              {isInsufficientBalance\n                ? lang('Insufficient Balance')\n                : lang('Link')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderPasswordForm(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && <ModalHeader title={lang('Confirm Linking')} onClose={cancelDomainLinking} />}\n        <PasswordForm\n          isActive={isActive}\n          error={error}\n          isLoading={isLoading}\n          submitLabel={lang('Confirm')}\n          cancelLabel={lang('Cancel')}\n          onSubmit={handlePasswordSubmit}\n          onCancel={cancelDomainLinking}\n          onUpdate={clearDomainLinkingError}\n          skipAuthScreen\n        >\n          <TransactionBanner\n            imageUrl={domainNft?.thumbnail}\n            text={domainNft?.name ?? '1 domain'}\n            className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n          />\n        </PasswordForm>\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Domain has been linked!')} onClose={cancelDomainLinking} />\n\n        <div className={modalStyles.transitionContent}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n            previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n          />\n          <NftInfo nft={domainNft} withMediaViewer />\n          {!!txId && (\n            <div className={buildClassName(styles.buttons, styles.buttonsAfterNft)}>\n              <Button onClick={handleInfoClick}>{lang('Details')}</Button>\n            </div>\n          )}\n\n          <div className={modalStyles.buttons}>\n            <Button className={styles.button} onClick={cancelDomainLinking} isPrimary>\n              {lang('Close')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: DomainLinkingState) {\n    switch (currentKey) {\n      case DomainLinkingState.Initial:\n        return renderInitialContent();\n\n      case DomainLinkingState.Password:\n        return renderPasswordForm(isActive);\n\n      case DomainLinkingState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleHardwareSubmit}\n            onClose={cancelDomainLinking}\n          />\n        );\n\n      case DomainLinkingState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={cancelDomainLinking}\n            onTryAgain={handleHardwareSubmit}\n          />\n        );\n\n      case DomainLinkingState.Complete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      nativeBottomSheetKey=\"link-domain\"\n      forceFullNative={forceFullNative}\n      dialogClassName={styles.modalDialog}\n      onClose={cancelDomainLinking}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const {\n      currentDomainLinking,\n      mediaViewer: { mediaId },\n    } = global;\n    const currentAccount = selectCurrentAccount(global);\n    const accountState = selectCurrentAccountState(global);\n    const { byAddress } = accountState?.nfts || {};\n    const domainNft = currentDomainLinking.address ? byAddress?.[currentDomainLinking.address] : undefined;\n    const currentLinkedWalletAddress = domainNft ? selectTonDnsLinkedAddress(global, domainNft) : '';\n\n    return {\n      isMediaViewerOpen: Boolean(mediaId),\n      currentDomainLinking,\n      byAddress,\n      tonBalance: selectCurrentToncoinBalance(global),\n      accounts: selectNetworkAccounts(global),\n      savedAddresses: accountState?.savedAddresses,\n      currentLinkedWalletAddress,\n      currentTonAddress: currentAccount?.addressByChain.ton,\n    };\n  })(LinkingDomainModal),\n);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { NftTransfer } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport styles from './NftChips.module.scss';\n\ninterface OwnProps {\n  nfts: NftTransfer[];\n  isStatic?: boolean;\n  className?: string;\n}\n\nconst LIMIT = 10;\n\nfunction NftChips({ nfts, isStatic, className }: OwnProps) {\n  const lang = useLang();\n  const [isCollapsed, , expand] = useFlag(true);\n  const shouldRenderExpander = isCollapsed && nfts.length > LIMIT + 1;\n  const renderedNfts = useMemo(\n    () => (shouldRenderExpander ? nfts.slice(0, LIMIT) : nfts),\n    [shouldRenderExpander, nfts],\n  );\n\n  function renderNft(nft: NftTransfer) {\n    return (\n      <div key={nft.address} className={styles.nft}>\n        <img src={nft.thumbnail} alt={nft.name} className={styles.image} />\n        <span className={styles.name}>{nft.name || nft.address}</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.root, isStatic && styles.static, 'custom-scroll', className)}>\n      {renderedNfts.map(renderNft)}\n      {shouldRenderExpander && (\n        <button type=\"button\" className={styles.expander} onClick={() => expand()}>\n          +{lang('%amount% NFTs', { amount: nfts.length - LIMIT })}\n        </button>\n      )}\n    </div>\n  );\n}\n\nexport default memo(NftChips);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"OW45fd9i\",\"static\":\"h6wiRr_r\",\"nft\":\"HmnTdlh8\",\"image\":\"H3EA9Tak\",\"name\":\"_gZbYTeY\",\"expander\":\"T7bQHi3K\"};","import React, { memo, useEffect, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\nimport type { GlobalState } from '../../global/types';\nimport { DomainRenewalState } from '../../global/types';\n\nimport { TONCOIN } from '../../config';\nimport { selectCurrentAccountState, selectCurrentToncoinBalance } from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { formatFullDay, formatTime, MINUTE, YEAR } from '../../util/dateFormat';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport NftChips from '../transfer/NftChips';\nimport NftInfo from '../transfer/NftInfo';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport FeeLine from '../ui/FeeLine';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './RenewDomainModal.module.scss';\n\ninterface StateProps {\n  isMediaViewerOpen?: boolean;\n  currentDomainRenewal: GlobalState['currentDomainRenewal'];\n  byAddress?: Record<string, ApiNft>;\n  tonBalance: bigint;\n}\n\nconst FULL_NATIVE_STATES = new Set([\n  DomainRenewalState.Password,\n  DomainRenewalState.ConnectHardware,\n  DomainRenewalState.ConfirmHardware,\n]);\n\nconst THUMBNAILS_COUNT = 3;\n\nfunction RenewDomainModal({\n  currentDomainRenewal: {\n    addresses,\n    state,\n    error,\n    isLoading,\n    realFee,\n    txId,\n  },\n  isMediaViewerOpen,\n  byAddress,\n  tonBalance,\n}: StateProps) {\n  const {\n    startDomainsRenewal,\n    cancelDomainsRenewal,\n    clearDomainsRenewalError,\n    submitDomainsRenewal,\n    submitDomainsRenewalHardware,\n    checkDomainsRenewalDraft,\n    showActivityInfo,\n  } = getActions();\n\n  const lang = useLang();\n  const forceUpdate = useForceUpdate();\n\n  const isOpen = state !== DomainRenewalState.None && !isMediaViewerOpen;\n  const { renderingKey, nextKey } = useModalTransitionKeys(state ?? 0, isOpen);\n  const domainNfts = useMemo(() => {\n    return (addresses || []).map((address) => byAddress?.[address]).filter<ApiNft>(Boolean);\n  }, [addresses, byAddress]);\n  const isInsufficientBalance = realFee ? tonBalance < realFee : undefined;\n  const forceFullNative = FULL_NATIVE_STATES.has(renderingKey);\n  const feeTerms = useMemo(() => (realFee ? { native: realFee } : undefined), [realFee]);\n  const newExpireTimestamp = Date.now() + YEAR;\n  const domainNftThumbnails = useMemo(() => {\n    return domainNfts.map((nft) => nft?.thumbnail).filter(Boolean).slice(0, THUMBNAILS_COUNT);\n  }, [domainNfts]);\n\n  useInterval(forceUpdate, isOpen ? MINUTE : undefined, true);\n  useEffect(() => {\n    if (isOpen) {\n      checkDomainsRenewalDraft({ nfts: domainNfts });\n    }\n  }, [domainNfts, isOpen]);\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    submitDomainsRenewal({ password });\n  });\n\n  const handleHardwareSubmit = useLastCallback(() => {\n    submitDomainsRenewalHardware();\n  });\n\n  const handleInfoClick = useLastCallback(() => {\n    cancelDomainsRenewal();\n    showActivityInfo({ id: txId! });\n  });\n\n  function renderHeader() {\n    return (\n      <div className={buildClassName(modalStyles.header, modalStyles.header_wideContent)}>\n        <div className={buildClassName(modalStyles.title, styles.modalTitle)}>\n          <div className={styles.headerTitle}>\n            {lang(addresses && addresses.length > 1 ? 'Renew Domains' : 'Renew Domain')}\n          </div>\n          {!!newExpireTimestamp && (\n            <div className={styles.headerDate}>\n              {lang('Until %date%', {\n                date: [formatFullDay(lang.code!, newExpireTimestamp), formatTime(newExpireTimestamp)].join(', '),\n              })}\n            </div>\n          )}\n        </div>\n        <Button isRound className={modalStyles.closeButton} ariaLabel={lang('Close')} onClick={cancelDomainsRenewal}>\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </Button>\n      </div>\n    );\n  }\n\n  function renderInitialContent() {\n    return (\n      <div className={modalStyles.transitionContent}>\n        <div className={styles.nftContainer}>\n          {domainNfts.length === 1 && <NftInfo nft={domainNfts[0]} withMediaViewer />}\n          {domainNfts.length > 1 && <NftChips nfts={domainNfts} className={styles.multiNftChips} />}\n        </div>\n\n        <FeeLine terms={feeTerms} token={TONCOIN} precision=\"exact\" />\n        <div className={buildClassName(modalStyles.buttons, styles.footer)}>\n          <Button\n            isPrimary\n            isDestructive={isInsufficientBalance}\n            isDisabled={isInsufficientBalance}\n            isLoading={!realFee || isLoading}\n            className={styles.button}\n            onClick={startDomainsRenewal}\n          >\n            {isInsufficientBalance\n              ? lang('Insufficient Balance')\n              : domainNfts.length > 1\n                ? lang('Renew All')\n                : lang('Renew')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  function renderPasswordForm(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && <ModalHeader title={lang('Confirm Renewing')} onClose={cancelDomainsRenewal} />}\n        <PasswordForm\n          isActive={isActive}\n          error={error}\n          isLoading={isLoading}\n          submitLabel={lang('Confirm')}\n          cancelLabel={lang('Cancel')}\n          onSubmit={handlePasswordSubmit}\n          onCancel={cancelDomainsRenewal}\n          onUpdate={clearDomainsRenewalError}\n          skipAuthScreen\n        >\n          <TransactionBanner\n            imageUrl={domainNftThumbnails}\n            text={\n              domainNfts.length === 1 && Boolean(domainNfts[0]?.name)\n                ? domainNfts[0]?.name\n                : lang('$domains_amount %1$d', domainNfts.length, 'i')\n            }\n            className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n          />\n        </PasswordForm>\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader\n          title={domainNfts.length > 1 ? lang('Domains have been renewed!') : lang('Domain has been renewed!')}\n          onClose={cancelDomainsRenewal}\n        />\n\n        <div className={modalStyles.transitionContent}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n            previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n          />\n          <div className={styles.nftContainer}>\n            {domainNfts.length === 1 && <NftInfo nft={domainNfts[0]} withMediaViewer />}\n            {domainNfts.length > 1 && <NftChips nfts={domainNfts} />}\n\n            {domainNfts.length === 1 && !!txId && (\n              <div className={buildClassName(styles.buttons, styles.buttonsAfterNft)}>\n                <Button onClick={handleInfoClick}>{lang('Details')}</Button>\n              </div>\n            )}\n          </div>\n\n          <div className={modalStyles.buttons}>\n            <Button onClick={cancelDomainsRenewal} isPrimary>\n              {lang('Close')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: DomainRenewalState) {\n    switch (currentKey) {\n      case DomainRenewalState.Initial:\n        return (\n          <>\n            {renderHeader()}\n            {renderInitialContent()}\n          </>\n        );\n\n      case DomainRenewalState.Password:\n        return renderPasswordForm(isActive);\n\n      case DomainRenewalState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleHardwareSubmit}\n            onClose={cancelDomainsRenewal}\n          />\n        );\n\n      case DomainRenewalState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={cancelDomainsRenewal}\n            onTryAgain={handleHardwareSubmit}\n          />\n        );\n\n      case DomainRenewalState.Complete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      nativeBottomSheetKey=\"renew-domain\"\n      forceFullNative={forceFullNative}\n      dialogClassName={styles.modalDialog}\n      onClose={cancelDomainsRenewal}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const {\n      currentDomainRenewal,\n      mediaViewer: { mediaId },\n    } = global;\n    const { byAddress } = selectCurrentAccountState(global)?.nfts || {};\n\n    return {\n      isMediaViewerOpen: Boolean(mediaId),\n      currentDomainRenewal,\n      byAddress,\n      tonBalance: selectCurrentToncoinBalance(global),\n    };\n  })(RenewDomainModal),\n);\n","// https://github.com/toncenter/tonweb/blob/944455da2effaa307a2030d00e19a37e6e94897c/src/utils/index.js#L94-L109\nexport default function formatTransferUrl(address: string, amount?: bigint, text?: string, jettonAddress?: string) {\n  const url = `ton://transfer/${address}`;\n\n  const params = [];\n\n  if (amount) {\n    params.push(`amount=${amount}`);\n  }\n  if (text) {\n    params.push(`text=${encodeURIComponent(text)}`);\n  }\n  if (jettonAddress) {\n    params.push(`jetton=${encodeURIComponent(jettonAddress)}`);\n  }\n\n  if (params.length === 0) return url;\n\n  return `${url}?${params.join('&')}`;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"ZSZY1phv\",\"slide\":\"vCCqOvOq\",\"button\":\"XIxoy7tw\",\"tokenIcon\":\"SS8KpgmL\",\"content\":\"ISsYr_9r\",\"chevronIcon\":\"D_7DrGaN\"};","import React, { memo, useLayoutEffect, useRef } from '../../lib/teact/teact';\nimport { setExtraStyles } from '../../lib/teact/teact-dom';\n\nimport type { ApiToken } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { REM } from '../../util/windowEnvironment';\n\nimport useSyncEffect from '../../hooks/useSyncEffect';\n\nimport Transition from '../ui/Transition';\nimport TokenIcon from './TokenIcon';\n\nimport styles from './SelectTokenButton.module.scss';\n\ninterface OwnProps {\n  token?: ApiToken;\n  noChainIcon?: boolean;\n  className?: string;\n  onClick: NoneToVoidFunction;\n}\n\nfunction SelectTokenButton({\n  token, className, noChainIcon, onClick,\n}: OwnProps) {\n  const { transitionRef } = useSelectorWidth(token);\n  const buttonTransitionKeyRef = useRef(0);\n  const buttonStateStr = `${token?.symbol}_${token?.chain}`;\n\n  useSyncEffect(() => {\n    buttonTransitionKeyRef.current++;\n  }, [buttonStateStr]);\n\n  function handleClick(e: React.MouseEvent<HTMLButtonElement>) {\n    stopEvent(e);\n\n    onClick();\n  }\n\n  function renderToken(tokenToRender?: ApiToken) {\n    return (\n      <Transition\n        ref={transitionRef}\n        name=\"fade\"\n        activeKey={buttonTransitionKeyRef.current}\n        className={buildClassName(styles.wrapper, className)}\n        slideClassName={styles.slide}\n      >\n        <button\n          type=\"button\"\n          className={styles.button}\n          onClick={handleClick}\n        >\n          {tokenToRender && (\n            <TokenIcon\n              token={tokenToRender}\n              withChainIcon={!noChainIcon}\n              size=\"middle\"\n              className={styles.tokenIcon}\n            />\n          )}\n          <div className={styles.content}>\n            <span>{tokenToRender?.symbol}</span>\n            <i className={buildClassName('icon-chevron-right', styles.chevronIcon)} aria-hidden />\n          </div>\n        </button>\n      </Transition>\n    );\n  }\n\n  return renderToken(token);\n}\n\nexport default memo(SelectTokenButton);\n\nconst BUTTON_WIDTH = 70 / REM;\nconst CHARACTER_WIDTH = 10;\n\nfunction useSelectorWidth(token?: ApiToken) {\n  const transitionRef = useRef<HTMLDivElement>();\n\n  useLayoutEffect(() => {\n    if (!transitionRef.current || !token) return;\n\n    const symbolWidth = (token.symbol.length * CHARACTER_WIDTH) / REM;\n    const minWidth = `${symbolWidth + BUTTON_WIDTH}rem`;\n\n    setExtraStyles(transitionRef.current, {\n      minWidth,\n    });\n  }, [token]);\n\n  return {\n    transitionRef,\n  };\n}\n","const NETWORK_NAMES_EXCEPTIONS: Record<string, string> = {\n  binance_smart_chain: 'Binance Smart Chain',\n  internet_computer: 'Internet Computer',\n  ethereum_classic: 'Ethereum Classic',\n  bitcoin_cash: 'Bitcoin Cash',\n  binance_dex: 'Binance Dex',\n  ton: 'TON',\n  bitcoin: 'Bitcoin',\n  ethereum: 'Ethereum',\n  solana: 'Solana',\n  tron: 'TRON',\n  stellar: 'Stellar',\n  doge: 'DOGE',\n  eos: 'EOS',\n  avalanche: 'Avalanche',\n  cardano: 'Cardano',\n  monero: 'Monero',\n  dash: 'Dash',\n  ripple: 'Ripple',\n  cosmos: 'Cosmos',\n  litecoin: 'Litecoin',\n  zcash: 'Zcash',\n  polkadot: 'Polkadot',\n  iota: 'IOTA',\n};\n\nexport default function getChainNetworkName(networkName?: string) {\n  if (!networkName) return '';\n\n  return NETWORK_NAMES_EXCEPTIONS[networkName] ?? networkName;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"tokenSelectInputWrapper\":\"oCuiJXQ_\",\"tokenSelectSearchIcon\":\"zftr1vD0\",\"tokenSelectSearchResetWrapper\":\"Ss4Pd7B2\",\"tokenSelectSearchReset\":\"oDrN01CP\",\"tokenSelectSearchResetIcon\":\"ok_5nHql\",\"tokenSelectInput\":\"fDjHi6pe\",\"tokenSelectContent\":\"LodBlyss\",\"tokenGroupContainer\":\"MbjJDq0G\",\"tokenGroupHeader\":\"RpUAt2yS\",\"tokenGroupTitle\":\"WhzSaV_6\",\"tokenGroupAdditionalTitle\":\"FdHSpaSV\",\"tokenContainer\":\"eUkSUO8W\",\"tokenContainerDisabled\":\"tHJSsGRH\",\"tokenLogoContainer\":\"nsViIoST\",\"logoContainer\":\"adBlSlrG\",\"tokenLogoSkeleton\":\"cGf45x9B\",\"tokenLogoSymbol\":\"PSK73bRe\",\"tokenLogo\":\"xiUmZwCy\",\"tokenLogoDisabled\":\"OwvlXRrn\",\"tokenNetworkLogoSkeleton\":\"MO1xaZfl\",\"nameContainer\":\"ZPTo397c\",\"tokenPriceContainer\":\"qGxMTfbW\",\"tokenName\":\"Wgp2h4bc\",\"tokenAmount\":\"QWmp5WQP\",\"tokenNetwork\":\"gBNLwjjP\",\"tokenValue\":\"S1V0VVx3\",\"tokenNameSkeleton\":\"GkqdgXVp\",\"tokenValueSkeleton\":\"AhEbK2G0\",\"tokenNotFound\":\"zp0dyh68\",\"tokenNotFoundTitle\":\"R7aa_jfY\",\"tokenNotFoundDesc\":\"XlzS0_qG\",\"tokenTextDisabled\":\"lotwVvdo\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo,\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiChain } from '../../api/types';\nimport {\n  type AssetPairs, SettingsState, type UserSwapToken, type UserToken,\n} from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_MIDDLE_SIZE_PX, TON_USDT_SLUG, TRC20_USDT_MAINNET_SLUG, TRC20_USDT_TESTNET_SLUG,\n} from '../../config';\nimport {\n  selectAvailableUserForSwapTokens,\n  selectCurrentAccount,\n  selectIsMultichainAccount,\n  selectPopularTokens,\n  selectSwapTokens,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport getPseudoRandomNumber from '../../util/getPseudoRandomNumber';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { disableSwipeToClose, enableSwipeToClose } from '../../util/modalSwipeManager';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\nimport useSyncEffect from '../../hooks/useSyncEffect';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport ModalHeader from '../ui/ModalHeader';\nimport SensitiveData from '../ui/SensitiveData';\nimport Transition from '../ui/Transition';\nimport TokenIcon from './TokenIcon';\n\nimport styles from './TokenSelector.module.scss';\n\ntype TokenType = UserToken | UserSwapToken;\n\ntype TokenSortFactors = {\n  tickerExactMatch: number;\n  tickerMatchLength: number;\n  nameMatchLength: number;\n  specialOrder: number;\n};\n\ninterface OwnProps {\n  isActive?: boolean;\n  shouldFilter?: boolean;\n  shouldUseSwapTokens?: boolean;\n  shouldHideMyTokens?: boolean;\n  shouldHideNotSupportedTokens?: boolean;\n  selectedChain?: ApiChain;\n  header?: TeactNode;\n  onClose: NoneToVoidFunction;\n  onBack: NoneToVoidFunction;\n  onTokenSelect: (token: TokenType) => void;\n}\n\ninterface StateProps {\n  token?: TokenType;\n  userTokens?: TokenType[];\n  popularTokens?: TokenType[];\n  swapTokens?: UserSwapToken[];\n  tokenInSlug?: string;\n  pairsBySlug?: Record<string, AssetPairs>;\n  baseCurrency?: ApiBaseCurrency;\n  isLoading?: boolean;\n  isMultichain: boolean;\n  availableChains?: Partial<Record<ApiChain, unknown>>;\n  isSensitiveDataHidden?: true;\n}\n\nenum SearchState {\n  Initial,\n  Search,\n  Loading,\n  TokenByAddress,\n  Empty,\n}\n\nconst EMPTY_ARRAY: never[] = [];\nconst EMPTY_OBJECT = {};\n\nfunction TokenSelector({\n  token,\n  userTokens: userTokensProp = EMPTY_ARRAY,\n  swapTokens = EMPTY_ARRAY,\n  popularTokens: popularTokensProp = EMPTY_ARRAY,\n  header,\n  shouldFilter,\n  shouldUseSwapTokens,\n  baseCurrency,\n  tokenInSlug,\n  pairsBySlug,\n  isActive,\n  isLoading,\n  shouldHideMyTokens,\n  shouldHideNotSupportedTokens = false,\n  isMultichain,\n  availableChains = EMPTY_OBJECT,\n  selectedChain,\n  isSensitiveDataHidden,\n  onTokenSelect,\n  onBack,\n  onClose,\n}: OwnProps & StateProps) {\n  const { importToken, resetImportToken, openSettingsWithState } = getActions();\n  const lang = useLang();\n\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n  const scrollContainerRef = useRef<HTMLDivElement>();\n  const searchInputRef = useRef<HTMLInputElement>();\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  useEffect(() => {\n    if (!isActive) return undefined;\n\n    disableSwipeToClose();\n\n    return enableSwipeToClose;\n  }, [isActive]);\n\n  useFocusAfterAnimation(searchInputRef, !isActive);\n\n  const {\n    handleScroll: handleContentScroll,\n  } = useScrolledState();\n\n  const [searchValue, setSearchValue] = useState('');\n  const [isResetButtonVisible, setIsResetButtonVisible] = useState(false);\n  const [renderingKey, setRenderingKey] = useState(SearchState.Initial);\n  const [searchTokenList, setSearchTokenList] = useState<TokenType[]>([]);\n\n  // It is necessary to use useCallback instead of useLastCallback here\n  const filterTokens = useCallback((tokens: TokenType[]) => {\n    return filterAndSortTokens(tokens, isMultichain, tokenInSlug, pairsBySlug);\n  }, [pairsBySlug, tokenInSlug, isMultichain]);\n\n  const userTokens = useMemo(\n    () => filterSupportedTokens(userTokensProp, shouldHideNotSupportedTokens, availableChains, selectedChain),\n    [userTokensProp, shouldHideNotSupportedTokens, availableChains, selectedChain],\n  );\n\n  const allTokens = useMemo(\n    () => filterSupportedTokens(swapTokens, shouldHideNotSupportedTokens, availableChains, selectedChain),\n    [swapTokens, shouldHideNotSupportedTokens, availableChains, selectedChain],\n  );\n\n  const popularTokens = useMemo(\n    () => filterSupportedTokens(popularTokensProp, shouldHideNotSupportedTokens, availableChains, selectedChain),\n    [popularTokensProp, shouldHideNotSupportedTokens, availableChains, selectedChain],\n  );\n\n  const { userTokensWithFilter, popularTokensWithFilter, swapTokensWithFilter } = useMemo(() => {\n    if (!shouldFilter) {\n      return {\n        userTokensWithFilter: userTokens,\n        popularTokensWithFilter: popularTokens,\n        swapTokensWithFilter: swapTokens,\n      };\n    }\n\n    return {\n      userTokensWithFilter: filterTokens(userTokens),\n      popularTokensWithFilter: filterTokens(popularTokens),\n      swapTokensWithFilter: filterTokens(swapTokens),\n    };\n  }, [filterTokens, popularTokens, shouldFilter, swapTokens, userTokens]);\n\n  const filteredTokenList = useMemo(() => {\n    const tokensToFilter = shouldUseSwapTokens ? swapTokensWithFilter : allTokens;\n    const untrimmedSearchValue = searchValue.toLowerCase();\n    const lowerCaseSearchValue = untrimmedSearchValue.trim();\n\n    if (untrimmedSearchValue.length && !lowerCaseSearchValue.length) {\n      return [];\n    }\n\n    const filteredTokens = tokensToFilter.filter(({\n      name, symbol, keywords, isDisabled,\n    }) => {\n      if (isDisabled) {\n        return false;\n      }\n\n      const isName = name.toLowerCase().includes(lowerCaseSearchValue);\n      const isSymbol = symbol.toLowerCase().includes(lowerCaseSearchValue);\n      const isKeyword = keywords?.some((key) => key.toLowerCase().includes(lowerCaseSearchValue));\n\n      return isName || isSymbol || isKeyword;\n    }) ?? [];\n\n    const sortFactors = filteredTokens.reduce((acc, searchResultToken) => {\n      const factors = {\n        tickerExactMatch: 0,\n        tickerMatchLength: 0,\n        nameMatchLength: 0,\n        specialOrder: 0, // The higher the value, the higher the position\n      };\n\n      const tokenSymbol = searchResultToken.symbol.toLowerCase();\n      const tokenName = searchResultToken.name.toLowerCase();\n\n      if (tokenSymbol === lowerCaseSearchValue) {\n        factors.tickerExactMatch = 1;\n      }\n\n      if (tokenSymbol.includes(lowerCaseSearchValue)) {\n        factors.tickerMatchLength = lowerCaseSearchValue.length;\n      }\n\n      if (tokenName.includes(lowerCaseSearchValue)) {\n        factors.nameMatchLength = lowerCaseSearchValue.length;\n      }\n\n      if (searchResultToken.slug === TON_USDT_SLUG) {\n        factors.specialOrder = 2;\n      }\n\n      if (searchResultToken.slug === TRC20_USDT_MAINNET_SLUG || searchResultToken.slug === TRC20_USDT_TESTNET_SLUG) {\n        factors.specialOrder = 1;\n      }\n\n      acc[searchResultToken.slug] = factors;\n\n      return acc;\n    }, {} as Record<string, TokenSortFactors>);\n\n    return filteredTokens.sort((a, b) => {\n      const factorA = sortFactors[a.slug];\n      const factorB = sortFactors[b.slug];\n      const comparisonResult = compareTokens(factorA, factorB);\n      if (comparisonResult !== 0) return comparisonResult;\n\n      return Number(b.amount - a.amount);\n    });\n  }, [allTokens, shouldUseSwapTokens, searchValue, swapTokensWithFilter]);\n\n  const resetSearch = () => {\n    setSearchValue('');\n  };\n\n  useSyncEffect(() => {\n    setIsResetButtonVisible(Boolean(searchValue.length));\n\n    const isValidAddress = isValidAddressOrDomain(searchValue, 'ton');\n    let newRenderingKey = SearchState.Initial;\n\n    if (isLoading && isValidAddress) {\n      newRenderingKey = SearchState.Loading;\n    } else if (token && isValidAddress) {\n      newRenderingKey = SearchState.TokenByAddress;\n    } else if (searchValue.length && filteredTokenList.length !== 0) {\n      newRenderingKey = SearchState.Search;\n    } else if (filteredTokenList.length === 0) {\n      newRenderingKey = SearchState.Empty;\n    }\n\n    setRenderingKey(newRenderingKey);\n\n    if (newRenderingKey !== SearchState.Initial) {\n      setSearchTokenList(filteredTokenList);\n    }\n  }, [searchTokenList.length, isLoading, searchValue, token, filteredTokenList]);\n\n  useEffect(() => {\n    if ('ton' in availableChains && isValidAddressOrDomain(searchValue, 'ton')) {\n      importToken({ address: searchValue, isSwap: true });\n      setRenderingKey(SearchState.Loading);\n    } else {\n      resetImportToken();\n    }\n  }, [searchValue, availableChains]);\n\n  useLayoutEffect(() => {\n    if (!isActive || !scrollContainerRef.current) return;\n\n    scrollContainerRef.current.scrollTop = 0;\n  }, [isActive]);\n\n  const handleTokenClick = useLastCallback((selectedToken: TokenType) => {\n    searchInputRef.current?.blur();\n\n    onTokenSelect(selectedToken);\n\n    resetSearch();\n\n    onBack();\n  });\n\n  const handleOpenSettings = useLastCallback(() => {\n    onClose();\n    openSettingsWithState({ state: SettingsState.Assets });\n  });\n\n  function renderSearch() {\n    return (\n      <div className={styles.tokenSelectInputWrapper}>\n        <i className={buildClassName(styles.tokenSelectSearchIcon, 'icon-search')} aria-hidden />\n        <input\n          ref={searchInputRef}\n          name=\"token-search-modal\"\n          className={styles.tokenSelectInput}\n          onChange={(e) => setSearchValue(e.target.value)}\n          placeholder={lang('Name or Address...')}\n          value={searchValue}\n        />\n        <Transition\n          name=\"fade\"\n          activeKey={isResetButtonVisible ? 0 : 1}\n          className={styles.tokenSelectSearchResetWrapper}\n        >\n          {isResetButtonVisible && (\n            <button\n              type=\"button\"\n              className={styles.tokenSelectSearchReset}\n              aria-label={lang('Clear')}\n              onClick={resetSearch}\n            >\n              <i className={buildClassName(styles.tokenSelectSearchResetIcon, 'icon-close')} aria-hidden />\n            </button>\n          )}\n        </Transition>\n      </div>\n    );\n  }\n\n  function renderToken(currentToken: TokenType) {\n    const isAvailable = Boolean(!shouldFilter || currentToken.canSwap);\n    const withChainIcon = Boolean((isMultichain || shouldUseSwapTokens) && !selectedChain);\n    const descriptionText = isAvailable\n      ? getChainNetworkName(currentToken.chain)\n      : lang('Unavailable');\n\n    const tokenPrice = currentToken.price === 0\n      ? lang('No Price')\n      : formatCurrency(currentToken.price, shortBaseSymbol, undefined, true);\n\n    return (\n      <Token\n        key={currentToken.slug}\n        isAvailable={isAvailable}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        withChainIcon={withChainIcon}\n        descriptionText={descriptionText}\n        token={currentToken}\n        tokenPrice={tokenPrice}\n        onSelect={handleTokenClick}\n      />\n    );\n  }\n\n  function renderTokenGroup(tokens: TokenType[], title: string, shouldShowSettings?: boolean) {\n    return (\n      <div className={styles.tokenGroupContainer}>\n        <div className={styles.tokenGroupHeader}>\n          <span className={styles.tokenGroupTitle}>{title}</span>\n          {shouldShowSettings && (\n            <span\n              className={styles.tokenGroupAdditionalTitle}\n              onClick={handleOpenSettings}\n            >\n              {lang('Settings')}\n            </span>\n          )}\n        </div>\n        {tokens.map(renderToken)}\n      </div>\n    );\n  }\n\n  function renderAllTokens(tokens: TokenType[]) {\n    return (\n      <div className={styles.tokenGroupContainer}>\n        {tokens.map(renderToken)}\n      </div>\n    );\n  }\n\n  function renderTokenSkeleton() {\n    return (\n      <div className={buildClassName(styles.tokenContainer, styles.tokenContainerDisabled)}>\n        <div className={styles.tokenLogoContainer}>\n          <div className={styles.logoContainer}>\n            <div className={styles.tokenLogoSkeleton} />\n            <div className={styles.tokenNetworkLogoSkeleton} />\n          </div>\n          <div className={styles.nameContainer}>\n            <span className={styles.tokenNameSkeleton} />\n            <span className={styles.tokenValueSkeleton} />\n          </div>\n        </div>\n        <div className={styles.tokenPriceContainer}>\n          <span className={buildClassName(styles.tokenNameSkeleton, styles.rotateSkeleton)} />\n          <span className={styles.tokenValueSkeleton} />\n        </div>\n      </div>\n    );\n  }\n\n  function renderNotFound(shouldPlay: boolean) {\n    return (\n      <div className={styles.tokenNotFound}>\n        <AnimatedIconWithPreview\n          play={shouldPlay}\n          tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n          previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n          size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n          noLoop={false}\n          nonInteractive\n        />\n        <span className={styles.tokenNotFoundTitle}>{lang('Not Found')}</span>\n        <span className={styles.tokenNotFoundDesc}>{lang('Try another keyword or address.')}</span>\n      </div>\n    );\n  }\n\n  function renderSearchResults(tokenToImport?: TokenType) {\n    if (tokenToImport) {\n      return (\n        <div className={styles.tokenGroupContainer}>\n          {renderToken(tokenToImport)}\n        </div>\n      );\n    }\n\n    return (\n      <>\n        {renderTokenSkeleton()}\n        {renderTokenSkeleton()}\n        {renderTokenSkeleton()}\n        {renderTokenSkeleton()}\n        {renderTokenSkeleton()}\n      </>\n    );\n  }\n\n  function renderTokenGroups() {\n    return (\n      <>\n        {!shouldHideMyTokens && renderTokenGroup(userTokensWithFilter, lang('MY'), true)}\n        {renderTokenGroup(popularTokensWithFilter, lang('POPULAR'))}\n      </>\n    );\n  }\n\n  function renderContent(isContentActive: boolean, isFrom: boolean, currentKey: SearchState) {\n    switch (currentKey) {\n      case SearchState.Initial:\n        return renderTokenGroups();\n      case SearchState.Loading:\n        return renderSearchResults();\n      case SearchState.Search:\n        return renderAllTokens(searchTokenList);\n      case SearchState.TokenByAddress:\n        return renderSearchResults(token);\n      case SearchState.Empty:\n        return renderNotFound(isContentActive);\n    }\n  }\n\n  return (\n    <>\n      {header || (\n        <ModalHeader\n          title={lang('Select Token')}\n          onBackButtonClick={onBack}\n          onClose={onClose}\n        />\n      )}\n      {renderSearch()}\n\n      <div\n        ref={scrollContainerRef}\n        className={buildClassName(styles.tokenSelectContent, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        <Transition name=\"fade\" activeKey={renderingKey}>\n          {renderContent}\n        </Transition>\n      </div>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { baseCurrency, isSensitiveDataHidden } = global.settings;\n  const { isLoading, token } = global.settings.importToken ?? {};\n  const { tokenInSlug } = global.currentSwap ?? {};\n  const pairsBySlug = global.swapPairs?.bySlug;\n  const userTokens = selectAvailableUserForSwapTokens(global);\n  const popularTokens = selectPopularTokens(global);\n  const swapTokens = selectSwapTokens(global);\n  const isMultichain = selectIsMultichainAccount(global, global.currentAccountId!);\n  const availableChains = selectCurrentAccount(global)?.addressByChain;\n\n  return {\n    baseCurrency,\n    isLoading,\n    token,\n    pairsBySlug,\n    tokenInSlug,\n    userTokens,\n    popularTokens,\n    swapTokens,\n    isMultichain,\n    availableChains,\n    isSensitiveDataHidden,\n  };\n})(TokenSelector));\n\nfunction Token({\n  token,\n  isAvailable,\n  isSensitiveDataHidden,\n  withChainIcon,\n  descriptionText,\n  tokenPrice,\n  onSelect,\n}: {\n  token: TokenType;\n  isAvailable: boolean;\n  isSensitiveDataHidden?: true;\n  withChainIcon: boolean;\n  descriptionText: string;\n  tokenPrice: string;\n  onSelect: (token: TokenType) => void;\n}) {\n  const handleClick = isAvailable ? () => onSelect(token) : undefined;\n  const cols = useMemo(() => getPseudoRandomNumber(4, 10, token.slug), [token.slug]);\n\n  return (\n    <div\n\n      className={buildClassName(\n        styles.tokenContainer,\n        !isAvailable && styles.tokenContainerDisabled,\n      )}\n      onClick={handleClick}\n    >\n      <div className={styles.tokenLogoContainer}>\n        <TokenIcon\n          token={token}\n          withChainIcon={withChainIcon}\n          className={buildClassName(styles.tokenLogo, !isAvailable && styles.tokenLogoDisabled)}\n        />\n\n        <div className={styles.nameContainer}>\n          <span className={buildClassName(styles.tokenName, !isAvailable && styles.tokenTextDisabled)}>\n            {token.name}\n          </span>\n          <span\n            className={buildClassName(\n              styles.tokenNetwork,\n              !isAvailable && styles.tokenTextDisabled,\n            )}\n          >\n            {descriptionText}\n          </span>\n        </div>\n      </div>\n      <div className={styles.tokenPriceContainer}>\n        <SensitiveData\n          isActive={isSensitiveDataHidden}\n          cols={cols}\n          rows={2}\n          cellSize={8}\n          align=\"right\"\n          className={buildClassName(\n            styles.tokenAmount,\n            !isAvailable && styles.tokenTextDisabled,\n          )}\n        >\n          {formatCurrency(toDecimal(token.amount, token?.decimals), token.symbol)}\n        </SensitiveData>\n        <span className={buildClassName(\n          styles.tokenValue,\n          !isAvailable && styles.tokenTextDisabled,\n        )}\n        >\n          {tokenPrice}\n        </span>\n      </div>\n    </div>\n  );\n}\n\nfunction filterAndSortTokens(\n  tokens: TokenType[],\n  isMultichain: boolean,\n  tokenInSlug?: string,\n  pairsBySlug?: Record<string, AssetPairs>,\n) {\n  if (!tokens.length || !tokenInSlug) return [];\n\n  return tokens.map((token) => {\n    const pair = pairsBySlug?.[tokenInSlug]?.[token.slug];\n    const canSwap = Boolean(isMultichain ? pair : (pair && !pair.isMultichain));\n    return { ...token, canSwap };\n  }).sort((a, b) => Number(b.canSwap) - Number(a.canSwap));\n}\n\nfunction compareTokens(a: TokenSortFactors, b: TokenSortFactors) {\n  if (a.specialOrder !== b.specialOrder) {\n    return b.specialOrder - a.specialOrder;\n  }\n  if (a.tickerExactMatch !== b.tickerExactMatch) {\n    return b.tickerExactMatch - a.tickerExactMatch;\n  }\n  if (a.tickerMatchLength !== b.tickerMatchLength) {\n    return b.tickerMatchLength - a.tickerMatchLength;\n  }\n  return b.nameMatchLength - a.nameMatchLength;\n}\n\nfunction filterSupportedTokens<T extends TokenType>(\n  tokens: T[],\n  isFilterActive: boolean,\n  availableChains: Partial<Record<ApiChain, unknown>>,\n  selectedChain?: ApiChain,\n): T[] {\n  if (!isFilterActive && !selectedChain) {\n    return tokens;\n  }\n\n  return tokens.filter((token) => {\n    if (isFilterActive && !(token.chain in availableChains)) {\n      return false;\n    }\n\n    return !(selectedChain && token.chain !== selectedChain);\n  });\n}\n","import { FRACTION_DIGITS, WHOLE_PART_DELIMITER } from '../../../config';\n\nimport styles from '../Input.module.scss';\n\nexport function buildContentHtml(\n  text: string,\n  prefix = '',\n  suffix = '',\n  decimals = FRACTION_DIGITS,\n  withRadix = false,\n) {\n  text = sanitizeHtml(text);\n  prefix = sanitizeHtml(prefix);\n  suffix = sanitizeHtml(suffix);\n\n  if (!text) {\n    return '';\n  }\n\n  const hasDot = text.includes('.');\n  const [wholePart = '0', fractionPart] = hasDot ? text.split('.') : [text];\n\n  const formattedWholePart = withRadix\n    ? wholePart.replace(/\\d(?=(\\d{3})+($|\\.))/g, `$&${WHOLE_PART_DELIMITER}`)\n    : wholePart;\n  const fractionStr = hasDot ? `.${(fractionPart || '').substring(0, decimals)}` : '';\n  const suffixStr = suffix ? `&thinsp;${suffix}` : '';\n  const extraSpan = fractionStr || suffixStr ? (\n    `<span class=\"${styles.fractional}\">${fractionStr}${suffixStr}</span>`\n  ) : '';\n\n  return `${prefix}${formattedWholePart}${extraSpan}`;\n}\n\nfunction sanitizeHtml(string: string) {\n  const tempEl = document.createElement('span');\n  tempEl.textContent = string;\n  return tempEl.innerHTML;\n}\n","import { type ElementRef, useRef } from '../lib/teact/teact';\n\nimport { suppressStrict } from '../lib/fasterdom/stricterdom';\nimport buildClassName from '../util/buildClassName';\nimport useLastCallback from './useLastCallback';\n\nconst MIN_SIZE_SCALE = 0.25; // 12px\n\nfunction useFontScale(inputRef: ElementRef<HTMLElement>, shouldGetParentWidth?: boolean) {\n  const isFontChangedRef = useRef(false);\n  const measureEl = useRef(document.createElement('div'));\n\n  const updateFontScale = useLastCallback(() => {\n    const input = inputRef.current;\n\n    suppressStrict(() => {\n      if (!input?.offsetParent) return;\n\n      let { clientWidth: width } = shouldGetParentWidth ? input.parentElement! : input;\n\n      if (shouldGetParentWidth) {\n        const { paddingLeft, paddingRight } = getComputedStyle(input);\n        width -= parseFloat(paddingLeft) + parseFloat(paddingRight);\n      }\n      measureEl.current.className = buildClassName(input.className, 'measure-hidden');\n      measureEl.current.style.width = `${width}px`;\n      measureEl.current.innerHTML = ''; // `measureEl.current.innerHTML = input.innerHTML` is not used, because it violates the CSP\n      measureEl.current.append(...input.cloneNode(true).childNodes);\n      document.body.appendChild(measureEl.current);\n\n      let scale = 1;\n\n      while (scale > MIN_SIZE_SCALE) {\n        measureEl.current.style.setProperty('--font-size-scale', scale.toString());\n\n        if (measureEl.current.scrollWidth <= width) break;\n        scale -= 0.05;\n      }\n\n      isFontChangedRef.current = scale < 1;\n      document.body.removeChild(measureEl.current);\n      measureEl.current.className = '';\n      input.style.setProperty('--font-size-scale', scale.toString());\n    });\n  });\n\n  return { updateFontScale, isFontChangedRef };\n}\n\nexport default useFontScale;\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useLayoutEffect, useRef } from '../../lib/teact/teact';\n\nimport { FRACTION_DIGITS } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { saveCaretPosition } from '../../util/saveCaretPosition';\nimport { buildContentHtml } from './helpers/buildContentHtml';\n\nimport useFlag from '../../hooks/useFlag';\nimport useFontScale from '../../hooks/useFontScale';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './Input.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  labelText?: TeactNode;\n  value?: string;\n  hasError?: boolean;\n  isLoading?: boolean;\n  prefix?: string;\n  suffix?: string;\n  className?: string;\n  inputClassName?: string;\n  labelClassName?: string;\n  valueClassName?: string;\n  cornerClassName?: string;\n  children?: TeactNode;\n  onChange?: (value?: string) => void;\n  onBlur?: NoneToVoidFunction;\n  onFocus?: NoneToVoidFunction;\n  onPressEnter?: (e: React.KeyboardEvent<HTMLDivElement>) => void;\n  /** Expected to fire when regardless of the `disabled` prop value */\n  onInputClick?: NoneToVoidFunction;\n  decimals?: number;\n  disabled?: boolean;\n  isStatic?: boolean;\n  size?: 'large' | 'normal';\n};\n\nconst MIN_LENGTH_FOR_SHRINK = 5;\n\nfunction RichNumberInput({\n  id,\n  labelText,\n  hasError,\n  isLoading = false,\n  prefix = '',\n  suffix = '',\n  value,\n  children,\n  className,\n  inputClassName,\n  labelClassName,\n  valueClassName,\n  cornerClassName,\n  onChange,\n  onBlur,\n  onFocus,\n  onPressEnter,\n  onInputClick,\n  decimals = FRACTION_DIGITS,\n  disabled = false,\n  isStatic = false,\n  size = 'large',\n}: OwnProps) {\n  const inputRef = useRef<HTMLInputElement>();\n  const placeholderRef = useRef<HTMLDivElement>();\n  const lang = useLang();\n\n  const [hasFocus, markHasFocus, unmarkHasFocus] = useFlag(false);\n  const { updateFontScale, isFontChangedRef } = useFontScale(inputRef);\n\n  const textRef = useRef('');\n\n  const updateHtml = useLastCallback((newText: string) => {\n    const input = inputRef.current!;\n    const html = buildContentHtml(newText, prefix, suffix, decimals);\n\n    // Don't use the :empty pseudo-class to hide the placeholder, because it's noticeable delayed on iOS\n    placeholderRef.current!.innerHTML = newText ? '' : buildContentHtml('0', prefix, suffix);\n\n    if (html !== input.innerHTML) {\n      const restoreCaretPosition = document.activeElement === input\n        ? saveCaretPosition(input, prefix.length, decimals)\n        : undefined;\n\n      input.innerHTML = html;\n      restoreCaretPosition?.();\n    }\n\n    if (`${prefix}${newText}${suffix}`.length > MIN_LENGTH_FOR_SHRINK || isFontChangedRef.current) {\n      updateFontScale();\n    }\n  });\n\n  useLayoutEffect(() => {\n    const newText = clearText(value);\n\n    if (!newText || !textRef.current.startsWith(newText)) {\n      updateHtml(newText);\n      textRef.current = newText;\n    }\n  }, [textRef, value]);\n\n  useLayoutEffect(() => {\n    updateHtml(textRef.current);\n  }, [prefix, suffix, decimals]);\n\n  function handleChange(e: React.FormEvent<HTMLDivElement>) {\n    const newText = clearText(e.currentTarget.textContent ?? undefined);\n\n    updateHtml(newText);\n\n    if (newText !== textRef.current) {\n      textRef.current = newText;\n\n      if (onChange && isValidValue(newText)) {\n        onChange(newText);\n      }\n    }\n  }\n\n  const handleFocus = useLastCallback(() => {\n    if (disabled) return;\n\n    markHasFocus();\n    onFocus?.();\n  });\n\n  const handleBlur = useLastCallback(() => {\n    if (disabled) return;\n\n    unmarkHasFocus();\n    onBlur?.();\n  });\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    if (e.key === 'Enter') {\n      onPressEnter?.(e);\n    }\n  };\n\n  const inputWrapperFullClass = buildClassName(\n    styles.input__wrapper,\n    isStatic && styles.inputWrapperStatic,\n    hasError && styles.error,\n    hasFocus && styles.input__wrapper_hasFocus,\n    inputClassName,\n  );\n  const inputFullClass = buildClassName(\n    styles.input,\n    size === 'large' && styles.large,\n    valueClassName,\n    disabled && styles.disabled,\n    isLoading && styles.isLoading,\n    'rounded-font',\n  );\n  const labelTextClassName = buildClassName(\n    styles.label,\n    hasError && styles.error,\n    labelClassName,\n  );\n  const cornerFullClass = buildClassName(\n    cornerClassName,\n    hasFocus && styles.swapCorner,\n    hasError && styles.swapCorner_error,\n  );\n\n  return (\n    <div className={buildClassName(styles.wrapper, className)}>\n      {Boolean(labelText) && (\n        <label\n          className={labelTextClassName}\n          htmlFor={id}\n          id={`${id}Label`}\n        >\n          {labelText}\n        </label>\n      )}\n      <div className={inputWrapperFullClass}>\n        <div className={styles.rich}>\n          <div\n            ref={inputRef}\n            contentEditable={!disabled && !isLoading}\n            id={id}\n            role=\"textbox\"\n            aria-required\n            aria-placeholder={lang('Amount value')}\n            aria-labelledby={labelText ? `${id}Label` : undefined}\n            tabIndex={0}\n            inputMode=\"decimal\"\n            className={buildClassName(inputFullClass, styles.rich__value)}\n            onKeyDown={handleKeyDown}\n            onChange={handleChange}\n            onFocus={handleFocus}\n            onBlur={handleBlur}\n            onClick={onInputClick}\n          />\n          <div\n            ref={placeholderRef}\n            className={buildClassName(inputFullClass, styles.rich__placeholder)}\n          />\n        </div>\n        {children}\n      </div>\n      {cornerClassName && <div className={cornerFullClass} />}\n    </div>\n  );\n}\n\nfunction clearText(text?: string) {\n  if (!text) return '';\n\n  return (\n    text\n      .trim()\n      .replace(',', '.') // Replace comma to point\n      .replace(/[^\\d.]/g, '') // Remove incorrect symbols\n      .replace(/^0+(?=([1-9]|0\\.))/, '') // Trim extra zeros at beginning\n      .replace(/^0+$/, '0') // Trim extra zeros (if only zeros are entered)\n      ?? ''\n  );\n}\n\nfunction isValidValue(text: string) {\n  return !Number.isNaN(Number(text));\n}\n\nexport default memo(RichNumberInput);\n\nexport function focusAtTheEnd(inputId: string) {\n  const input = document.getElementById(inputId);\n  const selection = window.getSelection();\n  if (!input || !selection) {\n    return;\n  }\n\n  const range = document.createRange();\n  range.selectNodeContents(input);\n  range.collapse(false);\n  selection.removeAllRanges();\n  selection.addRange(range);\n}\n","export function saveCaretPosition(context: HTMLElement, prefixLength: number, decimals: number) {\n  const selection = window.getSelection();\n  if (!selection || selection.rangeCount === 0) {\n    return undefined;\n  }\n\n  const range = selection.getRangeAt(0);\n  range.setStart(context, 0);\n  const clearedValue = range.toString().match(new RegExp(`(\\\\d+(?:[.,]\\\\d{0,${decimals}})?)`));\n  const len = prefixLength + (clearedValue?.[0]?.length || range.toString().length || 0);\n\n  return function restore() {\n    try {\n      const { node, position } = getTextNodeAtPosition(context, len);\n\n      selection.removeAllRanges();\n      const newRange = new Range();\n      newRange.setStart(node, position);\n      newRange.setEnd(node, position);\n      selection.addRange(newRange);\n    } catch (e) {\n      // ignore\n    }\n  };\n}\n\nfunction getTextNodeAtPosition(root: HTMLElement, index: number) {\n  const NODE_TYPE = NodeFilter.SHOW_TEXT;\n  const treeWalker = document.createTreeWalker(root, NODE_TYPE, (elem) => {\n    if (index > elem.textContent!.length) {\n      index -= elem.textContent!.length;\n      return NodeFilter.FILTER_REJECT;\n    }\n\n    return NodeFilter.FILTER_ACCEPT;\n  });\n\n  const node = treeWalker.nextNode() ?? treeWalker.currentNode;\n\n  return {\n    node,\n    // Limiting the position for cases when `index` is outside the `root`.\n    // It happens when the prefix disappears after the change.\n    position: Math.min(index, node.textContent!.length),\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"pOo4Z_aH\",\"iosModalDialog\":\"q6jp1iyp\",\"contentWrapper\":\"jvZQQwjc\",\"content\":\"SRNIOpBE\",\"contentTitle\":\"GKe6CMiw\",\"contentTitleQr\":\"FleNuH6I\",\"contentTitleLedger\":\"uEJfLLFI\",\"contentTitleLedgerStatic\":\"zolk8bhu\",\"tabsInModal\":\"kxmoYeWl\",\"receiveHeader\":\"k3MxFquM\",\"receiveHeaderNoTabs\":\"RJOW3R8W\",\"contentStatic\":\"CDl3KL71\",\"tabs\":\"Bq7mtmdH\",\"tabsOverlay\":\"dsNYuIgk\",\"tronActive\":\"ikLKZGDP\",\"tab\":\"YpO46ybD\",\"tabTon\":\"JKtWSSiZ\",\"tabTron\":\"U6XprGM_\",\"qrCode\":\"Bol24ap4\",\"qrCodeStatic\":\"VkwtgLpL\",\"qrCodeHidden\":\"yC4eGg0t\",\"labelForInvoice\":\"ykqIpMy7\",\"addressWrapper\":\"aUXplGt1\",\"copyButtonStatic\":\"EbsE8cY6\",\"tokenButton\":\"vgInBvx7\",\"invoiceComment\":\"U6Z9qzVb\",\"dottedLink\":\"xzGjTX1X\",\"actionButtons\":\"QxrwhhFf\",\"actionButton\":\"ARg65twE\"};","import React, { memo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTokenWithPrice } from '../../api/types';\nimport type { UserSwapToken, UserToken } from '../../global/types';\n\nimport { IS_CAPACITOR, TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { selectAccount, selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { fromDecimal } from '../../util/decimals';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport formatTransferUrl from '../../util/ton/formatTransferUrl';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SelectTokenButton from '../common/SelectTokenButton';\nimport TokenSelector from '../common/TokenSelector';\nimport Input from '../ui/Input';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport RichNumberInput from '../ui/RichNumberInput';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './ReceiveModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  tokenSlug?: string;\n  tokensBySlug?: Record<string, ApiTokenWithPrice>;\n  address?: string;\n}\n\nconst enum SLIDES {\n  Initial,\n  Selector,\n}\n\nfunction InvoiceModal({\n  address,\n  tokenSlug,\n  tokensBySlug,\n  isOpen,\n}: StateProps) {\n  const { changeInvoiceToken, closeInvoiceModal } = getActions();\n\n  const lang = useLang();\n  const selectedToken = tokensBySlug && tokenSlug ? tokensBySlug[tokenSlug] : TONCOIN;\n  const [isTokenSelectorOpen, openTokenSelector, closeTokenSelector] = useFlag(false);\n  const [amountValue, setAmountValue] = useState<string | undefined>(undefined);\n  const [comment, setComment] = useState<string>('');\n\n  const decimals = selectedToken?.decimals ?? TONCOIN.decimals;\n  const amount = amountValue ? fromDecimal(amountValue, decimals) : 0n;\n  const tokenAddress = 'tokenAddress' in selectedToken ? selectedToken?.tokenAddress : undefined;\n  const invoiceUrl = address ? formatTransferUrl(address, amount, comment, tokenAddress) : '';\n\n  const handleTokenSelect = useLastCallback((token: UserToken | UserSwapToken) => {\n    changeInvoiceToken({ tokenSlug: token.slug });\n  });\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: SLIDES) {\n    switch (currentKey) {\n      case SLIDES.Initial:\n        return (\n          <>\n            <ModalHeader\n              title={lang('Deposit Link')}\n              onClose={closeInvoiceModal}\n            />\n            <div className={styles.content}>\n              <div className={styles.contentTitle}>\n                {renderText(lang('$receive_invoice_description'))}\n              </div>\n              <RichNumberInput\n                key=\"amount\"\n                id=\"amount\"\n                value={amountValue}\n                labelText={lang('Amount')}\n                onChange={setAmountValue}\n              >\n                <SelectTokenButton\n                  noChainIcon\n                  token={selectedToken}\n                  className={styles.tokenButton}\n                  onClick={openTokenSelector}\n                />\n              </RichNumberInput>\n              <Input\n                value={comment}\n                label={lang('Comment')}\n                placeholder={lang('Optional')}\n                wrapperClassName={styles.invoiceComment}\n                onInput={setComment}\n              />\n\n              <p className={styles.labelForInvoice}>\n                {lang('Share this URL to receive %token%', { token: selectedToken?.symbol })}\n              </p>\n              <InteractiveTextField\n                text={invoiceUrl}\n                addressUrl={IS_CAPACITOR ? invoiceUrl : undefined}\n                noExplorer\n                withShareInMenu={IS_CAPACITOR}\n                copyNotification={lang('Invoice link was copied!')}\n                className={styles.invoiceLinkField}\n              />\n            </div>\n          </>\n        );\n\n      case SLIDES.Selector:\n        return (\n          <TokenSelector\n            isActive={isActive}\n            shouldHideNotSupportedTokens\n            selectedChain=\"ton\"\n            onTokenSelect={handleTokenSelect}\n            onBack={closeTokenSelector}\n            onClose={closeInvoiceModal}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"invoice\"\n      onClose={closeInvoiceModal}\n      onCloseAnimationEnd={closeTokenSelector}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={isTokenSelectorOpen ? SLIDES.Selector : SLIDES.Initial}\n        nextKey={isTokenSelectorOpen ? SLIDES.Initial : SLIDES.Selector}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const address = selectAccount(global, global.currentAccountId!)?.addressByChain?.ton;\n    const { invoiceTokenSlug } = selectCurrentAccountState(global) || {};\n\n    return {\n      isOpen: global.isInvoiceModalOpen,\n      tokenSlug: invoiceTokenSlug,\n      tokensBySlug: global.tokenInfo?.bySlug,\n      address,\n    };\n  })(InvoiceModal),\n);\n","import { requestMutation } from '../lib/fasterdom/fasterdom';\nimport { animate } from './animation';\n\nconst DEFAULT_DURATION = 300;\n\nconst stopById = new Map<string, VoidFunction>();\n\nexport default function animateHorizontalScroll(container: HTMLElement, left: number, duration = DEFAULT_DURATION) {\n  const isRtl = container.getAttribute('dir') === 'rtl';\n  const {\n    scrollLeft, offsetWidth: containerWidth, scrollWidth, dataset: { scrollId },\n  } = container;\n\n  let path = left - scrollLeft;\n\n  if (path < 0) {\n    const remainingPath = -scrollLeft * (isRtl ? -1 : 1);\n    path = Math.max(path, remainingPath);\n  } else if (path > 0) {\n    const remainingPath = scrollWidth - (scrollLeft + containerWidth);\n    path = Math.min(path, remainingPath);\n  }\n\n  if (path === 0) {\n    return Promise.resolve();\n  }\n\n  if (scrollId && stopById.has(scrollId)) {\n    stopById.get(scrollId)!();\n  }\n\n  const target = scrollLeft + path;\n\n  return new Promise<void>((resolve) => {\n    requestMutation(() => {\n      if (duration === 0) {\n        container.scrollLeft = target;\n        resolve();\n        return;\n      }\n\n      let isStopped = false;\n      const id = Math.random().toString();\n      container.dataset.scrollId = id;\n      stopById.set(id, () => {\n        isStopped = true;\n      });\n\n      container.style.scrollSnapType = 'none';\n\n      const startAt = Date.now();\n\n      animate(() => {\n        if (isStopped) return false;\n\n        const t = Math.min((Date.now() - startAt) / duration, 1);\n\n        const currentPath = path * (1 - transition(t));\n        container.scrollLeft = Math.round(target - currentPath);\n\n        if (t >= 1) {\n          container.style.scrollSnapType = '';\n          delete container.dataset.scrollId;\n          stopById.delete(id);\n          resolve();\n        }\n\n        return t < 1;\n      }, requestMutation);\n    });\n  });\n}\n\nfunction transition(t: number) {\n  return 1 - ((1 - t) ** 3.5);\n}\n","import React, { useRef, useState } from '../../lib/teact/teact';\n\nimport type { IAnchorPosition } from '../../global/types';\nimport type { DropdownItem } from './Dropdown';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport DropdownMenu from './DropdownMenu';\n\nimport styles from './Tab.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  icon?: string;\n  title: string;\n  menuItems?: DropdownItem[];\n  className?: string;\n  onClick: (arg: number) => void;\n  clickArg: number;\n  onMenuItemClick?: (value: string) => void;\n  onActiveClick?: NoneToVoidFunction;\n};\n\nfunction Tab({\n  isActive,\n  icon,\n  title,\n  menuItems,\n  className,\n  onClick,\n  clickArg,\n  onMenuItemClick,\n  onActiveClick,\n}: OwnProps) {\n  const menuRef = useRef<HTMLDivElement>();\n  const contentRef = useRef<HTMLDivElement>();\n  const [menuAnchor, setMenuAnchor] = useState<IAnchorPosition | undefined>();\n  const hasMenu = Boolean(menuItems?.length);\n  const isMenuOpen = Boolean(menuAnchor);\n\n  const getTriggerElement = useLastCallback(() => contentRef.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback(() => ({ withPortal: true }));\n  const closeMenu = useLastCallback(() => setMenuAnchor(undefined));\n\n  const handleClick = useLastCallback(() => {\n    if (isActive && !hasMenu) {\n      onActiveClick?.();\n      return;\n    }\n\n    if (!isActive) {\n      onClick(clickArg);\n      return;\n    }\n\n    if (isMenuOpen) {\n      closeMenu();\n    } else {\n      const { right: x, y, height } = contentRef.current!.getBoundingClientRect();\n      setMenuAnchor({ x, y: y + height });\n    }\n  });\n\n  return (\n    <div\n      className={buildClassName(styles.Tab, isActive && styles.Tab_active, className, hasMenu && styles.interactive)}\n      onClick={handleClick}\n    >\n      <span className={styles.content} ref={contentRef}>\n        {icon && <i className={buildClassName(icon, styles.icon)} aria-hidden />}\n        {title}\n        {hasMenu && (\n          <i className={buildClassName('icon-caret-down', styles.caretIcon)} aria-hidden />\n        )}\n      </span>\n      {hasMenu && (\n        <DropdownMenu\n          isOpen={isMenuOpen}\n          ref={menuRef}\n          items={menuItems}\n          withPortal\n          buttonClassName={styles.menuItem}\n          menuPositionX=\"right\"\n          menuAnchor={menuAnchor}\n          getTriggerElement={getTriggerElement}\n          getRootElement={getRootElement}\n          getMenuElement={getMenuElement}\n          getLayout={getLayout}\n          onSelect={onMenuItemClick}\n          onClose={closeMenu}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default Tab;\n","// extracted by mini-css-extract-plugin\nexport default {\"Tab\":\"D6as8ltx\",\"tab\":\"D6as8ltx\",\"Tab_active\":\"O4d43EtE\",\"tabActive\":\"O4d43EtE\",\"content\":\"vwr4su2y\",\"interactive\":\"MiCetFPJ\",\"menuItem\":\"tUY9MzOP\",\"icon\":\"EDDQtmOa\",\"caretIcon\":\"UgBDhvZa\"};","import React, { memo, useEffect, useRef } from '../../lib/teact/teact';\n\nimport type { DropdownItem } from './Dropdown';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport animateHorizontalScroll from '../../util/animateHorizontalScroll';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_ANDROID, IS_IOS } from '../../util/windowEnvironment';\n\nimport useHorizontalScroll from '../../hooks/useHorizontalScroll';\nimport useLang from '../../hooks/useLang';\nimport useWindowSize from '../../hooks/useWindowSize';\n\nimport Tab from './Tab';\n\nimport styles from './TabList.module.scss';\n\nexport type TabWithProperties = {\n  id: number;\n  icon?: string;\n  title: string;\n  className?: string;\n  menuItems?: DropdownItem[];\n  onMenuItemClick?: (value: string) => void;\n};\n\ntype OwnProps = {\n  isActive?: boolean;\n  tabs: readonly TabWithProperties[];\n  activeTab: number;\n  className?: string;\n  overlayClassName?: string;\n  onSwitchTab: (index: number) => void;\n  onActiveTabClick?: NoneToVoidFunction;\n};\n\nconst TAB_SCROLL_THRESHOLD_PX = 16;\n// Should match duration from `--slide-transition` CSS variable\nconst SCROLL_DURATION = IS_IOS ? 450 : IS_ANDROID ? 400 : 300;\nconst CLIP_PATH_CONTAINER_CLASS_NAME = 'clip-path-container';\n\nfunction TabList({\n  isActive, tabs, activeTab, className, overlayClassName, onSwitchTab, onActiveTabClick,\n}: OwnProps) {\n  const lang = useLang();\n  const containerRef = useRef<HTMLDivElement>();\n  const { width: appWidth } = useWindowSize();\n\n  const fullClassName = buildClassName(\n    styles.container,\n    'no-scrollbar',\n    className,\n  );\n\n  useHorizontalScroll({\n    containerRef,\n    shouldPreventDefault: true,\n  });\n\n  useActiveTabCentering(activeTab, containerRef.current);\n\n  useEffect(() => {\n    const container = containerRef.current?.querySelector(`.${CLIP_PATH_CONTAINER_CLASS_NAME}`) as HTMLElement | null;\n    const activeTabElement = container?.childNodes[activeTab] as HTMLElement | null;\n\n    if (container && activeTabElement) {\n      const clipPath = calculateClipPath(activeTabElement, container);\n      requestMutation(() => {\n        container.style.clipPath = clipPath;\n      });\n    }\n    // When the following dependencies change, `clipPath` must be updated\n  }, [isActive, activeTab, tabs, lang, containerRef, appWidth]);\n\n  return (\n    <div ref={containerRef} className={fullClassName}>\n      {tabs.map((tab, i) => (\n        <Tab\n          key={tab.title}\n          title={tab.title}\n          isActive={i === activeTab}\n          className={tab?.className}\n          menuItems={tab?.menuItems}\n          onMenuItemClick={tab?.onMenuItemClick}\n          onActiveClick={onActiveTabClick}\n          onClick={onSwitchTab}\n          clickArg={tab.id}\n          icon={tab.icon}\n        />\n      ))}\n\n      <div\n        className={buildClassName(styles.clipPathContainer, overlayClassName, CLIP_PATH_CONTAINER_CLASS_NAME)}\n        aria-hidden\n      >\n        {tabs.map((tab, i) => (\n          <Tab\n            key={tab.title}\n            title={tab.title}\n            isActive={i === activeTab}\n            className={buildClassName(tab?.className, i === activeTab && 'current-tab')}\n            menuItems={tab?.menuItems}\n            onActiveClick={onActiveTabClick}\n            onMenuItemClick={tab?.onMenuItemClick}\n            onClick={onSwitchTab}\n            clickArg={tab.id}\n            icon={tab.icon}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(TabList);\n\nfunction calculateClipPath(activeElement: HTMLElement, container: HTMLElement) {\n  const { paddingTop, paddingBottom } = getComputedStyle(activeElement);\n  const {\n    offsetLeft,\n    offsetWidth,\n  } = activeElement;\n\n  const clipLeft = offsetLeft;\n  const clipRight = offsetLeft + offsetWidth;\n  const rightPosition = Number(100 - (clipRight / container.offsetWidth) * 100).toFixed(3);\n  const leftPosition = Number((clipLeft / container.offsetWidth) * 100).toFixed(3);\n\n  return `inset(${parseInt(paddingTop)}px ${rightPosition}% ${parseInt(paddingBottom)}px ${leftPosition}% round 1rem)`;\n}\n\n// Scroll container to place active tab in the center\nfunction useActiveTabCentering(activeTab: number, container?: HTMLDivElement) {\n  useEffect(() => {\n    if (!container) return;\n\n    const { scrollWidth, offsetWidth, scrollLeft } = container;\n    if (scrollWidth <= offsetWidth) {\n      return;\n    }\n\n    const activeTabElement = container.childNodes[activeTab] as HTMLElement | null;\n    if (!activeTabElement) {\n      return;\n    }\n\n    const { offsetLeft: activeTabOffsetLeft, offsetWidth: activeTabOffsetWidth } = activeTabElement;\n    const newLeft = activeTabOffsetLeft - (offsetWidth / 2) + (activeTabOffsetWidth / 2);\n\n    // Prevent scrolling by only a couple of pixels, which doesn't look smooth\n    if (Math.abs(newLeft - scrollLeft) < TAB_SCROLL_THRESHOLD_PX) {\n      return;\n    }\n\n    void animateHorizontalScroll(container, newLeft, SCROLL_DURATION);\n  }, [activeTab, container]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Jya4TQTw\",\"clipPathContainer\":\"GMG3Qgat\"};","// extracted by mini-css-extract-plugin\nexport default {\"actionSheetDialog\":\"Vdr2S2qS\",\"actionButtons\":\"eWsAO42f\",\"actionButtonStatic\":\"E2TFEkdV\",\"actionButton\":\"GUHQ1MCW\",\"disabled\":\"wOo6dgfN\",\"actionIcon\":\"Zc6rtbsT\",\"iconChevronRight\":\"onRwV8fb\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG, TONCOIN } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport styles from './TonActions.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n  isLedger?: boolean;\n  className?: string;\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isTestnet?: boolean;\n  isSwapDisabled?: boolean;\n  isOnRampDisabled?: boolean;\n}\n\nfunction TonActions({\n  className,\n  isStatic,\n  isTestnet,\n  isLedger,\n  isSwapDisabled,\n  isOnRampDisabled,\n  onClose,\n}: OwnProps & StateProps) {\n  const {\n    startSwap,\n    openOnRampWidgetModal,\n    openInvoiceModal,\n    closeReceiveModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const isSwapAllowed = !isTestnet && !isLedger && !isSwapDisabled;\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled;\n\n  const handleBuyFiat = useLastCallback(() => {\n    openOnRampWidgetModal({ chain: 'ton' });\n    onClose?.();\n  });\n\n  const handleSwapClick = useLastCallback(() => {\n    startSwap({\n      tokenInSlug: DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG,\n      tokenOutSlug: TONCOIN.slug,\n      amountIn: '100',\n    });\n    onClose?.();\n  });\n\n  const handleReceiveClick = useLastCallback(() => {\n    closeReceiveModal();\n    openInvoiceModal();\n    onClose?.();\n  });\n\n  const contentClassName = buildClassName(\n    styles.actionButtons,\n    isStatic && styles.actionButtonStatic,\n    className,\n  );\n\n  return (\n    <div className={contentClassName}>\n      {isOnRampAllowed && (\n        <div className={styles.actionButton} onClick={handleBuyFiat}>\n          <i className={buildClassName(styles.actionIcon, 'icon-card')} aria-hidden />\n          {lang('Buy with Card')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n      {isSwapAllowed && (\n        <div className={styles.actionButton} onClick={handleSwapClick}>\n          <i className={buildClassName(styles.actionIcon, 'icon-crypto')} aria-hidden />\n          {lang('Buy with Crypto')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n      <div className={styles.actionButton} onClick={handleReceiveClick}>\n        <i className={buildClassName(styles.actionIcon, 'icon-link')} aria-hidden />\n        {lang('Create Deposit Link')}\n        <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { isSwapDisabled, isOnRampDisabled } = global.restrictions;\n\n  return {\n    isTestnet: global.settings.isTestnet,\n    isSwapDisabled,\n    isOnRampDisabled,\n  };\n})(TonActions));\n","import type QRCodeStyling from 'qr-code-styling';\nimport {\n  type ElementRef,\n  useEffect, useLayoutEffect, useRef, useState,\n} from '../lib/teact/teact';\nimport { removeExtraClass } from '../lib/teact/teact-dom';\n\nimport type { ApiChain } from '../api/types';\n\nimport { IS_CORE_WALLET } from '../config';\nimport getChainNetworkIcon from '../util/swap/getChainNetworkIcon';\nimport formatTransferUrl from '../util/ton/formatTransferUrl';\n\nconst QR_SIZE = 600;\n\ninterface UseQRCodeHook {\n  qrCodeRef: ElementRef<HTMLDivElement>;\n  isInitialized: boolean;\n}\n\nlet qrCode: QRCodeStyling;\n\nexport default function useQrCode({\n  address,\n  chain,\n  isActive,\n  hiddenClassName,\n  hideLogo,\n  withFormatTransferUrl,\n}: {\n  address?: string;\n  chain?: ApiChain;\n  isActive?: boolean;\n  hiddenClassName?: string;\n  hideLogo?: boolean;\n  withFormatTransferUrl?: boolean;\n}): UseQRCodeHook {\n  const [isInitialized, setIsInitialized] = useState(!!qrCode);\n  const logoUrl = IS_CORE_WALLET ? './coreWallet/logo.svg' : './logo.svg';\n\n  const qrCodeRef = useRef<HTMLDivElement>();\n\n  useEffect(() => {\n    if (isInitialized) return;\n\n    void import('qr-code-styling')\n      .then(({ default: QrCodeStyling }) => {\n        qrCode = new QrCodeStyling({\n          width: QR_SIZE,\n          height: QR_SIZE,\n          image: chain ? getChainNetworkIcon(chain) : logoUrl,\n          margin: 0,\n          type: 'canvas',\n          dotsOptions: { type: 'rounded' },\n          cornersSquareOptions: { type: 'extra-rounded' },\n          imageOptions: { imageSize: 0.4, margin: 8, crossOrigin: 'anonymous' },\n          qrOptions: { errorCorrectionLevel: 'M' },\n          data: formatTransferUrl(''),\n        });\n\n        setIsInitialized(true);\n      });\n  }, [chain, isInitialized, logoUrl]);\n\n  useLayoutEffect(() => {\n    if (!isActive || !isInitialized) return;\n\n    if (qrCodeRef.current && hiddenClassName) removeExtraClass(qrCodeRef.current, hiddenClassName);\n\n    if (qrCodeRef.current) {\n      qrCode?.append(qrCodeRef.current);\n\n      qrCode._options.image = hideLogo\n        ? undefined\n        : (chain ? getChainNetworkIcon(chain) : logoUrl);\n    }\n  }, [isActive, isInitialized, hiddenClassName, hideLogo, chain, logoUrl]);\n\n  useEffect(() => {\n    if (!address || !isActive || !qrCode || !isInitialized) return;\n\n    qrCode.update({ data: withFormatTransferUrl ? formatTransferUrl(address) : address });\n  }, [address, isActive, isInitialized, withFormatTransferUrl]);\n\n  return { qrCodeRef, isInitialized };\n}\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useQrCode from '../../../hooks/useQrCode';\n\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport TonActions from './TonActions';\n\nimport styles from '../ReceiveModal.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n  isLedger?: boolean;\n  address: string;\n  onClose?: NoneToVoidFunction;\n}\n\nfunction TonContent({\n  isActive,\n  isStatic,\n  isLedger,\n  address,\n  onClose,\n}: OwnProps) {\n  const { verifyHardwareAddress } = getActions();\n\n  const lang = useLang();\n  const { qrCodeRef, isInitialized } = useQrCode({\n    address,\n    chain: 'ton',\n    isActive,\n    hiddenClassName: styles.qrCodeHidden,\n    withFormatTransferUrl: true,\n  });\n  const qrClassNames = buildClassName(\n    styles.qrCode,\n    isStatic && styles.qrCodeStatic,\n    !isInitialized && styles.qrCodeHidden,\n  );\n\n  const handleVerify = (e: React.MouseEvent<HTMLAnchorElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    verifyHardwareAddress();\n  };\n\n  return (\n    <div>\n      <div className={buildClassName(styles.contentTitle, styles.contentTitleQr)}>\n        {renderText(lang('$receive_ton_description'))}\n      </div>\n\n      <div className={qrClassNames} ref={qrCodeRef} />\n\n      <InteractiveTextField\n        chain=\"ton\"\n        address={address}\n        className={isStatic ? styles.copyButtonStatic : styles.addressWrapper}\n        copyNotification={lang('Your address was copied!')}\n        noSavedAddress\n        noDimming\n      />\n\n      {isLedger && (\n        <div className={buildClassName(\n          styles.contentTitle, styles.contentTitleLedger, isStatic && styles.contentTitleLedgerStatic,\n        )}\n        >\n          {renderText(lang('$ledger_verify_address'))}\n          {' '}\n          <a href=\"#\" onClick={handleVerify} className={styles.dottedLink}>\n            {lang('Verify now')}\n          </a>\n        </div>\n      )}\n\n      {!isStatic && <TonActions isLedger={isLedger} onClose={onClose} />}\n    </div>\n  );\n}\n\nexport default memo(TonContent);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiCountryCode } from '../../../api/types';\n\nimport { DEFAULT_TRX_SWAP_FIRST_TOKEN_SLUG, TRX } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport styles from './TonActions.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n  isLedger?: boolean;\n  className?: string;\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isTestnet?: boolean;\n  isSwapDisabled?: boolean;\n  isOnRampDisabled?: boolean;\n  countryCode?: ApiCountryCode;\n}\n\nfunction TronActions({\n  className,\n  isStatic,\n  isTestnet,\n  isLedger,\n  isSwapDisabled,\n  isOnRampDisabled,\n  countryCode,\n  onClose,\n}: OwnProps & StateProps) {\n  const {\n    startSwap,\n    openOnRampWidgetModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const canBuyWithCard = countryCode !== 'RU';\n  const isSwapAllowed = !isTestnet && !isLedger && !isSwapDisabled;\n  // TRX purchase is not possible via the Dreamwalkers service (Russian), however in static mode we show the buy button\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled && (canBuyWithCard || isStatic);\n  const shouldRender = Boolean(isSwapAllowed || isOnRampAllowed || isStatic);\n\n  const handleBuyFiat = useLastCallback(() => {\n    openOnRampWidgetModal({ chain: 'tron' });\n    onClose?.();\n  });\n\n  const handleSwapClick = useLastCallback(() => {\n    startSwap({\n      tokenInSlug: DEFAULT_TRX_SWAP_FIRST_TOKEN_SLUG,\n      tokenOutSlug: TRX.slug,\n      amountIn: '10',\n    });\n    onClose?.();\n  });\n\n  const contentClassName = buildClassName(\n    styles.actionButtons,\n    isStatic && styles.actionButtonStatic,\n    className,\n  );\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <div className={contentClassName}>\n      {isOnRampAllowed && (\n        <div\n          className={buildClassName(styles.actionButton, !canBuyWithCard && styles.disabled)}\n          onClick={canBuyWithCard ? handleBuyFiat : undefined}\n        >\n          <i className={buildClassName(styles.actionIcon, 'icon-card')} aria-hidden />\n          {lang('Buy with Card')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n      {isSwapAllowed && (\n        <div className={styles.actionButton} onClick={handleSwapClick}>\n          <i className={buildClassName(styles.actionIcon, 'icon-crypto')} aria-hidden />\n          {lang('Buy with Crypto')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n      {isStatic && (\n        <div className={buildClassName(styles.actionButton, styles.disabled)}>\n          <i className={buildClassName(styles.actionIcon, 'icon-link')} aria-hidden />\n          {lang('Create Deposit Link')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    isSwapDisabled,\n    isOnRampDisabled,\n    countryCode,\n  } = global.restrictions;\n\n  return {\n    isTestnet: global.settings.isTestnet,\n    isSwapDisabled,\n    isOnRampDisabled,\n    countryCode,\n  };\n})(TronActions));\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useQrCode from '../../../hooks/useQrCode';\n\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport TronActions from './TronActions';\n\nimport styles from '../ReceiveModal.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n  address: string;\n  onClose?: NoneToVoidFunction;\n}\n\nfunction TronContent({\n  isActive,\n  isStatic,\n  address,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n  const { qrCodeRef, isInitialized } = useQrCode({\n    address,\n    chain: 'tron',\n    isActive,\n    hiddenClassName: styles.qrCodeHidden,\n    withFormatTransferUrl: false,\n  });\n  const qrClassNames = buildClassName(\n    styles.qrCode,\n    isStatic && styles.qrCodeStatic,\n    !isInitialized && styles.qrCodeHidden,\n  );\n\n  return (\n    <div>\n      <div className={buildClassName(styles.contentTitle, styles.contentTitleQr)}>\n        {renderText(lang('$receive_tron_description'))}\n      </div>\n\n      <div className={qrClassNames} ref={qrCodeRef} />\n\n      <InteractiveTextField\n        chain=\"tron\"\n        address={address}\n        className={isStatic ? styles.copyButtonStatic : styles.addressWrapper}\n        copyNotification={lang('Your address was copied!')}\n        noSavedAddress\n        noDimming\n      />\n\n      {!isStatic && <TronActions onClose={onClose} />}\n    </div>\n  );\n}\n\nexport default memo(TronContent);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiChain } from '../../api/types';\nimport type { Account } from '../../global/types';\nimport type { TabWithProperties } from '../ui/TabList';\n\nimport { selectAccount, selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport TabList from '../ui/TabList';\nimport Transition from '../ui/Transition';\nimport TonActions from './content/TonActions';\nimport TonContent from './content/TonContent';\nimport TronActions from './content/TronActions';\nimport TronContent from './content/TronContent';\n\nimport styles from './ReceiveModal.module.scss';\n\ninterface StateProps {\n  addressByChain?: Account['addressByChain'];\n  isLedger?: boolean;\n  chain?: ApiChain;\n}\n\ntype OwnProps = {\n  isOpen?: boolean;\n  isStatic?: boolean;\n  onClose?: NoneToVoidFunction;\n};\n\nexport const TON_TAB_ID = 0;\nexport const TRON_TAB_ID = 1;\n\nfunction Content({\n  isOpen, addressByChain, chain, isStatic, isLedger, onClose,\n}: StateProps & OwnProps) {\n  const { setReceiveActiveTab } = getActions();\n\n  // `lang.code` is used to force redrawing of the `Transition` content,\n  // since the height of the content differs from translation to translation.\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const tabs = useMemo(() => {\n    const result: TabWithProperties[] = [];\n    if (addressByChain?.ton) {\n      result.push({\n        id: TON_TAB_ID,\n        title: 'TON',\n        className: buildClassName(styles.tab, styles.tabTon),\n      });\n    }\n    if (addressByChain?.tron) {\n      result.push({\n        id: TRON_TAB_ID,\n        title: 'TRON',\n        className: buildClassName(styles.tab, styles.tabTron),\n      });\n    }\n\n    return result;\n  }, [addressByChain?.ton, addressByChain?.tron]);\n\n  const activeTab = useMemo(() => {\n    if (!chain) return tabs.length ? tabs[0].id : TON_TAB_ID;\n    return chain === 'tron' ? TRON_TAB_ID : TON_TAB_ID;\n  }, [chain, tabs]);\n\n  const handleSwitchTab = useLastCallback((tabId: number) => {\n    const newChain = tabId === TRON_TAB_ID ? 'tron' : 'ton';\n    setReceiveActiveTab({ chain: newChain });\n  });\n\n  function renderActions() {\n    const currentTab = tabs.find((tab) => tab.id === activeTab);\n    if (currentTab?.id === TRON_TAB_ID) {\n      return <TronActions isStatic />;\n    }\n\n    return <TonActions isStatic isLedger={isLedger} />;\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case TON_TAB_ID:\n        return (\n          <TonContent\n            isActive={isOpen && isActive}\n            isStatic={isStatic}\n            isLedger={isLedger}\n            address={addressByChain!.ton!}\n            onClose={onClose}\n          />\n        );\n\n      case TRON_TAB_ID:\n        return (\n          <TronContent\n            isActive={isOpen && isActive}\n            isStatic={isStatic}\n            address={addressByChain!.tron!}\n            onClose={onClose}\n          />\n        );\n    }\n  }\n\n  if (!tabs.length) {\n    return undefined;\n  }\n\n  return (\n    <>\n      {isStatic && renderActions()}\n\n      {tabs.length > 1 && (\n        <TabList\n          tabs={tabs}\n          activeTab={activeTab}\n          className={buildClassName(styles.tabs, !isStatic && styles.tabsInModal)}\n          overlayClassName={buildClassName(\n            styles.tabsOverlay,\n            activeTab === TRON_TAB_ID && styles.tronActive,\n          )}\n          onSwitchTab={handleSwitchTab}\n        />\n      )}\n      <Transition\n        key={`content_${lang.code}`}\n        activeKey={activeTab}\n        name={isPortrait ? 'slide' : 'slideFade'}\n        className={styles.contentWrapper}\n        slideClassName={buildClassName(styles.content, isStatic && styles.contentStatic, 'custom-scroll')}\n        shouldRestoreHeight={isStatic}\n      >\n        {renderContent}\n      </Transition>\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global): StateProps => {\n    const account = selectAccount(global, global.currentAccountId!);\n    const { receiveModalChain } = selectCurrentAccountState(global) || {};\n\n    return {\n      addressByChain: account?.addressByChain,\n      isLedger: Boolean(account?.ledger),\n      chain: receiveModalChain,\n    };\n  },\n  (global, _, stickToFirst) => stickToFirst(global.currentAccountId))(Content),\n);\n","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { selectCurrentAccount, selectIsMultichainAccount } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_IOS_APP } from '../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\n\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport Content from './Content';\n\nimport styles from './ReceiveModal.module.scss';\n\ntype StateProps = {\n  isOpen?: boolean;\n  isLedger?: boolean;\n  isTestnet?: boolean;\n  isSwapDisabled: boolean;\n  isOnRampDisabled: boolean;\n  isMultichainAccount: boolean;\n};\n\nfunction ReceiveModal({\n  isOpen,\n  isTestnet,\n  isLedger,\n  isSwapDisabled,\n  isOnRampDisabled,\n  isMultichainAccount,\n}: StateProps) {\n  const { closeReceiveModal } = getActions();\n\n  const lang = useLang();\n\n  const { isLandscape } = useDeviceScreen();\n  const isSwapAllowed = !isTestnet && !isLedger && !isSwapDisabled;\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled;\n  const modalTitle = lang(isSwapAllowed || isOnRampAllowed ? 'Add / Buy' : 'Add');\n\n  useEffect(() => {\n    if (isOpen && isLandscape) {\n      closeReceiveModal();\n    }\n  }, [isLandscape, isOpen]);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      dialogClassName={IS_IOS_APP ? styles.iosModalDialog : styles.modalDialog}\n      nativeBottomSheetKey=\"receive\"\n      onClose={closeReceiveModal}\n    >\n      <ModalHeader\n        title={modalTitle}\n        className={buildClassName(styles.receiveHeader, !isMultichainAccount && styles.receiveHeaderNoTabs)}\n        onClose={closeReceiveModal}\n      />\n      <Content\n        isOpen={isOpen}\n        onClose={closeReceiveModal}\n      />\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { isSwapDisabled, isOnRampDisabled } = global.restrictions;\n  const account = selectCurrentAccount(global);\n\n  return {\n    isOpen: global.isReceiveModalOpen,\n    isTestnet: global.settings.isTestnet,\n    isSwapDisabled,\n    isOnRampDisabled,\n    isLedger: Boolean(account?.ledger),\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n  };\n})(ReceiveModal));\n","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport { TONCOIN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport getPseudoRandomNumber from '../../util/getPseudoRandomNumber';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport SensitiveData from '../ui/SensitiveData';\n\nimport styles from './TransferResult.module.scss';\n\ninterface OwnProps {\n  playAnimation?: boolean;\n  color?: 'green' | 'purple';\n  noSign?: boolean;\n  amount?: bigint;\n  tokenSymbol?: string;\n  decimals?: number;\n  firstButtonText?: string;\n  secondButtonText?: string;\n  isSensitiveDataHidden?: true;\n  onFirstButtonClick?: NoneToVoidFunction;\n  onSecondButtonClick?: NoneToVoidFunction;\n}\n\nfunction TransferResult({\n  isSensitiveDataHidden,\n  playAnimation,\n  amount = 0n,\n  tokenSymbol = TONCOIN.symbol,\n  decimals = TONCOIN.decimals,\n  noSign,\n  color,\n  firstButtonText,\n  secondButtonText,\n  onFirstButtonClick,\n  onSecondButtonClick,\n}: OwnProps) {\n  const amountString = toDecimal(amount, decimals);\n  const [wholePart, fractionPart] = formatCurrencyExtended(amountString, '', noSign, decimals).split('.');\n  const amountCols = useMemo(() => getPseudoRandomNumber(5, 13, tokenSymbol), [tokenSymbol]);\n\n  function renderButtons() {\n    if (!firstButtonText && !secondButtonText) {\n      return undefined;\n    }\n\n    return (\n      <div className={styles.buttons}>\n        {firstButtonText && (\n          <Button className={styles.button} onClick={onFirstButtonClick}>{firstButtonText}</Button>\n        )}\n        {secondButtonText && (\n          <Button className={styles.button} onClick={onSecondButtonClick}>{secondButtonText}</Button>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        play={playAnimation}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n        tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n        previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n      />\n\n      <SensitiveData\n        isActive={isSensitiveDataHidden}\n        cols={amountCols}\n        rows={3}\n        cellSize={18}\n        align=\"center\"\n        maskSkin=\"green\"\n        className={buildClassName(styles.amount, color && styles[`amount_${color}`], 'rounded-font')}\n      >\n        {wholePart.trim().replace('\\u202F', '').replace('-', '')}\n        {fractionPart && <span className={styles.amountFraction}>.{fractionPart.trim()}</span>}\n        <span className={styles.amountSymbol}>{tokenSymbol}</span>\n      </SensitiveData>\n\n      {renderButtons()}\n    </>\n  );\n}\n\nexport default memo(TransferResult);\n","import type { LangCode } from '../types';\n\nimport { HELP_CENTER_URL } from '../../config';\n\nexport function getHelpCenterUrl(langCode: LangCode | undefined, type: keyof typeof HELP_CENTER_URL): string {\n  if (!langCode) return '';\n\n  return (HELP_CENTER_URL[type] as Partial<Record<LangCode, string>>)?.[langCode] ?? HELP_CENTER_URL[type].en;\n}\n","import { useRef, useState } from '../../../lib/teact/teact';\n\nimport type { ApiBaseCurrency, ApiTokenWithPrice } from '../../../api/types';\n\nimport { CURRENCIES } from '../../../config';\nimport { Big } from '../../../lib/big.js';\nimport { fromDecimal, toDecimal } from '../../../util/decimals';\nimport { vibrate } from '../../../util/haptics';\nimport { DEFAULT_DECIMALS } from '../../../api/chains/ton/constants';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\ntype CurrentToken = Pick<ApiTokenWithPrice, 'slug' | 'price' | 'decimals'>;\n\ninterface AmountInputStateInput {\n  /** The `token` amount from the state. Expressed in `token` regardless of `isBaseCurrency`. */\n  amount?: bigint;\n  token?: CurrentToken;\n  baseCurrency: ApiBaseCurrency;\n  isAmountReadonly?: boolean;\n  onAmountChange: (amount?: bigint, isValueReplaced?: boolean) => void;\n  /** `id` is the token slug unless `id` is specified explicitly in the token dropdown items */\n  onTokenChange?: (id: string) => void;\n}\n\nexport interface AmountInputStateOutput {\n  isBaseCurrency: boolean;\n  inputValue: string | undefined;\n  alternativeValue: string | undefined;\n  baseCurrency: ApiBaseCurrency;\n  isAmountReadonly?: boolean;\n  onInputChange: (value?: string) => void;\n  onMaxAmountClick: (maxAmount?: bigint) => void;\n  onAlternativeAmountClick: () => void;\n  onTokenChange: (id: string, token?: CurrentToken) => void;\n}\n\n/**\n * Provides the stateful functionality for `AmountInput`. It is not embedded into `AmountInput`, because sometimes\n * `<AmountInput>` has to be remounted while its state must persist.\n */\nexport function useAmountInputState(input: AmountInputStateInput): AmountInputStateOutput {\n  const { baseCurrency, onAmountChange } = input;\n  const { isBaseCurrency, switchCurrency, ...output } = useCurrencySwitch(input);\n\n  const onMaxAmountClick = useLastCallback((maxAmount?: bigint) => {\n    if (maxAmount === undefined) {\n      return;\n    }\n\n    void vibrate();\n    switchCurrency(false);\n    onAmountChange(maxAmount, true);\n  });\n\n  const onAlternativeAmountClick = useLastCallback(() => {\n    void vibrate();\n    switchCurrency(!isBaseCurrency);\n  });\n\n  return {\n    ...output,\n    isBaseCurrency,\n    baseCurrency,\n    onMaxAmountClick,\n    onAlternativeAmountClick,\n  };\n}\n\nfunction useCurrencySwitch({\n  baseCurrency,\n  amount: tokenAmountBI,\n  token,\n  isAmountReadonly,\n  onAmountChange,\n  onTokenChange: setToken,\n}: AmountInputStateInput) {\n  const [isBaseCurrency, setIsBaseCurrency] = useState(false);\n  const tokenAmountRef = useRef<string | undefined>();\n  const currencyAmountRef = useRef<string | undefined>();\n  const currencyDecimals = CURRENCIES[baseCurrency].decimals;\n\n  const setAmountsFromToken = (tokenAmount: string | undefined) => {\n    tokenAmountRef.current = tokenAmount;\n    currencyAmountRef.current = tokenAmountToCurrencyAmount(tokenAmount, token?.price, currencyDecimals);\n  };\n\n  const setAmountsFromCurrency = (currencyAmount: string | undefined) => {\n    tokenAmountRef.current = currencyAmountToTokenAmount(currencyAmount, token?.price, token?.decimals);\n    currencyAmountRef.current = currencyAmount;\n  };\n\n  const setAndReportAmountFromPrice = (price: number | undefined, decimals: number | undefined) => {\n    if (isBaseCurrency && !isAmountReadonly) {\n      const newTokenAmount = currencyAmountToTokenAmount(currencyAmountRef.current, price, decimals);\n      if (newTokenAmount !== formalizeStringAmount(tokenAmountRef.current)) {\n        tokenAmountRef.current = newTokenAmount; // If not set, the render following the `onAmountChange` call may change the input value\n        onAmountChange(tokenAmountToBigInt(newTokenAmount, decimals));\n      }\n    } else {\n      currencyAmountRef.current = tokenAmountToCurrencyAmount(tokenAmountRef.current, price, currencyDecimals);\n    }\n  };\n\n  // Actualizes both values when a new token amount arrives from the parent\n  useSyncEffect(() => {\n    const newTokenAmount = tokenAmountFromBigInt(tokenAmountBI, token?.decimals);\n    if (newTokenAmount !== formalizeStringAmount(tokenAmountRef.current)) {\n      setAmountsFromToken(newTokenAmount);\n    }\n  }, [tokenAmountBI, token?.decimals]); // eslint-disable-line react-hooks-static-deps/exhaustive-deps\n\n  // Actualizes the alternative (below the input) value when the token price changes.\n  // If the input is readonly, actualizes only the currency value regardless of `isBaseCurrency`\n  useSyncEffect(() => {\n    setAndReportAmountFromPrice(token?.price, token?.decimals);\n  }, [token?.price, token?.decimals, currencyDecimals]); // eslint-disable-line react-hooks-static-deps/exhaustive-deps\n\n  const onInputChange = useLastCallback((value?: string) => {\n    value ||= undefined;\n\n    if (isBaseCurrency) {\n      setAmountsFromCurrency(value);\n    } else {\n      setAmountsFromToken(value);\n    }\n\n    onAmountChange(tokenAmountToBigInt(tokenAmountRef.current, token?.decimals));\n  });\n\n  const onTokenChange = useLastCallback((id: string, newToken?: CurrentToken) => {\n    setToken?.(id);\n\n    if (newToken) {\n      // The goal is to make the new token and the new amount arrive in the same next render.\n      // Otherwise, the token amount won't change until the next render (by an above `useSyncEffect`).\n      // This could cause unwanted visual glitches like a blinking balance error.\n      setAndReportAmountFromPrice(newToken.price, newToken.decimals);\n    }\n  });\n\n  return {\n    isBaseCurrency,\n    isAmountReadonly,\n    inputValue: isBaseCurrency ? currencyAmountRef.current : tokenAmountRef.current,\n    alternativeValue: isBaseCurrency ? tokenAmountRef.current : currencyAmountRef.current,\n    switchCurrency: setIsBaseCurrency,\n    onInputChange,\n    onTokenChange,\n  };\n}\n\nfunction tokenAmountToCurrencyAmount(\n  amount: string | undefined,\n  tokenPrice: number | undefined,\n  currencyDecimals: number,\n) {\n  return amount && tokenPrice !== undefined\n    ? Big(amount).mul(tokenPrice).round(currencyDecimals).toString()\n    : undefined;\n}\n\nfunction currencyAmountToTokenAmount(\n  amount: string | undefined,\n  tokenPrice: number | undefined,\n  tokenDecimals: number | undefined,\n) {\n  // Avoiding dividing by zero for tokens with price 0\n  return amount && tokenPrice\n    ? Big(amount).div(tokenPrice).round(tokenDecimals ?? DEFAULT_DECIMALS).toString()\n    : undefined;\n}\n\nfunction tokenAmountToBigInt(amount: string | undefined, decimals: number | undefined) {\n  return amount\n    ? fromDecimal(amount, decimals)\n    : undefined;\n}\n\nfunction tokenAmountFromBigInt(amount: bigint | undefined, decimals: number | undefined) {\n  return amount === undefined\n    ? undefined\n    : toDecimal(amount, decimals);\n}\n\n/** For example, turns '1.2300' into '1.23' */\nfunction formalizeStringAmount(amount: string | undefined) {\n  if (!amount) {\n    return undefined;\n  }\n\n  if (!amount.includes('.')) {\n    return amount;\n  }\n\n  let end = amount.length;\n  while (amount[end - 1] === '0') {\n    end--;\n  }\n  if (amount[end - 1] === '.') {\n    end--;\n  }\n\n  return amount.slice(0, end);\n}\n","import { useMemo } from '../../../lib/teact/teact';\n\nimport type { ApiStakingState } from '../../../api/types';\nimport type { AmountInputToken } from '../../ui/AmountInput';\n\nimport { getIsActiveStakingState } from '../../../util/staking';\n\ninterface Options {\n  tokenBySlug?: Record<string, AmountInputToken>;\n  states?: ApiStakingState[];\n  shouldUseNominators?: boolean;\n  selectedStakingId?: string;\n  isViewMode?: boolean;\n}\n\nexport function useTokenDropdown({\n  tokenBySlug, states, shouldUseNominators, selectedStakingId, isViewMode,\n}: Options) {\n  const selectableTokens = useMemo(() => {\n    if (!tokenBySlug || !states) {\n      return [];\n    }\n\n    let tokens = getStakingTokens(tokenBySlug, states, shouldUseNominators);\n\n    if (isViewMode) {\n      tokens = tokens.filter(({ id }) => id === selectedStakingId);\n    }\n\n    return tokens;\n  }, [tokenBySlug, states, shouldUseNominators, isViewMode, selectedStakingId]);\n\n  const selectedToken = useMemo(\n    () => selectableTokens.find((token) => token.id === selectedStakingId),\n    [selectableTokens, selectedStakingId],\n  );\n\n  return [selectedToken, selectableTokens] as const;\n}\n\nfunction getStakingTokens(\n  tokenBySlug: Record<string, AmountInputToken>,\n  states: ApiStakingState[],\n  shouldUseNominators?: boolean,\n) {\n  const hasNominatorsStake = states.some((state) => state.type === 'nominators' && getIsActiveStakingState(state));\n  const hasLiquidStake = states.some((state) => state.type === 'liquid' && getIsActiveStakingState(state));\n\n  if (shouldUseNominators && !hasLiquidStake) {\n    states = states.filter((state) => state.type !== 'liquid');\n  }\n\n  if (!shouldUseNominators && !hasNominatorsStake) {\n    states = states.filter((state) => state.type !== 'nominators');\n  }\n\n  return states\n    .filter((state) => tokenBySlug[state.tokenSlug])\n    .map<AmountInputToken>((state) => ({\n      ...tokenBySlug[state.tokenSlug],\n      id: state.id,\n    }));\n}\n","import { useMemo, useRef } from '../lib/teact/teact';\n\n// Use this hook to bind `<Transition />` animation to changes in the dependency array.\n// Use optional parameter `noAnimation` if you want to prevent the animation even if the dependency array changes.\nexport function useTransitionActiveKey(deps: unknown[], noAnimation?: boolean): number {\n  const activeKey = useRef(0);\n\n  useMemo(() => {\n    if (!noAnimation) activeKey.current += 1;\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, deps);\n\n  return activeKey.current;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"OEF25dXJ\",\"content\":\"zfocSjTR\",\"link\":\"KwAXOVQ_\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiToken } from '../../api/types';\n\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency, formatCurrencySimple } from '../../util/formatNumber';\n\nimport useLang from '../../hooks/useLang';\nimport { useTransitionActiveKey } from '../../hooks/useTransitionActiveKey';\n\nimport Transition from './Transition';\n\nimport styles from './AmountInputMaxButton.module.scss';\n\ninterface OwnProps {\n  maxAmount?: bigint;\n  token?: Pick<ApiToken, 'symbol' | 'decimals'>;\n  isLoading?: boolean;\n  isSensitiveDataHidden?: boolean;\n  /** If true, the label will say \"All\" instead of \"Max\" and all the amount digits will be shown (made for unstaking) */\n  isAllMode?: boolean;\n  onAmountClick(maxAmount?: bigint): void;\n}\n\n/**\n * Put the element right above a <RichNumberInput />, it will take the space right to the input label without moving the\n * around content.\n */\nfunction AmountInputMaxButton({\n  maxAmount,\n  token,\n  isLoading,\n  isSensitiveDataHidden,\n  isAllMode,\n  onAmountClick,\n}: OwnProps) {\n  const lang = useLang();\n\n  const content = isLoading\n    ? lang('Loading...')\n    : !token || maxAmount === undefined\n      ? ''\n      : isSensitiveDataHidden\n        ? `*** ${token.symbol}`\n        : isAllMode\n          ? formatCurrencySimple(maxAmount, token.symbol, token.decimals)\n          : formatCurrency(toDecimal(maxAmount, token.decimals), token.symbol);\n\n  const transitionKey = useTransitionActiveKey([!content, token?.symbol, isLoading, isSensitiveDataHidden]);\n\n  return (\n    <Transition\n      name=\"fade\"\n      activeKey={transitionKey}\n      shouldCleanup\n      className={styles.container}\n    >\n      {content && (\n        <span className={styles.content}>\n          {lang(isAllMode ? '$all_balance' : '$max_balance', {\n            balance: (\n              <div\n                role=\"button\"\n                tabIndex={0}\n                onClick={() => onAmountClick(maxAmount)}\n                className={styles.link}\n              >\n                {content}\n              </div>\n            ),\n          })}\n        </span>\n      )}\n    </Transition>\n  );\n}\n\nexport default memo(AmountInputMaxButton);\n","// extracted by mini-css-extract-plugin\nexport default {\"dropdown\":\"ZNn8fpqd\",\"dropdown__prefix\":\"u0_9mbdz\",\"dropdownPrefix\":\"u0_9mbdz\",\"prefix\":\"yhhTwepY\",\"purple\":\"fP_2Gh_l\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { ApiTokenWithPrice } from '../../api/types';\n\nimport getChainNetworkIcon from '../../util/swap/getChainNetworkIcon';\nimport { ASSET_LOGO_PATHS } from './helpers/assetLogos';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Dropdown, { type DropdownItem } from './Dropdown';\n\nimport styles from './TokenDropdown.module.scss';\n\nexport type TokenWithId = Pick<ApiTokenWithPrice, 'slug' | 'symbol' | 'image' | 'chain'> & {\n  /**\n   * The token unique id to use instead of slug.\n   * Made for cases when there multiple dropdown items with the same token.\n   */\n  id?: string;\n};\n\ninterface OwnProps<T extends TokenWithId> {\n  selectedToken?: T | string;\n  allTokens?: T[];\n  isMultichainAccount?: boolean;\n  theme?: 'purple';\n  isInMode?: boolean;\n  /** `id` is the token slug, unless an `id` property is specified explicitly in the `allTokens` items */\n  onChange?: (id: string, token: T) => void;\n}\n\nconst EMPTY_TOKEN_LIST: never[] = [];\n\nfunction TokenDropdown<T extends TokenWithId>({\n  selectedToken,\n  allTokens = EMPTY_TOKEN_LIST,\n  isMultichainAccount,\n  theme,\n  isInMode,\n  onChange,\n}: OwnProps<T>) {\n  const lang = useLang();\n\n  const buttonPrefixText = lang('$in_currency', { currency: '' });\n  const buttonPrefix = useMemo(\n    () => {\n      return isInMode && (\n        <span className={styles.prefix}>\n          {buttonPrefixText}\n        </span>\n      );\n    },\n    [isInMode, buttonPrefixText],\n  );\n\n  const items = useMemo(\n    () => allTokens.map((token) => tokenToDropdownItem(token, isMultichainAccount)),\n    [allTokens, isMultichainAccount],\n  );\n\n  const tokenById = useMemo(\n    () => allTokens.reduce<Record<string, T>>((byId, token) => {\n      byId[getTokenId(token)] = token;\n      return byId;\n    }, {}),\n    [allTokens],\n  );\n\n  const handleChange = useLastCallback((id: string) => {\n    const token = tokenById[id];\n    onChange?.(id, token);\n  });\n\n  if (!items.length) {\n    return undefined;\n  }\n\n  const selectedTokenId = !selectedToken || typeof selectedToken === 'string'\n    ? selectedToken\n    : getTokenId(selectedToken);\n\n  return (\n    <Dropdown\n      items={items}\n      selectedValue={selectedTokenId}\n      buttonPrefix={buttonPrefix}\n      className={styles.dropdown}\n      menuClassName={theme && styles[theme]}\n      onChange={handleChange}\n    />\n  );\n}\n\nexport default memo(TokenDropdown);\n\nexport function getTokenId(token: TokenWithId) {\n  return token.id ?? token.slug;\n}\n\nexport function tokenToDropdownItem(token: TokenWithId, isMultichainAccount?: boolean): DropdownItem {\n  return {\n    value: getTokenId(token),\n    icon: ASSET_LOGO_PATHS[token.symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS]\n      || token.image,\n    overlayIcon: isMultichainAccount ? getChainNetworkIcon(token.chain) : undefined,\n    name: token.symbol,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"u5uvgNoY\",\"container__slide\":\"OeHWkJFQ\",\"containerSlide\":\"OeHWkJFQ\",\"input\":\"me9Fg5VF\",\"bottom\":\"xPmDv9gI\",\"bottom__right\":\"uMCMe6l_\",\"bottomRight\":\"uMCMe6l_\",\"alternative\":\"hx_H7UUP\",\"alternative__icon\":\"Agk5w0hD\",\"alternativeIcon\":\"Agk5w0hD\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useEffect, useRef } from '../../lib/teact/teact';\n\nimport type { ApiTokenWithPrice } from '../../api/types';\nimport type { AmountInputStateOutput } from './hooks/useAmountInputState';\nimport type { TokenWithId } from './TokenDropdown';\n\nimport { CURRENCIES } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport { setCancellableTimeout } from '../../util/schedulers';\nimport { SEC } from '../../api/constants';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nimport AmountInputMaxButton from './AmountInputMaxButton';\nimport RichNumberInput, { focusAtTheEnd } from './RichNumberInput';\nimport TokenDropdown from './TokenDropdown';\nimport Transition from './Transition';\n\nimport styles from './AmountInput.module.scss';\n\nexport type AmountInputToken = TokenWithId & Pick<ApiTokenWithPrice, 'price' | 'decimals'>;\n\ninterface OwnProps extends AmountInputStateOutput {\n  /** Expressed in `token` regardless of `isBaseCurrency` */\n  maxAmount?: bigint;\n  token: AmountInputToken | undefined;\n  allTokens?: AmountInputToken[];\n  isStatic?: boolean;\n  hasError: boolean;\n  isMultichainAccount?: boolean;\n  isSensitiveDataHidden?: true;\n  isMaxAmountLoading?: boolean;\n  /** If true, the max amount label will say \"All\" instead of \"Max\" and all the amount digits will be shown (made for unstaking) */\n  isMaxAmountAllMode?: boolean;\n  labelText?: TeactNode;\n  renderBottomRight: (className: string) => TeactNode;\n  onPressEnter?: (e: React.KeyboardEvent<HTMLDivElement>) => void;\n}\n\nfunction AmountInput({\n  isBaseCurrency,\n  inputValue,\n  alternativeValue,\n  baseCurrency,\n  maxAmount,\n  token,\n  allTokens,\n  isStatic,\n  hasError,\n  isMultichainAccount,\n  isSensitiveDataHidden,\n  isMaxAmountLoading,\n  isMaxAmountAllMode,\n  renderBottomRight,\n  isAmountReadonly,\n  labelText,\n  onTokenChange,\n  onPressEnter,\n  onInputChange,\n  onMaxAmountClick,\n  onAlternativeAmountClick,\n}: OwnProps) {\n  const lang = useLang();\n  const transitionKey = isBaseCurrency ? 0 : 1;\n  const { inputId, onInputFocus, onInputBlur, onClick: keepInputFocus } = useKeepInputFocus(transitionKey);\n\n  const handleMaxAmountClick = useLastCallback(() => {\n    onMaxAmountClick(maxAmount);\n    keepInputFocus();\n  });\n\n  function renderBalance() {\n    return (\n      <AmountInputMaxButton\n        maxAmount={isAmountReadonly ? undefined : maxAmount}\n        token={token}\n        isLoading={isMaxAmountLoading}\n        isAllMode={isMaxAmountAllMode}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        onAmountClick={handleMaxAmountClick}\n      />\n    );\n  }\n\n  function renderInput() {\n    let prefix: string | undefined;\n    let suffix: string | undefined;\n\n    if (isBaseCurrency) {\n      const { shortSymbol } = CURRENCIES[baseCurrency];\n      if (shortSymbol) {\n        prefix = shortSymbol;\n      } else {\n        suffix = baseCurrency;\n      }\n    }\n\n    return (\n      <RichNumberInput\n        id={inputId}\n        hasError={hasError}\n        value={inputValue}\n        labelText={labelText ?? lang('Amount')}\n        decimals={isBaseCurrency ? CURRENCIES[baseCurrency].decimals : token?.decimals}\n        className={styles.input}\n        isStatic={isStatic}\n        prefix={prefix}\n        suffix={suffix}\n        disabled={isAmountReadonly}\n        onChange={onInputChange}\n        onPressEnter={onPressEnter}\n        onFocus={onInputFocus}\n        onBlur={onInputBlur}\n      >\n        {renderTokens()}\n      </RichNumberInput>\n    );\n  }\n\n  function renderTokens() {\n    return (\n      <TokenDropdown<AmountInputToken>\n        selectedToken={token}\n        allTokens={allTokens}\n        isInMode={isBaseCurrency}\n        isMultichainAccount={isMultichainAccount}\n        onChange={onTokenChange}\n      />\n    );\n  }\n\n  function renderAlternativeAmount() {\n    const symbol = isBaseCurrency\n      ? (token?.symbol ?? '')\n      : getShortCurrencySymbol(baseCurrency);\n\n    const onClick = () => {\n      onAlternativeAmountClick();\n      keepInputFocus();\n    };\n\n    // The main reason to use <button> is preventing the comment type selector (which is also a <button>) from hijacking\n    // the clicks on touch screens.\n    return (\n      <button type=\"button\" className={styles.alternative} onClick={onClick}>\n        &thinsp;\n        {formatCurrency(alternativeValue ?? 0, symbol, undefined, true)}\n        <i className={buildClassName(styles.alternative__icon, 'icon-switch')} aria-hidden />\n      </button>\n    );\n  }\n\n  return (\n    <Transition\n      activeKey={transitionKey}\n      name=\"semiFade\"\n      shouldCleanup\n      className={styles.container}\n      slideClassName={styles.container__slide}\n    >\n      {renderBalance()}\n      {renderInput()}\n      <div className={styles.bottom}>\n        {renderAlternativeAmount()}\n        {renderBottomRight(styles.bottom__right)}\n      </div>\n    </Transition>\n  );\n}\n\nexport default memo(AmountInput);\n\n/**\n * Clicking the currency switch button un-focuses the input. This creates a bad UX with virtual keyboard.\n * To improve the UX, we focus the input back when the user clicks the currency switch button.\n * We focus only if the input was focused before the click, because Native Bottom Sheet renders a couple blank\n * frames when the virtual keyboard is not open and the focus is triggered programmatically.\n */\nfunction useKeepInputFocus(transitionKey: number) {\n  const inputId = `${useUniqueId()}_${transitionKey}`;\n  const isFocused = useRef(false);\n  const cancelFocusTimer = useRef<NoneToVoidFunction>();\n  const inputFocusPersistDuration = 0.5 * SEC;\n\n  const onInputFocus = useLastCallback(() => {\n    cancelFocusTimer.current?.();\n    isFocused.current = true;\n  });\n\n  const onInputBlur = useLastCallback(() => {\n    cancelFocusTimer.current?.();\n    cancelFocusTimer.current = setCancellableTimeout(inputFocusPersistDuration, () => {\n      isFocused.current = false;\n    });\n  });\n\n  const onClick = () => {\n    if (isFocused.current) {\n      focusAtTheEnd(inputId); // To keep the virtual keyboard open\n    }\n  };\n\n  // The input element is replaced as a result of the transition, so we need to focus the new input\n  useEffect(() => {\n    if (isFocused.current) {\n      focusAtTheEnd(inputId);\n    }\n  }, [transitionKey]); // eslint-disable-line react-hooks-static-deps/exhaustive-deps\n\n  return { inputId, onInputFocus, onInputBlur, onClick };\n}\n","import { TONCOIN } from '../../config';\nimport withCache from '../../util/withCache';\n\nexport const getNumberRegex = withCache((decimals: number): RegExp => {\n  return decimals === 0\n    ? /^(\\d+)/\n    : new RegExp(`^(\\\\d+)([.,])?(\\\\d{1,${decimals}})?`);\n});\n\nexport function getNumberParts(value: string, decimals: number = TONCOIN.decimals) {\n  const regex = getNumberRegex(decimals);\n  return value.match(regex) || undefined;\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useLayoutEffect, useRef } from '../../lib/teact/teact';\n\nimport type { SensitiveDataMaskSkin } from '../common/SensitiveDataMask';\n\nimport { FRACTION_DIGITS } from '../../config';\nimport { getNumberRegex } from '../../global/helpers/number';\nimport buildClassName from '../../util/buildClassName';\nimport { buildContentHtml } from './helpers/buildContentHtml';\n\nimport useFontScale from '../../hooks/useFontScale';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SensitiveData from './SensitiveData';\n\nimport styles from './Input.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  labelText?: string;\n  value?: string;\n  error?: string;\n  prefix?: string;\n  suffix?: string;\n  zeroValue?: string;\n  decimals?: number;\n  className?: string;\n  isSensitiveData?: true;\n  isSensitiveDataHidden?: true;\n  sensitiveDataMaskSkin?: SensitiveDataMaskSkin;\n  isStatic?: boolean;\n  inputClassName?: string;\n  labelClassName?: string;\n  valueClassName?: string;\n  children?: TeactNode;\n};\n\nconst MIN_LENGTH_FOR_SHRINK = 5;\n\nfunction RichNumberField({\n  id,\n  labelText,\n  value,\n  error,\n  prefix,\n  suffix,\n  zeroValue,\n  decimals = FRACTION_DIGITS,\n  className,\n  isSensitiveData,\n  isSensitiveDataHidden,\n  sensitiveDataMaskSkin,\n  isStatic,\n  inputClassName,\n  labelClassName,\n  valueClassName,\n  children,\n}: OwnProps) {\n  const contentRef = useRef<HTMLInputElement>();\n  const prevValueRef = useRef<string>('');\n  const { updateFontScale, isFontChangedRef } = useFontScale(contentRef, true);\n\n  const renderValue = useLastCallback((inputValue = '', noFallbackToPrev = false) => {\n    const contentEl = contentRef.current!;\n\n    const valueRegex = getNumberRegex(decimals);\n    const values = inputValue.match(valueRegex);\n\n    // eslint-disable-next-line no-null/no-null\n    if (values === null || values.length < 4 || values[0] === '') {\n      if (noFallbackToPrev || inputValue === '') {\n        prevValueRef.current = '';\n        contentEl.innerText = '';\n      } else {\n        renderValue(prevValueRef.current, true);\n      }\n\n      return;\n    }\n    const textContent = values?.[0] || '';\n    prevValueRef.current = inputValue;\n\n    contentEl.innerHTML = buildContentHtml(inputValue, prefix, suffix, decimals, true);\n\n    if (textContent.length > MIN_LENGTH_FOR_SHRINK || isFontChangedRef.current) {\n      updateFontScale();\n    }\n  });\n\n  useLayoutEffect(() => {\n    if (value) {\n      renderValue(value);\n    } else if (zeroValue) {\n      contentRef.current!.textContent = zeroValue;\n    }\n  }, [prefix, suffix, decimals, renderValue, value, zeroValue]);\n\n  const inputWrapperFullClass = buildClassName(\n    styles.input__wrapper,\n    isStatic && styles.inputWrapperStatic,\n    inputClassName,\n  );\n  const inputFullClass = buildClassName(\n    styles.rich__value,\n    styles.input,\n    styles.large,\n    styles.disabled,\n    error && styles.error,\n    'rounded-font',\n    valueClassName,\n  );\n  const labelTextClassName = buildClassName(\n    styles.label,\n    labelClassName,\n  );\n\n  return (\n    <div className={buildClassName(styles.wrapper, className)}>\n      {error && (\n        <label className={buildClassName(styles.label, styles.label_error, styles.error)} htmlFor={id}>{error}</label>\n      )}\n      {labelText && (\n        <label\n          className={labelTextClassName}\n          htmlFor={id}\n          id={`${id}Label`}\n        >\n          {labelText}\n        </label>\n      )}\n      <div className={inputWrapperFullClass}>\n        {isSensitiveData ? (\n          <SensitiveData\n            isActive={isSensitiveDataHidden}\n            cols={8}\n            rows={3}\n            cellSize={16}\n            maskSkin={sensitiveDataMaskSkin}\n            // Adding `.large` to remove the excessive bottom padding created by SensitiveData (the `height` property does the job)\n            className={buildClassName(styles.rich, styles.large)}\n            maskClassName={styles.mask}\n          >\n            <div ref={contentRef} id={id} className={inputFullClass} />\n          </SensitiveData>\n        ) : (\n          <div className={styles.rich}>\n            <div ref={contentRef} id={id} className={inputFullClass} />\n          </div>\n        )}\n        {children}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(RichNumberField);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"oJIiPolp\",\"welcome\":\"TiFPq3C6\",\"welcome_static\":\"Rv6oYnJ8\",\"welcomeStatic\":\"Rv6oYnJ8\",\"welcomeInformation\":\"Xg9cqUJJ\",\"welcomeInformation_static\":\"o_nJd5KS\",\"welcomeInformationStatic\":\"o_nJd5KS\",\"stakingApy\":\"HKeaaGYy\",\"textButton\":\"fole9hpS\",\"sticker\":\"bPhlS4F_\",\"sticker_static\":\"uaQ89610\",\"stickerStatic\":\"uaQ89610\",\"stakingSafeDialog\":\"zNAkvVGS\",\"amountBottomRight\":\"VuUMtt0r\",\"amountBottomRight_error\":\"XziKGimY\",\"amountBottomRightError\":\"XziKGimY\",\"amountBottomRight_slide\":\"D7jfmDqZ\",\"amountBottomRightSlide\":\"D7jfmDqZ\",\"animating\":\"idaRXWqT\",\"from\":\"w5MTAdBs\",\"to\":\"OH6m_v4W\",\"balanceError\":\"XV91oi_1\",\"historyTotalValue\":\"ps_1E9fe\",\"stakingBalance\":\"ZzjyhAIi\",\"balanceResultWrapper\":\"vtSKtwOl\",\"balanceResultWrapper__slide\":\"ri2mpmSG\",\"balanceResultWrapperSlide\":\"ri2mpmSG\",\"balanceResultInput\":\"oiRjkkEM\",\"balanceResultLabel\":\"h10QGypW\",\"balanceStakedLabel\":\"DlWk_wtQ\",\"balanceStakedResult\":\"Zvcxz1_r\",\"balanceResult\":\"ANb8RM_U\",\"stakingInfoModal\":\"WPEajhsz\",\"stakingInfoModal_withHistory\":\"RmyjusO4\",\"stakingInfoModalWithHistory\":\"RmyjusO4\",\"stakingInfo\":\"jqjfDFur\",\"stakingInfo_modal\":\"WPEajhsz\",\"stakingInfoNoHistory\":\"JhvH7wqN\",\"stakingInfoModalContent\":\"adkWFcPE\",\"history\":\"vrPulHrK\",\"historyList\":\"Y0yHbYn0\",\"withBackground\":\"seOnXIX2\",\"stakingInfoLoading\":\"FpmrUch0\",\"stakingInfoLoadingAnimation\":\"HhFmzxoC\",\"stakingInfoClose\":\"hUegI624\",\"stakingInfoButtons\":\"p0aoyqxp\",\"stakingInfoButtons_withMargin\":\"pa9mJcSA\",\"stakingInfoButtonsWithMargin\":\"pa9mJcSA\",\"stakingInfoButtons_adaptiveWidth\":\"KhWpHXOV\",\"stakingInfoButtonsAdaptiveWidth\":\"KhWpHXOV\",\"stakingInfoButton\":\"ANY2XY_3\",\"checkEligibilityButton\":\"aM6EzHZ6\",\"insufficientBalance\":\"rGOjgmuu\",\"unstakeTime\":\"AQ56tknq\",\"unstakeTime_purple\":\"LqS98rhM\",\"unstakeTimePurple\":\"LqS98rhM\",\"unstakeTimeIcon\":\"tyhEzoP5\",\"history_static\":\"s2VvvIeZ\",\"historyStatic\":\"s2VvvIeZ\",\"historyTotal\":\"saWAKbAc\",\"historyTitle\":\"Y0cCgJMS\",\"historyList_static\":\"axMdO17j\",\"historyListStatic\":\"axMdO17j\",\"transactionBanner\":\"qrdHJFDS\",\"unstakeInfoTransition\":\"dyqJuGUL\",\"unstakeInfo\":\"m1LUZiWL\"};","import { Dialog } from '@capacitor/dialog';\nimport React, { memo, type TeactNode, useCallback, useEffect, useMemo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiStakingState, ApiTokenWithPrice } from '../../api/types';\nimport type { UserToken } from '../../global/types';\nimport type { Big } from '../../lib/big.js';\nimport { StakingState } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_MIDDLE_SIZE_PX,\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  CURRENCIES,\n  DEFAULT_PRICE_CURRENCY,\n  ETHENA_ELIGIBILITY_CHECK_URL,\n  JVAULT_URL,\n  SHORT_FRACTION_DIGITS,\n  TONCOIN,\n} from '../../config';\nimport { getHelpCenterUrl } from '../../global/helpers/getHelpCenterUrl';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectAccountStakingState,\n  selectAccountStakingStates,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsCurrentAccountViewMode,\n} from '../../global/selectors';\nimport { bigintMax } from '../../util/bigint';\nimport buildClassName from '../../util/buildClassName';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { stopEvent } from '../../util/domEvents';\nimport { getTonStakingFees } from '../../util/fee/getTonOperationFees';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { vibrate } from '../../util/haptics';\nimport { openUrl } from '../../util/openUrl';\nimport { throttle } from '../../util/schedulers';\nimport { getStakingMinAmount, getStakingTitle } from '../../util/staking';\nimport { buildUserToken, getIsNativeToken, getNativeToken } from '../../util/tokens';\nimport calcJettonStakingApr from '../../util/ton/calcJettonStakingApr';\nimport { getHostnameFromUrl } from '../../util/url';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useSyncEffect from '../../hooks/useSyncEffect';\nimport { useAmountInputState } from '../ui/hooks/useAmountInputState';\nimport { useTokenDropdown } from './hooks/useTokenDropdown';\n\nimport AmountInput from '../ui/AmountInput';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport Modal from '../ui/Modal';\nimport RichNumberField from '../ui/RichNumberField';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Staking.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n}\n\ninterface StateProps {\n  isLoading?: boolean;\n  isViewMode: boolean;\n  apiError?: string;\n  tokens?: UserToken[];\n  tokenBySlug?: Record<string, ApiTokenWithPrice>;\n  stakingState?: ApiStakingState;\n  states?: ApiStakingState[];\n  shouldUseNominators?: boolean;\n  isSensitiveDataHidden?: true;\n  baseCurrency: ApiBaseCurrency;\n}\n\nconst enum BottomRightSlide {\n  Fee,\n  InsufficientBalance,\n  InsufficientFee,\n  BelowMinimumAmount,\n  ApiError,\n}\n\nconst ACTIVE_STATES = new Set([StakingState.StakeInitial, StakingState.None]);\n\nconst runThrottled = throttle((cb) => cb(), 1500, true);\n\nfunction StakingInitial({\n  isActive,\n  isStatic,\n  isLoading,\n  isViewMode,\n  apiError,\n  tokens,\n  tokenBySlug,\n  stakingState,\n  states,\n  shouldUseNominators,\n  isSensitiveDataHidden,\n  baseCurrency,\n}: OwnProps & StateProps) {\n  const {\n    submitStakingInitial, fetchStakingFee, cancelStaking, changeCurrentStaking,\n  } = getActions();\n\n  const lang = useLang();\n\n  const [isSafeInfoModalOpen, openSafeInfoModal, closeSafeInfoModal] = useFlag();\n  const [amount, setAmount] = useState<bigint | undefined>();\n  let isIncorrectAmount = false;\n  let isInsufficientBalance = false;\n  let isInsufficientFee = false;\n  let isBelowMinimumAmount = false;\n\n  const {\n    id: stakingId,\n    type: stakingType,\n    tokenSlug,\n  } = stakingState ?? {};\n\n  const token: UserToken | undefined = useMemo(() => {\n    if (!tokenSlug || !tokens || !tokenBySlug) return undefined;\n    let userToken = tokens.find(({ slug }) => slug === tokenSlug);\n    if (!userToken && tokenSlug in tokenBySlug) {\n      userToken = buildUserToken(tokenBySlug[tokenSlug]);\n    }\n    return userToken;\n  }, [tokenSlug, tokens, tokenBySlug]);\n  const { amount: balance = 0n, symbol, decimals = TONCOIN.decimals } = token ?? {};\n\n  let { annualYield = 0 } = stakingState ?? {};\n  let annualYieldText = `${annualYield}%`;\n  if (stakingState?.type === 'jetton' && amount) {\n    annualYield = calcJettonStakingApr({\n      tvl: stakingState.tvl + amount,\n      dailyReward: stakingState.dailyReward,\n      decimals,\n    });\n  } else if (stakingState?.type === 'ethena') {\n    const { annualYieldStandard, annualYieldVerified } = stakingState;\n    annualYieldText = `${annualYieldStandard}%${annualYieldVerified}%`;\n  }\n\n  const isNativeToken = getIsNativeToken(token?.slug);\n  const nativeToken = useMemo(() => {\n    if (!tokens || !token) return undefined;\n    if (isNativeToken) return token;\n    const nativeSlug = getNativeToken(token.chain).slug;\n    return tokens.find(({ slug }) => slug === nativeSlug);\n  }, [tokens, token, isNativeToken]);\n  const nativeBalance = nativeToken?.amount ?? 0n;\n\n  const minAmount = getStakingMinAmount(stakingType);\n\n  const { gas: networkFee, real: realFee } = getTonStakingFees(stakingState?.type).stake;\n\n  const nativeAmount = isNativeToken && amount ? amount + networkFee : networkFee;\n  const doubleNetworkFee = networkFee * 2n;\n  const shouldLeaveForUnstake = isNativeToken && balance >= doubleNetworkFee;\n  const maxAmount = (() => {\n    let value = balance;\n    if (isNativeToken && value) {\n      value -= shouldLeaveForUnstake ? doubleNetworkFee : networkFee;\n    }\n    return bigintMax(0n, value);\n  })();\n\n  const title = getStakingTitle();\n\n  if (amount !== undefined) {\n    if (Number.isNaN(amount) || amount < 0) {\n      isIncorrectAmount = true;\n    } else if (amount < minAmount) {\n      isBelowMinimumAmount = true;\n    } else if (!maxAmount || amount > balance) {\n      isInsufficientBalance = true;\n    } else if (nativeBalance < networkFee || (isNativeToken && nativeAmount > balance)) {\n      isInsufficientFee = true;\n    }\n  }\n\n  const [selectedToken, selectableTokens] = useTokenDropdown({\n    tokenBySlug,\n    states,\n    shouldUseNominators,\n    selectedStakingId: stakingId,\n  });\n\n  const handleHelpCenterClick = useLastCallback(() => {\n    const url = getHelpCenterUrl(lang.code, 'ethenaStaking');\n    void openUrl(url, { title: lang('Help Center'), subtitle: getHostnameFromUrl(url) });\n  });\n\n  useEffect(() => {\n    if (!amount) {\n      return;\n    }\n\n    runThrottled(() => {\n      fetchStakingFee({\n        amount,\n      });\n    });\n  }, [amount, fetchStakingFee]);\n\n  useSyncEffect(() => {\n    if (!IS_DELEGATED_BOTTOM_SHEET) return;\n\n    if (isSafeInfoModalOpen) {\n      let text: string[];\n      switch (stakingState?.type) {\n        case 'jetton':\n          text = [\n            // We use `replace` instead of `lang` argument to avoid JSX output\n            `${lang('$safe_staking_description_jetton1').replace('%jvault_link%', 'JVault')}`,\n            `${lang('$safe_staking_description_jetton2')}`,\n          ];\n          break;\n        case 'ethena':\n          text = [\n            `1. ${lang('$safe_staking_ethena_description1')}`,\n            `2. ${lang('$safe_staking_ethena_description2')}`,\n            `3. ${lang('$safe_staking_ethena_description3')}`,\n          ];\n          break;\n        default:\n          text = [\n            `1. ${lang('$safe_staking_description1')}`,\n            `2. ${lang('$safe_staking_description2')}`,\n            `3. ${lang('$safe_staking_description3')}`,\n          ];\n      }\n\n      if (stakingState?.type === 'ethena') {\n        void Dialog.confirm({\n          title: lang(title),\n          message: text.join('\\n\\n').replace(/\\*\\*/g, ''),\n          okButtonTitle: lang('Close'),\n          cancelButtonTitle: lang('Help Center'),\n        })\n          .then((result) => {\n            closeSafeInfoModal();\n\n            if (!result.value) {\n              handleHelpCenterClick();\n            }\n          });\n      } else {\n        void Dialog.alert({\n          title: lang(title),\n          message: text.join('\\n\\n').replace(/\\*\\*/g, ''),\n        })\n          .then(closeSafeInfoModal);\n      }\n    }\n  }, [isSafeInfoModalOpen, lang, stakingState, title]);\n\n  const canSubmit = amount\n    && maxAmount\n    && !isViewMode\n    && !isIncorrectAmount\n    && !isBelowMinimumAmount\n    && !isInsufficientFee\n    && !isInsufficientBalance;\n\n  const handleSubmit = useLastCallback((e: React.FormEvent | React.UIEvent) => {\n    stopEvent(e);\n\n    if (!canSubmit) {\n      return;\n    }\n\n    void vibrate();\n\n    submitStakingInitial({ amount });\n  });\n\n  const handleCheckEligibility = useLastCallback(() => {\n    void openUrl(ETHENA_ELIGIBILITY_CHECK_URL);\n  });\n\n  const [error, errorTransitionKey] = useMemo(() => {\n    if (isInsufficientBalance) {\n      return [\n        lang('Insufficient balance'),\n        BottomRightSlide.InsufficientBalance,\n      ];\n    }\n\n    if (isInsufficientFee) {\n      return [\n        lang('$insufficient_fee', { fee: formatCurrency(toDecimal(networkFee), nativeToken?.symbol ?? '') }),\n        BottomRightSlide.InsufficientFee,\n      ];\n    }\n\n    if (isBelowMinimumAmount) {\n      return [\n        lang('$min_value', { value: formatCurrency(toDecimal(minAmount, decimals), symbol ?? '') }),\n        BottomRightSlide.BelowMinimumAmount,\n      ];\n    }\n\n    return apiError\n      ? [lang(apiError), BottomRightSlide.ApiError]\n      : [undefined, BottomRightSlide.Fee];\n  }, [\n    apiError, decimals, isBelowMinimumAmount, isInsufficientBalance, isInsufficientFee, lang, minAmount,\n    nativeToken?.symbol, networkFee, symbol,\n  ]);\n\n  // It is necessary to use useCallback instead of useLastCallback here\n  const renderBottomRight = useCallback((className?: string) => {\n    let content: string | TeactNode[] | React.JSX.Element = ' ';\n\n    if (error) {\n      content = (\n        <span className={styles.balanceError}>{error}</span>\n      );\n    } else {\n      content = token ? lang('$fee_value', {\n        fee: <Fee terms={{ native: realFee }} precision=\"approximate\" token={token} />,\n      }) : '';\n    }\n\n    return (\n      <Transition\n        className={buildClassName(\n          styles.amountBottomRight,\n          isIncorrectAmount && styles.amountBottomRight_error,\n          className,\n        )}\n        slideClassName={styles.amountBottomRight_slide}\n        name=\"semiFade\"\n        activeKey={errorTransitionKey}\n      >\n        {content}\n      </Transition>\n    );\n  }, [error, errorTransitionKey, isIncorrectAmount, lang, realFee, token]);\n\n  function renderJettonDescription() {\n    return (\n      <>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description_jetton1', {\n            jvault_link: (\n              <a href={JVAULT_URL} target=\"_blank\" rel=\"noreferrer\"><b>JVault</b></a>\n            ),\n          }))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description_jetton2'))}\n        </p>\n      </>\n    );\n  }\n\n  function renderTonDescription() {\n    return (\n      <>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description1'))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description2'))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description3'))}\n        </p>\n      </>\n    );\n  }\n\n  function renderEthenaDescription() {\n    return (\n      <>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_ethena_description1'))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_ethena_description2'))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_ethena_description3'))}\n        </p>\n      </>\n    );\n  }\n\n  function renderSafeDescription() {\n    switch (stakingState!.type) {\n      case 'jetton':\n        return renderJettonDescription();\n\n      case 'ethena':\n        return renderEthenaDescription();\n\n      default:\n        return renderTonDescription();\n    }\n  }\n\n  function renderSafeInfoModal() {\n    if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    return (\n      <Modal\n        isCompact\n        isOpen={isSafeInfoModalOpen}\n        title={lang(title)}\n        onClose={closeSafeInfoModal}\n        dialogClassName={styles.stakingSafeDialog}\n      >\n        {!!stakingState && renderSafeDescription()}\n        <div className={modalStyles.buttons}>\n          {stakingState!.type === 'ethena' && (\n            <Button onClick={handleHelpCenterClick}>\n              {lang('Help Center')}\n            </Button>\n          )}\n          <Button onClick={closeSafeInfoModal}>{lang('Close')}</Button>\n        </div>\n      </Modal>\n    );\n  }\n\n  function renderStakingResult() {\n    const amountBig = toBig(amount ?? 0, decimals);\n    let currentAmount: Big;\n    let prefix: string | undefined;\n    let suffix: string | undefined;\n\n    if (amountInputProps.isBaseCurrency) {\n      currentAmount = amountBig.mul(token?.price ?? 0);\n      const { shortSymbol } = CURRENCIES[baseCurrency];\n      if (shortSymbol) {\n        prefix = shortSymbol;\n      } else {\n        suffix = baseCurrency;\n      }\n    } else {\n      currentAmount = amountBig;\n    }\n\n    const balanceResult = currentAmount.mul((annualYield / 100) + 1).toString();\n\n    return (\n      <Transition\n        activeKey={amountInputProps.isBaseCurrency ? 0 : 1}\n        name=\"semiFade\"\n        className={styles.balanceResultWrapper}\n        slideClassName={styles.balanceResultWrapper__slide}\n        shouldCleanup\n      >\n        <RichNumberField\n          labelText={lang('Est. balance in a year')}\n          zeroValue=\"...\"\n          value={balanceResult}\n          decimals={SHORT_FRACTION_DIGITS}\n          prefix={prefix}\n          suffix={suffix}\n          isStatic={isStatic}\n          inputClassName={styles.balanceResultInput}\n          labelClassName={styles.balanceResultLabel}\n          valueClassName={styles.balanceResult}\n        />\n      </Transition>\n    );\n  }\n\n  const handleChangeStaking = useLastCallback((id: string) => {\n    cancelStaking();\n\n    changeCurrentStaking({ stakingId: id, shouldReopenModal: !isStatic });\n  });\n\n  const amountInputProps = useAmountInputState({\n    amount,\n    token,\n    baseCurrency,\n    onAmountChange: setAmount,\n    onTokenChange: handleChangeStaking,\n  });\n\n  return (\n    <form\n      className={isStatic ? undefined : modalStyles.transitionContent}\n      onSubmit={handleSubmit}\n    >\n      <div className={buildClassName(styles.welcome, isStatic && styles.welcome_static)}>\n        <AnimatedIconWithPreview\n          size={isStatic ? ANIMATED_STICKER_MIDDLE_SIZE_PX : ANIMATED_STICKER_SMALL_SIZE_PX}\n          play={isActive}\n          noLoop={false}\n          nonInteractive\n          className={buildClassName(styles.sticker, isStatic && styles.sticker_static)}\n          tgsUrl={ANIMATED_STICKERS_PATHS.wait}\n          previewUrl={ANIMATED_STICKERS_PATHS.waitPreview}\n        />\n        <div className={buildClassName(styles.welcomeInformation, isStatic && styles.welcomeInformation_static)}>\n          <div>{lang('Earn from your tokens while holding them', { symbol })}</div>\n          <div className={styles.stakingApy}>{lang('Est. %annual_yield%', { annual_yield: annualYieldText })}</div>\n          {stakingType === 'ethena' && (\n            <Button isText className={styles.textButton} onClick={handleCheckEligibility}>\n              {lang('Check eligibility')}\n            </Button>\n          )}\n          <Button isText className={styles.textButton} onClick={openSafeInfoModal}>\n            {lang(getStakingTitle(stakingType))}\n          </Button>\n        </div>\n      </div>\n\n      <AmountInput\n        {...amountInputProps}\n        maxAmount={maxAmount}\n        token={selectedToken}\n        allTokens={selectableTokens}\n        isStatic={isStatic}\n        hasError={isIncorrectAmount || isInsufficientBalance}\n        isMaxAmountLoading={!selectedToken}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        renderBottomRight={renderBottomRight}\n        onPressEnter={handleSubmit}\n      />\n\n      {renderStakingResult()}\n\n      {!isViewMode && (\n        <div className={modalStyles.buttons}>\n          <Button\n            isPrimary\n            isSubmit\n            isDisabled={!canSubmit}\n            isLoading={isLoading}\n          >\n            {lang('$stake_asset', { symbol: token?.symbol })}\n          </Button>\n        </div>\n      )}\n      {renderSafeInfoModal()}\n    </form>\n  );\n}\n\nexport default memo(\n  withGlobal(\n    (global): StateProps => {\n      const accountId = global.currentAccountId;\n      const accountState = selectCurrentAccountState(global);\n      const tokens = selectCurrentAccountTokens(global);\n      const tokenBySlug = global.tokenInfo.bySlug;\n      const { baseCurrency = DEFAULT_PRICE_CURRENCY, isSensitiveDataHidden } = global.settings;\n\n      const {\n        state,\n        isLoading,\n        error: apiError,\n      } = global.currentStaking;\n\n      const states = accountId ? selectAccountStakingStates(global, accountId) : undefined;\n      const stakingState = selectAccountStakingState(global, global.currentAccountId!);\n\n      return {\n        isViewMode: selectIsCurrentAccountViewMode(global),\n        isLoading: isLoading && ACTIVE_STATES.has(state),\n        tokens,\n        tokenBySlug,\n        apiError,\n        stakingState,\n        states,\n        shouldUseNominators: accountState?.staking?.shouldUseNominators,\n        isSensitiveDataHidden,\n        baseCurrency,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(StakingInitial),\n);\n","import { DAYS_IN_YEAR } from '../../api/constants';\nimport { toBig } from '../decimals';\n\nexport default function calcJettonStakingApr({\n  tvl, dailyReward, decimals,\n}: {\n  tvl: bigint;\n  dailyReward: bigint;\n  decimals: number;\n}) {\n  if (!tvl) {\n    return 0;\n  }\n\n  const apr = toBig(dailyReward, decimals)\n    .div(toBig(tvl, decimals))\n    .mul(DAYS_IN_YEAR)\n    .mul(100)\n    .toFixed(2);\n\n  return Number(apr);\n}\n","import React, { memo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiStakingState, ApiTokenWithPrice } from '../../api/types';\nimport type { GlobalState } from '../../global/types';\nimport { StakingState } from '../../global/types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport {\n  selectAccountStakingState,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport TransferResult from '../common/TransferResult';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport StakingInitial from './StakingInitial';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Staking.module.scss';\n\ntype StateProps = GlobalState['currentStaking'] & {\n  stakingState?: ApiStakingState;\n  tokenBySlug?: Record<string, ApiTokenWithPrice>;\n  isMultichainAccount: boolean;\n};\n\nconst IS_OPEN_STATES = new Set([\n  StakingState.StakeInitial,\n  StakingState.StakePassword,\n  StakingState.StakeConnectHardware,\n  StakingState.StakeConfirmHardware,\n  StakingState.StakeComplete,\n]);\n\nfunction StakeModal({\n  state,\n  stakingState,\n  isLoading,\n  amount,\n  error,\n  tokenBySlug,\n  isMultichainAccount,\n}: StateProps) {\n  const {\n    startStaking,\n    setStakingScreen,\n    cancelStaking,\n    clearStakingError,\n    submitStakingPassword,\n    submitStakingHardware,\n    openStakingInfo,\n  } = getActions();\n\n  const { tokenSlug } = stakingState ?? {};\n\n  const token = tokenSlug && tokenBySlug ? tokenBySlug[tokenSlug] : undefined;\n\n  const lang = useLang();\n  const isOpen = IS_OPEN_STATES.has(state);\n  const [renderedStakingAmount, setRenderedStakingAmount] = useState(amount);\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === StakingState.StakePassword) {\n      clearStakingError();\n      setStakingScreen({ state: StakingState.StakeInitial });\n    }\n  });\n\n  const handleLedgerConnect = useLastCallback(() => {\n    setRenderedStakingAmount(amount);\n    submitStakingHardware();\n  });\n\n  const handleTransferSubmit = useLastCallback((password: string) => {\n    setRenderedStakingAmount(amount);\n    submitStakingPassword({ password });\n  });\n\n  const handleViewStakingInfoClick = useLastCallback(() => {\n    cancelStaking();\n    openStakingInfo();\n  });\n\n  function renderTransactionBanner() {\n    if (!token || !amount) return undefined;\n\n    return (\n      <TransactionBanner\n        tokenIn={token}\n        withChainIcon={isMultichainAccount}\n        color=\"purple\"\n        text={formatCurrency(toDecimal(amount, token.decimals), token.symbol)}\n        className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n      />\n    );\n  }\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && (\n          <ModalHeader title={lang('Confirm Staking')} onClose={cancelStaking} />\n        )}\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          error={error}\n          withCloseButton={IS_CAPACITOR}\n          operationType=\"staking\"\n          placeholder=\"Confirm operation with your password\"\n          submitLabel={lang('Confirm')}\n          cancelLabel={lang('Back')}\n          onSubmit={handleTransferSubmit}\n          onCancel={handleBackClick}\n          onUpdate={clearStakingError}\n          skipAuthScreen\n        >\n          {renderTransactionBanner()}\n        </PasswordForm>\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Coins have been staked!')} onClose={cancelStaking} />\n\n        <div className={modalStyles.transitionContent}>\n          <TransferResult\n            color=\"purple\"\n            playAnimation={isActive}\n            amount={renderedStakingAmount}\n            decimals={token?.decimals}\n            tokenSymbol={token?.symbol}\n            noSign\n            firstButtonText={lang('View')}\n            secondButtonText={lang('Stake More')}\n            onFirstButtonClick={handleViewStakingInfoClick}\n            onSecondButtonClick={startStaking}\n          />\n\n          <div className={modalStyles.buttons}>\n            <Button onClick={cancelStaking} isPrimary>{lang('Close')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: StakingState) {\n    switch (currentKey) {\n      case StakingState.StakeInitial:\n        return (\n          <>\n            <ModalHeader title={lang('$stake_asset', { symbol: token?.symbol })} onClose={cancelStaking} />\n            <StakingInitial isActive={isActive} />\n          </>\n        );\n\n      case StakingState.StakePassword:\n        return renderPassword(isActive);\n\n      case StakingState.StakeConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleLedgerConnect}\n            onClose={cancelStaking}\n          />\n        );\n\n      case StakingState.StakeConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm operation on your Ledger')}\n            error={error}\n            onClose={cancelStaking}\n            onTryAgain={handleLedgerConnect}\n          />\n        );\n\n      case StakingState.StakeComplete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"stake\"\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n      forceFullNative={renderingKey === StakingState.StakePassword}\n      onClose={cancelStaking}\n      onCloseAnimationEnd={updateNextKey}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountId = global.currentAccountId!;\n  const isMultichainAccount = selectIsMultichainAccount(global, accountId);\n  const stakingState = selectAccountStakingState(global, accountId);\n  const tokenBySlug = global.tokenInfo.bySlug;\n\n  return {\n    ...global.currentStaking,\n    stakingState,\n    tokenBySlug,\n    isMultichainAccount,\n  };\n})(StakeModal));\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiEthenaStakingState, ApiJettonStakingState } from '../../api/types';\nimport type { UserToken } from '../../global/types';\nimport { StakingState } from '../../global/types';\n\nimport { SHORT_FRACTION_DIGITS, TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectAccount,\n  selectAccountStakingState,\n  selectCurrentAccountTokens,\n  selectIsHardwareAccount,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { getTonStakingFees } from '../../util/fee/getTonOperationFees';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport TransferResult from '../common/TransferResult';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport Modal from '../ui/Modal';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './StakingClaimModal.module.scss';\n\ninterface StateProps {\n  stakingState?: ApiJettonStakingState | ApiEthenaStakingState;\n  isOpen?: boolean;\n  tokens?: UserToken[];\n  isLoading?: boolean;\n  address?: string;\n  error?: string;\n  state?: StakingState;\n  isHardwareAccount?: boolean;\n  isMultichainAccount: boolean;\n  isSensitiveDataHidden?: true;\n}\n\nconst IS_OPEN_STATES = new Set([\n  StakingState.ClaimPassword,\n  StakingState.ClaimConfirmHardware,\n  StakingState.ClaimConnectHardware,\n  StakingState.ClaimComplete,\n]);\n\nfunction StakingClaimModal({\n  stakingState,\n  isOpen,\n  tokens,\n  isLoading,\n  address,\n  error,\n  state = StakingState.ClaimPassword,\n  isHardwareAccount,\n  isMultichainAccount,\n  isSensitiveDataHidden,\n}: StateProps) {\n  const {\n    submitStakingClaim,\n    submitStakingClaimHardware,\n    cancelStakingClaim,\n    clearStakingError,\n  } = getActions();\n\n  const {\n    tokenSlug,\n  } = stakingState ?? {};\n\n  const rewardAmount = stakingState && 'unclaimedRewards' in stakingState\n    ? stakingState.unclaimedRewards\n    : stakingState?.unstakeRequestAmount ?? 0n;\n\n  const lang = useLang();\n\n  const token = useMemo(() => tokens?.find(({ slug }) => slug === tokenSlug), [tokens, tokenSlug]);\n  const nativeToken = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens]);\n  const nativeBalance = nativeToken?.amount ?? 0n;\n\n  const { gas: networkFee, real: realNetworkFee } = getTonStakingFees(stakingState?.type).claim!;\n  const isNativeEnough = nativeBalance > networkFee;\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, Boolean(isOpen));\n  const withModalHeader = state === StakingState.ClaimComplete || (!isHardwareAccount && !getDoesUsePinPad());\n  const modalTitle = withModalHeader\n    ? lang(state === StakingState.ClaimComplete\n      ? 'Coins have been unstaked!'\n      : stakingState?.type === 'ethena'\n        ? 'Confirm Unstaking'\n        : 'Confirm Rewards Claim')\n    : undefined;\n\n  const handleSubmit = useLastCallback((password: string) => {\n    if (!isNativeEnough) return;\n    submitStakingClaim({ password });\n  });\n\n  const handleHardwareSubmit = useLastCallback(() => {\n    if (!isNativeEnough) return;\n    submitStakingClaimHardware();\n  });\n\n  function renderInfo() {\n    const feeClassName = buildClassName(\n      styles.operationInfoFee,\n      !getDoesUsePinPad() && styles.operationInfoFeeWithGap,\n    );\n    const content = isSensitiveDataHidden\n      ? `*** ${token!.symbol}`\n      : formatCurrency(toDecimal(rewardAmount, token!.decimals), token!.symbol, SHORT_FRACTION_DIGITS);\n\n    return (\n      <>\n        <TransactionBanner\n          tokenIn={token}\n          withChainIcon={isMultichainAccount}\n          text={content}\n          className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n          secondText={address && shortenAddress(address)}\n        />\n        <div className={feeClassName}>\n          {token && renderText(lang('$fee_value_bold', {\n            fee: (\n              <Fee\n                terms={{ native: isNativeEnough ? realNetworkFee : networkFee }}\n                precision={isNativeEnough ? 'approximate' : 'lessThan'}\n                token={token}\n              />\n            ),\n          }))}\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: StakingState) {\n    switch (currentKey) {\n      case StakingState.ClaimConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleHardwareSubmit}\n            onClose={cancelStakingClaim}\n          />\n        );\n\n      case StakingState.ClaimConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={cancelStakingClaim}\n            onTryAgain={handleHardwareSubmit}\n          />\n        );\n\n      case StakingState.ClaimPassword:\n        return (\n          <PasswordForm\n            isActive={Boolean(isOpen)}\n            isLoading={isLoading}\n            withCloseButton\n            operationType=\"claim\"\n            error={!isNativeEnough ? lang('Insufficient Balance for Fee') : error}\n            submitLabel={lang('Confirm')}\n            onSubmit={handleSubmit}\n            onCancel={cancelStakingClaim}\n            onUpdate={clearStakingError}\n            skipAuthScreen\n          >\n            {renderInfo()}\n          </PasswordForm>\n        );\n\n      case StakingState.ClaimComplete:\n        return (\n          <div className={modalStyles.transitionContent}>\n            <TransferResult\n              isSensitiveDataHidden={isSensitiveDataHidden}\n              color=\"green\"\n              playAnimation={isActive}\n              amount={rewardAmount}\n              tokenSymbol={token?.symbol}\n              decimals={token?.decimals}\n              noSign\n            />\n\n            <div className={styles.unstakeInfo}>\n              {lang('$unstake_information_instantly')}\n            </div>\n\n            <div className={modalStyles.buttons}>\n              <Button onClick={cancelStakingClaim} isPrimary>{lang('Close')}</Button>\n            </div>\n          </div>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={modalTitle}\n      hasCloseButton={withModalHeader}\n      forceFullNative\n      nativeBottomSheetKey=\"staking-claim\"\n      contentClassName={styles.passwordModalDialog}\n      onClose={cancelStakingClaim}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountId = global.currentAccountId;\n  const { addressByChain } = selectAccount(global, accountId!) || {};\n  const isHardwareAccount = selectIsHardwareAccount(global);\n\n  const {\n    state,\n    isLoading,\n    error,\n  } = global?.currentStaking || {};\n\n  const stakingState = accountId ? selectAccountStakingState(global, accountId) : undefined;\n  const tokens = selectCurrentAccountTokens(global);\n  const canBeClaimed = stakingState?.type === 'jetton' || stakingState?.type === 'ethena';\n\n  return {\n    stakingState: canBeClaimed ? stakingState : undefined,\n    isOpen: IS_OPEN_STATES.has(state),\n    state,\n    tokens,\n    isLoading,\n    error,\n    address: addressByChain?.ton,\n    isHardwareAccount,\n    isMultichainAccount: selectIsMultichainAccount(global, accountId!),\n    isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n  };\n})(StakingClaimModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"kJywiaI2\",\"passwordModalDialog\":\"FYtlcmCw\",\"transactionBanner\":\"yYT_DSGe\",\"operationInfoFee\":\"k75dvmdJ\",\"operationInfoFeeWithGap\":\"F2nQ3VmO\",\"unstakeInfo\":\"zw06OBVe\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { UserToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { formatHumanDay, formatTime } from '../../util/dateFormat';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport getPseudoRandomNumber from '../../util/getPseudoRandomNumber';\n\nimport useLang from '../../hooks/useLang';\n\nimport SensitiveData from '../ui/SensitiveData';\n\nimport styles from './StakingProfileItem.module.scss';\n\ninterface OwnProps {\n  tonToken: UserToken;\n  timestamp: number;\n  profit: string;\n  isSensitiveDataHidden?: true;\n}\n\nfunction StakingProfitItem({\n  tonToken, timestamp, profit, isSensitiveDataHidden,\n}: OwnProps) {\n  const lang = useLang();\n  const amountCols = useMemo(() => getPseudoRandomNumber(4, 10, timestamp.toString()), [timestamp]);\n\n  return (\n    <div className={styles.item}>\n      <i className={buildClassName(styles.icon, 'icon-earn')} aria-hidden />\n      <div className={styles.leftBlock}>\n        <div className={styles.operationName}>{lang('Earned')}</div>\n        <div className={styles.date}>{formatHumanDay(lang, timestamp)}, {formatTime(timestamp)}</div>\n      </div>\n      <SensitiveData\n        isActive={isSensitiveDataHidden}\n        cellSize={8}\n        rows={2}\n        cols={amountCols}\n        align=\"right\"\n        className={styles.amount}\n      >\n        {formatCurrencyExtended(profit, tonToken.symbol)}\n      </SensitiveData>\n    </div>\n  );\n}\n\nexport default memo(StakingProfitItem);\n","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"nq4YjGn3\",\"icon\":\"jLdRlENh\",\"leftBlock\":\"nxAiUgO_\",\"amount\":\"x2kd8DjZ\",\"operationName\":\"uDw7ob8E\",\"date\":\"aJl0mknc\"};","import React, {\n  memo, type TeactNode, useEffect, useMemo,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiStakingHistory, ApiStakingState, ApiTokenWithPrice } from '../../api/types';\nimport type { Theme, UserToken } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_ICON_PX,\n  ETHENA_ELIGIBILITY_CHECK_URL,\n  SHORT_FRACTION_DIGITS,\n  TONCOIN,\n} from '../../config';\nimport {\n  selectAccountStakingHistory,\n  selectAccountStakingState,\n  selectAccountStakingStates,\n  selectAccountStakingTotalProfit,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsCurrentAccountViewMode,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { formatRelativeHumanDateTime } from '../../util/dateFormat';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { openUrl } from '../../util/openUrl';\nimport { getStakingStateStatus, getUnstakeTime } from '../../util/staking';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport { useTransitionActiveKey } from '../../hooks/useTransitionActiveKey';\nimport useWindowSize from '../../hooks/useWindowSize';\nimport { useTokenDropdown } from './hooks/useTokenDropdown';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport RichNumberField from '../ui/RichNumberField';\nimport Spinner from '../ui/Spinner';\nimport TokenDropdown from '../ui/TokenDropdown';\nimport Transition from '../ui/Transition';\nimport StakingProfitItem from './StakingProfitItem';\n\nimport styles from './Staking.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isViewMode: boolean;\n  states?: ApiStakingState[];\n  stakingState?: ApiStakingState;\n  totalProfit: bigint;\n  stakingHistory?: ApiStakingHistory;\n  tokens?: UserToken[];\n  tokenBySlug?: Record<string, ApiTokenWithPrice>;\n  theme: Theme;\n  shouldUseNominators?: boolean;\n  isSensitiveDataHidden?: true;\n}\n\nconst UPDATE_UNSTAKE_DATE_INTERVAL_MS = 30000; // 30 sec\nconst HISTORY_SCROLL_APPEARANCE_HEIGHT_PX = 640;\nconst FRACTION_DIGITS = 2;\n\nfunction StakingInfoContent({\n  states,\n  stakingState,\n  isActive,\n  isStatic,\n  totalProfit,\n  stakingHistory,\n  tokens,\n  tokenBySlug,\n  theme,\n  shouldUseNominators,\n  isViewMode,\n  isSensitiveDataHidden,\n  onClose,\n}: OwnProps & StateProps) {\n  const {\n    startStaking,\n    startUnstaking,\n    startStakingClaim,\n    fetchStakingHistory,\n    changeCurrentStaking,\n  } = getActions();\n\n  const {\n    id: stakingId,\n    tokenSlug,\n    balance: amount,\n    annualYield = 0,\n    unstakeRequestAmount,\n    type: stakingType,\n  } = stakingState ?? {};\n\n  const unstakeTime = getUnstakeTime(stakingState);\n  const canBeClaimed = stakingState ? getStakingStateStatus(stakingState) === 'readyToClaim' : undefined;\n\n  const token = useMemo(() => {\n    return tokenSlug ? tokens?.find(({ slug }) => tokenSlug === slug) : undefined;\n  }, [tokenSlug, tokens]);\n\n  const { decimals, symbol } = token ?? {};\n\n  const lang = useLang();\n  const isLoading = amount === undefined;\n  const hasHistory = Boolean(stakingHistory?.length);\n  const {\n    shouldRender: shouldRenderSpinner,\n    ref: spinnerRef,\n  } = useShowTransition({\n    isOpen: isLoading && isActive,\n    withShouldRender: true,\n  });\n  const tonToken = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens])!;\n  const forceUpdate = useForceUpdate();\n  const { height } = useWindowSize();\n  const appTheme = useAppTheme(theme);\n  const {\n    shouldRender: shouldRenderTotalAmount,\n    ref: totalAmountRef,\n  } = useShowTransition({\n    isOpen: !isSensitiveDataHidden,\n    withShouldRender: true,\n  });\n\n  const unclaimedRewards = stakingState?.type === 'jetton'\n    ? stakingState.unclaimedRewards\n    : undefined;\n\n  // Updates the unstaking countdown\n  useInterval(forceUpdate, unstakeRequestAmount ? UPDATE_UNSTAKE_DATE_INTERVAL_MS : undefined);\n\n  useEffect(() => {\n    if (isActive) {\n      fetchStakingHistory();\n    }\n  }, [fetchStakingHistory, isActive]);\n\n  const handleStakeClick = useLastCallback(() => {\n    onClose?.();\n    startStaking();\n  });\n\n  const handleUnstakeClick = useLastCallback(() => {\n    onClose?.();\n    startUnstaking();\n  });\n\n  const handleClaimClick = useLastCallback(() => {\n    onClose?.();\n    startStakingClaim();\n  });\n\n  let stakingResult = '0';\n  let balanceResult = '0';\n  if (amount) {\n    stakingResult = toBig(amount, decimals).round(SHORT_FRACTION_DIGITS).toString();\n    balanceResult = toBig(amount, decimals).mul((annualYield / 100) + 1).round(SHORT_FRACTION_DIGITS).toString();\n  }\n\n  const handleCheckEligibility = useLastCallback(() => {\n    void openUrl(ETHENA_ELIGIBILITY_CHECK_URL);\n  });\n\n  const [selectedToken, selectableTokens] = useTokenDropdown({\n    tokenBySlug,\n    states,\n    shouldUseNominators,\n    selectedStakingId: stakingId,\n    isViewMode,\n  });\n\n  function renderUnstakeDescription() {\n    let text: string | TeactNode[] | undefined;\n\n    if (unstakeTime) {\n      text = lang(stakingType === 'nominators' ? '$unstaking_when_receive' : '$unstaking_when_receive_with_amount', {\n        time: (\n          <strong>\n            {formatRelativeHumanDateTime(lang.code, unstakeTime)}\n          </strong>\n        ),\n        amount: (\n          <strong>\n            {formatCurrency(toDecimal(unstakeRequestAmount ?? 0n, decimals), symbol!).replace(' ', '\\u00A0')}\n          </strong>\n        ),\n      });\n    }\n\n    return (\n      <div className={buildClassName(styles.unstakeTime, styles.unstakeTime_purple)}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.unstakeTimeIcon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockPurple}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockPurple}\n        />\n        <div>\n          {text}\n        </div>\n      </div>\n    );\n  }\n\n  function renderHistory() {\n    return (\n      <div className={buildClassName(styles.history, isStatic && styles.history_static)}>\n        {shouldRenderTotalAmount && (\n          <div ref={totalAmountRef} className={styles.historyTotal}>\n            {lang('$total', {\n              value: (\n                <span className={styles.historyTotalValue}>\n                  {formatCurrency(toDecimal(totalProfit), TONCOIN.symbol)}\n                </span>\n              ),\n            })}\n          </div>\n        )}\n        <div className={styles.historyTitle}>{lang('Earning History')}</div>\n        <div className={buildClassName(\n          styles.historyList,\n          isStatic && styles.historyList_static,\n          isStatic && 'custom-scroll',\n          !isStatic && height >= HISTORY_SCROLL_APPEARANCE_HEIGHT_PX && 'custom-scroll',\n        )}\n        >\n          {stakingHistory?.map((record) => (\n            <StakingProfitItem\n              key={record.timestamp}\n              profit={record.profit}\n              timestamp={record.timestamp}\n              tonToken={tonToken}\n              isSensitiveDataHidden={isSensitiveDataHidden}\n            />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.stakingInfo,\n    !isStatic && styles.stakingInfo_modal,\n    !hasHistory && styles.stakingInfoNoHistory,\n    isStatic && 'staking-info',\n  );\n\n  const handleChangeStaking = useLastCallback((id: string) => {\n    onClose?.();\n\n    changeCurrentStaking({ stakingId: id, shouldReopenModal: !isStatic });\n  });\n\n  function renderRewards() {\n    const rewardString = toDecimal(unclaimedRewards!, decimals);\n\n    return (\n      <>\n        <RichNumberField\n          isSensitiveData\n          isSensitiveDataHidden={isSensitiveDataHidden}\n          sensitiveDataMaskSkin=\"purple\"\n          labelText={lang('Accumulated Rewards')}\n          zeroValue=\"...\"\n          value={rewardString}\n          decimals={decimals}\n          suffix={symbol}\n          labelClassName={styles.balanceStakedLabel}\n          valueClassName={styles.balanceResult}\n        />\n        {!isViewMode && (\n          <div className={styles.stakingInfoButtons}>\n            <Button\n              className={styles.stakingInfoButton}\n              isDisabled={isLoading}\n              onClick={handleClaimClick}\n            >\n              {lang('Claim')}\n            </Button>\n          </div>\n        )}\n      </>\n    );\n  }\n\n  function render() {\n    return (\n      <>\n        <div className={fullClassName}>\n          {!isStatic && (\n            <ModalHeader\n              title={lang('Staking')}\n              closeClassName={styles.stakingInfoClose}\n              onClose={onClose}\n            />\n          )}\n\n          <RichNumberField\n            isSensitiveData\n            isSensitiveDataHidden={isSensitiveDataHidden}\n            sensitiveDataMaskSkin=\"purple\"\n            labelText={lang('Currently Staked')}\n            zeroValue=\"...\"\n            value={stakingResult}\n            decimals={decimals}\n            className={styles.stakingBalance}\n            labelClassName={styles.balanceStakedLabel}\n            valueClassName={styles.balanceStakedResult}\n          >\n            <div className={styles.stakingInfoLoading}>\n              {shouldRenderSpinner && (\n                <Spinner ref={spinnerRef} className={styles.stakingInfoLoadingAnimation} />\n              )}\n            </div>\n\n            <TokenDropdown\n              selectedToken={selectedToken}\n              allTokens={selectableTokens}\n              theme=\"purple\"\n              onChange={handleChangeStaking}\n            />\n\n          </RichNumberField>\n          {unstakeRequestAmount && unstakeRequestAmount > 0n && stakingType !== 'ethena'\n            ? renderUnstakeDescription()\n            : (\n              <>\n                <RichNumberField\n                  isSensitiveData\n                  isSensitiveDataHidden={isSensitiveDataHidden}\n                  sensitiveDataMaskSkin=\"purple\"\n                  labelText={lang('Est. balance in a year')}\n                  zeroValue=\"...\"\n                  value={balanceResult}\n                  decimals={decimals}\n                  suffix={symbol}\n                  labelClassName={styles.balanceStakedLabel}\n                  valueClassName={styles.balanceResult}\n                />\n                {stakingType === 'ethena' && !canBeClaimed && !!unstakeRequestAmount && renderUnstakeDescription()}\n                {!isViewMode && (\n                  <div\n                    className={buildClassName(\n                      styles.stakingInfoButtons,\n                      stakingType === 'ethena' && styles.stakingInfoButtonsAdaptiveWidth,\n                      !!unclaimedRewards && styles.stakingInfoButtonsWithMargin,\n                    )}\n                  >\n                    <Button\n                      className={styles.stakingInfoButton}\n                      isPrimary\n                      isDisabled={isLoading}\n                      onClick={handleStakeClick}\n                    >\n                      {lang('Stake More')}\n                    </Button>\n                    {(stakingType !== 'ethena' || !canBeClaimed) && (\n                      <Button\n                        className={styles.stakingInfoButton}\n                        isDisabled={isLoading}\n                        onClick={handleUnstakeClick}\n                      >\n                        {lang(stakingType === 'ethena' ? 'Request Unstaking' : 'Unstake')}\n                      </Button>\n                    )}\n                    {canBeClaimed && (\n                      <Button\n                        className={styles.stakingInfoButton}\n                        isDisabled={isLoading}\n                        onClick={handleClaimClick}\n                      >\n                        {lang('Unstake %amount%', {\n                          amount: isSensitiveDataHidden\n                            ? `*** ${symbol}`\n                            : formatCurrency(toDecimal(unstakeRequestAmount!, decimals), symbol!, FRACTION_DIGITS),\n                        })}\n                      </Button>\n                    )}\n                  </div>\n                )}\n                {!isViewMode && stakingType === 'ethena' && (\n                  <Button isText className={styles.checkEligibilityButton} onClick={handleCheckEligibility}>\n                    {lang('Check eligibility for max APY')}\n                  </Button>\n                )}\n                {!!unclaimedRewards && renderRewards()}\n              </>\n            )}\n        </div>\n\n        {hasHistory && renderHistory()}\n      </>\n    );\n  }\n\n  // No need to animate if it's in modal (`!isStatic`), because the modal is animated itself\n  const activeKey = useTransitionActiveKey([isStatic, stakingId], !isStatic);\n\n  return (\n    <Transition\n      name=\"fade\"\n      activeKey={activeKey}\n      shouldCleanup\n      className={styles.stakingTransition}\n      slideClassName={isStatic ? 'staking-info' : undefined}\n    >\n      {render()}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accountId = global.currentAccountId;\n  const {\n    settings: { theme, isSensitiveDataHidden },\n    tokenInfo: { bySlug: tokenBySlug },\n  } = global;\n  const accountState = selectCurrentAccountState(global);\n\n  const states = accountId ? selectAccountStakingStates(global, accountId) : undefined;\n  const stakingState = accountId ? selectAccountStakingState(global, accountId) : undefined;\n\n  const stakingHistory = accountId ? selectAccountStakingHistory(global, accountId) : undefined;\n  const totalProfit = accountId ? selectAccountStakingTotalProfit(global, accountId) : 0n;\n\n  return {\n    stakingState,\n    states,\n    totalProfit,\n    stakingHistory,\n    tokens: selectCurrentAccountTokens(global),\n    tokenBySlug,\n    theme,\n    shouldUseNominators: accountState?.staking?.shouldUseNominators,\n    isSensitiveDataHidden,\n    isViewMode: selectIsCurrentAccountViewMode(global),\n  };\n})(StakingInfoContent));\n","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { TONCOIN } from '../../config';\nimport { selectAccountStakingHistory, selectAccountStakingState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport Modal from '../ui/Modal';\nimport StakingInfoContent from './StakingInfoContent';\n\nimport styles from './Staking.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  tokenSlug?: string;\n  hasHistory?: boolean;\n}\n\nfunction StakingInfoModal({\n  isOpen,\n  tokenSlug,\n  hasHistory,\n  onClose,\n}: OwnProps & StateProps) {\n  const { fetchStakingHistory } = getActions();\n  const withBackground = tokenSlug !== TONCOIN.slug;\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchStakingHistory();\n    }\n  }, [fetchStakingHistory, isOpen]);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      contentClassName={buildClassName(styles.stakingInfoModalContent, withBackground && styles.withBackground)}\n      nativeBottomSheetKey=\"staking-info\"\n      onClose={onClose}\n      forceFullNative={hasHistory}\n    >\n      <StakingInfoContent isActive={isOpen} onClose={onClose} />\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accountId = global.currentAccountId;\n  const stakingHistory = accountId\n    ? selectAccountStakingHistory(global, accountId)\n    : undefined;\n  const stakingState = accountId ? selectAccountStakingState(global, accountId) : undefined;\n\n  return {\n    tokenSlug: stakingState?.tokenSlug,\n    hasHistory: Boolean(stakingHistory?.length),\n  };\n})(StakingInfoModal));\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useCallback, useEffect, useMemo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiStakingState } from '../../api/types';\nimport type { GlobalState, Theme, UserToken } from '../../global/types';\nimport { ApiTransactionDraftError } from '../../api/types';\nimport { StakingState } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_ICON_PX,\n  DEFAULT_PRICE_CURRENCY,\n  IS_CAPACITOR,\n  TONCOIN,\n  VALIDATION_PERIOD_MS,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectAccountStakingState,\n  selectCurrentAccountTokens,\n  selectIsCurrentAccountViewMode,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { formatRelativeHumanDateTime } from '../../util/dateFormat';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { getTonStakingFees } from '../../util/fee/getTonOperationFees';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { getIsLongUnstake, getUnstakeTime } from '../../util/staking';\nimport { getIsMobileTelegramApp } from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport useSyncEffect from '../../hooks/useSyncEffect';\nimport { useAmountInputState } from '../ui/hooks/useAmountInputState';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport TransferResult from '../common/TransferResult';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport AmountInput from '../ui/AmountInput';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Staking.module.scss';\n\ntype StateProps = GlobalState['currentStaking'] & {\n  isViewMode: boolean;\n  tokens?: UserToken[];\n  baseCurrency: ApiBaseCurrency;\n  isNominators?: boolean;\n  theme: Theme;\n  isMultichainAccount: boolean;\n  stakingState?: ApiStakingState;\n  isSensitiveDataHidden?: true;\n};\n\nconst IS_OPEN_STATES = new Set([\n  StakingState.UnstakeInitial,\n  StakingState.UnstakePassword,\n  StakingState.UnstakeConnectHardware,\n  StakingState.UnstakeConfirmHardware,\n  StakingState.UnstakeComplete,\n]);\n\nconst FULL_SIZE_NBS_STATES = new Set([\n  StakingState.UnstakePassword,\n  StakingState.UnstakeConnectHardware,\n  StakingState.UnstakeConfirmHardware,\n]);\n\nconst UPDATE_UNSTAKE_DATE_INTERVAL_MS = 30000; // 30 sec\n\nfunction UnstakeModal({\n  state,\n  isViewMode,\n  isLoading,\n  error,\n  tokens,\n  baseCurrency,\n  isNominators,\n  isMultichainAccount,\n  theme,\n  amount,\n  stakingState,\n  isSensitiveDataHidden,\n}: StateProps) {\n  const {\n    setStakingScreen,\n    cancelStaking,\n    clearStakingError,\n    submitStakingInitial,\n    submitStakingPassword,\n    submitStakingHardware,\n    fetchStakingHistory,\n  } = getActions();\n\n  const {\n    type: stakingType,\n    tokenSlug,\n    balance: stakingBalance,\n  } = stakingState ?? {};\n\n  const lang = useLang();\n  const isOpen = IS_OPEN_STATES.has(state);\n\n  const { gas: networkFee, real: realFee } = getTonStakingFees(stakingState?.type).unstake;\n\n  const nativeToken = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens]);\n  const isNativeEnough = nativeToken && nativeToken.amount >= networkFee;\n  const instantAvailable = stakingState?.type === 'liquid' ? stakingState.instantAvailable : undefined;\n\n  const token = useMemo(() => {\n    return tokenSlug ? tokens?.find(({ slug }) => slug === tokenSlug) : undefined;\n  }, [tokenSlug, tokens]);\n\n  let hasAmountError = false;\n  let isInsufficientBalance = false;\n\n  const isOnlyFullAmount = isNominators;\n  const [unstakeAmount, setUnstakeAmount] = useState(isOnlyFullAmount ? stakingBalance : undefined);\n  const [successUnstakeAmount, setSuccessUnstakeAmount] = useState<bigint | undefined>(undefined);\n\n  const unstakeTime = getUnstakeTime(stakingState);\n  const isLongUnstake = stakingState ? getIsLongUnstake(stakingState, unstakeAmount) : undefined;\n\n  const [unstakeDate, setUnstakeDate] = useState<number>(unstakeTime ?? Date.now() + VALIDATION_PERIOD_MS);\n  const forceUpdate = useForceUpdate();\n  const appTheme = useAppTheme(theme);\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const isUnstakeDisabled = !isNativeEnough || isInsufficientBalance || !unstakeAmount;\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchStakingHistory();\n      setUnstakeAmount(isOnlyFullAmount ? stakingBalance : undefined);\n    }\n  }, [isOpen, fetchStakingHistory, isOnlyFullAmount, stakingBalance]);\n\n  useSyncEffect(() => {\n    if (unstakeTime) {\n      setUnstakeDate(unstakeTime);\n    }\n  }, [unstakeTime]);\n\n  if (error === ApiTransactionDraftError.InsufficientBalance) {\n    isInsufficientBalance = true;\n  }\n\n  const refreshUnstakeDate = useLastCallback(() => {\n    if (unstakeDate < Date.now()) {\n      fetchStakingHistory();\n    }\n    forceUpdate();\n  });\n\n  useInterval(refreshUnstakeDate, UPDATE_UNSTAKE_DATE_INTERVAL_MS);\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === StakingState.UnstakePassword) {\n      setStakingScreen({ state: StakingState.UnstakeInitial });\n    }\n  });\n\n  const handleStartUnstakeClick = useLastCallback(() => {\n    submitStakingInitial({ isUnstaking: true, amount: unstakeAmount });\n  });\n\n  const handleTransferSubmit = useLastCallback((password: string) => {\n    setSuccessUnstakeAmount(amount);\n\n    submitStakingPassword({ password, isUnstaking: true });\n  });\n\n  const handleLedgerConnect = useLastCallback(() => {\n    setSuccessUnstakeAmount(amount);\n    submitStakingHardware({ isUnstaking: true });\n  });\n\n  function renderTransactionBanner() {\n    if (!token || !unstakeAmount) return undefined;\n\n    return (\n      <TransactionBanner\n        tokenIn={token}\n        withChainIcon={isMultichainAccount}\n        color=\"green\"\n        text={formatCurrency(toDecimal(unstakeAmount, token.decimals), token.symbol)}\n        className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n      />\n    );\n  }\n\n  if (unstakeAmount !== undefined) {\n    if (unstakeAmount < 0) {\n      hasAmountError = true;\n    } else if (!stakingBalance || unstakeAmount > stakingBalance) {\n      hasAmountError = true;\n      isInsufficientBalance = true;\n    }\n  }\n\n  const amountInputProps = useAmountInputState({\n    amount: unstakeAmount,\n    token,\n    baseCurrency,\n    isAmountReadonly: isOnlyFullAmount,\n    onAmountChange: setUnstakeAmount,\n  });\n\n  // Wa want to render just the token name, not a token select button. To achieve that, we rely on the fact that\n  // `Dropdown` renders with no button border when there is only 1 item.\n  const selectableTokens = useMemo(() => token && [token], [token]);\n\n  // It is necessary to use useCallback instead of useLastCallback here\n  const renderBottomRight = useCallback((className?: string) => {\n    const activeKey = isInsufficientBalance ? 0\n      : !isNativeEnough ? 1\n        : instantAvailable ? 2\n          : 3;\n\n    let content: string | React.JSX.Element | TeactNode[] = token ? lang('$fee_value', {\n      fee: <Fee terms={{ native: realFee }} precision=\"approximate\" token={token} />,\n    }) : '';\n\n    if (token) {\n      if (isInsufficientBalance) {\n        content = <span className={styles.balanceError}>{lang('Insufficient balance')}</span>;\n      } else if (!isNativeEnough) {\n        content = (\n          <span className={styles.balanceError}>\n            {lang('$insufficient_fee', {\n              fee: formatCurrency(toBig(networkFee), nativeToken?.symbol ?? ''),\n            })}\n          </span>\n        );\n      } else if (instantAvailable) {\n        content = lang('$unstake_up_to_information', {\n          value: formatCurrency(toDecimal(instantAvailable, token.decimals), token.symbol),\n        });\n      }\n    }\n\n    return (\n      <Transition\n        className={buildClassName(styles.amountBottomRight, className)}\n        slideClassName={styles.amountBottomRight_slide}\n        name=\"semiFade\"\n        activeKey={activeKey}\n      >\n        {content}\n      </Transition>\n    );\n  }, [instantAvailable, isInsufficientBalance, isNativeEnough, lang, nativeToken?.symbol, networkFee, realFee, token]);\n\n  function renderUnstakeTimer() {\n    const unstakeDateText = stakingType === 'ethena'\n      ? renderText(lang('$unstaking_when_receive_ethena'))\n      : lang('$unstaking_when_receive', {\n        time: (\n          <strong>{formatRelativeHumanDateTime(lang.code, unstakeDate)}</strong>\n        ),\n      });\n\n    return (\n      <div className={buildClassName(styles.unstakeTime)}>\n        <AnimatedIconWithPreview\n          play={isOpen}\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.unstakeTimeIcon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockGray}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockGray}\n        />\n        <div>{unstakeDateText}</div>\n      </div>\n    );\n  }\n\n  function renderUnstakeInfo() {\n    const shouldShowInfo = !isInsufficientBalance && unstakeAmount;\n\n    return (\n      <Transition\n        name=\"fade\"\n        activeKey={!shouldShowInfo ? 0 : !isLongUnstake ? 1 : 2}\n        className={styles.unstakeInfoTransition}\n      >\n        {!shouldShowInfo ? undefined\n          : (\n            !isLongUnstake\n              ? (\n                <div className={styles.unstakeInfo}>\n                  {lang('$unstake_information_instantly')}\n                </div>\n              )\n              : renderUnstakeTimer()\n          )}\n      </Transition>\n    );\n  }\n\n  function renderInitial() {\n    return (\n      <>\n        <ModalHeader title={lang('$unstake_asset', { symbol: token?.symbol })} onClose={cancelStaking} />\n        <div className={modalStyles.transitionContent}>\n          <AmountInput\n            {...amountInputProps}\n            labelText={lang('Amount to unstake')}\n            maxAmount={stakingBalance}\n            token={token}\n            allTokens={selectableTokens}\n            hasError={hasAmountError}\n            isMaxAmountLoading={stakingBalance === undefined || !token}\n            isMaxAmountAllMode\n            isSensitiveDataHidden={isSensitiveDataHidden}\n            renderBottomRight={renderBottomRight}\n          />\n\n          {renderUnstakeInfo()}\n\n          {!isViewMode && (\n            <div className={modalStyles.buttons}>\n              <Button\n                isPrimary\n                isLoading={isLoading}\n                isDisabled={isUnstakeDisabled}\n                onClick={handleStartUnstakeClick}\n              >\n                {lang('Unstake')}\n              </Button>\n            </div>\n          )}\n        </div>\n      </>\n    );\n  }\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && (\n          <ModalHeader title={lang('Confirm Unstaking')} onClose={cancelStaking} />\n        )}\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          withCloseButton={IS_CAPACITOR}\n          operationType=\"unstaking\"\n          error={error}\n          placeholder=\"Confirm operation with your password\"\n          submitLabel={lang('Confirm')}\n          cancelLabel={lang('Back')}\n          onSubmit={handleTransferSubmit}\n          onCancel={handleBackClick}\n          onUpdate={clearStakingError}\n          skipAuthScreen\n        >\n          {renderTransactionBanner()}\n        </PasswordForm>\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader\n          title={getIsMobileTelegramApp()\n            ? lang('Request is sent!')\n            : stakingType === 'ethena'\n              ? lang('Request for unstaking is sent!')\n              : lang('Coins have been unstaked!')}\n          onClose={cancelStaking}\n        />\n\n        <div className={modalStyles.transitionContent}>\n          <TransferResult\n            color={stakingType !== 'ethena' ? 'green' : undefined}\n            playAnimation={isActive}\n            amount={successUnstakeAmount}\n            tokenSymbol={token?.symbol}\n            decimals={token?.decimals}\n            noSign\n          />\n\n          {isLongUnstake && renderUnstakeTimer()}\n\n          <div className={modalStyles.buttons}>\n            <Button onClick={cancelStaking} isPrimary>{lang('Close')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: StakingState) {\n    switch (currentKey) {\n      case StakingState.UnstakeInitial:\n        return renderInitial();\n\n      case StakingState.UnstakePassword:\n        return renderPassword(isActive);\n\n      case StakingState.UnstakeConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleLedgerConnect}\n            onClose={cancelStaking}\n          />\n        );\n\n      case StakingState.UnstakeConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm operation on your Ledger')}\n            error={error}\n            onClose={cancelStaking}\n            onTryAgain={handleLedgerConnect}\n          />\n        );\n\n      case StakingState.UnstakeComplete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"unstake\"\n      forceFullNative={FULL_SIZE_NBS_STATES.has(renderingKey)}\n      onClose={cancelStaking}\n      onCloseAnimationEnd={updateNextKey}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountId = global.currentAccountId!;\n  const tokens = selectCurrentAccountTokens(global);\n  const { baseCurrency = DEFAULT_PRICE_CURRENCY, isSensitiveDataHidden } = global.settings;\n  const isMultichainAccount = selectIsMultichainAccount(global, accountId);\n  const stakingState = selectAccountStakingState(global, accountId);\n  const isNominators = stakingState?.type === 'nominators';\n\n  return {\n    ...global.currentStaking,\n    tokens,\n    baseCurrency,\n    isNominators,\n    theme: global.settings.theme,\n    isMultichainAccount,\n    stakingState,\n    isSensitiveDataHidden,\n    isViewMode: selectIsCurrentAccountViewMode(global),\n  };\n})(UnstakeModal));\n","import React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport {\n  APP_INSTALL_URL,\n  APP_NAME,\n  APP_REPO_URL,\n  IS_ANDROID_DIRECT,\n  IS_FIREFOX_EXTENSION,\n} from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { openUrl } from '../../util/openUrl';\nimport {\n  IS_ANDROID_APP,\n  IS_CHROME_EXTENSION,\n  IS_EDGE,\n  IS_IOS_APP,\n  IS_WEB,\n} from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport styles from './UpdateAvailable.module.scss';\n\ninterface StateProps {\n  isAppUpdateAvailable?: boolean;\n  isAppUpdateRequired?: boolean;\n  newAppVersion?: string;\n}\n\nfunction UpdateAvailable({ isAppUpdateAvailable, newAppVersion, isAppUpdateRequired }: StateProps) {\n  const lang = useLang();\n\n  const { shouldRender, ref } = useShowTransition<HTMLButtonElement>({\n    isOpen: (IS_ANDROID_DIRECT && isAppUpdateAvailable) || isAppUpdateRequired,\n    withShouldRender: true,\n  });\n\n  const handleClick = () => {\n    if (IS_WEB) {\n      window.location.reload();\n      return;\n    }\n\n    void openUrl(getUrl(newAppVersion), { isExternal: true });\n  };\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <button ref={ref} type=\"button\" className={styles.wrapper} onClick={handleClick}>\n      <i className={buildClassName('icon icon-download-filled', styles.icon)} aria-hidden />\n      {lang('Update %app_name%', { app_name: APP_NAME })}\n    </button>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => ({\n  isAppUpdateAvailable: global.isAppUpdateAvailable,\n  newAppVersion: global.latestAppVersion,\n  isAppUpdateRequired: global.isAppUpdateRequired,\n}))(UpdateAvailable));\n\nfunction getUrl(appVersion?: string) {\n  if (IS_ANDROID_DIRECT) {\n    return appVersion\n      ? `${APP_REPO_URL}/releases/download/v${encodeURIComponent(appVersion || '')}/${encodeURIComponent(APP_NAME)}.apk`\n      : 'https://github.com/mytonwallet-org/mytonwallet/releases/latest';\n  }\n\n  if (IS_ANDROID_APP) {\n    return `${APP_INSTALL_URL}android-store`;\n  }\n\n  if (IS_IOS_APP) {\n    return `${APP_INSTALL_URL}ios`;\n  }\n\n  if (IS_CHROME_EXTENSION) {\n    return `${APP_INSTALL_URL}${IS_EDGE ? 'edge-extension' : 'chrome-extension'}`;\n  }\n\n  if (IS_FIREFOX_EXTENSION) {\n    return `${APP_INSTALL_URL}firefox-extension`;\n  }\n\n  return APP_INSTALL_URL;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"eU8arlH4\",\"icon\":\"X9C5VDdJ\"};","import type { ApiVestingInfo, ApiVestingPartStatus } from '../../../api/types';\n\nexport function calcVestingAmountByStatus(vesting: ApiVestingInfo[], statuses: ApiVestingPartStatus[]) {\n  return vesting.reduce((acc, currentVesting) => {\n    return acc + currentVesting.parts.reduce((currentAcc, part) => {\n      return currentAcc + (statuses.includes(part.status) ? part.amount : 0);\n    }, 0);\n  }, 0).toString();\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"Z3AdvY3j\",\"modalHeader\":\"UGaC6iSp\",\"passwordModalDialog\":\"TSf_GkYf\",\"amountWrapper\":\"nmSXdbkU\",\"close\":\"gj76sp0s\",\"inputWrapper\":\"WYLJUay4\",\"inputLabel\":\"af6G76Qu\",\"inputValue\":\"W2jkzSKT\",\"unfreezeInput\":\"laFaO54G\",\"unfreezeResult\":\"Da5SKOto\",\"buttons\":\"TDJhFbKs\",\"button\":\"q0MWzlSV\",\"unfreezeTime\":\"nOY_rRWD\",\"unfreezeTimeIcon\":\"B_mbvdNt\",\"actions\":\"qVDajNe7\",\"actionsTitle\":\"mwrjA2Wq\",\"actionsList\":\"Gvf3taGj\",\"block\":\"N60lIj1U\",\"vestingInfo\":\"aLa4cQLd\",\"blockTitle\":\"RlCMRY3O\",\"blockSubtitle\":\"A2xAIJdW\",\"part\":\"tbB7hrjM\",\"partInteractive\":\"Fi06J8yl\",\"active\":\"hNrDT2Be\",\"partIcon\":\"Bc1llfyb\",\"partValue\":\"oTZtwcWo\",\"transactionBanner\":\"pu3vP7ZP\",\"operationInfoFee\":\"V5IIeyTC\",\"operationInfoFeeWithGap\":\"ZROURKjf\",\"partName\":\"SkSkSLJA\",\"bold\":\"_7RDFG6sc\",\"date\":\"F8H8tP5h\"};","import React, { memo, useEffect, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTokenWithPrice, ApiVestingInfo } from '../../api/types';\nimport type { Theme } from '../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX, SHORT_FRACTION_DIGITS } from '../../config';\nimport {\n  selectCurrentAccountState,\n  selectIsCurrentAccountViewMode,\n  selectMycoin,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { formatFullDay, formatTime } from '../../util/dateFormat';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { calcVestingAmountByStatus } from '../main/helpers/calcVestingAmountByStatus';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport RichNumberField from '../ui/RichNumberField';\n\nimport styles from './VestingModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  isViewMode: boolean;\n  isUnfreezeRequested?: boolean;\n  vesting?: ApiVestingInfo[];\n  theme: Theme;\n  mycoin?: ApiTokenWithPrice;\n}\n\nconst UPDATE_UNSTAKE_DATE_INTERVAL_MS = 30000; // 30 sec\nconst MY_TOKEN_SYMBOL = 'MY';\n\nfunction VestingModal({\n  isOpen,\n  isViewMode,\n  isUnfreezeRequested,\n  vesting,\n  mycoin,\n  theme,\n}: StateProps) {\n  const { fetchStakingHistory, closeVestingModal, startClaimingVesting } = getActions();\n\n  const lang = useLang();\n  const forceUpdate = useForceUpdate();\n  const currentlyFrozenAmount = useMemo(() => {\n    if (!vesting) return '0';\n\n    return calcVestingAmountByStatus(vesting, ['frozen', 'ready']);\n  }, [vesting]);\n\n  const currentlyReadyToUnfreezeAmount = useMemo(() => {\n    if (!vesting) return '0';\n\n    return calcVestingAmountByStatus(vesting, ['ready']);\n  }, [vesting]);\n\n  const isDisabledUnfreeze = currentlyReadyToUnfreezeAmount === '0';\n  const appTheme = useAppTheme(theme);\n\n  useInterval(forceUpdate, isUnfreezeRequested ? UPDATE_UNSTAKE_DATE_INTERVAL_MS : undefined);\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchStakingHistory();\n    }\n  }, [fetchStakingHistory, isOpen]);\n\n  const handleStartClaimingVesting = useLastCallback(() => {\n    startClaimingVesting();\n  });\n\n  if (!mycoin) {\n    return undefined;\n  }\n\n  function renderUnfrozenDescription() {\n    return (\n      <div className={styles.unfreezeTime}>\n        <AnimatedIconWithPreview\n          play={isOpen}\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.unfreezeTimeIcon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockBlue}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockBlue}\n        />\n        <div>\n          {lang('You will receive your unfrozen coins in a few minutes.')}\n        </div>\n      </div>\n    );\n  }\n\n  function renderVestingInfo(info: ApiVestingInfo) {\n    return (\n      <div key={info.id} className={styles.block}>\n        <div className={styles.vestingInfo}>\n          <div className={styles.blockTitle}>{info.title}</div>\n          <div className={styles.blockSubtitle}>\n            {lang('%volume% in %amount% parts', {\n              volume: <b>{formatCurrency(info.initialAmount, mycoin!.symbol, mycoin!.decimals)}</b>,\n              amount: info.parts.length.toString(),\n            })}\n          </div>\n        </div>\n        {info.parts.map((part) => {\n          const icon = part.status === 'frozen'\n            ? 'icon-snow'\n            : (part.status === 'missed' ? 'icon-missed' : part.status === 'unfrozen' ? 'icon-check' : 'icon-fire');\n          const title = part.status === 'frozen'\n            ? 'Frozen'\n            : (part.status === 'missed' ? 'Missed' : part.status === 'unfrozen' ? 'Unfrozen' : 'Ready to Unfreeze');\n          const isInteractive = !isViewMode && !isUnfreezeRequested && part.status === 'ready';\n          const endsAt = part.status === 'frozen'\n            ? part.time\n            : part.status === 'ready'\n              ? part.timeEnd\n              : undefined;\n\n          return (\n            <div\n              key={part.id}\n              role={isInteractive ? 'button' : undefined}\n              className={buildClassName(styles.part, part.status, isInteractive && styles.partInteractive)}\n              onClick={isInteractive ? handleStartClaimingVesting : undefined}\n            >\n              <i\n                className={buildClassName(styles.partIcon, icon, part.status)}\n                aria-hidden\n              />\n              <div className={styles.partName}>\n                {lang(title)}\n                {Boolean(endsAt) && (\n                  <div className={styles.date}>\n                    {lang('until %date%', {\n                      date: (\n                        <>\n                          <span className={styles.bold}>{formatFullDay(lang.code!, endsAt)}</span>,\n                          {' '}{formatTime(endsAt)}\n                        </>),\n                    })}\n                  </div>\n                )}\n              </div>\n              <div className={buildClassName(styles.partValue, part.status)}>\n                {formatCurrency(part.amount, mycoin!.symbol, mycoin!.decimals)}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderVestingSchedule() {\n    return (\n      <div className={styles.actions}>\n        <div className={styles.actionsTitle}>{lang('Vesting Schedule')}</div>\n        <div className={buildClassName(styles.actionsList, 'custom-scroll')}>\n          {vesting?.map(renderVestingInfo)}\n        </div>\n      </div>\n    );\n  }\n\n  function renderContent() {\n    return (\n      <>\n        <div className={styles.amountWrapper}>\n          <ModalHeader\n            title={lang('Vesting')}\n            className={styles.modalHeader}\n            closeClassName={styles.close}\n            onClose={closeVestingModal}\n          />\n          <RichNumberField\n            labelText={lang('Vesting Balance')}\n            zeroValue=\"...\"\n            value={currentlyFrozenAmount || '0'}\n            decimals={SHORT_FRACTION_DIGITS}\n            suffix={MY_TOKEN_SYMBOL}\n            className={styles.inputWrapper}\n            labelClassName={styles.inputLabel}\n            valueClassName={styles.inputValue}\n          />\n          {isUnfreezeRequested\n            ? renderUnfrozenDescription()\n            : (\n              <>\n                <RichNumberField\n                  labelText={lang('Ready to Unfreeze')}\n                  zeroValue=\"...\"\n                  value={currentlyReadyToUnfreezeAmount}\n                  decimals={SHORT_FRACTION_DIGITS}\n                  suffix={MY_TOKEN_SYMBOL}\n                  className={styles.inputWrapper}\n                  inputClassName={styles.unfreezeInput}\n                  labelClassName={styles.inputLabel}\n                  valueClassName={styles.unfreezeResult}\n                />\n                {!isViewMode && (\n                  <div className={styles.buttons}>\n                    <Button\n                      className={styles.button}\n                      isPrimary\n                      isDisabled={isDisabledUnfreeze}\n                      onClick={!isDisabledUnfreeze ? handleStartClaimingVesting : undefined}\n                    >\n                      {lang('Unfreeze')}\n                    </Button>\n                  </div>\n                )}\n              </>\n            )}\n        </div>\n        {renderVestingSchedule()}\n      </>\n    );\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      contentClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"vesting-info\"\n      forceFullNative\n      onClose={closeVestingModal}\n    >\n      {renderContent()}\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n  const { info: vesting, unfreezeRequestedIds } = accountState?.vesting || {};\n\n  return {\n    isOpen: global.isVestingModalOpen,\n    isViewMode: selectIsCurrentAccountViewMode(global),\n    vesting,\n    isUnfreezeRequested: Boolean(unfreezeRequestedIds?.length),\n    mycoin: selectMycoin(global),\n    theme: global.settings.theme,\n  };\n})(VestingModal));\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTokenWithPrice, ApiVestingInfo } from '../../api/types';\nimport type { UserToken } from '../../global/types';\nimport { VestingUnfreezeState } from '../../global/types';\n\nimport { CLAIM_AMOUNT, TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectAccount,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsHardwareAccount,\n  selectIsMultichainAccount,\n  selectMycoin,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { toBig } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport { calcVestingAmountByStatus } from '../main/helpers/calcVestingAmountByStatus';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Modal from '../ui/Modal';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './VestingModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  tokens?: UserToken[];\n  vesting?: ApiVestingInfo[];\n  isLoading?: boolean;\n  address?: string;\n  error?: string;\n  state?: VestingUnfreezeState;\n  mycoin?: ApiTokenWithPrice;\n  isHardwareAccount?: boolean;\n  isMultichainAccount: boolean;\n}\nfunction VestingPasswordModal({\n  isOpen,\n  vesting,\n  tokens,\n  isLoading,\n  address,\n  error,\n  mycoin,\n  state = VestingUnfreezeState.Password,\n  isHardwareAccount,\n  isMultichainAccount,\n}: StateProps) {\n  const {\n    submitClaimingVesting,\n    submitClaimingVestingHardware,\n    cancelClaimingVesting,\n    clearVestingError,\n  } = getActions();\n\n  const lang = useLang();\n  const {\n    amount: balance,\n  } = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens]) || {};\n  const claimAmount = toBig(CLAIM_AMOUNT);\n  const hasAmountError = !balance || balance < CLAIM_AMOUNT;\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, Boolean(isOpen));\n  const withModalHeader = !isHardwareAccount && !getDoesUsePinPad();\n\n  const currentlyReadyToUnfreezeAmount = useMemo(() => {\n    if (!vesting) return '0';\n\n    return calcVestingAmountByStatus(vesting, ['ready']);\n  }, [vesting]);\n\n  const handleSubmit = useLastCallback((password: string) => {\n    if (hasAmountError) return;\n    submitClaimingVesting({ password });\n  });\n\n  const handleHardwareSubmit = useLastCallback(() => {\n    if (hasAmountError) return;\n    submitClaimingVestingHardware();\n  });\n\n  if (!mycoin) {\n    return undefined;\n  }\n\n  function renderInfo() {\n    const feeClassName = buildClassName(\n      styles.operationInfoFee,\n      !getDoesUsePinPad() && styles.operationInfoFeeWithGap,\n    );\n\n    return (\n      <>\n        <TransactionBanner\n          tokenIn={mycoin}\n          withChainIcon={isMultichainAccount}\n          text={formatCurrency(currentlyReadyToUnfreezeAmount, mycoin!.symbol, mycoin!.decimals)}\n          className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n          secondText={address && shortenAddress(address)}\n        />\n        <div className={feeClassName}>\n          {renderText(lang('$fee_value_bold', { fee: formatCurrency(claimAmount, TONCOIN.symbol) }))}\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: VestingUnfreezeState) {\n    switch (currentKey) {\n      case VestingUnfreezeState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleHardwareSubmit}\n            onClose={cancelClaimingVesting}\n          />\n        );\n\n      case VestingUnfreezeState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={cancelClaimingVesting}\n            onTryAgain={handleHardwareSubmit}\n          />\n        );\n\n      case VestingUnfreezeState.Password:\n        return (\n          <PasswordForm\n            isActive={Boolean(isOpen)}\n            isLoading={isLoading}\n            withCloseButton\n            operationType=\"unfreeze\"\n            error={hasAmountError ? lang('Insufficient Balance for Fee') : error}\n            submitLabel={lang('Confirm')}\n            onSubmit={handleSubmit}\n            onCancel={cancelClaimingVesting}\n            onUpdate={clearVestingError}\n          >\n            {renderInfo()}\n          </PasswordForm>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={withModalHeader ? lang('Confirm Unfreezing') : undefined}\n      hasCloseButton={withModalHeader}\n      forceFullNative\n      nativeBottomSheetKey=\"vesting-confirm\"\n      contentClassName={styles.passwordModalDialog}\n      onClose={cancelClaimingVesting}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { addressByChain } = selectAccount(global, global.currentAccountId!) || {};\n  const accountState = selectCurrentAccountState(global);\n  const isHardwareAccount = selectIsHardwareAccount(global);\n\n  const {\n    isConfirmRequested: isOpen,\n    info: vesting,\n    isLoading,\n    error,\n    unfreezeState,\n  } = accountState?.vesting || {};\n  const tokens = selectCurrentAccountTokens(global);\n\n  return {\n    isOpen,\n    vesting,\n    tokens,\n    isLoading,\n    error,\n    address: addressByChain?.ton,\n    state: unfreezeState,\n    mycoin: selectMycoin(global),\n    isHardwareAccount,\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n  };\n})(VestingPasswordModal));\n","import type { DropdownItem } from '../../../../ui/Dropdown';\n\nimport { MYTONWALLET_MULTISEND_DAPP_URL } from '../../../../../config';\nimport { vibrate } from '../../../../../util/haptics';\nimport { getTranslation } from '../../../../../util/langProvider';\nimport { openUrl } from '../../../../../util/openUrl';\nimport { getHostnameFromUrl } from '../../../../../util/url';\n\nexport type MenuHandler = 'multisend';\n\nexport const SEND_CONTEXT_MENU_ITEMS: DropdownItem<MenuHandler>[] = [{\n  name: 'Multisend',\n  fontIcon: 'menu-multisend',\n  value: 'multisend',\n}];\n\nexport function handleSendMenuItemClick(value: MenuHandler) {\n  if (value === 'multisend') {\n    void vibrate();\n    void openUrl(MYTONWALLET_MULTISEND_DAPP_URL, {\n      title: getTranslation('Multisend'),\n      subtitle: getHostnameFromUrl(MYTONWALLET_MULTISEND_DAPP_URL),\n    });\n  }\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"ejEBAbV8\",\"chartLabels\":\"SpaIcYmy\",\"chartLabel\":\"Ehn5yB9o\",\"realFee\":\"ZXtTwJ2M\",\"excessFee\":\"wvOK88A2\",\"chartLines\":\"f8dLAhsP\",\"chartLine\":\"ow57IO0l\",\"explanation\":\"Tbn84o8Q\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { FeePrecision, FeeTerms, FeeValue } from '../../util/fee/types';\nimport type { FeeToken } from '../ui/Fee';\n\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { getChainConfig } from '../../util/chain';\nimport { getChainBySlug } from '../../util/tokens';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport Modal from '../ui/Modal';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './FeeDetailsModal.module.scss';\n\ntype OwnProps = {\n  isOpen: boolean;\n  onClose: NoneToVoidFunction;\n  fullFee: FeeTerms | undefined;\n  realFee: FeeTerms | undefined;\n  realFeePrecision: FeePrecision | undefined;\n  /** The excess fee is always measured in the native token */\n  excessFee: FeeValue | undefined;\n  excessFeePrecision: FeePrecision | undefined;\n  /** The token denoting the `token` fields of the `FeeTerms` objects. */\n  token: FeeToken | undefined;\n  title?: TeactNode;\n  extraContent?: TeactNode;\n};\n\nfunction FeeDetailsModal({ isOpen, onClose, title, ...restProps }: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      isCompact\n      title={title ?? lang('Blockchain Fee Details')}\n      contentClassName={styles.content}\n    >\n      <FeeDetailsContent onClose={onClose} {...restProps} />\n    </Modal>\n  );\n}\n\nexport default memo(FeeDetailsModal);\n\nfunction FeeDetailsContent({\n  onClose,\n  fullFee,\n  realFee,\n  realFeePrecision = 'exact',\n  excessFee,\n  excessFeePrecision = 'exact',\n  token,\n  extraContent,\n}: Omit<OwnProps, 'isOpen' | 'title'>) {\n  const chain = token && getChainBySlug(token.slug);\n  const nativeToken = chain && getChainConfig(chain).nativeToken;\n  const lang = useLang();\n\n  return (\n    <>\n      <div>\n        <div className={styles.chartLabels}>\n          <div className={buildClassName(styles.chartLabel, styles.realFee)}>\n            {lang('Final Fee')}\n          </div>\n          <div className={buildClassName(styles.chartLabel, styles.excessFee)}>\n            {lang('Excess')}\n          </div>\n        </div>\n        <div className={styles.chartLines}>\n          <div className={buildClassName(styles.chartLine, styles.realFee)}>\n            {realFee && token && (\n              <Fee\n                terms={realFee}\n                precision={realFeePrecision}\n                token={token}\n                shouldPreferIcons\n              />\n            )}\n          </div>\n          <div className={buildClassName(styles.chartLine, styles.excessFee)}>\n            {excessFee !== undefined && token && (\n              <Fee\n                terms={{ native: excessFee }}\n                precision={excessFeePrecision}\n                token={token}\n                shouldPreferIcons\n              />\n            )}\n          </div>\n        </div>\n      </div>\n      <div className={styles.explanation}>\n        <div>\n          {renderText(lang('$fee_details', {\n            full_fee: fullFee && token && <b><Fee terms={fullFee} precision=\"exact\" token={token} /></b>,\n            excess_symbol: <b>{nativeToken?.symbol}</b>,\n            chain_name: chain?.toUpperCase(),\n          }))}\n        </div>\n        {extraContent}\n      </div>\n      <div className={modalStyles.buttons}>\n        <Button isPrimary className={modalStyles.button} onClick={onClose}>\n          {lang('Got It')}\n        </Button>\n      </div>\n    </>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"tGUq61Uw\",\"scrollContent\":\"m5XAGki9\",\"amountInput\":\"SZC58ifv\",\"amountInputBuy\":\"uBBR78Gi\",\"inputLabel\":\"EeV5B584\",\"amountInputInner\":\"L752Cv1F\",\"advancedSlippageContainer\":\"jiH3u0SA\",\"content\":\"dQUuISOK\",\"inputContainer\":\"IkAedzyb\",\"advancedSlippageButton\":\"nnFruaI2\",\"swapButtonWrapper\":\"eEwTqlEP\",\"swapButtonWrapperStatic\":\"z1UgQ2yi\",\"swapButton\":\"hrHymNJu\",\"footerBlock\":\"yPmfwG9j\",\"footerBlockStatic\":\"Edk19FlP\",\"dot\":\"ru4rAllW\",\"advancedBlock\":\"dx6Hf2xp\",\"advancedRow\":\"QPeOMoOM\",\"advancedDescription\":\"YzXjxATB\",\"advancedTooltip\":\"QdMU2Tgb\",\"advancedTooltipContainer\":\"VGq4FFXS\",\"advancedValue\":\"JTLP1WRv\",\"advancedSlippageError\":\"NW_aag3U\",\"advancedSlippage\":\"K4rGLITC\",\"advancedInput\":\"uWjxL_tL\",\"advancedInputValue\":\"Y_KEhiFS\",\"isEmpty\":\"lP4fP0kG\",\"advancedError\":\"X2kTDRkO\",\"advancedLink\":\"NlT_I8kT\",\"advancedLinkIcon\":\"A0XDmIY2\",\"advancedPlaceholder\":\"vvtzW7L0\",\"footerButtonWrapper\":\"_5_NPQXE0\",\"footerButton\":\"qzfAPYMD\",\"footerButtonInner\":\"Ns4lxltP\",\"swapArrowIcon\":\"Vzdj7mTH\",\"changellyInfo\":\"gCMqbJwS\",\"priceImpact\":\"nwwHhwFa\",\"feeLine\":\"vz3aF88G\",\"priceImpactSticker\":\"YaZn9OUh\",\"priceImpactContent\":\"UUOZvXZT\",\"priceImpactTitle\":\"sbyrAyQC\",\"priceImpactArrow\":\"cEk2aQ7Z\",\"priceImpactDescription\":\"olGNOU3k\",\"swapCornerTop\":\"csDd7Ni1\",\"swapCornerBottom\":\"xyxUxtsY\",\"swapCornerStaticTop\":\"B7ECmlJ1\",\"swapCornerStaticBottom\":\"WuHn_HeC\",\"selectBlockchainBlock\":\"prVCHnG1\",\"inputAddressWrapper\":\"DTAq0std\",\"inputAddress\":\"b7EwDSEo\",\"blockchainHintWrapper\":\"ywkeppF2\",\"changellyDescription\":\"V7p8St7r\",\"blockchainHintText\":\"CBP3_LjF\",\"blockchainHintTextError\":\"t2EtyAQD\",\"inputButton\":\"IpN3STYq\",\"inputButtonShifted\":\"xDE5m07O\",\"changellyInfoStatic\":\"EvrCvWOD\",\"priceImpactStatic\":\"eoiWwJ0m\",\"changellyInfoTitle\":\"fwJQ9lpO\",\"changellyInfoDescription\":\"Y38OidS3\",\"changellyIcon\":\"ieB34P8k\",\"changellyInfoBlock\":\"aQOSkXKG\",\"blockchainButtons\":\"pQ9YM0ta\",\"changellyTextField\":\"cTKYWTLL\",\"textFieldWrapperFullWidth\":\"VR4c3lOH\",\"changellyImportantRed\":\"M_DwJtlB\",\"arrowContainer\":\"abK4XtWe\",\"arrowContainerInverted\":\"OSP7z62u\",\"arrow\":\"ZktBDvds\",\"arrowNew\":\"Z8CqJe5c\",\"arrowOld\":\"G_2MIwOh\",\"animateDisappear\":\"PpIbnc8v\",\"arrow-disappear\":\"VKHzIRP6\",\"arrowDisappear\":\"VKHzIRP6\",\"animateAppear\":\"STVPF9rF\",\"arrow-appear\":\"igBksUDT\",\"arrowAppear\":\"igBksUDT\",\"transactionBanner\":\"T1jLnRBM\",\"changellyDescriptionBold\":\"Vbj5MEAN\",\"qrCode\":\"MuLyFrfU\",\"qrCodeHidden\":\"Fn7oQpnQ\",\"textFieldLabel\":\"ak6Vmppj\"};","import React, { memo, useRef } from '../../../lib/teact/teact';\n\nimport type { DieselStatus, UserSwapToken } from '../../../global/types';\nimport { SwapErrorType, SwapType } from '../../../global/types';\n\nimport { ANIMATION_END_DELAY } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatCurrencySimple } from '../../../util/formatNumber';\n\nimport { useThrottledSignal } from '../../../hooks/useAsyncResolvers';\nimport useDerivedSignal from '../../../hooks/useDerivedSignal';\nimport useDerivedState from '../../../hooks/useDerivedState';\nimport useLang from '../../../hooks/useLang';\n\nimport Button from '../../ui/Button';\nimport Transition from '../../ui/Transition';\n\nimport styles from '../Swap.module.scss';\n\ninterface OwnProps {\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  amountIn?: string;\n  amountOut?: string;\n  swapType?: SwapType;\n  isEstimating?: boolean;\n  isSending?: boolean;\n  isNotEnoughNative?: boolean;\n  nativeToken?: UserSwapToken;\n  dieselStatus?: DieselStatus;\n  isPriceImpactError?: boolean;\n  canSubmit?: boolean;\n  errorType?: SwapErrorType;\n  limits?: {\n    fromMin?: string;\n    fromMax?: string;\n  };\n}\n\nconst BUTTON_ANIMATION_DURATION = 250 + ANIMATION_END_DELAY;\n\nfunction SwapSubmitButton({\n  tokenIn,\n  tokenOut,\n  amountIn,\n  amountOut,\n  swapType,\n  isEstimating,\n  isSending,\n  isNotEnoughNative,\n  nativeToken,\n  dieselStatus,\n  isPriceImpactError,\n  canSubmit,\n  errorType,\n  limits,\n}: OwnProps) {\n  const lang = useLang();\n\n  const isErrorExist = errorType !== undefined;\n  const shouldSendingBeVisible = isSending && swapType === SwapType.CrosschainToWallet;\n  const isDisabled = !canSubmit || shouldSendingBeVisible;\n  const isLoading = isEstimating || shouldSendingBeVisible;\n\n  const errorMsgByType = {\n    [SwapErrorType.UnexpectedError]: lang('Unexpected Error'),\n    [SwapErrorType.InvalidPair]: lang('Invalid Pair'),\n    [SwapErrorType.NotEnoughLiquidity]: lang('Insufficient liquidity'),\n    [SwapErrorType.ChangellyMinSwap]: lang('Minimum amount', {\n      value: formatCurrencySimple(limits?.fromMin ?? '0', tokenIn?.symbol ?? '', tokenIn?.decimals),\n    }),\n    [SwapErrorType.ChangellyMaxSwap]: lang('Maximum amount', {\n      value: formatCurrencySimple(limits?.fromMax ?? '0', tokenIn?.symbol ?? '', tokenIn?.decimals),\n    }),\n    [SwapErrorType.NotEnoughForFee]: lang('Not Enough %symbol%', {\n      symbol: tokenIn?.symbol,\n    }),\n    [SwapErrorType.TooSmallAmount]: lang('$swap_too_small_amount'),\n  };\n\n  const isTouched = Boolean(amountIn || amountOut);\n\n  let text: string | string[] = '$swap_from_to';\n\n  if (isTouched) {\n    if (isErrorExist) {\n      text = errorMsgByType[errorType] as string;\n    } else if (nativeToken) {\n      if (isNotEnoughNative && tokenIn?.chain === 'ton' && tokenIn?.tokenAddress) {\n        if (dieselStatus === 'not-available') {\n          text = lang('Not Enough %symbol%', { symbol: 'TON' }) as string;\n        } else if (dieselStatus === 'pending-previous') {\n          text = lang('Awaiting Previous Fee');\n        } else if (dieselStatus === 'not-authorized') {\n          text = lang('Authorize %token% Fee', { token: tokenIn?.symbol }) as string;\n        }\n      } else if (isNotEnoughNative) {\n        text = lang('Not Enough %symbol%', { symbol: nativeToken?.symbol }) as string;\n      }\n    }\n  }\n\n  const textStr = Array.isArray(text) ? text.join('') : text;\n\n  const shouldShowError = !isEstimating && (\n    isPriceImpactError\n    || isErrorExist\n    || (nativeToken && isNotEnoughNative && (\n      !dieselStatus\n      || dieselStatus === 'not-available'\n      || dieselStatus === 'pending-previous'\n    ))\n  );\n\n  const isDestructive = isTouched && shouldShowError;\n\n  const transitionKeyRef = useRef(0);\n  const render = useDerivedSignal(() => {\n    const renderedText = textStr === '$swap_from_to'\n      ? lang('$swap_from_to', {\n        from: tokenIn?.symbol,\n        icon: <i className={buildClassName('icon-chevron-right', styles.swapArrowIcon)} aria-hidden />,\n        to: tokenOut?.symbol,\n      })\n      : textStr;\n\n    return (\n      <Transition\n        name=\"semiFade\"\n        className={styles.footerButtonWrapper}\n        activeKey={transitionKeyRef.current++}\n      >\n        <Button\n          isPrimary\n          isSubmit\n          className={styles.footerButton}\n          isDisabled={isDisabled}\n          isLoading={isLoading}\n          isDestructive={isDestructive}\n        >\n          {/* The <span> is to have inline content positioning to align the icon properly */}\n          <span className={styles.footerButtonInner}>{renderedText}</span>\n        </Button>\n      </Transition>\n    );\n  }, [isDestructive, isDisabled, isLoading, lang, textStr, tokenIn?.symbol, tokenOut?.symbol]);\n\n  const renderThrottled = useThrottledSignal(render, BUTTON_ANIMATION_DURATION);\n  const rendered = useDerivedState(renderThrottled);\n\n  return rendered;\n}\n\nexport default memo(SwapSubmitButton);\n","import type { Scheduler } from '../util/schedulers';\nimport type { Signal } from '../util/signals';\n\nimport useDebouncedCallback from './useDebouncedCallback';\nimport useDerivedSignal from './useDerivedSignal';\nimport useThrottledCallback from './useThrottledCallback';\n\nexport function useThrottledResolver<T>(\n  resolver: () => T,\n  deps: unknown[],\n  msOrSchedulerFn: number | Scheduler,\n  noFirst = false,\n) {\n  return useThrottledCallback((setValue: (newValue: T) => void) => {\n    setValue(resolver());\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, deps, msOrSchedulerFn, noFirst);\n}\n\nexport function useThrottledSignal<T>(\n  getValue: Signal<T>,\n  ms: number,\n  noFirst = false,\n): Signal<T> {\n  const throttledResolver = useThrottledResolver(() => getValue(), [getValue], ms, noFirst);\n\n  return useDerivedSignal(\n    throttledResolver, [throttledResolver, getValue], true,\n  );\n}\n\nexport function useDebouncedResolver<T>(\n  resolver: () => T,\n  deps: any[],\n  ms: number,\n  noFirst = false,\n  noLast = false,\n) {\n  return useDebouncedCallback((setValue: (newValue: T) => void) => {\n    setValue(resolver());\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, deps, ms, noFirst, noLast);\n}\n\nexport function useDebouncedSignal<T>(\n  getValue: Signal<T>,\n  ms: number,\n  noFirst = false,\n  noLast = false,\n): Signal<T> {\n  const debouncedResolver = useDebouncedResolver(() => getValue(), [getValue], ms, noFirst, noLast);\n\n  return useDerivedSignal(\n    debouncedResolver, [debouncedResolver, getValue], true,\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"mdHmid9q\",\"container\":\"y7MeqLtP\",\"content\":\"M5luQatq\",\"button\":\"bmtS8v9y\",\"static\":\"VF77TUMq\",\"label\":\"Er8PXP6e\",\"labelText\":\"IIv2eCYK\",\"iconArrowRight\":\"jDHaQfBV\",\"dexList\":\"NlzL4Voz\",\"dexItem\":\"lL1VFeQA\",\"bestRate\":\"AC6eCyuu\",\"current\":\"_F70O58C\",\"dexValue\":\"J5iGiLKz\",\"dexTitle\":\"YT_HY2ps\",\"dexIcon\":\"V0Td82aA\",\"dexValueFractional\":\"jQ6cgMjD\",\"dexExchangeRate\":\"JAHr4SCc\",\"dexInfo\":\"sRFnXBUF\",\"dexInfoDisabled\":\"e9qAwzfb\",\"bestLabel\":\"gq26TBf_\",\"dexSubmitSlide\":\"i8eq5QM3\",\"dexSubmitButtons\":\"IfkI_jwY\",\"dexBestRateButton\":\"MevYjouy\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useMemo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSwapDexLabel, ApiSwapEstimateVariant } from '../../api/types';\nimport type { GlobalState, UserSwapToken } from '../../global/types';\nimport { SwapInputSource } from '../../global/types';\n\nimport {\n  DEFAULT_OUR_SWAP_FEE,\n  SHORT_FRACTION_DIGITS,\n  SWAP_DEX_LABELS,\n  WHOLE_PART_DELIMITER,\n} from '../../config';\nimport { getNumberParts } from '../../global/helpers/number';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { fromDecimal, toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport getSwapRate from '../../util/swap/getSwapRate';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './SwapDexChooser.module.scss';\n\nimport DedustPath from '../../assets/logo/dedust.png';\nimport StonfiPath from '../../assets/logo/stonfi.png';\n\ninterface OwnProps {\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  isStatic?: boolean;\n}\n\ninterface StateProps {\n  currentSwap: GlobalState['currentSwap'];\n}\n\nconst IS_WHOLE_PART_BIG_REGEX = /^\\d{5,}([.,]|$)/;\n\nfunction SwapDexChooser({\n  tokenIn,\n  tokenOut,\n  isStatic,\n  currentSwap: {\n    amountOut,\n    amountIn,\n    estimates,\n    currentDexLabel,\n    bestRateDexLabel,\n    inputSource,\n    ourFeePercent = DEFAULT_OUR_SWAP_FEE,\n  },\n}: OwnProps & StateProps) {\n  const { setSwapDex } = getActions();\n\n  const lang = useLang();\n\n  const [isModalOpen, openModal, closeModal] = useFlag(false);\n  const [selectedDexLabel, setSelectedDexLabel] = useState<ApiSwapDexLabel | undefined>(currentDexLabel);\n  const renderedDexItems = useCurrentOrPrev(estimates?.length ? estimates : undefined, true);\n  const renderedCurrentDexLabel = useCurrentOrPrev(currentDexLabel, true);\n  const renderedBestRateDexLabel = useCurrentOrPrev(bestRateDexLabel, true);\n  const isBestRateSelected = Boolean(bestRateDexLabel && bestRateDexLabel === selectedDexLabel);\n  const confirmLabel = isBestRateSelected\n    ? lang('Use Best Rate')\n    : lang('Switch to %dex_name%', {\n      dex_name: selectedDexLabel ? SWAP_DEX_LABELS[selectedDexLabel] : '',\n    });\n\n  const { shouldRender, ref: rootRef } = useShowTransition({\n    isOpen: !!estimates?.length && !!tokenOut && !!amountOut && !!amountIn,\n    withShouldRender: true,\n  });\n\n  const handleDexConfirm = useLastCallback(() => {\n    if (selectedDexLabel) {\n      setSwapDex({ dexLabel: selectedDexLabel });\n    }\n    closeModal();\n  });\n\n  function toggleDexMenu() {\n    if (isModalOpen) {\n      closeModal();\n    } else {\n      setSelectedDexLabel(currentDexLabel);\n      openModal();\n    }\n  }\n\n  const { shouldRender: shouldRenderBenefit, value: benefitAmount } = useMemo(() => {\n    return calculateBenefitAmount({\n      ourFeePercent,\n      decimals: inputSource === SwapInputSource.In ? tokenOut?.decimals : tokenIn?.decimals,\n      estimates,\n      inputSource,\n      bestRateDexLabel: renderedBestRateDexLabel,\n    });\n  }, [renderedBestRateDexLabel, estimates, inputSource, ourFeePercent, tokenIn?.decimals, tokenOut?.decimals]);\n\n  const renderedAmounts = useMemo<Record<ApiSwapDexLabel, TeactNode> | undefined>(() => {\n    if (!renderedDexItems?.length || renderedDexItems.length < 2) return undefined;\n\n    return renderedDexItems.reduce((acc, item) => {\n      const { fromAmount, toAmount, dexLabel } = item;\n      const amount = inputSource === SwapInputSource.In ? toAmount : fromAmount;\n      const token = inputSource === SwapInputSource.In ? tokenOut! : tokenIn!;\n\n      if (IS_WHOLE_PART_BIG_REGEX.test(amount)) {\n        const formattedAmount = formatDexItemAmount(amount, token);\n\n        if (formattedAmount) {\n          acc[dexLabel] = formattedAmount;\n        }\n      } else {\n        acc[dexLabel] = formatCurrency(amount, token.symbol);\n      }\n\n      return acc;\n    }, {} as Record<ApiSwapDexLabel, TeactNode>);\n  }, [inputSource, renderedDexItems, tokenIn, tokenOut]);\n\n  if (!shouldRender || !renderedDexItems?.length) return undefined;\n\n  const buttonContent = (\n    <>\n      {renderedBestRateDexLabel === renderedCurrentDexLabel && renderedDexItems.length > 1 && (\n        <span className={styles.label}><span className={styles.labelText}>{lang('Best Rate')}</span></span>\n      )}\n      {lang('via %dex_name%', {\n        dex_name: <strong>{SWAP_DEX_LABELS[renderedCurrentDexLabel!]}</strong>,\n      })}\n      {renderedDexItems.length > 1 && (\n        <i className={buildClassName('icon-chevron-right', styles.iconArrowRight)} aria-hidden />\n      )}\n    </>\n  );\n\n  if (renderedDexItems.length === 1) {\n    return (\n      <div ref={rootRef} className={styles.root}>\n        <div className={styles.container}>\n          <span className={buildClassName(styles.content, isStatic && styles.static)}>{buttonContent}</span>\n        </div>\n      </div>\n    );\n  }\n\n  function renderedDexItem(item: ApiSwapEstimateVariant) {\n    const rate = getSwapRate(item.fromAmount, item.toAmount, tokenIn, tokenOut);\n\n    return (\n      <div\n        key={item.dexLabel}\n        tabIndex={0}\n        role=\"button\"\n        className={buildClassName(\n          styles.dexItem,\n          renderedBestRateDexLabel === item.dexLabel && styles.bestRate,\n          selectedDexLabel === item.dexLabel && styles.current,\n        )}\n        onClick={() => { setSelectedDexLabel(item.dexLabel); }}\n      >\n        <div className={styles.dexTitle}>\n          <img\n            src={item.dexLabel === 'dedust' ? DedustPath : StonfiPath}\n            alt={SWAP_DEX_LABELS[item.dexLabel]}\n            className={styles.dexIcon}\n          />\n          {SWAP_DEX_LABELS[item.dexLabel]}\n        </div>\n        <div className={styles.dexValue}>{renderedAmounts?.[item.dexLabel]}</div>\n        <div className={styles.dexExchangeRate}>\n          {rate ? <>{rate.firstCurrencySymbol}&nbsp; {rate.price}&nbsp;{rate.secondCurrencySymbol}</> : undefined}\n        </div>\n        {item.dexLabel === renderedBestRateDexLabel && (\n          <span className={styles.bestLabel}>{lang('Best')}</span>\n        )}\n      </div>\n    );\n  }\n\n  function renderBenefitAmount() {\n    if (inputSource === SwapInputSource.Out) {\n      return (\n        <p className={buildClassName(styles.dexInfo, !isBestRateSelected && styles.dexInfoDisabled)}>\n          {renderText(lang('You will spend %amount% **less**.', {\n            amount: <strong>{formatCurrency(benefitAmount, tokenIn!.symbol)}</strong>,\n          }))}\n        </p>\n      );\n    }\n\n    return (\n      <p className={buildClassName(styles.dexInfo, !isBestRateSelected && styles.dexInfoDisabled)}>\n        {renderText(lang('You will receive %amount% **more**.', {\n          amount: <strong>{formatCurrency(benefitAmount, tokenOut!.symbol)}</strong>,\n        }))}\n      </p>\n    );\n  }\n\n  return (\n    <div ref={rootRef} className={styles.root}>\n      <div className={styles.container}>\n        <button\n          type=\"button\"\n          className={buildClassName(styles.button, isStatic && styles.static)}\n          onClick={toggleDexMenu}\n        >\n          {buttonContent}\n        </button>\n        <Modal\n          isOpen={isModalOpen}\n          isCompact\n          title={lang('Built-in DEX Aggregator')}\n          onClose={closeModal}\n        >\n          <div className={styles.dexList}>\n            {renderedDexItems.map((item) => renderedDexItem(item))}\n          </div>\n\n          <p className={buildClassName(styles.dexInfo, !isBestRateSelected && styles.dexInfoDisabled)}>\n            {renderText(lang('$swap_dex_chooser_rate_title'))}\n          </p>\n          {shouldRenderBenefit && renderBenefitAmount()}\n\n          <div className={buildClassName(modalStyles.buttons, styles.dexSubmitButtons)}>\n            <Transition\n              activeKey={isBestRateSelected ? 0 : 1}\n              name=\"semiFade\"\n              slideClassName={styles.dexSubmitSlide}\n            >\n              <Button\n                isPrimary\n                className={buildClassName(modalStyles.buttonFullWidth, isBestRateSelected && styles.dexBestRateButton)}\n                onClick={handleDexConfirm}\n              >\n                {confirmLabel}\n              </Button>\n            </Transition>\n\n          </div>\n        </Modal>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    currentSwap: global.currentSwap,\n  };\n})(SwapDexChooser));\n\nfunction calculateBenefitAmount({\n  ourFeePercent,\n  decimals,\n  bestRateDexLabel,\n  estimates,\n  inputSource,\n}: {\n  ourFeePercent: number;\n  decimals?: number;\n  estimates?: ApiSwapEstimateVariant[];\n  bestRateDexLabel?: ApiSwapDexLabel;\n  inputSource?: SwapInputSource;\n}) {\n  if (!estimates || estimates.length < 2) {\n    return { shouldRender: false, value: '0' };\n  }\n\n  const bestRateEstimate = estimates.find(({ dexLabel }) => dexLabel === bestRateDexLabel);\n  const otherEstimate = estimates.find(({ dexLabel }) => dexLabel !== bestRateDexLabel);\n\n  if (!otherEstimate || !bestRateEstimate) {\n    return { shouldRender: false, value: '0' };\n  }\n\n  const isDirectSwap = inputSource === SwapInputSource.In;\n  const amountKey = isDirectSwap ? 'toAmount' : 'fromAmount';\n  const ourFeeValue = (Number(bestRateEstimate[amountKey]) / 100) * ourFeePercent;\n  const benefit = (fromDecimal(bestRateEstimate[amountKey], decimals) - fromDecimal(otherEstimate[amountKey], decimals))\n    * (isDirectSwap ? 1n : -1n);\n  const shouldRender = (benefit - fromDecimal(ourFeeValue, decimals)) > 0n;\n\n  return {\n    shouldRender,\n    value: toDecimal(benefit, decimals),\n  };\n}\n\nfunction formatDexItemAmount(toAmount: string, tokenOut: UserSwapToken): TeactNode | undefined {\n  const parts = getNumberParts(toAmount, SHORT_FRACTION_DIGITS);\n  if (!parts) return undefined;\n\n  const [, wholePartRaw, dotPart, fractionPart] = parts;\n  const fractionStr = fractionPart || dotPart\n    ? `.${(fractionPart || '').substring(0, SHORT_FRACTION_DIGITS)}`\n    : '';\n\n  const formattedWholePart = wholePartRaw.replace(/\\d(?=(\\d{3})+($))/g, `$&${WHOLE_PART_DELIMITER}`);\n\n  return (\n    <>\n      {formattedWholePart}\n      <span className={styles.dexValueFractional}>{fractionStr}&thinsp;{tokenOut.symbol}</span>\n    </>\n  );\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useMemo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSwapAsset } from '../../api/types';\nimport type { DieselStatus } from '../../global/types';\nimport { SwapType } from '../../global/types';\n\nimport { DEFAULT_OUR_SWAP_FEE } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectCurrentAccountTokenBalance,\n  selectCurrentSwapTokenIn,\n  selectCurrentSwapTokenOut,\n  selectSwapType,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { findChainConfig } from '../../util/chain';\nimport { explainSwapFee } from '../../util/fee/swapFee';\nimport { formatCurrency } from '../../util/formatNumber';\nimport getSwapRate from '../../util/swap/getSwapRate';\nimport { getChainBySlug } from '../../util/tokens';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport IconWithTooltip from '../ui/IconWithTooltip';\nimport Modal from '../ui/Modal';\nimport RichNumberInput from '../ui/RichNumberInput';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  showFullNetworkFee?: boolean;\n  onClose: () => void;\n  onNetworkFeeClick?: () => void;\n}\n\ninterface StateProps {\n  amountIn?: string;\n  amountOut?: string;\n  tokenIn?: ApiSwapAsset;\n  tokenOut?: ApiSwapAsset;\n  networkFee?: string;\n  realNetworkFee?: string;\n  swapType: SwapType;\n  slippage: number;\n  priceImpact?: number;\n  amountOutMin?: string;\n  ourFee?: string;\n  ourFeePercent?: number;\n  dieselStatus?: DieselStatus;\n  dieselFee?: string;\n  nativeTokenInBalance?: bigint;\n}\n\nconst SLIPPAGE_VALUES = [0.5, 1, 2, 5, 10];\nconst MAX_SLIPPAGE_VALUE = 50;\n\nexport const MAX_PRICE_IMPACT_VALUE = 5;\n\nfunction SwapSettingsContent({\n  onClose,\n  amountIn,\n  amountOut,\n  swapType,\n  tokenIn,\n  tokenOut,\n  slippage,\n  priceImpact,\n  networkFee,\n  realNetworkFee,\n  amountOutMin,\n  ourFee,\n  ourFeePercent = DEFAULT_OUR_SWAP_FEE,\n  dieselStatus,\n  dieselFee,\n  nativeTokenInBalance,\n  showFullNetworkFee,\n  onNetworkFeeClick,\n}: Omit<OwnProps, 'isOpen'> & StateProps) {\n  const { setSlippage } = getActions();\n  const lang = useLang();\n  const canEditSlippage = swapType === SwapType.OnChain;\n\n  // In order to reset this state when the modal is closed, we rely on the fact that Modal unmounts the content when\n  // it's closed.\n  const [currentSlippage, setCurrentSlippage] = useState<number | undefined>(slippage);\n\n  const priceImpactError = (priceImpact ?? 0) >= MAX_PRICE_IMPACT_VALUE;\n  const slippageError = currentSlippage === undefined\n    ? 'Slippage not specified'\n    : currentSlippage > MAX_SLIPPAGE_VALUE\n      ? 'Slippage too high'\n      : '';\n\n  const handleSave = useLastCallback(() => {\n    setSlippage({ slippage: currentSlippage! });\n    onClose();\n  });\n\n  const handleInputChange = useLastCallback((stringValue?: string) => {\n    const value = stringValue ? Number(stringValue) : undefined;\n    setCurrentSlippage(value);\n  });\n\n  const explainedFee = useMemo(\n    () => explainSwapFee({\n      swapType,\n      tokenInSlug: tokenIn?.slug,\n      networkFee,\n      realNetworkFee,\n      ourFee,\n      dieselStatus,\n      dieselFee,\n      nativeTokenInBalance,\n    }),\n    [swapType, tokenIn, networkFee, realNetworkFee, ourFee, dieselStatus, dieselFee, nativeTokenInBalance],\n  );\n\n  function renderSlippageValues() {\n    const slippageList = SLIPPAGE_VALUES.map((value, index) => {\n      return (\n        <div key={value} className={styles.advancedSlippageButton}>\n          <div\n            role=\"button\"\n            tabIndex={0}\n            onClick={() => setCurrentSlippage(value)}\n            className={styles.balanceLink}\n          >{value}%\n          </div>\n          {index + 1 !== SLIPPAGE_VALUES.length && <i className={styles.dot} aria-hidden />}\n        </div>\n      );\n    });\n\n    return (\n      <div className={styles.advancedSlippageContainer}>\n        <span className={styles.advancedSlippage}>{slippageList}</span>\n      </div>\n    );\n  }\n\n  function renderSlippageError() {\n    return (\n      <div className={styles.advancedSlippageError}>\n        <span>{lang(slippageError)}</span>\n      </div>\n    );\n  }\n\n  function renderRate() {\n    const rate = getSwapRate(\n      amountIn,\n      amountOut,\n      tokenIn,\n      tokenOut,\n      true,\n    );\n\n    return (\n      <div className={styles.advancedRow}>\n        <span className={styles.advancedDescription}>\n          {lang('Exchange Rate')}\n        </span>\n        <span className={styles.advancedValue}>\n          {rate\n            ? `${rate.firstCurrencySymbol}  ${rate.price} ${rate.secondCurrencySymbol}`\n            : <ValuePlaceholder />}\n        </span>\n      </div>\n    );\n  }\n\n  function renderNetworkFee() {\n    const actualFee = showFullNetworkFee ? explainedFee.fullFee : explainedFee.realFee;\n    let feeElement = actualFee && tokenIn && (\n      <Fee\n        terms={actualFee.networkTerms}\n        precision={actualFee.precision}\n        token={tokenIn}\n      />\n    );\n\n    if (feeElement && onNetworkFeeClick) {\n      feeElement = (\n        <span\n          role=\"button\"\n          tabIndex={0}\n          className={styles.advancedLink}\n          onClick={() => onNetworkFeeClick()}\n        >\n          <span>{feeElement}</span>\n          <i className={buildClassName('icon-chevron-right', styles.advancedLinkIcon)} aria-hidden />\n        </span>\n      );\n    }\n\n    return (\n      <div className={styles.advancedRow}>\n        <span className={styles.advancedDescription}>\n          {lang('Blockchain Fee')}\n        </span>\n        <span className={styles.advancedValue}>\n          {feeElement || <ValuePlaceholder />}\n        </span>\n      </div>\n    );\n  }\n\n  function renderSlippageLabel() {\n    return (\n      <>\n        {lang('Slippage')}\n        <Tooltip isError={Boolean(slippageError)}>\n          <span>{lang('$swap_slippage_tooltip1')}</span>\n          <span>{lang('$swap_slippage_tooltip2')}</span>\n        </Tooltip>\n      </>\n    );\n  }\n\n  return (\n    <>\n      {canEditSlippage && (\n        <div className={styles.advancedInput}>\n          {renderSlippageValues()}\n          <RichNumberInput\n            labelText={renderSlippageLabel()}\n            labelClassName={styles.slippageLabel}\n            value={currentSlippage?.toString()}\n            hasError={Boolean(slippageError)}\n            decimals={2}\n            suffix=\"%\"\n            size=\"normal\"\n            onChange={handleInputChange}\n          />\n          {renderSlippageError()}\n        </div>\n      )}\n      <div className={styles.advancedBlock}>\n        {renderRate()}\n        {renderNetworkFee()}\n\n        {explainedFee.shouldShowOurFee && (\n          <div className={styles.advancedRow}>\n            <span className={styles.advancedDescription}>\n              {lang('Aggregator Fee')}\n              <Tooltip>\n                <span>{renderText(lang('$swap_aggregator_fee_tooltip', { percent: `${ourFeePercent}%` }))}</span>\n              </Tooltip>\n            </span>\n            <span className={styles.advancedValue}>\n              {ourFee !== undefined\n                ? formatCurrency(ourFee, tokenIn?.symbol ?? '', undefined, true)\n                : <ValuePlaceholder />}\n            </span>\n          </div>\n        )}\n        {swapType === SwapType.OnChain && (\n          <>\n            <div className={styles.advancedRow}>\n              <span className={buildClassName(styles.advancedDescription, priceImpactError && styles.advancedError)}>\n                {lang('Price Impact')}\n                <Tooltip isError={Boolean(priceImpactError)}>\n                  <span>{lang('$swap_price_impact_tooltip1')}</span>\n                  <span>{lang('$swap_price_impact_tooltip2')}</span>\n                </Tooltip>\n              </span>\n              <span className={buildClassName(styles.advancedValue, priceImpactError && styles.advancedError)}>\n                {priceImpact !== undefined ? `${priceImpact}%` : <ValuePlaceholder />}\n              </span>\n            </div>\n            <div className={styles.advancedRow}>\n              <span className={styles.advancedDescription}>\n                {lang('Minimum Received')}\n                <Tooltip>\n                  <span>{lang('$swap_minimum_received_tooltip1')}</span>\n                  <span>{lang('$swap_minimum_received_tooltip2')}</span>\n                </Tooltip>\n              </span>\n              <span className={styles.advancedValue}>\n                {amountOutMin !== undefined && tokenOut\n                  ? formatCurrency(amountOutMin, tokenOut.symbol)\n                  : <ValuePlaceholder />}\n              </span>\n            </div>\n          </>\n        )}\n      </div>\n      <div className={modalStyles.buttons}>\n        <Button\n          className={modalStyles.button}\n          onClick={onClose}\n        >\n          {lang('Close')}\n        </Button>\n        {canEditSlippage && (\n          <Button\n            isPrimary\n            isDisabled={Boolean(slippageError)}\n            className={modalStyles.button}\n            onClick={handleSave}\n          >\n            {lang('Save')}\n          </Button>\n        )}\n      </div>\n    </>\n  );\n}\n\nconst SwapSettings = memo(\n  withGlobal<Omit<OwnProps, 'isOpen'>>((global): StateProps => {\n    const {\n      tokenInSlug,\n      amountIn,\n      amountOut,\n      networkFee,\n      realNetworkFee,\n      slippage,\n      priceImpact,\n      amountOutMin,\n      ourFee,\n      ourFeePercent,\n      dieselStatus,\n      dieselFee,\n    } = global.currentSwap;\n\n    const nativeToken = tokenInSlug ? findChainConfig(getChainBySlug(tokenInSlug))?.nativeToken : undefined;\n    const nativeTokenInBalance = nativeToken ? selectCurrentAccountTokenBalance(global, nativeToken.slug) : undefined;\n\n    return {\n      amountIn,\n      amountOut,\n      networkFee,\n      realNetworkFee,\n      swapType: selectSwapType(global),\n      tokenIn: selectCurrentSwapTokenIn(global),\n      tokenOut: selectCurrentSwapTokenOut(global),\n      slippage,\n      priceImpact,\n      amountOutMin,\n      ourFee,\n      ourFeePercent,\n      dieselStatus,\n      dieselFee,\n      nativeTokenInBalance,\n    };\n  })(SwapSettingsContent),\n);\n\nexport default function SwapSettingsModal({ isOpen, onClose, ...restProps }: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} isCompact title={lang('Swap Details')}>\n      <SwapSettings onClose={onClose} {...restProps} />\n    </Modal>\n  );\n}\n\nfunction ValuePlaceholder() {\n  const lang = useLang();\n  return <span className={styles.advancedPlaceholder}>{lang('No Data')}</span>;\n}\n\nfunction Tooltip({ children, isError }: { children: TeactNode; isError?: boolean }) {\n  return (\n    <>\n      {' '}\n      <IconWithTooltip\n        message={children}\n        size=\"small\"\n        iconClassName={buildClassName(styles.advancedTooltip, isError && styles.advancedError)}\n        tooltipClassName={styles.advancedTooltipContainer}\n      />\n    </>\n  );\n}\n","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../global';\n\nimport type { ApiChain, ApiToken } from '../../api/types';\nimport type {\n  Account, ActionPayloads, AssetPairs, GlobalState, UserSwapToken,\n} from '../../global/types';\nimport type { LangFn } from '../../hooks/useLang';\nimport type { ExplainedSwapFee } from '../../util/fee/swapFee';\nimport type { FeePrecision, FeeTerms } from '../../util/fee/types';\nimport { SwapInputSource, SwapState, SwapType } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_SIZE_PX,\n  ANIMATION_LEVEL_MAX,\n  CHANGELLY_AML_KYC,\n  CHANGELLY_PRIVACY_POLICY,\n  CHANGELLY_TERMS_OF_USE,\n  DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  TONCOIN,\n} from '../../config';\nimport {\n  selectCurrentAccount,\n  selectIsMultichainAccount,\n  selectSwapTokens,\n  selectSwapType,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { findChainConfig } from '../../util/chain';\nimport { fromDecimal, toDecimal } from '../../util/decimals';\nimport { stopEvent } from '../../util/domEvents';\nimport { explainSwapFee, getMaxSwapAmount, isBalanceSufficientForSwap } from '../../util/fee/swapFee';\nimport { vibrate } from '../../util/haptics';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { isBackgroundModeActive } from '../../hooks/useBackgroundMode';\nimport useDebouncedCallback from '../../hooks/useDebouncedCallback';\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport FeeDetailsModal from '../common/FeeDetailsModal';\nimport SelectTokenButton from '../common/SelectTokenButton';\nimport AmountInputMaxButton from '../ui/AmountInputMaxButton';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport FeeLine from '../ui/FeeLine';\nimport RichNumberInput from '../ui/RichNumberInput';\nimport SwapSubmitButton from './components/SwapSubmitButton';\nimport SwapDexChooser from './SwapDexChooser';\nimport SwapSettingsModal, { MAX_PRICE_IMPACT_VALUE } from './SwapSettingsModal';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n  isActive?: boolean;\n}\n\ninterface StateProps {\n  addressByChain?: Account['addressByChain'];\n  currentSwap: GlobalState['currentSwap'];\n  tokens?: UserSwapToken[];\n  isMultichainAccount?: boolean;\n  swapType: SwapType;\n  isSensitiveDataHidden?: true;\n  pairsBySlug?: Record<string, AssetPairs>;\n}\n\nconst ESTIMATE_REQUEST_INTERVAL = 1_000;\nconst SET_AMOUNT_DEBOUNCE_TIME = 500;\n\nfunction SwapInitial({\n  currentSwap: {\n    tokenInSlug,\n    tokenOutSlug,\n    amountIn,\n    amountOut,\n    errorType,\n    isEstimating,\n    networkFee,\n    realNetworkFee,\n    priceImpact = 0,\n    inputSource,\n    limits,\n    isLoading,\n    dieselStatus,\n    ourFee,\n    ourFeePercent,\n    dieselFee,\n  },\n  addressByChain,\n  tokens,\n  isActive,\n  isStatic,\n  isMultichainAccount,\n  swapType,\n  isSensitiveDataHidden,\n  pairsBySlug,\n}: OwnProps & StateProps) {\n  const {\n    setDefaultSwapParams,\n    setSwapAmountIn,\n    setSwapAmountOut,\n    switchSwapTokens,\n    estimateSwap,\n    setSwapScreen,\n    setSwapCexAddress,\n    authorizeDiesel,\n    showNotification,\n  } = getActions();\n  const lang = useLang();\n\n  const inputInRef = useRef<HTMLDivElement>();\n  const inputOutRef = useRef<HTMLDivElement>();\n\n  const currentTokenInSlug = tokenInSlug ?? TONCOIN.slug;\n  const currentTokenOutSlug = tokenOutSlug ?? DEFAULT_SWAP_SECOND_TOKEN_SLUG;\n\n  const tokenIn = useMemo(\n    () => tokens?.find((token) => token.slug === currentTokenInSlug),\n    [currentTokenInSlug, tokens],\n  );\n  const tokenOut = useMemo(\n    () => tokens?.find((token) => token.slug === currentTokenOutSlug),\n    [currentTokenOutSlug, tokens],\n  );\n\n  const nativeTokenInSlug = isMultichainAccount || tokenIn?.chain === 'ton'\n    ? findChainConfig(tokenIn?.chain)?.nativeToken.slug\n    : undefined;\n  const nativeUserTokenIn = useMemo(\n    () => tokens?.find((token) => token.slug === nativeTokenInSlug),\n    [nativeTokenInSlug, tokens],\n  );\n  const nativeTokenInBalance = nativeUserTokenIn?.amount ?? 0n;\n\n  const amountInBigint = amountIn && tokenIn ? fromDecimal(amountIn, tokenIn.decimals) : undefined;\n  const amountOutBigint = amountOut && tokenOut ? fromDecimal(amountOut, tokenOut.decimals) : undefined;\n  const balanceIn = tokenIn?.amount ?? 0n;\n\n  const explainedFee = useMemo(\n    () => explainSwapFee({\n      swapType,\n      tokenInSlug,\n      networkFee,\n      realNetworkFee,\n      ourFee,\n      dieselStatus,\n      dieselFee,\n      nativeTokenInBalance,\n    }),\n    [swapType, tokenInSlug, networkFee, realNetworkFee, ourFee, dieselStatus, dieselFee, nativeTokenInBalance],\n  );\n\n  const maxAmount = getMaxSwapAmount({\n    swapType,\n    tokenInBalance: balanceIn,\n    tokenIn,\n    fullNetworkFee: explainedFee.fullFee?.networkTerms,\n    ourFeePercent,\n  });\n\n  // Note: this constant has 3 distinct meaningful values\n  const isEnoughBalance = isBalanceSufficientForSwap({\n    swapType,\n    tokenInBalance: balanceIn,\n    tokenIn,\n    fullNetworkFee: explainedFee.fullFee?.networkTerms,\n    ourFeePercent,\n    amountIn,\n    nativeTokenInBalance,\n  });\n\n  const networkFeeBigint = networkFee !== undefined && nativeUserTokenIn\n    ? fromDecimal(networkFee, nativeUserTokenIn.decimals)\n    : 0n;\n  const isEnoughNative = nativeTokenInBalance >= networkFeeBigint;\n\n  const isDieselNotAuthorized = explainedFee.isGasless && dieselStatus === 'not-authorized';\n\n  const canSubmit = isDieselNotAuthorized || (\n    (amountInBigint ?? 0n) > 0n\n    && (amountOutBigint ?? 0n) > 0n\n    && isEnoughBalance\n    && (!explainedFee.isGasless || dieselStatus === 'available' || dieselStatus === 'stars-fee')\n    && !isEstimating\n    && errorType === undefined\n  );\n\n  const hasAmountInError = amountInBigint !== undefined && maxAmount !== undefined && amountInBigint > maxAmount;\n  const amountOutValue = (amountInBigint ?? 0n) <= 0n && inputSource === SwapInputSource.In\n    ? ''\n    : amountOut?.toString();\n  const isAmountGreaterThanBalance = balanceIn !== undefined && amountInBigint !== undefined\n    && amountInBigint > balanceIn;\n  const hasInsufficientFeeError = isEnoughBalance === false && !isAmountGreaterThanBalance\n    && dieselStatus !== 'not-authorized' && dieselStatus !== 'pending-previous';\n\n  const isPriceImpactError = priceImpact >= MAX_PRICE_IMPACT_VALUE;\n  const isCrosschain = swapType === SwapType.CrosschainFromWallet || swapType === SwapType.CrosschainToWallet;\n\n  const [isBuyAmountInputDisabled, handleBuyAmountInputClick] = useReverseProhibited(\n    isCrosschain,\n    pairsBySlug,\n    currentTokenInSlug,\n    currentTokenOutSlug,\n    showNotification,\n    lang,\n  );\n\n  const handleEstimateSwap = useLastCallback(() => {\n    if ((!isActive || isBackgroundModeActive()) && !isEstimating) return;\n\n    estimateSwap();\n  });\n\n  const debounceSetAmountIn = useDebouncedCallback(\n    setSwapAmountIn, [setSwapAmountIn], SET_AMOUNT_DEBOUNCE_TIME, true,\n  );\n  const debounceSetAmountOut = useDebouncedCallback(\n    setSwapAmountOut, [setSwapAmountOut], SET_AMOUNT_DEBOUNCE_TIME, true,\n  );\n\n  const [currentSubModal, openSettingsModal, openFeeModal, closeSubModal] = useSubModals(explainedFee);\n\n  useEffect(() => {\n    if (!tokenInSlug && !tokenOutSlug) {\n      setDefaultSwapParams();\n    }\n  }, [tokenInSlug, tokenOutSlug]);\n\n  useEffect(() => {\n    if (isEstimating) {\n      handleEstimateSwap();\n    }\n\n    const intervalId = setInterval(handleEstimateSwap, ESTIMATE_REQUEST_INTERVAL);\n    return () => clearInterval(intervalId);\n  }, [isEstimating]);\n\n  const handleAmountInChange = useLastCallback(\n    (amount: string | undefined) => {\n      debounceSetAmountIn({ amount: amount || undefined });\n    },\n  );\n\n  const handleSelectTokenInModalOpen = useLastCallback(() => {\n    setSwapScreen({ state: SwapState.SelectTokenFrom });\n  });\n\n  const handleSelectTokenOutModalOpen = useLastCallback(() => {\n    setSwapScreen({ state: SwapState.SelectTokenTo });\n  });\n\n  const handleAmountOutChange = useLastCallback(\n    (amount: string | undefined) => {\n      debounceSetAmountOut({ amount: amount || undefined });\n    },\n  );\n\n  const handleMaxAmountClick = useLastCallback(() => {\n    if (maxAmount === undefined) {\n      return;\n    }\n\n    void vibrate();\n\n    const amount = toDecimal(maxAmount, tokenIn!.decimals);\n    setSwapAmountIn({ amount, isMaxAmount: true });\n  });\n\n  const handleSubmit = useLastCallback((e: React.FormEvent | React.UIEvent) => {\n    stopEvent(e);\n\n    if (!canSubmit) {\n      return;\n    }\n\n    if (isDieselNotAuthorized) {\n      authorizeDiesel();\n      return;\n    }\n\n    void vibrate();\n\n    if (isCrosschain) {\n      setSwapCexAddress({ toAddress: '' });\n      if (swapType === SwapType.CrosschainToWallet) {\n        setSwapScreen({ state: SwapState.Password });\n      } else if (\n        isMultichainAccount\n        && addressByChain![tokenIn!.chain as ApiChain]\n        && addressByChain![tokenOut!.chain as ApiChain]\n      ) {\n        setSwapCexAddress({ toAddress: addressByChain![tokenOut!.chain as ApiChain]! });\n        setSwapScreen({ state: SwapState.Password });\n      } else {\n        setSwapScreen({ state: SwapState.Blockchain });\n      }\n      return;\n    }\n\n    setSwapScreen({ state: SwapState.Password });\n  });\n\n  const handleSwitchTokens = useLastCallback(() => {\n    void vibrate();\n    switchSwapTokens();\n  });\n\n  function renderBalance() {\n    return (\n      <AmountInputMaxButton\n        maxAmount={maxAmount}\n        token={tokenIn}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        onAmountClick={handleMaxAmountClick}\n      />\n    );\n  }\n\n  function renderFee() {\n    const shouldShow = (amountIn && amountOut) // We aim to synchronize the disappearing of the fee with the DEX chooser disappearing\n      || ((amountIn || amountOut) && errorType); // Without this sub-condition the fee wouldn't be shown when the amount is outside the Changelly limits\n\n    let terms: FeeTerms | undefined;\n    let precision: FeePrecision = 'exact';\n\n    if (shouldShow) {\n      const actualFee = hasInsufficientFeeError ? explainedFee.fullFee : undefined;\n      if (actualFee) {\n        ({ terms, precision } = actualFee);\n      }\n    }\n\n    return (\n      <FeeLine\n        isStatic={isStatic}\n        terms={terms}\n        token={tokenIn}\n        precision={precision}\n        keepDetailsButtonWithoutFee\n        onDetailsClick={openSettingsModal}\n        className={styles.feeLine}\n      />\n    );\n  }\n\n  function renderPriceImpactWarning() {\n    if (!priceImpact || !isPriceImpactError || isCrosschain) {\n      return undefined;\n    }\n\n    return (\n      <div\n        className={buildClassName(styles.priceImpact, isStatic && styles.priceImpactStatic)}\n        onClick={openSettingsModal}\n      >\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.run}\n          previewUrl={ANIMATED_STICKERS_PATHS.runPreview}\n          noLoop={false}\n          nonInteractive\n          size={ANIMATED_STICKER_TINY_SIZE_PX}\n          className={styles.priceImpactSticker}\n        />\n        <div className={styles.priceImpactContent}>\n          <span className={styles.priceImpactTitle}>\n            {lang('The exchange rate is below market value!', { value: `${priceImpact}%` })}\n            <i className={buildClassName(styles.priceImpactArrow, 'icon-chevron-right')} aria-hidden />\n          </span>\n          <span className={styles.priceImpactDescription}>\n            {lang('We do not recommend to perform an exchange, try to specify a lower amount.')}\n          </span>\n        </div>\n      </div>\n    );\n  }\n\n  function renderChangellyInfo() {\n    if (!isCrosschain) {\n      return undefined;\n    }\n\n    return (\n      <div className={buildClassName(styles.changellyInfo, isStatic && styles.changellyInfoStatic)}>\n        <span className={styles.changellyInfoTitle}>\n          <i className={buildClassName('icon-changelly', styles.changellyIcon)} aria-hidden />\n          {lang('Cross-chain exchange provided by Changelly')}\n        </span>\n        <span className={styles.changellyInfoDescription}>\n          {\n            lang('$swap_changelly_agreement_message', {\n              terms: (\n                <a href={CHANGELLY_TERMS_OF_USE} target=\"_blank\" rel=\"noreferrer\">\n                  {lang('$swap_changelly_terms_of_use')}\n                </a>\n              ),\n              policy: (\n                <a href={CHANGELLY_PRIVACY_POLICY} target=\"_blank\" rel=\"noreferrer\">\n                  {lang('$swap_changelly_privacy_policy')}\n                </a>\n              ),\n              kyc: <a href={CHANGELLY_AML_KYC} target=\"_blank\" rel=\"noreferrer\">Changelly AML/KYC</a>,\n            })\n          }\n        </span>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <form className={isStatic ? undefined : modalStyles.transitionContent} onSubmit={handleSubmit}>\n        <div className={styles.content}>\n          <div ref={inputInRef} className={styles.inputContainer}>\n            {renderBalance()}\n            <RichNumberInput\n              id=\"swap-sell\"\n              labelText={lang('You sell')}\n              className={styles.amountInput}\n              hasError={hasAmountInError}\n              value={amountIn?.toString()}\n              isLoading={isEstimating && inputSource === SwapInputSource.Out}\n              onChange={handleAmountInChange}\n              onPressEnter={handleSubmit}\n              decimals={tokenIn?.decimals}\n              labelClassName={styles.inputLabel}\n              inputClassName={styles.amountInputInner}\n              cornerClassName={buildClassName(styles.swapCornerTop, isStatic && styles.swapCornerStaticTop)}\n              isStatic={isStatic}\n            >\n              <SelectTokenButton token={tokenIn as ApiToken} onClick={handleSelectTokenInModalOpen} />\n            </RichNumberInput>\n          </div>\n\n          <div className={buildClassName(styles.swapButtonWrapper, isStatic && styles.swapButtonWrapperStatic)}>\n            <AnimatedArrows onClick={handleSwitchTokens} />\n          </div>\n\n          <div ref={inputOutRef} className={styles.inputContainer}>\n            <RichNumberInput\n              id=\"swap-buy\"\n              labelText={lang('You buy')}\n              className={styles.amountInputBuy}\n              value={amountOutValue}\n              isLoading={isEstimating && inputSource === SwapInputSource.In}\n              disabled={isBuyAmountInputDisabled}\n              onChange={handleAmountOutChange}\n              onPressEnter={handleSubmit}\n              onInputClick={handleBuyAmountInputClick}\n              decimals={tokenOut?.decimals}\n              labelClassName={styles.inputLabel}\n              inputClassName={styles.amountInputInner}\n              cornerClassName={buildClassName(styles.swapCornerBottom, isStatic && styles.swapCornerStaticBottom)}\n              isStatic={isStatic}\n            >\n              <SelectTokenButton token={tokenOut as ApiToken} onClick={handleSelectTokenOutModalOpen} />\n            </RichNumberInput>\n          </div>\n        </div>\n        <SwapDexChooser tokenIn={tokenIn} tokenOut={tokenOut} isStatic={isStatic} />\n\n        <div className={buildClassName(styles.footerBlock, isStatic && styles.footerBlockStatic)}>\n          {renderFee()}\n          {renderPriceImpactWarning()}\n          {renderChangellyInfo()}\n\n          <SwapSubmitButton\n            tokenIn={tokenIn}\n            tokenOut={tokenOut}\n            amountIn={amountIn}\n            amountOut={amountOut}\n            swapType={swapType}\n            isEstimating={isEstimating}\n            isNotEnoughNative={!isEnoughNative}\n            nativeToken={nativeUserTokenIn}\n            dieselStatus={dieselStatus}\n            isSending={isLoading}\n            isPriceImpactError={isPriceImpactError}\n            canSubmit={canSubmit}\n            errorType={errorType}\n            limits={limits}\n          />\n        </div>\n      </form>\n      <SwapSettingsModal\n        isOpen={currentSubModal === 'settings'}\n        onClose={closeSubModal}\n        onNetworkFeeClick={openFeeModal}\n        showFullNetworkFee={hasInsufficientFeeError}\n      />\n      <FeeDetailsModal\n        isOpen={currentSubModal === 'feeDetails'}\n        onClose={closeSubModal}\n        fullFee={explainedFee.fullFee?.networkTerms}\n        realFee={explainedFee.realFee?.networkTerms}\n        realFeePrecision={explainedFee.realFee?.precision}\n        excessFee={explainedFee.excessFee}\n        excessFeePrecision=\"approximate\"\n        token={tokenIn}\n      />\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const account = selectCurrentAccount(global);\n\n      return {\n        currentSwap: global.currentSwap,\n        tokens: selectSwapTokens(global),\n        addressByChain: account?.addressByChain,\n        isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n        swapType: selectSwapType(global),\n        isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n        pairsBySlug: global.swapPairs?.bySlug,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(SwapInitial),\n);\n\nfunction useReverseProhibited(\n  isCrosschain: boolean,\n  pairsBySlug: Record<string, AssetPairs> | undefined,\n  currentTokenInSlug: string,\n  currentTokenOutSlug: string,\n  showNotification: (arg: ActionPayloads['showNotification']) => void,\n  lang: LangFn,\n) {\n  const isReverseProhibited = isCrosschain\n    || pairsBySlug?.[currentTokenInSlug]?.[currentTokenOutSlug]?.isReverseProhibited;\n  const isBuyAmountInputDisabled = isReverseProhibited;\n\n  const handleBuyAmountInputClick = useMemo(() => {\n    return isReverseProhibited\n      ? () => {\n        void vibrate();\n        showNotification({ message: lang('$swap_reverse_prohibited') });\n      }\n      : undefined;\n  }, [isReverseProhibited, lang, showNotification]);\n\n  return [isBuyAmountInputDisabled, handleBuyAmountInputClick] as const;\n}\n\nfunction AnimatedArrows({ onClick }: { onClick?: NoneToVoidFunction }) {\n  const animationLevel = getGlobal().settings.animationLevel;\n  const shouldAnimate = (animationLevel === ANIMATION_LEVEL_MAX);\n  const [hasAnimation, startAnimation, stopAnimation] = useFlag(false);\n\n  const handleClick = useLastCallback(() => {\n    if (shouldAnimate) {\n      startAnimation();\n      window.setTimeout(() => {\n        stopAnimation();\n      }, 350);\n    }\n\n    onClick?.();\n  });\n\n  function renderArrow(isInverted?: boolean) {\n    return (\n      <div className={buildClassName(styles.arrowContainer, isInverted && styles.arrowContainerInverted)}>\n        <div className={styles.arrow}>\n          <i className=\"icon-arrow-up-swap\" aria-hidden />\n        </div>\n        <div className={buildClassName(styles.arrowOld, hasAnimation && styles.animateDisappear)}>\n          <i className=\"icon-arrow-up-swap\" aria-hidden />\n        </div>\n        <div className={buildClassName(styles.arrowNew, hasAnimation && styles.animateAppear)}>\n          <i className=\"icon-arrow-up-swap\" aria-hidden />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.swapButton} onClick={handleClick}>\n      {renderArrow()}\n      {renderArrow(true)}\n    </div>\n  );\n}\n\nfunction useSubModals(explainedFee: ExplainedSwapFee) {\n  const isFeeModalAvailable = explainedFee.realFee?.precision !== 'exact';\n  const [currentModal, setCurrentModal] = useState<'settings' | 'feeDetails'>();\n\n  const openSettings = useLastCallback(() => setCurrentModal('settings'));\n  const openFeeDetailsIfAvailable = useMemo(\n    () => (isFeeModalAvailable ? () => setCurrentModal('feeDetails') : undefined),\n    [isFeeModalAvailable],\n  );\n  const close = useLastCallback(() => setCurrentModal(undefined));\n\n  return [currentModal, openSettings, openFeeDetailsIfAvailable, close] as const;\n}\n","export function trimStringByMaxBytes(str: string, maxBytes: number): string {\n  const decoder = new TextDecoder('utf-8');\n  const encoded = new TextEncoder().encode(str);\n  const sliced = encoded.slice(0, maxBytes);\n\n  return decoder.decode(sliced).replace(/\\uFFFD/g, '');\n}\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiChain } from '../../api/types';\n\nimport renderText from '../../global/helpers/renderText';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Dropdown from '../ui/Dropdown';\nimport Input from '../ui/Input';\nimport InteractiveTextField from '../ui/InteractiveTextField';\n\nimport styles from './Transfer.module.scss';\n\nconst COMMENT_DROPDOWN_ITEMS = [\n  { value: 'raw', name: 'Comment or Memo' },\n  { value: 'encrypted', name: 'Encrypted Message' },\n];\n\ninterface OwnProps {\n  comment: string;\n  shouldEncrypt?: boolean;\n  binPayload?: string;\n  stateInit?: string;\n  chain?: ApiChain;\n  isStatic?: boolean;\n  isCommentRequired?: boolean;\n  isEncryptedCommentSupported: boolean;\n  onCommentChange: (value: string) => void;\n}\n\nfunction CommentSection({\n  comment,\n  shouldEncrypt,\n  binPayload,\n  stateInit,\n  chain,\n  isStatic,\n  isCommentRequired,\n  isEncryptedCommentSupported,\n  onCommentChange,\n}: OwnProps) {\n  const { setTransferShouldEncrypt } = getActions();\n\n  const lang = useLang();\n\n  const handleCommentOptionsChange = useLastCallback((option: string) => {\n    setTransferShouldEncrypt({ shouldEncrypt: option === 'encrypted' });\n  });\n\n  const dropdownItems = useMemo(\n    () => isEncryptedCommentSupported ? COMMENT_DROPDOWN_ITEMS : COMMENT_DROPDOWN_ITEMS.slice(0, 1),\n    [isEncryptedCommentSupported],\n  );\n\n  function renderCommentLabel() {\n    return (\n      <Dropdown\n        items={dropdownItems}\n        selectedValue={COMMENT_DROPDOWN_ITEMS[shouldEncrypt ? 1 : 0].value}\n        theme=\"inherit\"\n        disabled={chain === 'tron'}\n        menuPositionX=\"left\"\n        shouldTranslateOptions\n        onChange={handleCommentOptionsChange}\n      />\n    );\n  }\n\n  if (binPayload || stateInit) {\n    return (\n      <>\n        {binPayload && (\n          <>\n            <div className={styles.label}>{lang('Signing Data')}</div>\n            <InteractiveTextField\n              text={binPayload}\n              copyNotification={lang('Data was copied!')}\n              className={styles.addressWidget}\n            />\n          </>\n        )}\n\n        {stateInit && (\n          <>\n            <div className={styles.label}>{lang('Contract Initialization Data')}</div>\n            <InteractiveTextField\n              text={stateInit}\n              copyNotification={lang('Data was copied!')}\n              className={styles.addressWidget}\n            />\n          </>\n        )}\n\n        <div className={styles.error}>\n          {renderText(lang('$signature_warning'))}\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <Input\n      wrapperClassName={styles.commentInputWrapper}\n      className={isStatic ? styles.inputStatic : undefined}\n      label={renderCommentLabel()}\n      placeholder={isCommentRequired ? lang('Required') : lang('Optional')}\n      value={comment}\n      isMultiline\n      isDisabled={chain === 'tron'}\n      onInput={onCommentChange}\n      isRequired={isCommentRequired}\n    />\n  );\n}\n\nexport default memo(CommentSection);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useCallback, useEffect, useMemo, useRef } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiFetchEstimateDieselResult } from '../../api/chains/ton/types';\nimport type { ApiBaseCurrency, ApiNft } from '../../api/types';\nimport type { Account, SavedAddress, UserToken } from '../../global/types';\nimport type { LangFn } from '../../hooks/useLang';\nimport type { ExplainedTransferFee } from '../../util/fee/transferFee';\nimport type { FeePrecision, FeeTerms } from '../../util/fee/types';\nimport { ScamWarningType, TransferState } from '../../global/types';\n\nimport { DEFAULT_PRICE_CURRENCY, TONCOIN } from '../../config';\nimport { getHelpCenterUrl } from '../../global/helpers/getHelpCenterUrl';\nimport {\n  selectCurrentAccountState,\n  selectCurrentAccountTokenBalance,\n  selectCurrentAccountTokens,\n  selectIsAllowSuspiciousActions,\n  selectIsHardwareAccount,\n  selectIsMultichainAccount,\n  selectNetworkAccounts,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\nimport { stopEvent } from '../../util/domEvents';\nimport {\n  explainApiTransferFee,\n  getMaxTransferAmount,\n  isBalanceSufficientForTransfer,\n} from '../../util/fee/transferFee';\nimport { vibrate } from '../../util/haptics';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { debounce } from '../../util/schedulers';\nimport { trimStringByMaxBytes } from '../../util/text';\nimport { getChainBySlug, getIsServiceToken, getNativeToken } from '../../util/tokens';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useFlag from '../../hooks/useFlag';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport { useTransitionActiveKey } from '../../hooks/useTransitionActiveKey';\nimport { useAmountInputState } from '../ui/hooks/useAmountInputState';\n\nimport FeeDetailsModal from '../common/FeeDetailsModal';\nimport AddressInput from '../ui/AddressInput';\nimport AmountInputSection from '../ui/AmountInput';\nimport Button from '../ui/Button';\nimport FeeLine from '../ui/FeeLine';\nimport Modal from '../ui/Modal';\nimport Transition from '../ui/Transition';\nimport CommentSection from './CommentSection';\nimport NftChips from './NftChips';\nimport NftInfo from './NftInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n  slideClassName?: string;\n}\n\ninterface StateProps {\n  toAddress?: string;\n  resolvedAddress?: string;\n  toAddressName?: string;\n  amount?: bigint;\n  comment?: string;\n  shouldEncrypt?: boolean;\n  isActive: boolean;\n  isLoading?: boolean;\n  fee?: bigint;\n  realFee?: bigint;\n  tokenSlug: string;\n  tokens?: UserToken[];\n  savedAddresses?: SavedAddress[];\n  currentAccountId: string;\n  accounts?: Record<string, Account>;\n  nativeTokenBalance: bigint;\n  isEncryptedCommentSupported: boolean;\n  isMemoRequired?: boolean;\n  baseCurrency: ApiBaseCurrency;\n  nfts?: ApiNft[];\n  binPayload?: string;\n  stateInit?: string;\n  diesel?: ApiFetchEstimateDieselResult;\n  isDieselAuthorizationStarted?: boolean;\n  isMultichainAccount: boolean;\n  isSensitiveDataHidden?: true;\n  scamWarningType?: ScamWarningType;\n  isAllowSuspiciousActions: boolean;\n}\n\nconst COMMENT_MAX_SIZE_BYTES = 5000;\nconst ACTIVE_STATES = new Set([TransferState.Initial, TransferState.None]);\nconst AUTHORIZE_DIESEL_INTERVAL_MS = SECOND;\n\nconst runDebounce = debounce((cb) => cb(), 500, false);\n\nfunction TransferInitial({\n  isStatic,\n  slideClassName,\n  tokenSlug,\n  toAddress = '',\n  resolvedAddress,\n  toAddressName = '',\n  amount,\n  comment = '',\n  shouldEncrypt,\n  tokens,\n  fee,\n  realFee,\n  savedAddresses,\n  accounts,\n  nativeTokenBalance,\n  currentAccountId,\n  isEncryptedCommentSupported,\n  isMemoRequired,\n  isActive,\n  isLoading,\n  baseCurrency,\n  nfts,\n  binPayload,\n  stateInit,\n  diesel,\n  isDieselAuthorizationStarted,\n  isMultichainAccount,\n  isSensitiveDataHidden,\n  scamWarningType,\n  isAllowSuspiciousActions,\n}: OwnProps & StateProps) {\n  const {\n    submitTransferInitial,\n    fetchTransferFee,\n    fetchNftFee,\n    changeTransferToken,\n    setTransferAmount,\n    setTransferToAddress,\n    setTransferComment,\n    setTransferShouldEncrypt,\n    cancelTransfer,\n    showDialog,\n    authorizeDiesel,\n    fetchTransferDieselState,\n    checkTransferAddress,\n    dismissTransferScamWarning,\n  } = getActions();\n\n  const isNftTransfer = Boolean(nfts?.length);\n  if (isNftTransfer) {\n    // Token and amount can't be selected in the NFT transfer form, so they are overwritten once for convenience\n    tokenSlug = TONCOIN.slug;\n    amount = undefined;\n  }\n\n  const lang = useLang();\n\n  const transferToken = useMemo(() => tokens?.find((token) => token.slug === tokenSlug), [tokenSlug, tokens]);\n  const { amount: balance, symbol, chain } = transferToken || {};\n\n  const renderedScamWarningType = useCurrentOrPrev(scamWarningType, true);\n  const isDisabledDebounce = useRef<boolean>(false);\n  const isToncoin = tokenSlug === TONCOIN.slug;\n  const isAddressValid = chain ? isValidAddressOrDomain(toAddress, chain) : undefined;\n  const doesSupportComment = chain === 'ton';\n  const transitionKey = useTransitionActiveKey(nfts?.length ? nfts : [tokenSlug]);\n\n  const handleAddressInput = useLastCallback((newToAddress?: string, isValueReplaced?: boolean) => {\n    // If value is replaced, callbacks must be executed immediately, without debounce\n    if (isValueReplaced) {\n      isDisabledDebounce.current = true;\n    }\n\n    setTransferToAddress({ toAddress: newToAddress });\n  });\n\n  const shouldDisableClearButton = !toAddress && !(comment || binPayload) && !shouldEncrypt\n    && !(isNftTransfer ? isStatic : amount !== undefined);\n\n  const explainedFee = useMemo(\n    () => explainApiTransferFee({\n      fee, realFee, diesel, tokenSlug,\n    }),\n    [fee, realFee, diesel, tokenSlug],\n  );\n\n  // Note: this constant has 3 distinct meaningful values\n  const isEnoughBalance = isBalanceSufficientForTransfer({\n    tokenBalance: balance,\n    nativeTokenBalance,\n    transferAmount: isNftTransfer ? 0n : amount,\n    fullFee: explainedFee.fullFee?.terms,\n    canTransferFullBalance: explainedFee.canTransferFullBalance,\n  });\n\n  const isAmountMissing = !isNftTransfer && !amount;\n\n  const maxAmount = getMaxTransferAmount({\n    tokenBalance: balance,\n    tokenSlug,\n    fullFee: explainedFee.fullFee?.terms,\n    canTransferFullBalance: explainedFee.canTransferFullBalance,\n  });\n\n  const isDieselNotAuthorized = diesel?.status === 'not-authorized';\n  const authorizeDieselInterval = isDieselNotAuthorized && isDieselAuthorizationStarted\n    ? AUTHORIZE_DIESEL_INTERVAL_MS\n    : undefined;\n\n  const updateDieselState = useLastCallback(() => {\n    fetchTransferDieselState({ tokenSlug });\n  });\n\n  useInterval(updateDieselState, authorizeDieselInterval);\n\n  useEffect(() => {\n    if (\n      isToncoin\n      && balance && amount && fee\n      && amount < balance\n      && fee < balance\n      && amount + fee >= balance\n    ) {\n      setTransferAmount({ amount: balance - fee });\n    }\n  }, [isToncoin, amount, balance, fee]);\n\n  // Note: this effect doesn't watch amount changes mainly because it's tricky to program a fee recalculation avoidance\n  // when the amount changes due to a fee change. And it's not needed because the fee doesn't depend on the amount.\n  useEffect(() => {\n    if (isAmountMissing || !isAddressValid) {\n      return;\n    }\n\n    const runFunction = () => {\n      if (isNftTransfer) {\n        fetchNftFee({\n          toAddress,\n          comment,\n          nfts: nfts ?? [],\n        });\n      } else {\n        fetchTransferFee({\n          tokenSlug,\n          toAddress,\n          comment,\n          shouldEncrypt,\n          binPayload,\n          stateInit,\n        });\n      }\n    };\n\n    if (!isDisabledDebounce.current) {\n      runDebounce(runFunction);\n    } else {\n      isDisabledDebounce.current = false;\n      runFunction();\n    }\n  }, [\n    isAmountMissing, binPayload, comment, shouldEncrypt, isAddressValid, isNftTransfer, nfts, stateInit, toAddress,\n    tokenSlug,\n  ]);\n\n  useEffect(() => {\n    if (getIsServiceToken(transferToken)) {\n      showDialog({\n        title: lang('Warning!'),\n        message: lang('$service_token_transfer_warning'),\n        noBackdropClose: true,\n      });\n    }\n  }, [lang, transferToken]);\n\n  const handleTokenChange = useLastCallback((slug: string) => {\n    changeTransferToken({ tokenSlug: slug });\n  });\n\n  function clearForm() {\n    handleAddressInput('');\n    checkTransferAddress({ address: '' });\n    setTransferAmount({ amount: undefined });\n    setTransferComment({ comment: undefined });\n    setTransferShouldEncrypt({ shouldEncrypt: false });\n  }\n\n  const handleClear = useLastCallback(() => {\n    if (isStatic) {\n      cancelTransfer({ shouldReset: true });\n    } else {\n      clearForm();\n    }\n  });\n\n  const handleScamWarningModalClose = useLastCallback(() => {\n    dismissTransferScamWarning();\n\n    if (isStatic) {\n      clearForm();\n    } else {\n      cancelTransfer({ shouldReset: true });\n    }\n  });\n\n  const handleAmountChange = (amount?: bigint, isValueReplaced?: boolean) => {\n    // The amount input may change the amount when it's in the base currency mode and the token price changes.\n    // Meanwhile, the amount in the global state must not change after the transfer form is submitted.\n    if (!isActive) {\n      return;\n    }\n\n    if (amount !== undefined && amount < 0) {\n      return;\n    }\n\n    // If the value is replaced, callbacks must be executed immediately, without debounce\n    if (isValueReplaced) {\n      isDisabledDebounce.current = true;\n    }\n\n    setTransferAmount({ amount });\n  };\n\n  const handlePaste = useLastCallback(() => {\n    isDisabledDebounce.current = true;\n  });\n\n  const handleCommentChange = useLastCallback((value) => {\n    setTransferComment({ comment: trimStringByMaxBytes(value, COMMENT_MAX_SIZE_BYTES) });\n  });\n\n  const isAmountGreaterThanBalance = !isNftTransfer && balance !== undefined && amount !== undefined\n    && amount > balance;\n  const hasInsufficientFeeError = isEnoughBalance === false && !isAmountGreaterThanBalance\n    && diesel?.status !== 'not-authorized' && diesel?.status !== 'pending-previous';\n  const hasAmountError = !isNftTransfer && amount !== undefined && (\n    (maxAmount !== undefined && amount > maxAmount)\n    || hasInsufficientFeeError // Ideally, the insufficient fee error message should be displayed somewhere else\n  );\n  const isCommentRequired = Boolean(toAddress) && isMemoRequired;\n  const hasCommentError = isCommentRequired && !comment;\n\n  const canSubmit = isDieselNotAuthorized || Boolean(\n    isAddressValid\n    && !isAmountMissing && !hasAmountError\n    && isEnoughBalance\n    && !hasCommentError\n    && (!explainedFee.isGasless || diesel?.status === 'available' || diesel?.status === 'stars-fee')\n    && !(isNftTransfer && !nfts?.length),\n  );\n\n  const handleSubmit = useLastCallback((e?: React.FormEvent | React.UIEvent) => {\n    if (e) stopEvent(e);\n\n    if (scamWarningType) return;\n\n    if (isDieselNotAuthorized) {\n      authorizeDiesel();\n      return;\n    }\n\n    if (!canSubmit) {\n      return;\n    }\n\n    void vibrate();\n\n    submitTransferInitial({\n      tokenSlug,\n      amount: amount ?? 0n,\n      toAddress,\n      comment,\n      binPayload,\n      shouldEncrypt,\n      nfts,\n      withDiesel: explainedFee.isGasless,\n      isGaslessWithStars: diesel?.status === 'stars-fee',\n      stateInit,\n    });\n  });\n\n  const [isFeeModalOpen, openFeeModal, closeFeeModal] = useFeeModal(explainedFee);\n\n  const tokensToSelect = useMemo(\n    () => (tokens ?? []).filter((token) => isSelectableToken(token, tokenSlug)),\n    [tokens, tokenSlug],\n  );\n\n  const amountInputProps = useAmountInputState({\n    amount,\n    token: transferToken,\n    baseCurrency,\n    onAmountChange: handleAmountChange,\n    onTokenChange: handleTokenChange,\n  });\n\n  // It is necessary to use useCallback instead of useLastCallback here\n  const renderBottomRight = useCallback((className?: string) => {\n    let transitionKey = 0;\n    let content: TeactNode = ' ';\n\n    if (amount) {\n      if (isAmountGreaterThanBalance) {\n        transitionKey = 1;\n        content = <span className={styles.balanceError}>{lang('Insufficient balance')}</span>;\n      } else if (hasInsufficientFeeError) {\n        transitionKey = 2;\n        content = <span className={styles.balanceError}>{lang('Insufficient fee')}</span>;\n      }\n    }\n\n    return (\n      <Transition\n        className={className}\n        name=\"fade\"\n        activeKey={transitionKey}\n      >\n        {content}\n      </Transition>\n    );\n  }, [amount, hasInsufficientFeeError, isAmountGreaterThanBalance, lang]);\n\n  function renderButtonText() {\n    if (diesel?.status === 'not-authorized') {\n      return lang('Authorize %token% Fee', { token: symbol! });\n    }\n    if (diesel?.status === 'pending-previous') {\n      return lang('Awaiting Previous Fee');\n    }\n    return lang('$send_token_symbol', isNftTransfer ? 'NFT' : symbol || 'TON');\n  }\n\n  function renderFee() {\n    let terms: FeeTerms | undefined;\n    let precision: FeePrecision = 'exact';\n\n    if (!isAmountMissing) {\n      const actualFee = hasInsufficientFeeError ? explainedFee.fullFee : explainedFee.realFee;\n      if (actualFee) {\n        ({ terms, precision } = actualFee);\n      }\n    }\n\n    return (\n      <FeeLine\n        isStatic={isStatic}\n        terms={terms}\n        token={transferToken}\n        precision={precision}\n        onDetailsClick={openFeeModal}\n      />\n    );\n  }\n\n  return (\n    <>\n      <form\n        className={isStatic ? undefined : modalStyles.transitionContent}\n        onSubmit={handleSubmit}\n        onPaste={handlePaste}\n      >\n        <Transition\n          activeKey={transitionKey}\n          name=\"semiFade\"\n          direction={isStatic && !doesSupportComment ? 'inverse' : undefined}\n          shouldCleanup\n          slideClassName={buildClassName(styles.formSlide, isStatic && styles.formSlide_static, slideClassName)}\n        >\n          {nfts?.length === 1 && <NftInfo nft={nfts[0]} isStatic={isStatic} withMediaViewer />}\n          {Boolean(nfts?.length) && nfts.length > 1 && <NftChips nfts={nfts} isStatic={isStatic} />}\n\n          <AddressInput\n            label={lang('Recipient Address')}\n            value={toAddress}\n            chain={chain}\n            // NFT transfers are available only on the TON blockchain on this moment\n            addressBookChain={isNftTransfer ? 'ton' : undefined}\n            currentAccountId={currentAccountId}\n            accounts={accounts}\n            savedAddresses={savedAddresses}\n            validateAddress={checkTransferAddress}\n            isStatic={isStatic}\n            withQrScan\n            address={resolvedAddress || toAddress}\n            addressName={toAddressName}\n            onInput={handleAddressInput}\n            onClose={cancelTransfer}\n          />\n\n          {!isNftTransfer && (\n            <AmountInputSection\n              {...amountInputProps}\n              maxAmount={maxAmount}\n              token={transferToken}\n              allTokens={tokensToSelect}\n              isStatic={isStatic}\n              hasError={hasAmountError}\n              isMultichainAccount={isMultichainAccount}\n              isMaxAmountLoading={maxAmount === undefined}\n              isSensitiveDataHidden={isSensitiveDataHidden}\n              renderBottomRight={renderBottomRight}\n              onPressEnter={handleSubmit}\n            />\n          )}\n\n          {doesSupportComment && (\n            <CommentSection\n              comment={comment}\n              shouldEncrypt={shouldEncrypt}\n              binPayload={binPayload}\n              stateInit={stateInit}\n              chain={chain}\n              isStatic={isStatic}\n              isCommentRequired={isCommentRequired}\n              isEncryptedCommentSupported={isEncryptedCommentSupported}\n              onCommentChange={handleCommentChange}\n            />\n          )}\n\n          <div className={buildClassName(styles.footer, isStatic && chain !== 'ton' && styles.footer_shifted)}>\n            {renderFee()}\n\n            <div className={styles.buttons}>\n              <Button\n                isDisabled={shouldDisableClearButton || isLoading}\n                className={styles.button}\n                onClick={handleClear}\n              >\n                {lang('Clear')}\n              </Button>\n              <Button\n                isPrimary\n                isSubmit\n                isDisabled={!canSubmit}\n                isLoading={isLoading}\n                className={styles.button}\n              >\n                {renderButtonText()}\n              </Button>\n            </div>\n          </div>\n        </Transition>\n      </form>\n      <FeeDetailsModal\n        isOpen={isFeeModalOpen}\n        onClose={closeFeeModal}\n        fullFee={explainedFee.fullFee?.terms}\n        realFee={explainedFee.realFee?.terms}\n        realFeePrecision={explainedFee.realFee?.precision}\n        excessFee={explainedFee.excessFee}\n        excessFeePrecision=\"approximate\"\n        token={transferToken}\n      />\n      <Modal\n        isOpen={Boolean(scamWarningType)}\n        isCompact\n        title={lang('Warning!')}\n        noBackdropClose\n        onClose={dismissTransferScamWarning}\n      >\n        <div>\n          {getScamWarning(lang, renderedScamWarningType)}\n        </div>\n        <div className={modalStyles.footerButtons}>\n          {isAllowSuspiciousActions ? (\n            <>\n              <Button className={modalStyles.fluidButton} onClick={handleScamWarningModalClose}>{lang('Exit')}</Button>\n              <Button\n                isPrimary\n                isDestructive\n                className={modalStyles.button}\n                onClick={dismissTransferScamWarning}\n              >\n                {lang('Continue')}\n              </Button>\n            </>\n          ) : (\n            <Button onClick={handleScamWarningModalClose}>{lang('Exit')}</Button>\n          )}\n        </div>\n      </Modal>\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const {\n        toAddress,\n        resolvedAddress,\n        toAddressName,\n        amount,\n        comment,\n        shouldEncrypt,\n        fee,\n        realFee,\n        tokenSlug,\n        isLoading,\n        state,\n        nfts,\n        binPayload,\n        isMemoRequired,\n        diesel,\n        stateInit,\n        scamWarningType,\n      } = global.currentTransfer;\n\n      const isLedger = selectIsHardwareAccount(global);\n      const accountState = selectCurrentAccountState(global);\n      const { baseCurrency = DEFAULT_PRICE_CURRENCY, isSensitiveDataHidden } = global.settings;\n      const isActive = ACTIVE_STATES.has(state);\n\n      return {\n        toAddress,\n        resolvedAddress,\n        toAddressName,\n        amount,\n        comment,\n        shouldEncrypt,\n        fee,\n        realFee,\n        nfts,\n        tokenSlug,\n        binPayload,\n        stateInit,\n        tokens: selectCurrentAccountTokens(global),\n        savedAddresses: accountState?.savedAddresses,\n        isEncryptedCommentSupported: !isLedger && !nfts?.length && !isMemoRequired,\n        isMemoRequired,\n        isActive,\n        isLoading: isLoading && isActive,\n        baseCurrency,\n        currentAccountId: global.currentAccountId!,\n        accounts: selectNetworkAccounts(global),\n        nativeTokenBalance: selectCurrentAccountTokenBalance(global, getNativeToken(getChainBySlug(tokenSlug)).slug),\n        diesel,\n        isDieselAuthorizationStarted: accountState?.isDieselAuthorizationStarted,\n        isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n        isSensitiveDataHidden,\n        scamWarningType,\n        isAllowSuspiciousActions: selectIsAllowSuspiciousActions(global, global.currentAccountId!),\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(TransferInitial),\n);\n\nfunction useFeeModal(explainedFee: ExplainedTransferFee) {\n  const isAvailable = explainedFee.realFee?.precision !== 'exact';\n  const [isOpen, open, close] = useFlag(false);\n  const openIfAvailable = isAvailable ? open : undefined;\n  return [isOpen, openIfAvailable, close] as const;\n}\n\nfunction isSelectableToken(token: UserToken, selectedTokenSlug: string) {\n  return token.type !== 'lp_token'\n    || (token.amount > 0 && !token.isDisabled)\n    || token.slug === selectedTokenSlug;\n}\n\nfunction getScamWarning(lang: LangFn, scamWarning: ScamWarningType | undefined) {\n  if (!scamWarning) return undefined;\n\n  return lang(scamWarning === ScamWarningType.DomainLike\n    ? '$domain_like_scam_warning'\n    : '$seed_phrase_scam_warning', {\n    help_center_link: (\n      <a\n        href={getHelpCenterUrl(lang.code, scamWarning === ScamWarningType.DomainLike ? 'domainScam' : 'seedScam')}\n        target=\"_blank\"\n        rel=\"noreferrer\"\n      >\n        <b>{lang('$help_center_prepositional')}</b>\n      </a>\n    ),\n  });\n}\n","import { type ElementRef, useEffect, useState } from '../lib/teact/teact';\nimport { addExtraClass, removeExtraClass } from '../lib/teact/teact-dom';\n\nimport type { IAnchorPosition } from '../global/types';\n\nimport { requestMutation } from '../lib/fasterdom/fasterdom';\nimport { stopEvent } from '../util/domEvents';\nimport { vibrate } from '../util/haptics';\nimport { IS_IOS, IS_PWA, IS_TOUCH_ENV } from '../util/windowEnvironment';\nimport useLastCallback from './useLastCallback';\n\nconst LONG_TAP_DURATION_MS = 200;\nconst IOS_PWA_CONTEXT_MENU_DELAY_MS = 100;\n\ninterface OwnProps {\n  elementRef: ElementRef<HTMLElement>;\n  isMenuDisabled?: boolean;\n  shouldDisableOnLink?: boolean;\n  shouldDisableOnLongTap?: boolean;\n  shouldDisablePropagation?: boolean;\n}\n\nconst useContextMenuHandlers = ({\n  elementRef,\n  isMenuDisabled,\n  shouldDisableOnLink,\n  shouldDisableOnLongTap,\n  shouldDisablePropagation,\n}: OwnProps) => {\n  const [isContextMenuOpen, setIsContextMenuOpen] = useState(false);\n  const [contextMenuAnchor, setContextMenuAnchor] = useState<IAnchorPosition | undefined>(undefined);\n  const [contextMenuTarget, setContextMenuTarget] = useState<HTMLElement | undefined>(undefined);\n\n  const handleBeforeContextMenu = useLastCallback((e: React.MouseEvent) => {\n    if (!isMenuDisabled && e.button === 2) {\n      requestMutation(() => {\n        addExtraClass(e.target as HTMLElement, 'no-selection');\n      });\n    }\n  });\n\n  const handleContextMenu = useLastCallback((e: React.MouseEvent) => {\n    requestMutation(() => {\n      removeExtraClass(e.target as HTMLElement, 'no-selection');\n    });\n\n    if (isMenuDisabled || (shouldDisableOnLink && (e.target as HTMLElement).matches('a[href]'))) {\n      return;\n    }\n    stopEvent(e);\n\n    if (contextMenuAnchor) {\n      return;\n    }\n\n    setIsContextMenuOpen(true);\n    setContextMenuAnchor({ x: e.clientX, y: e.clientY });\n    setContextMenuTarget(e.target as HTMLElement);\n    void vibrate();\n  });\n\n  const handleContextMenuClose = useLastCallback(() => {\n    setIsContextMenuOpen(false);\n  });\n\n  const handleContextMenuHide = useLastCallback(() => {\n    setContextMenuAnchor(undefined);\n  });\n\n  const handleTouchMove = useLastCallback((e: TouchEvent) => {\n    if (isContextMenuOpen) {\n      stopEvent(e);\n    }\n  });\n\n  // Support context menu on touch devices\n  useEffect(() => {\n    if (isMenuDisabled || !IS_TOUCH_ENV || shouldDisableOnLongTap) {\n      return undefined;\n    }\n\n    const element = elementRef.current;\n    if (!element) {\n      return undefined;\n    }\n\n    let timer: number | undefined;\n\n    const clearLongPressTimer = () => {\n      if (timer) {\n        clearTimeout(timer);\n        timer = undefined;\n      }\n    };\n    const clearLongPressTimerAndStopEvent = (origialEvent: TouchEvent) => {\n      clearLongPressTimer();\n      handleTouchMove(origialEvent);\n    };\n\n    const emulateContextMenuEvent = (originalEvent: TouchEvent) => {\n      clearLongPressTimer();\n\n      const { clientX, clientY, target } = originalEvent.touches[0];\n\n      if (contextMenuAnchor || (shouldDisableOnLink && (target as HTMLElement).matches('a[href]'))) {\n        return;\n      }\n\n      // Temporarily intercept and clear the next click\n      document.addEventListener('touchend', (e) => {\n        // On iOS in PWA mode, the context menu may cause click-through to the element in the menu upon opening\n        if (IS_IOS && IS_PWA) {\n          setTimeout(() => {\n            document.removeEventListener('mousedown', stopEvent, {\n              capture: true,\n            });\n            document.removeEventListener('click', stopEvent, {\n              capture: true,\n            });\n          }, IOS_PWA_CONTEXT_MENU_DELAY_MS);\n        }\n        stopEvent(e);\n      }, {\n        once: true,\n        capture: true,\n      });\n\n      // On iOS15, in PWA mode, the context menu immediately closes after opening\n      if (IS_PWA && IS_IOS) {\n        document.addEventListener('mousedown', stopEvent, {\n          once: true,\n          capture: true,\n        });\n        document.addEventListener('click', stopEvent, {\n          once: true,\n          capture: true,\n        });\n      }\n\n      setIsContextMenuOpen(true);\n      setContextMenuAnchor({ x: clientX, y: clientY });\n      void vibrate();\n    };\n\n    const startLongPressTimer = (e: TouchEvent) => {\n      if (isMenuDisabled) {\n        return;\n      }\n      if (shouldDisablePropagation) e.stopPropagation();\n      clearLongPressTimer();\n\n      timer = window.setTimeout(() => emulateContextMenuEvent(e), LONG_TAP_DURATION_MS);\n    };\n\n    // @perf Consider event delegation\n    element.addEventListener('touchstart', startLongPressTimer, { passive: true });\n    element.addEventListener('touchcancel', clearLongPressTimer, true);\n    element.addEventListener('touchend', clearLongPressTimer, true);\n    // `useCapture` is needed to prevent the content from scrolling behind the context menu\n    element.addEventListener('touchmove', clearLongPressTimerAndStopEvent, true);\n\n    return () => {\n      clearLongPressTimer();\n      element.removeEventListener('touchstart', startLongPressTimer);\n      element.removeEventListener('touchcancel', clearLongPressTimer, true);\n      element.removeEventListener('touchend', clearLongPressTimer, true);\n      element.removeEventListener('touchmove', clearLongPressTimerAndStopEvent, true);\n    };\n  }, [\n    contextMenuAnchor, isMenuDisabled, shouldDisableOnLongTap, elementRef, shouldDisableOnLink,\n    shouldDisablePropagation,\n  ]);\n\n  return {\n    isContextMenuOpen,\n    contextMenuAnchor,\n    contextMenuTarget,\n    handleBeforeContextMenu,\n    handleContextMenu,\n    handleContextMenuClose,\n    handleContextMenuHide,\n  };\n};\n\nexport default useContextMenuHandlers;\n","import type { ElementRef, TeactNode } from '../../lib/teact/teact';\nimport React, { useRef } from '../../lib/teact/teact';\n\nimport type { Layout } from '../../hooks/useMenuPosition';\nimport type { DropdownItem } from './Dropdown';\n\nimport useContextMenuHandlers from '../../hooks/useContextMenuHandlers';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport DropdownMenu from './DropdownMenu';\nimport MenuBackdrop from './MenuBackdrop';\n\ninterface Props<T extends string> {\n  items: DropdownItem<T>[];\n  rootRef?: ElementRef<HTMLDivElement>;\n  onItemClick: (value: T) => void;\n  children: (buttonProps: {\n    ref: ElementRef<HTMLDivElement | HTMLButtonElement>;\n    onMouseDown: (e: React.MouseEvent) => void;\n    onContextMenu: (e: React.MouseEvent) => void;\n    className?: string;\n  }, isMenuOpen: boolean) => TeactNode;\n  menuClassName?: string;\n  menuPositionY?: 'top' | 'bottom';\n}\n\nexport default function WithContextMenu<T extends string>({\n  items,\n  rootRef,\n  onItemClick,\n  children,\n  menuClassName,\n  menuPositionY = 'bottom',\n}: Props<T>) {\n  const buttonRef = useRef<HTMLDivElement | HTMLButtonElement>();\n  const menuRef = useRef<HTMLDivElement>();\n\n  const { isPortrait } = useDeviceScreen();\n  const getTriggerElement = useLastCallback(() => buttonRef.current);\n  const getRootElement = useLastCallback(() => rootRef?.current ?? document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout: () => Layout = useLastCallback(() => ({\n    withPortal: true,\n    doNotCoverTrigger: true,\n    centerHorizontally: true,\n  }));\n\n  const {\n    isContextMenuOpen,\n    contextMenuAnchor,\n    handleBeforeContextMenu,\n    handleContextMenu,\n    handleContextMenuClose,\n    handleContextMenuHide,\n  } = useContextMenuHandlers({\n    elementRef: buttonRef,\n    shouldDisablePropagation: true,\n  });\n\n  const handleMenuItemSelect = useLastCallback((value: T) => {\n    onItemClick(value);\n  });\n\n  return (\n    <>\n      {isPortrait && (\n        <MenuBackdrop\n          isMenuOpen={isContextMenuOpen}\n          contentRef={buttonRef}\n          contentClassName={menuClassName}\n        />\n      )}\n      {children(\n        {\n          ref: buttonRef,\n          onMouseDown: handleBeforeContextMenu,\n          onContextMenu: handleContextMenu,\n        },\n        isContextMenuOpen,\n      )}\n      {!!contextMenuAnchor && (\n        <DropdownMenu\n          ref={menuRef}\n          withPortal\n          shouldTranslateOptions\n          isOpen={isContextMenuOpen}\n          items={items}\n          menuPositionY={menuPositionY}\n          menuAnchor={contextMenuAnchor}\n          bubbleClassName={menuClassName}\n          getTriggerElement={getTriggerElement}\n          getRootElement={getRootElement}\n          getMenuElement={getMenuElement}\n          getLayout={getLayout}\n          onSelect={handleMenuItemSelect}\n          onClose={handleContextMenuClose}\n          onCloseAnimationEnd={handleContextMenuHide}\n        />\n      )}\n    </>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"oiB1R7GB\",\"tabs\":\"Sue0UN3j\",\"notAllTabs\":\"QLxHVfeT\",\"tab\":\"qUqbpDN6\",\"active\":\"PSKCyspY\",\"tab_purple\":\"Hw7rCAOU\",\"tabPurple\":\"Hw7rCAOU\",\"tab_purpleText\":\"Y4BNELoX\",\"tabPurpleText\":\"Y4BNELoX\",\"tabDelimiter\":\"CLfyAuI6\",\"withContextMenu\":\"xFC2ES5I\",\"tabDecoration\":\"SSnDTAfy\",\"tabIcon\":\"nIk_Y_3d\",\"tabText\":\"IfCQ498V\",\"contentHeader\":\"LzaI7YWC\",\"firstActive\":\"G0Sd_POg\",\"contentHeaderInner\":\"rWtZ588N\",\"lastActive\":\"Y80L38VI\",\"contentBg\":\"ibE61V3n\",\"contentFooter\":\"WvrNEDxt\",\"contentSlideStaked\":\"F0M6K6CS\",\"tab-0\":\"NmGloXOI\",\"tab0\":\"NmGloXOI\",\"tab-1\":\"S7XD0emA\",\"tab1\":\"S7XD0emA\",\"slideContent\":\"bTsglo_e\",\"transitionContent\":\"YJuoqMiV\",\"slideContentAddBuy\":\"QO6jMpRA\",\"spinner\":\"KCsGLTLM\",\"menu\":\"Q6q8HQcu\"};","import React, { type ElementRef, memo, useEffect, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { Theme } from '../../../../global/types';\nimport type { StakingStateStatus } from '../../../../util/staking';\nimport { ActiveTab } from '../../../../global/types';\n\nimport { ANIMATED_STICKER_ICON_PX, DEFAULT_LANDSCAPE_ACTION_TAB_ID } from '../../../../config';\nimport { requestMutation } from '../../../../lib/fasterdom/fasterdom';\nimport {\n  selectAccountState,\n  selectCurrentAccountSettings,\n  selectIsStakingDisabled,\n  selectIsSwapDisabled,\n} from '../../../../global/selectors';\nimport { ACCENT_COLORS } from '../../../../util/accentColor/constants';\nimport buildClassName from '../../../../util/buildClassName';\nimport { stopEvent } from '../../../../util/domEvents';\nimport { IS_TOUCH_ENV } from '../../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\nimport { handleSendMenuItemClick, SEND_CONTEXT_MENU_ITEMS } from './helpers/sendMenu';\n\nimport useAppTheme from '../../../../hooks/useAppTheme';\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../../hooks/useSyncEffect';\nimport useUniqueId from '../../../../hooks/useUniqueId';\n\nimport Content from '../../../receive/Content';\nimport StakingInfoContent from '../../../staking/StakingInfoContent';\nimport StakingInitial from '../../../staking/StakingInitial';\nimport SwapInitial from '../../../swap/SwapInitial';\nimport TransferInitial from '../../../transfer/TransferInitial';\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Transition, { ACTIVE_SLIDE_CLASS_NAME, TO_SLIDE_CLASS_NAME } from '../../../ui/Transition';\nimport WithContextMenu from '../../../ui/WithContextMenu';\n\nimport styles from './LandscapeActions.module.scss';\n\ninterface OwnProps {\n  containerRef: ElementRef<HTMLDivElement>;\n  stakingStatus: StakingStateStatus;\n  isLedger?: boolean;\n  theme: Theme;\n}\n\ninterface StateProps {\n  activeTabIndex?: ActiveTab;\n  isTestnet?: boolean;\n  isSwapDisabled: boolean;\n  isStakingDisabled: boolean;\n  isOnRampDisabled: boolean;\n  accentColorIndex?: number;\n}\n\nconst TABS = [ActiveTab.Receive, ActiveTab.Transfer, ActiveTab.Swap, ActiveTab.Stake];\nconst ANIMATED_STICKER_SPEED = 2;\nexport const STAKING_TAB_TEXT_VARIANTS: Record<StakingStateStatus, string> = {\n  inactive: 'Earn',\n  active: 'Earning',\n  unstakeRequested: '$unstaking_short',\n  readyToClaim: '$unstaking_short',\n};\n\nfunction LandscapeActions({\n  containerRef,\n  stakingStatus,\n  isLedger,\n  theme,\n  activeTabIndex = DEFAULT_LANDSCAPE_ACTION_TAB_ID,\n  isTestnet,\n  isSwapDisabled,\n  isOnRampDisabled,\n  isStakingDisabled,\n  accentColorIndex,\n}: OwnProps & StateProps) {\n  const { setLandscapeActionsActiveTabIndex: setActiveTabIndex } = getActions();\n\n  const lang = useLang();\n\n  const isStaking = activeTabIndex === ActiveTab.Stake && stakingStatus !== 'inactive';\n\n  const transferSlideClassName = `transfer_slide_${useUniqueId()}`;\n  const {\n    renderedBgHelpers,\n    transitionRef,\n  } = useTabHeightAnimation(\n    styles.slideContent,\n    transferSlideClassName,\n    isStaking ? styles.contentSlideStaked : undefined,\n    isStaking,\n  );\n\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled;\n  const areNotAllTabs = isSwapDisabled || isStakingDisabled;\n  const isLastTab = (isStakingDisabled && isSwapDisabled && activeTabIndex === ActiveTab.Transfer)\n    || (isStakingDisabled && !isSwapDisabled && activeTabIndex === ActiveTab.Swap)\n    || (!isStakingDisabled && activeTabIndex === ActiveTab.Stake);\n\n  const [isAddBuyAnimating, playAddBuyAnimation, stopAddBuyAnimation] = useFlag();\n  const [isSendAnimating, playSendAnimation, stopSendAnimation] = useFlag();\n  const [isSwapAnimating, playSwapAnimation, stopSwapAnimation] = useFlag();\n  const [isStakeAnimating, playStakeAnimation, stopStakeAnimation] = useFlag();\n  const appTheme = useAppTheme(theme);\n  const stickerPaths = ANIMATED_STICKERS_PATHS[appTheme];\n  const accentColor = accentColorIndex ? ACCENT_COLORS[appTheme][accentColorIndex] : undefined;\n  const buttonTransitionKeyRef = useRef(0);\n  useSyncEffect(() => {\n    buttonTransitionKeyRef.current++;\n  }, [accentColor]);\n\n  useEffect(() => {\n    if (\n      (isSwapDisabled && activeTabIndex === ActiveTab.Swap)\n      || (isStakingDisabled && activeTabIndex === ActiveTab.Stake)\n    ) {\n      setActiveTabIndex({ index: ActiveTab.Transfer });\n    }\n  }, [activeTabIndex, isTestnet, isLedger, isSwapDisabled, isStakingDisabled]);\n\n  function renderCurrentTab(isActive: boolean) {\n    switch (activeTabIndex) {\n      case ActiveTab.Receive:\n        return (\n          <div className={buildClassName(styles.slideContent, styles.slideContentAddBuy)}>\n            <Content isOpen={isActive} isStatic />\n          </div>\n        );\n\n      case ActiveTab.Transfer:\n        return (\n          <div className={buildClassName(styles.slideContent, styles.slideContentTransfer)}>\n            <TransferInitial isStatic slideClassName={transferSlideClassName} />\n          </div>\n        );\n\n      case ActiveTab.Swap:\n        return (\n          <div className={styles.slideContent}>\n            <SwapInitial isStatic isActive={isActive} />\n          </div>\n        );\n\n      case ActiveTab.Stake:\n        return (\n          <div className={styles.slideContent}>\n            {\n              stakingStatus === 'inactive'\n                ? <StakingInitial isStatic isActive={isActive} />\n                : <StakingInfoContent isStatic isActive={isActive} />\n            }\n          </div>\n        );\n\n      default:\n        return undefined;\n    }\n  }\n\n  function handleSelectTab(index: ActiveTab, onTouchStart: NoneToVoidFunction) {\n    if (IS_TOUCH_ENV) onTouchStart();\n\n    setActiveTabIndex({ index }, { forceOnHeavyAnimation: true });\n  }\n\n  return (\n    <div className={styles.container}>\n      <div className={buildClassName(styles.tabs, areNotAllTabs && styles.notAllTabs)}>\n        <div\n          className={buildClassName(styles.tab, activeTabIndex === ActiveTab.Receive && styles.active)}\n          onMouseEnter={!IS_TOUCH_ENV ? playAddBuyAnimation : undefined}\n          onContextMenu={stopEvent}\n          onClick={() => {\n            handleSelectTab(ActiveTab.Receive, playAddBuyAnimation);\n          }}\n        >\n          <AnimatedIconWithPreview\n            play={isAddBuyAnimating}\n            size={ANIMATED_STICKER_ICON_PX}\n            speed={ANIMATED_STICKER_SPEED}\n            className={styles.tabIcon}\n            key={accentColor}\n            color={accentColor}\n            nonInteractive\n            forceOnHeavyAnimation\n            tgsUrl={stickerPaths.iconAdd}\n            iconPreviewClass=\"icon-action-add\"\n            onEnded={stopAddBuyAnimation}\n          />\n          <span className={styles.tabText}>{lang(!isSwapDisabled || isOnRampAllowed ? 'Add / Buy' : 'Add')}</span>\n\n          <span className={styles.tabDecoration} aria-hidden />\n        </div>\n        <WithContextMenu\n          items={SEND_CONTEXT_MENU_ITEMS}\n          rootRef={containerRef}\n          menuClassName={styles.menu}\n          onItemClick={handleSendMenuItemClick}\n        >\n          {({ ref, ...restButtonProps }) => (\n            <div\n              {...restButtonProps}\n              ref={ref as ElementRef<HTMLDivElement>}\n              className={buildClassName(\n                styles.tab,\n                activeTabIndex === ActiveTab.Transfer && styles.active,\n                styles.withContextMenu,\n              )}\n              onMouseEnter={!IS_TOUCH_ENV ? playSendAnimation : undefined}\n              onClick={() => {\n                handleSelectTab(ActiveTab.Transfer, playSendAnimation);\n              }}\n            >\n              <AnimatedIconWithPreview\n                play={isSendAnimating}\n                size={ANIMATED_STICKER_ICON_PX}\n                speed={ANIMATED_STICKER_SPEED}\n                className={styles.tabIcon}\n                key={accentColor}\n                color={accentColor}\n                nonInteractive\n                forceOnHeavyAnimation\n                tgsUrl={stickerPaths.iconSend}\n                iconPreviewClass=\"icon-action-send\"\n                onEnded={stopSendAnimation}\n              />\n              <span className={styles.tabText}>{lang('Send')}</span>\n              <span className={styles.tabDecoration} aria-hidden />\n              <span className={styles.tabDelimiter} aria-hidden />\n            </div>\n          )}\n        </WithContextMenu>\n        {!isSwapDisabled && (\n          <div\n            className={buildClassName(styles.tab, activeTabIndex === ActiveTab.Swap && styles.active)}\n            onMouseEnter={!IS_TOUCH_ENV ? playSwapAnimation : undefined}\n            onContextMenu={stopEvent}\n            onClick={() => {\n              handleSelectTab(ActiveTab.Swap, playSwapAnimation);\n            }}\n          >\n            <AnimatedIconWithPreview\n              play={isSwapAnimating}\n              size={ANIMATED_STICKER_ICON_PX}\n              speed={ANIMATED_STICKER_SPEED}\n              className={styles.tabIcon}\n              key={accentColor}\n              color={accentColor}\n              nonInteractive\n              forceOnHeavyAnimation\n              tgsUrl={stickerPaths.iconSwap}\n              iconPreviewClass=\"icon-action-swap\"\n              onEnded={stopSwapAnimation}\n            />\n            <span className={styles.tabText}>{lang('Swap')}</span>\n            <span className={styles.tabDecoration} aria-hidden />\n            <span className={styles.tabDelimiter} aria-hidden />\n          </div>\n        )}\n        {!isStakingDisabled && (\n          <div\n            className={buildClassName(\n              styles.tab,\n              activeTabIndex === ActiveTab.Stake && styles.active,\n              isStaking && styles.tab_purple,\n              stakingStatus !== 'inactive' && styles.tab_purpleText,\n            )}\n            onMouseEnter={!IS_TOUCH_ENV ? playStakeAnimation : undefined}\n            onContextMenu={stopEvent}\n            onClick={() => {\n              handleSelectTab(ActiveTab.Stake, playStakeAnimation);\n            }}\n          >\n            <AnimatedIconWithPreview\n              play={isStakeAnimating}\n              size={ANIMATED_STICKER_ICON_PX}\n              speed={ANIMATED_STICKER_SPEED}\n              className={styles.tabIcon}\n              key={accentColor}\n              color={accentColor}\n              nonInteractive\n              forceOnHeavyAnimation\n              tgsUrl={stickerPaths[stakingStatus !== 'inactive' ? 'iconEarnPurple' : 'iconEarn']}\n              iconPreviewClass={buildClassName(\n                'icon-action-earn',\n                stakingStatus !== 'inactive' && styles.tab_purpleText,\n              )}\n              onEnded={stopStakeAnimation}\n            />\n            <span className={styles.tabText}>{lang(STAKING_TAB_TEXT_VARIANTS[stakingStatus])}</span>\n            <span className={styles.tabDecoration} aria-hidden />\n            <span className={styles.tabDelimiter} aria-hidden />\n          </div>\n        )}\n      </div>\n\n      <div\n        className={buildClassName(\n          styles.contentHeader,\n          activeTabIndex === ActiveTab.Receive && styles.firstActive,\n          isLastTab && styles.lastActive,\n        )}\n      >\n        <div className={buildClassName(styles.contentHeaderInner, isStaking && styles.contentSlideStaked)} />\n      </div>\n      {renderedBgHelpers}\n\n      <Transition\n        ref={transitionRef}\n        name=\"slideFade\"\n        activeKey={activeTabIndex}\n        renderCount={TABS.length}\n        className={buildClassName(styles.transitionContent, 'static-container')}\n      >\n        {renderCurrentTab}\n      </Transition>\n    </div>\n  );\n}\n\nfunction useTabHeightAnimation(\n  slideClassName: string,\n  transferSlideClassName: string,\n  contentBackgroundClassName?: string,\n  isUnstaking = false,\n) {\n  const transitionRef = useRef<HTMLDivElement>();\n  const contentBgRef = useRef<HTMLDivElement>();\n  const contentFooterRef = useRef<HTMLDivElement>();\n  const lastHeightRef = useRef<number>();\n\n  const adjustBg = useLastCallback((noTransition = false) => {\n    const activeSlideSelector = `.${slideClassName}.${ACTIVE_SLIDE_CLASS_NAME}`;\n    const toSlideSelector = `.${slideClassName}.${TO_SLIDE_CLASS_NAME}`;\n    const suffix = isUnstaking ? ' .staking-info' : '';\n    // eslint-disable-next-line @stylistic/max-len\n    const transferQuery = `${activeSlideSelector} .${transferSlideClassName}.${TO_SLIDE_CLASS_NAME}, ${activeSlideSelector} .${transferSlideClassName}.${ACTIVE_SLIDE_CLASS_NAME}`;\n    const query = `${toSlideSelector}${suffix}, ${activeSlideSelector}${suffix}`;\n    const slide = (transitionRef.current?.querySelector(transferQuery) || transitionRef.current?.querySelector(query))!;\n    const rect = slide.getBoundingClientRect();\n    const shouldRenderWithoutTransition = !lastHeightRef.current || noTransition;\n\n    if (lastHeightRef.current === rect.height || !contentBgRef.current) return;\n\n    requestMutation(() => {\n      if (!contentBgRef.current || !contentFooterRef.current) return;\n\n      const contentBgStyle = contentBgRef.current.style;\n      const contentFooterStyle = contentFooterRef.current.style;\n\n      if (shouldRenderWithoutTransition) {\n        contentBgStyle.transition = 'none';\n        contentFooterStyle.transition = 'none';\n      }\n\n      contentBgStyle.transform = `scaleY(calc(${rect.height} / 100))`;\n      contentFooterStyle.transform = `translateY(${Math.floor(rect.height)}px)`;\n\n      if (shouldRenderWithoutTransition) {\n        requestMutation(() => {\n          if (!contentBgRef.current || !contentFooterRef.current) return;\n\n          contentBgRef.current.style.transition = '';\n          contentFooterRef.current.style.transition = '';\n        });\n      }\n\n      lastHeightRef.current = rect.height;\n    });\n  });\n\n  useEffect(() => {\n    adjustBg(true);\n\n    const componentObserver = new ResizeObserver((entries) => {\n      if (!entries.length) return;\n      adjustBg();\n    });\n\n    if (transitionRef.current) {\n      componentObserver.observe(transitionRef.current);\n    }\n\n    return () => {\n      componentObserver.disconnect();\n    };\n  }, [adjustBg]);\n\n  const renderedBgHelpers = useMemo(() => {\n    return (\n      <>\n        <div ref={contentBgRef} className={buildClassName(styles.contentBg, contentBackgroundClassName)} />\n        <div ref={contentFooterRef} className={buildClassName(styles.contentFooter, contentBackgroundClassName)} />\n      </>\n    );\n  }, [contentBackgroundClassName]);\n\n  return {\n    renderedBgHelpers,\n    transitionRef,\n  };\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountState = selectAccountState(global, global.currentAccountId!) ?? {};\n\n      const { isOnRampDisabled } = global.restrictions;\n\n      return {\n        activeTabIndex: accountState?.landscapeActionsActiveTabIndex,\n        isTestnet: global.settings.isTestnet,\n        isSwapDisabled: selectIsSwapDisabled(global),\n        isStakingDisabled: selectIsStakingDisabled(global),\n        isOnRampDisabled,\n        accentColorIndex: selectCurrentAccountSettings(global)?.accentColorIndex,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(LandscapeActions),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"oAYeit4x\",\"buttons\":\"Xw7VtigI\",\"button\":\"f9uDJdvE\",\"button_purple\":\"DSist0sY\",\"buttonPurple\":\"DSist0sY\",\"buttonActive\":\"s05GLla1\",\"buttonIcon\":\"iQddp8Ac\",\"menu\":\"kJbEm897\"};","import React, { type ElementRef, memo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { StakingStateStatus } from '../../../../util/staking';\n\nimport { IS_CORE_WALLET } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { vibrate } from '../../../../util/haptics';\nimport { handleSendMenuItemClick, SEND_CONTEXT_MENU_ITEMS } from './helpers/sendMenu';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport WithContextMenu from '../../../ui/WithContextMenu';\nimport { STAKING_TAB_TEXT_VARIANTS } from './LandscapeActions';\n\nimport styles from './PortraitActions.module.scss';\n\ninterface OwnProps {\n  isTestnet?: boolean;\n  isLedger?: boolean;\n  stakingStatus: StakingStateStatus;\n  isSwapDisabled?: boolean;\n  isStakingDisabled?: boolean;\n  isOnRampDisabled?: boolean;\n  containerRef: ElementRef<HTMLDivElement>;\n  onEarnClick: NoneToVoidFunction;\n}\n\nfunction PortraitActions({\n  isTestnet,\n  stakingStatus,\n  isStakingDisabled,\n  isSwapDisabled,\n  isOnRampDisabled,\n  containerRef,\n  onEarnClick,\n}: OwnProps) {\n  const {\n    startTransfer, startSwap, openReceiveModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled;\n  const addBuyButtonName = IS_CORE_WALLET\n    ? 'Receive'\n    : (!isSwapDisabled || isOnRampAllowed ? 'Add / Buy' : 'Add');\n\n  const handleStartSwap = useLastCallback(() => {\n    void vibrate();\n\n    startSwap();\n  });\n\n  const handleStartTransfer = useLastCallback(() => {\n    void vibrate();\n\n    startTransfer({ isPortrait: true });\n  });\n\n  const handleAddBuyClick = useLastCallback(() => {\n    void vibrate();\n\n    openReceiveModal();\n  });\n\n  const handleEarnClick = useLastCallback(() => {\n    void vibrate();\n\n    onEarnClick();\n  });\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.buttons}>\n        <Button\n          isSimple\n          className={styles.button}\n          onClick={handleAddBuyClick}\n        >\n          <i className={buildClassName(styles.buttonIcon, 'icon-action-add')} aria-hidden />\n          {lang(addBuyButtonName)}\n        </Button>\n        <WithContextMenu\n          rootRef={containerRef}\n          items={SEND_CONTEXT_MENU_ITEMS}\n          menuClassName={styles.menu}\n          onItemClick={handleSendMenuItemClick}\n        >\n          {(buttonProps, isMenuOpen) => (\n            <Button\n              {...buttonProps}\n              isSimple\n              className={buildClassName(styles.button, isMenuOpen && styles.buttonActive)}\n              onClick={handleStartTransfer}\n              ref={buttonProps.ref as ElementRef<HTMLButtonElement>}\n            >\n              <i className={buildClassName(styles.buttonIcon, 'icon-action-send')} aria-hidden />\n              {lang('Send')}\n            </Button>\n          )}\n        </WithContextMenu>\n        {!isSwapDisabled && (\n          <Button\n            isSimple\n            className={styles.button}\n            onClick={handleStartSwap}\n          >\n            <i className={buildClassName(styles.buttonIcon, 'icon-action-swap')} aria-hidden />\n            {lang('Swap')}\n          </Button>\n        )}\n        {!isStakingDisabled && (\n          <Button\n            isSimple\n            className={buildClassName(styles.button, stakingStatus !== 'inactive' && styles.button_purple)}\n            onClick={handleEarnClick}\n          >\n            <i className={buildClassName(styles.buttonIcon, 'icon-action-earn')} aria-hidden />\n            {lang(STAKING_TAB_TEXT_VARIANTS[stakingStatus])}\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(PortraitActions);\n","import { Big } from '../lib/big.js';\n\nexport function calcChangeValue(currentPrice: number, changeFactor: number) {\n  return currentPrice - currentPrice / (1 + changeFactor);\n}\n\nexport function calcBigChangeValue(currentPrice: Big | string, changeFactor: Big | number) {\n  currentPrice = Big(currentPrice);\n  changeFactor = Big(changeFactor);\n  return currentPrice.minus(currentPrice.div(changeFactor.plus(1)));\n}\n","import type { ApiStakingState } from '../../../../../api/types';\nimport type { UserToken } from '../../../../../global/types';\n\nimport { STAKED_TOKEN_SLUGS } from '../../../../../config';\nimport { Big } from '../../../../../lib/big.js';\nimport { calcBigChangeValue } from '../../../../../util/calcChangeValue';\nimport { toBig } from '../../../../../util/decimals';\nimport { formatNumber } from '../../../../../util/formatNumber';\nimport { buildCollectionByKey } from '../../../../../util/iteratees';\nimport { round } from '../../../../../util/math';\nimport { getFullStakingBalance } from '../../../../../util/staking';\n\ntype ChangePrefix = 'up' | 'down' | undefined;\n\nexport function calculateFullBalance(tokens: UserToken[], stakingStates?: ApiStakingState[]) {\n  const stakingStateBySlug = buildCollectionByKey(stakingStates ?? [], 'tokenSlug');\n\n  const primaryValue = tokens.reduce((acc, token) => {\n    if (STAKED_TOKEN_SLUGS.has(token.slug)) {\n      // Cost of staked tokens is already taken into account\n      return acc;\n    }\n\n    const stakingState = stakingStateBySlug[token.slug];\n\n    if (stakingState) {\n      const stakingAmount = toBig(getFullStakingBalance(stakingState), token.decimals);\n      acc = acc.plus(stakingAmount.mul(token.price));\n    }\n\n    return acc.plus(token.totalValue);\n  }, Big(0));\n\n  const [primaryWholePart, primaryFractionPart] = formatNumber(primaryValue).split('.');\n  const changeValue = tokens.reduce((acc, token) => {\n    return acc.plus(calcBigChangeValue(token.totalValue, token.change24h));\n  }, Big(0)).round(4).toNumber();\n\n  const changePercent = round(primaryValue ? (changeValue / (primaryValue.toNumber() - changeValue)) * 100 : 0, 2);\n  const changePrefix: ChangePrefix = changeValue > 0 ? 'up' : changeValue < 0 ? 'down' : undefined;\n\n  return {\n    primaryValue: primaryValue.toString(),\n    primaryWholePart,\n    primaryFractionPart,\n    changePrefix,\n    changePercent,\n    changeValue,\n  };\n}\n","import { useState } from '../lib/teact/teact';\nimport { getGlobal } from '../global';\n\nimport { selectCurrentAccountState } from '../global/selectors';\nimport useInterval from './useInterval';\n\nconst ONE_SECOND = 1000;\nconst SHOW_INDICATOR_DELAY_MS = 2 * ONE_SECOND;\n\nexport default function useUpdateIndicator(updateStartedAtKey: 'balanceUpdateStartedAt' | 'activitiesUpdateStartedAt') {\n  const [isUpdating, setIsUpdating] = useState(false);\n\n  useInterval(() => {\n    const updateStartedAt = selectCurrentAccountState(getGlobal())?.[updateStartedAtKey];\n\n    if (!updateStartedAt) {\n      setIsUpdating(false);\n      return;\n    }\n\n    const timeElapsedSinceLastUpdateStarted = Date.now() - updateStartedAt;\n\n    setIsUpdating(timeElapsedSinceLastUpdateStarted > SHOW_INDICATOR_DELAY_MS);\n  }, ONE_SECOND, false);\n\n  return isUpdating;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"icon\":\"avkqxacs\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport useUniqueId from '../../hooks/useUniqueId';\n\nimport styles from './ClockIcon.module.scss';\n\ninterface OwnProps {\n  className?: string;\n  noAnimation?: boolean;\n}\n\nfunction ClockIcon({ className, noAnimation }: OwnProps) {\n  const svgMaskId = useUniqueId('transparentMask-');\n\n  return (\n    <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\" className={className}>\n      <mask id={svgMaskId}>\n        <rect width=\"32\" height=\"32\" fill=\"black\" />\n        <circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"white\" />\n        <path\n          d=\"M17.375 8.87438C17.375 8.11563 16.7594 7.5 16 7.5C15.2406 7.5 14.625 8.11563 14.625\n              8.87438V16.0006C14.625 16.76 15.2406 17.375 16 17.375C16.7594 17.375 17.375 16.76 17.375 16.0006V8.87438Z\"\n          fill=\"black\"\n        >\n          {!noAnimation && (\n            <animateTransform\n              attributeName=\"transform\"\n              type=\"rotate\"\n              from=\"0 16 16\"\n              to=\"360 16 16\"\n              dur=\"2s\"\n              repeatCount=\"indefinite\"\n            />\n          )}\n        </path>\n        <path\n          d=\"M17.375 11.985C17.375 11.2337 16.7594 10.625 16 10.625C15.2406 10.625 14.625 11.2337 14.625\n              11.985V16.015C14.625 16.7662 15.2406 17.375 16 17.375C16.7594 17.375 17.375 16.7662 17.375 16.015V11.985Z\"\n          fill=\"black\"\n        >\n          {!noAnimation && (\n            <animateTransform\n              attributeName=\"transform\"\n              type=\"rotate\"\n              from=\"0 16 16\"\n              to=\"360 16 16\"\n              dur=\"12s\"\n              repeatCount=\"indefinite\"\n            />\n          )}\n        </path>\n      </mask>\n\n      <rect\n        className={styles.icon}\n        width=\"32\"\n        height=\"32\"\n        mask={`url(#${svgMaskId})`}\n      />\n    </svg>\n  );\n}\n\nexport default memo(ClockIcon);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { ANIMATION_LEVEL_MIN } from '../../config';\nimport { selectCurrentAccountState } from '../../global/selectors';\n\nimport useLang from '../../hooks/useLang';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport ClockIcon from '../ui/ClockIcon';\n\nimport styles from './MintCardButton.module.scss';\n\ninterface StateProps {\n  isCardMinting?: boolean;\n  hasCardsInfo?: boolean;\n  noAnimation?: boolean;\n}\n\nfunction MintCardButton({\n  isCardMinting,\n  hasCardsInfo,\n  noAnimation,\n}: StateProps) {\n  const { openMintCardModal } = getActions();\n\n  const lang = useLang();\n  const {\n    shouldRender: shouldRenderMintCardsButton,\n    ref: mintCardsButtonRef,\n  } = useShowTransition<HTMLButtonElement>({\n    isOpen: hasCardsInfo || isCardMinting,\n    withShouldRender: true,\n  });\n\n  if (!shouldRenderMintCardsButton) return undefined;\n\n  return (\n    <button\n      ref={mintCardsButtonRef}\n      type=\"button\"\n      className={styles.button}\n      aria-label={lang('Mint Cards')}\n      title={lang('Mint Cards')}\n      onClick={() => openMintCardModal()}\n    >\n      <i className={isCardMinting ? 'icon-magic-wand-loading' : 'icon-magic-wand'} aria-hidden />\n      {isCardMinting && <ClockIcon className={styles.icon} noAnimation={noAnimation} />}\n    </button>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n  const { config } = selectCurrentAccountState(global) || {};\n  const animationLevel = global.settings.animationLevel;\n\n  return {\n    hasCardsInfo: Boolean(config?.cardsInfo),\n    isCardMinting: accountState?.isCardMinting,\n    noAnimation: animationLevel === ANIMATION_LEVEL_MIN,\n  };\n})(MintCardButton));\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"XUXxtxF8\",\"icon\":\"uN651IGD\"};","import type { FC, TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useEffect, useMemo } from '../../lib/teact/teact';\nimport { getGlobal } from '../../global';\n\nimport { ANIMATION_LEVEL_MAX } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { throttleWithTickEnd } from '../../util/schedulers';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useLang from '../../hooks/useLang';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport styles from './AnimatedCounter.module.scss';\n\ntype OwnProps = {\n  text: string;\n  isDisabled?: boolean;\n};\n\nconst ANIMATION_TIME = 200;\nconst MAX_SIMULTANEOUS_ANIMATIONS = 10;\n\nlet scheduledAnimationsCounter = 0;\n\nconst resetCounterOnTickEnd = throttleWithTickEnd(() => {\n  scheduledAnimationsCounter = 0;\n});\n\nconst AnimatedCounter: FC<OwnProps> = ({\n  text,\n  isDisabled,\n}) => {\n  const animationLevel = getGlobal().settings.animationLevel;\n  const { isRtl } = useLang();\n\n  const prevText = usePrevious(text);\n  const forceUpdate = useForceUpdate();\n\n  const shouldAnimate = scheduleAnimation(\n    !isDisabled && animationLevel === ANIMATION_LEVEL_MAX && prevText !== undefined && prevText !== text,\n  );\n\n  const characters = useMemo(() => {\n    return shouldAnimate ? renderAnimatedCharacters(text, prevText) : text;\n  }, [shouldAnimate, prevText, text]);\n\n  useEffect(() => {\n    if (!shouldAnimate) return undefined;\n\n    const timeoutId = window.setTimeout(() => {\n      forceUpdate();\n    }, ANIMATION_TIME);\n\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [shouldAnimate, text]);\n\n  return (\n    <span className={buildClassName(!isDisabled && styles.root)} dir={isRtl ? 'rtl' : undefined}>\n      {characters}\n    </span>\n  );\n};\n\nexport default memo(AnimatedCounter);\n\nfunction scheduleAnimation(condition: boolean) {\n  if (!condition || scheduledAnimationsCounter >= MAX_SIMULTANEOUS_ANIMATIONS) return false;\n\n  if (scheduledAnimationsCounter === 0) {\n    resetCounterOnTickEnd();\n  }\n\n  scheduledAnimationsCounter++;\n\n  return true;\n}\n\nfunction renderAnimatedCharacters(text: string, prevText?: string) {\n  const elements: TeactNode[] = [];\n  const textLength = text.length;\n  const prevTextLength = prevText?.length ?? 0;\n\n  for (let i = 0; i <= textLength; i++) {\n    const charIndex = textLength - i;\n    const prevTextCharIndex = prevTextLength - i;\n\n    if (prevText && prevTextCharIndex >= 0 && text[charIndex] !== prevText[prevTextCharIndex]) {\n      elements.unshift(\n        <div className={styles.characterContainer}>\n          <div className={styles.character}>{text[charIndex] ?? ''}</div>\n          <div className={styles.characterOld}>{prevText[prevTextCharIndex]}</div>\n          <div className={styles.characterNew}>{text[charIndex] ?? ''}</div>\n        </div>,\n      );\n    } else {\n      elements.unshift(<span>{text[charIndex] ?? ''}</span>);\n    }\n  }\n\n  return elements;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"UizaBW8F\",\"character-container\":\"o6dPPa5S\",\"characterContainer\":\"o6dPPa5S\",\"character\":\"wT7hwE_a\",\"character-old\":\"pSP5fUMh\",\"characterOld\":\"pSP5fUMh\",\"character-disappear\":\"duRfv5fl\",\"characterDisappear\":\"duRfv5fl\",\"character-new\":\"FtEeojTc\",\"characterNew\":\"FtEeojTc\",\"character-appear\":\"pwumvTMk\",\"characterAppear\":\"pwumvTMk\"};","// extracted by mini-css-extract-plugin\nexport default {\"containerWrapper\":\"wKxh3a3S\",\"isLoading\":\"iGGNu8pc\",\"center\":\"JhiFICIH\",\"container\":\"DeiKNEF2\",\"backstage\":\"Z0VKHxKs\",\"tokenCard\":\"lPzc1tFZ\",\"containerInner\":\"CJuAKeNp\",\"balanceSlide\":\"_S0PhahZ\",\"balanceTransition\":\"Q_lPdCwD\",\"currencySymbol\":\"l0dhdAHZ\",\"primaryValue\":\"_jSits6S\",\"primaryFractionPart\":\"L4sI_b_K\",\"iconCaret\":\"S_WiTJlv\",\"iconCaretSmall\":\"AyZvbJo1\",\"iconCaretFraction\":\"UPrAgVuY\",\"currencySwitcher\":\"JRDSCLUm\",\"currencySwitcherMenu\":\"ouGIASNp\",\"addressContainer\":\"Hscx8f3y\",\"icon\":\"Z4odaM4f\",\"addressLabel\":\"bU030X2g\",\"address\":\"xtFe1Hpt\",\"menuItem\":\"DYEcCh8V\",\"menuIcon\":\"reCfAfE0\",\"menuItemName\":\"XG4JwTZX\",\"menuFontIcon\":\"SR492iSb\",\"menuExplorerIcon\":\"F5fuBEwJ\",\"addressMenuBubble\":\"eqrUlhby\",\"domainText\":\"FeL3tHeI\",\"addressText\":\"W__Ag4Sn\",\"separator\":\"x_DIVHjK\",\"explorerButton\":\"a6nY4qXV\",\"changeSpoiler\":\"u3xBtJOM\",\"blurred\":\"VWmNqmzU\",\"change\":\"p0ADnah2\",\"changePrefix\":\"cuZcbnpx\",\"chainIcon\":\"m2FMwrjB\",\"multichainIcon\":\"f7vAJ3qA\",\"tokenInfo\":\"bGU6MKkV\",\"tokenLogo\":\"KjXvLECZ\",\"tokenInfoHeader\":\"JX6roGM_\",\"tokenInfoSubheader\":\"RxOFnjoX\",\"tokenAmount\":\"eIbQBxJS\",\"tokenName\":\"BnrECUAN\",\"tokenValue\":\"FJv4OzYN\",\"tokenChange\":\"GGm5XDND\",\"tokenChangeSensitiveData\":\"f4V9saRa\",\"tokenChangeSpoiler\":\"_12taTXqz\",\"tokenTitle\":\"RmC9TfSK\",\"tokenHistoryPrice\":\"_4dlU8cE\",\"tokenCurrentPrice\":\"gV90_PgX\",\"tokenPriceDate\":\"iPGWJEAe\",\"apy\":\"NuM0o0NU\",\"interactive\":\"qQdmiqxi\",\"tokenExplorerButton\":\"OG4bpDUn\",\"chart\":\"lKplVEJ6\",\"chartImg\":\"RidGreTo\",\"backButton\":\"rzhYg9wP\",\"periodChooser\":\"fJhqjFVE\",\"periodChooserHidden\":\"xPL1t22b\",\"periodItem\":\"il0Zz8yE\",\"periodItem_active\":\"fcYKEjig\",\"periodItemActive\":\"fcYKEjig\",\"periodInput\":\"PIahT0n2\",\"loadingDotsContainer\":\"iRUbIPAX\",\"cardCustomBackground\":\"A2ptDHpn\",\"visible\":\"aEg2wczx\",\"black\":\"ah_6og0J\",\"platinum\":\"nnklDXWY\",\"gold\":\"c4y77fMq\",\"silver\":\"M9_HMKD7\",\"borderShine_down\":\"VoOVf4tq\",\"borderShineDown\":\"VoOVf4tq\",\"borderShine_left\":\"dWc8MTsx\",\"borderShineLeft\":\"dWc8MTsx\",\"borderShine_up\":\"k8VOGUyt\",\"borderShineUp\":\"k8VOGUyt\",\"borderShine_right\":\"tqABUy73\",\"borderShineRight\":\"tqABUy73\"};","import React, { memo, useMemo, useRef, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiChain } from '../../../../api/types';\nimport type { Account, AccountType, IAnchorPosition } from '../../../../global/types';\nimport type { Layout } from '../../../../hooks/useMenuPosition';\n\nimport { selectAccount } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { handleUrlClick, openUrl } from '../../../../util/openUrl';\nimport { shortenAddress } from '../../../../util/shortenAddress';\nimport getChainNetworkIcon from '../../../../util/swap/getChainNetworkIcon';\nimport { getExplorerAddressUrl, getExplorerName } from '../../../../util/url';\nimport { IS_TOUCH_ENV } from '../../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Menu from '../../../ui/Menu';\n\nimport menuStyles from '../../../ui/Dropdown.module.scss';\nimport styles from './Card.module.scss';\n\nimport multichainIconSrc from '../../../../assets/multichain_account.svg';\n\ninterface StateProps {\n  addressByChain?: Account['addressByChain'];\n  domainByChain?: Account['domainByChain'];\n  isTestnet?: boolean;\n  accountType?: AccountType;\n  withTextGradient?: boolean;\n}\n\nconst MOUSE_LEAVE_TIMEOUT = 150;\n\nfunction CardAddress({\n  addressByChain, domainByChain, isTestnet, accountType, withTextGradient,\n}: StateProps) {\n  const { showNotification } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const ref = useRef<HTMLDivElement>();\n  const menuRef = useRef<HTMLDivElement>();\n  const [menuAnchor, setMenuAnchor] = useState<IAnchorPosition>();\n  const isMenuOpen = Boolean(menuAnchor);\n\n  const chains = useMemo(() => Object.keys(addressByChain || {}) as ApiChain[], [addressByChain]);\n  const isHardwareAccount = accountType === 'hardware';\n  const isViewAccount = accountType === 'view';\n  const explorerTitle = lang('View on Explorer');\n  const chainDropdownItems = useMemo(() => {\n    const hasDomain = chains[0] && domainByChain?.[chains[0]];\n\n    if (chains.length < 2 && !hasDomain) return undefined;\n\n    return chains.map((chain) => ({\n      value: addressByChain![chain]!,\n      address: shortenAddress(addressByChain![chain]!, domainByChain?.[chain] ? 4 : undefined)!,\n      ...(domainByChain?.[chain] && { domain: domainByChain[chain] }),\n      icon: getChainNetworkIcon(chain),\n      fontIcon: 'copy',\n      chain,\n      label: (lang('View address on %ton_explorer_name%', {\n        ton_explorer_name: getExplorerName(chain),\n      }) as string[]\n      ).join(''),\n    }));\n  }, [addressByChain, domainByChain, chains, lang]);\n\n  const openMenu = () => {\n    const { left, width, bottom: y } = ref.current!.getBoundingClientRect();\n    setMenuAnchor({ x: left + width / 2, y });\n  };\n\n  const closeMenu = () => {\n    setMenuAnchor(undefined);\n  };\n\n  const handleCopyAddress = useLastCallback((address: string) => {\n    showNotification({ message: lang('Address was copied!'), icon: 'icon-copy' });\n    void copyTextToClipboard(address);\n  });\n\n  const handleItemClick = useLastCallback((e: React.MouseEvent, address: string) => {\n    handleCopyAddress(address);\n    closeMenu();\n  });\n\n  const handleDomainClick = useLastCallback((e: React.MouseEvent, domain: string) => {\n    showNotification({ message: lang('Domain was copied!'), icon: 'icon-copy' });\n    void copyTextToClipboard(domain);\n    closeMenu();\n  });\n\n  const handleExplorerClick = useLastCallback((e: React.MouseEvent, chain: ApiChain, address: string) => {\n    void openUrl(getExplorerAddressUrl(chain, address, isTestnet)!);\n    closeMenu();\n  });\n\n  const closeTimeoutRef = useRef<number>();\n  const handleMouseEnter = useLastCallback(() => {\n    if (closeTimeoutRef.current) {\n      clearTimeout(closeTimeoutRef.current);\n    }\n    openMenu();\n  });\n  const handleMouseLeave = useLastCallback(() => {\n    closeTimeoutRef.current = window.setTimeout(closeMenu, MOUSE_LEAVE_TIMEOUT);\n  });\n  const getTriggerElement = useLastCallback(() => ref.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback((): Layout => ({\n    withPortal: true,\n    centerHorizontally: isPortrait,\n    preferredPositionX: 'left' as const,\n    doNotCoverTrigger: isPortrait,\n  }));\n\n  function renderAddressMenu() {\n    return (\n      <Menu\n        menuRef={menuRef}\n        isOpen={isMenuOpen}\n        type=\"dropdown\"\n        withPortal\n        getTriggerElement={getTriggerElement}\n        getRootElement={getRootElement}\n        getMenuElement={getMenuElement}\n        getLayout={getLayout}\n        anchor={menuAnchor}\n        bubbleClassName={styles.addressMenuBubble}\n        noBackdrop={!IS_TOUCH_ENV}\n        onMouseEnter={!IS_TOUCH_ENV ? handleMouseEnter : undefined}\n        onMouseLeave={!IS_TOUCH_ENV ? handleMouseLeave : undefined}\n        onClose={closeMenu}\n      >\n        {chainDropdownItems!.map((item, index) => {\n          const fullItemClassName = buildClassName(\n            menuStyles.item,\n            index > 0 && menuStyles.separator,\n            styles.menuItem,\n          );\n\n          return (\n            <div key={item.value} className={fullItemClassName}>\n              {chainDropdownItems!.length > 1 && (\n                <img src={item.icon} alt=\"\" className={buildClassName('icon', menuStyles.itemIcon, styles.menuIcon)} />\n              )}\n              <span className={buildClassName(menuStyles.itemName, styles.menuItemName)}>\n                {item.domain && (\n                  <>\n                    <span\n                      tabIndex={0}\n                      role=\"button\"\n                      className={styles.domainText}\n                      onClick={(e) => handleDomainClick(e, item.domain!)}\n                    >\n                      {item.domain}\n                    </span>\n                    <span className={styles.separator}></span>\n                  </>\n                )}\n                <span\n                  tabIndex={0}\n                  role=\"button\"\n                  onClick={(e) => handleItemClick(e, item.value)}\n                  className={item.domain && styles.addressText}\n                >\n                  {item.address}\n                </span>\n                <i\n                  className={buildClassName(`icon icon-${item.fontIcon}`, menuStyles.fontIcon, styles.menuFontIcon)}\n                  aria-hidden\n                  onClick={(e) => handleItemClick(e, item.value)}\n                />\n              </span>\n              <i\n                tabIndex={0}\n                role=\"button\"\n                className={buildClassName(menuStyles.close, 'icon icon-tonexplorer-small', styles.menuExplorerIcon)}\n                aria-label={item.label}\n                onClick={(e) => handleExplorerClick(e, item.chain, item.value)}\n              />\n            </div>\n          );\n        })}\n      </Menu>\n    );\n  }\n\n  if (chainDropdownItems) {\n    const chain = chains[0];\n    const domain = domainByChain?.[chain];\n    const buttonText = chains.length === 1 && domain ? domain : lang('Multichain');\n\n    return (\n      <div ref={ref} className={styles.addressContainer}>\n        {isViewAccount && (\n          <span className={styles.addressLabel}>\n            <i className={buildClassName(styles.icon, 'icon-eye-filled')} aria-hidden />\n            {lang('$view_mode')}\n          </span>\n        )}\n        {isHardwareAccount && <i className={buildClassName(styles.icon, 'icon-ledger')} aria-hidden />}\n        <button\n          type=\"button\"\n          className={buildClassName(styles.address, withTextGradient && 'gradientText')}\n          onMouseEnter={!IS_TOUCH_ENV ? handleMouseEnter : undefined}\n          onMouseLeave={!IS_TOUCH_ENV ? handleMouseLeave : undefined}\n          onClick={openMenu}\n        >\n          {chains.length > 1\n            ? <img src={multichainIconSrc} alt=\"\" className={styles.multichainIcon} />\n            : <img src={getChainNetworkIcon(chain)} alt=\"\" className={styles.chainIcon} />}\n\n          <span className={buildClassName(styles.itemName, 'itemName')}>\n            {buttonText}\n          </span>\n          <i className={buildClassName(styles.icon, 'icon-caret-down')} aria-hidden />\n        </button>\n        {renderAddressMenu()}\n      </div>\n    );\n  }\n\n  const chain = chains[0];\n  if (!chain) return undefined;\n\n  const address = addressByChain![chain]!;\n  const domain = domainByChain?.[chain];\n  const displayText = domain || shortenAddress(address);\n\n  return (\n    <div className={styles.addressContainer}>\n      {isViewAccount && (\n        <span className={styles.addressLabel}>\n          <i className={buildClassName(styles.icon, 'icon-eye-filled')} aria-hidden />\n          {lang('$view_mode')}\n        </span>\n      )}\n      {isHardwareAccount && <i className={buildClassName(styles.icon, 'icon-ledger')} aria-hidden />}\n      <button\n        type=\"button\"\n        className={buildClassName(styles.address, withTextGradient && 'gradientText')}\n        aria-label={lang('Copy wallet address')}\n        onClick={() => handleCopyAddress(address)}\n      >\n        <img src={getChainNetworkIcon(chain)} alt=\"\" className={styles.chainIcon} />\n        {displayText}\n        <i className={buildClassName(styles.icon, 'icon-copy')} aria-hidden />\n      </button>\n      <a\n        href={getExplorerAddressUrl(chain, address, isTestnet)}\n        className={styles.explorerButton}\n        title={explorerTitle}\n        aria-label={explorerTitle}\n        target=\"_blank\"\n        rel=\"noreferrer noopener\"\n        onClick={handleUrlClick}\n      >\n        <i className={buildClassName(styles.icon, 'icon-tonexplorer-small')} aria-hidden />\n      </a>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { type: accountType, addressByChain, domainByChain } = selectAccount(global, global.currentAccountId!) || {};\n\n  return {\n    addressByChain,\n    domainByChain,\n    isTestnet: global.settings.isTestnet,\n    accountType,\n  };\n})(CardAddress));\n","import React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiBaseCurrency } from '../../../../api/types';\nimport type { DropdownItem } from '../../../ui/Dropdown';\n\nimport { CURRENCIES } from '../../../../config';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport DropdownMenu from '../../../ui/DropdownMenu';\n\nimport styles from './Card.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  excludedCurrency?: string;\n  menuPositionX?: 'right' | 'left';\n  onClose: NoneToVoidFunction;\n  onChange?: (currency: ApiBaseCurrency) => void;\n}\n\ninterface StateProps {\n  currentCurrency?: ApiBaseCurrency;\n}\n\nfunction CurrencySwitcherMenu({\n  isOpen,\n  currentCurrency,\n  excludedCurrency,\n  menuPositionX,\n  onClose,\n  onChange,\n}: OwnProps & StateProps) {\n  const { changeBaseCurrency } = getActions();\n\n  const currencyList = useMemo<DropdownItem<ApiBaseCurrency>[]>(\n    () => Object.entries(CURRENCIES)\n      .filter(([currency]) => currency !== excludedCurrency)\n      .map(([currency, { name }]) => ({ value: currency as keyof typeof CURRENCIES, name })),\n    [excludedCurrency],\n  );\n\n  const handleBaseCurrencyChange = useLastCallback((currency: string) => {\n    onClose();\n\n    if (currency === currentCurrency) return;\n\n    changeBaseCurrency({ currency: currency as ApiBaseCurrency });\n    onChange?.(currency as ApiBaseCurrency);\n  });\n\n  return (\n    <DropdownMenu\n      isOpen={isOpen}\n      items={currencyList}\n      shouldTranslateOptions\n      selectedValue={currentCurrency}\n      menuPositionX={menuPositionX}\n      className={styles.currencySwitcherMenu}\n      onClose={onClose}\n      onSelect={handleBaseCurrencyChange}\n    />\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global) => {\n  return {\n    currentCurrency: global.settings.baseCurrency,\n  };\n})(CurrencySwitcherMenu));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"UUXTSSNb\",\"sticky\":\"GydVN6zu\",\"image\":\"GnuUYTcY\",\"borderShine_down\":\"eZtdmQCz\",\"borderShineDown\":\"eZtdmQCz\",\"borderShine_left\":\"u_5j0LEw\",\"borderShineLeft\":\"u_5j0LEw\",\"borderShine_up\":\"DBu8v2wg\",\"borderShineUp\":\"DBu8v2wg\",\"borderShine_right\":\"iOyJF5OB\",\"borderShineRight\":\"iOyJF5OB\",\"borderShine_radioactive\":\"omctwMWw\",\"borderShineRadioactive\":\"omctwMWw\",\"shadow\":\"rm7OVuVh\"};","import React, { memo } from '../../../../lib/teact/teact';\n\nimport type { ApiNft } from '../../../../api/types';\n\nimport buildClassName from '../../../../util/buildClassName';\nimport { getCardNftImageUrl } from '../../../../util/url';\n\nimport { useCachedImage } from '../../../../hooks/useCachedImage';\nimport useCardCustomization from '../../../../hooks/useCardCustomization';\nimport useFlag from '../../../../hooks/useFlag';\nimport useMediaTransition from '../../../../hooks/useMediaTransition';\n\nimport styles from './CustomCardBackground.module.scss';\n\ninterface OwnProps {\n  isSticky?: boolean;\n  nft: ApiNft;\n  noShowAnimation?: boolean;\n  shouldHide?: boolean;\n  onLoad?: (hasGradient: boolean, className?: string) => void;\n  onTransitionEnd: NoneToVoidFunction;\n}\n\nfunction CustomCardBackground({\n  isSticky,\n  nft,\n  noShowAnimation,\n  shouldHide,\n  onLoad,\n  onTransitionEnd,\n}: OwnProps) {\n  const { imageUrl } = useCachedImage(nft ? getCardNftImageUrl(nft) : undefined);\n  const [isLoaded, markLoaded] = useFlag();\n  const ref = useMediaTransition(noShowAnimation || (isLoaded && !shouldHide));\n\n  const {\n    borderShineType,\n    withTextGradient,\n    classNames: cardClassName,\n  } = useCardCustomization(nft);\n\n  function handleLoad() {\n    markLoaded();\n\n    onLoad?.(withTextGradient, cardClassName);\n  }\n\n  const rootClassName = buildClassName(\n    styles.root,\n    isSticky && styles.sticky,\n    cardClassName,\n    borderShineType && styles[`borderShine_${borderShineType}`],\n    isLoaded && !shouldHide && styles.loaded,\n    shouldHide && styles.hide,\n  );\n\n  const withShadow = nft.metadata?.mtwCardType === 'standard';\n\n  return (\n    <div ref={ref} className={rootClassName} onTransitionEnd={onTransitionEnd}>\n      {imageUrl && (\n        <img\n          src={imageUrl}\n          alt={nft.name}\n          className={styles.image}\n          onLoad={handleLoad}\n        />\n      )}\n      {withShadow && <div className={styles.shadow} />}\n    </div>\n  );\n}\n\nexport default memo(CustomCardBackground);\n","import React, { memo, useRef } from '../../../../lib/teact/teact';\n\nimport type { ApiNft } from '../../../../api/types';\n\nimport useForceUpdate from '../../../../hooks/useForceUpdate';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useSyncEffectWithPrevDeps from '../../../../hooks/useSyncEffectWithPrevDeps';\n\nimport CustomCardBackground from './CustomCardBackground';\n\ninterface OwnProps {\n  isSticky?: boolean;\n  nft?: ApiNft;\n  onCardChange: (hasGradient: boolean, className?: string) => void;\n}\n\nfunction CustomCardManager({ isSticky, nft, onCardChange }: OwnProps) {\n  const prevNftRef = useRef<ApiNft | undefined>(undefined);\n  const forceUpdate = useForceUpdate();\n\n  useSyncEffectWithPrevDeps(([prevNft, prevNftAddress]) => {\n    if (nft?.address !== prevNftAddress) {\n      prevNftRef.current = prevNft;\n    }\n\n    if (!nft) {\n      onCardChange(false, undefined);\n    }\n  }, [nft, nft?.address]);\n\n  const prevNft = prevNftRef.current;\n\n  const isMountRef = useRef(true);\n  const noShowAnimation = nft && isMountRef.current;\n  isMountRef.current = false;\n\n  const handleTransitionEnd = useLastCallback(() => {\n    prevNftRef.current = undefined;\n    forceUpdate();\n  });\n\n  return (\n    <div teactFastList>\n      {prevNft && (\n        <CustomCardBackground\n          key={prevNft.address}\n          isSticky={isSticky}\n          nft={prevNft}\n          shouldHide={!nft}\n          onTransitionEnd={handleTransitionEnd}\n        />\n      )}\n      {nft && (\n        <CustomCardBackground\n          key={nft.address}\n          isSticky={isSticky}\n          nft={nft}\n          noShowAnimation={noShowAnimation}\n          onLoad={onCardChange}\n          onTransitionEnd={handleTransitionEnd}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(CustomCardManager);\n","import type { UserToken } from '../../../global/types';\nimport type { RGBColor } from '../../../util/colors';\n\nimport {\n  STAKED_TON_SLUG, TON_USDT_SLUG, TONCOIN, TRC20_USDT_MAINNET_SLUG, TRC20_USDT_TESTNET_SLUG, TRX,\n} from '../../../config';\nimport { deltaE, hex2rgb } from '../../../util/colors';\n\nconst TOKEN_CARD_COLORS: Record<string, RGBColor> = {\n  green: [80, 135, 51],\n  orange: [173, 84, 54],\n  pink: [154, 60, 144],\n  purple: [104, 48, 149],\n  red: [156, 52, 75],\n  sea: [43, 116, 123],\n  tegro: [3, 93, 229],\n  blue: [47, 108, 173],\n};\n\nexport const TOKEN_EXCEPTION_COLORS: Record<string, string> = {\n  [TONCOIN.slug]: 'blue',\n  [TRX.slug]: 'red',\n  [TON_USDT_SLUG]: 'sea',\n  [TRC20_USDT_MAINNET_SLUG]: 'sea',\n  [TRC20_USDT_TESTNET_SLUG]: 'sea',\n  [STAKED_TON_SLUG]: 'green',\n};\n\nconst DISTANCE_THRESHOLD = 35;\n\nexport function calculateTokenCardColor(token?: UserToken): string {\n  let closestColor = 'blue';\n  let smallestDistance = Infinity;\n\n  if (!token) return closestColor;\n\n  if (TOKEN_EXCEPTION_COLORS[token.slug]) {\n    return TOKEN_EXCEPTION_COLORS[token.slug];\n  }\n\n  if (!token.color) return closestColor;\n\n  const tokenRgbColor = hex2rgb(token.color);\n\n  Object.entries(TOKEN_CARD_COLORS).forEach(([colorName, colorValue]) => {\n    const distance = deltaE(tokenRgbColor, colorValue);\n    if (distance < smallestDistance) {\n      smallestDistance = distance;\n      closestColor = colorName;\n    }\n  });\n\n  if (smallestDistance > DISTANCE_THRESHOLD) {\n    return 'blue';\n  }\n\n  return closestColor;\n}\n","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { ApiHistoryList } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport {\n  disableTelegramMiniAppSwipeToClose,\n  enableTelegramMiniAppSwipeToClose,\n} from '../../util/telegram';\n\nimport useLang from '../../hooks/useLang';\n\nimport Transition from '../ui/Transition';\n\ninterface OwnProps {\n  width: number;\n  height: number;\n  prices: ApiHistoryList;\n  selectedIndex: number;\n  className?: string;\n  imgClassName?: string;\n  onSelectIndex: (index: number) => void;\n  isUpdating?: boolean;\n}\n\nconst IS_SMOOTH = true;\nconst PATH_SMOOTHING = 0.0001;\nconst MIN_CHART_HEIGHT = 0.000000001;\n\nfunction TokenPriceChart({\n  width,\n  height,\n  prices,\n  selectedIndex,\n  className,\n  imgClassName,\n  onSelectIndex,\n  isUpdating,\n}: OwnProps) {\n  const lang = useLang();\n\n  const boundingPoints = useMemo(() => {\n    const priceValues = prices.map(([, price]) => price);\n    const min = Math.min(...priceValues);\n    const max = Math.max(...priceValues);\n\n    return {\n      width: prices.length - 1,\n      height: Math.max(MIN_CHART_HEIGHT, max - min),\n      min,\n    };\n  }, [prices]);\n\n  const points = useMemo(() => {\n    const scaleX = width / boundingPoints.width;\n    const scaleY = height / boundingPoints.height;\n\n    return prices.map(([, y], i) => ({ x: i * scaleX + 3, y: (y - boundingPoints.min) * scaleY + 3 }));\n  }, [boundingPoints.height, boundingPoints.min, boundingPoints.width, height, width, prices]);\n\n  function getBasisPoint(i: number) {\n    const indexesCount = points.length - 1;\n    const index = i < 0 ? 0 : i > indexesCount ? indexesCount : i;\n    const point = points[index];\n    const ratio = 1 - PATH_SMOOTHING;\n    const tangent = index / indexesCount;\n    const firstPoint = points[0];\n    const distance = {\n      x: points[indexesCount].x - firstPoint.x,\n      y: points[indexesCount].y - firstPoint.y,\n    };\n\n    return {\n      x: ratio * point.x + (1 - ratio) * (firstPoint.x + tangent * distance.x),\n      y: ratio * point.y + (1 - ratio) * (firstPoint.y + tangent * distance.y),\n    };\n  }\n\n  function getCurvePath(i: number) {\n    const pCurrent = getBasisPoint(i);\n    const pMinus1 = getBasisPoint(i - 1);\n    const pMinus2 = getBasisPoint(i - 2);\n\n    const x1 = (2 * pMinus2.x + pMinus1.x) / 3;\n    const y1 = (2 * pMinus2.y + pMinus1.y) / 3;\n    const x2 = (pMinus2.x + 2 * pMinus1.x) / 3;\n    const y2 = (pMinus2.y + 2 * pMinus1.y) / 3;\n    const x3 = (pMinus2.x + 4 * pMinus1.x + pCurrent.x) / 6;\n    const y3 = (pMinus2.y + 4 * pMinus1.y + pCurrent.y) / 6;\n\n    return `C ${x1} ${y1} ${x2} ${y2} ${x3} ${y3}`;\n  }\n\n  function getLinePath(point: { x: number; y: number }) {\n    return `L ${point.x} ${point.y}`;\n  }\n\n  function getPath() {\n    let d = points.reduce((acc, point, i) => {\n      const partialPath = IS_SMOOTH\n        ? getCurvePath(i)\n        : getLinePath(point);\n      return i === 0\n        ? `M ${point.x} ${point.y} `\n        : `${acc} ${partialPath} `;\n    }, '');\n\n    if (IS_SMOOTH) {\n      d += getCurvePath(points.length);\n      d += getLinePath(points[points.length - 1]);\n    }\n\n    return d;\n  }\n\n  function renderSvg() {\n    const activePoint = points[selectedIndex] || points[points.length - 1];\n\n    const svg = `<svg viewBox=\"0 0 ${width + 6} ${height + 6}\" height=\"${height + 6}\" width=\"${width + 6}\"\n        xmlns=\"http://www.w3.org/2000/svg\" style=\"transform: scale(1,-1)\">\n        <g fill=\"none\" stroke=\"white\">\n          <path stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"${getPath()}\" style=\"stroke-linecap: round\" />\n          <circle r=\"2.5\" fill=\"white\" cx=\"${activePoint.x}\" cy=\"${activePoint.y}\" />\n        </g>\n      </svg>`;\n\n    return `data:image/svg+xml;utf8,${(svg)}`;\n  }\n\n  function handleMouseMove(e: React.MouseEvent<HTMLDivElement> | React.TouchEvent<HTMLDivElement>) {\n    const { x: containerX, width: containerWidth } = e.currentTarget.getBoundingClientRect();\n    const { clientX } = 'touches' in e ? e.touches[0] : e;\n    const segmentHalfWidth = (containerWidth / points.length) / 2;\n    const x = clientX - containerX - segmentHalfWidth;\n    const nextIndex = Math.max(0, Math.min(Math.round(points.length * (x / containerWidth)), points.length - 1));\n\n    onSelectIndex(nextIndex);\n  }\n\n  function handleTouchStart(e: React.TouchEvent<HTMLDivElement>) {\n    handleMouseMove(e);\n\n    disableTelegramMiniAppSwipeToClose();\n  }\n\n  function handleMouseLeave() {\n    onSelectIndex(-1);\n\n    enableTelegramMiniAppSwipeToClose();\n  }\n\n  return (\n    <div\n      className={className}\n      onMouseMove={handleMouseMove}\n      onMouseLeave={handleMouseLeave}\n      onTouchStart={handleTouchStart}\n      onTouchMove={handleMouseMove}\n      onTouchEnd={handleMouseLeave}\n      onTouchCancel={handleMouseLeave}\n    >\n      <Transition activeKey={isUpdating ? 1 : 0} name=\"semiFade\" shouldCleanup>\n        <img\n          src={renderSvg()}\n          className={buildClassName(imgClassName, isUpdating && 'glare-image')}\n          alt={lang('Currency History')}\n        />\n      </Transition>\n    </div>\n  );\n}\n\nexport default memo(TokenPriceChart);\n","import React, { memo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { TokenPeriod } from '../../../../global/types';\n\nimport { HISTORY_PERIODS } from '../../../../config';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport { vibrate } from '../../../../util/haptics';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport DropdownMenu from '../../../ui/DropdownMenu';\n\nimport styles from './ChartHistorySwitcher.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  onClose: NoneToVoidFunction;\n  onChange?: (period: TokenPeriod) => void;\n}\n\ninterface StateProps {\n  currentPeriod?: TokenPeriod;\n}\n\nconst ITEMS = HISTORY_PERIODS.map((key) => ({ value: key, name: key === 'ALL' ? 'All' : key }));\n\nfunction ChartHistorySwitcher({\n  isOpen,\n  currentPeriod,\n  onClose,\n  onChange,\n}: OwnProps & StateProps) {\n  const { setCurrentTokenPeriod } = getActions();\n\n  const handlePeriodChange = useLastCallback((period: string) => {\n    onClose();\n\n    if (period === currentPeriod) return;\n\n    void vibrate();\n\n    setCurrentTokenPeriod({ period: period as TokenPeriod });\n    onChange?.(period as TokenPeriod);\n  });\n\n  return (\n    <DropdownMenu\n      isOpen={isOpen}\n      onClose={onClose}\n      items={ITEMS}\n      className={styles.menuWrapper}\n      bubbleClassName={styles.menu}\n      buttonClassName={styles.menuItem}\n      selectedValue={currentPeriod}\n      menuPositionX=\"right\"\n      onSelect={handlePeriodChange}\n    />\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n\n  return {\n    currentPeriod: accountState?.currentTokenPeriod,\n  };\n})(ChartHistorySwitcher));\n","// extracted by mini-css-extract-plugin\nexport default {\"menuWrapper\":\"Lfs6oB99\",\"menu\":\"EJsuJXfx\",\"menuItem\":\"J7O_MmwF\"};","import type { ElementRef } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiBaseCurrency, ApiStakingState } from '../../../../api/types';\nimport type { PriceHistoryPeriods, TokenPeriod, UserToken } from '../../../../global/types';\n\nimport { DEFAULT_PRICE_CURRENCY, HISTORY_PERIODS, IS_CORE_WALLET } from '../../../../config';\nimport { selectAccountStakingStates, selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { calcBigChangeValue } from '../../../../util/calcChangeValue';\nimport { formatShortDay, SECOND } from '../../../../util/dateFormat';\nimport { toBig, toDecimal } from '../../../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../../../util/formatNumber';\nimport { vibrate } from '../../../../util/haptics';\nimport { handleUrlClick } from '../../../../util/openUrl';\nimport { round } from '../../../../util/round';\nimport { getExplorerName, getExplorerTokenUrl } from '../../../../util/url';\nimport { IS_IOS } from '../../../../util/windowEnvironment';\nimport { calculateTokenCardColor } from '../../helpers/cardColors';\n\nimport useFlag from '../../../../hooks/useFlag';\nimport useForceUpdate from '../../../../hooks/useForceUpdate';\nimport useInterval from '../../../../hooks/useInterval';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../../hooks/useSyncEffect';\nimport useTimeout from '../../../../hooks/useTimeout';\n\nimport TokenIcon from '../../../common/TokenIcon';\nimport TokenPriceChart from '../../../common/TokenPriceChart';\nimport Button from '../../../ui/Button';\nimport SensitiveData from '../../../ui/SensitiveData';\nimport Spinner from '../../../ui/Spinner';\nimport Transition from '../../../ui/Transition';\nimport ChartHistorySwitcher from './ChartHistorySwitcher';\nimport CurrencySwitcherMenu from './CurrencySwitcherMenu';\n\nimport styles from './Card.module.scss';\n\ninterface OwnProps {\n  ref?: ElementRef<HTMLDivElement>;\n  token: UserToken;\n  classNames?: string;\n  isUpdating?: boolean;\n  onYieldClick?: (stakingId?: string) => void;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  period?: TokenPeriod;\n  baseCurrency?: ApiBaseCurrency;\n  historyPeriods?: PriceHistoryPeriods;\n  tokenAddress?: string;\n  isTestnet?: boolean;\n  stakingStates?: ApiStakingState[];\n  isSensitiveDataHidden?: true;\n}\n\nconst OFFLINE_TIMEOUT = 120000; // 2 minutes\n\nconst CHART_DIMENSIONS = { width: 300, height: 64 };\nconst INTERVAL = 5 * SECOND;\n\nconst DEFAULT_PERIOD = HISTORY_PERIODS[0];\n\nfunction TokenCard({\n  ref,\n  isTestnet,\n  token,\n  classNames,\n  period = DEFAULT_PERIOD,\n  isUpdating,\n  baseCurrency,\n  historyPeriods,\n  tokenAddress,\n  stakingStates,\n  isSensitiveDataHidden,\n  onYieldClick,\n  onClose,\n}: OwnProps & StateProps) {\n  const { loadPriceHistory } = getActions();\n  const lang = useLang();\n  const forceUpdate = useForceUpdate();\n  const [isCurrencyMenuOpen, openCurrencyMenu, closeCurrencyMenu] = useFlag(false);\n  const [isHistoryMenuOpen, openHistoryMenu, closeHistoryMenu] = useFlag(false);\n\n  const shouldUseDefaultCurrency = baseCurrency === undefined || baseCurrency === token.symbol;\n  const chartCurrency = shouldUseDefaultCurrency ? DEFAULT_PRICE_CURRENCY : baseCurrency;\n\n  const currencySymbol = getShortCurrencySymbol(chartCurrency);\n\n  const [selectedHistoryIndex, setSelectedHistoryIndex] = useState(-1);\n\n  useSyncEffect(([prevHistoryIndex]) => {\n    if (!IS_IOS) return;\n\n    if (prevHistoryIndex !== undefined) {\n      void vibrate();\n    }\n  }, [selectedHistoryIndex]);\n\n  const {\n    slug, symbol, amount, name, price: lastPrice, decimals,\n  } = token;\n\n  const { annualYield, yieldType, id: stakingId } = useMemo(() => {\n    if (IS_CORE_WALLET) return undefined;\n\n    return stakingStates?.reduce((bestState, state) => {\n      if (state.tokenSlug === slug && (!bestState || state.balance > bestState.balance)) {\n        return state;\n      }\n      return bestState;\n    }, undefined as ApiStakingState | undefined);\n  }, [stakingStates, slug]) ?? {};\n\n  const refreshHistory = useLastCallback((newPeriod?: TokenPeriod) => {\n    loadPriceHistory({ slug, period: newPeriod ?? period });\n  });\n\n  const handleCurrencyChange = useLastCallback((currency: ApiBaseCurrency) => {\n    loadPriceHistory({ slug, period, currency });\n  });\n\n  useInterval(refreshHistory, INTERVAL);\n\n  const history = historyPeriods?.[period];\n\n  const tokenLastUpdatedAt = history?.length ? history[history.length - 1][0] * 1000 : undefined;\n  const tokenLastHistoryPrice = history?.length ? history[history.length - 1][1] : lastPrice;\n  const selectedHistoryPoint = history?.[selectedHistoryIndex];\n  const price = selectedHistoryPoint?.[1]\n    ?? (shouldUseDefaultCurrency ? tokenLastHistoryPrice : undefined)\n    ?? lastPrice;\n  // To prevent flickering with spoiler\n  const tokenChangePrice = isSensitiveDataHidden ? lastPrice : price;\n  const isLoading = !tokenLastUpdatedAt || (Date.now() - tokenLastUpdatedAt > OFFLINE_TIMEOUT);\n  const dateStr = selectedHistoryPoint\n    ? formatShortDay(lang.code!, selectedHistoryPoint[0] * 1000, true, true)\n    : (isLoading && tokenLastUpdatedAt ? formatShortDay(lang.code!, tokenLastUpdatedAt, true, false) : lang('Now'));\n\n  useTimeout(forceUpdate, isLoading ? undefined : OFFLINE_TIMEOUT, [tokenLastUpdatedAt]);\n\n  const initialPrice = useMemo(() => {\n    return history?.find(([, value]) => Boolean(value))?.[1];\n  }, [history]);\n\n  const valueBig = toBig(amount, decimals).mul(price);\n  const value = valueBig.toString();\n  const change = initialPrice && price ? price - initialPrice : 0;\n  const changeFactor = initialPrice && tokenChangePrice ? tokenChangePrice / initialPrice - 1 : 0;\n  const amountChange = initialPrice && tokenChangePrice ? calcBigChangeValue(valueBig, changeFactor).toNumber() : 0;\n  const changePrefix = change === undefined ? change : change > 0 ? '' : change < 0 ? '' : 0;\n\n  const changeValue = amountChange ? Math.abs(round(amountChange, 4)) : 0;\n  const changePercent = change ? Math.abs(round((change / initialPrice!) * 100, 2)) : 0;\n\n  const withChange = Boolean(change !== undefined);\n  const historyStartDay = history?.length ? new Date(history[0][0] * 1000) : undefined;\n  const withExplorerButton = Boolean(token.cmcSlug || tokenAddress);\n  const shouldHideChartPeriodSwitcher = !history?.length && token.priceUsd === 0;\n\n  const color = useMemo(() => calculateTokenCardColor(token), [token]);\n\n  function renderExplorerLink() {\n    const url = getExplorerTokenUrl(token.chain, token.cmcSlug, tokenAddress, isTestnet);\n    if (!url) return undefined;\n\n    const title = (lang(\n      'Open on %ton_explorer_name%',\n      { ton_explorer_name: getExplorerName(token.chain) },\n    ) as string[]).join('');\n\n    return (\n      <>\n        {'  '}\n        <a\n          href={url}\n          title={title}\n          aria-label={title}\n          target=\"_blank\"\n          rel=\"noreferrer\"\n          className={styles.tokenExplorerButton}\n          onClick={handleUrlClick}\n        >\n          <i className=\"icon-tonexplorer-small\" aria-hidden />\n        </a>\n      </>\n    );\n  }\n\n  return (\n    <div ref={ref} className={buildClassName(styles.container, styles.tokenCard, classNames, color, 'token-card')}>\n      <div className={styles.tokenInfo}>\n        <Button className={styles.backButton} isSimple onClick={onClose} ariaLabel={lang('Back')}>\n          <i className=\"icon-chevron-left\" aria-hidden />\n        </Button>\n        <TokenIcon\n          token={token}\n          size=\"x-large\"\n          className={styles.tokenLogo}\n        />\n        <div className={styles.tokenInfoHeader}>\n          <b className={styles.tokenAmount}>\n            <SensitiveData\n              isActive={isSensitiveDataHidden}\n              maskSkin=\"cardLightText\"\n              cols={10}\n              rows={2}\n              cellSize={8}\n            >\n              {formatCurrency(toDecimal(amount, token.decimals), symbol)}\n            </SensitiveData>\n          </b>\n          {withChange && (\n            <div className={styles.tokenValue}>\n              <SensitiveData\n                isActive={isSensitiveDataHidden}\n                maskSkin=\"cardLightText\"\n                align=\"right\"\n                cols={10}\n                rows={2}\n                cellSize={8}\n              >\n                <div className={styles.currencySwitcher} role=\"button\" tabIndex={0} onClick={openCurrencyMenu}>\n                  &thinsp;{formatCurrency(value, currencySymbol, undefined, true)}\n                  <i className={buildClassName('icon', 'icon-caret-down', styles.iconCaretSmall)} aria-hidden />\n                </div>\n                <CurrencySwitcherMenu\n                  isOpen={isCurrencyMenuOpen}\n                  menuPositionX=\"right\"\n                  excludedCurrency={token.symbol}\n                  onClose={closeCurrencyMenu}\n                  onChange={handleCurrencyChange}\n                />\n              </SensitiveData>\n            </div>\n          )}\n        </div>\n        <div className={styles.tokenInfoSubheader}>\n          <span className={styles.tokenTitle}>\n            <span className={styles.tokenName}>{name}</span>\n            {yieldType && (\n              <span\n                className={buildClassName(styles.apy, onYieldClick && styles.interactive)}\n                onClick={onYieldClick ? () => onYieldClick(stakingId) : undefined}\n              >\n                {yieldType} {round(annualYield ?? 0, 2)}%\n              </span>\n            )}\n          </span>\n          {withChange && Boolean(changeValue) && (\n            <div className={styles.tokenChange}>\n              {changePrefix}&thinsp;\n              {Math.abs(changePercent)}% \n              <SensitiveData\n                isActive={isSensitiveDataHidden}\n                align=\"right\"\n                maskSkin=\"cardLightText\"\n                cols={6}\n                rows={2}\n                cellSize={8}\n                className={styles.tokenChangeSensitiveData}\n                maskClassName={styles.tokenChangeSpoiler}\n              >\n                {formatCurrency(Math.abs(changeValue), currencySymbol)}\n              </SensitiveData>\n            </div>\n          )}\n        </div>\n      </div>\n\n      <Transition activeKey={!history ? 0 : history.length ? HISTORY_PERIODS.indexOf(period) + 1 : -1} name=\"fade\">\n        {!history ? (\n          <div className={buildClassName(styles.isLoading)}>\n            <Spinner color=\"white\" className={styles.center} />\n          </div>\n        ) : history?.length ? (\n          <>\n            <TokenPriceChart\n              className={styles.chart}\n              imgClassName={styles.chartImg}\n              width={CHART_DIMENSIONS.width}\n              height={CHART_DIMENSIONS.height}\n              prices={history}\n              selectedIndex={selectedHistoryIndex}\n              onSelectIndex={setSelectedHistoryIndex}\n              isUpdating={isUpdating}\n            />\n\n            <div className={styles.tokenHistoryPrice}>\n              {formatCurrency(history[0][1], currencySymbol, 2, true)}\n              <div className={styles.tokenPriceDate}>{formatShortDay(lang.code!, historyStartDay!)}</div>\n            </div>\n          </>\n        ) : undefined}\n      </Transition>\n\n      <span\n        className={buildClassName(styles.periodChooser, shouldHideChartPeriodSwitcher && styles.periodChooserHidden)}\n        role=\"button\"\n        tabIndex={0}\n        onClick={openHistoryMenu}\n      >\n        {period === 'ALL' ? 'All' : period}\n        <i className={buildClassName('icon', 'icon-caret-down', styles.iconCaretSmall)} aria-hidden />\n        <ChartHistorySwitcher\n          isOpen={isHistoryMenuOpen}\n          onChange={refreshHistory}\n          onClose={closeHistoryMenu}\n        />\n      </span>\n\n      <div className={styles.tokenCurrentPrice}>\n        {formatCurrency(price, currencySymbol, selectedHistoryIndex === -1 ? 2 : 4, true)}\n        <div className={styles.tokenPriceDate}>\n          {dateStr}\n          {withExplorerButton && renderExplorerLink()}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global, ownProps): StateProps => {\n    const slug = ownProps.token.slug;\n    const accountState = selectCurrentAccountState(global);\n    const tokenAddress = global.tokenInfo.bySlug[slug]?.tokenAddress;\n    const stakingStates = selectAccountStakingStates(global, global.currentAccountId!);\n\n    return {\n      isTestnet: global.settings.isTestnet,\n      period: accountState?.currentTokenPeriod,\n      baseCurrency: global.settings.baseCurrency,\n      historyPeriods: global.tokenPriceHistory.bySlug[ownProps.token.slug],\n      tokenAddress,\n      stakingStates,\n      isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n    };\n  })(TokenCard),\n);\n","import React, {\n  type ElementRef,\n  memo, useEffect, useLayoutEffect, useMemo, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { ApiBaseCurrency, ApiNft, ApiStakingState } from '../../../../api/types';\nimport type { UserToken } from '../../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../../config';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsCurrentAccountViewMode,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { formatCurrency, getShortCurrencySymbol } from '../../../../util/formatNumber';\nimport { IS_IOS, IS_SAFARI } from '../../../../util/windowEnvironment';\nimport { calculateFullBalance } from './helpers/calculateFullBalance';\nimport getSensitiveDataMaskSkinFromCardNft from './helpers/getSensitiveDataMaskSkinFromCardNft';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useFlag from '../../../../hooks/useFlag';\nimport useFontScale from '../../../../hooks/useFontScale';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\nimport useUpdateIndicator from '../../../../hooks/useUpdateIndicator';\nimport useWindowSize from '../../../../hooks/useWindowSize';\n\nimport MintCardButton from '../../../mintCard/MintCardButton';\nimport AnimatedCounter from '../../../ui/AnimatedCounter';\nimport LoadingDots from '../../../ui/LoadingDots';\nimport SensitiveData from '../../../ui/SensitiveData';\nimport Spinner from '../../../ui/Spinner';\nimport Transition from '../../../ui/Transition';\nimport CardAddress from './CardAddress';\nimport CurrencySwitcherMenu from './CurrencySwitcherMenu';\nimport CustomCardManager from './CustomCardManager';\nimport TokenCard from './TokenCard';\n\nimport styles from './Card.module.scss';\n\ninterface OwnProps {\n  ref?: ElementRef<HTMLDivElement>;\n  onTokenCardClose: NoneToVoidFunction;\n  onYieldClick: (stakingId?: string) => void;\n}\n\ninterface StateProps {\n  tokens?: UserToken[];\n  currentTokenSlug?: string;\n  baseCurrency?: ApiBaseCurrency;\n  stakingStates?: ApiStakingState[];\n  cardNft?: ApiNft;\n  isSensitiveDataHidden?: true;\n  isNftBuyingDisabled: boolean;\n  isViewMode: boolean;\n}\n\nfunction Card({\n  ref,\n  tokens,\n  currentTokenSlug,\n  onTokenCardClose,\n  onYieldClick,\n  baseCurrency,\n  stakingStates,\n  isSensitiveDataHidden,\n  isNftBuyingDisabled,\n  cardNft,\n  isViewMode,\n}: OwnProps & StateProps) {\n  const amountRef = useRef<HTMLDivElement>();\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n  const [customCardClassName, setCustomCardClassName] = useState<string | undefined>(undefined);\n  const [withTextGradient, setWithTextGradient] = useState<boolean>(false);\n\n  const { isPortrait } = useDeviceScreen();\n  const { width: screenWidth } = useWindowSize();\n  const isUpdating = useUpdateIndicator('balanceUpdateStartedAt');\n  const { updateFontScale } = useFontScale(amountRef);\n  // Screen width affects font size only in portrait orientation\n  const screenWidthDep = isPortrait ? screenWidth : 0;\n\n  const [isCurrencyMenuOpen, openCurrencyMenu, closeCurrencyMenu] = useFlag(false);\n  const currentToken = useMemo(() => {\n    return tokens ? tokens.find((token) => token.slug === currentTokenSlug) : undefined;\n  }, [currentTokenSlug, tokens]);\n  const renderedToken = useCurrentOrPrev(currentToken, true);\n  const {\n    shouldRender: shouldRenderTokenCard,\n    ref: tokenCardRef,\n  } = useShowTransition({\n    isOpen: Boolean(currentTokenSlug),\n    noMountTransition: true,\n    withShouldRender: true,\n  });\n  const sensitiveDataMaskSkin = getSensitiveDataMaskSkinFromCardNft(cardNft);\n\n  const handleCardChange = useLastCallback((hasGradient: boolean, className?: string) => {\n    setCustomCardClassName(className);\n    setWithTextGradient(hasGradient);\n  });\n\n  const values = useMemo(() => {\n    return tokens ? calculateFullBalance(tokens, stakingStates) : undefined;\n  }, [tokens, stakingStates]);\n\n  useHistoryBack({\n    isActive: Boolean(currentTokenSlug),\n    onBack: onTokenCardClose,\n  });\n\n  useEffect(\n    () => (shouldRenderTokenCard ? captureEscKeyListener(onTokenCardClose) : undefined),\n    [shouldRenderTokenCard, onTokenCardClose],\n  );\n\n  const {\n    primaryValue, primaryWholePart, primaryFractionPart, changePrefix, changePercent, changeValue,\n  } = values || {};\n\n  useLayoutEffect(() => {\n    if (primaryValue !== undefined) {\n      updateFontScale();\n    }\n  }, [primaryFractionPart, primaryValue, primaryWholePart, shortBaseSymbol, updateFontScale, screenWidthDep]);\n\n  function renderLoader() {\n    return (\n      <div className={buildClassName(styles.isLoading)}>\n        <Spinner color=\"white\" className={styles.center} />\n      </div>\n    );\n  }\n\n  function renderBalance() {\n    const iconCaretClassNames = buildClassName(\n      'icon',\n      'icon-caret-down',\n      primaryFractionPart || shortBaseSymbol.length > 1 ? styles.iconCaretFraction : styles.iconCaret,\n    );\n    const noAnimationCounter = !isUpdating || IS_SAFARI || IS_IOS;\n    return (\n      <>\n        <Transition\n          ref={amountRef}\n          activeKey={isUpdating && !isSensitiveDataHidden ? 1 : 0}\n          name=\"fade\"\n          shouldCleanup\n          className={styles.balanceTransition}\n          slideClassName={styles.balanceSlide}\n        >\n          <SensitiveData\n            isActive={isSensitiveDataHidden}\n            maskSkin={sensitiveDataMaskSkin}\n            rows={4}\n            cols={14}\n            cellSize={13}\n            align=\"center\"\n            maskClassName={styles.blurred}\n          >\n            <div className={buildClassName(styles.primaryValue, 'rounded-font')}>\n              <span\n                className={buildClassName(\n                  styles.currencySwitcher,\n                  isUpdating && 'glare-text',\n                  !isUpdating && withTextGradient && 'gradientText',\n                )}\n                role=\"button\"\n                tabIndex={0}\n                onClick={!isSensitiveDataHidden ? openCurrencyMenu : undefined}\n              >\n                {shortBaseSymbol.length === 1 && <span className={styles.currencySymbol}>{shortBaseSymbol}</span>}\n                <AnimatedCounter isDisabled={noAnimationCounter} text={primaryWholePart ?? ''} />\n                {primaryFractionPart && (\n                  <span className={styles.primaryFractionPart}>\n                    <AnimatedCounter isDisabled={noAnimationCounter} text={`.${primaryFractionPart}`} />\n                  </span>\n                )}\n                {shortBaseSymbol.length > 1 && (\n                  <span className={styles.primaryFractionPart}>&nbsp;{shortBaseSymbol}</span>\n                )}\n                <i className={iconCaretClassNames} aria-hidden />\n              </span>\n            </div>\n          </SensitiveData>\n        </Transition>\n        <CurrencySwitcherMenu isOpen={isCurrencyMenuOpen} menuPositionX=\"right\" onClose={closeCurrencyMenu} />\n        {primaryValue !== '0' && (\n          <SensitiveData\n            isActive={isSensitiveDataHidden}\n            maskSkin={sensitiveDataMaskSkin}\n            rows={2}\n            cols={11}\n            align=\"center\"\n            cellSize={14}\n            className={styles.changeSpoiler}\n            maskClassName={styles.blurred}\n          >\n            <div className={buildClassName(styles.change, 'rounded-font')}>\n              {!!changePrefix && (\n                <>\n                  <i\n                    className={buildClassName(\n                      styles.changePrefix,\n                      changePrefix === 'up' ? 'icon-arrow-up' : 'icon-arrow-down',\n                    )}\n                    aria-hidden\n                  />\n                  <AnimatedCounter text={`${Math.abs(changePercent!)}%`} />\n                  {'  '}\n                </>\n              )}\n              <AnimatedCounter text={formatCurrency(Math.abs(changeValue!), shortBaseSymbol)} />\n            </div>\n          </SensitiveData>\n        )}\n      </>\n    );\n  }\n\n  return (\n    <div ref={ref} className={styles.containerWrapper}>\n      <Transition activeKey={isUpdating ? 1 : 0} name=\"fade\" shouldCleanup className={styles.loadingDotsContainer}>\n        {isUpdating ? <LoadingDots isActive isDoubled /> : undefined}\n      </Transition>\n\n      <div className={buildClassName(styles.container, currentTokenSlug && styles.backstage, customCardClassName)}>\n        <CustomCardManager nft={cardNft} onCardChange={handleCardChange} />\n\n        <div className={buildClassName(styles.containerInner, customCardClassName)}>\n          {values ? renderBalance() : renderLoader()}\n          <CardAddress withTextGradient={withTextGradient} />\n          {!IS_CORE_WALLET && !isNftBuyingDisabled && !isViewMode && <MintCardButton />}\n        </div>\n      </div>\n\n      {shouldRenderTokenCard && (\n        <TokenCard\n          token={renderedToken!}\n          ref={tokenCardRef}\n          isUpdating={isUpdating}\n          onYieldClick={isViewMode ? undefined : onYieldClick}\n          onClose={onTokenCardClose}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountState = selectCurrentAccountState(global);\n      const stakingStates = selectAccountStakingStates(global, global.currentAccountId!);\n      const { cardBackgroundNft: cardNft } = selectCurrentAccountSettings(global) || {};\n\n      return {\n        isViewMode: selectIsCurrentAccountViewMode(global),\n        tokens: selectCurrentAccountTokens(global),\n        currentTokenSlug: accountState?.currentTokenSlug,\n        baseCurrency: global.settings.baseCurrency,\n        stakingStates,\n        cardNft,\n        isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n        isNftBuyingDisabled: global.restrictions.isNftBuyingDisabled,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Card),\n);\n","import type { ApiNft } from '../../../../../api/types';\nimport type { SensitiveDataMaskSkin } from '../../../../common/SensitiveDataMask';\n\nexport default function getSensitiveDataMaskSkinFromCardNft(cardNft?: ApiNft): SensitiveDataMaskSkin {\n  const { mtwCardType, mtwCardTextType } = cardNft?.metadata || {};\n\n  return mtwCardType === 'gold'\n    ? 'cardGoldText'\n    : mtwCardType === 'silver' || mtwCardTextType === 'dark'\n      ? 'cardDarkText'\n      : 'cardLightText';\n}\n","import { ACTIVE_SLIDE_CLASS_NAME } from '../../ui/Transition';\n\n/** Finds the appropriate scrollable container */\nexport function getScrollableContainer(\n  element: HTMLElement | null | undefined,\n  isPortrait?: boolean,\n) {\n  // eslint-disable-next-line no-null/no-null\n  if (!element) return null;\n  const selector = getScrollableContainerSelector(isPortrait);\n\n  if (isPortrait) {\n    return element.closest(selector);\n  } else {\n    return element.matches(selector)\n      ? element\n      : element.querySelector(selector);\n  }\n}\n\n// In portrait mode, find the parent `.app-slide-content` container, which contains the all app scrollable content\nfunction getScrollableContainerSelector(isPortrait?: boolean) {\n  return isPortrait ? '.app-slide-content' : `.custom-scroll.${ACTIVE_SLIDE_CLASS_NAME}`;\n}\n\nexport function getScrollContainerClosestSelector(isActive?: boolean, isPortrait?: boolean) {\n  return !isActive || !isPortrait ? undefined : '.app-slide-content';\n}\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  selectedNftsToHide?: {\n    addresses: string[];\n    isCollection: boolean;\n  };\n}\n\nfunction HideNftModal({\n  isOpen,\n  selectedNftsToHide,\n}: OwnProps) {\n  const {\n    addNftsToBlacklist,\n    closeNftCollection,\n    closeHideNftModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const handleHide = useLastCallback(() => {\n    addNftsToBlacklist({\n      addresses: selectedNftsToHide!.addresses,\n    });\n    if (selectedNftsToHide?.isCollection) closeNftCollection();\n    closeHideNftModal();\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={closeHideNftModal}\n      title={lang('Hide NFTs')}\n    >\n      <p className={modalStyles.text}>\n        {\n          selectedNftsToHide?.isCollection\n            ? lang(\n              'Are you sure you want to hide this NFT collection containing %number% NFTs?',\n              { number: selectedNftsToHide?.addresses.length },\n            )\n            : lang(\n              'Are you sure you want to hide these %number% NFTs?',\n              { number: selectedNftsToHide?.addresses.length },\n            )\n        }\n      </p>\n      <div className={modalStyles.buttons}>\n        <Button onClick={closeHideNftModal} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleHide} className={modalStyles.button}>\n          {lang('Hide')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(HideNftModal);\n","import { useRef } from '../lib/teact/teact';\n\nimport { LoadMoreDirection } from '../global/types';\n\nimport { areSortedArraysEqual } from '../util/iteratees';\nimport useForceUpdate from './useForceUpdate';\nimport useLastCallback from './useLastCallback';\nimport usePrevious from './usePrevious';\nimport usePrevious2 from './usePrevious2';\nimport useSyncEffect from './useSyncEffect';\n\ntype GetMore = (args: { direction: LoadMoreDirection }) => void;\ntype ResetScroll = () => void;\ntype LoadMoreBackwards = (args: { offsetId?: string | number }) => void;\n\nconst DEFAULT_LIST_SLICE = 30;\n\nconst useInfiniteScroll = <ListId extends string | number>(\n  loadMoreBackwards?: LoadMoreBackwards,\n  listIds?: ListId[],\n  isDisabled = false,\n  listSlice = DEFAULT_LIST_SLICE,\n  slug?: string,\n  isActive?: boolean,\n  withResetOnInactive = false,\n): [ListId[]?, GetMore?, ResetScroll?] => {\n  const currentStateRef = useRef<{ viewportIds: ListId[]; isOnTop: boolean } | undefined>();\n  if (!currentStateRef.current && listIds && !isDisabled) {\n    const {\n      newViewportIds,\n      newIsOnTop,\n    } = getViewportSlice(listIds, LoadMoreDirection.Forwards, listSlice, listIds[0]);\n    currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n  }\n\n  const forceUpdate = useForceUpdate();\n\n  const prevSlug = usePrevious2(slug);\n\n  const resetScroll: ResetScroll = useLastCallback(() => {\n    if (!listIds?.length) return;\n\n    const {\n      newViewportIds,\n      newIsOnTop,\n    } = getViewportSlice(listIds, LoadMoreDirection.Forwards, listSlice, listIds[0]);\n\n    currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n  });\n\n  useSyncEffect(() => {\n    if (slug !== prevSlug || (withResetOnInactive && !isActive)) {\n      resetScroll();\n    }\n  }, [isActive, prevSlug, slug, withResetOnInactive]);\n\n  const prevListIds = usePrevious(listIds);\n  const prevIsDisabled = usePrevious(isDisabled);\n  if (listIds && !isDisabled && (listIds !== prevListIds || isDisabled !== prevIsDisabled)) {\n    const { viewportIds: oldViewportIds, isOnTop: oldIsOnTop } = currentStateRef.current ?? {};\n    const { newViewportIds, newIsOnTop } = getViewportSliceAfterListChange(\n      listIds,\n      oldViewportIds,\n      oldIsOnTop,\n      listSlice,\n    );\n\n    if (!oldViewportIds || !areSortedArraysEqual(oldViewportIds, newViewportIds)) {\n      currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n    }\n  } else if (!listIds) {\n    currentStateRef.current = undefined;\n  }\n\n  const getMore: GetMore = useLastCallback(({\n    direction,\n  }: { direction: LoadMoreDirection; noScroll?: boolean }) => {\n    if (!isActive) return;\n\n    const { viewportIds } = currentStateRef.current || {};\n\n    const offsetId = viewportIds\n      ? direction === LoadMoreDirection.Backwards ? viewportIds[viewportIds.length - 1] : viewportIds[0]\n      : undefined;\n\n    if (!listIds) {\n      if (loadMoreBackwards) {\n        loadMoreBackwards({ offsetId });\n      }\n\n      return;\n    }\n\n    const {\n      newViewportIds, areSomeLocal, areAllLocal, newIsOnTop,\n    } = getViewportSlice(listIds, direction, listSlice, offsetId);\n\n    if (areSomeLocal && !(viewportIds && areSortedArraysEqual(viewportIds, newViewportIds))) {\n      currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n      forceUpdate();\n    }\n\n    if (!areAllLocal && loadMoreBackwards) {\n      loadMoreBackwards({ offsetId });\n    }\n  });\n\n  return isDisabled ? [listIds] : [currentStateRef.current?.viewportIds, getMore, resetScroll];\n};\n\nfunction getViewportSlice<ListId extends string | number>(\n  sourceIds: ListId[],\n  direction: LoadMoreDirection,\n  listSlice: number,\n  offsetId?: ListId,\n) {\n  const { length } = sourceIds;\n  const index = offsetId ? sourceIds.indexOf(offsetId) : 0;\n  const isForwards = direction === LoadMoreDirection.Forwards;\n  const indexForDirection = isForwards ? index : (index + 1) || length;\n  const from = Math.max(0, indexForDirection - listSlice);\n  const to = indexForDirection + listSlice - 1;\n  const newViewportIds = sourceIds.slice(Math.max(0, from), to + 1);\n\n  let areSomeLocal;\n  let areAllLocal;\n  switch (direction) {\n    case LoadMoreDirection.Forwards:\n      areSomeLocal = indexForDirection >= 0;\n      areAllLocal = from >= 0;\n      break;\n    case LoadMoreDirection.Backwards:\n      areSomeLocal = indexForDirection < length;\n      areAllLocal = to <= length - 1;\n      break;\n  }\n\n  return {\n    newViewportIds,\n    areSomeLocal,\n    areAllLocal,\n    newIsOnTop: newViewportIds[0] === sourceIds[0],\n  };\n}\n\nfunction getViewportSliceAfterListChange<ListId extends string | number>(\n  newListIds: ListId[],\n  oldViewportIds: ListId[] | undefined,\n  oldIsOnTop: boolean | undefined,\n  sliceLength: number,\n) {\n  if (oldIsOnTop) {\n    // When the offsetId is on the top, the viewport slice must include at least as many items as it already has.\n    // Otherwise, the ids, that the user is seeing, can disappear (that causes the list to scroll higher instantly).\n    // Subtracting 1 prevents getViewportSlice from expanding the viewport slice 1 item with each newListIds change.\n    sliceLength = Math.max(sliceLength, (oldViewportIds?.length ?? 0) - 1);\n    return getViewportSlice(newListIds, LoadMoreDirection.Backwards, sliceLength, newListIds[0]);\n  }\n\n  let offsetId = oldViewportIds?.[Math.round(oldViewportIds.length / 2)];\n  if (offsetId && !newListIds.includes(offsetId)) offsetId = newListIds[0];\n  // The direction must be Forwards for getViewportSlice to keep the offsetId at the newViewportIds middle. Otherwise,\n  // the viewport slice will \"walk\" 1 item backward with each newListIds change.\n  return getViewportSlice(newListIds, LoadMoreDirection.Forwards, sliceLength, offsetId);\n}\n\nexport default useInfiniteScroll;\n","import { useLayoutEffect, useRef } from '../lib/teact/teact';\n\nconst useLayoutEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T, debugKey?: string,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useLayoutEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies, debugKey);\n};\n\nexport default useLayoutEffectWithPrevDeps;\n","import type { UIEvent } from 'react';\nimport type { ElementRef, FC, TeactNode } from '../../lib/teact/teact';\nimport React, {\n  useEffect, useLayoutEffect, useMemo, useRef,\n} from '../../lib/teact/teact';\n\nimport { LoadMoreDirection } from '../../global/types';\n\nimport { requestForcedReflow } from '../../lib/fasterdom/fasterdom';\nimport buildStyle from '../../util/buildStyle';\nimport { SECOND } from '../../util/dateFormat';\nimport resetScroll from '../../util/resetScroll';\nimport { debounce } from '../../util/schedulers';\nimport { IS_ANDROID } from '../../util/windowEnvironment';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useLayoutEffectWithPrevDeps from '../../hooks/useLayoutEffectWithPrevDeps';\n\ntype OwnProps = {\n  ref?: ElementRef<HTMLDivElement>;\n  style?: string;\n  className?: string;\n  items?: any[];\n  itemSelector?: string;\n  preloadBackwards?: number;\n  sensitiveArea?: number;\n  withAbsolutePositioning?: boolean;\n  /* A CSS value */\n  maxHeight?: string;\n  noScrollRestore?: boolean;\n  noScrollRestoreOnTop?: boolean;\n  noFastList?: boolean;\n  cacheBuster?: any;\n  beforeChildren?: TeactNode;\n  scrollContainerClosest?: string;\n  children: TeactNode;\n  onLoadMore?: ({ direction }: { direction: LoadMoreDirection }) => void;\n  onScroll?: (e: UIEvent<HTMLDivElement>) => void;\n  onWheel?: (e: React.WheelEvent<HTMLDivElement>) => void;\n  onClick?: (e: React.MouseEvent<HTMLDivElement>) => void;\n  onKeyDown?: (e: React.KeyboardEvent<any>) => void;\n  onDragOver?: (e: React.DragEvent<HTMLDivElement>) => void;\n  onDragLeave?: (e: React.DragEvent<HTMLDivElement>) => void;\n};\n\nconst DEFAULT_LIST_SELECTOR = '.ListItem';\nconst DEFAULT_PRELOAD_BACKWARDS = 20;\nconst DEFAULT_SENSITIVE_AREA = 800;\n\nconst InfiniteScroll: FC<OwnProps> = ({\n  ref,\n  style,\n  className,\n  items,\n  itemSelector = DEFAULT_LIST_SELECTOR,\n  preloadBackwards = DEFAULT_PRELOAD_BACKWARDS,\n  sensitiveArea = DEFAULT_SENSITIVE_AREA,\n  withAbsolutePositioning,\n  maxHeight,\n  // Used to turn off restoring scroll position (e.g. for frequently re-ordered chat or user lists)\n  noScrollRestore = false,\n  noScrollRestoreOnTop = false,\n  noFastList,\n  // Used to re-query `listItemElements` if rendering is delayed by transition\n  cacheBuster,\n  beforeChildren,\n  scrollContainerClosest,\n  children,\n  onLoadMore,\n  onScroll,\n  onWheel,\n  onClick,\n  onKeyDown,\n  onDragOver,\n  onDragLeave,\n}: OwnProps) => {\n  let containerRef = useRef<HTMLDivElement>();\n  if (ref) {\n    containerRef = ref;\n  }\n\n  const stateRef = useRef<{\n    listItemElements?: NodeListOf<HTMLDivElement>;\n    isScrollTopJustUpdated?: boolean;\n    currentAnchor?: HTMLDivElement | undefined;\n    currentAnchorTop?: number;\n  }>({});\n\n  const [loadMoreBackwards, loadMoreForwards] = useMemo(() => {\n    if (!onLoadMore) {\n      return [];\n    }\n\n    return [\n      debounce(() => {\n        onLoadMore({ direction: LoadMoreDirection.Backwards });\n      }, SECOND, true, false),\n      debounce(() => {\n        onLoadMore({ direction: LoadMoreDirection.Forwards });\n      }, SECOND, true, false),\n    ];\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [onLoadMore, items]);\n\n  // Initial preload\n  useEffect(() => {\n    if (!loadMoreBackwards) {\n      return;\n    }\n\n    if (preloadBackwards > 0 && (!items || items.length < preloadBackwards)) {\n      loadMoreBackwards();\n      return;\n    }\n\n    const scrollContainer = scrollContainerClosest\n      ? containerRef.current!.closest<HTMLDivElement>(scrollContainerClosest)!\n      : containerRef.current!;\n\n    const { scrollHeight, clientHeight } = scrollContainer;\n    if (clientHeight && scrollHeight <= clientHeight) {\n      loadMoreBackwards();\n    }\n  }, [items, loadMoreBackwards, preloadBackwards, scrollContainerClosest]);\n\n  // Restore `scrollTop` after adding items\n  useLayoutEffectWithPrevDeps(([prevItems]) => {\n    const scrollContainer = scrollContainerClosest\n      ? containerRef.current!.closest<HTMLDivElement>(scrollContainerClosest)!\n      : containerRef.current!;\n    const state = stateRef.current;\n\n    const listItemElements = scrollContainer.querySelectorAll<HTMLDivElement>(itemSelector);\n    state.listItemElements = listItemElements;\n\n    if (!prevItems?.length) return;\n\n    requestForcedReflow(() => {\n      let newScrollTop: number;\n\n      if (state.currentAnchor && Array.from(listItemElements).includes(state.currentAnchor)) {\n        const { scrollTop } = scrollContainer;\n        const newAnchorTop = state.currentAnchor.getBoundingClientRect().top;\n        newScrollTop = scrollTop + (newAnchorTop - state.currentAnchorTop!);\n      } else {\n        const nextAnchor = listItemElements[0];\n        if (nextAnchor) {\n          state.currentAnchor = nextAnchor;\n          state.currentAnchorTop = nextAnchor.getBoundingClientRect().top;\n        }\n      }\n\n      if (withAbsolutePositioning || noScrollRestore) {\n        return undefined;\n      }\n\n      const { scrollTop } = scrollContainer;\n      if (noScrollRestoreOnTop && scrollTop === 0) {\n        return undefined;\n      }\n\n      return () => {\n        resetScroll(scrollContainer, newScrollTop);\n\n        state.isScrollTopJustUpdated = true;\n      };\n    });\n  }, [\n    items, itemSelector, noScrollRestore, noScrollRestoreOnTop, cacheBuster, withAbsolutePositioning,\n    scrollContainerClosest,\n  ]);\n\n  const handleScroll = useLastCallback((e: UIEvent<HTMLDivElement>) => {\n    if (loadMoreForwards && loadMoreBackwards) {\n      const {\n        isScrollTopJustUpdated, currentAnchor, currentAnchorTop,\n      } = stateRef.current;\n      const listItemElements = stateRef.current.listItemElements!;\n\n      if (isScrollTopJustUpdated) {\n        stateRef.current.isScrollTopJustUpdated = false;\n        return;\n      }\n\n      const listLength = listItemElements.length;\n      const scrollContainer = scrollContainerClosest\n        ? containerRef.current!.closest<HTMLDivElement>(scrollContainerClosest)!\n        : containerRef.current!;\n      const { scrollTop, scrollHeight, offsetHeight } = scrollContainer;\n      const top = listLength ? listItemElements[0].offsetTop : 0;\n      const isNearTop = scrollTop <= top + sensitiveArea;\n      const bottom = listLength\n        ? listItemElements[listLength - 1].offsetTop + listItemElements[listLength - 1].offsetHeight\n        : scrollHeight;\n      const isNearBottom = bottom - (scrollTop + offsetHeight) <= sensitiveArea;\n      let isUpdated = false;\n\n      if (isNearTop) {\n        const nextAnchor = listItemElements[0];\n        if (nextAnchor) {\n          const nextAnchorTop = nextAnchor.getBoundingClientRect().top;\n          const newAnchorTop = currentAnchor?.offsetParent && currentAnchor !== nextAnchor\n            ? currentAnchor.getBoundingClientRect().top\n            : nextAnchorTop;\n          const isMovingUp = (\n            currentAnchor && currentAnchorTop !== undefined && newAnchorTop > currentAnchorTop\n          );\n\n          if (isMovingUp) {\n            stateRef.current.currentAnchor = nextAnchor;\n            stateRef.current.currentAnchorTop = nextAnchorTop;\n            isUpdated = true;\n            loadMoreForwards();\n          }\n        }\n      }\n\n      if (isNearBottom) {\n        const nextAnchor = listItemElements[listLength - 1];\n        if (nextAnchor) {\n          const nextAnchorTop = nextAnchor.getBoundingClientRect().top;\n          const newAnchorTop = currentAnchor?.offsetParent && currentAnchor !== nextAnchor\n            ? currentAnchor.getBoundingClientRect().top\n            : nextAnchorTop;\n          const isMovingDown = (\n            currentAnchor && currentAnchorTop !== undefined && newAnchorTop < currentAnchorTop\n          );\n\n          if (isMovingDown) {\n            stateRef.current.currentAnchor = nextAnchor;\n            stateRef.current.currentAnchorTop = nextAnchorTop;\n            isUpdated = true;\n            loadMoreBackwards();\n          }\n        }\n      }\n\n      if (!isUpdated) {\n        if (currentAnchor?.offsetParent) {\n          stateRef.current.currentAnchorTop = currentAnchor.getBoundingClientRect().top;\n        } else {\n          const nextAnchor = listItemElements[0];\n\n          if (nextAnchor) {\n            stateRef.current.currentAnchor = nextAnchor;\n            stateRef.current.currentAnchorTop = nextAnchor.getBoundingClientRect().top;\n          }\n        }\n      }\n    }\n\n    if (onScroll) {\n      onScroll(e);\n    }\n  });\n\n  useLayoutEffect(() => {\n    if (!scrollContainerClosest) return undefined;\n\n    const closestScrollContainer = containerRef.current!.closest<HTMLDivElement>(scrollContainerClosest);\n    if (!closestScrollContainer) return undefined;\n\n    const handleNativeScroll = (e: Event) => handleScroll(e as unknown as UIEvent<HTMLDivElement>);\n\n    closestScrollContainer.addEventListener('scroll', handleNativeScroll);\n\n    return () => {\n      closestScrollContainer.removeEventListener('scroll', handleNativeScroll);\n    };\n  }, [handleScroll, scrollContainerClosest]);\n\n  return (\n    <div\n      ref={containerRef}\n      className={className}\n      onScroll={handleScroll}\n      onWheel={onWheel}\n      teactFastList={!noFastList && !withAbsolutePositioning}\n      onKeyDown={onKeyDown}\n      onDragOver={onDragOver}\n      onDragLeave={onDragLeave}\n      onClick={onClick}\n      style={style}\n    >\n      {beforeChildren}\n      {withAbsolutePositioning && items?.length ? (\n        <div\n          teactFastList={!noFastList}\n          style={buildStyle('position: relative', IS_ANDROID && maxHeight !== undefined && `height: ${maxHeight}`)}\n        >\n          {children}\n        </div>\n      ) : children}\n    </div>\n  );\n};\n\nexport default InfiniteScroll;\n","import { IS_IOS } from './windowEnvironment';\n\nconst resetScroll = (container: HTMLDivElement, scrollTop?: number) => {\n  if (IS_IOS) {\n    container.style.overflow = 'hidden';\n  }\n\n  if (scrollTop !== undefined) {\n    container.scrollTop = scrollTop;\n  }\n\n  if (IS_IOS) {\n    container.style.overflow = '';\n  }\n};\n\nexport default resetScroll;\n","// extracted by mini-css-extract-plugin\nexport default {\"emptyList\":\"qI7nEtyA\",\"emptyListTitle\":\"ddnxH_YM\",\"emptyListLoading\":\"BUMeW3vl\",\"greeting\":\"HZCBxAlC\",\"sticker\":\"L93gae4c\",\"loaderThreshold\":\"tFv_lTfa\",\"itemLoading\":\"aJcdkBz7\",\"date\":\"t2U79mme\",\"date_withLoadingDots\":\"vFLWFB14\",\"dateWithLoadingDots\":\"vFLWFB14\",\"loadingDots\":\"Ig34AhI2\",\"dateContainer\":\"ubrkPkql\",\"dateSlide\":\"rHTS83Rc\",\"listItem\":\"ebD9lZA7\",\"listGroup\":\"fUr4n5dv\",\"animateOpacity\":\"a2p7XeQH\",\"animateTransform\":\"xJCALuqk\"};","import { useRef } from '../../../../../lib/teact/teact';\n\nimport { requestMutation } from '../../../../../lib/fasterdom/fasterdom';\n\nimport useLayoutEffectWithPrevDeps from '../../../../../hooks/useLayoutEffectWithPrevDeps';\n\nimport styles from '../Activities.module.scss';\n\nconst ANIMATION_DURATION = 200;\nconst ANIMATION_END_DELAY = 50;\n\nexport default function useActivityListEntry(\n  withAnimation: boolean,\n  topOffset: number, // rem\n) {\n  const ref = useRef<HTMLDivElement>();\n\n  useLayoutEffectWithPrevDeps(([prevTopOffset]) => {\n    const element = ref.current;\n\n    if (!withAnimation || !element) {\n      return;\n    }\n\n    if (prevTopOffset === undefined) {\n      // A new activity\n      animateOpacity(element);\n      cleanupAnimation(element);\n    } else if (topOffset !== prevTopOffset) {\n      // An existing activity that has moved\n      animateMove(element, topOffset - prevTopOffset);\n      cleanupAnimation(element);\n    }\n  }, [topOffset, withAnimation]);\n\n  return { ref };\n}\n\nfunction animateOpacity(element: HTMLElement) {\n  element.style.opacity = '0';\n\n  requestMutation(() => {\n    element.classList.add(styles.animateOpacity);\n    element.style.opacity = '1';\n  });\n}\n\nfunction animateMove(element: HTMLElement, offsetY: number) {\n  element.style.transform = `translate3d(0, ${-offsetY}rem, 0)`;\n\n  requestMutation(() => {\n    element.classList.add(styles.animateTransform);\n    element.style.transform = '';\n  });\n}\n\nfunction cleanupAnimation(element: HTMLElement) {\n  setTimeout(() => {\n    requestMutation(() => {\n      element.classList.remove(styles.animateOpacity, styles.animateTransform);\n      element.style.opacity = '';\n      element.style.transform = '';\n    });\n  }, ANIMATION_DURATION + ANIMATION_END_DELAY);\n}\n","import type { TeactNode } from '../../../../lib/teact/teact';\nimport React from '../../../../lib/teact/teact';\n\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useActivityListEntry from './hooks/useActivityListEntry';\n\nimport styles from './Activities.module.scss';\n\ninterface OwnProps {\n  /** In rem */\n  topOffset: number;\n  withAnimation: boolean;\n  children?: TeactNode;\n}\n\nfunction ActivityListItem({\n  topOffset,\n  withAnimation,\n  children,\n}: OwnProps) {\n  const { ref: animationRef } = useActivityListEntry(withAnimation, topOffset);\n\n  return (\n    <div\n      ref={animationRef}\n      style={`top: ${topOffset}rem`}\n      className={buildClassName('ListItem', styles.listItem)}\n    >\n      {children}\n    </div>\n  );\n}\n\nexport default ActivityListItem;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"k3PjQTgC\",\"panel\":\"ZX_ET6v1\",\"emptyList\":\"y3OrMGkQ\",\"text\":\"W7PJUQAi\",\"header\":\"vhx2gdHr\",\"description\":\"iQxbUd1C\"};","import React, { memo } from '../../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX, ANIMATED_STICKER_SMALL_SIZE_PX } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\n\nimport styles from './NewWalletGreeting.module.scss';\n\ninterface Props {\n  isActive?: boolean;\n  isMutlichainAccount?: boolean;\n  mode: 'panel' | 'emptyList';\n}\n\nfunction NewWalletGreeting({ isActive, isMutlichainAccount, mode }: Props) {\n  const lang = useLang();\n\n  return (\n    <div className={buildClassName(styles.container, styles[mode])}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.hello}\n        previewUrl={ANIMATED_STICKERS_PATHS.helloPreview}\n        nonInteractive\n        noLoop={false}\n        size={mode === 'emptyList' ? ANIMATED_STICKER_BIG_SIZE_PX : ANIMATED_STICKER_SMALL_SIZE_PX}\n      />\n\n      <div className={styles.text}>\n        <p className={styles.header}>\n          {lang(isMutlichainAccount\n            ? 'You have just created a new multichain wallet'\n            : 'You have just created a new wallet')}\n        </p>\n        <p className={styles.description}>\n          {lang(\n            isMutlichainAccount\n              ? 'Now you can transfer tokens from your TON and TRON wallets.'\n              : 'You can now transfer your tokens from another wallet or exchange.',\n          )}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(NewWalletGreeting);\n","import type { TeactNode } from '../../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useLayoutEffect, useMemo, useRef,\n} from '../../../../lib/teact/teact';\nimport { setExtraStyles } from '../../../../lib/teact/teact-dom';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiActivity,\n  ApiBaseCurrency,\n  ApiNft,\n  ApiStakingState,\n  ApiSwapAsset,\n  ApiTokenWithPrice,\n} from '../../../../api/types';\nimport type { Account, SavedAddress, Theme } from '../../../../global/types';\nimport { ContentTab } from '../../../../global/types';\n\nimport {\n  ANIMATED_STICKER_BIG_SIZE_PX,\n  LANDSCAPE_MIN_ASSETS_TAB_VIEW,\n  PORTRAIT_MIN_ASSETS_TAB_VIEW,\n} from '../../../../config';\nimport { forceMeasure } from '../../../../lib/fasterdom/stricterdom';\nimport { getIsTinyOrScamTransaction } from '../../../../global/helpers';\nimport {\n  selectAccounts,\n  selectAccountStakingStatesBySlug,\n  selectActivityHistoryIds,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsHistoryEndReached,\n  selectIsMultichainAccount,\n} from '../../../../global/selectors';\nimport { getActivityIdReplacements } from '../../../../util/activities';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatHumanDay, getDayStartAt } from '../../../../util/dateFormat';\nimport generateUniqueId from '../../../../util/generateUniqueId';\nimport { compact, swapKeysAndValues } from '../../../../util/iteratees';\nimport { getIsTransactionWithPoisoning } from '../../../../util/poisoningHash';\nimport { REM } from '../../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\nimport {\n  getScrollableContainer,\n  getScrollContainerClosestSelector,\n} from '../../helpers/scrollableContainer';\n\nimport useAppTheme from '../../../../hooks/useAppTheme';\nimport { getIsPortrait, useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useInfiniteScroll from '../../../../hooks/useInfiniteScroll';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useLayoutEffectWithPrevDeps from '../../../../hooks/useLayoutEffectWithPrevDeps';\nimport useSyncEffectWithPrevDeps from '../../../../hooks/useSyncEffectWithPrevDeps';\nimport useUpdateIndicator from '../../../../hooks/useUpdateIndicator';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport InfiniteScroll from '../../../ui/InfiniteScroll';\nimport LoadingDots from '../../../ui/LoadingDots';\nimport Spinner from '../../../ui/Spinner';\nimport Transition from '../../../ui/Transition';\nimport Activity, { getActivityHeight } from './Activity';\nimport ActivityListItem from './ActivityListItem';\nimport NewWalletGreeting from './NewWalletGreeting';\n\nimport styles from './Activities.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  totalTokensAmount: number;\n  onScroll?: (e: React.UIEvent<HTMLDivElement>) => void;\n}\n\ntype StateProps = {\n  currentAccountId: string;\n  slug?: string;\n  isMultichainAccount: boolean;\n  areTinyTransfersHidden?: boolean;\n  byId?: Record<string, ApiActivity>;\n  allActivityIds?: string[];\n  tokensBySlug: Record<string, ApiTokenWithPrice>;\n  swapTokensBySlug?: Record<string, ApiSwapAsset>;\n  currentActivityId?: string;\n  savedAddresses?: SavedAddress[];\n  isHistoryEndReached: boolean;\n  alwaysShownSlugs?: string[];\n  theme: Theme;\n  baseCurrency?: ApiBaseCurrency;\n  isSensitiveDataHidden?: true;\n  stakingStateBySlug: Record<string, ApiStakingState>;\n  nftsByAddress?: Record<string, ApiNft>;\n  accounts?: Record<string, Account>;\n};\n\ninterface ItemPosition {\n  /** In rem */\n  top: number;\n  /** In rem */\n  height: number;\n}\n\nconst FURTHER_SLICE = 30;\n\nconst LIST_TOP_PADDING = 0.5; // rem\nconst DATE_HEADER_HEIGHT = 2.125; // rem\n\n// After this threshold, the animations of adding new activities (controlled by `useActivityOrderDiff`) won't be visible\n// to the user, so the animation is disabled to improve the performance. An important part that makes the additions\n// invisible is the `usePreventScrolledListShift` hook.\nconst SCROLL_THRESHOLD = (LIST_TOP_PADDING + DATE_HEADER_HEIGHT) * REM;\n\nconst DATE_ID_PREFIX = 'date:';\n\nconst EMPTY_ARRAY = Object.freeze([]);\nconst EMPTY_DICTIONARY = Object.freeze({});\n\nfunction Activities({\n  isActive,\n  currentAccountId,\n  isMultichainAccount,\n  slug,\n  byId,\n  allActivityIds,\n  tokensBySlug,\n  swapTokensBySlug,\n  areTinyTransfersHidden,\n  currentActivityId,\n  savedAddresses,\n  isHistoryEndReached,\n  alwaysShownSlugs,\n  theme,\n  baseCurrency,\n  isSensitiveDataHidden,\n  stakingStateBySlug,\n  nftsByAddress,\n  accounts,\n  onScroll,\n}: Omit<OwnProps, 'totalTokensAmount'> & StateProps) {\n  const { fetchPastActivities, showActivityInfo } = getActions();\n\n  const lang = useLang();\n  const { isLandscape, isPortrait } = useDeviceScreen();\n\n  const containerRef = useRef<HTMLDivElement>();\n  const isUpdating = useUpdateIndicator('activitiesUpdateStartedAt');\n\n  const appTheme = useAppTheme(theme);\n  const hasUserScrolledRef = useRef(false);\n\n  // As with `allActivityIds`, `undefined` means \"not loaded yet\" and `[]` means \"no activities\"\n  const listItemIds = useMemo(() => {\n    const activityIds = filterActivityIds(\n      allActivityIds ?? EMPTY_ARRAY,\n      byId ?? EMPTY_DICTIONARY,\n      slug,\n      tokensBySlug,\n      areTinyTransfersHidden,\n      alwaysShownSlugs,\n    );\n\n    if (!activityIds.length && !isHistoryEndReached) {\n      // When all the activities are hidden, the further activities are being loaded, so the spinner should be shown.\n      return undefined;\n    }\n\n    return addDatesToActivityIds(activityIds, byId);\n  }, [areTinyTransfersHidden, byId, alwaysShownSlugs, allActivityIds, slug, tokensBySlug, isHistoryEndReached]);\n\n  const firstListItemId = listItemIds?.[0];\n\n  const loadMore = useLastCallback(() => {\n    fetchPastActivities({ slug, shouldLoadWithBudget: true });\n  });\n\n  const [viewportIds, getMore, resetScroll] = useInfiniteScroll(\n    loadMore, listItemIds, undefined, FURTHER_SLICE, slug, isActive,\n  );\n\n  const getListItemKey = useListItemKeys(viewportIds ?? EMPTY_ARRAY, byId ?? EMPTY_DICTIONARY);\n\n  const shouldUseAnimations = Boolean(isActive && !hasUserScrolledRef.current);\n\n  const itemPositionById = useMemo(() => {\n    const itemPositionById: Record<string, ItemPosition> = {};\n    let top = 0;\n\n    listItemIds?.forEach((itemId, index) => {\n      const height = itemId.startsWith(DATE_ID_PREFIX)\n        ? DATE_HEADER_HEIGHT + (index === 0 ? LIST_TOP_PADDING : 0)\n        : getActivityHeight(byId![itemId]);\n\n      itemPositionById[itemId] = { top, height };\n      top += height;\n    });\n\n    return itemPositionById;\n  }, [byId, listItemIds]);\n\n  const currentContainerHeight = useMemo(\n    () => {\n      if (!viewportIds?.length) return 0;\n\n      const lastViewportId = viewportIds[viewportIds.length - 1];\n      const activityOffset = itemPositionById[lastViewportId];\n\n      return activityOffset ? activityOffset.top + activityOffset.height : 0;\n    },\n    [itemPositionById, viewportIds],\n  );\n\n  usePreventScrolledListShift(\n    viewportIds ?? EMPTY_ARRAY,\n    itemPositionById,\n    isPortrait,\n    containerRef,\n    hasUserScrolledRef,\n  );\n\n  useLayoutEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    setExtraStyles(container, { height: isLandscape ? '' : `${currentContainerHeight}rem` });\n  }, [isLandscape, currentContainerHeight]);\n\n  // Requests the history when the UI shows a spinner instead of the list.\n  // Keeps requesting the history when all the currently loaded activities are hidden.\n  useEffect(() => {\n    if (!listItemIds?.length) {\n      loadMore();\n    }\n  }, [slug, allActivityIds, listItemIds, loadMore]);\n\n  // Reset scroll and scroll tracking when the tab becomes inactive\n  useEffect(() => {\n    if (!isActive && !isLandscape) {\n      resetScroll?.();\n      hasUserScrolledRef.current = false;\n    }\n  }, [isActive, isLandscape, resetScroll]);\n\n  const handleScroll = useLastCallback((e: React.UIEvent<HTMLDivElement>) => {\n    const scrollTop = (e.target as HTMLDivElement).scrollTop;\n\n    hasUserScrolledRef.current = scrollTop >= SCROLL_THRESHOLD;\n\n    onScroll?.(e);\n  });\n\n  const handleActivityClick = useLastCallback((id: string) => {\n    showActivityInfo({ id });\n  });\n\n  if (!currentAccountId) {\n    return undefined;\n  }\n\n  function renderDate(dateValue: number, isFirst?: boolean) {\n    const formattedDate = formatHumanDay(lang, dateValue);\n    const date = <div className={styles.date}>{formattedDate}</div>;\n\n    if (!isFirst) {\n      return date;\n    }\n\n    const dateWithLoader = (\n      <div className={buildClassName(styles.date, styles.date_withLoadingDots)}>\n        {formattedDate}\n        <LoadingDots isActive isDoubled className={styles.loadingDots} />\n      </div>\n    );\n\n    return (\n      <Transition\n        name=\"semiFade\"\n        activeKey={isUpdating ? 1 : 0}\n        className={styles.dateContainer}\n        slideClassName={styles.dateSlide}\n      >\n        {isUpdating ? dateWithLoader : date}\n      </Transition>\n    );\n  }\n\n  function renderHistory() {\n    if (!viewportIds) return undefined;\n\n    return viewportIds.map((itemId, index) => {\n      const topOffset = itemPositionById[itemId]?.top ?? 0;\n      let itemContent: TeactNode;\n\n      if (itemId.startsWith(DATE_ID_PREFIX)) {\n        itemContent = renderDate(\n          Number(itemId.slice(DATE_ID_PREFIX.length)),\n          itemId === firstListItemId,\n        );\n      } else {\n        const activity = byId?.[itemId];\n        if (!activity) return undefined;\n\n        const isActivityActive = activity.id === currentActivityId;\n        const isLastInDay = index === viewportIds.length - 1 || viewportIds[index + 1].startsWith(DATE_ID_PREFIX);\n\n        itemContent = (\n          <Activity\n            activity={activity}\n            isLast={isLastInDay}\n            isActive={isActivityActive}\n            tokensBySlug={tokensBySlug}\n            swapTokensBySlug={swapTokensBySlug}\n            appTheme={appTheme}\n            isSensitiveDataHidden={isSensitiveDataHidden}\n            nftsByAddress={nftsByAddress}\n            currentAccountId={currentAccountId}\n            stakingStateBySlug={stakingStateBySlug}\n            savedAddresses={savedAddresses}\n            withChainIcon={isMultichainAccount}\n            accounts={accounts}\n            baseCurrency={baseCurrency}\n            onClick={handleActivityClick}\n          />\n        );\n      }\n\n      return (\n        <ActivityListItem key={getListItemKey(itemId)} topOffset={topOffset} withAnimation={shouldUseAnimations}>\n          {itemContent}\n        </ActivityListItem>\n      );\n    });\n  }\n\n  if (listItemIds === undefined) {\n    return (\n      <div className={buildClassName(styles.emptyList, styles.emptyListLoading)}>\n        <Spinner />\n      </div>\n    );\n  }\n\n  if (!listItemIds.length) {\n    if (!slug) {\n      return (\n        <div className={buildClassName(isLandscape && styles.greeting)}>\n          <NewWalletGreeting\n            isActive={isActive}\n            isMutlichainAccount={isMultichainAccount}\n            mode={isLandscape ? 'emptyList' : 'panel'}\n          />\n        </div>\n      );\n    } else {\n      return (\n        <div className={styles.emptyList}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n            previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n            size={ANIMATED_STICKER_BIG_SIZE_PX}\n            className={styles.sticker}\n            noLoop={false}\n            nonInteractive\n          />\n          <p className={styles.emptyListTitle}>{lang('No Activity')}</p>\n        </div>\n      );\n    }\n  }\n\n  return (\n    <InfiniteScroll\n      ref={containerRef}\n      className={buildClassName('custom-scroll', styles.listGroup)}\n      scrollContainerClosest={getScrollContainerClosestSelector(isActive, isPortrait)}\n      items={viewportIds}\n      preloadBackwards={FURTHER_SLICE}\n      withAbsolutePositioning\n      maxHeight={`${currentContainerHeight}rem`}\n      onLoadMore={getMore}\n      onScroll={handleScroll}\n    >\n      {renderHistory()}\n    </InfiniteScroll>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountId = global.currentAccountId!;\n      const accountState = selectCurrentAccountState(global);\n      const accountSettings = selectCurrentAccountSettings(global);\n      const slug = accountState?.currentTokenSlug;\n      const stakingStateBySlug = selectAccountStakingStatesBySlug(global, accountId);\n      const { byId } = accountState?.activities ?? {};\n      const { byAddress } = accountState?.nfts || {};\n      const accounts = selectAccounts(global);\n      const isHistoryEndReached = selectIsHistoryEndReached(global, accountId, slug);\n      const allActivityIds = selectActivityHistoryIds(global, accountId, slug);\n\n      return {\n        isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n        currentAccountId: accountId,\n        slug,\n        byId,\n        allActivityIds,\n        tokensBySlug: global.tokenInfo.bySlug,\n        swapTokensBySlug: global.swapTokenInfo?.bySlug,\n        areTinyTransfersHidden: global.settings.areTinyTransfersHidden,\n        savedAddresses: accountState?.savedAddresses,\n        isHistoryEndReached,\n        currentActivityId: accountState?.currentActivityId,\n        alwaysShownSlugs: accountSettings?.alwaysShownSlugs,\n        theme: global.settings.theme,\n        baseCurrency: global.settings.baseCurrency,\n        stakingStateBySlug,\n        isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n        nftsByAddress: byAddress,\n        accounts,\n      };\n    },\n    (global, { totalTokensAmount }, stickToFirst) => {\n      const accountState = selectCurrentAccountState(global);\n      const shouldShowSeparateAssetsPanel = totalTokensAmount <= (\n        getIsPortrait() ? PORTRAIT_MIN_ASSETS_TAB_VIEW : LANDSCAPE_MIN_ASSETS_TAB_VIEW\n      );\n\n      return stickToFirst((\n        accountState?.activeContentTab === ContentTab.Activity\n        || (accountState?.activeContentTab === ContentTab.Assets && shouldShowSeparateAssetsPanel)\n      ) && global.currentAccountId);\n    },\n  )(Activities),\n);\n\nfunction filterActivityIds(\n  allActivityIds: readonly string[],\n  byId: Record<string, ApiActivity>,\n  slug: string | undefined,\n  tokensBySlug: Record<string, ApiTokenWithPrice>,\n  areTinyTransfersHidden?: boolean,\n  alwaysShownSlugs?: string[],\n) {\n  return allActivityIds.filter((id) => {\n    const activity = byId?.[id];\n    if (!activity) return false;\n\n    if (activity?.shouldHide) return false;\n\n    if (activity?.kind === 'swap') {\n      return !slug || activity.from === slug || activity.to === slug;\n    } else {\n      return activity?.slug\n        && (!slug || activity.slug === slug)\n        && (\n          !areTinyTransfersHidden\n          || (slug && tokensBySlug[activity.slug]?.priceUsd === 0)\n          || !getIsTinyOrScamTransaction(activity, tokensBySlug[activity.slug])\n          || alwaysShownSlugs?.includes(activity.slug)\n        )\n        && !getIsTransactionWithPoisoning(activity);\n    }\n  });\n}\n\nfunction addDatesToActivityIds(activityIds: readonly string[], byId: Record<string, ApiActivity> = {}) {\n  let lastActivityDayStart = Infinity;\n  const listItemIds: string[] = [];\n\n  // Mix-in the date headers to the list of activity ids\n  for (const activityId of activityIds) {\n    const activityDayStart = getDayStartAt(byId[activityId].timestamp);\n\n    // The clause is not `activityDayStart !== lastActivityDayStart`, because the days can go backwards, which will\n    // cause duplicated date Teact keys. The days can go backwards because the pending activities are on the top\n    // regardless of their timestamp.\n    const isNewDay = activityDayStart < lastActivityDayStart;\n\n    if (isNewDay) {\n      lastActivityDayStart = activityDayStart;\n      listItemIds.push(`${DATE_ID_PREFIX}${activityDayStart}`);\n    }\n    listItemIds.push(activityId);\n  }\n\n  return listItemIds;\n}\n\n/**\n * Pending activity ids may change. If the ids are used as the list keys, excessive blinking animations occur.\n * This hook creates stable keys for the list items, which prevents the excessive animations.\n */\nfunction useListItemKeys(viewportIds: readonly string[], activityById: Record<string, ApiActivity>) {\n  const keyByIdRef = useRef<Record<string, string>>();\n  keyByIdRef.current ??= {};\n\n  useSyncEffectWithPrevDeps(([oldViewportIds = [], oldActivityById = {}]) => {\n    const keyById = keyByIdRef.current!;\n    const oldActivities = compact(oldViewportIds.map((id) => oldActivityById[id]));\n    const newActivities = compact(viewportIds.map((id) => activityById[id]));\n\n    // Transfer the keys from the old activities to the new activities. Besides the obvious goal, `swapKeysAndValues`\n    // ensures that the `idReplacements` values are unique, which results into unique output keys.\n    const idReplacements = swapKeysAndValues(getActivityIdReplacements(oldActivities, newActivities));\n    for (const { id: newActivityId } of newActivities) {\n      const oldActivityId = idReplacements[newActivityId];\n      keyById[newActivityId] = (oldActivityId && keyById[oldActivityId]) ?? generateUniqueId();\n    }\n\n    // Clean the memory\n    const newActivityIds = new Set(viewportIds);\n    for (const itemId of Object.keys(keyById)) {\n      if (!newActivityIds.has(itemId)) {\n        delete keyById[itemId];\n      }\n    }\n  }, [viewportIds, activityById]);\n\n  return useLastCallback((itemId: string) => keyByIdRef.current?.[itemId] ?? itemId);\n}\n\n/**\n * In order to make the list look stationary after it has been scrolled, this hook compensates the scroll position when\n * new items are added and user scrolled content.\n */\nfunction usePreventScrolledListShift(\n  viewportIds: readonly string[],\n  itemPositionById: Record<string, ItemPosition>,\n  isPortrait: boolean,\n  containerRef: React.RefObject<HTMLDivElement | undefined>,\n  hasUserScrolledRef: React.RefObject<boolean>,\n) {\n  useLayoutEffectWithPrevDeps(([prevItemPositionById]) => {\n    const container = getScrollableContainer(containerRef.current, isPortrait);\n    if (!hasUserScrolledRef.current || !container || !prevItemPositionById || !viewportIds.length) return;\n\n    const anchorId = viewportIds[Math.floor(viewportIds.length / 2)];\n    const prevTop = prevItemPositionById[anchorId]?.top;\n    const nextTop = itemPositionById[anchorId]?.top;\n\n    if (prevTop === undefined || nextTop === undefined || prevTop === nextTop) return;\n\n    forceMeasure(() => {\n      container.scrollBy({\n        top: (nextTop - prevTop) * REM,\n        behavior: 'instant',\n      });\n    });\n  }, [itemPositionById, viewportIds, containerRef, hasUserScrolledRef, isPortrait]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"y_zyRtG4\",\"button\":\"mDOHosrF\",\"vestingIcon\":\"vKLHR9fe\",\"percent\":\"JLnToFoo\",\"readyToClaim\":\"T4MfMcFP\",\"active\":\"gcp9pSal\",\"iconArrow\":\"zzgzZR90\",\"iconChevron\":\"WLJ2jON8\",\"primaryCell\":\"MWjR4yCQ\",\"secondaryCell\":\"zBTGbg76\",\"subtitle\":\"v9EXZKHv\",\"amountChange\":\"fvwKm83g\",\"name\":\"IJaceq0j\",\"name_text\":\"JMnoFXEt\",\"nameText\":\"JMnoFXEt\",\"secondaryValue\":\"yB7hzLme\",\"secondaryValue_staked\":\"Fy56cR9i\",\"secondaryValueStaked\":\"Fy56cR9i\",\"change\":\"ka5acfM4\",\"change_up\":\"VR0vGdiX\",\"changeUp\":\"VR0vGdiX\",\"change_down\":\"osD2vwqW\",\"changeDown\":\"osD2vwqW\",\"dot\":\"zJntRecr\",\"label\":\"jN5w9AWO\",\"apyLabel\":\"xWg00BgF\",\"apyLabel_staked\":\"UeDUf_9U\",\"apyLabelStaked\":\"UeDUf_9U\",\"chainLabel\":\"B9HfGrEc\",\"tokenIcon\":\"BcTpLjhN\",\"secondaryValue_vesting\":\"rE0JGav4\",\"secondaryValueVesting\":\"rE0JGav4\",\"secondaryValue_vestingUnfreeze\":\"LHgVJV2I\",\"secondaryValueVestingUnfreeze\":\"LHgVJV2I\",\"wrapperVisible\":\"n7iUgDe0\",\"menu\":\"ilWFIqJF\"};","import React, { type ElementRef, memo, useMemo, useRef } from '../../../../lib/teact/teact';\n\nimport type { ApiBaseCurrency, ApiStakingState, ApiYieldType } from '../../../../api/types';\nimport type { AppTheme, UserToken } from '../../../../global/types';\nimport type { LangFn } from '../../../../hooks/useLang';\nimport type { Layout } from '../../../../hooks/useMenuPosition';\nimport type { StakingStateStatus } from '../../../../util/staking';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX, IS_CORE_WALLET, TOKEN_WITH_LABEL, TON_USDE } from '../../../../config';\nimport { Big } from '../../../../lib/big.js';\nimport buildClassName from '../../../../util/buildClassName';\nimport { calcChangeValue } from '../../../../util/calcChangeValue';\nimport { DAY, formatFullDay } from '../../../../util/dateFormat';\nimport { toDecimal } from '../../../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../../../util/formatNumber';\nimport getPseudoRandomNumber from '../../../../util/getPseudoRandomNumber';\nimport { round } from '../../../../util/round';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\nimport useTokenContextMenu from './hooks/useTokenContextMenu';\n\nimport TokenIcon from '../../../common/TokenIcon';\nimport AnimatedCounter from '../../../ui/AnimatedCounter';\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Button from '../../../ui/Button';\nimport DropdownMenu from '../../../ui/DropdownMenu';\nimport MenuBackdrop from '../../../ui/MenuBackdrop';\nimport SensitiveData from '../../../ui/SensitiveData';\n\nimport styles from './Token.module.scss';\n\ninterface OwnProps {\n  ref?: ElementRef<HTMLButtonElement>;\n  token: UserToken;\n  // Undefined means that it's not a staked token\n  stakingStatus?: StakingStateStatus;\n  stakingState?: ApiStakingState;\n  vestingStatus?: 'frozen' | 'readyToUnfreeze';\n  unfreezeEndDate?: number;\n  amount?: string;\n  isInvestorView?: boolean;\n  classNames?: string;\n  style?: string;\n  annualYield?: number;\n  yieldType?: ApiYieldType;\n  isActive?: boolean;\n  baseCurrency?: ApiBaseCurrency;\n  appTheme: AppTheme;\n  withChainIcon?: boolean;\n  withContextMenu?: boolean;\n  isSensitiveDataHidden?: true;\n  isSwapDisabled?: boolean;\n  isStakingAvailable?: boolean;\n  isViewMode?: boolean;\n  onClick: (slug: string) => void;\n}\n\nconst UNFREEZE_DANGER_DURATION = 7 * DAY;\nconst CONTEXT_MENU_VERTICAL_SHIFT_PX = 4;\nexport const OPEN_CONTEXT_MENU_CLASS_NAME = 'open-context-menu';\n\nfunction Token({\n  ref,\n  token,\n  amount,\n  stakingStatus,\n  stakingState,\n  vestingStatus,\n  unfreezeEndDate,\n  annualYield,\n  isInvestorView,\n  classNames,\n  style,\n  appTheme,\n  isActive,\n  baseCurrency,\n  withChainIcon,\n  withContextMenu,\n  isSensitiveDataHidden,\n  isStakingAvailable,\n  isSwapDisabled,\n  isViewMode,\n  yieldType,\n  onClick,\n}: OwnProps) {\n  const {\n    symbol,\n    slug,\n    amount: tokenAmount,\n    price,\n    change24h: change,\n    decimals,\n  } = token;\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  let buttonRef = useRef<HTMLButtonElement>();\n  const menuRef = useRef<HTMLDivElement>();\n  const isVesting = Boolean(vestingStatus?.length);\n  const renderedAmount = amount ?? toDecimal(tokenAmount, decimals, true);\n  const value = Big(renderedAmount).mul(price).toString();\n  const changeClassName = change > 0 ? styles.change_up : change < 0 ? styles.change_down : undefined;\n  const changeValue = Math.abs(round(calcChangeValue(Number(value), change), 4));\n  const changePercent = Math.abs(round(change * 100, 2));\n  const withYield = !IS_CORE_WALLET && annualYield !== undefined;\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n  const withLabel = Boolean(!isVesting && TOKEN_WITH_LABEL[slug]);\n  const stakingId = stakingState?.id;\n  const name = getTokenName(lang, token, !!stakingId);\n  const amountCols = useMemo(() => getPseudoRandomNumber(4, 12, name), [name]);\n  const fiatAmountCols = 5 + (amountCols % 6);\n  if (ref) {\n    buttonRef = ref;\n  }\n\n  const {\n    shouldRender: shouldRenderYield,\n    ref: yieldRef,\n  } = useShowTransition<HTMLSpanElement>({\n    isOpen: withYield,\n    withShouldRender: true,\n  });\n\n  const handleClick = useLastCallback(() => {\n    onClick(stakingId ?? slug);\n  });\n\n  const getTriggerElement = useLastCallback(() => buttonRef.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback((): Layout => ({\n    withPortal: true,\n    doNotCoverTrigger: isPortrait,\n    // The shift is needed to prevent the mouse cursor from highlighting the first menu item\n    topShiftY: !isPortrait ? CONTEXT_MENU_VERTICAL_SHIFT_PX : undefined,\n    preferredPositionX: 'left',\n  }));\n\n  const {\n    isContextMenuOpen,\n    isContextMenuShown,\n    contextMenuAnchor,\n    items,\n    isBackdropRendered,\n    handleBeforeContextMenu,\n    handleContextMenu,\n    handleContextMenuClose,\n    handleContextMenuHide,\n    handleMenuItemSelect,\n  } = useTokenContextMenu(buttonRef, {\n    token,\n    isPortrait,\n    withContextMenu,\n    isStakingAvailable,\n    isSwapDisabled,\n    isViewMode,\n    stakingState,\n  });\n\n  function renderYield() {\n    const labelClassName = buildClassName(\n      styles.label,\n      styles.apyLabel,\n      stakingStatus && styles.apyLabel_staked,\n    );\n\n    return (\n      <span ref={yieldRef} className={labelClassName}>\n        {yieldType} {round(annualYield ?? 0, 2)}%\n      </span>\n    );\n  }\n\n  function renderChangeIcon() {\n    if (change === 0) {\n      return undefined;\n    }\n\n    return (\n      <i\n        className={buildClassName(styles.iconArrow, change > 0 ? 'icon-arrow-up' : 'icon-arrow-down')}\n        aria-hidden\n      />\n    );\n  }\n\n  function renderStakingIcon() {\n    if (stakingStatus === 'active') {\n      return (\n        <i\n          className={buildClassName('icon-percent', styles.percent)}\n          aria-hidden\n        />\n      );\n    }\n\n    if (stakingStatus === 'readyToClaim') {\n      return (\n        <i\n          className={buildClassName('icon-check-alt', styles.readyToClaim)}\n          aria-hidden\n        />\n      );\n    }\n\n    return (\n      <AnimatedIconWithPreview\n        play\n        size={ANIMATED_STICKER_TINY_ICON_PX}\n        className={styles.percent}\n        nonInteractive\n        noLoop={false}\n        tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockPurple}\n        previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockPurple}\n      />\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.button,\n    isActive && styles.active,\n    isContextMenuOpen && OPEN_CONTEXT_MENU_CLASS_NAME,\n  );\n\n  function renderInvestorView() {\n    return (\n      <Button\n        ref={buttonRef}\n        isSimple\n        className={fullClassName}\n        onMouseDown={handleBeforeContextMenu}\n        onContextMenu={handleContextMenu}\n        onClick={handleClick}\n      >\n        <TokenIcon\n          size=\"large\"\n          token={token}\n          withChainIcon={withChainIcon}\n          className={styles.tokenIcon}\n        >\n          <>\n            {stakingStatus && renderStakingIcon()}\n            {vestingStatus && (\n              <i\n                className={buildClassName(vestingStatus === 'frozen' ? 'icon-snow' : 'icon-fire', styles.vestingIcon)}\n                aria-hidden\n              />\n            )}\n          </>\n        </TokenIcon>\n        <div className={styles.primaryCell}>\n          <div className={styles.name}>\n            <span className={styles.nameText}>{name}</span>\n            {shouldRenderYield && renderYield()}\n            {withLabel && (\n              <span className={buildClassName(styles.label, styles.chainLabel)}>{TOKEN_WITH_LABEL[slug]}</span>\n            )}\n          </div>\n          <div className={styles.subtitle}>\n            <SensitiveData\n              isActive={isSensitiveDataHidden}\n              cols={fiatAmountCols}\n              rows={2}\n              cellSize={8}\n            >\n              <AnimatedCounter text={formatCurrency(renderedAmount, symbol)} />\n            </SensitiveData>\n            <i className={styles.dot} aria-hidden />\n            <AnimatedCounter text={formatCurrency(price, shortBaseSymbol, undefined, true)} />\n          </div>\n        </div>\n        <div className={styles.secondaryCell}>\n          <SensitiveData\n            isActive={isSensitiveDataHidden}\n            cols={amountCols}\n            rows={2}\n            cellSize={8}\n            align=\"right\"\n            className={buildClassName(\n              styles.secondaryValue,\n              stakingStatus && styles.secondaryValue_staked,\n              isVesting && styles.secondaryValue_vesting,\n              isVesting && vestingStatus === 'readyToUnfreeze' && styles.secondaryValue_vestingUnfreeze,\n            )}\n          >\n            <AnimatedCounter text={formatCurrency(value, shortBaseSymbol)} />\n          </SensitiveData>\n          {unfreezeEndDate ? (\n            <div\n              className={buildClassName(\n                styles.change,\n                (unfreezeEndDate - Date.now() < UNFREEZE_DANGER_DURATION) && styles.change_down,\n              )}\n            >\n              {lang('Unfreeze')}\n              {' '}\n              {lang('until %date%', { date: `${formatFullDay(lang.code!, unfreezeEndDate)}` })}\n            </div>\n          ) : (\n            <SensitiveData\n              isActive={isSensitiveDataHidden}\n              cols={fiatAmountCols}\n              rows={2}\n              cellSize={8}\n              align=\"right\"\n              className={buildClassName(styles.change, changeClassName)}\n            >\n              {renderChangeIcon()}<AnimatedCounter text={String(changePercent)} />%\n              <i className={styles.dot} aria-hidden />\n              <AnimatedCounter text={formatCurrency(changeValue, shortBaseSymbol, undefined, true)} />\n            </SensitiveData>\n          )}\n        </div>\n      </Button>\n    );\n  }\n\n  function renderDefaultView() {\n    const totalAmount = Big(renderedAmount).mul(price);\n    const canRenderYield = annualYield !== undefined;\n\n    return (\n      <Button\n        ref={buttonRef}\n        isSimple\n        className={fullClassName}\n        onMouseDown={handleBeforeContextMenu}\n        onContextMenu={handleContextMenu}\n        onClick={handleClick}\n      >\n        <TokenIcon\n          token={token}\n          size=\"large\"\n          withChainIcon={withChainIcon}\n          className={styles.tokenIcon}\n        >\n          <>\n            {stakingStatus && renderStakingIcon()}\n            {vestingStatus && (\n              <i\n                className={buildClassName(vestingStatus === 'frozen' ? 'icon-snow' : 'icon-fire', styles.vestingIcon)}\n                aria-hidden\n              />\n            )}\n          </>\n        </TokenIcon>\n        <div className={styles.primaryCell}>\n          <div className={styles.name}>\n            <span className={styles.nameText}>{name}</span>\n            {canRenderYield && renderYield()}\n            {withLabel && (\n              <span className={buildClassName(styles.label, styles.chainLabel)}>{TOKEN_WITH_LABEL[slug]}</span>\n            )}\n          </div>\n          <div className={styles.subtitle}>\n            <AnimatedCounter text={formatCurrency(price, shortBaseSymbol, undefined, true)} />\n            {!stakingStatus && (\n              <>\n                <i className={styles.dot} aria-hidden />\n                {unfreezeEndDate ? (\n                  <span className={(unfreezeEndDate - Date.now() < UNFREEZE_DANGER_DURATION) && styles.change_down}>\n                    {lang('Unfreeze')}\n                    {' '}\n                    {lang('until %date%', { date: `${formatFullDay(lang.code!, unfreezeEndDate)}` })}\n                  </span>\n                ) : (\n                  <span className={changeClassName}>\n                    {renderChangeIcon()}<AnimatedCounter text={String(changePercent)} />%\n                  </span>\n                )}\n              </>\n            )}\n          </div>\n        </div>\n        <div className={styles.secondaryCell}>\n          <SensitiveData\n            isActive={isSensitiveDataHidden}\n            cols={amountCols}\n            rows={2}\n            cellSize={8}\n            align=\"right\"\n            className={buildClassName(\n              styles.secondaryValue,\n              stakingStatus && styles.secondaryValue_staked,\n              isVesting && styles.secondaryValue_vesting,\n              isVesting && vestingStatus === 'readyToUnfreeze' && styles.secondaryValue_vestingUnfreeze,\n            )}\n          >\n            <AnimatedCounter text={formatCurrency(renderedAmount, symbol)} />\n          </SensitiveData>\n          <SensitiveData\n            isActive={isSensitiveDataHidden}\n            cols={fiatAmountCols}\n            rows={2}\n            cellSize={8}\n            align=\"right\"\n            className={styles.subtitle}\n          >\n            {totalAmount.gt(0) ? '' : ''}&thinsp;\n            <AnimatedCounter text={formatCurrency(totalAmount, shortBaseSymbol, undefined, true)} />\n          </SensitiveData>\n        </div>\n      </Button>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.container, classNames)} style={style}>\n      <MenuBackdrop\n        isMenuOpen={isBackdropRendered}\n        contentRef={buttonRef}\n        contentClassName={styles.wrapperVisible}\n      />\n      {isInvestorView ? renderInvestorView() : renderDefaultView()}\n      {withContextMenu && isContextMenuShown && (\n        <DropdownMenu\n          ref={menuRef}\n          withPortal\n          shouldTranslateOptions\n          isOpen={isContextMenuOpen}\n          items={items}\n          menuAnchor={contextMenuAnchor}\n          bubbleClassName={styles.menu}\n          fontIconClassName={styles.menuIcon}\n          getTriggerElement={getTriggerElement}\n          getRootElement={getRootElement}\n          getMenuElement={getMenuElement}\n          getLayout={getLayout}\n          onSelect={handleMenuItemSelect}\n          onClose={handleContextMenuClose}\n          onCloseAnimationEnd={handleContextMenuHide}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction getTokenName(lang: LangFn, token: UserToken, isStaking: boolean): string {\n  if (!isStaking) {\n    return token.name;\n  }\n\n  switch (token.slug) {\n    case TON_USDE.slug:\n      return lang('%token% Staking', { token: 'Ethena' })[0] as any;\n    default:\n      return lang('%token% Staking', { token: token.name })[0] as any;\n  }\n}\n\nexport default memo(Token);\n","import { type ElementRef, useMemo } from '../../../../../lib/teact/teact';\nimport { getActions } from '../../../../../global';\n\nimport type { ApiStakingState } from '../../../../../api/types';\nimport type { UserToken } from '../../../../../global/types';\nimport type { DropdownItem } from '../../../../ui/Dropdown';\nimport { ActiveTab, SettingsState } from '../../../../../global/types';\n\nimport { DEFAULT_SWAP_FIRST_TOKEN_SLUG, DEFAULT_SWAP_SECOND_TOKEN_SLUG } from '../../../../../config';\nimport { vibrate } from '../../../../../util/haptics';\nimport { compact } from '../../../../../util/iteratees';\nimport { getStakingStateStatus } from '../../../../../util/staking';\nimport { getIsServiceToken } from '../../../../../util/tokens';\n\nimport useContextMenuHandlers from '../../../../../hooks/useContextMenuHandlers';\nimport useLastCallback from '../../../../../hooks/useLastCallback';\n\nexport type MenuHandler = 'add' | 'send' | 'swap' | 'stake' | 'hide' | 'settings'\n  | 'unstake' | 'stakeMore' | 'claimRewards';\n\nfunction useTokenContextMenu(ref: ElementRef<HTMLButtonElement>, options: {\n  isPortrait?: boolean;\n  withContextMenu?: boolean;\n  token: UserToken;\n  isSwapDisabled?: boolean;\n  isStakingAvailable?: boolean;\n  isViewMode?: boolean;\n  stakingState?: ApiStakingState;\n}) {\n  const {\n    openReceiveModal,\n    startTransfer,\n    startSwap,\n    startStaking,\n    openSettingsWithState,\n    toggleTokenVisibility,\n    setLandscapeActionsActiveTabIndex,\n    setReceiveActiveTab,\n    startUnstaking,\n    startStakingClaim,\n  } = getActions();\n\n  const {\n    token,\n    isPortrait,\n    withContextMenu,\n    isStakingAvailable,\n    isSwapDisabled,\n    isViewMode,\n    stakingState,\n  } = options;\n\n  const {\n    isContextMenuOpen, contextMenuAnchor,\n    handleBeforeContextMenu, handleContextMenu,\n    handleContextMenuClose, handleContextMenuHide,\n  } = useContextMenuHandlers({\n    elementRef: ref,\n    isMenuDisabled: !withContextMenu,\n  });\n  const isServiceToken = getIsServiceToken(token);\n  const stakingId = stakingState?.id;\n  const isContextMenuShown = contextMenuAnchor !== undefined;\n  const canBeClaimed = stakingState ? getStakingStateStatus(stakingState) === 'readyToClaim' : undefined;\n  const hasUnclaimedRewards = stakingState?.type === 'jetton'\n    ? !!stakingState.unclaimedRewards\n    : undefined;\n\n  const items: DropdownItem<MenuHandler>[] = useMemo(() => {\n    const mandatoryItems: (false | DropdownItem<MenuHandler>)[] = [\n      !stakingId && {\n        name: 'Hide',\n        fontIcon: 'eye-closed',\n        value: 'hide',\n      } satisfies DropdownItem<MenuHandler>, {\n        name: 'Manage Tokens',\n        fontIcon: 'menu-params',\n        withDelimiter: !(isViewMode && stakingId),\n        value: 'settings',\n      } satisfies DropdownItem<MenuHandler>,\n    ];\n\n    if (isViewMode) {\n      return compact(mandatoryItems);\n    }\n\n    const result: (false | undefined | DropdownItem<MenuHandler>)[] = stakingId\n      ? [(stakingState?.type !== 'ethena' || !canBeClaimed) && {\n        name: stakingState?.type === 'ethena' ? 'Request Unstaking' : 'Unstake',\n        fontIcon: 'menu-send',\n        value: 'unstake',\n      } satisfies DropdownItem<MenuHandler>, {\n        name: 'Stake More',\n        fontIcon: 'menu-receive',\n        value: 'stakeMore',\n      } satisfies DropdownItem<MenuHandler>,\n      (canBeClaimed || hasUnclaimedRewards) && {\n        name: 'Claim Rewards',\n        fontIcon: 'menu-gem',\n        value: 'claimRewards',\n      } satisfies DropdownItem<MenuHandler>]\n      : [!isServiceToken && {\n        name: 'Add / Buy',\n        fontIcon: 'menu-plus',\n        value: 'add',\n      } satisfies DropdownItem<MenuHandler>, {\n        name: 'Send',\n        fontIcon: 'menu-send',\n        value: 'send',\n      } satisfies DropdownItem<MenuHandler>,\n      !isSwapDisabled && {\n        name: 'Swap',\n        fontIcon: 'menu-swap',\n        value: 'swap',\n      } satisfies DropdownItem<MenuHandler>,\n      isStakingAvailable && {\n        name: 'Stake',\n        fontIcon: 'menu-percent',\n        value: 'stake',\n      } satisfies DropdownItem<MenuHandler>];\n\n    return compact(result.concat(mandatoryItems));\n  }, [\n    canBeClaimed, hasUnclaimedRewards, isStakingAvailable, isSwapDisabled, isViewMode,\n    stakingId, stakingState?.type, isServiceToken,\n  ]);\n\n  const handleMenuItemSelect = useLastCallback((value: MenuHandler) => {\n    void vibrate();\n\n    switch (value) {\n      case 'add':\n        if (isPortrait) {\n          openReceiveModal({ chain: token.chain });\n        } else {\n          setReceiveActiveTab({ chain: token.chain });\n          setLandscapeActionsActiveTabIndex({ index: ActiveTab.Receive });\n        }\n        break;\n\n      case 'send':\n        startTransfer({\n          isPortrait,\n          tokenSlug: token.slug,\n        });\n        break;\n\n      case 'swap':\n        startSwap({\n          tokenInSlug: token.slug,\n          tokenOutSlug: token.slug === DEFAULT_SWAP_FIRST_TOKEN_SLUG\n            ? DEFAULT_SWAP_SECOND_TOKEN_SLUG\n            : DEFAULT_SWAP_FIRST_TOKEN_SLUG,\n        });\n        break;\n\n      case 'stake':\n      case 'stakeMore':\n        startStaking({ tokenSlug: token.slug });\n        break;\n\n      case 'settings':\n        openSettingsWithState({ state: SettingsState.Assets });\n        break;\n\n      case 'hide':\n        toggleTokenVisibility({ slug: token.slug, shouldShow: false });\n        break;\n\n      case 'unstake':\n        startUnstaking({ stakingId: stakingId! });\n        break;\n\n      case 'claimRewards':\n        startStakingClaim({ stakingId: stakingId! });\n        break;\n    }\n\n    handleContextMenuClose();\n  });\n\n  return {\n    isContextMenuOpen,\n    isContextMenuShown,\n    contextMenuAnchor,\n    items,\n    isBackdropRendered: isPortrait && isContextMenuOpen,\n    handleBeforeContextMenu,\n    handleContextMenu,\n    handleContextMenuClose,\n    handleContextMenuHide,\n    handleMenuItemSelect,\n  };\n}\n\nexport default useTokenContextMenu;\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"EmokOdHM\",\"wrapperLoading\":\"QP7e6eAO\",\"emptyList\":\"XSZ9FBiN\",\"emptyListSeparate\":\"SHa5wmx_\",\"noTokens\":\"KNRqFMNX\",\"noTokens_text\":\"XwRCmsa8\",\"noTokensText\":\"XwRCmsa8\",\"noTokens_header\":\"qDi9Fjks\",\"noTokensHeader\":\"qDi9Fjks\",\"noTokens_description\":\"Lxfq6_5v\",\"noTokensDescription\":\"Lxfq6_5v\",\"openSettingsButton\":\"L2IEb5c3\"};","import React, { memo, useLayoutEffect, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { setExtraStyles } from '../../../../lib/teact/teact-dom';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiBaseCurrency, ApiStakingState, ApiTokenWithPrice, ApiVestingInfo } from '../../../../api/types';\nimport type { Theme, UserSwapToken, UserToken } from '../../../../global/types';\nimport { SettingsState } from '../../../../global/types';\n\nimport { ANIMATED_STICKER_SMALL_SIZE_PX, IS_CORE_WALLET } from '../../../../config';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsCurrentAccountViewMode,\n  selectIsMultichainAccount,\n  selectIsStakingDisabled,\n  selectIsSwapDisabled,\n  selectMycoin,\n  selectSwapTokens,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { toDecimal } from '../../../../util/decimals';\nimport { buildCollectionByKey } from '../../../../util/iteratees';\nimport { getFullStakingBalance, getIsActiveStakingState, getStakingStateStatus } from '../../../../util/staking';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\nimport { getScrollContainerClosestSelector } from '../../helpers/scrollableContainer';\n\nimport useAppTheme from '../../../../hooks/useAppTheme';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useInfiniteScroll from '../../../../hooks/useInfiniteScroll';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\nimport useVesting from '../../../../hooks/useVesting';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Button from '../../../ui/Button';\nimport InfiniteScroll from '../../../ui/InfiniteScroll';\nimport Spinner from '../../../ui/Spinner';\nimport Token from './Token';\n\nimport styles from './Assets.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  isSeparatePanel?: boolean;\n  onTokenClick: (slug: string) => void;\n  onStakedTokenClick: (stakingId?: string) => void;\n  onScroll?: (e: React.UIEvent<HTMLDivElement>) => void;\n};\n\ninterface StateProps {\n  tokens?: UserToken[];\n  swapTokens?: UserSwapToken[];\n  vesting?: ApiVestingInfo[];\n  isInvestorViewEnabled?: boolean;\n  currentTokenSlug?: string;\n  baseCurrency?: ApiBaseCurrency;\n  theme: Theme;\n  mycoin?: ApiTokenWithPrice;\n  isMultichainAccount: boolean;\n  isSensitiveDataHidden?: true;\n  states?: ApiStakingState[];\n  isViewMode?: boolean;\n  isSwapDisabled?: boolean;\n  isStakingDisabled?: boolean;\n}\n\nconst LIST_SLICE = 30;\nconst TOKEN_HEIGHT_REM = 4;\n\nfunction Assets({\n  isActive,\n  tokens,\n  swapTokens,\n  vesting,\n  isInvestorViewEnabled,\n  isSeparatePanel,\n  currentTokenSlug,\n  onTokenClick,\n  onStakedTokenClick,\n  baseCurrency,\n  mycoin,\n  isMultichainAccount,\n  isSensitiveDataHidden,\n  theme,\n  states,\n  isViewMode,\n  isSwapDisabled,\n  isStakingDisabled,\n  onScroll,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n  const { openSettingsWithState } = getActions();\n\n  const containerRef = useRef<HTMLDivElement>();\n  const renderedTokens = useCurrentOrPrev(tokens, true);\n  const renderedMycoin = useCurrentOrPrev(mycoin, true);\n\n  const userMycoin = useMemo(() => {\n    if (!renderedTokens || !renderedMycoin) return undefined;\n\n    return renderedTokens.find(({ slug }) => slug === renderedMycoin.slug);\n  }, [renderedMycoin, renderedTokens]);\n\n  const { isLandscape, isPortrait } = useDeviceScreen();\n  const appTheme = useAppTheme(theme);\n\n  const activeStates = useMemo(() => {\n    if (IS_CORE_WALLET) return [];\n\n    return states?.filter(getIsActiveStakingState) ?? [];\n  }, [states]);\n\n  const stakedTokens = useMemo(() => {\n    return activeStates.reduce((prevValue, state) => {\n      const token = tokens?.find(({ slug }) => slug === state.tokenSlug);\n      if (token) {\n        prevValue[state.tokenSlug] = { token, state };\n      }\n      return prevValue;\n    }, {} as Record<string, { token: UserToken; state: ApiStakingState }>);\n  }, [tokens, activeStates]);\n\n  const swapTokensBySlug = useMemo(() => {\n    return buildCollectionByKey<UserSwapToken>(swapTokens ?? [], 'slug');\n  }, [swapTokens]);\n\n  const {\n    shouldRender: shouldRenderStakedTokens,\n  } = useShowTransition({\n    isOpen: Boolean(Object.keys(stakedTokens).length),\n    withShouldRender: true,\n  });\n\n  const {\n    ref: vestingTokenRef,\n    shouldRender: shouldRenderVestingToken,\n    amount: vestingAmount,\n    vestingStatus,\n    unfreezeEndDate,\n    onVestingTokenClick,\n  } = useVesting({ vesting, userMycoin, isDisabled: IS_CORE_WALLET });\n\n  const tokenSlugs = useMemo(() => (\n    renderedTokens\n      ?.filter(({ isDisabled }) => !isDisabled)\n      .map(({ slug }) => slug)\n  ), [renderedTokens]);\n  const [viewportSlugs, getMore] = useInfiniteScroll(\n    undefined, tokenSlugs, undefined, undefined, undefined, isActive, isPortrait,\n  );\n  const viewportIndex = useMemo(() => {\n    if (!viewportSlugs) return -1;\n\n    let index = tokenSlugs!.indexOf(viewportSlugs[0]);\n    if (shouldRenderStakedTokens) {\n      index += Object.keys(stakedTokens).length;\n    }\n    if (shouldRenderVestingToken) {\n      index++;\n    }\n\n    return index;\n  }, [shouldRenderStakedTokens, shouldRenderVestingToken, tokenSlugs, viewportSlugs, stakedTokens]);\n  const tokensBySlug = useMemo(() => (\n    renderedTokens ? buildCollectionByKey(renderedTokens, 'slug') : undefined\n  ), [renderedTokens]);\n  const withAbsolutePositioning = tokenSlugs && tokenSlugs.length > LIST_SLICE;\n\n  const currentContainerHeight = useMemo(() => {\n    if (!withAbsolutePositioning || !viewportSlugs?.length || viewportIndex < 0) return undefined;\n\n    return (viewportIndex + viewportSlugs.length) * TOKEN_HEIGHT_REM;\n  }, [viewportIndex, viewportSlugs?.length, withAbsolutePositioning]);\n\n  useLayoutEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    setExtraStyles(container, {\n      height: currentContainerHeight && !isLandscape ? `${currentContainerHeight}rem` : '',\n    });\n  }, [isLandscape, currentContainerHeight]);\n\n  const handleOpenTokenSettings = useLastCallback(() => {\n    openSettingsWithState({ state: SettingsState.Assets });\n  });\n\n  const stateByTokenSlug = buildCollectionByKey(states ?? [], 'tokenSlug');\n\n  function renderVestingToken() {\n    return (\n      <Token\n        ref={vestingTokenRef}\n        key=\"vesting\"\n        token={userMycoin!}\n        vestingStatus={vestingStatus}\n        unfreezeEndDate={unfreezeEndDate}\n        amount={vestingAmount}\n        isInvestorView={isInvestorViewEnabled}\n        baseCurrency={baseCurrency}\n        appTheme={appTheme}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        onClick={onVestingTokenClick}\n      />\n    );\n  }\n\n  function renderStakedTokens() {\n    return Object.values(stakedTokens).map(({ state, token }) => {\n      const { id, annualYield, yieldType } = state;\n      const stakingStatus = getStakingStateStatus(state);\n      const stakingBalance = getFullStakingBalance(state);\n\n      return (\n        <Token\n          key={`staking-${id}`}\n          token={token}\n          stakingStatus={stakingStatus}\n          annualYield={annualYield}\n          yieldType={yieldType}\n          amount={toDecimal(stakingBalance, token.decimals)}\n          isInvestorView={isInvestorViewEnabled}\n          baseCurrency={baseCurrency}\n          appTheme={appTheme}\n          isSensitiveDataHidden={isSensitiveDataHidden}\n          withContextMenu\n          isViewMode={isViewMode}\n          isSwapDisabled={isSwapDisabled}\n          stakingState={state}\n          onClick={onStakedTokenClick}\n        />\n      );\n    });\n  }\n\n  function renderToken(token: UserToken, indexInViewport: number) {\n    const style = withAbsolutePositioning\n      ? `position: absolute; top: ${(viewportIndex + indexInViewport) * TOKEN_HEIGHT_REM}rem`\n      : undefined;\n\n    const {\n      annualYield,\n      yieldType,\n    } = (!(token.slug in stakedTokens) && stateByTokenSlug[token.slug]) || {};\n    const isStakingAvailable = Boolean(!isStakingDisabled && stateByTokenSlug[token.slug]);\n    const isSwapAvailable = Boolean(swapTokensBySlug[token.slug]);\n\n    return (\n      <Token\n        classNames=\"token-list-item\"\n        style={style}\n        key={token.slug}\n        token={token}\n        annualYield={annualYield}\n        yieldType={yieldType}\n        isInvestorView={isInvestorViewEnabled}\n        isActive={token.slug === currentTokenSlug}\n        baseCurrency={baseCurrency}\n        withChainIcon={isMultichainAccount}\n        appTheme={appTheme}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        withContextMenu\n        isViewMode={isViewMode}\n        isStakingAvailable={isStakingAvailable}\n        isSwapDisabled={isSwapDisabled || !isSwapAvailable}\n        onClick={onTokenClick}\n      />\n    );\n  }\n\n  const isEmpty = !shouldRenderVestingToken && !shouldRenderStakedTokens && !tokenSlugs?.length;\n\n  if (isEmpty) {\n    return (\n      <div className={styles.noTokens}>\n        <AnimatedIconWithPreview\n          tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n          previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n          size={ANIMATED_STICKER_SMALL_SIZE_PX}\n          nonInteractive\n          noLoop={false}\n          className={styles.sticker}\n        />\n        <div className={styles.noTokensText}>\n          <span className={styles.noTokensHeader}>{lang('No tokens yet')}</span>\n          <span className={styles.noTokensDescription}>{lang('$no_tokens_description')}</span>\n          <Button\n            onClick={handleOpenTokenSettings}\n            isPrimary\n            isSmall\n            className={styles.openSettingsButton}\n          >\n            {lang('Add Tokens')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <InfiniteScroll\n      ref={containerRef}\n      className={buildClassName(\n        styles.wrapper,\n        isSeparatePanel && !renderedTokens && styles.wrapperLoading,\n      )}\n      scrollContainerClosest={getScrollContainerClosestSelector(isActive, isPortrait)}\n      items={viewportSlugs}\n      itemSelector=\".token-list-item\"\n      withAbsolutePositioning={withAbsolutePositioning}\n      maxHeight={currentContainerHeight === undefined ? undefined : `${currentContainerHeight}rem`}\n      onLoadMore={getMore}\n      onScroll={onScroll}\n    >\n      {!renderedTokens && (\n        <div key=\"loading\" className={isSeparatePanel ? styles.emptyListSeparate : styles.emptyList}>\n          <Spinner />\n        </div>\n      )}\n      {shouldRenderVestingToken && renderVestingToken()}\n      {shouldRenderStakedTokens && renderStakedTokens()}\n      {viewportSlugs?.map((tokenSlug, i) => renderToken(tokensBySlug![tokenSlug], i))}\n    </InfiniteScroll>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountId = global.currentAccountId!;\n      const tokens = selectCurrentAccountTokens(global);\n      const swapTokens = selectSwapTokens(global);\n      const accountState = selectCurrentAccountState(global);\n      const { isInvestorViewEnabled } = global.settings;\n\n      const states = selectAccountStakingStates(global, accountId);\n      const isViewMode = selectIsCurrentAccountViewMode(global);\n\n      return {\n        tokens,\n        swapTokens,\n        vesting: accountState?.vesting?.info,\n        isInvestorViewEnabled,\n        currentTokenSlug: accountState?.currentTokenSlug,\n        baseCurrency: global.settings.baseCurrency,\n        mycoin: selectMycoin(global),\n        isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n        isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n        theme: global.settings.theme,\n        states,\n        isViewMode,\n        isSwapDisabled: selectIsSwapDisabled(global),\n        isStakingDisabled: selectIsStakingDisabled(global),\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Assets),\n);\n","import { useEffect, useMemo } from '../lib/teact/teact';\nimport { getActions } from '../global';\n\nimport type { ApiVestingInfo } from '../api/types';\nimport type { UserToken } from '../global/types';\n\nimport { calcVestingAmountByStatus } from '../components/main/helpers/calcVestingAmountByStatus';\nimport useLastCallback from './useLastCallback';\nimport useShowTransition from './useShowTransition';\n\nexport default function useVesting(\n  { vesting, userMycoin, isDisabled }: {\n    vesting?: ApiVestingInfo[];\n    userMycoin?: UserToken;\n    isDisabled?: boolean;\n  },\n) {\n  const { loadMycoin, openVestingModal } = getActions();\n\n  const hasVesting = !isDisabled && Boolean(vesting?.length);\n  const isMycoinLoaded = Boolean(userMycoin);\n\n  useEffect(() => {\n    if (isMycoinLoaded || !hasVesting) return;\n\n    loadMycoin();\n  }, [hasVesting, isMycoinLoaded]);\n\n  const amount = useMemo(() => {\n    if (!hasVesting) return undefined;\n\n    return calcVestingAmountByStatus(vesting, ['frozen', 'ready']);\n  }, [hasVesting, vesting]);\n\n  const unfreezeEndDate = useMemo(() => {\n    if (!hasVesting) return undefined;\n\n    for (const { parts } of vesting) {\n      for (const part of parts) {\n        if (part.status === 'ready') {\n          return new Date(part.timeEnd).getTime();\n        }\n      }\n    }\n\n    return undefined;\n  }, [hasVesting, vesting]);\n\n  const {\n    shouldRender,\n    ref,\n  } = useShowTransition<HTMLButtonElement>({\n    isOpen: Boolean(hasVesting && isMycoinLoaded && userMycoin && amount !== '0'),\n    withShouldRender: true,\n  });\n\n  const onVestingTokenClick = useLastCallback(() => {\n    openVestingModal();\n  });\n\n  return {\n    shouldRender,\n    ref,\n    amount,\n    vestingStatus: unfreezeEndDate ? 'readyToUnfreeze' as const : 'frozen' as const,\n    unfreezeEndDate,\n    onVestingTokenClick,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"aKYq5U9K\",\"backButton\":\"_XXYEoWI\",\"backIcon\":\"bCLB_xx7\",\"content\":\"ADFSqjjF\",\"title\":\"L1JCMSY4\",\"amount\":\"hsn7RdaK\",\"menuButton\":\"vvSB5YmR\",\"menu\":\"X205Pp2C\",\"menuItem\":\"S3NdyNSK\",\"menuItemDescription\":\"lRocmYkd\",\"sendAllButton\":\"PREqGxPp\",\"burnAllButton\":\"AsupPLFP\",\"buttonIcon\":\"clmFLMte\"};","import React, { memo, useEffect, useMemo, useRef, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { IAnchorPosition } from '../../../../global/types';\nimport type { DropdownItem } from '../../../ui/Dropdown';\n\nimport {\n  GETGEMS_BASE_MAINNET_URL,\n  GETGEMS_BASE_TESTNET_URL,\n  IS_CORE_WALLET,\n  NFT_FRAGMENT_COLLECTIONS,\n  TELEGRAM_GIFTS_SUPER_COLLECTION,\n  TON_DNS_COLLECTION,\n} from '../../../../config';\nimport { selectCurrentAccountState, selectIsCurrentAccountViewMode } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { getCountDaysToDate } from '../../../../util/dateFormat';\nimport { getDomainsExpirationDate } from '../../../../util/dns';\nimport { compact } from '../../../../util/iteratees';\nimport { openUrl } from '../../../../util/openUrl';\nimport { getExplorerName, getExplorerNftCollectionUrl } from '../../../../util/url';\n\nimport { getIsPortrait } from '../../../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport DropdownMenu from '../../../ui/DropdownMenu';\n\nimport styles from './NftCollectionHeader.module.scss';\n\ntype MenuHandler = 'sendAll' | 'fragment' | 'getgems' | 'tonExplorer' | 'hideAll' | 'burnAll' | 'selectAll'\n  | 'removeTab' | 'addTab' | 'renew';\n\ninterface StateProps {\n  currentCollectionAddress?: string;\n  nfts?: Record<string, ApiNft>;\n  isTestnet?: boolean;\n  isViewMode?: boolean;\n  collectionTabs?: string[];\n  dnsExpiration?: Record<string, number>;\n}\n\nfunction NftCollectionHeader({\n  currentCollectionAddress,\n  nfts,\n  isTestnet,\n  isViewMode,\n  collectionTabs,\n  dnsExpiration,\n}: StateProps) {\n  const {\n    closeNftCollection,\n    selectNfts,\n    startTransfer,\n    burnNfts,\n    openHideNftModal,\n    addCollectionTab,\n    removeCollectionTab,\n    openDomainRenewalModal,\n  } = getActions();\n\n  const lang = useLang();\n  const [menuAnchor, setMenuAnchor] = useState<IAnchorPosition>();\n  const isMenuOpen = Boolean(menuAnchor);\n  const ref = useRef<HTMLButtonElement>();\n  const menuRef = useRef<HTMLDivElement>();\n\n  const isTelegramGifts = currentCollectionAddress === TELEGRAM_GIFTS_SUPER_COLLECTION;\n\n  const collectionNfts = useMemo(() => {\n    if (!currentCollectionAddress || !nfts) {\n      return [];\n    }\n\n    return Object.values(nfts).filter((nft) => {\n      return (isTelegramGifts && nft.isTelegramGift) || nft.collectionAddress === currentCollectionAddress;\n    });\n  }, [currentCollectionAddress, isTelegramGifts, nfts]);\n\n  const dnsExpireInDays = useMemo(() => {\n    if (currentCollectionAddress !== TON_DNS_COLLECTION) return undefined;\n    const date = getDomainsExpirationDate(collectionNfts, undefined, dnsExpiration);\n\n    return date ? getCountDaysToDate(date) : undefined;\n  }, [collectionNfts, currentCollectionAddress, dnsExpiration]);\n\n  const collectionName = isTelegramGifts\n    ? lang('Telegram Gifts')\n    : collectionNfts[0].collectionName ?? lang('Unnamed Collection');\n\n  const menuItems: DropdownItem<MenuHandler>[] = useMemo(() => {\n    const isInTabs = collectionTabs?.includes(currentCollectionAddress!);\n\n    return compact([\n      !isViewMode && {\n        name: 'Send All',\n        value: 'sendAll',\n      } satisfies DropdownItem<MenuHandler>,\n      collectionNfts[0].isOnFragment && {\n        name: 'Fragment',\n        value: 'fragment',\n        fontIcon: 'external',\n      } satisfies DropdownItem<MenuHandler>,\n      {\n        name: 'Getgems',\n        value: 'getgems',\n        fontIcon: 'external',\n      },\n      !isTelegramGifts && {\n        name: getExplorerName('ton'),\n        value: 'tonExplorer',\n        fontIcon: 'external',\n      },\n      !isViewMode && currentCollectionAddress === TON_DNS_COLLECTION && {\n        name: collectionNfts.length > 1 ? 'Renew All' : 'Renew',\n        value: 'renew',\n        description: dnsExpireInDays && dnsExpireInDays < 0\n          ? (collectionNfts.length > 1 ? '$expired_many' : 'Expired')\n          : lang('$expires_in %days%', {\n            days: lang('$in_days', dnsExpireInDays),\n          }, undefined, collectionNfts.length) as string,\n      } satisfies DropdownItem<MenuHandler>,\n      !IS_CORE_WALLET && {\n        name: 'Hide All',\n        value: 'hideAll',\n      } satisfies DropdownItem<MenuHandler>,\n      !isViewMode && {\n        name: 'Burn All',\n        value: 'burnAll',\n        isDangerous: true,\n      } satisfies DropdownItem<MenuHandler>, {\n        name: 'Select All',\n        value: 'selectAll',\n        withDelimiter: true,\n      },\n      {\n        name: isInTabs ? lang('Remove Tab') : lang('Add Tab'),\n        value: isInTabs ? 'removeTab' : 'addTab',\n      },\n    ]);\n  }, [collectionNfts, collectionTabs, currentCollectionAddress, dnsExpireInDays, isTelegramGifts, isViewMode, lang]);\n\n  useHistoryBack({\n    isActive: true,\n    onBack: closeNftCollection,\n  });\n\n  useEffect(() => captureEscKeyListener(closeNftCollection), []);\n\n  const getTriggerElement = useLastCallback(() => ref.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback(() => ({ withPortal: true }));\n\n  const handleMenuItemClick = useLastCallback((value: MenuHandler) => {\n    switch (value) {\n      case 'sendAll': {\n        startTransfer({\n          nfts: collectionNfts.filter(({ isOnSale }) => !isOnSale),\n          isPortrait: getIsPortrait(),\n        });\n\n        break;\n      }\n\n      case 'getgems': {\n        const getgemsBaseUrl = isTestnet ? GETGEMS_BASE_TESTNET_URL : GETGEMS_BASE_MAINNET_URL;\n        void openUrl(\n          isTelegramGifts ? `${getgemsBaseUrl}top-gifts` : `${getgemsBaseUrl}collection/${currentCollectionAddress}`,\n        );\n\n        break;\n      }\n\n      case 'tonExplorer': {\n        const url = getExplorerNftCollectionUrl(currentCollectionAddress, isTestnet);\n        if (url) {\n          void openUrl(url);\n        }\n\n        break;\n      }\n\n      case 'fragment': {\n        if (isTelegramGifts) {\n          void openUrl('https://fragment.com/gifts');\n        } else if (currentCollectionAddress === NFT_FRAGMENT_COLLECTIONS[0]) {\n          void openUrl('https://fragment.com/numbers');\n        } else if (currentCollectionAddress === NFT_FRAGMENT_COLLECTIONS[1]) {\n          void openUrl('https://fragment.com');\n        } else {\n          const collectionSlug = collectionName.toLowerCase().replace(/\\W/g, '').replace(/s$/, '');\n          void openUrl(`https://fragment.com/gifts/${collectionSlug}`);\n        }\n\n        break;\n      }\n\n      case 'selectAll': {\n        selectNfts({\n          addresses: collectionNfts\n            .filter(({ isOnSale }) => !isOnSale)\n            .map(({ address }) => address),\n        });\n\n        break;\n      }\n\n      case 'burnAll': {\n        burnNfts({ nfts: collectionNfts.filter(({ isOnSale }) => !isOnSale) });\n\n        break;\n      }\n\n      case 'hideAll': {\n        openHideNftModal({ addresses: collectionNfts.map((nft) => nft.address), isCollection: true });\n\n        break;\n      }\n\n      case 'addTab': {\n        addCollectionTab({ collectionAddress: currentCollectionAddress! });\n\n        break;\n      }\n\n      case 'removeTab': {\n        closeNftCollection();\n        removeCollectionTab({ collectionAddress: currentCollectionAddress! });\n\n        break;\n      }\n\n      case 'renew': {\n        openDomainRenewalModal({ addresses: collectionNfts.map((nft) => nft.address) });\n        break;\n      }\n    }\n  });\n\n  const handleMenuOpen = useLastCallback(() => {\n    const { right: x, bottom: y } = ref.current!.getBoundingClientRect();\n    setMenuAnchor({ x, y });\n  });\n\n  const handleMenuClose = useLastCallback(() => {\n    setMenuAnchor(undefined);\n  });\n\n  return (\n    <div className={styles.root}>\n      <Button\n        isSimple\n        isText\n        ariaLabel={lang('Back')}\n        className={styles.backButton}\n        onClick={closeNftCollection}\n      >\n        <i className={buildClassName(styles.backIcon, 'icon-chevron-left')} aria-hidden />\n      </Button>\n\n      <div className={styles.content}>\n        <div className={styles.title}>{collectionName}</div>\n        <div className={styles.amount}>\n          {collectionNfts.length > 1 ? lang('%amount% NFTs', { amount: collectionNfts.length }) : lang('1 NFT')}\n        </div>\n      </div>\n\n      <Button isSimple ref={ref} className={styles.menuButton} onClick={handleMenuOpen} ariaLabel={lang('Open Menu')}>\n        <i className=\"icon-menu-dots\" aria-hidden />\n      </Button>\n      <DropdownMenu\n        isOpen={isMenuOpen}\n        ref={menuRef}\n        withPortal\n        shouldTranslateOptions\n        menuPositionX=\"right\"\n        menuAnchor={menuAnchor}\n        getTriggerElement={getTriggerElement}\n        getRootElement={getRootElement}\n        getMenuElement={getMenuElement}\n        getLayout={getLayout}\n        buttonClassName={styles.menuItem}\n        bubbleClassName={styles.menu}\n        itemDescriptionClassName={styles.menuItemDescription}\n        items={menuItems}\n        onSelect={handleMenuItemClick}\n        onClose={handleMenuClose}\n      />\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    byAddress: nfts,\n    currentCollectionAddress,\n    collectionTabs,\n    dnsExpiration,\n  } = selectCurrentAccountState(global)?.nfts || {};\n\n  return {\n    currentCollectionAddress,\n    nfts,\n    isTestnet: global.settings.isTestnet,\n    isViewMode: selectIsCurrentAccountViewMode(global),\n    collectionTabs,\n    dnsExpiration,\n  };\n}, (global, ownProps, stickToFirst) => {\n  const {\n    currentCollectionAddress,\n  } = selectCurrentAccountState(global)?.nfts || {};\n\n  return stickToFirst(currentCollectionAddress);\n})(NftCollectionHeader));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './Radio.module.scss';\n\ninterface OwnProps {\n  id?: string;\n  name: string;\n  value: string;\n  className?: string;\n  isChecked?: boolean;\n  onChange?: (event: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\nfunction Radio({\n  id, name, value, isChecked, className, onChange,\n}: OwnProps) {\n  return (\n    <div className={buildClassName(styles.root, className, isChecked && styles.checked)}>\n      <input\n        id={id}\n        type=\"radio\"\n        name={name}\n        className=\"visually-hidden\"\n        value={value}\n        checked={isChecked}\n        onChange={onChange}\n      />\n    </div>\n  );\n}\n\nexport default memo(Radio);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"OyHWXuOj\",\"checked\":\"BCTrjQeD\"};","import { useEffect, useState } from '../lib/teact/teact';\n\n// Use previous value during animation without checking for presence\nexport function usePrevDuringAnimationSimple<T>(current: T, durationMs: number = 300): T {\n  const [prev, setPrev] = useState<T>(current);\n\n  useEffect(() => {\n    if (current === prev) return undefined;\n    const timeoutId = window.setTimeout(() => {\n      setPrev(current);\n    }, durationMs);\n\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [current, durationMs, prev]);\n\n  return prev;\n}\n","import type React from '../../../lib/teact/teact';\nimport { useMemo } from '../../../lib/teact/teact';\nimport { getActions, getGlobal } from '../../../global';\n\nimport type { ApiNft } from '../../../api/types';\nimport type { DropdownItem } from '../../ui/Dropdown';\n\nimport {\n  GETGEMS_BASE_MAINNET_URL,\n  GETGEMS_BASE_TESTNET_URL,\n  IS_CORE_WALLET,\n  MTW_CARDS_COLLECTION,\n} from '../../../config';\nimport { isTonDnsNft } from '../../../util/dns';\nimport { compact } from '../../../util/iteratees';\nimport { openUrl } from '../../../util/openUrl';\nimport { getExplorerName, getExplorerNftUrl } from '../../../util/url';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nexport type NftMenuHandler = 'send' | 'tondns' | 'fragment' | 'getgems' | 'tonExplorer' | 'collection' | 'hide'\n  | 'unhide' | 'not_scam' | 'burn' | 'select' | 'installCard' | 'resetCard' | 'installAccentColor' | 'resetAccentColor'\n  | 'renew' | 'linkDomain';\n\nconst ON_SALE_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Cannot be sent',\n  value: 'send',\n  description: 'NFT is for sale',\n  isDisabled: true,\n};\nconst TON_DNS_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Configure DNS',\n  value: 'tondns',\n  fontIcon: 'external',\n};\nconst SEND_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Send',\n  value: 'send',\n};\nconst FRAGMENT_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Fragment',\n  value: 'fragment',\n  fontIcon: 'external',\n};\nconst GETGEMS_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Getgems',\n  value: 'getgems',\n  fontIcon: 'external',\n};\nconst TON_EXPLORER_ITEM: DropdownItem<NftMenuHandler> = {\n  name: getExplorerName('ton'),\n  value: 'tonExplorer',\n  fontIcon: 'external',\n};\nconst COLLECTION_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Collection',\n  value: 'collection',\n};\nconst HIDE_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Hide',\n  value: 'hide',\n};\nconst RENEW_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Renew',\n  value: 'renew',\n};\nconst NOT_SCAM: DropdownItem<NftMenuHandler> = {\n  name: 'Not Scam',\n  value: 'not_scam',\n};\nconst UNHIDE: DropdownItem<NftMenuHandler> = {\n  name: 'Unhide',\n  value: 'unhide',\n};\nconst BURN_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Burn',\n  value: 'burn',\n  isDangerous: true,\n};\nconst SELECT_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Select',\n  value: 'select',\n  withDelimiter: true,\n};\nconst INSTALL_CARD: DropdownItem<NftMenuHandler> = {\n  name: 'Install Card',\n  value: 'installCard',\n};\nconst RESET_CARD: DropdownItem<NftMenuHandler> = {\n  name: 'Reset Card',\n  value: 'resetCard',\n};\nconst INSTALL_ACCENT_COLOR: DropdownItem<NftMenuHandler> = {\n  name: 'Apply Palette',\n  value: 'installAccentColor',\n};\nconst RESET_ACCENT_COLOR: DropdownItem<NftMenuHandler> = {\n  name: 'Reset Palette',\n  value: 'resetAccentColor',\n};\nconst LINK_TO_ADDRESS: DropdownItem<NftMenuHandler> = {\n  name: 'Link to Wallet',\n  value: 'linkDomain',\n};\nconst CHANGE_LINKED_ADDRESS: DropdownItem<NftMenuHandler> = {\n  name: 'Change Wallet',\n  value: 'linkDomain',\n};\n\nexport default function useNftMenu({\n  nft,\n  isViewMode,\n  dnsExpireInDays,\n  linkedAddress,\n  isNftBlacklisted,\n  isNftWhitelisted,\n  isNftInstalled,\n  isNftAccentColorInstalled,\n}: {\n  nft?: ApiNft;\n  isViewMode: boolean;\n  dnsExpireInDays?: number;\n  linkedAddress?: string;\n  isNftBlacklisted?: boolean;\n  isNftWhitelisted?: boolean;\n  isNftInstalled?: boolean;\n  isNftAccentColorInstalled?: boolean;\n}) {\n  const {\n    startTransfer,\n    selectNfts,\n    openNftCollection,\n    burnNfts,\n    addNftsToBlacklist,\n    addNftsToWhitelist,\n    closeMediaViewer,\n    closeNftAttributesModal,\n    openUnhideNftModal,\n    setCardBackgroundNft,\n    clearCardBackgroundNft,\n    installAccentColorFromNft,\n    clearAccentColorFromNft,\n    openDomainRenewalModal,\n    openDomainLinkingModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  function closeOverlays() {\n    closeMediaViewer();\n    closeNftAttributesModal();\n  }\n\n  const handleMenuItemSelect = useLastCallback((\n    value: NftMenuHandler,\n    e?: React.MouseEvent,\n  ) => {\n    const { isTestnet } = getGlobal().settings;\n    const isExternal = e?.shiftKey || e?.ctrlKey || e?.metaKey;\n\n    switch (value) {\n      case 'send': {\n        startTransfer({\n          isPortrait: getIsPortrait(),\n          nfts: [nft!],\n        });\n        closeOverlays();\n\n        break;\n      }\n\n      case 'tonExplorer': {\n        const url = getExplorerNftUrl(nft!.address, isTestnet)!;\n\n        void openUrl(url, { isExternal });\n        break;\n      }\n\n      case 'getgems': {\n        const getgemsBaseUrl = isTestnet ? GETGEMS_BASE_TESTNET_URL : GETGEMS_BASE_MAINNET_URL;\n        const getgemsUrl = nft!.collectionAddress\n          ? `${getgemsBaseUrl}collection/${nft!.collectionAddress}/${nft!.address}`\n          : `${getgemsBaseUrl}nft/${nft!.address}`;\n\n        void openUrl(getgemsUrl, { isExternal });\n        break;\n      }\n\n      case 'tondns': {\n        const url = `https://dns.ton.org/#${(nft!.name || '').replace(/\\.ton$/i, '')}`;\n\n        void openUrl(url, { isExternal });\n        break;\n      }\n\n      case 'installCard': {\n        setCardBackgroundNft({ nft: nft! });\n        installAccentColorFromNft({ nft: nft! });\n        break;\n      }\n\n      case 'resetCard': {\n        clearCardBackgroundNft();\n        clearAccentColorFromNft();\n        break;\n      }\n\n      case 'installAccentColor': {\n        installAccentColorFromNft({ nft: nft! });\n        break;\n      }\n\n      case 'resetAccentColor': {\n        clearAccentColorFromNft();\n        break;\n      }\n\n      case 'fragment': {\n        let url: string;\n        const { collectionName, name, metadata: { fragmentUrl } } = nft!;\n\n        if (fragmentUrl) {\n          url = fragmentUrl;\n        } else if (collectionName?.toLowerCase().includes('numbers')) {\n          url = `https://fragment.com/number/${name?.replace(/[^0-9]/g, '')}`;\n        } else {\n          url = `https://fragment.com/username/${encodeURIComponent(name?.substring(1) || '')}`;\n        }\n\n        void openUrl(url, { isExternal });\n        break;\n      }\n\n      case 'collection': {\n        openNftCollection({ address: nft!.collectionAddress! }, { forceOnHeavyAnimation: true });\n        closeOverlays();\n\n        break;\n      }\n\n      case 'hide': {\n        addNftsToBlacklist({ addresses: [nft!.address] });\n        closeOverlays();\n\n        break;\n      }\n\n      case 'not_scam': {\n        openUnhideNftModal({ address: nft!.address, name: nft!.name });\n\n        break;\n      }\n\n      case 'unhide': {\n        addNftsToWhitelist({ addresses: [nft!.address] });\n        closeOverlays();\n\n        break;\n      }\n\n      case 'burn': {\n        burnNfts({ nfts: [nft!] });\n        closeOverlays();\n\n        break;\n      }\n\n      case 'select': {\n        selectNfts({ addresses: [nft!.address] });\n        break;\n      }\n\n      case 'renew': {\n        openDomainRenewalModal({ addresses: [nft!.address] });\n        break;\n      }\n\n      case 'linkDomain': {\n        openDomainLinkingModal({ address: nft!.address });\n        break;\n      }\n    }\n  });\n\n  const menuItems: DropdownItem<NftMenuHandler>[] = useMemo(() => {\n    if (!nft) return [];\n\n    const {\n      collectionAddress, isOnSale, isOnFragment, isScam,\n    } = nft;\n    const isTonDns = isTonDnsNft(nft);\n    const isCard = !IS_CORE_WALLET && nft.collectionAddress === MTW_CARDS_COLLECTION;\n\n    return compact([\n      !isViewMode && (isOnSale ? ON_SALE_ITEM : SEND_ITEM),\n      !isViewMode && isTonDns && !isOnSale && dnsExpireInDays !== undefined && {\n        ...RENEW_ITEM,\n        description: dnsExpireInDays < 0\n          ? 'Expired'\n          : lang('$expires_in %days%', { days: lang('$in_days', dnsExpireInDays) }, undefined, 1),\n      },\n      !isViewMode && isTonDns && !isOnSale && (linkedAddress ? CHANGE_LINKED_ADDRESS : LINK_TO_ADDRESS),\n      !IS_CORE_WALLET && ((!isScam && !isNftBlacklisted) || isNftWhitelisted) && HIDE_ITEM,\n      !IS_CORE_WALLET && isScam && !isNftWhitelisted && NOT_SCAM,\n      !IS_CORE_WALLET && !isScam && isNftBlacklisted && UNHIDE,\n      ...(!isOnSale && !isViewMode ? [\n        BURN_ITEM,\n        SELECT_ITEM,\n      ] : []),\n      collectionAddress && COLLECTION_ITEM,\n      isTonDns && !isViewMode && TON_DNS_ITEM,\n      ...(isCard ? [!isNftInstalled ? INSTALL_CARD : RESET_CARD] : []),\n      ...(isCard ? [!isNftAccentColorInstalled ? INSTALL_ACCENT_COLOR : RESET_ACCENT_COLOR] : []),\n\n      isOnFragment && FRAGMENT_ITEM,\n      GETGEMS_ITEM,\n      TON_EXPLORER_ITEM,\n    ]);\n  }, [\n    nft, isViewMode, dnsExpireInDays, lang, linkedAddress, isNftBlacklisted,\n    isNftWhitelisted, isNftInstalled, isNftAccentColorInstalled,\n  ]);\n\n  return { menuItems, handleMenuItemSelect };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"Zwrm7aDb\",\"icon\":\"lGtsxpv1\",\"menu\":\"Pc0Y7YGI\",\"contextMenu\":\"kuj1PIIl\",\"menuBubble\":\"UhvMK8mg\",\"item\":\"AZjbQROQ\",\"menuItemDescription\":\"XbyfBxfu\"};","import type { ElementRef } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { IAnchorPosition } from '../../../../global/types';\nimport type { Layout } from '../../../../hooks/useMenuPosition';\n\nimport {\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsCurrentAccountViewMode,\n  selectTonDnsLinkedAddress,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { stopEvent } from '../../../../util/domEvents';\nimport { vibrate } from '../../../../util/haptics';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport { usePrevDuringAnimationSimple } from '../../../../hooks/usePrevDuringAnimationSimple';\nimport useNftMenu from '../../../mediaViewer/hooks/useNftMenu';\n\nimport DropdownMenu from '../../../ui/DropdownMenu';\nimport { ANIMATION_DURATION } from '../../../ui/Menu';\n\nimport styles from './NftMenu.module.scss';\n\ninterface OwnProps {\n  nft: ApiNft;\n  ref?: ElementRef<HTMLButtonElement>;\n  isContextMenuMode?: boolean;\n  dnsExpireInDays?: number;\n  menuAnchor?: IAnchorPosition;\n  className?: string;\n  onOpen: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n  onCloseAnimationEnd?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isViewMode: boolean;\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  cardBackgroundNft?: ApiNft;\n  accentColorNft?: ApiNft;\n  linkedAddress?: string;\n}\n\nconst CONTEXT_MENU_VERTICAL_SHIFT_PX = 4;\n\nfunction NftMenu({\n  isViewMode,\n  isContextMenuMode,\n  nft,\n  ref,\n  dnsExpireInDays,\n  linkedAddress,\n  menuAnchor,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  cardBackgroundNft,\n  accentColorNft,\n  className,\n  onOpen,\n  onClose,\n  onCloseAnimationEnd,\n}: OwnProps & StateProps) {\n  const isNftBlacklisted = useMemo(() => {\n    return blacklistedNftAddresses?.includes(nft.address);\n  }, [nft, blacklistedNftAddresses]);\n  const isNftWhitelisted = useMemo(() => {\n    return whitelistedNftAddresses?.includes(nft.address);\n  }, [nft, whitelistedNftAddresses]);\n  const isNftInstalled = usePrevDuringAnimationSimple(\n    nft && nft.address === cardBackgroundNft?.address, ANIMATION_DURATION,\n  );\n  const isNftAccentColorInstalled = usePrevDuringAnimationSimple(\n    nft && nft.address === accentColorNft?.address, ANIMATION_DURATION,\n  );\n\n  const { menuItems, handleMenuItemSelect } = useNftMenu({\n    nft,\n    isViewMode,\n    dnsExpireInDays,\n    linkedAddress,\n    isNftBlacklisted,\n    isNftWhitelisted,\n    isNftInstalled,\n    isNftAccentColorInstalled,\n  });\n  let buttonRef = useRef<HTMLButtonElement>();\n  const menuRef = useRef<HTMLDivElement>();\n  const isOpen = Boolean(menuAnchor);\n  if (ref) {\n    buttonRef = ref;\n  }\n\n  const getTriggerElement = useLastCallback(() => buttonRef.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback((): Layout => ({\n    withPortal: true,\n    topShiftY: isContextMenuMode ? CONTEXT_MENU_VERTICAL_SHIFT_PX : 0,\n    preferredPositionX: isContextMenuMode ? 'left' : 'right',\n  }));\n\n  const lang = useLang();\n\n  const handleButtonClick = (e: React.MouseEvent) => {\n    stopEvent(e);\n\n    if (isOpen) {\n      onClose();\n    } else {\n      void vibrate();\n      onOpen();\n    }\n  };\n\n  return (\n    <>\n      <button\n        ref={buttonRef}\n        type=\"button\"\n        className={buildClassName(styles.button, className)}\n        aria-label={lang('NFT Menu')}\n        onClick={handleButtonClick}\n      >\n        <i className={buildClassName(styles.icon, 'icon-menu-dots')} aria-hidden />\n      </button>\n      <DropdownMenu\n        isOpen={isOpen}\n        ref={menuRef}\n        withPortal\n        menuAnchor={menuAnchor}\n        menuPositionX=\"right\"\n        getTriggerElement={!isContextMenuMode ? getTriggerElement : undefined}\n        getRootElement={getRootElement}\n        getMenuElement={getMenuElement}\n        getLayout={getLayout}\n        items={menuItems}\n        shouldTranslateOptions\n        className={isContextMenuMode ? styles.contextMenu : styles.menu}\n        bubbleClassName={styles.menuBubble}\n        buttonClassName={styles.item}\n        itemDescriptionClassName={styles.menuItemDescription}\n        shouldCleanup\n        onClose={onClose}\n        onCloseAnimationEnd={onCloseAnimationEnd}\n        onSelect={handleMenuItemSelect}\n      />\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { nft }): StateProps => {\n  const { blacklistedNftAddresses, whitelistedNftAddresses } = selectCurrentAccountState(global) || {};\n  const { cardBackgroundNft, accentColorNft } = selectCurrentAccountSettings(global) || {};\n  const linkedAddress = selectTonDnsLinkedAddress(global, nft);\n\n  return {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n    cardBackgroundNft,\n    accentColorNft,\n    isViewMode: selectIsCurrentAccountViewMode(global),\n    linkedAddress,\n  };\n})(NftMenu));\n","// extracted by mini-css-extract-plugin\nexport default {\"emptyList\":\"ITYna3lB\",\"emptyListContent\":\"VvA3zcqe\",\"emptyListTitle\":\"dfDaqpor\",\"emptyListText\":\"T93VHAYd\",\"emptyListLoading\":\"AmFNUCBn\",\"emptyListButton\":\"MQHqPBS8\",\"sticker\":\"e1KDXttI\",\"list\":\"dpiMguJa\",\"landscapeList\":\"UaTzvOas\",\"item\":\"wdIabR9U\",\"image\":\"P5UTNS9t\",\"item_onSale\":\"TcBQN9hf\",\"itemOnSale\":\"TcBQN9hf\",\"nonInteractive\":\"O3ePb4wF\",\"itemWithMenu\":\"AFzPXqVX\",\"imageWrapper\":\"wvB9itFX\",\"warning\":\"qtSm9QOQ\",\"imageSelected\":\"xeApkBtH\",\"fullImage\":\"tWs_EVqC\",\"warningBlock\":\"VpqrQ0wB\",\"infoWrapper\":\"v0SE1VHL\",\"title\":\"KokxXqZI\",\"collection\":\"_xEjK2pw\",\"radio\":\"VqbpRLGL\",\"notcoinVoucherButton\":\"GIjQ3tN4\",\"notcoinVoucherIcon\":\"mfxV4144\"};","import React, {\n  type ElementRef,\n  memo, useMemo, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { ObserveFn } from '../../../../hooks/useIntersectionObserver';\nimport { type IAnchorPosition } from '../../../../global/types';\n\nimport { TON_DNS_RENEWAL_NFT_WARNING_DAYS } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { getCountDaysToDate } from '../../../../util/dateFormat';\nimport { stopEvent } from '../../../../util/domEvents';\nimport { vibrate } from '../../../../util/haptics';\nimport { shortenAddress } from '../../../../util/shortenAddress';\nimport { IS_ANDROID, IS_IOS } from '../../../../util/windowEnvironment';\n\nimport useContextMenuHandlers from '../../../../hooks/useContextMenuHandlers';\nimport useFlag from '../../../../hooks/useFlag';\nimport { useIsIntersecting } from '../../../../hooks/useIntersectionObserver';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\nimport useSyncEffect from '../../../../hooks/useSyncEffect';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Image from '../../../ui/Image';\nimport Radio from '../../../ui/Radio';\nimport NftMenu from './NftMenu';\n\nimport styles from './Nft.module.scss';\n\ninterface OwnProps {\n  nft: ApiNft;\n  selectedAddresses?: string[];\n  observeIntersection: ObserveFn;\n  tonDnsExpiration?: number;\n  isViewAccount?: boolean;\n}\n\ninterface UseLottieReturnType {\n  isLottie: boolean;\n  shouldPlay?: boolean;\n  noLoop?: boolean;\n  markHover?: NoneToVoidFunction;\n  unmarkHover?: NoneToVoidFunction;\n}\n\nfunction Nft({\n  nft,\n  selectedAddresses,\n  tonDnsExpiration,\n  observeIntersection,\n  isViewAccount,\n}: OwnProps) {\n  const {\n    selectNfts,\n    clearNftSelection,\n    openDomainRenewalModal,\n    openNftAttributesModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const ref = useRef<HTMLDivElement>();\n\n  const {\n    isLottie, shouldPlay, noLoop, markHover, unmarkHover,\n  } = useLottie(nft, ref, observeIntersection);\n\n  const [menuAnchor, setMenuAnchor] = useState<IAnchorPosition>();\n  const isSelectionEnabled = !!selectedAddresses && selectedAddresses.length > 0;\n  const isSelected = useMemo(() => selectedAddresses?.includes(nft.address), [selectedAddresses, nft.address]);\n  const isMenuOpen = Boolean(menuAnchor);\n  const dnsExpireInDays = tonDnsExpiration ? getCountDaysToDate(tonDnsExpiration) : undefined;\n  const isDnsExpireSoon = dnsExpireInDays !== undefined ? dnsExpireInDays <= TON_DNS_RENEWAL_NFT_WARNING_DAYS : false;\n  const {\n    shouldRender: shouldRenderWarning,\n    ref: warningRef,\n  } = useShowTransition({\n    isOpen: isSelectionEnabled && nft.isOnSale,\n    withShouldRender: true,\n  });\n\n  const {\n    isContextMenuOpen,\n    contextMenuAnchor,\n    handleBeforeContextMenu,\n    handleContextMenu,\n    handleContextMenuHide,\n    handleContextMenuClose,\n  } = useContextMenuHandlers({\n    elementRef: ref,\n  });\n\n  const fullClassName = buildClassName(\n    styles.item,\n    !isSelectionEnabled && nft.isOnSale && styles.item_onSale,\n    isMenuOpen && styles.itemWithMenu,\n    isSelectionEnabled && nft.isOnSale && styles.nonInteractive,\n  );\n\n  function handleClick() {\n    if (isSelectionEnabled) {\n      if (isSelected) {\n        clearNftSelection({ address: nft.address });\n      } else {\n        selectNfts({ addresses: [nft.address] });\n      }\n      return;\n    }\n\n    void vibrate();\n    openNftAttributesModal({ nft });\n  }\n\n  function handleRenewDomainClick(e: React.MouseEvent) {\n    stopEvent(e);\n\n    openDomainRenewalModal({ addresses: [nft.address] });\n  }\n\n  const handleOpenContextMenu = useLastCallback(() => {\n    setMenuAnchor(contextMenuAnchor);\n  });\n\n  const handleOpenMenu = useLastCallback(() => {\n    const { right: x, y } = ref.current!.getBoundingClientRect();\n    setMenuAnchor({ x, y });\n  });\n\n  const handleCloseMenu = useLastCallback(() => {\n    setMenuAnchor(undefined);\n    handleContextMenuClose();\n  });\n\n  useSyncEffect(() => {\n    if (isContextMenuOpen) {\n      handleOpenContextMenu();\n    } else {\n      handleCloseMenu();\n    }\n  }, [isContextMenuOpen]);\n\n  function renderDnsExpireWarning() {\n    return (\n      <button\n        type=\"button\"\n        className={buildClassName(styles.warningBlock, isViewAccount && styles.nonInteractive)}\n        onClick={!isViewAccount ? handleRenewDomainClick : undefined}\n      >\n        {dnsExpireInDays! < 0\n          ? 'Expired'\n          : lang('$expires_in %days%', { days: lang('$in_days', dnsExpireInDays) }, undefined, 1)}\n      </button>\n    );\n  }\n\n  return (\n    <div\n      key={nft.address}\n      ref={ref}\n      className={fullClassName}\n      onMouseEnter={markHover}\n      onMouseLeave={unmarkHover}\n      onClick={!isSelectionEnabled || !nft.isOnSale ? handleClick : undefined}\n      onMouseDown={handleBeforeContextMenu}\n      onContextMenu={handleContextMenu}\n    >\n      {isSelectionEnabled && !nft.isOnSale && (\n        <Radio\n          isChecked={isSelected}\n          name=\"nft\"\n          value={nft.address}\n          className={styles.radio}\n        />\n      )}\n      {!isSelectionEnabled && (\n        <NftMenu\n          nft={nft}\n          isContextMenuMode={Boolean(contextMenuAnchor)}\n          dnsExpireInDays={dnsExpireInDays}\n          menuAnchor={menuAnchor}\n          onOpen={handleOpenMenu}\n          onClose={handleCloseMenu}\n          onCloseAnimationEnd={handleContextMenuHide}\n        />\n      )}\n      {isLottie ? (\n        <div\n          className={styles.imageWrapper}\n        >\n          <AnimatedIconWithPreview\n            shouldStretch\n            play={shouldPlay}\n            noLoop={noLoop}\n            tgsUrl={nft.metadata.lottie}\n            previewUrl={nft.thumbnail}\n            noPreviewTransition\n            className={buildClassName(styles.image, isSelected && styles.imageSelected)}\n          />\n          {isDnsExpireSoon && renderDnsExpireWarning()}\n        </div>\n      ) : (\n        <Image\n          url={nft.thumbnail}\n          className={styles.imageWrapper}\n          imageClassName={buildClassName(styles.image, isSelected && styles.imageSelected)}\n        >\n          {isDnsExpireSoon && renderDnsExpireWarning()}\n        </Image>\n      )}\n      {shouldRenderWarning && (\n        <div ref={warningRef} className={styles.warning}>\n          {lang('For sale. Cannot be sent and burned')}\n        </div>\n      )}\n      <div className={styles.infoWrapper}>\n        <b className={styles.title}>{nft.name || shortenAddress(nft.address, 4)}</b>\n      </div>\n      <div className={styles.collection}>{nft.collectionName}</div>\n    </div>\n  );\n}\n\nexport default memo(Nft);\n\nfunction useLottie(\n  nft: ApiNft,\n  ref: ElementRef<HTMLDivElement>,\n  observeIntersection: ObserveFn,\n): UseLottieReturnType {\n  const isLottie = Boolean(nft.metadata?.lottie);\n\n  const isIntersecting = useIsIntersecting(ref, isLottie ? observeIntersection : undefined);\n  const [isHover, markHover, unmarkHover] = useFlag();\n\n  if (!isLottie) {\n    return { isLottie };\n  }\n\n  const shouldPlay = isIntersecting || isHover;\n  const noLoop = !isHover;\n\n  return {\n    isLottie,\n    shouldPlay,\n    noLoop,\n    ...!(IS_IOS || IS_ANDROID) && {\n      markHover,\n      unmarkHover,\n    },\n  };\n}\n","import React, { memo, useEffect, useLayoutEffect, useMemo, useRef, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\n\nimport {\n  ANIMATED_STICKER_BIG_SIZE_PX,\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  NFT_MARKETPLACE_TITLE,\n  NFT_MARKETPLACE_URL,\n  TELEGRAM_GIFTS_SUPER_COLLECTION,\n} from '../../../../config';\nimport renderText from '../../../../global/helpers/renderText';\nimport { selectCurrentAccountState, selectIsCurrentAccountViewMode } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { getTonDnsExpirationDate } from '../../../../util/dns';\nimport { stopEvent } from '../../../../util/domEvents';\nimport { openUrl } from '../../../../util/openUrl';\nimport { getHostnameFromUrl } from '../../../../util/url';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\nimport { getScrollContainerClosestSelector } from '../../helpers/scrollableContainer';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport { useIntersectionObserver } from '../../../../hooks/useIntersectionObserver';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Spinner from '../../../ui/Spinner';\nimport Nft from './Nft';\n\nimport styles from './Nft.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ninterface StateProps {\n  orderedAddresses?: string[];\n  selectedAddresses?: string[];\n  byAddress?: Record<string, ApiNft>;\n  currentCollectionAddress?: string;\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  isNftBuyingDisabled?: boolean;\n  dnsExpiration?: Record<string, number>;\n  isViewAccount?: boolean;\n}\n\nconst INTERSECTION_THROTTLE = 200;\nconst INITIAL_SLICE_LENGTH = 50;\nconst SCROLL_THRESHOLD = 800;\n\nfunction Nfts({\n  isActive,\n  orderedAddresses,\n  selectedAddresses,\n  byAddress,\n  currentCollectionAddress,\n  dnsExpiration,\n  isNftBuyingDisabled,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  isViewAccount,\n}: OwnProps & StateProps) {\n  const { fetchNftsFromCollection, clearNftsSelection } = getActions();\n\n  const lang = useLang();\n  const containerRef = useRef<HTMLDivElement>();\n  const { isPortrait, isLandscape } = useDeviceScreen();\n  const hasSelection = Boolean(selectedAddresses?.length);\n  const [isScrolled, setIsScrolled] = useState(false);\n  const scrollContainerClosest = getScrollContainerClosestSelector(true, isPortrait) || '.nfts-container';\n\n  useEffect(() => {\n    if (currentCollectionAddress) {\n      fetchNftsFromCollection({ collectionAddress: currentCollectionAddress });\n    }\n  }, [currentCollectionAddress]);\n\n  useEffect(clearNftsSelection, [clearNftsSelection, isActive, currentCollectionAddress]);\n  useEffect(() => (hasSelection ? captureEscKeyListener(clearNftsSelection) : undefined), [hasSelection]);\n\n  const nfts = useMemo(() => {\n    if (!orderedAddresses || !byAddress) {\n      return undefined;\n    }\n\n    const blacklistedNftAddressesSet = new Set(blacklistedNftAddresses);\n    const whitelistedNftAddressesSet = new Set(whitelistedNftAddresses);\n\n    const result = orderedAddresses.reduce<ApiNft[]>((acc, address) => {\n      const nft = byAddress[address];\n\n      if (nft && (\n        !currentCollectionAddress\n        || nft.collectionAddress === currentCollectionAddress\n        || (currentCollectionAddress === TELEGRAM_GIFTS_SUPER_COLLECTION && nft.isTelegramGift)\n      ) && (\n        !nft.isHidden || whitelistedNftAddressesSet.has(nft.address)\n      ) && (\n        !blacklistedNftAddressesSet.has(nft.address)\n      )) {\n        acc.push(nft);\n      }\n\n      return acc;\n    }, []);\n\n    return isScrolled ? result : result.slice(0, INITIAL_SLICE_LENGTH);\n  }, [\n    byAddress, currentCollectionAddress, orderedAddresses, blacklistedNftAddresses, whitelistedNftAddresses,\n    isScrolled,\n  ]);\n\n  const handleNativeScroll = useLastCallback(() => {\n    const closestScrollContainer = containerRef.current?.closest<HTMLDivElement>(scrollContainerClosest);\n    if (!closestScrollContainer || isScrolled) {\n      return;\n    }\n\n    const { scrollTop, scrollHeight, clientHeight } = closestScrollContainer;\n    const distanceToBottom = scrollHeight - scrollTop - clientHeight;\n\n    if (distanceToBottom <= SCROLL_THRESHOLD) {\n      setIsScrolled(true);\n    }\n  });\n\n  useLayoutEffect(() => {\n    if (!scrollContainerClosest || !nfts?.length) return undefined;\n\n    const closestScrollContainer = containerRef.current?.closest<HTMLDivElement>(scrollContainerClosest);\n    if (!closestScrollContainer) return undefined;\n\n    closestScrollContainer.addEventListener('scroll', handleNativeScroll);\n\n    return () => {\n      closestScrollContainer.removeEventListener('scroll', handleNativeScroll);\n    };\n  }, [nfts?.length, scrollContainerClosest]);\n\n  const { observe: observeIntersection } = useIntersectionObserver({\n    throttleMs: INTERSECTION_THROTTLE,\n    isDisabled: !nfts?.length,\n  });\n\n  function handleNftMarketplaceClick(e: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\n    stopEvent(e);\n\n    void openUrl(NFT_MARKETPLACE_URL, {\n      title: NFT_MARKETPLACE_TITLE,\n      subtitle: getHostnameFromUrl(NFT_MARKETPLACE_URL),\n    });\n  }\n\n  if (nfts === undefined) {\n    return (\n      <div className={buildClassName(styles.emptyList, styles.emptyListLoading)}>\n        <Spinner />\n      </div>\n    );\n  }\n\n  if (nfts.length === 0) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.happy}\n          previewUrl={ANIMATED_STICKERS_PATHS.happyPreview}\n          size={isPortrait ? ANIMATED_STICKER_SMALL_SIZE_PX : ANIMATED_STICKER_BIG_SIZE_PX}\n          className={styles.sticker}\n          noLoop={false}\n          nonInteractive\n        />\n        <div className={styles.emptyListContent}>\n          <p className={styles.emptyListTitle}>{lang('No NFTs yet')}</p>\n          {!isNftBuyingDisabled && (\n            <>\n              <p className={styles.emptyListText}>\n                {renderText(lang('$nft_explore_offer'), isPortrait ? ['simple_markdown'] : undefined)}\n              </p>\n              <button type=\"button\" className={styles.emptyListButton} onClick={handleNftMarketplaceClick}>\n                {lang('Open %nft_marketplace%', { nft_marketplace: NFT_MARKETPLACE_TITLE })}\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div ref={containerRef} className={buildClassName(styles.list, isLandscape && styles.landscapeList)}>\n      {nfts.map((nft) => (\n        <Nft\n          key={nft.address}\n          nft={nft}\n          selectedAddresses={selectedAddresses}\n          tonDnsExpiration={getTonDnsExpirationDate(nft, dnsExpiration)}\n          isViewAccount={isViewAccount}\n          observeIntersection={observeIntersection}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const {\n        orderedAddresses,\n        byAddress,\n        currentCollectionAddress,\n        selectedAddresses,\n        dnsExpiration,\n      } = selectCurrentAccountState(global)?.nfts || {};\n      const { isNftBuyingDisabled } = global.restrictions;\n\n      const {\n        blacklistedNftAddresses,\n        whitelistedNftAddresses,\n      } = selectCurrentAccountState(global) || {};\n\n      return {\n        orderedAddresses,\n        selectedAddresses,\n        byAddress,\n        currentCollectionAddress,\n        blacklistedNftAddresses,\n        whitelistedNftAddresses,\n        isNftBuyingDisabled,\n        dnsExpiration,\n        isViewAccount: selectIsCurrentAccountViewMode(global),\n      };\n    },\n    (global, _, stickToFirst) => {\n      const {\n        currentCollectionAddress,\n      } = selectCurrentAccountState(global)?.nfts || {};\n\n      return stickToFirst(`${global.currentAccountId}_${currentCollectionAddress || 'all'}`);\n    },\n  )(Nfts),\n);\n","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport { type IAnchorPosition } from '../../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../../config';\nimport {\n  selectCurrentAccountState,\n  selectIsCurrentAccountViewMode,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { getCountDaysToDate } from '../../../../util/dateFormat';\nimport { getDomainsExpirationDate, isTonDnsNft } from '../../../../util/dns';\nimport { compact } from '../../../../util/iteratees';\n\nimport { getIsPortrait } from '../../../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport { type DropdownItem } from '../../../ui/Dropdown';\nimport DropdownMenu from '../../../ui/DropdownMenu';\n\nimport styles from './NftCollectionHeader.module.scss';\n\ntype MenuHandler = 'send' | 'hide' | 'renew' | 'burn' | 'select-all';\n\ninterface StateProps {\n  isViewMode: boolean;\n  byAddress?: Record<string, ApiNft>;\n  dnsExpiration?: Record<string, number>;\n  selectedAddresses?: string[];\n  currentCollectionAddress?: string;\n}\n\nfunction NftSelectionHeader({\n  isViewMode, selectedAddresses, byAddress, dnsExpiration, currentCollectionAddress,\n}: StateProps) {\n  const {\n    selectAllNfts, clearNftsSelection, startTransfer, burnNfts, openHideNftModal, openDomainRenewalModal,\n  } = getActions();\n\n  const lang = useLang();\n  const amount = selectedAddresses?.length ?? 1;\n  const isActive = Boolean(selectedAddresses?.length);\n  const allSelectedIsTonDnsNft = useMemo(() => {\n    return selectedAddresses?.length\n      ? selectedAddresses.every((address) => isTonDnsNft(byAddress?.[address]))\n      : false;\n  }, [byAddress, selectedAddresses]);\n  const dnsExpireInDays = useMemo(() => {\n    if (!allSelectedIsTonDnsNft) return undefined;\n    const date = getDomainsExpirationDate(selectedAddresses ?? [], byAddress, dnsExpiration);\n\n    return date ? getCountDaysToDate(date) : undefined;\n  }, [allSelectedIsTonDnsNft, dnsExpiration, selectedAddresses, byAddress]);\n  const tonDnsMultiSelected = (selectedAddresses?.length ?? 0) > 1;\n\n  useHistoryBack({\n    isActive,\n    onBack: clearNftsSelection,\n  });\n\n  useEffect(() => (isActive ? captureEscKeyListener(clearNftsSelection) : undefined), [isActive]);\n\n  const menuItems: DropdownItem<MenuHandler>[] = useMemo(() => {\n    return compact([\n      !isViewMode && {\n        name: 'Send',\n        value: 'send',\n      },\n      !isViewMode && allSelectedIsTonDnsNft && {\n        name: tonDnsMultiSelected ? 'Renew All' : 'Renew',\n        value: 'renew',\n        description: dnsExpireInDays && dnsExpireInDays < 0\n          ? (tonDnsMultiSelected ? '$expired_many' : 'Expired')\n          : lang('$expires_in %days%', {\n            days: lang('$in_days', dnsExpireInDays),\n          }, undefined, selectedAddresses?.length ?? 1) as string,\n      } satisfies DropdownItem<MenuHandler>,\n      !IS_CORE_WALLET && {\n        name: 'Hide',\n        value: 'hide',\n      } satisfies DropdownItem<MenuHandler>,\n      !isViewMode && {\n        name: 'Burn',\n        value: 'burn',\n        isDangerous: true,\n      } satisfies DropdownItem<MenuHandler>, {\n        name: 'Select All',\n        value: 'select-all',\n        withDelimiter: true,\n      },\n    ]);\n  }, [allSelectedIsTonDnsNft, dnsExpireInDays, isViewMode, lang, selectedAddresses?.length, tonDnsMultiSelected]);\n\n  const handleSendClick = useLastCallback(() => {\n    const nfts = selectedAddresses!.map((address) => byAddress![address]) ?? [];\n\n    clearNftsSelection();\n\n    startTransfer({\n      isPortrait: getIsPortrait(),\n      nfts,\n    });\n  });\n\n  const handleBurnClick = useLastCallback(() => {\n    const nfts = selectedAddresses!.map((address) => byAddress![address]) ?? [];\n\n    clearNftsSelection();\n\n    burnNfts({ nfts });\n  });\n\n  const handleHideClick = useLastCallback(() => {\n    clearNftsSelection();\n\n    openHideNftModal({ addresses: selectedAddresses!, isCollection: false });\n  });\n\n  const [menuAnchor, setMenuAnchor] = useState<IAnchorPosition>();\n  const isMenuOpen = Boolean(menuAnchor);\n  const ref = useRef<HTMLButtonElement>();\n  const menuRef = useRef<HTMLDivElement>();\n  const handleMenuOpen = useLastCallback(() => {\n    const { right: x, bottom: y } = ref.current!.getBoundingClientRect();\n    setMenuAnchor({ x, y });\n  });\n  const handleMenuClose = useLastCallback(() => {\n    setMenuAnchor(undefined);\n  });\n  const getTriggerElement = useLastCallback(() => ref.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback(() => ({ withPortal: true }));\n\n  const handleMenuItemClick = useLastCallback((value: MenuHandler) => {\n    switch (value) {\n      case 'send': {\n        handleSendClick();\n        break;\n      }\n      case 'hide': {\n        handleHideClick();\n        break;\n      }\n      case 'burn': {\n        handleBurnClick();\n        break;\n      }\n      case 'select-all': {\n        selectAllNfts({ collectionAddress: currentCollectionAddress });\n        break;\n      }\n      case 'renew': {\n        openDomainRenewalModal({ addresses: selectedAddresses! });\n        break;\n      }\n    }\n  });\n\n  return (\n    <div className={styles.root}>\n      <Button\n        isSimple\n        isText\n        ariaLabel={lang('Back')}\n        className={styles.backButton}\n        onClick={clearNftsSelection}\n      >\n        <i className={buildClassName(styles.backIcon, 'icon-chevron-left')} aria-hidden />\n      </Button>\n      <div className={styles.content}>\n        <div className={styles.title}>\n          {amount > 1 ? lang('%amount% NFTs Selected', { amount }) : lang('1 NFT Selected')}\n        </div>\n      </div>\n      <div>\n        <Button isSimple ref={ref} className={styles.menuButton} onClick={handleMenuOpen} ariaLabel={lang('Open Menu')}>\n          <i className=\"icon-menu-dots\" aria-hidden />\n        </Button>\n        <DropdownMenu\n          isOpen={isMenuOpen}\n          ref={menuRef}\n          withPortal\n          shouldTranslateOptions\n          menuPositionX=\"right\"\n          menuAnchor={menuAnchor}\n          getTriggerElement={getTriggerElement}\n          getRootElement={getRootElement}\n          getMenuElement={getMenuElement}\n          getLayout={getLayout}\n          buttonClassName={styles.menuItem}\n          bubbleClassName={styles.menu}\n          itemDescriptionClassName={styles.menuItemDescription}\n          items={menuItems}\n          onSelect={handleMenuItemClick}\n          onClose={handleMenuClose}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    selectedAddresses, byAddress, currentCollectionAddress, dnsExpiration,\n  } = selectCurrentAccountState(global)?.nfts || {};\n\n  return {\n    selectedAddresses,\n    byAddress,\n    currentCollectionAddress,\n    dnsExpiration,\n    isViewMode: selectIsCurrentAccountViewMode(global),\n  };\n})(NftSelectionHeader));\n","// extracted by mini-css-extract-plugin\nexport default {\"contentPanel\":\"i_rtpHaE\",\"landscapeContentPanel\":\"UzEmZry2\",\"container\":\"wmmKI_Q8\",\"landscapeContainer\":\"xwYhKvej\",\"assetsPanel\":\"LsCBKsIM\",\"tabsContainer\":\"qxl4O9Cg\",\"tabsSlide\":\"ES31v1R7\",\"tab\":\"Sd0JpmLp\",\"slides\":\"vxe8iSc4\",\"slide\":\"MU2eE1B1\",\"portraitContainer\":\"joLgqn25\",\"tabsContent\":\"VjN3P9Zv\",\"tabs\":\"q8lTUtx5\",\"tabsOverlay\":\"razu85QH\"};","import React, { memo, useEffect, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft, ApiStakingState } from '../../../../api/types';\nimport type { DropdownItem } from '../../../ui/Dropdown';\nimport { ContentTab, SettingsState } from '../../../../global/types';\n\nimport {\n  IS_CORE_WALLET,\n  LANDSCAPE_MIN_ASSETS_TAB_VIEW,\n  PORTRAIT_MIN_ASSETS_TAB_VIEW,\n  TELEGRAM_GIFTS_SUPER_COLLECTION,\n} from '../../../../config';\nimport { requestMeasure, requestMutation } from '../../../../lib/fasterdom/fasterdom';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectDoesAccountSupportNft,\n  selectEnabledTokensCountMemoizedFor,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { captureEvents, SwipeDirection } from '../../../../util/captureEvents';\nimport { compact } from '../../../../util/iteratees';\nimport { getIsActiveStakingState } from '../../../../util/staking';\nimport { IS_TOUCH_ENV, STICKY_CARD_INTERSECTION_THRESHOLD } from '../../../../util/windowEnvironment';\nimport { calcSafeAreaTop } from '../../helpers/calcSafeAreaTop';\nimport { getScrollableContainer } from '../../helpers/scrollableContainer';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useEffectOnce from '../../../../hooks/useEffectOnce';\nimport useElementVisibility from '../../../../hooks/useElementVisibility';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useScrolledState from '../../../../hooks/useScrolledState';\nimport useSyncEffect from '../../../../hooks/useSyncEffect';\n\nimport CategoryHeader from '../../../explore/CategoryHeader';\nimport Explore from '../../../explore/Explore';\nimport TabList from '../../../ui/TabList';\nimport Transition from '../../../ui/Transition';\nimport HideNftModal from '../../modals/HideNftModal';\nimport Activity from './Activities';\nimport Assets from './Assets';\nimport NftCollectionHeader from './NftCollectionHeader';\nimport Nfts from './Nfts';\nimport NftSelectionHeader from './NftSelectionHeader';\nimport { OPEN_CONTEXT_MENU_CLASS_NAME } from './Token';\n\nimport styles from './Content.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  onTabsStuck?: (isStuck: boolean) => void;\n  onStakedTokenClick: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  tokensCount: number;\n  nfts?: Record<string, ApiNft>;\n  currentCollectionAddress?: string;\n  selectedAddresses?: string[];\n  activeContentTab?: ContentTab;\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  states?: ApiStakingState[];\n  hasVesting: boolean;\n  selectedNftsToHide?: {\n    addresses: string[];\n    isCollection: boolean;\n  };\n  currentSiteCategoryId?: number;\n  doesSupportNft: boolean;\n  collectionTabs?: string[];\n}\n\nconst MAIN_CONTENT_TABS_LENGTH = Object.values(ContentTab).length / 2;\n\nlet activeNftKey = 0;\n\nfunction Content({\n  isActive,\n  activeContentTab,\n  tokensCount,\n  nfts,\n  currentCollectionAddress,\n  selectedAddresses,\n  onStakedTokenClick,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  selectedNftsToHide,\n  states,\n  hasVesting,\n  currentSiteCategoryId,\n  doesSupportNft,\n  collectionTabs,\n  onTabsStuck,\n}: OwnProps & StateProps) {\n  const {\n    selectToken,\n    showTokenActivity,\n    setActiveContentTab,\n    openNftCollection,\n    closeNftCollection,\n    openSettingsWithState,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait, isLandscape } = useDeviceScreen();\n  const tabsRef = useRef<HTMLDivElement>();\n  const hasNftSelection = Boolean(selectedAddresses?.length);\n\n  const numberOfStaking = useMemo(() => {\n    return states?.filter(getIsActiveStakingState).length ?? 0;\n  }, [states]);\n\n  useSyncEffect(() => {\n    if (currentCollectionAddress) {\n      activeNftKey += 1;\n    } else {\n      activeNftKey = 0;\n    }\n  }, [currentCollectionAddress]);\n\n  const handleNftsMenuButtonClick = useLastCallback((value: string) => {\n    if (value === 'hidden_nfts') {\n      openSettingsWithState({ state: SettingsState.HiddenNfts });\n    } else {\n      openNftCollection({ address: value }, { forceOnHeavyAnimation: true });\n    }\n  });\n\n  const nftCollections = useMemo(() => {\n    const blacklistedNftAddressesSet = new Set(blacklistedNftAddresses);\n    const whitelistedNftAddressesSet = new Set(whitelistedNftAddresses);\n\n    let hasTelegramGifts = false;\n\n    const itemsByAddress = Object.values(nfts ?? {})\n      .reduce((acc, nft) => {\n        if (nft.collectionAddress && (\n          !nft.isHidden || whitelistedNftAddressesSet.has(nft.address)\n        ) && (\n          !blacklistedNftAddressesSet.has(nft.address)\n        )) {\n          if (!acc[nft.collectionAddress]) {\n            acc[nft.collectionAddress] = {\n              value: nft.collectionAddress,\n              name: nft.collectionName || lang('Unnamed collection'),\n            };\n          }\n\n          if (!hasTelegramGifts && nft.isTelegramGift) {\n            hasTelegramGifts = true;\n          }\n        }\n\n        return acc;\n      }, {} as Record<string, DropdownItem>);\n\n    const items = Object.values(itemsByAddress);\n\n    items.sort((a, b) => a.name.localeCompare(b.name));\n\n    if (hasTelegramGifts) {\n      items.unshift({\n        value: TELEGRAM_GIFTS_SUPER_COLLECTION,\n        name: lang('Telegram Gifts'),\n        fontIcon: 'gift',\n        withDelimiterAfter: true,\n      });\n    }\n\n    return items;\n  }, [lang, nfts, blacklistedNftAddresses, whitelistedNftAddresses]);\n\n  const shouldRenderHiddenNftsSection = useMemo(() => {\n    if (IS_CORE_WALLET) return false;\n\n    const blacklistedAddressesSet = new Set(blacklistedNftAddresses);\n    return Object.values(nfts ?? {}).some(\n      (nft) => blacklistedAddressesSet.has(nft.address) || nft.isHidden,\n    );\n  }, [blacklistedNftAddresses, nfts]);\n\n  const transitionRef = useRef<HTMLDivElement>();\n\n  const totalTokensAmount = tokensCount + (hasVesting ? 1 : 0) + numberOfStaking;\n  const shouldShowSeparateAssetsPanel = totalTokensAmount <= (\n    isPortrait ? PORTRAIT_MIN_ASSETS_TAB_VIEW : LANDSCAPE_MIN_ASSETS_TAB_VIEW\n  );\n\n  const [mainContentTabsCount, tabs] = useMemo(() => {\n    const mainContentTabs = compact([\n      !shouldShowSeparateAssetsPanel && { id: ContentTab.Assets, title: lang('Assets'), className: styles.tab },\n      { id: ContentTab.Activity, title: lang('Activity'), className: styles.tab },\n      !isPortrait && !IS_CORE_WALLET && { id: ContentTab.Explore, title: lang('Explore'), className: styles.tab },\n      doesSupportNft && {\n        id: ContentTab.Nft,\n        title: lang('Collectibles'),\n        className: styles.tab,\n        menuItems: shouldRenderHiddenNftsSection\n          ? [\n            ...nftCollections,\n            {\n              name: lang('Hidden NFTs'),\n              value: 'hidden_nfts',\n              withDelimiter: true,\n            } as DropdownItem,\n          ]\n          : nftCollections,\n        onMenuItemClick: handleNftsMenuButtonClick,\n      },\n    ]);\n\n    return [\n      mainContentTabs.length,\n      mainContentTabs.concat(\n        collectionTabs?.map((collectionAddress, index) => {\n          const collection = nftCollections.find((nc) => nc.value === collectionAddress);\n          if (!collection) return undefined;\n\n          return {\n            id: MAIN_CONTENT_TABS_LENGTH + index,\n            title: collection.name,\n            className: styles.tab,\n            collectionAddress,\n            icon: collectionAddress === TELEGRAM_GIFTS_SUPER_COLLECTION ? 'icon-gift' : undefined,\n          };\n        }).filter(Boolean) ?? [],\n      ),\n    ];\n  }, [\n    collectionTabs, doesSupportNft, isPortrait, lang, nftCollections,\n    shouldRenderHiddenNftsSection, shouldShowSeparateAssetsPanel,\n  ]);\n\n  const activeTabIndex = useMemo(\n    () => {\n      const tabIndex = tabs.findIndex((tab) => tab.id === activeContentTab);\n\n      if (tabIndex === -1) {\n        return ContentTab.Assets;\n      }\n\n      return tabIndex;\n    },\n    [tabs, activeContentTab],\n  );\n\n  const contentTransitionKey = useMemo(() => {\n    if (!currentCollectionAddress || tabs[activeTabIndex].id === ContentTab.Nft) return activeTabIndex;\n\n    const nftCollectionIndex = collectionTabs?.indexOf(currentCollectionAddress) ?? -1;\n\n    return nftCollectionIndex === -1 ? activeTabIndex : mainContentTabsCount + nftCollectionIndex;\n  }, [activeTabIndex, collectionTabs, currentCollectionAddress, mainContentTabsCount, tabs]);\n\n  useEffectOnce(() => {\n    if (activeContentTab === undefined) {\n      setActiveContentTab({ tab: ContentTab.Assets });\n    }\n  });\n\n  const handleSwitchTab = useLastCallback((tab: ContentTab | number) => {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n    const tabIndex = tabs.findIndex(({ id }) => id === tab);\n    if (tabIndex >= mainContentTabsCount) {\n      const collectionAddress = collectionTabs![tabIndex - mainContentTabsCount];\n      openNftCollection({ address: collectionAddress }, { forceOnHeavyAnimation: true });\n      return;\n    }\n\n    selectToken({ slug: undefined }, { forceOnHeavyAnimation: true });\n    setActiveContentTab({ tab });\n  });\n\n  const handleScrollToTop = useLastCallback(() => {\n    const scrollContainer = getScrollableContainer(transitionRef.current, isPortrait);\n    scrollContainer?.scrollTo(0, 0);\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n    update: updateScrolledState,\n  } = useScrolledState();\n\n  useHistoryBack({\n    isActive: activeTabIndex !== 0,\n    onBack: () => handleSwitchTab(ContentTab.Assets),\n  });\n\n  const safeAreaTop = calcSafeAreaTop();\n  const intersectionRootMarginTop = STICKY_CARD_INTERSECTION_THRESHOLD - safeAreaTop - 1;\n\n  const handleTabIntersection = useLastCallback((e: IntersectionObserverEntry) => {\n    const isStuck = e.intersectionRatio < 1;\n\n    onTabsStuck?.(isStuck);\n    requestMutation(() => {\n      e.target.classList.toggle(styles.tabsContainerStuck, isStuck);\n    });\n  });\n\n  useElementVisibility({\n    isDisabled: !isPortrait,\n    targetRef: tabsRef,\n    rootMargin: `${intersectionRootMarginTop}px 0px 0px 0px`,\n    threshold: [1],\n    cb: handleTabIntersection,\n  });\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      return undefined;\n    }\n\n    return captureEvents(transitionRef.current!, {\n      includedClosestSelector: '.swipe-container',\n      excludedClosestSelector: '.dapps-feed',\n      onSwipe: (e, direction) => {\n        if (\n          direction === SwipeDirection.Up\n          || direction === SwipeDirection.Down\n          // For preventing swipe in one interaction with a long press event handler\n          || (e.target as HTMLElement | null)?.closest(`.${OPEN_CONTEXT_MENU_CLASS_NAME}`)\n        ) {\n          return false;\n        }\n\n        if (direction === SwipeDirection.Left) {\n          const tab = tabs[Math.min(tabs.length - 1, activeTabIndex + 1)];\n          handleSwitchTab(tab.id);\n          return true;\n        } else if (direction === SwipeDirection.Right) {\n          if (currentSiteCategoryId) return false;\n\n          if (currentCollectionAddress) {\n            closeNftCollection();\n          } else {\n            const tab = tabs[Math.max(0, activeTabIndex - 1)];\n            handleSwitchTab(tab.id);\n          }\n          return true;\n        }\n\n        return false;\n      },\n      selectorToPreventScroll: '.custom-scroll',\n    });\n  }, [tabs, handleSwitchTab, activeTabIndex, currentCollectionAddress, currentSiteCategoryId]);\n\n  const handleClickAsset = useLastCallback((slug: string) => {\n    showTokenActivity({ slug });\n  });\n\n  // `isScrolled` state should be updated after tab is switched\n  const handleContentTransitionStop = useLastCallback(() => {\n    if (isPortrait) return;\n\n    requestMeasure(() => {\n      const scrollContainer = getScrollableContainer(transitionRef.current, isPortrait);\n      if (scrollContainer) {\n        updateScrolledState(scrollContainer as HTMLElement);\n      }\n    });\n  });\n\n  const containerClassName = buildClassName(\n    styles.container,\n    IS_TOUCH_ENV && 'swipe-container',\n    isPortrait ? styles.portraitContainer : styles.landscapeContainer,\n  );\n\n  function renderTabsPanel() {\n    if (hasNftSelection) {\n      return <NftSelectionHeader />;\n    }\n\n    if (!isPortrait && currentSiteCategoryId) {\n      return <CategoryHeader id={currentSiteCategoryId} />;\n    }\n\n    return currentCollectionAddress ? <NftCollectionHeader key=\"collection\" /> : (\n      <TabList\n        isActive={isActive}\n        tabs={tabs}\n        activeTab={activeTabIndex}\n        onSwitchTab={handleSwitchTab}\n        onActiveTabClick={handleScrollToTop}\n        className={buildClassName(styles.tabs, 'content-tabslist')}\n        overlayClassName={styles.tabsOverlay}\n      />\n    );\n  }\n\n  function renderCurrentTab(isActive: boolean) {\n    // When assets are shown separately, there is effectively no tab with index 0,\n    // so we fall back to next tab to not break parent's component logic.\n    if (activeTabIndex === 0 && shouldShowSeparateAssetsPanel) {\n      return (\n        <Activity\n          isActive={isActive}\n          totalTokensAmount={totalTokensAmount}\n          onScroll={isLandscape ? handleContentScroll : undefined}\n        />\n      );\n    }\n\n    if (currentCollectionAddress && tabs[activeTabIndex].id !== ContentTab.Nft) {\n      return (\n        <div\n          className=\"nfts-container\"\n          onScroll={isLandscape ? handleContentScroll : undefined}\n        >\n          <Nfts\n            key={`custom:${currentCollectionAddress}`}\n            isActive={isActive}\n          />\n        </div>\n      );\n    }\n\n    switch (tabs[activeTabIndex].id) {\n      case ContentTab.Assets:\n        return (\n          <Assets\n            isActive={isActive}\n            onTokenClick={handleClickAsset}\n            onStakedTokenClick={onStakedTokenClick}\n            onScroll={isLandscape ? handleContentScroll : undefined}\n          />\n        );\n      case ContentTab.Activity:\n        return (\n          <Activity\n            isActive={isActive}\n            totalTokensAmount={totalTokensAmount}\n            onScroll={isLandscape ? handleContentScroll : undefined}\n          />\n        );\n      case ContentTab.Explore:\n        return <Explore isActive={isActive} onScroll={isLandscape ? handleContentScroll : undefined} />;\n      case ContentTab.Nft:\n        return (\n          <Transition\n            activeKey={activeNftKey}\n            name={isPortrait ? 'slide' : 'slideFade'}\n            className=\"nfts-container\"\n            onScroll={isLandscape ? handleContentScroll : undefined}\n          >\n            <Nfts key={currentCollectionAddress || 'all'} isActive={isActive} />\n          </Transition>\n        );\n      default:\n        return undefined;\n    }\n  }\n\n  function renderContent() {\n    const headerTransitionKey = hasNftSelection || (!isPortrait && currentSiteCategoryId)\n      ? 2\n      : (currentCollectionAddress ? 1 : 0);\n\n    return (\n      <>\n        <div\n          ref={tabsRef}\n          className={buildClassName(\n            styles.tabsContainer,\n            currentCollectionAddress && styles.tabsContainerForNftCollection,\n            'with-notch-on-scroll',\n            isScrolled && 'is-scrolled',\n          )}\n        >\n          <Transition\n            name=\"slideFade\"\n            className={styles.tabsContent}\n            activeKey={headerTransitionKey}\n            slideClassName={styles.tabsSlide}\n            shouldCleanup\n            cleanupExceptionKey={0}\n          >\n            {renderTabsPanel()}\n          </Transition>\n        </div>\n        <Transition\n          ref={transitionRef}\n          name={isPortrait ? 'slide' : 'slideFade'}\n          activeKey={contentTransitionKey}\n          renderCount={mainContentTabsCount + (collectionTabs?.length ?? 0)}\n          className={buildClassName(styles.slides, 'content-transition')}\n          slideClassName={buildClassName(styles.slide, 'custom-scroll')}\n          onStop={handleContentTransitionStop}\n          onScroll={isLandscape ? handleContentScroll : undefined}\n        >\n          {renderCurrentTab}\n        </Transition>\n      </>\n    );\n  }\n\n  return (\n    <div className={containerClassName}>\n      {shouldShowSeparateAssetsPanel && (\n        <div className={styles.assetsPanel}>\n          <Assets\n            isActive\n            isSeparatePanel\n            onStakedTokenClick={onStakedTokenClick}\n            onTokenClick={handleClickAsset}\n          />\n        </div>\n      )}\n      <div className={buildClassName(isPortrait ? styles.contentPanel : styles.landscapeContentPanel)}>\n        {renderContent()}\n      </div>\n      <HideNftModal\n        isOpen={Boolean(selectedNftsToHide?.addresses.length)}\n        selectedNftsToHide={selectedNftsToHide}\n      />\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountId = global.currentAccountId;\n      const {\n        activeContentTab,\n        blacklistedNftAddresses,\n        whitelistedNftAddresses,\n        selectedNftsToHide,\n        vesting,\n        nfts: {\n          byAddress: nfts,\n          currentCollectionAddress,\n          selectedAddresses,\n          collectionTabs,\n        } = {},\n        currentSiteCategoryId,\n      } = selectCurrentAccountState(global) ?? {};\n\n      const tokens = selectCurrentAccountTokens(global);\n      const tokensCount = selectEnabledTokensCountMemoizedFor(global.currentAccountId!)(tokens);\n      const hasVesting = Boolean(vesting?.info?.length);\n      const states = accountId ? selectAccountStakingStates(global, accountId) : undefined;\n      const doesSupportNft = selectDoesAccountSupportNft(global);\n\n      return {\n        nfts,\n        currentCollectionAddress,\n        selectedAddresses,\n        tokensCount,\n        activeContentTab,\n        blacklistedNftAddresses,\n        whitelistedNftAddresses,\n        selectedNftsToHide,\n        states,\n        hasVesting,\n        currentSiteCategoryId,\n        doesSupportNft,\n        collectionTabs,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Content),\n);\n","import React, { memo, useEffect, useRef, useState } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport { stopEvent } from '../../../../util/domEvents';\n\nimport useFocusAfterAnimation from '../../../../hooks/useFocusAfterAnimation';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport Input from '../../../ui/Input';\nimport Modal from '../../../ui/Modal';\n\nimport modalStyles from '../../../ui/Modal.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  name: string;\n  currentAccountId: string;\n  onClose: NoneToVoidFunction;\n}\n\nconst ACCOUNT_NAME_MAX_LENGTH = 255;\n\nfunction AccountRenameModal({ isOpen, name, currentAccountId, onClose }: OwnProps) {\n  const { renameAccount } = getActions();\n\n  const lang = useLang();\n  const inputRef = useRef<HTMLInputElement>();\n  const [newName, setNewName] = useState<string>(name);\n\n  useEffect(() => {\n    if (isOpen) {\n      setNewName(name);\n    }\n  }, [isOpen, name]);\n\n  useFocusAfterAnimation(inputRef, !isOpen);\n\n  const handleSubmit = useLastCallback((e: React.FormEvent | React.UIEvent) => {\n    stopEvent(e);\n\n    if (newName.trim().length === 0) return;\n\n    renameAccount({ accountId: currentAccountId, title: newName.trim() });\n    onClose();\n  });\n\n  return (\n    <Modal\n      isCompact\n      isOpen={isOpen}\n      title={lang('Rename Wallet')}\n      onClose={onClose}\n    >\n      <form action=\"#\" onSubmit={handleSubmit}>\n        <p>{lang('You can rename this wallet for easier identification.')}</p>\n        <Input\n          ref={inputRef}\n          placeholder={lang('Name')}\n          onInput={setNewName}\n          value={newName}\n          maxLength={ACCOUNT_NAME_MAX_LENGTH}\n          enterKeyHint=\"done\"\n        />\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onClose} className={modalStyles.button}>{lang('Cancel')}</Button>\n          <Button\n            isPrimary\n            isSubmit\n            isDisabled={newName.trim().length === 0}\n            className={modalStyles.button}\n          >\n            {lang('Save')}\n          </Button>\n        </div>\n      </form>\n    </Modal>\n  );\n}\n\nexport default memo(AccountRenameModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"a3WLGvJB\",\"slide\":\"HwTx4nDa\",\"accountTitle\":\"MoMRv8lX\",\"withBalance\":\"VUELTqry\",\"accountTitleInteractive\":\"KaXidGii\",\"accountTitleInner\":\"CsZvEIzk\",\"arrowIcon\":\"fwj1nsFY\",\"balance\":\"ReXRdYnq\",\"balanceFractionPart\":\"rMdzMb2a\",\"balanceCurrency\":\"LJreYpVF\",\"balanceCurrencyPrefix\":\"iYR_GSsp\",\"container\":\"yg1dh4un\",\"dialog\":\"_GKFEXQQ\",\"backdrop\":\"Yb4jStqu\",\"dialog_compact\":\"VQfOatN5\",\"dialogCompact\":\"VQfOatN5\",\"createAccountButton\":\"_cBvU9yb\",\"createAccountIcon\":\"wWwtr3AE\"};","import React, { memo, useEffect, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiTonWalletVersion } from '../../../../api/chains/ton/types';\nimport type { ApiBaseCurrency } from '../../../../api/types';\nimport type { Account, AccountSettings, AccountType, UserToken } from '../../../../global/types';\nimport { type ApiStakingState } from '../../../../api/types';\nimport { SettingsState } from '../../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../../config';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccountTokens,\n  selectNetworkAccounts,\n} from '../../../../global/selectors';\nimport { getAccountTitle } from '../../../../util/account';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { getShortCurrencySymbol } from '../../../../util/formatNumber';\nimport { vibrate } from '../../../../util/haptics';\nimport trapFocus from '../../../../util/trapFocus';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport Button from '../../../ui/Button';\nimport Portal from '../../../ui/Portal';\nimport SensitiveData from '../../../ui/SensitiveData';\nimport Transition from '../../../ui/Transition';\nimport { calculateFullBalance } from '../Card/helpers/calculateFullBalance';\nimport AccountButton from './AccountButton';\nimport AccountRenameModal from './AccountRenameModal';\n\nimport styles from './AccountSelector.module.scss';\n\ninterface OwnProps {\n  forceClose?: boolean;\n  accountClassName?: string;\n  accountSelectorClassName?: string;\n  withAccountSelector?: boolean;\n  withBalance?: boolean;\n}\n\ninterface StateProps {\n  currentAccountId: string;\n  currentAccount?: Account;\n  accounts?: Record<string, Account>;\n  currentWalletVersion?: ApiTonWalletVersion;\n  settingsByAccountId?: Record<string, AccountSettings>;\n  tokens?: UserToken[];\n  baseCurrency?: ApiBaseCurrency;\n  stakingStates?: ApiStakingState[];\n  isSensitiveDataHidden?: true;\n}\n\nconst ACCOUNTS_AMOUNT_FOR_COMPACT_DIALOG = 2;\n\nfunction AccountSelector({\n  currentAccountId,\n  currentAccount,\n  forceClose,\n  accountClassName,\n  accountSelectorClassName,\n  withAccountSelector,\n  withBalance,\n  tokens,\n  baseCurrency,\n  stakingStates,\n  isSensitiveDataHidden,\n  accounts,\n  currentWalletVersion,\n  settingsByAccountId,\n}: OwnProps & StateProps) {\n  const {\n    switchAccount,\n    openAddAccountModal,\n    openSettingsWithState,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const [isOpen, openAccountSelector, closeAccountSelector] = useFlag(false);\n  const [isEdit, openEdit, closeEdit] = useFlag(false);\n  const { shouldRender: shouldRenderDialog, ref: dialogContainerRef } = useShowTransition({\n    isOpen,\n    className: 'slow',\n    withShouldRender: true,\n  });\n\n  // The API doesn't check the TON wallet version for BIP39 and Tron-only accounts,\n  // therefore `currentWalletVersion !== 'W5'` can be incorrectly true in that cases.\n  const isBip39Account = currentAccount?.type === 'mnemonic' && Boolean(currentAccount?.addressByChain.tron);\n  const hasTonWallet = Boolean(currentAccount?.addressByChain.ton);\n  const withAddW5Button = currentWalletVersion !== 'W5' && currentAccount?.type !== 'hardware'\n    && hasTonWallet && !isBip39Account;\n\n  const accountsAmount = useMemo(() => Object.keys(accounts || {}).length, [accounts]);\n\n  const balanceValues = useMemo(() => {\n    return tokens ? calculateFullBalance(tokens, stakingStates) : undefined;\n  }, [tokens, stakingStates]);\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n  const { primaryWholePart, primaryFractionPart } = balanceValues || {};\n\n  useEffect(() => {\n    if (isOpen && forceClose) closeAccountSelector();\n  }, [forceClose, isOpen]);\n\n  useEffect(\n    () => (shouldRenderDialog ? captureEscKeyListener(closeAccountSelector) : undefined),\n    [closeAccountSelector, isOpen, shouldRenderDialog],\n  );\n  useEffect(\n    () => (shouldRenderDialog && dialogContainerRef.current ? trapFocus(dialogContainerRef.current) : undefined),\n    [dialogContainerRef, shouldRenderDialog],\n  );\n\n  const handleOpenAccountSelector = () => {\n    openAccountSelector();\n  };\n\n  const handleSwitchAccount = useLastCallback((accountId: string) => {\n    void vibrate();\n    closeAccountSelector();\n    switchAccount({ accountId });\n  });\n\n  const handleAddWalletClick = useLastCallback(() => {\n    void vibrate();\n    closeAccountSelector();\n    openAddAccountModal();\n  });\n\n  const handleAddV5WalletClick = useLastCallback(() => {\n    void vibrate();\n    closeAccountSelector();\n    openSettingsWithState({ state: SettingsState.WalletVersion });\n  });\n\n  function renderButton(\n    accountId: string,\n    addressByChain: Account['addressByChain'],\n    accountType: AccountType,\n    title?: string,\n  ) {\n    const { cardBackgroundNft } = settingsByAccountId?.[accountId] || {};\n    const isActive = accountId === currentAccountId;\n\n    return (\n      <AccountButton\n        key={accountId}\n        accountId={accountId}\n        addressByChain={addressByChain}\n        accountType={accountType}\n        isActive={isActive}\n        title={title}\n        cardBackgroundNft={cardBackgroundNft}\n        canEditAccount={!IS_CORE_WALLET}\n        onClick={handleSwitchAccount}\n        onEdit={openEdit}\n      />\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.container,\n    accountSelectorClassName,\n  );\n  const accountTitleClassName = buildClassName(\n    styles.accountTitle,\n    withAccountSelector && !withBalance && styles.accountTitleInteractive,\n    withBalance && styles.withBalance,\n    accountClassName,\n  );\n\n  function renderCurrentAccount() {\n    return (\n      <Transition\n        name=\"slideVerticalFade\"\n        activeKey={withBalance ? 1 : 0}\n        className={styles.root}\n        slideClassName={styles.slide}\n      >\n        {withBalance && (\n          <div className={buildClassName(styles.balance, 'rounded-font')}>\n            <SensitiveData\n              isActive={isSensitiveDataHidden}\n              shouldHoldSize\n              align=\"center\"\n              cols={10}\n              rows={2}\n              cellSize={8.5}\n            >\n              <span\n                className={styles.currencySwitcher}\n              >\n                {shortBaseSymbol.length === 1 && (\n                  <span className={buildClassName(styles.balanceCurrency, styles.balanceCurrencyPrefix)}>\n                    {shortBaseSymbol}\n                  </span>\n                )}\n                {primaryWholePart}\n                {primaryFractionPart && <span className={styles.balanceFractionPart}>.{primaryFractionPart}</span>}\n                {shortBaseSymbol.length > 1 && (\n                  <span className={styles.balanceCurrency}>&nbsp;{shortBaseSymbol}</span>\n                )}\n              </span>\n            </SensitiveData>\n          </div>\n        )}\n        <div className={accountTitleClassName} onClick={withAccountSelector ? handleOpenAccountSelector : undefined}>\n          <span className={styles.accountTitleInner}>\n            {(currentAccount && getAccountTitle(currentAccount)) ?? ''}\n          </span>\n          {withAccountSelector && !withBalance && (\n            <i className={buildClassName('icon icon-caret-down', styles.arrowIcon)} aria-hidden />\n          )}\n        </div>\n      </Transition>\n    );\n  }\n\n  function renderAccountsSelector() {\n    const dialogFullClassName = buildClassName(\n      styles.dialog,\n      accountsAmount <= ACCOUNTS_AMOUNT_FOR_COMPACT_DIALOG && styles.dialog_compact,\n    );\n\n    return (\n      <div\n        ref={dialogContainerRef}\n        className={fullClassName}\n        tabIndex={-1}\n        role=\"dialog\"\n      >\n        <div className={styles.backdrop} onClick={() => closeAccountSelector()} />\n        <div className={dialogFullClassName}>\n          {accounts && Object.entries(accounts).map(\n            ([accountId, { title, addressByChain, type }]) => {\n              return renderButton(accountId, addressByChain, type, title);\n            },\n          )}\n          {withAddW5Button && (\n            <Button className={styles.createAccountButton} onClick={handleAddV5WalletClick}>\n              {lang('Switch to W5')}\n              <i className={buildClassName(styles.createAccountIcon, 'icon-versions')} aria-hidden />\n            </Button>\n          )}\n          <Button className={styles.createAccountButton} onClick={handleAddWalletClick}>\n            {lang('Add Wallet')}\n            <i className={buildClassName(styles.createAccountIcon, 'icon-plus')} aria-hidden />\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {renderCurrentAccount()}\n\n      {shouldRenderDialog && (isPortrait\n        ? <Portal>{renderAccountsSelector()}</Portal>\n        : renderAccountsSelector()\n      )}\n\n      <AccountRenameModal\n        isOpen={isEdit}\n        currentAccountId={currentAccountId}\n        name={currentAccount?.title ?? ''}\n        onClose={closeEdit}\n      />\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const {\n      walletVersions,\n      settings: {\n        byAccountId: settingsByAccountId,\n        baseCurrency,\n        isSensitiveDataHidden,\n      },\n    } = global;\n\n    const accounts = selectNetworkAccounts(global);\n    const currentAccountId = global.currentAccountId!;\n    const currentAccount = accounts?.[currentAccountId];\n\n    const stakingStates = selectAccountStakingStates(global, currentAccountId);\n\n    return {\n      currentAccountId,\n      currentAccount,\n      accounts,\n      currentWalletVersion: walletVersions?.currentVersion,\n      settingsByAccountId,\n      tokens: selectCurrentAccountTokens(global),\n      baseCurrency,\n      stakingStates,\n      isSensitiveDataHidden,\n    };\n  },\n  (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n)(AccountSelector));\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"heOBVClj\",\"qrScannerButton\":\"qduFjDA3\"};","import React, { memo } from '../../../../../lib/teact/teact';\nimport { getActions } from '../../../../../global';\n\nimport { vibrate } from '../../../../../util/haptics';\n\nimport useLang from '../../../../../hooks/useLang';\nimport useLastCallback from '../../../../../hooks/useLastCallback';\n\nimport Button from '../../../../ui/Button';\n\nimport styles from './Buttons.module.scss';\n\nfunction AppLockButton() {\n  const { setIsManualLockActive } = getActions();\n\n  const lang = useLang();\n\n  const handleManualLock = useLastCallback(() => {\n    setIsManualLockActive({ isActive: true, shouldHideBiometrics: true });\n\n    void vibrate();\n  });\n\n  return (\n    <Button\n      className={styles.button}\n      isText\n      isSimple\n      kind=\"transparent\"\n      ariaLabel={lang('App Lock')}\n      onClick={handleManualLock}\n    >\n      <i className=\"icon-manual-lock\" aria-hidden />\n    </Button>\n  );\n}\n\nexport default memo(AppLockButton);\n","import React, { memo } from '../../../../../lib/teact/teact';\nimport { getActions } from '../../../../../global';\n\nimport buildClassName from '../../../../../util/buildClassName';\nimport { getIsMobileTelegramApp, IS_IOS } from '../../../../../util/windowEnvironment';\n\nimport useLang from '../../../../../hooks/useLang';\nimport useLastCallback from '../../../../../hooks/useLastCallback';\nimport useQrScannerSupport from '../../../../../hooks/useQrScannerSupport';\n\nimport Button from '../../../../ui/Button';\n\nimport styles from './Buttons.module.scss';\n\ninterface OwnProps {\n  isViewMode?: boolean;\n}\n\nfunction QrScannerButton({ isViewMode }: OwnProps) {\n  const { requestOpenQrScanner } = getActions();\n\n  const lang = useLang();\n  const isQrScannerSupported = useQrScannerSupport() && !isViewMode;\n\n  const handleQrScanClick = useLastCallback(() => {\n    if (IS_IOS && getIsMobileTelegramApp()) {\n      alert('Scanning is temporarily not available');\n      return;\n    }\n\n    requestOpenQrScanner();\n  });\n\n  if (!isQrScannerSupported) return undefined;\n\n  return (\n    <Button\n      className={buildClassName(styles.button, styles.qrScannerButton)}\n      isText\n      isSimple\n      kind=\"transparent\"\n      ariaLabel={lang('Scan QR Code')}\n      onClick={handleQrScanClick}\n    >\n      <i className=\"icon-qr-scanner\" aria-hidden />\n    </Button>\n  );\n}\n\nexport default memo(QrScannerButton);\n","import React, { memo } from '../../../../../lib/teact/teact';\nimport { getActions } from '../../../../../global';\n\nimport useLang from '../../../../../hooks/useLang';\n\nimport Button from '../../../../ui/Button';\n\nimport styles from './Buttons.module.scss';\n\nfunction SettingsButton() {\n  const { openSettings } = getActions();\n\n  const lang = useLang();\n\n  return (\n    <Button\n      className={styles.button}\n      isText\n      isSimple\n      kind=\"transparent\"\n      ariaLabel={lang('Main menu')}\n      onClick={openSettings}\n    >\n      <i className=\"icon-cog\" aria-hidden />\n    </Button>\n  );\n}\n\nexport default memo(SettingsButton);\n","import React, { memo } from '../../../../../lib/teact/teact';\n\nimport { getTelegramApp } from '../../../../../util/telegram';\n\nimport useLang from '../../../../../hooks/useLang';\nimport useLastCallback from '../../../../../hooks/useLastCallback';\n\nimport Button from '../../../../ui/Button';\n\nimport styles from './Buttons.module.scss';\n\ninterface OwnProps {\n  isFullscreen: boolean;\n}\n\nfunction ToggleFullscreenButton({ isFullscreen }: OwnProps) {\n  const lang = useLang();\n\n  const handleFullscreenToggle = useLastCallback(() => {\n    if (isFullscreen) {\n      getTelegramApp()?.exitFullscreen();\n    } else {\n      getTelegramApp()?.requestFullscreen();\n    }\n  });\n\n  return (\n    <Button\n      className={styles.button}\n      isText\n      isSimple\n      kind=\"transparent\"\n      ariaLabel={lang('Toggle fullscreen')}\n      onClick={handleFullscreenToggle}\n    >\n      <i className={isFullscreen ? 'icon-fullscreen-exit' : 'icon-fullscreen'} aria-hidden />\n    </Button>\n  );\n}\n\nexport default memo(ToggleFullscreenButton);\n","import React, { memo } from '../../../../../lib/teact/teact';\nimport { getActions } from '../../../../../global';\n\nimport { useDeviceScreen } from '../../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../../hooks/useLang';\nimport useLastCallback from '../../../../../hooks/useLastCallback';\n\nimport Button from '../../../../ui/Button';\n\nimport styles from './Buttons.module.scss';\n\nfunction ToggleLayoutButton() {\n  const { setAppLayout } = getActions();\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const handleAppLayoutToggle = useLastCallback(() => {\n    setAppLayout({ layout: isPortrait ? 'landscape' : 'portrait' });\n  });\n\n  return (\n    <Button\n      className={styles.button}\n      isText\n      isSimple\n      kind=\"transparent\"\n      ariaLabel={lang(isPortrait ? 'Toggle to landscape layout' : 'Toggle to portrait layout')}\n      onClick={handleAppLayoutToggle}\n    >\n      <i className={isPortrait ? 'icon-view-landscape' : 'icon-view-portrait'} aria-hidden />\n    </Button>\n  );\n}\n\nexport default memo(ToggleLayoutButton);\n","import React, { memo } from '../../../../../lib/teact/teact';\nimport { getActions } from '../../../../../global';\n\nimport useLang from '../../../../../hooks/useLang';\nimport useLastCallback from '../../../../../hooks/useLastCallback';\n\nimport Button from '../../../../ui/Button';\n\nimport styles from './Buttons.module.scss';\n\ninterface OwnProps {\n  isSensitiveDataHidden: boolean;\n}\n\nfunction ToggleSensitiveDataButton({ isSensitiveDataHidden }: OwnProps) {\n  const { setIsSensitiveDataHidden } = getActions();\n\n  const lang = useLang();\n\n  const handleSensitiveDataToggle = useLastCallback(() => {\n    setIsSensitiveDataHidden({ isHidden: !isSensitiveDataHidden });\n  });\n\n  return (\n    <Button\n      className={styles.button}\n      isText\n      isSimple\n      kind=\"transparent\"\n      ariaLabel={lang(isSensitiveDataHidden ? 'Show Sensitive Data' : 'Hide Sensitive Data')}\n      onClick={handleSensitiveDataToggle}\n    >\n      <i className={isSensitiveDataHidden ? 'icon-eye' : 'icon-eye-closed'} aria-hidden />\n    </Button>\n  );\n}\n\nexport default memo(ToggleSensitiveDataButton);\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"gwvxwQs9\",\"isScrolled\":\"_sQ5O2j4\",\"areTabsStuck\":\"IHMQLLd2\",\"headerInner\":\"EX9t6A36\",\"landscapeActions\":\"mKaPMjmN\",\"portraitActions\":\"oLoKLzOb\"};","import React, { memo } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport { IS_CORE_WALLET, IS_EXTENSION, IS_TELEGRAM_APP } from '../../../../config';\nimport { selectIsCurrentAccountViewMode, selectIsPasswordPresent } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { IS_ELECTRON } from '../../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\n\nimport AccountSelector from './AccountSelector';\nimport AppLockButton from './actionButtons/AppLockButton';\nimport QrScannerButton from './actionButtons/QrScannerButton';\nimport SettingsButton from './actionButtons/SettingsButton';\nimport ToggleFullscreenButton from './actionButtons/ToggleFullscreenButton';\nimport ToggleLayoutButton from './actionButtons/ToggleLayoutButton';\nimport ToggleSensitiveDataButton from './actionButtons/ToggleSensitiveDataButton';\n\nimport styles from './Header.module.scss';\n\nexport const HEADER_HEIGHT_REM = 3;\n\ninterface OwnProps {\n  isScrolled?: boolean;\n  withBalance?: boolean;\n  areTabsStuck?: boolean;\n}\n\ninterface StateProps {\n  isViewMode?: boolean;\n  isAppLockEnabled?: boolean;\n  isSensitiveDataHidden: boolean;\n  isFullscreen: boolean;\n}\n\nfunction Header({\n  isViewMode,\n  withBalance,\n  areTabsStuck,\n  isScrolled,\n  isAppLockEnabled,\n  isSensitiveDataHidden,\n  isFullscreen,\n}: OwnProps & StateProps) {\n  const { isPortrait } = useDeviceScreen();\n  const canToggleAppLayout = IS_EXTENSION || IS_ELECTRON;\n\n  if (isPortrait) {\n    const fullClassName = buildClassName(\n      styles.header,\n      areTabsStuck && styles.areTabsStuck,\n      isScrolled && styles.isScrolled,\n    );\n    const iconsAmount = 1 + (isAppLockEnabled ? 1 : 0) + (IS_TELEGRAM_APP ? 1 : 0) + (canToggleAppLayout ? 1 : 0);\n\n    return (\n      <div className={fullClassName}>\n        <div className={styles.headerInner} style={`--icons-amount: ${iconsAmount}`}>\n          <QrScannerButton isViewMode={isViewMode} />\n          <AccountSelector withBalance={withBalance} withAccountSelector={!IS_CORE_WALLET} />\n\n          <div className={styles.portraitActions}>\n            {isAppLockEnabled && <AppLockButton />}\n            <ToggleSensitiveDataButton isSensitiveDataHidden={isSensitiveDataHidden} />\n            {IS_TELEGRAM_APP && <ToggleFullscreenButton isFullscreen={isFullscreen} />}\n            {canToggleAppLayout && <ToggleLayoutButton />}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.header}>\n      <div className={styles.headerInner}>\n        <div className={styles.landscapeActions}>\n          <ToggleSensitiveDataButton isSensitiveDataHidden={isSensitiveDataHidden} />\n          <QrScannerButton isViewMode={isViewMode} />\n          {isAppLockEnabled && <AppLockButton />}\n        </div>\n\n        <AccountSelector withBalance={withBalance} withAccountSelector={!IS_CORE_WALLET} />\n\n        <div className={styles.landscapeActions}>\n          {IS_TELEGRAM_APP && <ToggleFullscreenButton isFullscreen={isFullscreen} />}\n          {canToggleAppLayout && <ToggleLayoutButton />}\n          <SettingsButton />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const {\n      isFullscreen,\n      settings: {\n        isAppLockEnabled,\n        isSensitiveDataHidden,\n      },\n    } = global;\n\n    const isPasswordPresent = selectIsPasswordPresent(global);\n    const isViewMode = selectIsCurrentAccountViewMode(global);\n\n    return {\n      isViewMode,\n      isAppLockEnabled: isAppLockEnabled && isPasswordPresent,\n      isFullscreen: Boolean(isFullscreen),\n      isSensitiveDataHidden: Boolean(isSensitiveDataHidden),\n    };\n  },\n  (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n)(Header));\n","import { useEffect } from '../lib/teact/teact';\n\nimport type { Theme } from '../global/types';\n\ninterface Props {\n  isActive: boolean;\n  currentTheme: Theme;\n  lightColor: string;\n  darkColor: string;\n}\n\nexport default function useBrowserUiColor({\n  isActive,\n  currentTheme,\n  lightColor,\n  darkColor,\n}: Props) {\n  useEffect(() => {\n    const metaElementLight = getThemeColorMetaElement(true);\n    const metaElementDark = getThemeColorMetaElement();\n    const lightContent = currentTheme === 'dark' ? darkColor : lightColor;\n    const darkContent = currentTheme === 'light' ? lightColor : darkColor;\n\n    if (isActive) {\n      metaElementLight.setAttribute('content', lightContent);\n      metaElementDark.setAttribute('content', darkContent);\n    }\n\n    return () => {\n      metaElementLight.remove();\n      metaElementDark.remove();\n    };\n  }, [lightColor, isActive, darkColor, currentTheme]);\n}\n\nfunction getThemeColorMetaElement(isLight?: boolean) {\n  let metaThemeColor = document.querySelector(\n    `meta[name=\"theme-color\"][media=\"(prefers-color-scheme: ${isLight ? 'light' : 'dark'})\"]`,\n  );\n\n  if (!metaThemeColor) {\n    metaThemeColor = document.createElement('meta');\n    metaThemeColor.setAttribute('name', 'theme-color');\n    metaThemeColor.setAttribute('media', `(prefers-color-scheme: ${isLight ? 'light' : 'dark'})`);\n    document.getElementsByTagName('head')[0].appendChild(metaThemeColor);\n  }\n\n  return metaThemeColor;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"portraitContainer\":\"nDlx2B3w\",\"container\":\"H35Oa6Xc\",\"testnetWarning\":\"FeOh0iRA\",\"wrapper\":\"PUMHiqAW\",\"wrapper_landscape\":\"j9PIExiC\",\"wrapperLandscape\":\"j9PIExiC\",\"wrapperFlex\":\"WUreitT1\",\"icon\":\"l3sBnS54\",\"text\":\"WFekTm0y\",\"light\":\"TR3h5nXi\",\"closeButton\":\"tQS1IhkF\",\"domainPreviewWrapper\":\"qB47T3_D\",\"domainPreview\":\"VOiW6ZiQ\",\"domainPreview_1\":\"qdZywUBz\",\"domainPreview1\":\"qdZywUBz\",\"domainPreview_2\":\"z795yKpX\",\"domainPreview2\":\"z795yKpX\",\"domainPreview_3\":\"QhDZUBwR\",\"domainPreview3\":\"QhDZUBwR\"};","import React, { memo } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { Theme } from '../../../../global/types';\n\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useBrowserUiColor from '../../../../hooks/useBrowserUiColor';\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport styles from './Warnings.module.scss';\n\ntype OwnProps = {\n  isRequired: boolean;\n  onOpenBackupWallet: () => void;\n};\n\ntype StateProps = {\n  theme: Theme;\n};\n\nconst UI_BG_RED_LIGHT = '#F36A6B';\nconst UI_BG_RED_DARK = '#C44646';\n\nfunction BackupWarning({ isRequired, theme, onOpenBackupWallet }: OwnProps & StateProps) {\n  const { shouldRender, ref } = useShowTransition({\n    isOpen: isRequired,\n    noMountTransition: true,\n    withShouldRender: true,\n  });\n  const { isLandscape } = useDeviceScreen();\n\n  const lang = useLang();\n\n  useBrowserUiColor({\n    isActive: isRequired,\n    currentTheme: theme,\n    lightColor: UI_BG_RED_LIGHT,\n    darkColor: UI_BG_RED_DARK,\n  });\n\n  const handleClick = () => {\n    onOpenBackupWallet();\n  };\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <div\n      ref={ref}\n      className={buildClassName(styles.wrapper, isLandscape && styles.wrapper_landscape)}\n      onClick={handleClick}\n    >\n      {lang('Wallet is not backed up')}\n      <i className={buildClassName(styles.icon, 'icon-chevron-right')} aria-hidden />\n      <p className={styles.text}>\n        {lang('Back up wallet to have full access to it')}\n      </p>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      return {\n        theme: global.settings.theme,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(BackupWarning),\n);\n","import React, { memo, useRef, useState } from '../../lib/teact/teact';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\n\nimport usePrevious from '../../hooks/usePrevious';\n\nimport './Collapsible.scss';\n\nconst CLASSES = {\n  collapsible: 'collapsible',\n  shown: 'shown',\n  open: 'open',\n  content: 'content',\n} as const;\n\ninterface OwnProps {\n  children: TeactJsx;\n  isShown: boolean;\n}\n\nconst DELAY = 200;\n\nfunction Collapsible({ children, isShown }: OwnProps) {\n  const containerRef = useRef<HTMLDivElement>();\n  const isOpenRef = useRef(isShown);\n  const [shouldRender, setShouldRender] = useState(isShown);\n  const prevIsShown = usePrevious(isShown);\n  const hideTimeoutRef = useRef<number>();\n\n  function toggleOpen() {\n    if (!containerRef.current) return;\n    containerRef.current.classList.toggle(CLASSES.open);\n    isOpenRef.current = !isOpenRef.current;\n  }\n\n  if (prevIsShown !== undefined && prevIsShown !== isShown) {\n    if (isShown && !isOpenRef.current) {\n      setShouldRender(true);\n      if (hideTimeoutRef.current) window.clearTimeout(hideTimeoutRef.current);\n      setTimeout(() => requestMutation(toggleOpen), DELAY);\n    } else {\n      requestMutation(toggleOpen);\n      hideTimeoutRef.current = window.setTimeout(() => {\n        setShouldRender(false);\n      }, DELAY);\n    }\n  }\n\n  const render = <div className={CLASSES.content}>{children}</div>;\n\n  return (\n    <div\n      ref={containerRef}\n      className={buildClassName(CLASSES.collapsible, isShown && CLASSES.shown, isOpenRef.current && CLASSES.open)}\n    >\n      {shouldRender ? render : undefined}\n    </div>\n  );\n}\n\nexport default memo(Collapsible);\n","import React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\n\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { getCountDaysToDate } from '../../../../util/dateFormat';\nimport { filterExpiringDomains, getDomainsExpirationDate, getTonDnsExpirationDate } from '../../../../util/dns';\nimport { stopEvent } from '../../../../util/domEvents';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useForceUpdate from '../../../../hooks/useForceUpdate';\nimport useLang from '../../../../hooks/useLang';\n\nimport Collapsible from '../../../ui/Collapsible';\n\nimport styles from './Warnings.module.scss';\n\ninterface StateProps {\n  orderedAddresses?: string[];\n  byAddress?: Record<string, ApiNft>;\n  dnsExpiration?: Record<string, number>;\n}\n\n// Store the addresses that the user ignores for the current session\nlet ignoredAddressForRenewal: string[] = [];\n\nfunction RenewDomainWarning({ orderedAddresses, byAddress, dnsExpiration }: StateProps) {\n  const { openDomainRenewalModal } = getActions();\n\n  const lang = useLang();\n  const { isLandscape } = useDeviceScreen();\n  const forceUpdate = useForceUpdate();\n\n  const nftForRenewal = useMemo(() => {\n    return filterExpiringDomains(orderedAddresses ?? [], byAddress, dnsExpiration)\n      .filter(({ address }) => !ignoredAddressForRenewal.includes(address));\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [byAddress, ignoredAddressForRenewal, orderedAddresses]);\n  const isShown = nftForRenewal.length > 0;\n  const renderedNftForRenewal = useCurrentOrPrev(isShown ? nftForRenewal : undefined, true);\n\n  const expireInDays = useMemo(() => {\n    const date = getDomainsExpirationDate(renderedNftForRenewal ?? [], undefined, dnsExpiration);\n\n    return date ? getCountDaysToDate(date) : undefined;\n  }, [renderedNftForRenewal, dnsExpiration]);\n\n  const expiredDomains = useMemo(() => {\n    if (!expireInDays || expireInDays >= 0 || !renderedNftForRenewal) return [];\n\n    const now = Date.now();\n\n    return renderedNftForRenewal.filter((nft) => {\n      const date = getTonDnsExpirationDate(nft, dnsExpiration);\n      return date && date < now;\n    });\n  }, [dnsExpiration, expireInDays, renderedNftForRenewal]);\n\n  function handleClick() {\n    const addresses = (renderedNftForRenewal ?? []).map(({ address }) => address);\n    openDomainRenewalModal({ addresses });\n  }\n\n  function handleClose(e: React.MouseEvent) {\n    stopEvent(e);\n\n    ignoredAddressForRenewal = [\n      ...ignoredAddressForRenewal,\n      ...(nftForRenewal.map(({ address }) => address)),\n    ];\n\n    forceUpdate();\n  }\n\n  function renderPreview() {\n    const previewNfts = (renderedNftForRenewal ?? []).slice(0, 3);\n    return (\n      <div className={styles.domainPreviewWrapper}>\n        {previewNfts.map((nft, index) => {\n          return (\n            <img\n              key={nft.address}\n              src={nft.thumbnail}\n              alt={nft.name}\n              style={`--index: ${index}`}\n              className={buildClassName(styles.domainPreview, styles[`domainPreview_${previewNfts.length}`])}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderWarningMessage() {\n    if (expireInDays === undefined) return undefined;\n\n    if (nftForRenewal.length === 1) {\n      return expireInDays < 0\n        ? lang('$domain_was_expired', { domain: nftForRenewal[0].name })\n        : lang('$domain_expire', {\n          domain: nftForRenewal[0].name,\n          days: lang('$in_days', expireInDays, 'i'),\n        });\n    }\n\n    return expireInDays < 0\n      ? lang('$domains_was_expired', { domain: expiredDomains.length }, undefined, expiredDomains.length)\n      : lang('$domains_expire', {\n        domain: nftForRenewal.length,\n        days: lang('$in_days', expireInDays, 'i'),\n      }, undefined, nftForRenewal.length);\n  }\n\n  return (\n    <Collapsible isShown={isShown}>\n      <div\n        className={buildClassName(\n          styles.wrapper,\n          styles.wrapperFlex,\n          isLandscape && styles.wrapper_landscape,\n        )}\n        onClick={handleClick}\n      >\n        {renderPreview()}\n        <div>\n          {(renderedNftForRenewal ?? []).length === 1 ? lang('Renew Domain') : lang('Renew Domains')}\n          <i className={buildClassName(styles.icon, 'icon-chevron-right')} aria-hidden />\n          <p className={buildClassName(styles.text, styles.light)}>\n            {renderWarningMessage()}\n          </p>\n        </div>\n        <button type=\"button\" className={styles.closeButton} aria-label={lang('Close')} onClick={handleClose}>\n          <i className=\"icon-close\" aria-hidden />\n        </button>\n      </div>\n    </Collapsible>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { nfts } = selectCurrentAccountState(global) || {};\n\n  return {\n    orderedAddresses: nfts?.orderedAddresses,\n    byAddress: nfts?.byAddress,\n    dnsExpiration: nfts?.dnsExpiration,\n  };\n})(RenewDomainWarning));\n","import React, { memo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport { MYTONWALLET_PROMO_URL } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { openUrl } from '../../../../util/openUrl';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport styles from './Warnings.module.scss';\n\ntype StateProps = {\n  isSecurityWarningHidden?: boolean;\n};\n\nfunction SecurityWarning({ isSecurityWarningHidden }: StateProps) {\n  const { closeSecurityWarning } = getActions();\n\n  const { shouldRender, ref } = useShowTransition({\n    isOpen: !isSecurityWarningHidden,\n    noMountTransition: true,\n    withShouldRender: true,\n  });\n  const { isLandscape } = useDeviceScreen();\n\n  const lang = useLang();\n\n  function handleClick() {\n    void openUrl(MYTONWALLET_PROMO_URL);\n  }\n\n  const handleClose = useLastCallback((e: React.MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n\n    closeSecurityWarning();\n  });\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <div\n      ref={ref}\n      className={buildClassName(styles.wrapper, isLandscape && styles.wrapper_landscape)}\n      onClick={handleClick}\n    >\n      {lang('Consider More Secure Version')}\n      <i className={buildClassName(styles.icon, 'icon-chevron-right')} aria-hidden />\n      <p className={styles.text}>{lang('Install our native app or browser extension.')}</p>\n\n      <button type=\"button\" className={styles.closeButton} aria-label={lang('Close')} onClick={handleClose}>\n        <i className=\"icon-close\" aria-hidden />\n      </button>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    return {\n      isSecurityWarningHidden: global.settings.isSecurityWarningHidden,\n    };\n  })(SecurityWarning),\n);\n","import React, { memo } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport { IS_CORE_WALLET, IS_EXTENSION, IS_TELEGRAM_APP } from '../../../../config';\nimport { selectCurrentAccountState, selectIsCurrentAccountViewMode } from '../../../../global/selectors';\nimport { IS_ANDROID, IS_ELECTRON, IS_IOS } from '../../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\n\nimport BackupWarning from './BackupWarning';\nimport RenewDomainWarning from './RenewDomainWarning';\nimport SecurityWarning from './SecurityWarning';\n\nimport styles from './Warnings.module.scss';\n\ntype OwnProps = {\n  onOpenBackupWallet: () => void;\n};\n\ntype StateProps = {\n  isTestnet?: boolean;\n  isBackupRequired: boolean;\n  isViewMode: boolean;\n};\n\nconst IS_UNSAFE_WEB = !IS_CORE_WALLET && !IS_ELECTRON && !IS_EXTENSION && !IS_IOS && !IS_ANDROID && !IS_TELEGRAM_APP;\n\nfunction Warnings({\n  isBackupRequired,\n  isTestnet,\n  isViewMode,\n  onOpenBackupWallet,\n}: OwnProps & StateProps) {\n  const { isPortrait } = useDeviceScreen();\n  const lang = useLang();\n\n  return (\n    <>\n      {isTestnet && (\n        <div className={isPortrait ? styles.portraitContainer : styles.container}>\n          <div className={styles.testnetWarning}>{lang('Testnet Version')}</div>\n        </div>\n      )}\n\n      {!isViewMode && (\n        <>\n          <BackupWarning isRequired={isBackupRequired} onOpenBackupWallet={onOpenBackupWallet} />\n          <RenewDomainWarning />\n        </>\n      )}\n      {IS_UNSAFE_WEB && <SecurityWarning />}\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal(\n    (global): StateProps => {\n      return {\n        isBackupRequired: Boolean(selectCurrentAccountState(global)?.isBackupRequired),\n        isTestnet: global.settings.isTestnet,\n        isViewMode: selectIsCurrentAccountViewMode(global),\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Warnings),\n);\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiStakingState } from '../../api/types';\nimport { ActiveTab, ContentTab, type Theme } from '../../global/types';\n\nimport { IS_CORE_WALLET } from '../../config';\nimport {\n  selectAccountStakingState,\n  selectCurrentAccount,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsCurrentAccountViewMode,\n  selectIsStakingDisabled,\n  selectIsSwapDisabled,\n} from '../../global/selectors';\nimport { useAccentColor } from '../../util/accentColor';\nimport buildClassName from '../../util/buildClassName';\nimport { captureEvents, SwipeDirection } from '../../util/captureEvents';\nimport { getStakingStateStatus } from '../../util/staking';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET, IS_ELECTRON, IS_TOUCH_ENV, REM,\n} from '../../util/windowEnvironment';\nimport { calcSafeAreaTop } from './helpers/calcSafeAreaTop';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useBackgroundMode, { isBackgroundModeActive } from '../../hooks/useBackgroundMode';\nimport { useOpenFromMainBottomSheet } from '../../hooks/useDelegatedBottomSheet';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectOnce from '../../hooks/useEffectOnce';\nimport useElementVisibility from '../../hooks/useElementVisibility';\nimport useFlag from '../../hooks/useFlag';\nimport useInterval from '../../hooks/useInterval';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePreventPinchZoomGesture from '../../hooks/usePreventPinchZoomGesture';\n\nimport LinkingDomainModal from '../domain/LinkingDomainModal';\nimport RenewDomainModal from '../domain/RenewDomainModal';\nimport InvoiceModal from '../receive/InvoiceModal';\nimport ReceiveModal from '../receive/ReceiveModal';\nimport StakeModal from '../staking/StakeModal';\nimport StakingClaimModal from '../staking/StakingClaimModal';\nimport StakingInfoModal from '../staking/StakingInfoModal';\nimport UnstakeModal from '../staking/UnstakeModal';\nimport UpdateAvailable from '../ui/UpdateAvailable';\nimport VestingModal from '../vesting/VestingModal';\nimport VestingPasswordModal from '../vesting/VestingPasswordModal';\nimport { LandscapeActions, PortraitActions } from './sections/Actions';\nimport Card from './sections/Card';\nimport Content from './sections/Content';\nimport Header, { HEADER_HEIGHT_REM } from './sections/Header/Header';\nimport Warnings from './sections/Warnings';\n\nimport styles from './Main.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ntype StateProps = {\n  currentTokenSlug?: string;\n  stakingState?: ApiStakingState;\n  isTestnet?: boolean;\n  isLedger?: boolean;\n  isViewMode?: boolean;\n  isStakingInfoModalOpen?: boolean;\n  isSwapDisabled?: boolean;\n  isStakingDisabled?: boolean;\n  isOnRampDisabled?: boolean;\n  isMediaViewerOpen?: boolean;\n  theme: Theme;\n  accentColorIndex?: number;\n};\n\nconst UPDATE_SWAPS_INTERVAL_NOT_FOCUSED = 15000; // 15 sec\nconst UPDATE_SWAPS_INTERVAL = 3000; // 3 sec\n\nfunction Main({\n  isActive,\n  currentTokenSlug,\n  stakingState,\n  isTestnet,\n  isViewMode,\n  isLedger,\n  isStakingInfoModalOpen,\n  isSwapDisabled,\n  isStakingDisabled,\n  isOnRampDisabled,\n  isMediaViewerOpen,\n  theme,\n  accentColorIndex,\n}: OwnProps & StateProps) {\n  const {\n    selectToken,\n    openBackupWalletModal,\n    setActiveContentTab,\n    closeStakingInfo,\n    openStakingInfoOrStart,\n    changeCurrentStaking,\n    setLandscapeActionsActiveTabIndex,\n    loadExploreSites,\n    openReceiveModal,\n    updatePendingSwaps,\n  } = getActions();\n\n  const cardRef = useRef<HTMLDivElement>();\n  const portraitContainerRef = useRef<HTMLDivElement>();\n  const landscapeContainerRef = useRef<HTMLDivElement>();\n\n  const safeAreaTop = calcSafeAreaTop();\n  const [isFocused, markIsFocused, unmarkIsFocused] = useFlag(!isBackgroundModeActive());\n  const [areTabsStuck, setAreTabsStuck] = useState(false);\n  const intersectionRootMarginTop = HEADER_HEIGHT_REM * REM + safeAreaTop;\n\n  const stakingStatus = stakingState ? getStakingStateStatus(stakingState) : 'inactive';\n\n  useBackgroundMode(unmarkIsFocused, markIsFocused);\n\n  useOpenFromMainBottomSheet('receive', openReceiveModal);\n  usePreventPinchZoomGesture(isMediaViewerOpen);\n\n  const { isPortrait, isLandscape } = useDeviceScreen();\n\n  useEffectOnce(() => {\n    if (IS_CORE_WALLET) return;\n\n    loadExploreSites({ isLandscape });\n  });\n\n  useInterval(updatePendingSwaps, isFocused ? UPDATE_SWAPS_INTERVAL : UPDATE_SWAPS_INTERVAL_NOT_FOCUSED);\n\n  // Use scroll detection for portrait mode\n  const { isVisible: isPageAtTop } = useElementVisibility({\n    isDisabled: !isPortrait || !isActive,\n    targetRef: cardRef,\n    rootMargin: `-${intersectionRootMarginTop}px 0px 0px 0px`,\n    threshold: [1],\n  });\n\n  const { isVisible: shouldHideBalanceInHeader } = useElementVisibility({\n    isDisabled: !isPortrait || !isActive,\n    targetRef: cardRef,\n    rootMargin: `-${intersectionRootMarginTop}px 0px 0px 0px`,\n  });\n\n  const handleTokenCardClose = useLastCallback(() => {\n    selectToken({ slug: undefined });\n    setActiveContentTab({ tab: ContentTab.Assets });\n  });\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV || !isPortrait || !portraitContainerRef.current || !currentTokenSlug) {\n      return undefined;\n    }\n\n    return captureEvents(portraitContainerRef.current, {\n      excludedClosestSelector: '.token-card',\n      onSwipe: (e, direction) => {\n        if (direction === SwipeDirection.Right) {\n          handleTokenCardClose();\n          return true;\n        }\n\n        return false;\n      },\n    });\n  }, [currentTokenSlug, handleTokenCardClose, isPortrait]);\n\n  const appTheme = useAppTheme(theme);\n  useAccentColor(isPortrait ? portraitContainerRef : landscapeContainerRef, appTheme, accentColorIndex);\n\n  const handleEarnClick = useLastCallback((stakingId?: string) => {\n    if (stakingId) changeCurrentStaking({ stakingId });\n\n    if (isPortrait || isViewMode) {\n      openStakingInfoOrStart();\n    } else {\n      setLandscapeActionsActiveTabIndex({ index: ActiveTab.Stake });\n    }\n  });\n\n  function renderPortraitLayout() {\n    return (\n      <div ref={portraitContainerRef} className={styles.portraitContainer}>\n        <div className={styles.head}>\n          <Warnings onOpenBackupWallet={openBackupWalletModal} />\n\n          <Header\n            withBalance={!shouldHideBalanceInHeader}\n            areTabsStuck={areTabsStuck}\n            isScrolled={!isPageAtTop}\n          />\n\n          <Card\n            ref={cardRef}\n            onTokenCardClose={handleTokenCardClose}\n            onYieldClick={handleEarnClick}\n          />\n\n          {!isViewMode && (\n            <PortraitActions\n              containerRef={portraitContainerRef}\n              isTestnet={isTestnet}\n              stakingStatus={stakingStatus}\n              isStakingDisabled={isStakingDisabled}\n              isSwapDisabled={isSwapDisabled}\n              isOnRampDisabled={isOnRampDisabled}\n              onEarnClick={handleEarnClick}\n            />\n          )}\n        </div>\n\n        <Content\n          isActive={isActive}\n          onStakedTokenClick={handleEarnClick}\n          onTabsStuck={setAreTabsStuck}\n        />\n      </div>\n    );\n  }\n\n  function renderLandscapeLayout() {\n    return (\n      <div ref={landscapeContainerRef} className={styles.landscapeContainer}>\n        <div className={buildClassName(styles.sidebar, 'custom-scroll')}>\n          <Warnings onOpenBackupWallet={openBackupWalletModal} />\n\n          <Header />\n\n          <Card onTokenCardClose={handleTokenCardClose} onYieldClick={handleEarnClick} />\n          {!isViewMode && (\n            <LandscapeActions\n              containerRef={landscapeContainerRef}\n              stakingStatus={stakingStatus}\n              isLedger={isLedger}\n              theme={theme}\n            />\n          )}\n        </div>\n        <div className={styles.main}>\n          <Content onStakedTokenClick={handleEarnClick} />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {!IS_DELEGATED_BOTTOM_SHEET && (isPortrait ? renderPortraitLayout() : renderLandscapeLayout())}\n\n      <StakeModal />\n      <StakingInfoModal isOpen={isStakingInfoModalOpen} onClose={closeStakingInfo} />\n      <ReceiveModal />\n      <InvoiceModal />\n      <UnstakeModal />\n      <StakingClaimModal />\n      <VestingModal />\n      <VestingPasswordModal />\n      <RenewDomainModal />\n      <LinkingDomainModal />\n      {!IS_ELECTRON && !IS_DELEGATED_BOTTOM_SHEET && <UpdateAvailable />}\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const { ledger } = selectCurrentAccount(global) || {};\n      const accountState = selectCurrentAccountState(global);\n      const { currentTokenSlug } = accountState ?? {};\n\n      const { isOnRampDisabled } = global.restrictions;\n\n      const stakingState = global.currentAccountId\n        ? selectAccountStakingState(global, global.currentAccountId)\n        : undefined;\n\n      return {\n        stakingState,\n        currentTokenSlug,\n        isTestnet: global.settings.isTestnet,\n        isLedger: Boolean(ledger),\n        isViewMode: selectIsCurrentAccountViewMode(global),\n        isStakingInfoModalOpen: global.isStakingInfoModalOpen,\n        isMediaViewerOpen: Boolean(global.mediaViewer?.mediaId),\n        isSwapDisabled: selectIsSwapDisabled(global),\n        isStakingDisabled: selectIsStakingDisabled(global),\n        isOnRampDisabled,\n        theme: global.settings.theme,\n        accentColorIndex: selectCurrentAccountSettings(global)?.accentColorIndex,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Main),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"portraitContainer\":\"c4YKj_bz\",\"head\":\"rfAUzAO1\",\"landscapeContainer\":\"nZyFvDbE\",\"sidebar\":\"mpB6taR7\",\"main\":\"Sr6Y7sw5\"};","import React, { memo } from '../../../lib/teact/teact';\n\nimport { IS_CAPACITOR } from '../../../config';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\n\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  error?: string;\n  onClearError: NoneToVoidFunction;\n  onSubmit: (password: string) => void;\n  onBack: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction AddAccountPasswordModal({\n  isActive,\n  isLoading,\n  error,\n  onClearError,\n  onSubmit,\n  onBack,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  return (\n    <>\n      {!getDoesUsePinPad() && <ModalHeader title={lang('Enter Password')} onClose={onClose} />}\n      <PasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        error={error}\n        operationType=\"passcode\"\n        withCloseButton={IS_CAPACITOR}\n        submitLabel={lang('Send')}\n        cancelLabel={lang('Back')}\n        onSubmit={onSubmit}\n        onCancel={onBack}\n        onUpdate={onClearError}\n      />\n    </>\n  );\n}\n\nexport default memo(AddAccountPasswordModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"ZNc8nV1w\",\"modalContent\":\"BGrP96yj\",\"actionsSection\":\"cOGOPS4Q\",\"actionsSectionShift\":\"t8FNRQDi\",\"importText\":\"nnhxqZYR\",\"walletVersionBlock\":\"Ai_X8CqD\",\"walletVersionText\":\"d8gw7TAv\"};","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { LedgerWalletInfo } from '../../../util/ledger/types';\nimport { type Account, SettingsState } from '../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../config';\nimport { selectIsPasswordPresent, selectNetworkAccounts } from '../../../global/selectors';\nimport { getHasInMemoryPassword, getInMemoryPassword } from '../../../util/authApi/inMemoryPasswordStore';\nimport buildClassName from '../../../util/buildClassName';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { IS_LEDGER_SUPPORTED } from '../../../util/windowEnvironment';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AuthImportViewAccount from '../../auth/AuthImportViewAccount';\nimport LedgerConnect from '../../ledger/LedgerConnect';\nimport LedgerSelectWallets from '../../ledger/LedgerSelectWallets';\nimport ListItem from '../../ui/ListItem';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport Transition from '../../ui/Transition';\nimport AddAccountPasswordModal from './AddAccountPasswordModal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './AddAccountModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  isLoading?: boolean;\n  error?: string;\n  isPasswordPresent: boolean;\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  withOtherWalletVersions?: boolean;\n  forceAddingTonOnlyAccount?: boolean;\n}\n\nconst enum RenderingState {\n  Initial,\n  Password,\n\n  ConnectHardware,\n  SelectAccountsHardware,\n\n  ViewMode,\n}\n\nfunction AddAccountModal({\n  isOpen,\n  isLoading,\n  error,\n  hardwareWallets,\n  isPasswordPresent,\n  accounts,\n  withOtherWalletVersions,\n  forceAddingTonOnlyAccount,\n}: StateProps) {\n  const {\n    addAccount,\n    clearAccountError,\n    closeAddAccountModal,\n    afterSelectHardwareWallets,\n    openSettingsWithState,\n    resetHardwareWalletConnect,\n    clearAccountLoading,\n  } = getActions();\n\n  const lang = useLang();\n  const [renderingKey, setRenderingKey] = useState<RenderingState>(RenderingState.Initial);\n\n  const [isNewAccountImporting, setIsNewAccountImporting] = useState<boolean>(false);\n\n  const handleBackClick = useLastCallback(() => {\n    setRenderingKey(RenderingState.Initial);\n    clearAccountError();\n  });\n\n  const handleModalClose = useLastCallback(() => {\n    setRenderingKey(RenderingState.Initial);\n    setIsNewAccountImporting(false);\n    clearAccountLoading();\n  });\n\n  const handleNewAccountClick = useLastCallback(() => {\n    if (!isPasswordPresent) {\n      addAccount({\n        method: 'createAccount',\n        password: '',\n      });\n      return;\n    }\n\n    if (getHasInMemoryPassword()) {\n      void getInMemoryPassword().then((password) => addAccount({\n        method: 'createAccount',\n        password: password!,\n      }));\n    } else {\n      setRenderingKey(RenderingState.Password);\n      setIsNewAccountImporting(false);\n    }\n  });\n  useEffect(() => {\n    if (forceAddingTonOnlyAccount) {\n      handleNewAccountClick();\n    }\n  }, [forceAddingTonOnlyAccount]);\n\n  const handleImportAccountClick = useLastCallback(() => {\n    if (!isPasswordPresent) {\n      addAccount({\n        method: 'importMnemonic',\n        password: '',\n      });\n      return;\n    }\n\n    setIsNewAccountImporting(true);\n\n    if (getHasInMemoryPassword()) {\n      void getInMemoryPassword().then((password) => addAccount({\n        method: 'importMnemonic',\n        password: password!,\n      }));\n    } else {\n      setRenderingKey(RenderingState.Password);\n    }\n  });\n\n  const handleViewModeWalletClick = useLastCallback(() => {\n    setRenderingKey(RenderingState.ViewMode);\n  });\n\n  const handleImportHardwareWalletClick = useLastCallback(() => {\n    resetHardwareWalletConnect();\n    setRenderingKey(RenderingState.ConnectHardware);\n  });\n\n  const handleAddLedgerWallet = useLastCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: [hardwareWallets![0].index] });\n    closeAddAccountModal();\n  });\n\n  const handleHardwareWalletConnected = useLastCallback((isSingleWallet: boolean) => {\n    if (isSingleWallet) {\n      handleAddLedgerWallet();\n      return;\n    }\n    setRenderingKey(RenderingState.SelectAccountsHardware);\n  });\n\n  const handleSubmit = useLastCallback((password: string) => {\n    addAccount({ method: isNewAccountImporting ? 'importMnemonic' : 'createAccount', password });\n  });\n\n  const handleOpenSettingWalletVersion = useLastCallback(() => {\n    closeAddAccountModal();\n    openSettingsWithState({ state: SettingsState.WalletVersion });\n  });\n\n  function renderSelector() {\n    return (\n      <>\n        <ModalHeader title={lang('Add Wallet')} onClose={closeAddAccountModal} />\n\n        <div className={buildClassName(styles.actionsSection, styles.actionsSectionShift)}>\n          <ListItem\n            icon=\"wallet-add\"\n            label={lang('Create New Wallet')}\n            onClick={handleNewAccountClick}\n            isLoading={!isNewAccountImporting && isLoading}\n          />\n        </div>\n\n        <span className={styles.importText}>{lang('or import from')}</span>\n\n        <div className={styles.actionsSection}>\n          <ListItem\n            icon=\"key\"\n            label={lang(IS_CORE_WALLET ? '24 Secret Words' : '12/24 Secret Words')}\n            onClick={handleImportAccountClick}\n            isLoading={isNewAccountImporting && isLoading}\n          />\n          {IS_LEDGER_SUPPORTED && (\n            <ListItem\n              icon=\"ledger-alt\"\n              label={lang('Ledger')}\n              onClick={handleImportHardwareWalletClick}\n            />\n          )}\n        </div>\n\n        {!IS_CORE_WALLET && (\n          <div className={styles.actionsSection}>\n            <ListItem\n              icon=\"wallet-view\"\n              label={lang('View Any Address')}\n              onClick={handleViewModeWalletClick}\n            />\n          </div>\n        )}\n\n        {withOtherWalletVersions && (\n          <div className={styles.walletVersionBlock}>\n            <span>\n              {lang('$wallet_switch_version_1', {\n                action: (\n                  <div\n                    role=\"button\"\n                    tabIndex={0}\n                    onClick={handleOpenSettingWalletVersion}\n                    className={styles.walletVersionText}\n                  >\n                    {lang('$wallet_switch_version_2')}\n                  </div>\n                ),\n              })}\n            </span>\n          </div>\n        )}\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: RenderingState) {\n    switch (currentKey) {\n      case RenderingState.Initial:\n        return renderSelector();\n      case RenderingState.Password:\n        return (\n          <AddAccountPasswordModal\n            isActive={isActive}\n            isLoading={isLoading}\n            error={error}\n            onClearError={clearAccountError}\n            onSubmit={handleSubmit}\n            onBack={handleBackClick}\n            onClose={closeAddAccountModal}\n          />\n        );\n      case RenderingState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleHardwareWalletConnected}\n            onCancel={handleBackClick}\n            onClose={closeAddAccountModal}\n          />\n        );\n      case RenderingState.SelectAccountsHardware:\n        return (\n          <LedgerSelectWallets\n            accounts={accounts}\n            hardwareWallets={hardwareWallets}\n            onCancel={handleBackClick}\n            onClose={closeAddAccountModal}\n          />\n        );\n      case RenderingState.ViewMode:\n        return (\n          <AuthImportViewAccount\n            isActive={isActive}\n            isLoading={isLoading}\n            onCancel={handleBackClick}\n            onClose={closeAddAccountModal}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      contentClassName={styles.modalContent}\n      nativeBottomSheetKey=\"add-account\"\n      forceFullNative={renderingKey === RenderingState.Password}\n      onCloseAnimationEnd={handleModalClose}\n      onClose={closeAddAccountModal}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={\n          renderingKey === RenderingState.Initial && !getHasInMemoryPassword() ? RenderingState.Password : undefined\n        }\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const { byId: versionById } = global.walletVersions ?? {};\n  const versions = versionById?.[global.currentAccountId!];\n  const withOtherWalletVersions = !!versions?.length;\n\n  const { auth: { forceAddingTonOnlyAccount }, hardware: { hardwareWallets } } = global;\n\n  return {\n    isOpen: global.isAddAccountModalOpen,\n    isLoading: global.accounts?.isLoading,\n    error: global.accounts?.error,\n    accounts,\n    isPasswordPresent,\n    hardwareWallets,\n    withOtherWalletVersions,\n    forceAddingTonOnlyAccount,\n  };\n})(AddAccountModal));\n","import React, {\n  memo,\n} from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport CheckWordsForm from '../common/backup/CheckWordsForm';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  isInModal?: boolean;\n  mnemonic?: string[];\n  checkIndexes?: number[];\n  buttonLabel: string;\n  onSubmit: NoneToVoidFunction;\n  onCancel: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n};\n\nfunction MnemonicCheck({\n  isActive, isInModal, mnemonic, checkIndexes, buttonLabel, onCancel, onSubmit, onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel,\n  });\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('Let\\'s Check!')} onClose={onClose} />\n      <div className={buildClassName(modalStyles.transitionContent, 'custom-scroll')}>\n        <p className={buildClassName(styles.info, styles.small)}>\n          {lang('Lets make sure your secrets words are recorded correctly.')}\n        </p>\n\n        <CheckWordsForm\n          descriptionClassName={buildClassName(styles.info, styles.small)}\n          isActive={isActive}\n          mnemonic={mnemonic}\n          checkIndexes={checkIndexes}\n          isInModal={isInModal}\n          errorClassName={buildClassName(styles.error, styles.small)}\n          onSubmit={onSubmit}\n        />\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onCancel} className={modalStyles.button}>{lang('Back')}</Button>\n          <Button isPrimary forFormId=\"check_mnemonic_form\" className={modalStyles.button}>{buttonLabel}</Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(MnemonicCheck);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport SecretWordsList from '../common/backup/SecretWordsList';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  mnemonic?: string[];\n  onClose: NoneToVoidFunction;\n  onNext?: NoneToVoidFunction;\n};\n\nfunction MnemonicList({\n  isActive, mnemonic, onNext, onClose,\n}: OwnProps) {\n  const lang = useLang();\n  const wordsCount = mnemonic?.length || 0;\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('%1$d Secret Words', wordsCount) as string} onClose={onClose} />\n      <div className={buildClassName(styles.mnemonicContainer, modalStyles.transitionContent, 'custom-scroll')}>\n        <SecretWordsList mnemonic={mnemonic} />\n        {onNext && (\n          <div className={modalStyles.buttons}>\n            <Button isPrimary onClick={onNext}>{lang('Let\\'s Check')}</Button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(MnemonicList);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport Emoji from '../ui/Emoji';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  privateKeyHex?: string;\n  onClose: NoneToVoidFunction;\n};\n\nfunction MnemonicList({\n  isActive, privateKeyHex, onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('Private Key')} onClose={onClose} />\n      <div className={buildClassName(styles.mnemonicContainer, modalStyles.transitionContent, 'custom-scroll')}>\n        <p className={buildClassName(styles.info, styles.small)}>\n          <Emoji from=\"\" />{' '}{renderText(lang('$mnemonic_warning'))}\n        </p>\n        <p className={styles.privateKey}>\n          {privateKeyHex}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(MnemonicList);\n","import React, { memo, useState } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SafetyRulesContent from '../common/backup/SafetyRulesContent';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onSubmit: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n};\n\nfunction SafetyRules({ isActive, onSubmit, onClose }: OwnProps) {\n  const lang = useLang();\n  const [writedownAccepted, setWritedownAccepted] = useState(false);\n  const [openWalletAccepted, setOpenWalletAccepted] = useState(false);\n  const [canBeStolenAccepted, setCanBeStolenAccepted] = useState(false);\n  const canSubmit = writedownAccepted && openWalletAccepted && canBeStolenAccepted;\n\n  const handleSubmit = useLastCallback(() => {\n    if (!canSubmit) {\n      return;\n    }\n\n    onSubmit();\n  });\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('Safety Rules')} onClose={onClose} />\n      <div className={buildClassName(modalStyles.transitionContent, 'custom-scroll')}>\n        <SafetyRulesContent\n          customStickerClassName={styles.modalSticker}\n          customButtonWrapperClassName={modalStyles.buttons}\n          isFullSizeButton={false}\n          isActive={isActive}\n          isFirstCheckboxSelected={writedownAccepted}\n          isSecondCheckboxSelected={openWalletAccepted}\n          isThirdCheckboxSelected={canBeStolenAccepted}\n          textFirst={lang('$safety_rules_one')}\n          textSecond={lang('$safety_rules_two')}\n          textThird={lang('$safety_rules_three')}\n          onFirstCheckboxClick={setWritedownAccepted}\n          onSecondCheckboxClick={setOpenWalletAccepted}\n          onThirdCheckboxClick={setCanBeStolenAccepted}\n          onSubmit={handleSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SafetyRules);\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { IS_CAPACITOR, MNEMONIC_COUNT } from '../../../config';\nimport { selectMnemonicForCheck } from '../../../global/actions/api/auth';\nimport { selectCurrentAccountState } from '../../../global/selectors';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport buildClassName from '../../../util/buildClassName';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport isMnemonicPrivateKey from '../../../util/isMnemonicPrivateKey';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { callApi } from '../../../api';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport MnemonicCheck from '../../auth/MnemonicCheck';\nimport MnemonicList from '../../auth/MnemonicList';\nimport MnemonicPrivateKey from '../../auth/MnemonicPrivateKey';\nimport SafetyRules from '../../auth/SafetyRules';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './BackupModal.module.scss';\n\ntype OwnProps = {\n  isOpen?: boolean;\n  onClose: () => void;\n};\n\ntype StateProps = {\n  currentAccountId?: string;\n  isBackupRequired?: boolean;\n};\n\nenum SLIDES {\n  confirm,\n  password,\n  mnemonic,\n  check,\n}\n\nfunction BackupModal({\n  isOpen, currentAccountId, onClose, isBackupRequired,\n}: OwnProps & StateProps) {\n  const { setIsBackupRequired, setIsPinAccepted, clearIsPinAccepted } = getActions();\n\n  const lang = useLang();\n  const [currentSlide, setCurrentSlide] = useState<SLIDES>(SLIDES.confirm);\n  const [nextKey, setNextKey] = useState<SLIDES | undefined>(SLIDES.password);\n  const [checkIndexes, setCheckIndexes] = useState<number[]>([]);\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | undefined>();\n\n  const mnemonicRef = useRef<string[] | undefined>(undefined);\n  const noResetFullNativeOnBlur = currentSlide === SLIDES.confirm || currentSlide === SLIDES.password;\n\n  useEffect(() => {\n    mnemonicRef.current = undefined;\n  }, [isOpen]);\n\n  const handleSafetyConfirm = useLastCallback(() => {\n    setCurrentSlide(SLIDES.password);\n    setNextKey(SLIDES.mnemonic);\n  });\n\n  const handlePasswordSubmit = useLastCallback(async (password: string) => {\n    setIsLoading(true);\n    mnemonicRef.current = await callApi('fetchMnemonic', currentAccountId!, password);\n\n    if (!mnemonicRef.current) {\n      setError('Wrong password, please try again.');\n      setIsLoading(false);\n      void vibrateOnError();\n      return;\n    }\n    if (getDoesUsePinPad()) {\n      setIsPinAccepted();\n      await vibrateOnSuccess(true);\n      clearIsPinAccepted();\n    }\n\n    setIsLoading(false);\n    setNextKey(SLIDES.check);\n    setCurrentSlide(SLIDES.mnemonic);\n  });\n\n  const handleBackupErrorUpdate = useLastCallback(() => {\n    setError(undefined);\n  });\n\n  const handleCheckMnemonic = useLastCallback(() => {\n    setCheckIndexes(selectMnemonicForCheck(mnemonicRef.current?.length || MNEMONIC_COUNT));\n    setCurrentSlide(SLIDES.check);\n    setNextKey(undefined);\n  });\n\n  const handleRestartCheckMnemonic = useLastCallback(() => {\n    setCurrentSlide(SLIDES.mnemonic);\n    setNextKey(SLIDES.check);\n  });\n\n  const handleModalClose = useLastCallback(() => {\n    setIsLoading(false);\n    setError(undefined);\n    setCurrentSlide(SLIDES.confirm);\n    setNextKey(SLIDES.password);\n  });\n\n  const handleCheckMnemonicSubmit = useLastCallback(() => {\n    setIsBackupRequired({ isMnemonicChecked: true });\n    onClose();\n  });\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: SLIDES) {\n    const mnemonic = mnemonicRef.current;\n\n    switch (currentKey) {\n      case SLIDES.confirm:\n        return (\n          <SafetyRules\n            isActive={isActive}\n            onSubmit={handleSafetyConfirm}\n            onClose={onClose}\n          />\n        );\n\n      case SLIDES.password:\n        return (\n          <>\n            {!getDoesUsePinPad() && (\n              <ModalHeader title={lang('Enter Password')} onClose={onClose} />\n            )}\n            <PasswordForm\n              isActive={isActive}\n              isLoading={isLoading}\n              error={error}\n              withCloseButton={IS_CAPACITOR}\n              submitLabel={lang('$back_up_auth')}\n              cancelLabel={lang('Cancel')}\n              onSubmit={handlePasswordSubmit}\n              onCancel={onClose}\n              onUpdate={handleBackupErrorUpdate}\n            />\n          </>\n        );\n\n      case SLIDES.mnemonic:\n        return mnemonic && isMnemonicPrivateKey(mnemonic) ? (\n          <MnemonicPrivateKey\n            privateKeyHex={mnemonic[0]}\n            onClose={onClose}\n          />\n        ) : (\n          <MnemonicList\n            isActive={isActive}\n            mnemonic={mnemonic}\n            onNext={isBackupRequired ? handleCheckMnemonic : undefined}\n            onClose={onClose}\n          />\n        );\n\n      case SLIDES.check:\n        return (\n          <MnemonicCheck\n            isActive={isActive}\n            isInModal\n            mnemonic={mnemonicRef.current as string[]}\n            checkIndexes={checkIndexes}\n            buttonLabel={lang('Done')}\n            onSubmit={handleCheckMnemonicSubmit}\n            onCancel={handleRestartCheckMnemonic}\n            onClose={onClose}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"backup\"\n      forceFullNative={currentSlide === SLIDES.password}\n      noResetFullNativeOnBlur={noResetFullNativeOnBlur}\n      onClose={onClose}\n      onCloseAnimationEnd={handleModalClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { isBackupRequired } = selectCurrentAccountState(global) || {};\n  return { currentAccountId: global.currentAccountId, isBackupRequired };\n})(BackupModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"S7OzI0EB\"};","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"gDlNRq3N\",\"dialog\":\"meAvQTC9\",\"container\":\"EWcWOV6u\",\"menuButton\":\"hLEOc4Ou\",\"closeButton\":\"mlPdYaCz\",\"icon\":\"xQLJ1EYA\",\"nftInfo\":\"VUUxnoTG\",\"thumbnail\":\"_LL4RfB7\",\"info\":\"j87GjThh\",\"nftName\":\"O9BeJGjg\",\"collectionName\":\"EHtLitju\",\"content\":\"uo4QatBc\",\"noData\":\"Tg1GGhMT\",\"label\":\"SiE9CJ9J\",\"description\":\"NsrMt36R\",\"attributesList\":\"bDlzAhU_\",\"attributeName\":\"Q59iVuTN\",\"attributeValue\":\"d7Ra9vbr\",\"first\":\"o8kAOnv4\",\"last\":\"gw8tS0Ge\",\"expandButton\":\"Wgu0lfq9\",\"collectionNameIcon\":\"BjwLITqA\",\"expandButtonIcon\":\"PcBlbvHP\"};","import React, { memo, useEffect, useRef, useState } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiNft, ApiNftAttribute } from '../../../api/types';\nimport { type IAnchorPosition, MediaType } from '../../../global/types';\n\nimport { selectCurrentAccountState } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { getCountDaysToDate } from '../../../util/dateFormat';\nimport { getTonDnsExpirationDate } from '../../../util/dns';\nimport { stopEvent } from '../../../util/domEvents';\nimport { disableSwipeToClose, enableSwipeToClose } from '../../../util/modalSwipeManager';\nimport { IS_ELECTRON, IS_MAC_OS } from '../../../util/windowEnvironment';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Modal from '../../ui/Modal';\nimport NftMenu from '../sections/Content/NftMenu';\n\nimport styles from './NftAttributesModal.module.scss';\n\ninterface StateProps {\n  nft?: ApiNft;\n  dnsExpiration?: Record<string, number>;\n}\n\nconst FOLD_LIMIT = 5;\nconst ANIMATED_ICON_SIZE = 250; // Preview size (500px) / 2\n\nfunction NftAttributesModal({ nft, dnsExpiration }: StateProps) {\n  const { closeNftAttributesModal, openMediaViewer, openNftCollection } = getActions();\n\n  const lang = useLang();\n  const menuButtonRef = useRef<HTMLButtonElement>();\n  const [menuAnchor, setMenuAnchor] = useState<IAnchorPosition>();\n  const { isPortrait } = useDeviceScreen();\n\n  const isOpen = !!nft;\n  const renderedNft = useCurrentOrPrev(nft, true);\n  const { metadata: { lottie, attributes } } = renderedNft || { metadata: {} };\n  const attributesCount = attributes?.length || 0;\n  const [isFolded, setIsFolded] = useState(attributesCount > FOLD_LIMIT);\n  const tonDnsExpiration = getTonDnsExpirationDate(renderedNft, dnsExpiration);\n  const dnsExpireInDays = tonDnsExpiration ? getCountDaysToDate(tonDnsExpiration) : undefined;\n  const list = attributes?.slice(0, isFolded ? FOLD_LIMIT : undefined) || [];\n  const isNoData = !renderedNft?.description && list.length === 0;\n\n  useSyncEffect(() => {\n    setIsFolded(attributesCount > FOLD_LIMIT + 1);\n  }, [attributesCount, nft]);\n\n  useEffect(() => {\n    if (!isOpen) return undefined;\n\n    disableSwipeToClose();\n\n    return enableSwipeToClose;\n  }, [isOpen]);\n\n  const handleOpenMenu = useLastCallback(() => {\n    const { right: x, y } = menuButtonRef.current!.getBoundingClientRect();\n    setMenuAnchor({ x, y });\n  });\n\n  const handleCloseMenu = useLastCallback(() => {\n    setMenuAnchor(undefined);\n  });\n\n  const handleExpand = useLastCallback((e: React.MouseEvent<HTMLAnchorElement>) => {\n    stopEvent(e);\n\n    setIsFolded(false);\n  });\n\n  const handleNftClick = useLastCallback(() => {\n    openMediaViewer({ mediaId: renderedNft!.address, mediaType: MediaType.Nft });\n  });\n\n  const handleCollectionClick = useLastCallback((e: React.MouseEvent<HTMLDivElement>) => {\n    stopEvent(e);\n\n    closeNftAttributesModal(undefined, { forceOnHeavyAnimation: true });\n    openNftCollection({ address: renderedNft!.collectionAddress! }, { forceOnHeavyAnimation: true });\n  });\n\n  const renderAttributeRow = (attribute: ApiNftAttribute, index: number) => {\n    const isFirst = index === 0;\n    const isLast = index === list.length - 1;\n\n    return (\n      <tr key={index}>\n        <th className={buildClassName(styles.attributeName, isFirst && styles.first, isLast && styles.last)}>\n          {attribute.trait_type}\n        </th>\n        <td className={buildClassName(styles.attributeValue, isFirst && styles.first, isLast && styles.last)}>\n          {attribute.value}\n        </td>\n      </tr>\n    );\n  };\n\n  if (!renderedNft) return undefined;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      className={styles.modal}\n      dialogClassName={styles.dialog}\n      contentClassName={styles.container}\n      onClose={closeNftAttributesModal}\n    >\n      <button\n        type=\"button\"\n        aria-label={lang('Close')}\n        className={styles.closeButton}\n        onClick={() => closeNftAttributesModal()}\n      >\n        <i\n          className={buildClassName(\n            styles.icon,\n            styles.actionIcon,\n            isPortrait && !(IS_ELECTRON && IS_MAC_OS) ? 'icon-chevron-left' : 'icon-close',\n          )}\n          aria-hidden\n        />\n      </button>\n      <NftMenu\n        nft={renderedNft}\n        ref={menuButtonRef}\n        dnsExpireInDays={dnsExpireInDays}\n        menuAnchor={menuAnchor}\n        className={styles.menuButton}\n        onOpen={handleOpenMenu}\n        onClose={handleCloseMenu}\n      />\n      <div className={buildClassName(styles.nftInfo, 'nft-container')} data-nft-address={renderedNft.address}>\n        {lottie ? (\n          <AnimatedIconWithPreview\n            size={ANIMATED_ICON_SIZE}\n            shouldStretch\n            play={isOpen}\n            noLoop={false}\n            tgsUrl={lottie}\n            previewUrl={renderedNft.thumbnail}\n            className={styles.thumbnail}\n            noPreviewTransition\n            onClick={handleNftClick}\n          />\n        ) : (\n          <img\n            src={renderedNft.image || renderedNft.thumbnail}\n            alt={renderedNft.name}\n            role=\"button\"\n            tabIndex={0}\n            className={styles.thumbnail}\n            onClick={handleNftClick}\n          />\n        )}\n        <div className={styles.info}>\n          <div className={styles.nftName}>{renderedNft.name}</div>\n          {renderedNft.collectionName && (\n            <div className={styles.collectionName} onClick={handleCollectionClick} tabIndex={0} role=\"button\">\n              {renderedNft.collectionName}\n              <i className={buildClassName(styles.collectionNameIcon, 'icon-chevron-right')} aria-hidden />\n            </div>\n          )}\n        </div>\n      </div>\n\n      <div className={buildClassName(styles.content, isNoData && styles.noData)}>\n        {isNoData && lang('No additional data.')}\n\n        {renderedNft.description && (\n          <>\n            <h3 className={styles.label}>{lang('Description')}</h3>\n            <div className={styles.description}>\n              {renderedNft.description}\n            </div>\n          </>\n        )}\n\n        {list.length > 0 && (\n          <>\n            <h3 className={styles.label}>{lang('Attributes')}</h3>\n            <table className={styles.attributesList}>\n              <tbody>\n                {list.map(renderAttributeRow)}\n              </tbody>\n            </table>\n\n            {isFolded && (\n              <a href=\"#\" className={styles.expandButton} onClick={handleExpand}>\n                {lang('Show All')}\n                <i className={buildClassName(styles.expandButtonIcon, 'icon-chevron-down')} aria-hidden />\n              </a>\n            )}\n          </>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { currentNftForAttributes, nfts } = selectCurrentAccountState(global) || {};\n  const { dnsExpiration } = nfts || {};\n\n  return {\n    nft: currentNftForAttributes,\n    dnsExpiration,\n  };\n})(NftAttributesModal));\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiChain, ApiCountryCode } from '../../../api/types';\nimport type { Theme } from '../../../global/types';\n\nimport { selectAccount } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { callApi } from '../../../api';\n\nimport useAppTheme from '../../../hooks/useAppTheme';\nimport useLang from '../../../hooks/useLang';\n\nimport Modal from '../../ui/Modal';\nimport Spinner from '../../ui/Spinner';\n\nimport styles from './OnRampWidgetModal.module.scss';\n\ninterface StateProps {\n  chain?: ApiChain;\n  address?: string;\n  countryCode?: ApiCountryCode;\n  theme: Theme;\n}\n\nconst ANIMATION_TIMEOUT = 200;\n\nfunction OnRampWidgetModal({\n  chain, address, countryCode, theme,\n}: StateProps) {\n  const {\n    closeOnRampWidgetModal,\n    showError,\n  } = getActions();\n\n  const isOpen = Boolean(chain) && Boolean(address);\n  const lang = useLang();\n  const animationTimeoutRef = useRef<number>();\n  const [isAnimationInProgress, setIsAnimationInProgress] = useState(true);\n  const [isLoading, setIsLoading] = useState(true);\n  const [iframeSrc, setIframeSrc] = useState('');\n  const appTheme = useAppTheme(theme);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setIsAnimationInProgress(true);\n      setIsLoading(true);\n      setIframeSrc('');\n    }\n\n    return () => window.clearTimeout(animationTimeoutRef.current);\n  }, [isOpen]);\n\n  useEffect(() => {\n    if (!isOpen) return;\n\n    if (countryCode === 'RU') {\n      setIframeSrc(`https://dreamwalkers.io/ru/mytonwallet/?wallet=${address}&give=CARDRUB&take=TON&type=buy`);\n      return;\n    }\n\n    void (async () => {\n      const response = await callApi('getMoonpayOnrampUrl', chain, address, appTheme);\n\n      if (response && 'error' in response) {\n        showError({ error: response.error });\n      } else {\n        setIframeSrc(response?.url || '');\n      }\n    })();\n  }, [address, appTheme, chain, countryCode, isOpen]);\n\n  const onIframeLoaded = () => {\n    setIsLoading(false);\n\n    animationTimeoutRef.current = window.setTimeout(() => {\n      setIsAnimationInProgress(false);\n    }, ANIMATION_TIMEOUT);\n  };\n\n  function renderContent() {\n    if (!iframeSrc) return undefined;\n\n    return (\n      <iframe\n        title=\"On Ramp Widget\"\n        onLoad={onIframeLoaded}\n        className={buildClassName(styles.iframe, !isLoading && styles.fadeIn)}\n        width=\"100%\"\n        height=\"100%\"\n        frameBorder=\"none\"\n        allow=\"autoplay; camera; microphone; payment\"\n        src={iframeSrc}\n      >\n        {lang('Cannot load widget')}\n      </iframe>\n    );\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      title={lang('Buy with Card')}\n      dialogClassName={styles.modalDialog}\n      forceFullNative\n      nativeBottomSheetKey=\"onramp-widget\"\n      onClose={closeOnRampWidgetModal}\n    >\n      <div className={styles.content}>\n        <div className={buildClassName(\n          styles.loaderContainer,\n          !isLoading && styles.fadeOut,\n          !isAnimationInProgress && styles.inactive,\n        )}\n        >\n          <Spinner />\n        </div>\n        {renderContent()}\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { addressByChain } = selectAccount(global, global.currentAccountId!) || {};\n  const { countryCode } = global.restrictions;\n  const { chainForOnRampWidgetModal: chain } = global;\n\n  return {\n    chain,\n    address: chain && addressByChain?.[chain],\n    countryCode,\n    theme: global.settings.theme,\n  };\n})(OnRampWidgetModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"LcOFGyVq\",\"content\":\"ccR1JZvK\",\"iframe\":\"l_Jb77z9\",\"loaderContainer\":\"RfEkSEyB\",\"fadeOut\":\"X5xveqOQ\",\"fade-out-opacity\":\"MtIO76aE\",\"fadeOutOpacity\":\"MtIO76aE\",\"fadeIn\":\"ZRxV9CWH\",\"fade-in-opacity\":\"clpdzldq\",\"fadeInOpacity\":\"clpdzldq\",\"inactive\":\"m3F53tk6\"};","// extracted by mini-css-extract-plugin\nexport default {\"title\":\"D1xdmb1p\",\"square\":\"cQ9fX2T7\",\"squareInner\":\"Y5_NorwC\",\"closeButton\":\"CxvvAWsI\",\"flashLightButton\":\"GRYD1l1J\",\"flashLightButtonEnabled\":\"om10jZuu\",\"documentRoot\":\"Fq9FxTrz\",\"scanner\":\"D8GViz8d\",\"scannerStarted\":\"MmIKemUX\"};","import type { StartScanOptions } from '@capacitor-mlkit/barcode-scanning';\nimport { BarcodeFormat, BarcodeScanner } from '@capacitor-mlkit/barcode-scanning';\nimport React, { memo, useRef, useState } from '../../../lib/teact/teact';\nimport { addExtraClass, removeExtraClass } from '../../../lib/teact/teact-dom';\nimport { getActions } from '../../../global';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { vibrateOnSuccess } from '../../../util/haptics';\nimport { pause } from '../../../util/schedulers';\nimport { DPR, IS_DELEGATING_BOTTOM_SHEET, IS_IOS } from '../../../util/windowEnvironment';\n\nimport useEffectWithPrevDeps from '../../../hooks/useEffectWithPrevDeps';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useShowTransition from '../../../hooks/useShowTransition';\n\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './QrScannerModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  onClose: NoneToVoidFunction;\n}\n\ntype Point = [number, number];\ntype Square = [Point, Point, Point, Point];\n\nconst START_SCAN_DELAY_MS = IS_IOS ? 160 : 360;\nconst MODAL_ANIMATION_DURATION_MS = IS_IOS ? 650 : 500;\nconst DESTROY_SCANNER_DELAY_MS = IS_IOS ? 250 : 500;\n\nfunction QrScannerModal({ isOpen, onClose }: OwnProps) {\n  const {\n    handleQrCode,\n  } = getActions();\n\n  const [isFlashlightAvailable, setIsFlashlightAvailable] = useState(false);\n  const [isFlashlightEnabled, setIsFlashlightEnabled] = useState(false);\n  const [isScannerStarted, setIsScannerStarted] = useState(false);\n  const { ref: flashlightRef, shouldRender: flashlightShouldRender } = useShowTransition({\n    isOpen: isFlashlightAvailable,\n    withShouldRender: true,\n  });\n\n  const lang = useLang();\n\n  const scanSquareRef = useRef<HTMLDivElement>();\n\n  const onCloseAnimationEnd = useLastCallback(async () => {\n    removeExtraClass(document.documentElement, styles.documentRoot);\n    await BarcodeScanner.stopScan();\n  });\n\n  const handleClose = useLastCallback(() => {\n    setIsScannerStarted(false);\n    setIsFlashlightEnabled(false);\n    onClose();\n  });\n\n  const startScan = useLastCallback(async () => {\n    const options: StartScanOptions = {\n      formats: [BarcodeFormat.QrCode],\n    };\n\n    const scanAreaCoordinates = getDomNodeDimensions(scanSquareRef.current);\n\n    await BarcodeScanner.removeAllListeners();\n    const listener = await BarcodeScanner.addListener(\n      'barcodesScanned',\n      async ({ barcodes: [barcode] }) => {\n        let qrCodeCoordinates = barcode.cornerPoints;\n        qrCodeCoordinates = qrCodeCoordinates ? sortCoordinatesClockwise(qrCodeCoordinates) : undefined;\n\n        if (\n          !scanAreaCoordinates\n          || !qrCodeCoordinates\n          || isQrCodeOutsideScanArea(scanAreaCoordinates, qrCodeCoordinates)\n        ) {\n          return;\n        }\n\n        await listener.remove();\n        await vibrateOnSuccess();\n        handleQrCode({ data: barcode.rawValue });\n        handleClose();\n        await pause(DESTROY_SCANNER_DELAY_MS);\n        if (IS_IOS) {\n          removeExtraClass(document.documentElement, styles.documentRoot);\n        }\n      },\n    );\n\n    setIsScannerStarted(true);\n    await BarcodeScanner.startScan(options);\n\n    // Wait until the scanner is started, after that we can determine if flashlight is available\n    if (!isFlashlightAvailable) {\n      void BarcodeScanner\n        .isTorchAvailable()\n        .then((result) => {\n          setIsFlashlightAvailable(result.available);\n        });\n    }\n    void BarcodeScanner\n      .isTorchEnabled()\n      .then((result) => {\n        setIsFlashlightEnabled(result.enabled);\n      });\n  });\n\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    if (IS_DELEGATING_BOTTOM_SHEET) return undefined;\n\n    let startScanTimeoutId: number;\n    let documentClassModifyTimeoutId: number;\n    if (isOpen) {\n      startScanTimeoutId = window.setTimeout(startScan, START_SCAN_DELAY_MS);\n      documentClassModifyTimeoutId = window.setTimeout(() => {\n        addExtraClass(document.documentElement, styles.documentRoot);\n      }, MODAL_ANIMATION_DURATION_MS);\n    } else if (prevIsOpen) {\n      handleClose();\n    }\n\n    return () => {\n      if (startScanTimeoutId) window.clearTimeout(startScanTimeoutId);\n      if (documentClassModifyTimeoutId) window.clearTimeout(documentClassModifyTimeoutId);\n    };\n  }, [isOpen, handleClose, startScan]);\n\n  const handleFlashlightClick = useLastCallback(async () => {\n    if (isFlashlightEnabled) {\n      await BarcodeScanner.disableTorch();\n    } else {\n      await BarcodeScanner.enableTorch();\n    }\n    setIsFlashlightEnabled(!isFlashlightEnabled);\n  });\n\n  const flashlightButtonClassName = buildClassName(\n    styles.flashLightButton,\n    isFlashlightEnabled && styles.flashLightButtonEnabled,\n  );\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={handleClose}\n      nativeBottomSheetKey=\"qr-scanner\"\n      forceFullNative\n      onCloseAnimationEnd={onCloseAnimationEnd}\n    >\n      <div className={buildClassName(styles.scanner, isScannerStarted && styles.scannerStarted)}>\n        <div\n          className={styles.closeButton}\n          aria-label={lang('Close')}\n          role=\"button\"\n          tabIndex={0}\n          onClick={handleClose}\n        >\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </div>\n\n        {flashlightShouldRender && (\n          <div\n            ref={flashlightRef}\n            className={flashlightButtonClassName}\n            onClick={handleFlashlightClick}\n            aria-label={lang('Toggle Flashlight')}\n            role=\"button\"\n            tabIndex={0}\n          >\n            <i className=\"icon-flashlight\" aria-hidden />\n          </div>\n        )}\n\n        <div className={styles.title}>{lang('Scan QR Code')}</div>\n\n        <div className={styles.square} ref={scanSquareRef}>\n          <div className={styles.squareInner} />\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(QrScannerModal);\n\nfunction sortCoordinatesClockwise(coordinates: Square): Square {\n  coordinates.sort((a, b) => a[1] - b[1]);\n\n  const topHalf = coordinates.slice(0, 2) as [Point, Point];\n  const bottomHalf = coordinates.slice(2) as [Point, Point];\n\n  topHalf.sort((a, b) => b[0] - a[0]);\n  bottomHalf.sort((a, b) => a[0] - b[0]);\n\n  return [...topHalf, ...bottomHalf];\n}\n\nfunction getDomNodeDimensions(node: HTMLDivElement | undefined): Square | undefined {\n  if (!node) {\n    return undefined;\n  }\n\n  const scanSquareRect = node.getBoundingClientRect();\n  const scaledRect = {\n    left: scanSquareRect.left * DPR,\n    right: scanSquareRect.right * DPR,\n    top: scanSquareRect.top * DPR,\n    bottom: scanSquareRect.bottom * DPR,\n    width: scanSquareRect.width * DPR,\n    height: scanSquareRect.height * DPR,\n  };\n\n  return [\n    [scaledRect.left, scaledRect.top],\n    [scaledRect.left + scaledRect.width, scaledRect.top],\n    [scaledRect.left + scaledRect.width, scaledRect.top + scaledRect.height],\n    [scaledRect.left, scaledRect.top + scaledRect.height],\n  ];\n}\n\nfunction isQrCodeOutsideScanArea(scanArea: Square, qrCodeCoordinates: Square): boolean {\n  return (\n    scanArea[0][0] > qrCodeCoordinates[0][0]\n    || scanArea[0][1] > qrCodeCoordinates[0][1]\n    || scanArea[1][0] < qrCodeCoordinates[1][0]\n    || scanArea[1][1] > qrCodeCoordinates[1][1]\n    || scanArea[2][0] < qrCodeCoordinates[2][0]\n    || scanArea[2][1] < qrCodeCoordinates[2][1]\n    || scanArea[3][0] > qrCodeCoordinates[3][0]\n    || scanArea[3][1] < qrCodeCoordinates[3][1]\n  );\n}\n","import React, {\n  memo, useEffect, useLayoutEffect, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\nimport captureKeyboardListeners from '../../../util/captureKeyboardListeners';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport transferStyles from '../../transfer/Transfer.module.scss';\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './SignatureModal.module.scss';\n\ntype StateProps = {\n  dataHex?: string;\n  error?: string;\n  isSigned?: boolean;\n};\n\nconst enum SLIDES {\n  confirm,\n  password,\n  complete,\n}\n\nfunction SignatureModal({\n  dataHex, error, isSigned,\n}: StateProps) {\n  const { submitSignature, clearSignatureError, cancelSignature } = getActions();\n\n  const lang = useLang();\n  const [isModalOpen, openModal, closeModal] = useFlag(false);\n  const [currentSlide, setCurrentSlide] = useState<SLIDES>(SLIDES.confirm);\n  const [nextKey, setNextKey] = useState<SLIDES | undefined>(SLIDES.password);\n\n  useLayoutEffect(() => {\n    if (dataHex) {\n      setCurrentSlide(SLIDES.confirm);\n      setNextKey(SLIDES.password);\n      openModal();\n    }\n  }, [dataHex, openModal]);\n\n  useLayoutEffect(() => {\n    if (isSigned) {\n      setCurrentSlide(SLIDES.complete);\n      setNextKey(undefined);\n    }\n  }, [isSigned]);\n\n  useEffect(() => (\n    currentSlide === SLIDES.complete\n      ? captureKeyboardListeners({ onEnter: closeModal })\n      : undefined\n  ), [closeModal, currentSlide]);\n\n  const handleConfirm = useLastCallback(() => {\n    setCurrentSlide(SLIDES.password);\n    setNextKey(SLIDES.complete);\n  });\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    submitSignature({ password });\n  });\n\n  function renderConfirm() {\n    return (\n      <>\n        <ModalHeader title={lang('Confirmation')} onClose={closeModal} />\n        <div className={modalStyles.transitionContent}>\n          <div className={transferStyles.label}>{lang('Signing Data')}</div>\n          <div className={transferStyles.inputReadOnly}>\n            {dataHex}\n          </div>\n\n          <div className={styles.error}>\n            {renderText(lang('$signature_warning'))}\n          </div>\n          <div className={modalStyles.buttons}>\n            <Button className={modalStyles.button} onClick={closeModal}>{lang('Cancel')}</Button>\n            <Button isPrimary className={modalStyles.button} onClick={handleConfirm}>{lang('Sign')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderPasswordForm(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Enter Password')} onClose={closeModal} />\n        <PasswordForm\n          isActive={isActive}\n          error={error}\n          submitLabel={lang('Sign')}\n          cancelLabel={lang('Cancel')}\n          onSubmit={handlePasswordSubmit}\n          onCancel={closeModal}\n          onUpdate={clearSignatureError}\n        />\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Done!')} onClose={closeModal} />\n\n        <div className={buildClassName(modalStyles.transitionContent, modalStyles.transitionContent_simple)}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n            previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n          />\n          <div className={styles.description}>\n            {lang('Signing was confirmed!')}\n          </div>\n\n          <div className={modalStyles.buttons}>\n            <Button isPrimary onClick={closeModal}>{lang('Close')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: SLIDES) {\n    switch (currentKey) {\n      case SLIDES.confirm:\n        return renderConfirm();\n\n      case SLIDES.password:\n        return renderPasswordForm(isActive);\n\n      case SLIDES.complete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isModalOpen}\n      dialogClassName={styles.modalDialog}\n      onClose={closeModal}\n      onCloseAnimationEnd={cancelSignature}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal(\n  (global): StateProps => {\n    const {\n      dataHex, error, isSigned,\n    } = global.currentSignature || {};\n\n    return {\n      dataHex, error, isSigned,\n    };\n  },\n)(SignatureModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"nrINNy28\",\"error\":\"IHEwWBxd\",\"sticker\":\"wlPR2AOa\",\"description\":\"bgrj6VK3\"};","import { useRef } from '../lib/teact/teact';\n\nimport useForceUpdate from './useForceUpdate';\nimport usePrevious from './usePrevious';\nimport useSyncEffect from './useSyncEffect';\n\nexport default function usePrevDuringAnimation<T>(current: T, duration?: number) {\n  const prev = usePrevious(current, true);\n  const timeoutRef = useRef<number>();\n  const forceUpdate = useForceUpdate();\n  // eslint-disable-next-line no-null/no-null\n  const isCurrentPresent = current !== undefined && current !== null;\n  // eslint-disable-next-line no-null/no-null\n  const isPrevPresent = prev !== undefined && prev !== null;\n\n  if (isCurrentPresent && timeoutRef.current) {\n    clearTimeout(timeoutRef.current);\n    timeoutRef.current = undefined;\n  }\n\n  useSyncEffect(() => {\n    // When `current` becomes empty\n    if (duration && !isCurrentPresent && isPrevPresent && !timeoutRef.current) {\n      timeoutRef.current = window.setTimeout(() => {\n        timeoutRef.current = undefined;\n        forceUpdate();\n      }, duration);\n    }\n  }, [duration, forceUpdate, isCurrentPresent, isPrevPresent]);\n\n  return !timeoutRef.current || !duration || isCurrentPresent ? current : prev;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"time\":\"AsvSkk14\",\"timeWarning\":\"CZBR69BT\"};","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\n\nimport type { LangFn } from '../../hooks/useLang';\n\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\nimport { setCancellableTimeout } from '../../util/schedulers';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Countdown.module.scss';\n\ninterface OwnProps {\n  timestamp: number;\n  deadline: number;\n  onCompleted?: NoneToVoidFunction;\n}\n\nconst WARNING_TIME = 5 * 60; // 5 minutes in seconds;\n\nfunction Countdown({\n  timestamp,\n  deadline,\n  onCompleted,\n}: OwnProps) {\n  const lang = useLang();\n  const initialSeconds = Math.floor((timestamp + deadline - Date.now()) / SECOND);\n  const [secondsLeft, setSecondsLeft] = useState(Math.max(initialSeconds, 0));\n  const shouldShowWarning = secondsLeft <= WARNING_TIME;\n\n  useEffect(() => {\n    const clearTimer = setCancellableTimeout(SECOND, () => {\n      if (secondsLeft <= 0) return;\n\n      setSecondsLeft(Math.floor((timestamp + deadline - Date.now()) / SECOND));\n    });\n\n    if (secondsLeft <= 0) {\n      onCompleted?.();\n    }\n\n    return clearTimer;\n  }, [secondsLeft, onCompleted, timestamp, deadline]);\n\n  return (\n    <span className={buildClassName(\n      styles.time,\n      shouldShowWarning && styles.timeWarning,\n    )}\n    >\n      {formatTime(lang, secondsLeft)}\n    </span>\n  );\n}\n\nfunction formatTime(lang: LangFn, seconds: number): string {\n  const pad = (num: number) => num.toString().padStart(2, '0');\n\n  const hours = Math.floor(seconds / 3600);\n  const minutes = Math.floor((seconds % 3600) / 60);\n  const remainingSeconds = seconds % 60;\n\n  let formattedTime = hours > 0 ? `${hours}:` : '';\n  formattedTime += `${hours > 0 ? pad(minutes) : minutes}:`;\n  formattedTime += pad(remainingSeconds);\n\n  return formattedTime;\n}\n\nexport default memo(Countdown);\n","// extracted by mini-css-extract-plugin\nexport default {\"infoBlock\":\"DqUj918m\",\"infoRow\":\"suN_Ci9f\",\"noIcon\":\"SUjgosvS\",\"noCurrency\":\"RjCLBwiu\",\"infoRowIcon\":\"kaMx21E_\",\"infoRowToken\":\"iNWWwjqK\",\"label\":\"uLUQH_M3\",\"infoRowChain\":\"NcAsWeQk\",\"infoRowAmount\":\"TzvDf_Jl\",\"infoRowAmountGreen\":\"I6xrY9jc\",\"infoRowAmountError\":\"iiFYcyID\",\"infoRowCurrency\":\"zab5hSsH\",\"infoRowCurrencyValue\":\"Q3pxLMbG\",\"infoSeparator\":\"ZO00ZPul\",\"infoSeparatorIcon\":\"fPy_1zLl\",\"infoSeparatorIconError\":\"GP0AJq0W\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { ApiSwapAsset } from '../../api/types';\nimport type { UserSwapToken } from '../../global/types';\n\nimport { TOKEN_WITH_LABEL } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport getPseudoRandomNumber from '../../util/getPseudoRandomNumber';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\nimport getSwapRate from '../../util/swap/getSwapRate';\n\nimport SensitiveData from '../ui/SensitiveData';\nimport TokenIcon from './TokenIcon';\n\nimport styles from './SwapTokensInfo.module.scss';\n\ninterface OwnProps {\n  isSensitiveDataHidden?: true;\n  tokenIn?: UserSwapToken | ApiSwapAsset;\n  amountIn?: string;\n  tokenOut?: UserSwapToken | ApiSwapAsset;\n  amountOut?: string;\n  isError?: boolean;\n}\n\nfunction SwapTokensInfo({\n  isSensitiveDataHidden, tokenIn, amountIn, tokenOut, amountOut, isError = false,\n}: OwnProps) {\n  const amountInCols = useMemo(() => getPseudoRandomNumber(5, 13, amountIn ?? ''), [amountIn]);\n  const amountOutCols = useMemo(() => getPseudoRandomNumber(5, 13, amountOut ?? ''), [amountOut]);\n\n  function renderTokenInfo(\n    amountCols: number,\n    token?: UserSwapToken | ApiSwapAsset,\n    amount = '0',\n    isReceived = false,\n  ) {\n    const amountWithSign = isReceived ? amount : `-${amount}`;\n    const withLabel = Boolean(token && TOKEN_WITH_LABEL[token.slug]);\n\n    return (\n      <div className={buildClassName(styles.infoRow, !token && styles.noIcon, isReceived && styles.noCurrency)}>\n        {Boolean(token) && (\n          <TokenIcon\n            token={token}\n            withChainIcon\n            className={styles.infoRowIcon}\n          />\n        )}\n\n        <span className={styles.infoRowToken}>\n          {token?.name}\n          {withLabel && (\n            <span className={buildClassName(styles.label, styles.chainLabel)}>{TOKEN_WITH_LABEL[token!.slug]}</span>\n          )}\n        </span>\n        <SensitiveData\n          isActive={isSensitiveDataHidden}\n          cols={amountCols}\n          rows={2}\n          cellSize={8}\n          align=\"right\"\n          className={buildClassName(\n            styles.infoRowAmount,\n            isReceived && styles.infoRowAmountGreen,\n            isError && styles.infoRowAmountError,\n          )}\n        >\n          {formatCurrencyExtended(amountWithSign, token?.symbol ?? '')}\n        </SensitiveData>\n        <span className={styles.infoRowChain}>{getChainNetworkName(token?.chain)}</span>\n        {!isReceived && renderCurrency(amountIn, amountOut, tokenIn, tokenOut)}\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.infoBlock}>\n      {renderTokenInfo(amountInCols, tokenIn, amountIn)}\n      <div className={styles.infoSeparator}>\n        <i\n          className={buildClassName(\n            styles.infoSeparatorIcon,\n            isError && styles.infoSeparatorIconError,\n            isError ? 'icon-close' : 'icon-arrow-down',\n          )}\n          aria-hidden\n        />\n      </div>\n      {renderTokenInfo(amountOutCols, tokenOut, amountOut, true)}\n    </div>\n  );\n}\n\nexport default memo(SwapTokensInfo);\n\nfunction renderCurrency(amountIn?: string, amountOut?: string, fromToken?: ApiSwapAsset, toToken?: ApiSwapAsset) {\n  const rate = getSwapRate(amountIn, amountOut, fromToken, toToken);\n  if (!rate) return undefined;\n\n  return (\n    <span className={styles.infoRowCurrency}>\n      {rate.firstCurrencySymbol} \n      <span className={styles.infoRowCurrencyValue}>\n        {rate.price}{' '}{rate.secondCurrencySymbol}\n      </span>\n    </span>\n  );\n}\n","import React from '../../lib/teact/teact';\n\nimport type { OwnProps as FeeProps } from '../ui/Fee';\n\nimport useLang from '../../hooks/useLang';\n\nimport Fee from '../ui/Fee';\nimport LoadingDots from '../ui/LoadingDots';\nimport Transition from '../ui/Transition';\n\nimport styles from './TransactionFee.module.scss';\n\ninterface OwnProps extends Pick<FeeProps, 'terms' | 'token' | 'precision'> {\n  isLoading?: boolean;\n  className?: string;\n}\n\nexport default function TransactionFee({ terms, token, precision, isLoading, className }: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <div className={className}>\n      <div className={styles.label}>\n        {lang('Fee')}\n      </div>\n      <div className={styles.field}>\n        <Transition activeKey={isLoading ? 1 : 0} name=\"fade\" className={styles.field_transition}>\n          {isLoading\n            ? <LoadingDots isActive className={styles.field_loading} />\n            : <Fee terms={terms} token={token} precision={precision} />}\n        </Transition>\n      </div>\n    </div>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"label\":\"FHA1HU_P\",\"field\":\"OgExpTBf\",\"field_transition\":\"JaS_WGfX\",\"fieldTransition\":\"JaS_WGfX\",\"field_loading\":\"SFz4gihZ\",\"fieldLoading\":\"SFz4gihZ\"};","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"E6N6MD3z\",\"unstakeModal\":\"gnNvHGfL\",\"passwordFormContent\":\"KL1uqo4o\",\"passwordFormContentInModal\":\"CZ9Kse33\",\"sticker\":\"AeVBXxbG\",\"footer\":\"rQ0tvCAk\",\"copyButtonWrapper\":\"VtMfi0Xs\",\"feeField\":\"fSQYvfg1\",\"comment\":\"jxc6euua\",\"button\":\"eww3tEAs\",\"buttonWide\":\"ND5LbWGY\",\"unstakeTime\":\"hDTeTwua\",\"unstakeTimeIcon\":\"tZ2WbGH0\",\"scamImage\":\"BASL0DzO\",\"scamAddress\":\"km7wfY2m\",\"modalTitle\":\"yadTct7r\",\"transactionHeader\":\"uAQ2u0Hd\",\"headerTitle\":\"J16GqrT7\",\"headerTitle__badge\":\"arXCGBG7\",\"headerTitleBadge\":\"arXCGBG7\",\"warning\":\"w8eOJTS4\",\"headerDate\":\"fiJguUso\",\"infoBlock\":\"NGumnj62\",\"textFieldWrapper\":\"UGOei_Ih\",\"swapSupportBlock\":\"mVgCbbey\",\"textFieldLabel\":\"lXDi3LO1\",\"advancedTooltip\":\"hr8oR5Ry\",\"advancedTooltipContainer\":\"t6X1h79H\",\"errorCexBlock\":\"Qr0LqmBg\",\"errorCexMessage\":\"uSKXuCCa\",\"errorCexEmail\":\"cQ1RlviM\",\"changellyInfoBlock\":\"IZsujzDG\",\"changellyDescription\":\"IgVxAVQB\",\"changellyDescriptionBold\":\"EOk33hg6\",\"qrCode\":\"DfLLakci\",\"qrCodeHidden\":\"L9e2rlZo\",\"scamWarning\":\"OAz9rga6\"};","import React, { memo, useEffect, useMemo } from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiSwapActivity, ApiSwapAsset } from '../../../api/types';\nimport type { Account, Theme } from '../../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_ICON_PX,\n  ANIMATION_END_DELAY,\n  ANIMATION_LEVEL_MIN,\n  CHANGELLY_LIVE_CHAT_URL,\n  CHANGELLY_SECURITY_EMAIL,\n  CHANGELLY_SUPPORT_EMAIL,\n  CHANGELLY_WAITING_DEADLINE,\n  TONCOIN,\n} from '../../../config';\nimport { Big } from '../../../lib/big.js';\nimport { getIsInternalSwap, getIsSupportedChain, resolveSwapAsset } from '../../../global/helpers';\nimport {\n  selectCurrentAccount,\n  selectCurrentAccountState,\n  selectIsCurrentAccountViewMode,\n} from '../../../global/selectors';\nimport { parseTxId } from '../../../util/activities';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatFullDay, formatTime } from '../../../util/dateFormat';\nimport { formatCurrencyExtended } from '../../../util/formatNumber';\nimport getChainNetworkName from '../../../util/swap/getChainNetworkName';\nimport { getExplorerTransactionUrl } from '../../../util/url';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../../hooks/useAppTheme';\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport usePrevDuringAnimation from '../../../hooks/usePrevDuringAnimation';\nimport useQrCode from '../../../hooks/useQrCode';\n\nimport Countdown from '../../common/Countdown';\nimport SwapTokensInfo from '../../common/SwapTokensInfo';\nimport TransactionFee from '../../common/TransactionFee';\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport Modal, { CLOSE_DURATION, CLOSE_DURATION_PORTRAIT } from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './TransactionModal.module.scss';\n\ntype StateProps = {\n  addressByChain?: Account['addressByChain'];\n  activity?: ApiSwapActivity;\n  tokensBySlug?: Record<string, ApiSwapAsset>;\n  theme: Theme;\n  isSwapDisabled?: boolean;\n  isSensitiveDataHidden?: true;\n};\n\nconst CHANGELLY_EXPIRE_CHECK_STATUSES = new Set(['new', 'waiting']);\nconst CHANGELLY_PENDING_STATUSES = new Set(['new', 'waiting', 'confirming', 'exchanging', 'sending']);\nconst CHANGELLY_ERROR_STATUSES = new Set(['failed', 'expired', 'refunded', 'overdue']);\nconst ONCHAIN_ERROR_STATUSES = new Set(['failed', 'expired']);\n\nfunction SwapActivityModal({\n  activity, tokensBySlug, theme, addressByChain, isSwapDisabled, isSensitiveDataHidden,\n}: StateProps) {\n  const {\n    fetchActivityDetails,\n    startSwap,\n    closeActivityInfo,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const isOpen = Boolean(activity);\n  const animationLevel = getGlobal().settings.animationLevel;\n  const animationDuration = animationLevel === ANIMATION_LEVEL_MIN\n    ? 0\n    : (isPortrait ? CLOSE_DURATION_PORTRAIT : CLOSE_DURATION) + ANIMATION_END_DELAY;\n  const renderedActivity = usePrevDuringAnimation(activity, animationDuration);\n  const appTheme = useAppTheme(theme);\n\n  const {\n    id,\n    hashes,\n    timestamp,\n    networkFee = '0',\n    ourFee = '0',\n    shouldLoadDetails,\n  } = renderedActivity ?? {};\n  const { payinAddress, payoutAddress, payinExtraId } = renderedActivity?.cex || {};\n\n  let fromAmount = '0';\n  let toAmount = '0';\n  let isPending = true;\n  let isError = false;\n  let shouldRenderCexInfo = false;\n  let isCex = false;\n  let isCexError = false;\n  let isCexHold = false;\n  let isCexWaiting = false;\n  let isCexPending = false;\n  let isExpired = false;\n  let cexTransactionId = '';\n  let title = '';\n  let titleBadge: string | undefined;\n  let isTitleBadgeWarning = false;\n  let cexErrorMessage = '';\n  let isFromToncoin = true;\n  let isCountdownFinished = false;\n\n  const fromToken = useMemo(() => {\n    if (!renderedActivity?.from || !tokensBySlug) return undefined;\n\n    return resolveSwapAsset(tokensBySlug, renderedActivity.from);\n  }, [renderedActivity?.from, tokensBySlug]);\n\n  const toToken = useMemo(() => {\n    if (!renderedActivity?.to || !tokensBySlug) return undefined;\n\n    return resolveSwapAsset(tokensBySlug, renderedActivity.to);\n  }, [renderedActivity?.to, tokensBySlug]);\n  const isInternalSwap = getIsInternalSwap({\n    from: fromToken, to: toToken, toAddress: payoutAddress, addressByChain,\n  });\n\n  if (renderedActivity) {\n    const {\n      status, from, cex,\n    } = renderedActivity;\n    fromAmount = renderedActivity.fromAmount;\n    toAmount = renderedActivity.toAmount;\n    isFromToncoin = from === TONCOIN.slug;\n    isCex = Boolean(cex);\n\n    if (cex) {\n      isCountdownFinished = timestamp\n        ? (timestamp + CHANGELLY_WAITING_DEADLINE - Date.now() < 0)\n        : false;\n      isExpired = CHANGELLY_EXPIRE_CHECK_STATUSES.has(cex.status) && isCountdownFinished;\n      shouldRenderCexInfo = cex.status !== 'finished';\n      isPending = !isExpired && CHANGELLY_PENDING_STATUSES.has(cex.status);\n      isCexPending = isPending;\n      isCexError = isExpired || CHANGELLY_ERROR_STATUSES.has(cex.status);\n      isCexHold = cex.status === 'hold';\n      // Skip the 'waiting' status for transactions from Toncoin to other chains\n      // or from TRON to TON inside a multichain wallet for delayed status updates from hangelly\n      isCexWaiting = cex.status === 'waiting' && !isExpired && !isInternalSwap && !isFromToncoin;\n      cexTransactionId = cex.transactionId;\n    } else {\n      isPending = status === 'pending';\n      isError = ONCHAIN_ERROR_STATUSES.has(status);\n    }\n\n    if (isPending) {\n      title = lang('Swapping');\n    } else if (isCexHold) {\n      title = lang('$swap_action');\n      titleBadge = lang('On Hold');\n      isTitleBadgeWarning = true;\n    } else if (isCexError) {\n      const { status: cexStatus } = renderedActivity.cex ?? {};\n      if (cexStatus === 'expired' || cexStatus === 'overdue') {\n        title = lang('$swap_action');\n        titleBadge = lang('Expired');\n        cexErrorMessage = lang('You have not sent the coins to the specified address.');\n      } else if (cexStatus === 'refunded') {\n        title = lang('$swap_action');\n        titleBadge = lang('Refunded');\n        cexErrorMessage = lang('Exchange failed and coins were refunded to your wallet.');\n      } else {\n        title = lang('$swap_action');\n        titleBadge = lang('Failed');\n      }\n    } else if (isError) {\n      title = lang('$swap_action');\n      titleBadge = lang('Failed');\n    } else {\n      title = lang('Swapped');\n    }\n  }\n\n  const transactionHash = id ? isCex ? hashes?.[0] : parseTxId(id).hash : undefined;\n  const transactionUrl = getExplorerTransactionUrl('ton', transactionHash);\n\n  const shouldShowQrCode = !payinExtraId && toToken?.chain === 'ton' && !isInternalSwap;\n  const { qrCodeRef, isInitialized } = useQrCode({\n    address: payinAddress,\n    isActive: Boolean(payinAddress),\n    hiddenClassName: styles.qrCodeHidden,\n    hideLogo: true,\n  });\n\n  const handleClose = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n  });\n\n  const handleSwapClick = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n    startSwap({\n      tokenInSlug: fromToken!.slug,\n      tokenOutSlug: toToken!.slug,\n      amountIn: fromAmount,\n    });\n  });\n\n  useEffect(() => {\n    if (id && shouldLoadDetails) fetchActivityDetails({ id });\n  }, [id, shouldLoadDetails]);\n\n  function renderHeader() {\n    return (\n      <div className={styles.transactionHeader}>\n        <div className={styles.headerTitle}>\n          {title}\n          {isPending && (\n            <AnimatedIconWithPreview\n              play={isOpen}\n              size={ANIMATED_STICKER_TINY_ICON_PX}\n              nonInteractive\n              noLoop={false}\n              tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClock}\n              previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClock}\n            />\n          )}\n          {!!titleBadge && (\n            <span className={buildClassName(styles.headerTitle__badge, isTitleBadgeWarning && styles.warning)}>\n              {titleBadge}\n            </span>\n          )}\n        </div>\n        {!!timestamp && (\n          <div className={styles.headerDate}>\n            {formatFullDay(lang.code!, timestamp)}, {formatTime(timestamp)}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  function renderFooterButton() {\n    let isButtonVisible = true;\n    let buttonText = 'Swap Again';\n\n    if (isCexWaiting) {\n      return (\n        <Button onClick={handleClose} className={styles.button}>\n          {lang('Close')}\n        </Button>\n      );\n    }\n\n    if (isCexHold) {\n      isButtonVisible = false;\n    } else if (isCexError) {\n      const { status: cexStatus } = renderedActivity?.cex ?? {};\n      if (cexStatus === 'expired' || cexStatus === 'refunded' || cexStatus === 'overdue') {\n        buttonText = 'Try Again';\n      }\n    }\n\n    if (!isButtonVisible) {\n      return undefined;\n    }\n\n    return (\n      <Button onClick={handleSwapClick} className={styles.button}>\n        {lang(buttonText)}\n      </Button>\n    );\n  }\n\n  function renderCexInformation() {\n    if (isCexHold) {\n      return (\n        <div className={styles.textFieldWrapper}>\n          <span className={styles.changellyDescription}>\n            {lang('$swap_changelly_kyc_security', {\n              email: (\n                <span className={styles.changellyDescriptionBold}>\n                  {CHANGELLY_SECURITY_EMAIL}\n                </span>\n              ),\n            })}\n          </span>\n          {cexTransactionId && (\n            <InteractiveTextField\n              text={cexTransactionId}\n              copyNotification={lang('Transaction ID was copied!')}\n              noSavedAddress\n              noExplorer\n            />\n          )}\n        </div>\n      );\n    }\n\n    return (\n      <div className={buildClassName(styles.textFieldWrapper, styles.swapSupportBlock)}>\n        {cexErrorMessage && <span className={styles.errorCexMessage}>{cexErrorMessage}</span>}\n\n        {isCexPending && (\n          <span className={buildClassName(styles.changellyDescription)}>\n            {lang('Please note that it may take up to a few hours for tokens to appear in your wallet.')}\n          </span>\n        )}\n        {isCountdownFinished && (\n          <>\n            <span className={styles.changellyDescription}>\n              {lang('$swap_changelly_support', {\n                livechat: (\n                  <a\n                    href={CHANGELLY_LIVE_CHAT_URL}\n                    target=\"_blank\"\n                    rel=\"noreferrer\"\n                    className={styles.changellyDescriptionBold}\n                  >\n                    {lang('Changelly Live Chat')}\n                  </a>\n                ),\n                email: (\n                  <span className={styles.changellyDescriptionBold}>\n                    {CHANGELLY_SUPPORT_EMAIL}\n                  </span>\n                ),\n              })}\n            </span>\n            {cexTransactionId && (\n              <InteractiveTextField\n                text={cexTransactionId}\n                copyNotification={lang('Transaction ID was copied!')}\n                noSavedAddress\n                noExplorer\n              />\n            )}\n          </>\n        )}\n      </div>\n    );\n  }\n\n  function renderMemo() {\n    if (!payinExtraId) return undefined;\n\n    return (\n      <div className={styles.textFieldWrapper}>\n        <span className={styles.textFieldLabel}>\n          {lang('Memo')}\n        </span>\n        <InteractiveTextField\n          address={payinExtraId}\n          copyNotification={lang('Memo was copied!')}\n          noSavedAddress\n          noExplorer\n        />\n      </div>\n    );\n  }\n\n  function renderTransactionId() {\n    return (\n      <div className={styles.textFieldWrapper}>\n        <span className={styles.textFieldLabel}>\n          {lang('Transaction ID')}\n        </span>\n        <InteractiveTextField\n          noSavedAddress\n          chain=\"ton\"\n          address={transactionHash}\n          addressUrl={transactionUrl}\n          isTransaction\n          copyNotification={lang('Transaction ID was copied!')}\n        />\n      </div>\n    );\n  }\n\n  function renderFee() {\n    if (!(Number(networkFee) || shouldLoadDetails) || !fromToken) {\n      return undefined;\n    }\n\n    const terms = isFromToncoin ? {\n      native: Big(networkFee).add(ourFee).toString(),\n    } : {\n      native: networkFee,\n      token: ourFee,\n    };\n\n    return (\n      <TransactionFee\n        terms={terms}\n        token={fromToken}\n        precision={activity?.status === 'pending' ? 'approximate' : 'exact'}\n        isLoading={shouldLoadDetails}\n      />\n    );\n  }\n\n  function renderAddress() {\n    if (!payinAddress) return undefined;\n    const token = isFromToncoin ? toToken : fromToken;\n    const chain = getIsSupportedChain(token?.chain) ? token.chain : undefined;\n\n    return (\n      <div className={styles.textFieldWrapper}>\n        <span className={styles.textFieldLabel}>\n          {isFromToncoin\n            ? lang('Your %blockchain% Address', { blockchain: toToken?.name })\n            : lang('Address for %blockchain% transfer', { blockchain: fromToken?.name })}\n        </span>\n        <InteractiveTextField\n          chain={chain}\n          address={isFromToncoin ? payoutAddress : payinAddress}\n          copyNotification={lang('Address was copied!')}\n          noSavedAddress\n          noExplorer\n          noDimming\n        />\n      </div>\n    );\n  }\n\n  function renderSwapInfo() {\n    if (isCexWaiting) {\n      if (isInternalSwap) return undefined;\n      const chain = getIsSupportedChain(fromToken?.chain) ? fromToken.chain : undefined;\n\n      return (\n        <div className={styles.changellyInfoBlock}>\n          {renderFee()}\n          <span className={styles.changellyDescription}>{lang('$swap_changelly_to_ton_description1', {\n            value: (\n              <span className={styles.changellyDescriptionBold}>\n                {formatCurrencyExtended(Number(fromAmount), fromToken?.symbol ?? '', true)}\n              </span>\n            ),\n            blockchain: (\n              <span className={styles.changellyDescriptionBold}>\n                {getChainNetworkName(fromToken?.chain)}\n              </span>\n            ),\n            time: <Countdown timestamp={timestamp ?? 0} deadline={CHANGELLY_WAITING_DEADLINE} />,\n          })}\n          </span>\n          <InteractiveTextField\n            chain={chain}\n            address={payinAddress}\n            copyNotification={lang('Address was copied!')}\n            noSavedAddress\n            noExplorer\n            noDimming\n          />\n          {renderMemo()}\n          {shouldShowQrCode && (\n            <div className={buildClassName(styles.qrCode, !isInitialized && styles.qrCodeHidden)} ref={qrCodeRef} />\n          )}\n        </div>\n      );\n    }\n\n    return (\n      <>\n        {renderFee()}\n        {!isInternalSwap && renderAddress()}\n        {!isInternalSwap && renderMemo()}\n      </>\n    );\n  }\n\n  function renderContent() {\n    return (\n      <div className={modalStyles.transitionContent}>\n        <SwapTokensInfo\n          isSensitiveDataHidden={isSensitiveDataHidden}\n          tokenIn={fromToken}\n          amountIn={fromAmount}\n          tokenOut={toToken}\n          amountOut={toAmount}\n          isError={isError || isCexError}\n        />\n        <div className={styles.infoBlock}>\n          {renderSwapInfo()}\n          {shouldRenderCexInfo && renderCexInformation()}\n          {transactionUrl && renderTransactionId()}\n        </div>\n        {!isSwapDisabled && (\n          <div className={styles.footer}>\n            {renderFooterButton()}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      title={renderHeader()}\n      titleClassName={styles.modalTitle}\n      isOpen={isOpen}\n      nativeBottomSheetKey=\"swap-activity\"\n      onClose={handleClose}\n    >\n      {renderContent()}\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const accountState = selectCurrentAccountState(global);\n    const account = selectCurrentAccount(global);\n    const { isSwapDisabled } = global.restrictions;\n    const { theme, isSensitiveDataHidden } = global.settings;\n\n    const id = accountState?.currentActivityId;\n    const activity = id ? accountState?.activities?.byId[id] : undefined;\n\n    return {\n      activity: activity?.kind === 'swap' ? activity : undefined,\n      tokensBySlug: global.swapTokenInfo?.bySlug,\n      theme,\n      addressByChain: account?.addressByChain,\n      isSwapDisabled: isSwapDisabled || global.settings.isTestnet || selectIsCurrentAccountViewMode(global),\n      isSensitiveDataHidden,\n    };\n  })(SwapActivityModal),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"amountSensitiveData\":\"__I8XE5D\",\"baseCurrencyAmountSensitiveData\":\"tPLUuFQO\",\"withStatus\":\"MeZ5UFq3\",\"amount\":\"Qy2zkhK5\",\"baseCurrencyAmount\":\"BUzkYW_L\",\"status\":\"COF5DpZg\",\"amountSymbol\":\"AgH98knQ\",\"amountFraction\":\"F1teTrIV\",\"operationPositive\":\"cuIyqZ4t\",\"operationNegative\":\"X1mdYuXG\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiBaseCurrency, ApiTokenWithPrice } from '../../api/types';\n\nimport { UNKNOWN_TOKEN } from '../../config';\nimport { bigintAbs } from '../../util/bigint';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatBaseCurrencyAmount, formatCurrencyExtended } from '../../util/formatNumber';\n\nimport SensitiveData from '../ui/SensitiveData';\n\nimport styles from './TransactionAmount.module.scss';\n\ninterface OwnProps {\n  amount: bigint;\n  token?: Pick<ApiTokenWithPrice, 'decimals' | 'symbol' | 'price'>;\n  isIncoming?: boolean;\n  isScam?: boolean;\n  isFailed?: boolean;\n  status?: string;\n  noSign?: boolean;\n  isSensitiveDataHidden?: true;\n  baseCurrency?: ApiBaseCurrency;\n}\n\nfunction TransactionAmount({\n  isIncoming,\n  isScam,\n  isFailed,\n  amount,\n  token,\n  status,\n  noSign = false,\n  isSensitiveDataHidden,\n  baseCurrency,\n}: OwnProps) {\n  const typeClass = isFailed || isScam\n    ? styles.operationNegative\n    : isIncoming ? styles.operationPositive : undefined;\n\n  function renderAmount() {\n    const { decimals, symbol } = token ?? UNKNOWN_TOKEN;\n    const amountString = toDecimal(noSign ? bigintAbs(amount) : amount, decimals);\n    const [wholePart, fractionPart]\n      = formatCurrencyExtended(amountString, '', noSign, decimals, !isIncoming).split('.');\n    const withStatus = Boolean(status);\n\n    return (\n      <SensitiveData\n        isActive={isSensitiveDataHidden}\n        cols={12}\n        rows={withStatus ? 7 : 4}\n        align=\"center\"\n        cellSize={withStatus ? 17 : 18}\n        className={buildClassName(styles.amountSensitiveData, status && styles.withStatus)}\n      >\n        <div\n          className={buildClassName(\n            styles.amount,\n            status && styles.withStatus,\n            typeClass,\n            'rounded-font',\n          )}\n        >\n          {wholePart.trim().replace('\\u202F', '')}\n          {fractionPart && <span className={styles.amountFraction}>.{fractionPart.trim()}</span>}\n          <span className={styles.amountSymbol}>{symbol}</span>\n        </div>\n        {withStatus && (\n          <div className={buildClassName(styles.status, typeClass)}>\n            {status}\n          </div>\n        )}\n      </SensitiveData>\n    );\n  }\n\n  function renderBaseCurrencyAmount() {\n    if (!token) {\n      return undefined;\n    }\n\n    return (\n      <SensitiveData\n        isActive={isSensitiveDataHidden}\n        cols={10}\n        rows={3}\n        align=\"center\"\n        cellSize={12}\n        className={styles.baseCurrencyAmountSensitiveData}\n        contentClassName={buildClassName(styles.baseCurrencyAmount, 'rounded-font', typeClass)}\n      >\n        {formatBaseCurrencyAmount(amount, baseCurrency, token)}\n      </SensitiveData>\n    );\n  }\n\n  return (\n    <>\n      {renderAmount()}\n      {renderBaseCurrencyAmount()}\n    </>\n  );\n}\n\nexport default memo(TransactionAmount);\n","import type { TeactNode } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type {\n  ApiBaseCurrency,\n  ApiNft,\n  ApiStakingState,\n  ApiTokenWithPrice,\n  ApiToncoinStakingState,\n  ApiTransactionActivity,\n} from '../../../api/types';\nimport type { Account, SavedAddress, Theme } from '../../../global/types';\nimport { ActiveTab } from '../../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_ICON_PX,\n  ANIMATION_END_DELAY,\n  ANIMATION_LEVEL_MIN,\n  IS_CAPACITOR,\n  IS_CORE_WALLET,\n  TONCOIN,\n  VALIDATION_PERIOD_MS,\n} from '../../../config';\nimport {\n  selectAccounts,\n  selectAccountStakingStates,\n  selectCurrentAccountState,\n  selectIsCurrentAccountViewMode,\n  selectIsHardwareAccount,\n} from '../../../global/selectors';\nimport {\n  getIsActivityWithHash,\n  getTransactionAmountDisplayMode,\n  getTransactionTitle,\n  isOurStakingTransaction,\n  isScamTransaction,\n  parseTxId,\n  shouldShowTransactionAddress,\n} from '../../../util/activities';\nimport { getHasInMemoryPassword, getInMemoryPassword } from '../../../util/authApi/inMemoryPasswordStore';\nimport { bigintAbs } from '../../../util/bigint';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatFullDay, formatRelativeHumanDateTime, formatTime } from '../../../util/dateFormat';\nimport { getLocalAddressName } from '../../../util/getLocalAddressName';\nimport { vibrateOnSuccess } from '../../../util/haptics';\nimport { getIsTransactionWithPoisoning } from '../../../util/poisoningHash';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { getStakingStateStatus } from '../../../util/staking';\nimport { getNativeToken } from '../../../util/tokens';\nimport { getExplorerTransactionUrl } from '../../../util/url';\nimport { callApi } from '../../../api';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../../hooks/useAppTheme';\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport usePrevDuringAnimation from '../../../hooks/usePrevDuringAnimation';\nimport useShowTransition from '../../../hooks/useShowTransition';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport TransactionAmount from '../../common/TransactionAmount';\nimport TransactionFee from '../../common/TransactionFee';\nimport NftInfo from '../../transfer/NftInfo';\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport Modal, { CLOSE_DURATION, CLOSE_DURATION_PORTRAIT } from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport transferStyles from '../../transfer/Transfer.module.scss';\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './TransactionModal.module.scss';\n\nimport scamImg from '../../../assets/scam.svg';\n\ntype StateProps = {\n  transaction?: ApiTransactionActivity;\n  tokensBySlug?: Record<string, ApiTokenWithPrice>;\n  savedAddresses?: SavedAddress[];\n  isHardwareAccount: boolean;\n  isTestnet?: boolean;\n  isViewMode: boolean;\n  stakingStates?: ApiStakingState[];\n  isLongUnstakeRequested?: boolean;\n  isMediaViewerOpen?: boolean;\n  theme: Theme;\n  isSensitiveDataHidden?: true;\n  nftsByAddress?: Record<string, ApiNft>;\n  accounts?: Record<string, Account>;\n  currentAccountId: string;\n  baseCurrency?: ApiBaseCurrency;\n};\n\nconst enum SLIDES {\n  initial,\n  password,\n}\n\nfunction TransactionModal({\n  transaction,\n  tokensBySlug,\n  savedAddresses,\n  isTestnet,\n  isHardwareAccount,\n  isViewMode,\n  stakingStates,\n  isLongUnstakeRequested,\n  isMediaViewerOpen,\n  theme,\n  isSensitiveDataHidden,\n  nftsByAddress,\n  accounts,\n  currentAccountId,\n  baseCurrency,\n}: StateProps) {\n  const {\n    fetchActivityDetails,\n    startTransfer,\n    startStaking,\n    startUnstaking,\n    closeActivityInfo,\n    setIsPinAccepted,\n    clearIsPinAccepted,\n    setLandscapeActionsActiveTabIndex,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const [currentSlide, setCurrentSlide] = useState<SLIDES>(SLIDES.initial);\n  const [nextKey, setNextKey] = useState<SLIDES | undefined>(SLIDES.password);\n  const animationLevel = getGlobal().settings.animationLevel;\n  const animationDuration = animationLevel === ANIMATION_LEVEL_MIN\n    ? 0\n    : (isPortrait ? CLOSE_DURATION_PORTRAIT : CLOSE_DURATION) + ANIMATION_END_DELAY;\n  const renderedTransaction = usePrevDuringAnimation(transaction, animationDuration);\n  const [unstakeDate, setUnstakeDate] = useState<number>(Date.now() + VALIDATION_PERIOD_MS);\n  const appTheme = useAppTheme(theme);\n\n  const {\n    fromAddress,\n    toAddress,\n    amount,\n    comment,\n    encryptedComment,\n    fee,\n    id,\n    isIncoming,\n    slug,\n    timestamp,\n    nft,\n    shouldLoadDetails,\n    status,\n  } = renderedTransaction || {};\n  const isActivityWithHash = Boolean(renderedTransaction && getIsActivityWithHash(renderedTransaction));\n  const isOurStaking = renderedTransaction && isOurStakingTransaction(renderedTransaction);\n  const isOurUnstaking = isOurStaking && renderedTransaction?.type === 'unstake';\n  const isNftTransfer = Boolean(renderedTransaction?.nft);\n\n  const token = slug ? tokensBySlug?.[slug] : undefined;\n  const chain = token?.chain;\n\n  const nativeToken = token ? getNativeToken(token.chain) : undefined;\n  const address = isIncoming ? fromAddress : toAddress;\n  const localAddressName = useMemo(() => {\n    if (!chain) return undefined;\n\n    return getLocalAddressName({\n      address,\n      chain,\n      currentAccountId,\n      accounts: accounts!,\n      savedAddresses,\n    });\n  }, [accounts, address, chain, currentAccountId, savedAddresses]);\n  const addressName = localAddressName || transaction?.metadata?.name;\n  const isTransactionWithPoisoning = isIncoming && getIsTransactionWithPoisoning(renderedTransaction!);\n  const isScam = Boolean(transaction) && isScamTransaction(transaction);\n  const isModalOpen = Boolean(transaction) && !isMediaViewerOpen;\n  const transactionHash = chain && id ? parseTxId(id).hash : undefined;\n  const doesNftExist = Boolean(nft && nftsByAddress?.[nft.address]);\n  const canDecryptComment = !isViewMode && !isHardwareAccount;\n\n  const [decryptedComment, setDecryptedComment] = useState<string>();\n  const [passwordError, setPasswordError] = useState<string>();\n\n  const transactionUrl = chain ? getExplorerTransactionUrl(chain, transactionHash, isTestnet) : undefined;\n\n  const {\n    shouldRender: shouldRenderTransactionId,\n    ref: transactionIdRef,\n  } = useShowTransition({\n    isOpen: Boolean(isActivityWithHash && transactionUrl),\n    withShouldRender: true,\n  });\n\n  const stakingState = useMemo(() => {\n    return stakingStates?.find((staking): staking is ApiToncoinStakingState => {\n      return staking.tokenSlug === TONCOIN.slug && staking.balance > 0n;\n    });\n  }, [stakingStates]);\n\n  const stakingStatus = stakingState && getStakingStateStatus(stakingState);\n  const startOfStakingCycle = stakingState?.start;\n  const endOfStakingCycle = stakingState?.end;\n\n  const {\n    shouldRender: shouldRenderUnstakeTimer,\n    ref: unstakeTimerRef,\n  } = useShowTransition({\n    isOpen: transaction?.type === 'unstakeRequest'\n      && startOfStakingCycle !== undefined\n      && (stakingStatus === 'unstakeRequested' || isLongUnstakeRequested)\n      && transaction.timestamp >= startOfStakingCycle,\n    withShouldRender: true,\n  });\n\n  useSyncEffect(() => {\n    if (renderedTransaction) {\n      setDecryptedComment(undefined);\n    }\n  }, [renderedTransaction]);\n\n  useSyncEffect(() => {\n    if (endOfStakingCycle) {\n      setUnstakeDate(endOfStakingCycle);\n    }\n  }, [endOfStakingCycle]);\n\n  useEffect(() => {\n    if (id && shouldLoadDetails) fetchActivityDetails({ id });\n  }, [id, shouldLoadDetails]);\n\n  const clearPasswordError = useLastCallback(() => {\n    setPasswordError(undefined);\n  });\n\n  const openPasswordSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.password);\n    setNextKey(undefined);\n  });\n\n  const closePasswordSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.initial);\n    setNextKey(SLIDES.password);\n    clearPasswordError();\n  });\n\n  const handleSendClick = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n    startTransfer({\n      isPortrait,\n      tokenSlug: slug || TONCOIN.slug,\n      toAddress: address,\n      amount: bigintAbs(amount!),\n      comment: !isIncoming ? comment : undefined,\n    });\n  });\n\n  const handleStartStakingClick = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n\n    if (!isPortrait) {\n      setLandscapeActionsActiveTabIndex({ index: ActiveTab.Stake });\n      return;\n    }\n\n    startStaking();\n  });\n\n  const handleUnstakeMoreClick = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n\n    if (!isPortrait) {\n      setLandscapeActionsActiveTabIndex({ index: ActiveTab.Stake });\n    }\n\n    startUnstaking();\n  });\n\n  const handlePasswordSubmit = useLastCallback(async (password: string) => {\n    const result = await callApi(\n      'decryptComment',\n      getGlobal().currentAccountId!,\n      encryptedComment!,\n      fromAddress!,\n      password,\n    );\n\n    if (!result) {\n      setPasswordError('Wrong password, please try again.');\n      return;\n    }\n\n    if (getDoesUsePinPad()) {\n      setIsPinAccepted();\n      await vibrateOnSuccess(true);\n    }\n\n    closePasswordSlide();\n    setDecryptedComment(result);\n  });\n\n  const openHiddenComment = useLastCallback(async () => {\n    if (!encryptedComment) {\n      return;\n    }\n\n    if (getHasInMemoryPassword()) {\n      const password = await getInMemoryPassword();\n\n      if (password) {\n        void handlePasswordSubmit(password);\n        return;\n      }\n    }\n\n    openPasswordSlide();\n  });\n\n  const handleClose = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n    if (getDoesUsePinPad()) {\n      clearIsPinAccepted();\n    }\n  });\n\n  function renderHeader() {\n    const titleTense = status === 'pending' ? 'present' : status === 'failed' ? 'future' : 'past';\n\n    return (\n      <div\n        className={buildClassName(\n          modalStyles.header,\n          modalStyles.header_wideContent,\n        )}\n      >\n        <div className={buildClassName(modalStyles.title, styles.modalTitle)}>\n          <div className={styles.headerTitle}>\n            {transaction && getTransactionTitle(transaction, titleTense, lang)}\n            {status === 'pending' && (\n              <AnimatedIconWithPreview\n                play={isModalOpen}\n                size={ANIMATED_STICKER_TINY_ICON_PX}\n                nonInteractive\n                noLoop={false}\n                tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClock}\n                previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClock}\n              />\n            )}\n            {status === 'failed' && (\n              <span className={styles.headerTitle__badge}>\n                {lang('Failed')}\n              </span>\n            )}\n            {isScam && isIncoming && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n          </div>\n          {!!timestamp && (\n            <div className={styles.headerDate}>\n              {formatFullDay(lang.code!, timestamp)}, {formatTime(timestamp)}\n            </div>\n          )}\n        </div>\n        <Button\n          isRound\n          className={modalStyles.closeButton}\n          ariaLabel={lang('Close')}\n          onClick={handleClose}\n        >\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </Button>\n      </div>\n    );\n  }\n\n  function renderTransactionWithPoisoningWarning() {\n    return (\n      <div className={styles.scamWarning}>\n        {lang('This address mimics another address that you previously interacted with.')}\n      </div>\n    );\n  }\n\n  function renderFee() {\n    if (!(fee || shouldLoadDetails) || !nativeToken) {\n      return undefined;\n    }\n\n    return (\n      <TransactionFee\n        terms={{ native: fee }}\n        token={nativeToken}\n        precision={status === 'pending' ? 'approximate' : 'exact'}\n        isLoading={shouldLoadDetails}\n        className={styles.feeField}\n      />\n    );\n  }\n\n  function renderComment() {\n    if (!comment && !encryptedComment) {\n      return undefined;\n    }\n\n    const spoiler = encryptedComment\n      ? lang('Message is encrypted.')\n      : isScam\n        ? lang('Scam comment is hidden.')\n        : undefined;\n\n    return (\n      <>\n        <div className={transferStyles.label}>{lang('Comment')}</div>\n        <InteractiveTextField\n          text={encryptedComment ? decryptedComment : comment}\n          spoiler={spoiler}\n          spoilerRevealText={encryptedComment ? (canDecryptComment ? lang('Decrypt') : undefined) : lang('Display')}\n          spoilerCallback={canDecryptComment ? openHiddenComment : undefined}\n          copyNotification={lang('Comment was copied!')}\n          className={styles.copyButtonWrapper}\n          textClassName={styles.comment}\n        />\n      </>\n    );\n  }\n\n  function renderTransactionId() {\n    return (\n      <div ref={transactionIdRef} className={styles.textFieldWrapper}>\n        <span className={styles.textFieldLabel}>\n          {lang('Transaction ID')}\n        </span>\n        <InteractiveTextField\n          noSavedAddress\n          chain={chain}\n          address={transactionHash}\n          addressUrl={transactionUrl}\n          isTransaction\n          copyNotification={lang('Transaction ID was copied!')}\n          className={styles.changellyTextField}\n        />\n      </div>\n    );\n  }\n\n  function renderUnstakeTimer() {\n    return (\n      <div ref={unstakeTimerRef} className={styles.unstakeTime}>\n        <AnimatedIconWithPreview\n          play={isModalOpen}\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.unstakeTimeIcon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockGray}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockGray}\n        />\n        <div>\n          {lang('$unstaking_when_receive', {\n            time: (\n              <strong>\n                {formatRelativeHumanDateTime(lang.code, unstakeDate)}\n              </strong>\n            ),\n          })}\n        </div>\n      </div>\n    );\n  }\n\n  function renderFooter() {\n    const canUnstake = isOurStaking && (isOurUnstaking || transaction?.type === 'unstakeRequest')\n      && stakingStatus === 'active';\n    const buttons: TeactNode[] = [];\n\n    if (!isOurStaking && !isIncoming && !isNftTransfer) {\n      buttons.push(\n        <Button onClick={handleSendClick} className={styles.button}>\n          {lang('Repeat')}\n        </Button>,\n      );\n    }\n    if (!IS_CORE_WALLET && isOurStaking) {\n      buttons.push(\n        <Button\n          onClick={handleStartStakingClick}\n          className={buildClassName(styles.button, canUnstake && styles.buttonWide)}\n        >\n          {lang('Stake Again')}\n        </Button>,\n      );\n    }\n    if (canUnstake) {\n      buttons.push(\n        <Button onClick={handleUnstakeMoreClick} className={buildClassName(styles.button, styles.buttonWide)}>\n          {lang('Unstake More')}\n        </Button>,\n      );\n    }\n\n    return buttons.length ? <div className={styles.footer}>{buttons}</div> : undefined;\n  }\n\n  function renderTransactionContent() {\n    const amountDisplayMode = transaction && getTransactionAmountDisplayMode(transaction);\n\n    return (\n      <div className={modalStyles.transitionContent}>\n        {amountDisplayMode !== 'hide' && (\n          <TransactionAmount\n            isSensitiveDataHidden={isSensitiveDataHidden}\n            isIncoming={isIncoming}\n            isScam={isScam}\n            isFailed={status === 'failed'}\n            amount={amount ?? 0n}\n            token={token}\n            status={isOurUnstaking && !shouldRenderUnstakeTimer ? lang('Successfully') : undefined}\n            noSign={amountDisplayMode === 'noSign'}\n            baseCurrency={baseCurrency}\n          />\n        )}\n        {nft && <NftInfo nft={nft} withMediaViewer={doesNftExist} withTonExplorer />}\n\n        {isTransactionWithPoisoning && renderTransactionWithPoisoningWarning()}\n\n        {transaction && shouldShowTransactionAddress(transaction).includes('modal') && (\n          <>\n            <div className={transferStyles.label}>{lang(isIncoming ? 'Sender' : 'Recipient')}</div>\n            <InteractiveTextField\n              chain={chain}\n              addressName={addressName}\n              address={address}\n              isScam={isScam && !isIncoming}\n              copyNotification={lang('Address was copied!')}\n              className={styles.copyButtonWrapper}\n              textClassName={isScam && isIncoming ? styles.scamAddress : undefined}\n            />\n          </>\n        )}\n\n        {renderFee()}\n        {renderComment()}\n        {shouldRenderTransactionId && renderTransactionId()}\n        {shouldRenderUnstakeTimer && renderUnstakeTimer()}\n\n        {!isViewMode && renderFooter()}\n      </div>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: SLIDES) {\n    switch (currentKey) {\n      case SLIDES.initial:\n        return (\n          <>\n            {renderHeader()}\n            {renderTransactionContent()}\n          </>\n        );\n      case SLIDES.password:\n        if (!encryptedComment) return undefined;\n\n        return (\n          <>\n            {!getDoesUsePinPad() && (\n              <ModalHeader title={lang('Enter Password')} onClose={handleClose} />\n            )}\n            <PasswordForm\n              isActive={isActive}\n              error={passwordError}\n              withCloseButton={IS_CAPACITOR}\n              containerClassName={IS_CAPACITOR ? styles.passwordFormContent : styles.passwordFormContentInModal}\n              submitLabel={lang('Send')}\n              onSubmit={handlePasswordSubmit}\n              onCancel={closePasswordSlide}\n              onUpdate={clearPasswordError}\n            />\n          </>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isModalOpen}\n      hasCloseButton\n      nativeBottomSheetKey=\"transaction-info\"\n      forceFullNative={currentSlide === SLIDES.password}\n      dialogClassName={buildClassName(styles.modalDialog, isOurUnstaking && styles.unstakeModal)}\n      onClose={handleClose}\n      onCloseAnimationEnd={closePasswordSlide}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const accountId = global.currentAccountId!;\n    const accountState = selectCurrentAccountState(global);\n\n    const txId = accountState?.currentActivityId;\n    const activity = txId ? accountState?.activities?.byId[txId] : undefined;\n    const savedAddresses = accountState?.savedAddresses;\n    const { byAddress } = accountState?.nfts || {};\n\n    const stakingStates = selectAccountStakingStates(global, accountId);\n    const { isTestnet, theme, isSensitiveDataHidden } = global.settings;\n    const accounts = selectAccounts(global);\n    const isHardwareAccount = selectIsHardwareAccount(global);\n\n    return {\n      transaction: activity?.kind === 'transaction' ? activity : undefined,\n      tokensBySlug: global.tokenInfo?.bySlug,\n      savedAddresses,\n      isHardwareAccount,\n      isTestnet,\n      isViewMode: selectIsCurrentAccountViewMode(global),\n      isLongUnstakeRequested: accountState?.isLongUnstakeRequested,\n      isMediaViewerOpen: Boolean(global.mediaViewer.mediaId),\n      theme,\n      stakingStates,\n      isSensitiveDataHidden,\n      nftsByAddress: byAddress,\n      accounts,\n      currentAccountId: accountId,\n      baseCurrency: global.settings.baseCurrency,\n    };\n  })(TransactionModal),\n);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { selectCurrentAccountState } from '../../../global/selectors';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  nftAddress?: string;\n  nftName?: string;\n}\n\nfunction UnhideNftModal({\n  isOpen,\n  nftAddress,\n  nftName,\n}: StateProps) {\n  const { addNftsToWhitelist, closeUnhideNftModal } = getActions();\n\n  const lang = useLang();\n\n  const handleUnhide = useLastCallback(() => {\n    addNftsToWhitelist({ addresses: [nftAddress!] });\n    closeUnhideNftModal();\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={closeUnhideNftModal}\n      title={lang('Unhide NFT')}\n    >\n      <p className={modalStyles.text}>\n        {lang('$unhide_nft_warning', { name: <b>{nftName}</b> })}\n      </p>\n      <div className={modalStyles.buttons}>\n        <Button onClick={closeUnhideNftModal} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleUnhide} className={modalStyles.button}>\n          {lang('Unhide')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    isUnhideNftModalOpen,\n    selectedNftToUnhide,\n  } = selectCurrentAccountState(global) ?? {};\n\n  return {\n    isOpen: isUnhideNftModalOpen,\n    nftAddress: selectedNftToUnhide?.address,\n    nftName: selectedNftToUnhide?.name,\n  };\n})(UnhideNftModal));\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { IS_ELECTRON } from '../../util/windowEnvironment';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Portal from './Portal';\n\nimport styles from './Notification.module.scss';\n\ntype OwnProps = {\n  containerId?: string;\n  message: string;\n  icon?: string;\n  onDismiss: () => void;\n};\n\nconst DURATION_MS = 5000;\nconst ANIMATION_DURATION = 250;\n\nconst Notification: FC<OwnProps> = ({\n  icon, message, containerId, onDismiss,\n}) => {\n  const [isOpen, setIsOpen] = useState(true);\n  const timerRef = useRef<number | undefined>();\n\n  const { ref } = useShowTransition({ isOpen });\n\n  const closeAndDismiss = useLastCallback(() => {\n    setIsOpen(false);\n    setTimeout(onDismiss, ANIMATION_DURATION);\n  });\n\n  useEffect(() => (isOpen ? captureEscKeyListener(closeAndDismiss) : undefined), [isOpen, closeAndDismiss]);\n\n  useEffect(() => {\n    timerRef.current = window.setTimeout(closeAndDismiss, DURATION_MS);\n\n    return () => {\n      if (timerRef.current) {\n        clearTimeout(timerRef.current);\n        timerRef.current = undefined;\n      }\n    };\n  }, [closeAndDismiss]);\n\n  const handleMouseEnter = useLastCallback(() => {\n    if (timerRef.current) {\n      clearTimeout(timerRef.current);\n      timerRef.current = undefined;\n    }\n  });\n\n  const handleMouseLeave = useLastCallback(() => {\n    timerRef.current = window.setTimeout(closeAndDismiss, DURATION_MS);\n  });\n\n  return (\n    <Portal\n      className={buildClassName(styles.container, IS_ELECTRON && styles.container_electron)}\n      containerId={containerId}\n    >\n      <div\n        ref={ref}\n        className={styles.notification}\n        onClick={closeAndDismiss}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n      >\n        <div className={styles.content}>\n          {icon && <i className={buildClassName(styles.icon, icon)} aria-hidden />}\n          {message}\n        </div>\n      </div>\n    </Portal>\n  );\n};\n\nexport default Notification;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"h7PLFJQu\",\"container_electron\":\"I0vM5N9Z\",\"containerElectron\":\"I0vM5N9Z\",\"notification\":\"cBuXIi04\",\"content\":\"FOpmIM3s\",\"icon\":\"yRP0zVnL\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { NotificationType } from '../../global/types';\n\nimport { pick } from '../../util/iteratees';\n\nimport Notification from '../ui/Notification';\n\ntype StateProps = {\n  notifications: NotificationType[];\n};\n\nfunction Notifications({ notifications }: StateProps) {\n  const { dismissNotification } = getActions();\n\n  if (!notifications.length) {\n    return undefined;\n  }\n\n  return (\n    <div id=\"Notifications\">\n      {notifications.map(({ message, icon }) => (\n        <Notification\n          key={message}\n          icon={icon}\n          message={message}\n\n          onDismiss={dismissNotification}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default memo(withGlobal(\n  (global): StateProps => pick(global, ['notifications']),\n)(Notifications));\n","import { useEffect } from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\n\nlet bottomBarHideCounter = 0;\nconst bottomBarListeners = createCallbackManager();\n\nexport function getIsBottomBarHidden() {\n  return bottomBarHideCounter > 0;\n}\n\nexport function subscribeToBottomBarVisibility(callback: () => void) {\n  return bottomBarListeners.addCallback(callback);\n}\n\nfunction notifyBottomBarListeners() {\n  bottomBarListeners.runCallbacks();\n}\n\nfunction hideBottomBar() {\n  const wasHidden = getIsBottomBarHidden();\n  bottomBarHideCounter += 1;\n\n  if (!wasHidden && getIsBottomBarHidden()) {\n    notifyBottomBarListeners();\n  }\n}\n\nfunction showBottomBar() {\n  const wasHidden = getIsBottomBarHidden();\n  bottomBarHideCounter = Math.max(0, bottomBarHideCounter - 1);\n\n  if (wasHidden && !getIsBottomBarHidden()) {\n    notifyBottomBarListeners();\n  }\n}\n\n// Use this hook when you need to temporarily hide the bottom bar on a screen, for example,\n// when assumes the use of the entire screen height - `PasswordForm` with biometrics\nexport default function useHideBottomBar(isHidden: boolean) {\n  useEffect(() => {\n    if (!isHidden) return undefined;\n\n    hideBottomBar();\n\n    return showBottomBar;\n  }, [isHidden]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"QlVPgZym\",\"hidden\":\"YMl6tuqD\",\"button\":\"A4iuMrwm\",\"active\":\"lTI19L4Y\",\"icon\":\"Q6nK70OA\",\"label\":\"Hzc2OPCD\"};","import React, { memo, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport { ContentTab } from '../../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../../config';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useEffectOnce from '../../../../hooks/useEffectOnce';\nimport { getIsBottomBarHidden, subscribeToBottomBarVisibility } from '../../../../hooks/useHideBottomBar';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLang from '../../../../hooks/useLang';\n\nimport Button from '../../../ui/Button';\n\nimport styles from './BottomBar.module.scss';\n\ninterface StateProps {\n  areSettingsOpen?: boolean;\n  areAssetsActive?: boolean;\n  isExploreOpen?: boolean;\n}\n\nfunction BottomBar({ areSettingsOpen, areAssetsActive, isExploreOpen }: StateProps) {\n  const { switchToWallet, switchToExplore, switchToSettings } = getActions();\n\n  const lang = useLang();\n  const [isHidden, setIsHidden] = useState(getIsBottomBarHidden());\n  const isWalletTabActive = !isExploreOpen && !areSettingsOpen;\n\n  useEffectOnce(() => {\n    return subscribeToBottomBarVisibility(() => {\n      setIsHidden(getIsBottomBarHidden());\n    });\n  });\n\n  useHistoryBack({\n    isActive: isExploreOpen,\n    onBack: switchToWallet,\n  });\n\n  return (\n    <div className={buildClassName(styles.root, isHidden && styles.hidden)}>\n      <Button\n        isSimple\n        className={buildClassName(styles.button, isWalletTabActive && styles.active)}\n        onClick={switchToWallet}\n      >\n        <i className={buildClassName(styles.icon, 'icon-wallet')} />\n        <span className={styles.label}>{lang('Wallet')}</span>\n      </Button>\n      {!IS_CORE_WALLET && (\n        <Button\n          isSimple\n          className={buildClassName(styles.button, isExploreOpen && styles.active)}\n          onClick={switchToExplore}\n        >\n          <i className={buildClassName(styles.icon, 'icon-explore')} />\n          <span className={styles.label}>{lang('Explore')}</span>\n        </Button>\n      )}\n      <Button\n        isSimple\n        className={buildClassName(styles.button, areSettingsOpen && styles.active)}\n        onClick={switchToSettings}\n      >\n        <i className={buildClassName(styles.icon, 'icon-settings')} />\n        <span className={styles.label}>{lang('Settings')}</span>\n      </Button>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { areSettingsOpen, isExploreOpen } = global;\n  const { activeContentTab } = selectCurrentAccountState(global) ?? {};\n\n  return {\n    areSettingsOpen,\n    areAssetsActive: activeContentTab === ContentTab.Assets,\n    isExploreOpen,\n  };\n})(BottomBar));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"A0PipQQQ\",\"header\":\"Gbi50r5P\",\"headerTransition\":\"lDJDJyJx\",\"actions\":\"U5k3MGwt\",\"actionButton\":\"iX71Jk4y\",\"actionIcon\":\"TYO_mnqL\",\"menuButton\":\"g5Mpmfqz\",\"menuButton_active\":\"Jb3ZSQ8D\",\"menuButtonActive\":\"Jb3ZSQ8D\",\"menuItem\":\"nZ_OU1oY\",\"slides\":\"X2XelzZ1\",\"slide\":\"piyY_yBE\",\"slide_active\":\"sCCso48U\",\"slideActive\":\"sCCso48U\",\"slide_moving\":\"NMBicc6s\",\"slideMoving\":\"NMBicc6s\",\"content\":\"BjD2X1I7\",\"image\":\"BA7uSk12\",\"contentDescription\":\"XeanWEkZ\",\"contentTextWrapper\":\"fJxRvPrW\",\"contentText\":\"gAnXMdfd\",\"navigation\":\"mO73YmbZ\",\"portraitContainer\":\"PDCSQygm\",\"navigation_prev\":\"Mx1XT28C\",\"navigationPrev\":\"Mx1XT28C\",\"navigation_next\":\"FmNwnO3_\",\"navigationNext\":\"FmNwnO3_\",\"mediaInfo\":\"lzTnItyh\",\"mediaInfoTitle\":\"Iork7lBy\",\"mediaInfoDescription\":\"gVhA_SZL\",\"descriptionText\":\"VjBacQN8\",\"tooltip\":\"j_sdE8In\",\"ghost\":\"FjT6eSrl\",\"ghost_roundedOpening\":\"GUrvismB\",\"ghostRoundedOpening\":\"GUrvismB\",\"ghost_roundedClosing\":\"oGeErVyy\",\"ghostRoundedClosing\":\"oGeErVyy\",\"ghostImage\":\"oaQkWH7i\",\"scamImage\":\"HAC1deVa\"};","import { MediaType } from '../../../global/types';\n\nimport { ANIMATION_END_DELAY, MOBILE_SCREEN_MAX_WIDTH } from '../../../config';\nimport { requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport { applyStyles } from '../../../util/animation';\nimport { stopEvent } from '../../../util/domEvents';\nimport { isElementInViewport } from '../../../util/isElementInViewport';\nimport { REM } from '../../../util/windowEnvironment';\nimport windowSize from '../../../util/windowSize';\n\nimport styles from '../MediaViewer.module.scss';\n\nexport const ANIMATION_DURATION = 200;\n\n// Header height + bottom padding, keep in sync with styles.image max-height\nconst OCCUPIED_HEIGHT = 14 * REM;\n\nexport function animateOpening(\n  type: MediaType, mediaId: string, mediaUrl?: string, txId?: string, hiddenNfts?: 'user' | 'scam',\n) {\n  const { image: fromImage } = getNode(type, mediaId, txId, hiddenNfts);\n  if (!fromImage || !mediaUrl) {\n    return;\n  }\n\n  requestMutation(async () => {\n    document.body.classList.add('ghost-animating');\n\n    const { width: windowWidth, height: windowHeight } = windowSize.get();\n    const { width: mediaWidth, height: mediaHeight } = await getImageDimension(mediaUrl);\n\n    const availableHeight = windowHeight - OCCUPIED_HEIGHT;\n    const offsetTop = (windowWidth <= MOBILE_SCREEN_MAX_WIDTH ? 8 : 7) * REM;\n\n    const { width: toWidth, height: toHeight } = calculateDimensions(\n      windowWidth,\n      availableHeight,\n      mediaWidth,\n      mediaHeight,\n    );\n\n    const toLeft = (windowWidth - toWidth) / 2;\n    const toTop = offsetTop + (availableHeight - toHeight) / 2;\n\n    const {\n      top: fromTop, left: fromLeft, width: fromWidth, height: fromHeight,\n    } = fromImage.getBoundingClientRect();\n\n    const fromTranslateX = (fromLeft + fromWidth / 2) - (toLeft + toWidth / 2);\n    const fromTranslateY = (fromTop + fromHeight / 2) - (toTop + toHeight / 2);\n    const fromScaleX = fromWidth / toWidth;\n    const fromScaleY = fromHeight / toHeight;\n\n    requestMutation(() => {\n      const ghost = createGhost(fromImage);\n      applyShape(ghost, type, true);\n      applyStyles(ghost, {\n        top: `${toTop}px`,\n        left: `${toLeft}px`,\n        width: `${toWidth}px`,\n        height: `${toHeight}px`,\n        transform: `translate3d(${fromTranslateX}px, ${fromTranslateY}px, 0) scale(${fromScaleX}, ${fromScaleY})`,\n      });\n\n      document.body.appendChild(ghost);\n\n      requestMutation(() => {\n        ghost.style.transform = '';\n        clearShape(ghost, type, true);\n\n        setTimeout(() => {\n          requestMutation(() => {\n            if (document.body.contains(ghost)) {\n              document.body.removeChild(ghost);\n            }\n            document.body.classList.remove('ghost-animating');\n          });\n        }, ANIMATION_DURATION + ANIMATION_END_DELAY);\n      });\n    });\n  });\n}\n\nexport function animateClosing(type: MediaType, mediaId: string, txId?: string, hiddenNfts?: 'user' | 'scam') {\n  const { container, image: toImage } = getNode(type, mediaId, txId, hiddenNfts);\n  const fromImage = document.querySelector<HTMLImageElement>(\n    `.${styles.slide_active} img, .${styles.slide_active} canvas`,\n  );\n  if (!fromImage || !toImage) {\n    return;\n  }\n\n  const {\n    top: fromTop, left: fromLeft, width: fromWidth, height: fromHeight,\n  } = fromImage.getBoundingClientRect();\n  const {\n    top: targetTop, left: toLeft, width: toWidth, height: toHeight,\n  } = toImage.getBoundingClientRect();\n\n  let toTop = targetTop;\n  if (!isElementInViewport(toImage)) {\n    const { height: windowHeight } = windowSize.get();\n    toTop = targetTop < fromTop ? -toHeight : windowHeight;\n  }\n\n  const fromTranslateX = (fromLeft + fromWidth / 2) - (toLeft + toWidth / 2);\n  const fromTranslateY = (fromTop + fromHeight / 2) - (toTop + toHeight / 2);\n  const fromScaleX = fromWidth / toWidth;\n  const fromScaleY = fromHeight / toHeight;\n\n  const existingGhost = document.querySelector<HTMLDivElement>(`.${styles.ghost}`);\n  const ghost = existingGhost || createGhost(fromImage);\n\n  let ghostStyles: Record<string, string>;\n  if (existingGhost) {\n    const {\n      top, left, width, height,\n    } = existingGhost.getBoundingClientRect();\n    const scaleX = width / toWidth;\n    const scaleY = height / toHeight;\n\n    ghostStyles = {\n      transition: 'none',\n      top: `${toTop}px`,\n      left: `${toLeft}px`,\n      transformOrigin: 'top left',\n      transform: `translate3d(${left - toLeft}px, ${top - toTop}px, 0) scale(${scaleX}, ${scaleY})`,\n      width: `${toWidth}px`,\n      height: `${toHeight}px`,\n    };\n  } else {\n    ghostStyles = {\n      top: `${toTop}px`,\n      left: `${toLeft}px`,\n      width: `${toWidth}px`,\n      height: `${toHeight}px`,\n      transform: `translate3d(${fromTranslateX}px, ${fromTranslateY}px, 0) scale(${fromScaleX}, ${fromScaleY})`,\n    };\n  }\n\n  requestMutation(() => {\n    applyShape(ghost, type);\n    applyStyles(ghost, ghostStyles);\n    if (!existingGhost) document.body.appendChild(ghost);\n    document.body.classList.add('ghost-animating');\n    if (container) {\n      container.classList.add('ghost-target');\n    }\n\n    requestMutation(() => {\n      if (existingGhost) {\n        existingGhost.style.transition = '';\n      }\n\n      ghost.style.transform = '';\n\n      setTimeout(() => {\n        requestMutation(() => {\n          if (document.body.contains(ghost)) {\n            document.body.removeChild(ghost);\n          }\n          document.body.classList.remove('ghost-animating');\n          if (container) {\n            container.classList.remove('ghost-target');\n          }\n        });\n      }, ANIMATION_DURATION + ANIMATION_END_DELAY);\n    });\n  });\n}\n\nfunction getNode(type: MediaType, mediaId: string, txId?: string, hiddenNfts?: 'user' | 'scam') {\n  let image: HTMLImageElement | HTMLCanvasElement | undefined;\n  let container: HTMLElement | undefined;\n  if (type === MediaType.Nft) {\n    container = document.querySelector(\n      txId\n        ? `.transaction-nft[data-tx-id=\"${txId}\"][data-nft-address=\"${mediaId}\"]`\n        : hiddenNfts\n          ? `.hidden-nfts-${hiddenNfts} [data-nft-address=\"${mediaId}\"]`\n          : `.nft-container[data-nft-address=\"${mediaId}\"]`,\n    ) as HTMLElement;\n    image = container?.querySelector('img, canvas') as HTMLImageElement | HTMLCanvasElement;\n  }\n  return { container, image };\n}\n\nfunction createGhost(source: HTMLImageElement | HTMLCanvasElement) {\n  const ghost = document.createElement('div');\n  ghost.classList.add(styles.ghost);\n\n  const img = new Image();\n  img.classList.add(styles.ghostImage);\n  img.draggable = false;\n  img.oncontextmenu = stopEvent;\n  img.src = source instanceof HTMLImageElement\n    ? source.src\n    : source.parentElement?.parentElement?.dataset.previewUrl || '';\n\n  ghost.appendChild(img);\n\n  return ghost;\n}\n\nfunction calculateDimensions(\n  availableWidth: number,\n  availableHeight: number,\n  mediaWidth: number,\n  mediaHeight: number,\n) {\n  const aspectRatio = mediaHeight / mediaWidth;\n  const calculatedWidth = Math.min(mediaWidth, availableWidth);\n  const calculatedHeight = Math.round(calculatedWidth * aspectRatio);\n\n  if (calculatedHeight > availableHeight) {\n    return {\n      width: Math.round(availableHeight / aspectRatio),\n      height: availableHeight,\n    };\n  }\n\n  return {\n    width: calculatedWidth,\n    height: Math.round(calculatedWidth * aspectRatio),\n  };\n}\n\nfunction applyShape(ghost: HTMLDivElement, type: MediaType, isOpening = false) {\n  if (type === MediaType.Nft) {\n    ghost.classList.add(isOpening ? styles.ghost_roundedOpening : styles.ghost_roundedClosing);\n  }\n}\n\nfunction clearShape(ghost: HTMLDivElement, type: MediaType, isOpening = false) {\n  if (type === MediaType.Nft) {\n    ghost.classList.remove(isOpening ? styles.ghost_roundedOpening : styles.ghost_roundedClosing);\n  }\n}\n\nasync function getImageDimension(url: string) {\n  const img = new Image();\n  img.src = url;\n  await new Promise((resolve) => {\n    img.onload = resolve;\n  });\n  return { width: img.width, height: img.height };\n}\n","import type { RefObject } from 'react';\nimport type { FC, TeactNode } from '../../lib/teact/teact';\nimport React, { useRef } from '../../lib/teact/teact';\n\nimport usePrevious from '../../hooks/usePrevious';\nimport useShowTransition from '../../hooks/useShowTransition';\n\ntype OwnProps = {\n  isOpen: boolean;\n  isCustom?: boolean;\n  isHidden?: boolean;\n  id?: string;\n  className?: string;\n  onClick?: (e: React.MouseEvent<HTMLElement, MouseEvent>) => void;\n  noCloseTransition?: boolean;\n  shouldAnimateFirstRender?: boolean;\n  style?: string;\n  children: TeactNode;\n  ref?: RefObject<HTMLDivElement>;\n};\n\nconst ShowTransition: FC<OwnProps> = ({\n  isOpen,\n  isHidden,\n  isCustom,\n  id,\n  className,\n  onClick,\n  children,\n  noCloseTransition,\n  shouldAnimateFirstRender,\n  style,\n  ref: externalRef,\n}) => {\n  const prevIsOpen = usePrevious(isOpen);\n  const prevChildren = usePrevious(children);\n  const fromChildrenRef = useRef<TeactNode>();\n  const isFirstRender = prevIsOpen === undefined;\n\n  const { ref, shouldRender } = useShowTransition({\n    isOpen: isOpen && !isHidden,\n    ref: externalRef,\n    noMountTransition: isFirstRender && !shouldAnimateFirstRender,\n    className: isCustom ? false : undefined,\n    noCloseTransition,\n    withShouldRender: true,\n  });\n\n  if (prevIsOpen && !isOpen) {\n    fromChildrenRef.current = prevChildren;\n  }\n\n  return (\n    (shouldRender || isHidden) && (\n      <div\n        id={id}\n        ref={ref}\n        className={className}\n        onClick={onClick}\n        style={style}\n      >\n        {isOpen ? children : fromChildrenRef.current!}\n      </div>\n    )\n  );\n};\n\nexport default ShowTransition;\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\nimport type { NftMenuHandler } from './hooks/useNftMenu';\nimport { MediaType } from '../../global/types';\n\nimport {\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsCurrentAccountViewMode,\n  selectTonDnsLinkedAddress,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { getCountDaysToDate } from '../../util/dateFormat';\nimport { getTonDnsExpirationDate } from '../../util/dns';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport { usePrevDuringAnimationSimple } from '../../hooks/usePrevDuringAnimationSimple';\nimport useNftMenu from './hooks/useNftMenu';\n\nimport DropdownMenu from '../ui/DropdownMenu';\nimport { ANIMATION_DURATION } from '../ui/Menu';\n\nimport styles from './MediaViewer.module.scss';\n\ntype OwnProps = {\n  mediaId?: string;\n  onClose: NoneToVoidFunction;\n};\n\ntype StateProps = {\n  nft?: ApiNft;\n  tonDnsExpiration?: number;\n  linkedAddress?: string;\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  cardBackgroundNft?: ApiNft;\n  accentColorNft?: ApiNft;\n  isViewMode: boolean;\n};\n\nconst SHOULD_CLOSE_VIEWER_HANDLERS: NftMenuHandler[] = [\n  'send',\n  'renew',\n  'burn',\n  'collection',\n  'select',\n  'linkDomain',\n];\n\nfunction Actions({\n  nft,\n  tonDnsExpiration,\n  linkedAddress,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  cardBackgroundNft,\n  accentColorNft,\n  isViewMode,\n  onClose,\n}: StateProps & OwnProps) {\n  const lang = useLang();\n  const [isMenuOpen, openMenu, closeMenu] = useFlag();\n\n  const dnsExpireInDays = tonDnsExpiration ? getCountDaysToDate(tonDnsExpiration) : undefined;\n  const isNftBlacklisted = useMemo(() => {\n    return blacklistedNftAddresses?.includes(nft!.address);\n  }, [nft, blacklistedNftAddresses]);\n  const isNftWhitelisted = useMemo(() => {\n    return whitelistedNftAddresses?.includes(nft!.address);\n  }, [nft, whitelistedNftAddresses]);\n  const isNftInstalled = usePrevDuringAnimationSimple(\n    nft && nft.address === cardBackgroundNft?.address, ANIMATION_DURATION,\n  );\n  const isNftAccentColorInstalled = usePrevDuringAnimationSimple(\n    nft && nft.address === accentColorNft?.address, ANIMATION_DURATION,\n  );\n\n  const { menuItems, handleMenuItemSelect } = useNftMenu({\n    nft,\n    isViewMode,\n    dnsExpireInDays,\n    linkedAddress,\n    isNftBlacklisted,\n    isNftWhitelisted,\n    isNftInstalled,\n    isNftAccentColorInstalled,\n  });\n\n  const handleSelect = useLastCallback((value: NftMenuHandler) => {\n    if (SHOULD_CLOSE_VIEWER_HANDLERS.includes(value)) {\n      onClose();\n    }\n\n    handleMenuItemSelect(value);\n  });\n\n  return (\n    <div className={styles.actions}>\n      <button\n        type=\"button\"\n        aria-label={lang('More actions')}\n        className={buildClassName(styles.actionButton, styles.menuButton, isMenuOpen && styles.menuButton_active)}\n        onClick={openMenu}\n      >\n        <i className=\"icon icon-more\" aria-hidden />\n      </button>\n      <DropdownMenu\n        isOpen={isMenuOpen}\n        items={menuItems}\n        menuPositionY=\"top\"\n        menuPositionX=\"right\"\n        shouldTranslateOptions\n        onClose={closeMenu}\n        className=\"component-theme-dark\"\n        buttonClassName={styles.menuItem}\n        onSelect={handleSelect}\n      />\n\n      <button\n        type=\"button\"\n        aria-label={lang('Close')}\n        className={styles.actionButton}\n        onClick={onClose}\n      >\n        <i className={buildClassName('icon-windows-close', styles.actionIcon)} aria-hidden />\n      </button>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { mediaId }): StateProps => {\n  const { mediaType = MediaType.Nft } = global.mediaViewer || {};\n  const isViewMode = selectIsCurrentAccountViewMode(global);\n\n  if (!mediaId || mediaType !== MediaType.Nft) return { isViewMode };\n\n  const { byAddress, dnsExpiration } = selectCurrentAccountState(global)?.nfts || {};\n  const nft = byAddress?.[mediaId];\n  if (!nft) return { isViewMode };\n\n  const { blacklistedNftAddresses, whitelistedNftAddresses } = selectCurrentAccountState(global) || {};\n  const { cardBackgroundNft, accentColorNft } = selectCurrentAccountSettings(global) || {};\n  const tonDnsExpiration = getTonDnsExpirationDate(nft, dnsExpiration);\n  const linkedAddress = selectTonDnsLinkedAddress(global, nft);\n\n  return {\n    nft,\n    tonDnsExpiration,\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n    cardBackgroundNft,\n    accentColorNft,\n    isViewMode,\n    linkedAddress,\n  };\n})(Actions));\n","import React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { MediaType } from '../../global/types';\n\nimport { GETGEMS_BASE_MAINNET_URL, GETGEMS_BASE_TESTNET_URL } from '../../config';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { handleUrlClick } from '../../util/openUrl';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './MediaViewer.module.scss';\n\ntype OwnProps = {\n\n  mediaId?: string;\n};\n\ntype StateProps = {\n  title?: string;\n  description?: string;\n  descriptionUrl?: string;\n};\n\nfunction MediaInfo({ title, description, descriptionUrl }: OwnProps & StateProps) {\n  const lang = useLang();\n\n  return (\n    <div className={styles.mediaInfo}>\n      <span className={styles.mediaInfoTitle}>{title}</span>\n      <a\n        href={descriptionUrl}\n        target=\"_blank\"\n        aria-label={lang('Open NFT Collection')}\n        className={styles.mediaInfoDescription}\n        rel=\"noreferrer\"\n        onClick={handleUrlClick}\n      >\n        <span className={styles.descriptionText}>{description}</span>\n        <i className={buildClassName('icon-tooltip', styles.tooltip)} aria-hidden />\n      </a>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { mediaId }): StateProps => {\n  const { mediaType = MediaType.Nft } = global.mediaViewer || {};\n\n  if (!mediaId || mediaType !== MediaType.Nft) return {};\n\n  const isTestnet = global.settings.isTestnet;\n\n  const getgemsBaseUrl = isTestnet ? GETGEMS_BASE_TESTNET_URL : GETGEMS_BASE_MAINNET_URL;\n\n  const { byAddress } = selectCurrentAccountState(global)?.nfts || {};\n  const nft = byAddress?.[mediaId];\n  if (!nft) return {};\n\n  return {\n    title: nft.name || shortenAddress(nft.address, 4),\n    description: nft.collectionName,\n    descriptionUrl: `${getgemsBaseUrl}collection/${nft.collectionAddress}`,\n  };\n})(MediaInfo));\n","import { useRef } from '../lib/teact/teact';\n\nimport type { Signal } from '../util/signals';\n\nimport useEffectOnce from './useEffectOnce';\n\n// Allows to use signal value as \"silent\" dependency in hooks (not causing updates)\nexport function useSignalRef<T>(getValue: Signal<T>) {\n  const ref = useRef<T>(getValue());\n\n  useEffectOnce(() => {\n    return getValue.subscribe(() => {\n      ref.current = getValue();\n    });\n  });\n\n  return ref;\n}\n","import { useEffect } from '../../../lib/teact/teact';\n\nimport { createSignal } from '../../../util/signals';\n\nconst [getZoomChange, setZoomChange] = createSignal(1);\n\nexport default function useZoomChange() {\n  useEffect(() => {\n    return () => {\n      setZoomChange(1);\n    };\n  }, []);\n\n  return [getZoomChange, setZoomChange] as const;\n}\n","import React, {\n  memo, useEffect, useMemo, useRef,\n} from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { MediaType } from '../../global/types';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\n\nimport styles from './MediaViewer.module.scss';\n\nimport scamImg from '../../assets/scam.svg';\n\ninterface OwnProps {\n\n  mediaId: string;\n}\n\ninterface StateProps {\n  alt?: string;\n  thumbnail?: string;\n  image?: string;\n  lottie?: string;\n  description?: string;\n  isScam?: boolean;\n  whitelistedMediaIds?: string[];\n}\n\nconst ANIMATED_ICON_SIZE = 250; // Preview size (500px) / 2\n\nfunction Media({\n  mediaId, alt, thumbnail, image, lottie, description, isScam, whitelistedMediaIds,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n  const src = image || thumbnail;\n  const ref = useRef<HTMLDivElement>();\n  const { isPortrait } = useDeviceScreen();\n\n  useEffect(() => {\n    const element = ref.current!;\n    const { height } = element.getBoundingClientRect();\n    requestMutation(() => {\n      // Inner scroll requires max-height to be set\n      element.style.setProperty('--max-height', `${height}px`);\n    });\n  }, [isPortrait]);\n\n  const isNftWhiteListed = useMemo(() => {\n    return whitelistedMediaIds?.includes(mediaId);\n  }, [mediaId, whitelistedMediaIds]);\n\n  return (\n    <div className={styles.content}>\n      {lottie ? (\n        <AnimatedIconWithPreview\n          size={ANIMATED_ICON_SIZE}\n          shouldStretch\n          play\n          noLoop={false}\n          tgsUrl={lottie}\n          previewUrl={src}\n          className={styles.image}\n          noPreviewTransition\n        />\n      ) : (\n        <img src={src} alt={alt} className={styles.image} />\n      )}\n      <div className={buildClassName(styles.contentDescription, 'custom-scroll')} ref={ref}>\n        {description && (\n          <div className={styles.contentTextWrapper}>\n            <div className={buildClassName(styles.contentText, 'custom-scroll')} dir=\"auto\">\n              {isScam && !isNftWhiteListed && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n              {description}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { mediaId }): StateProps => {\n  const { mediaType = MediaType.Nft } = global.mediaViewer || {};\n\n  if (mediaType !== MediaType.Nft) return {};\n\n  const { byAddress } = selectCurrentAccountState(global)?.nfts || {};\n  const nft = byAddress?.[mediaId];\n  if (!nft) return {};\n\n  const { whitelistedNftAddresses } = selectCurrentAccountState(global) || {};\n\n  return {\n    alt: nft.name,\n    thumbnail: nft.thumbnail,\n    image: nft.image,\n    lottie: nft.metadata?.lottie,\n    description: nft.description,\n    isScam: nft.isScam,\n    whitelistedMediaIds: whitelistedNftAddresses,\n  };\n})(Media));\n","import React, {\n  memo, useEffect, useLayoutEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport type { RealTouchEvent } from '../../util/captureEvents';\n\nimport { animateNumber, timingFunctions } from '../../util/animation';\nimport buildClassName from '../../util/buildClassName';\nimport {\n  captureEvents,\n  IOS_SCREEN_EDGE_THRESHOLD,\n  SWIPE_DIRECTION_THRESHOLD,\n  SWIPE_DIRECTION_TOLERANCE,\n} from '../../util/captureEvents';\nimport { clamp, isBetween, round } from '../../util/math';\nimport { debounce } from '../../util/schedulers';\nimport { IS_IOS, IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport useDebouncedCallback from '../../hooks/useDebouncedCallback';\nimport useDerivedState from '../../hooks/useDerivedState';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useSignal from '../../hooks/useSignal';\nimport { useSignalRef } from '../../hooks/useSignalRef';\nimport useWindowSize from '../../hooks/useWindowSize';\nimport useZoomChange from './hooks/useZoomChangeSignal';\n\nimport Media from './Media';\n\nimport styles from './MediaViewer.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  mediaId?: string;\n  getMediaId: (fromId?: string, direction?: number) => string | undefined;\n  selectMedia: (id: string) => void;\n  withAnimation: boolean;\n  onClose: () => void;\n}\n\ntype Transform = {\n  x: number;\n  y: number;\n  scale: number;\n};\n\nenum SwipeDirection {\n  Horizontal,\n  Vertical,\n}\n\nconst SWIPE_X_THRESHOLD = 50; // px\nconst SWIPE_Y_THRESHOLD = 50; // px\nconst SLIDES_GAP = IS_TOUCH_ENV ? 40 : 0; // px\nconst ANIMATION_DURATION = 350; // ms\nconst DEBOUNCE_SELECT_MEDIA = 350; // ms\nconst DEBOUNCE_SWIPE = 500; // ms\nconst DOUBLE_TAP_ZOOM = 3;\nconst CLICK_Y_THRESHOLD = 80; // px\nconst MAX_ZOOM = 4;\nconst MIN_ZOOM = 1;\n\nconst { easeOutCubic, easeOutQuart } = timingFunctions;\n\nlet cancelAnimation: ReturnType<typeof animateNumber> | undefined;\nlet cancelZoomAnimation: ReturnType<typeof animateNumber> | undefined;\n\nfunction Slides({\n  isOpen, mediaId, selectMedia, getMediaId, withAnimation, onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  const containerRef = useRef<HTMLDivElement>();\n  const activeSlideRef = useRef<HTMLDivElement>();\n  const leftSlideRef = useRef<HTMLDivElement>();\n  const rightSlideRef = useRef<HTMLDivElement>();\n  const lastTransformRef = useRef<Transform>({ x: 0, y: 0, scale: 1 });\n  const swipeDirectionRef = useRef<SwipeDirection | undefined>(undefined);\n  const initialContentRectRef = useRef<DOMRect | undefined>(undefined);\n  const isReleasedRef = useRef(false);\n  const [getZoomChange] = useZoomChange();\n  const prevZoomChangeRef = useRef(getZoomChange());\n  const [isMouseDown, setIsMouseDown] = useState(false);\n  const [getTransform, setTransform] = useSignal<Transform>({ x: 0, y: 0, scale: 1 });\n  const transformRef = useSignalRef(getTransform);\n  const [getActiveMediaId, setActiveMediaId] = useSignal<string | undefined>(mediaId);\n  const activeMediaIdRef = useSignalRef(getActiveMediaId);\n  const isScaled = useDerivedState(() => getTransform().scale !== 1, [getTransform]);\n  const activeMediaId = useDerivedState(getActiveMediaId);\n  const { height: windowHeight, width: windowWidth, isResizing } = useWindowSize();\n\n  useHistoryBack({\n    isActive: isOpen,\n    onBack: onClose,\n    shouldBeReplaced: true,\n  });\n\n  const selectMediaDebounced = useDebouncedCallback(selectMedia, [selectMedia], DEBOUNCE_SELECT_MEDIA, true);\n  const clearSwipeDirectionDebounced = useDebouncedCallback(() => {\n    swipeDirectionRef.current = undefined;\n  }, [], DEBOUNCE_SWIPE, true);\n\n  const clickXThreshold = IS_TOUCH_ENV ? 40 : windowWidth / 10;\n\n  useEffect(() => {\n    const { scale, x, y } = transformRef.current;\n    // Only update active media if slide is in default position\n    if (x === 0 && y === 0 && scale === 1) {\n      setActiveMediaId(mediaId);\n    }\n  }, [mediaId, setActiveMediaId, transformRef]);\n\n  useLayoutEffect(() => {\n    const { x, y, scale } = getTransform();\n    if (leftSlideRef.current) {\n      leftSlideRef.current.style.transform = getTransformStyle(-windowWidth + x - SLIDES_GAP);\n    }\n    if (activeSlideRef.current) {\n      activeSlideRef.current.style.transform = getTransformStyle(x, y, scale);\n    }\n    if (rightSlideRef.current) {\n      rightSlideRef.current.style.transform = getTransformStyle(windowWidth + x + SLIDES_GAP);\n    }\n  }, [getTransform, windowWidth]);\n\n  const changeSlide = useLastCallback((direction: number, dryRun = false) => {\n    let lastTransform = lastTransformRef.current;\n    const mId = getMediaId(activeMediaIdRef.current, direction);\n    if (dryRun) return mId !== undefined;\n    if (mId === undefined) return false;\n    const offset = (windowWidth + SLIDES_GAP) * direction;\n    const transform = transformRef.current;\n    const x = transform.x + offset;\n    setActiveMediaId(mId);\n    selectMediaDebounced(mId);\n    lastTransform = { x: 0, y: 0, scale: 1 };\n    if (!withAnimation) {\n      setTransform(lastTransform);\n      return true;\n    }\n    cancelAnimation = animateNumber({\n      from: x,\n      to: 0,\n      duration: ANIMATION_DURATION,\n      timing: easeOutCubic,\n      onUpdate: (value) => setTransform({\n        y: 0,\n        x: value,\n        scale: 1,\n      }),\n    });\n    return true;\n  });\n\n  const handleNextSlide = useLastCallback(() => changeSlide(1));\n  const handlePrevSlide = useLastCallback(() => changeSlide(-1));\n\n  useEffect(() => {\n    if (!containerRef.current || activeMediaIdRef.current === undefined) {\n      return undefined;\n    }\n    let lastTransform = lastTransformRef.current;\n    const lastDragOffset = {\n      x: 0,\n      y: 0,\n    };\n    const lastZoomCenter = {\n      x: 0,\n      y: 0,\n    };\n    const panDelta = {\n      x: 0,\n      y: 0,\n    };\n    let lastGestureTime = Date.now();\n    let content: HTMLElement | null;\n    const setLastGestureTime = debounce(() => {\n      lastGestureTime = Date.now();\n    }, 500, false, true);\n\n    const changeSlideOnClick = (e: MouseEvent): [boolean, boolean] => {\n      const { scale } = transformRef.current;\n      if (scale !== 1) return [false, false];\n      let direction = 0;\n      if (windowHeight - e.pageY < CLICK_Y_THRESHOLD) {\n        return [false, false];\n      }\n      if (e.pageX < clickXThreshold) {\n        direction = -1;\n      } else if (e.pageX > windowWidth - clickXThreshold) {\n        direction = 1;\n      }\n      const hasNextSlide = changeSlide(direction, !IS_TOUCH_ENV);\n      const isInThreshold = direction !== 0;\n      return [isInThreshold, hasNextSlide];\n    };\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      const { scale } = transformRef.current;\n      if (scale !== 1) return;\n      switch (e.key) {\n        case 'Left': // IE/Edge specific value\n        case 'ArrowLeft':\n          changeSlide(-1);\n          break;\n\n        case 'Right': // IE/Edge specific value\n        case 'ArrowRight':\n          changeSlide(1);\n          break;\n      }\n    };\n\n    const calculateOffsetBoundaries = (\n      { x, y, scale }: Transform,\n      offsetTop = 0,\n    ): [Transform, boolean, boolean] => {\n      const initialContentRect = initialContentRectRef.current;\n      if (!initialContentRect) return [{ x, y, scale }, true, true];\n      // Get current content boundaries\n      let inBoundsX = true;\n      let inBoundsY = true;\n\n      const centerX = (windowWidth - windowWidth * scale) / 2;\n      const centerY = (windowHeight - windowHeight * scale) / 2;\n\n      // If content is outside window we calculate offset boundaries\n      // based on initial content rect and current scale\n      const minOffsetX = Math.max(-initialContentRect.left * scale, centerX);\n      const maxOffsetX = windowWidth - initialContentRect.right * scale;\n      inBoundsX = isBetween(x, maxOffsetX, minOffsetX);\n      x = clamp(x, maxOffsetX, minOffsetX);\n\n      const minOffsetY = Math.max(-initialContentRect.top * scale + offsetTop, centerY);\n      const maxOffsetY = windowHeight - initialContentRect.bottom * scale;\n      inBoundsY = isBetween(y, maxOffsetY, minOffsetY);\n      y = clamp(y, maxOffsetY, minOffsetY);\n\n      return [{ x, y, scale }, inBoundsX, inBoundsY];\n    };\n\n    const onRelease = (e: MouseEvent | RealTouchEvent | WheelEvent) => {\n      // This allows to prevent onRelease triggered by debounced wheel event\n      // after onRelease was triggered manually in onDrag\n      if (isReleasedRef.current) {\n        isReleasedRef.current = false;\n        return;\n      }\n      if (e.type === 'mouseup') {\n        setIsMouseDown(false);\n      }\n      const transform = transformRef.current;\n      const { y, scale } = transform;\n      let x = transform.x;\n      const absX = Math.abs(x);\n      const absY = Math.abs(y);\n\n      clearSwipeDirectionDebounced();\n\n      // If scale is less than 1 we need to bounce back\n      if (scale < 1) {\n        lastTransform = { x: 0, y: 0, scale: 1 };\n        cancelAnimation = animateNumber({\n          from: [x, y, scale],\n          to: [0, 0, 1],\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => setTransform({\n            x: value[0],\n            y: value[1],\n            scale: value[2],\n          }),\n        });\n        return;\n      }\n      if (scale > 1) {\n        // Get current content boundaries\n        const s1 = Math.min(scale, MAX_ZOOM);\n        const scaleFactor = s1 / scale;\n\n        // Calculate new position based on the last zoom center to keep the zoom center\n        // at the same position when bouncing back from max zoom\n        let x1 = x * scaleFactor + (lastZoomCenter.x - scaleFactor * lastZoomCenter.x);\n        let y1 = y * scaleFactor + (lastZoomCenter.y - scaleFactor * lastZoomCenter.y);\n\n        // Arbitrary pan velocity coefficient\n        const k = 0.15;\n\n        // If scale didn't change, we need to add inertia to pan gesture\n        if (e.type !== 'wheel' && lastTransform.scale === scale) {\n          // Calculate user gesture velocity\n          const Vx = Math.abs(lastDragOffset.x) / (Date.now() - lastGestureTime);\n          const Vy = Math.abs(lastDragOffset.y) / (Date.now() - lastGestureTime);\n\n          // Add extra distance based on gesture velocity and last pan delta\n          x1 -= Math.abs(lastDragOffset.x) * Vx * k * panDelta.x;\n          y1 -= Math.abs(lastDragOffset.y) * Vy * k * panDelta.y;\n        }\n\n        [lastTransform] = calculateOffsetBoundaries({ x: x1, y: y1, scale: s1 });\n        cancelAnimation = animateNumber({\n          from: [x, y, scale],\n          to: [lastTransform.x, lastTransform.y, lastTransform.scale],\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => setTransform({\n            x: value[0],\n            y: value[1],\n            scale: value[2],\n          }),\n        });\n        return;\n      }\n      lastTransform = {\n        x,\n        y,\n        scale,\n      };\n      if (absY >= SWIPE_Y_THRESHOLD) {\n        onClose();\n        return;\n      }\n      // Bounce back if vertical swipe is below threshold\n      if (absY > 0) {\n        cancelAnimation = animateNumber({\n          from: y,\n          to: 0,\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => setTransform({\n            x: 0,\n            y: value,\n            scale,\n          }),\n        });\n        return;\n      }\n      // Get horizontal swipe direction\n      const direction = x < 0 ? 1 : -1;\n      const mId = getMediaId(activeMediaIdRef.current, x < 0 ? 1 : -1);\n      // Get the direction of the last pan gesture.\n      // Could be different from the total horizontal swipe direction\n      // if user starts a swipe in one direction and then changes the direction\n      // we need to cancel slide transition\n      const dirX = panDelta.x < 0 ? -1 : 1;\n      if (mId !== undefined && absX >= SWIPE_X_THRESHOLD && direction === dirX) {\n        const offset = (windowWidth + SLIDES_GAP) * direction;\n        // If image is shifted by more than SWIPE_X_THRESHOLD,\n        // We shift everything by one screen width and then set new active message id\n        x += offset;\n        setActiveMediaId(mId);\n        selectMediaDebounced(mId);\n      }\n      // Then we always return to the original position\n      cancelAnimation = animateNumber({\n        from: x,\n        to: 0,\n        duration: ANIMATION_DURATION,\n        timing: easeOutCubic,\n        onUpdate: (value) => setTransform({\n          y: 0,\n          x: value,\n          scale: scale ?? 1,\n        }),\n      });\n    };\n\n    const cleanup = captureEvents(containerRef.current, {\n      isNotPassive: true,\n      withNativeDrag: true,\n      excludedClosestSelector: `${styles.header}, .${styles.contentDescription}`,\n      minZoom: MIN_ZOOM,\n      maxZoom: MAX_ZOOM,\n      doubleTapZoom: DOUBLE_TAP_ZOOM,\n      withWheelDrag: true,\n      onCapture: (e) => {\n        const { x, y, scale } = transformRef.current;\n        if (e.type === 'mousedown') {\n          setIsMouseDown(true);\n          if (scale !== 1) {\n            e.preventDefault();\n            return;\n          }\n        }\n        lastGestureTime = Date.now();\n        if (x === 0 && y === 0 && scale === 1) {\n          if (!activeSlideRef.current) return;\n          content = activeSlideRef.current.querySelector('img, video');\n          if (!content) return;\n          // Store initial content rect, without transformations\n          initialContentRectRef.current = content.getBoundingClientRect();\n        }\n      },\n      onDrag: (event, captureEvent, {\n        dragOffsetX,\n        dragOffsetY,\n      }, cancelDrag) => {\n        if (isReleasedRef.current) return;\n        // Avoid conflicts with swipe-to-back gestures\n        if (IS_IOS && captureEvent.type === 'touchstart') {\n          const { pageX } = (captureEvent as RealTouchEvent).touches[0];\n          if (pageX <= IOS_SCREEN_EDGE_THRESHOLD || pageX >= windowWidth - IOS_SCREEN_EDGE_THRESHOLD) {\n            return;\n          }\n        }\n        if (cancelAnimation) {\n          cancelAnimation();\n          cancelAnimation = undefined;\n        }\n        panDelta.x = lastDragOffset.x - dragOffsetX;\n        panDelta.y = lastDragOffset.y - dragOffsetY;\n        lastDragOffset.x = dragOffsetX;\n        lastDragOffset.y = dragOffsetY;\n        const absOffsetX = Math.abs(dragOffsetX);\n        const absOffsetY = Math.abs(dragOffsetY);\n        const { x, y, scale } = transformRef.current;\n\n        // If user is inactive but is still touching the screen\n        // we reset last gesture time\n        setLastGestureTime();\n\n        // If image is scaled we just need to pan it\n        if (scale !== 1) {\n          const x1 = lastTransform.x + dragOffsetX;\n          const y1 = lastTransform.y + dragOffsetY;\n          if (['wheel', 'mousemove'].includes(event.type)) {\n            const [transform, inBoundsX, inBoundsY] = calculateOffsetBoundaries({ x: x1, y: y1, scale });\n            if (cancelDrag) cancelDrag(!inBoundsX, !inBoundsY);\n            setTransform(transform);\n            return;\n          }\n          if ('touches' in event && event.touches.length === 1) {\n            setTransform({\n              x: x1,\n              y: y1,\n              scale,\n            });\n          }\n          return;\n        }\n        if (event.type === 'mousemove') return;\n        if (swipeDirectionRef.current !== SwipeDirection.Vertical) {\n          // If user is swiping horizontally or horizontal shift is dominant\n          // we change only horizontal position\n          if (swipeDirectionRef.current === SwipeDirection.Horizontal\n            || Math.abs(x) > SWIPE_DIRECTION_THRESHOLD || absOffsetX / absOffsetY > SWIPE_DIRECTION_TOLERANCE) {\n            swipeDirectionRef.current = SwipeDirection.Horizontal;\n            const limit = windowWidth + SLIDES_GAP;\n            const x1 = clamp(dragOffsetX, -limit, limit);\n            setTransform({\n              x: x1,\n              y: 0,\n              scale,\n            });\n            // We know that at this point onRelease will trigger slide change,\n            // We can trigger onRelease directly instead of waiting for the debounced callback\n            // to avoid a delay\n            if (event.type === 'wheel' && Math.abs(x1) > SWIPE_X_THRESHOLD * 2) {\n              onRelease(event);\n              isReleasedRef.current = true;\n            }\n            return;\n          }\n        }\n        // If vertical shift is dominant we change only vertical position\n        if (swipeDirectionRef.current === SwipeDirection.Vertical\n          || Math.abs(y) > SWIPE_DIRECTION_THRESHOLD || absOffsetY / absOffsetX > SWIPE_DIRECTION_TOLERANCE) {\n          swipeDirectionRef.current = SwipeDirection.Vertical;\n          const limit = windowHeight;\n          const y1 = clamp(dragOffsetY, -limit, limit);\n          setTransform({\n            x: 0,\n            y: y1,\n            scale,\n          });\n          if (event.type === 'wheel' && Math.abs(y1) > SWIPE_Y_THRESHOLD * 2) {\n            onRelease(event);\n            isReleasedRef.current = true;\n          }\n        }\n      },\n      onZoom: (e, {\n        zoom,\n        zoomFactor,\n        initialCenterX,\n        initialCenterY,\n        dragOffsetX,\n        dragOffsetY,\n        currentCenterX,\n        currentCenterY,\n      }) => {\n        if (cancelAnimation) cancelAnimation();\n        initialCenterX = initialCenterX || windowWidth / 2;\n        initialCenterY = initialCenterY || windowHeight / 2;\n        currentCenterX = currentCenterX || windowWidth / 2;\n        currentCenterY = currentCenterY || windowHeight / 2;\n\n        // Calculate current scale based on zoom factor and limits, add zoom margin for bounce back effect\n        const scale = zoom ?? clamp(lastTransform.scale * zoomFactor!, MIN_ZOOM * 0.5, MAX_ZOOM * 3);\n        const scaleFactor = scale / lastTransform.scale;\n        const offsetX = Math.abs(Math.min(lastTransform.x, 0));\n        const offsetY = Math.abs(Math.min(lastTransform.y, 0));\n\n        // Save last zoom center for bounce back effect\n        lastZoomCenter.x = currentCenterX;\n        lastZoomCenter.y = currentCenterY;\n\n        // Calculate new center relative to the shifted image\n        const scaledCenterX = offsetX + initialCenterX;\n        const scaledCenterY = offsetY + initialCenterY;\n\n        // Calculate how much we need to shift the image to keep the zoom center at the same position\n        const scaleOffsetX = (scaledCenterX - scaleFactor * scaledCenterX);\n        const scaleOffsetY = (scaledCenterY - scaleFactor * scaledCenterY);\n\n        const [transform] = calculateOffsetBoundaries({\n          x: lastTransform.x + scaleOffsetX + dragOffsetX,\n          y: lastTransform.y + scaleOffsetY + dragOffsetY,\n          scale,\n        });\n\n        setTransform(transform);\n      },\n      onClick(e) {\n        setIsMouseDown(false);\n        const [isInThreshold, hasNextSlide] = changeSlideOnClick(e as MouseEvent);\n        if (isInThreshold) {\n          e.preventDefault();\n          e.stopPropagation();\n          if (IS_TOUCH_ENV) return;\n          if (!hasNextSlide) onClose();\n          return;\n        }\n        if (lastTransform.scale !== 1 || IS_TOUCH_ENV) return;\n        onClose();\n      },\n      onDoubleClick(e, {\n        centerX,\n        centerY,\n      }) {\n        const [isInThreshold] = changeSlideOnClick(e as MouseEvent);\n        if (isInThreshold) {\n          e.preventDefault();\n          e.stopPropagation();\n          return;\n        }\n        if (!IS_TOUCH_ENV && e.type !== 'wheel') return;\n        const { x, y, scale } = transformRef.current;\n        // Calculate how much we need to shift the image to keep the zoom center at the same position\n        const scaleOffsetX = (centerX - DOUBLE_TAP_ZOOM * centerX);\n        const scaleOffsetY = (centerY - DOUBLE_TAP_ZOOM * centerY);\n        if (scale === 1) {\n          if (x !== 0 || y !== 0) return;\n          lastTransform = calculateOffsetBoundaries({\n            x: scaleOffsetX,\n            y: scaleOffsetY,\n            scale: DOUBLE_TAP_ZOOM,\n          })[0];\n        } else {\n          lastTransform = {\n            x: 0,\n            y: 0,\n            scale: 1,\n          };\n        }\n        cancelAnimation = animateNumber({\n          from: [x, y, scale],\n          to: [lastTransform.x, lastTransform.y, lastTransform.scale],\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => {\n            const transform = {\n              x: value[0],\n              y: value[1],\n              scale: value[2],\n            };\n            setTransform(transform);\n          },\n        });\n      },\n      onRelease,\n    });\n    document.addEventListener('keydown', handleKeyDown, false);\n    return () => {\n      cleanup();\n      document.removeEventListener('keydown', handleKeyDown, false);\n    };\n  },\n  [\n    onClose,\n    setTransform,\n    getMediaId,\n    windowWidth,\n    windowHeight,\n    clickXThreshold,\n    selectMediaDebounced,\n    clearSwipeDirectionDebounced,\n    withAnimation,\n    setIsMouseDown,\n    transformRef,\n    setActiveMediaId,\n    activeMediaIdRef,\n    changeSlide,\n  ]);\n\n  useEffect(() => {\n    const zoomChange = getZoomChange();\n    const hasZoomChanged = prevZoomChangeRef.current !== undefined\n      && prevZoomChangeRef.current !== zoomChange;\n    if (!containerRef.current || !hasZoomChanged) return;\n    prevZoomChangeRef.current = zoomChange;\n    const { scale } = transformRef.current;\n    const dir = zoomChange > 0 ? -1 : +1;\n    const minZoom = MIN_ZOOM * 0.6;\n    const maxZoom = MAX_ZOOM * 3;\n    let steps = 100;\n    let prevValue = 0;\n    if (scale <= minZoom && dir > 0) return;\n    if (scale >= maxZoom && dir < 0) return;\n    if (scale === 1 && dir > 0) steps = 20;\n    if (cancelZoomAnimation) cancelZoomAnimation();\n    cancelZoomAnimation = animateNumber({\n      from: dir,\n      to: dir * steps,\n      duration: ANIMATION_DURATION,\n      timing: easeOutQuart,\n      onUpdate: (value) => {\n        if (!containerRef.current) return;\n        const delta = round(value - prevValue, 2);\n        prevValue = value;\n        // To reuse existing logic we trigger wheel event for zoom buttons\n        const wheelEvent = new WheelEvent('wheel', {\n          deltaY: delta,\n          ctrlKey: true,\n        });\n        containerRef.current.dispatchEvent(wheelEvent);\n      },\n    });\n  }, [getZoomChange, transformRef]);\n\n  // eslint-disable-next-line no-null/no-null\n  if (activeMediaId === undefined) return null;\n\n  const nextMediaId = getMediaId(activeMediaId, 1);\n  const prevMediaId = getMediaId(activeMediaId, -1);\n  const hasPrev = prevMediaId !== undefined;\n  const hasNext = nextMediaId !== undefined;\n  const isMoving = isMouseDown && isScaled;\n\n  return (\n    <div className={styles.slides} ref={containerRef}>\n      <div className={styles.slide} ref={leftSlideRef}>\n        {hasPrev && !isScaled && !isResizing && (\n          <Media mediaId={prevMediaId} />\n        )}\n      </div>\n      <div\n        className={buildClassName(styles.slide, styles.slide_active, isMoving && styles.slide_moving)}\n        ref={activeSlideRef}\n      >\n        <Media mediaId={activeMediaId} />\n      </div>\n      <div className={styles.slide} ref={rightSlideRef}>\n        {hasNext && !isScaled && !isResizing && (\n          <Media mediaId={nextMediaId} />\n        )}\n      </div>\n      {hasPrev && !isScaled && !IS_TOUCH_ENV && (\n        <button\n          type=\"button\"\n          onClick={handlePrevSlide}\n          className={buildClassName(styles.navigation, styles.navigation_prev)}\n          aria-label={lang('Previous')}\n          dir={lang.isRtl ? 'rtl' : undefined}\n        />\n      )}\n      {hasNext && !isScaled && !IS_TOUCH_ENV && (\n        <button\n          type=\"button\"\n          onClick={handleNextSlide}\n          className={buildClassName(styles.navigation, styles.navigation_next)}\n          aria-label={lang('Next')}\n          dir={lang.isRtl ? 'rtl' : undefined}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(Slides);\n\nfunction getTransformStyle(x = 0, y = 0, scale = 1) {\n  return `translate3d(${x.toFixed(3)}px, ${y.toFixed(3)}px, 0px) scale(${scale.toFixed(3)})`;\n}\n","import React, {\n  beginHeavyAnimation,\n  memo,\n  useEffect,\n  useMemo,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\nimport { MediaType } from '../../global/types';\n\nimport { ANIMATION_END_DELAY } from '../../config';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { animateClosing, animateOpening, ANIMATION_DURATION } from './helpers/ghostAnimation';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePrevious from '../../hooks/usePrevious';\nimport useToggleClass from '../../hooks/useToggleClass';\n\nimport ShowTransition from '../ui/ShowTransition';\nimport Transition from '../ui/Transition';\nimport Actions from './Actions';\nimport MediaInfo from './MediaInfo';\nimport Slides from './Slides';\n\nimport styles from './MediaViewer.module.scss';\n\ninterface StateProps {\n  mediaId?: string;\n  txId?: string;\n  hiddenNfts?: 'user' | 'scam';\n  noGhostAnimation?: boolean;\n  mediaIds: string[];\n  mediaUrl?: string;\n  mediaType: MediaType;\n  mediaByIds?: Record<string, ApiNft>;\n  blacklistedIds: string[];\n  withAnimation: boolean;\n}\n\nfunction MediaViewer({\n  mediaId, mediaIds, mediaType, mediaUrl, withAnimation, mediaByIds, blacklistedIds, txId, hiddenNfts, noGhostAnimation,\n}: StateProps) {\n  const { closeMediaViewer, openMediaViewer } = getActions();\n\n  const isOpen = Boolean(mediaId);\n  const lang = useLang();\n  const prevMediaId = usePrevious(mediaId);\n  const prevTxId = usePrevious(txId);\n  const prevHiddenNfts = usePrevious(hiddenNfts);\n  const prevNoGhostAnimation = usePrevious(noGhostAnimation);\n  const headerAnimation = withAnimation ? 'slideFade' : 'none';\n  const shouldAnimateOpening = withAnimation && isOpen && !prevMediaId && !noGhostAnimation;\n  const shouldAnimateClosing = withAnimation && !isOpen && !!prevMediaId && !prevNoGhostAnimation;\n\n  const handleClose = useLastCallback(() => closeMediaViewer());\n\n  const renderedMediaIds = useMemo(() => {\n    return mediaIds.filter((id) => {\n      const media = mediaByIds?.[id];\n      return media && !media.isHidden && !blacklistedIds.includes(id);\n    });\n  }, [blacklistedIds, mediaByIds, mediaIds]);\n  const selectedMediaIndex = renderedMediaIds.indexOf(mediaId!);\n\n  const getMediaId = useLastCallback((fromId?: string, direction?: number): string | undefined => {\n    if (fromId === undefined) return undefined;\n    const index = renderedMediaIds.indexOf(fromId);\n    if ((direction === -1 && index > 0) || (direction === 1 && index < renderedMediaIds.length - 1)) {\n      return renderedMediaIds[index + direction];\n    }\n    return undefined;\n  });\n\n  const selectMedia = useLastCallback((id: string) => {\n    openMediaViewer({ mediaType, mediaId: id });\n  });\n\n  useToggleClass({ className: 'is-media-viewer-open', isActive: isOpen, element: document.body });\n\n  useEffect(() => (isOpen ? captureEscKeyListener(handleClose) : undefined), [handleClose, isOpen]);\n\n  useEffect(() => {\n    if (shouldAnimateOpening) {\n      beginHeavyAnimation(ANIMATION_DURATION + ANIMATION_END_DELAY);\n      animateOpening(mediaType, mediaId, mediaUrl, txId, hiddenNfts);\n    }\n    if (shouldAnimateClosing) {\n      beginHeavyAnimation(ANIMATION_DURATION + ANIMATION_END_DELAY);\n      animateClosing(mediaType, prevMediaId, prevTxId, prevHiddenNfts);\n    }\n  }, [\n    shouldAnimateOpening,\n    shouldAnimateClosing,\n    mediaId,\n    mediaType,\n    mediaUrl,\n    prevMediaId,\n    txId,\n    prevTxId,\n    hiddenNfts,\n    prevHiddenNfts,\n  ]);\n\n  return (\n    <ShowTransition\n      className={buildClassName(styles.root, 'opacity-transition', 'slow')}\n      isOpen={isOpen}\n      shouldAnimateFirstRender\n      isCustom\n    >\n      <div className={styles.header} dir={lang.isRtl ? 'rtl' : undefined}>\n        <Transition activeKey={selectedMediaIndex} name={headerAnimation} className={styles.headerTransition}>\n          <MediaInfo mediaId={mediaId} />\n        </Transition>\n        <Actions mediaId={mediaId} onClose={handleClose} />\n      </div>\n      <Slides\n        isOpen={isOpen}\n        mediaId={mediaId}\n        getMediaId={getMediaId}\n        selectMedia={selectMedia}\n        withAnimation={withAnimation}\n        onClose={handleClose}\n      />\n    </ShowTransition>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    mediaId, mediaType = MediaType.Nft, txId, hiddenNfts, noGhostAnimation,\n  } = global.mediaViewer || {};\n  const animationLevel = global.settings?.animationLevel;\n  const accountState = selectCurrentAccountState(global);\n\n  let mediaIds: string[] = MEMO_EMPTY_ARRAY;\n  let mediaUrl: string | undefined;\n  let mediaByIds: Record<string, ApiNft> | undefined;\n  let blacklistedIds: string[] = MEMO_EMPTY_ARRAY;\n\n  if (mediaType === MediaType.Nft) {\n    const { orderedAddresses, byAddress } = accountState?.nfts || {};\n    const { blacklistedNftAddresses } = accountState || {};\n    const nft = byAddress?.[mediaId!];\n    mediaUrl = (!nft?.metadata?.lottie && nft?.image) || nft?.thumbnail;\n    mediaIds = orderedAddresses || MEMO_EMPTY_ARRAY;\n    mediaByIds = byAddress;\n    if (blacklistedNftAddresses?.length) {\n      blacklistedIds = blacklistedNftAddresses;\n    }\n  }\n\n  return {\n    mediaId,\n    txId,\n    hiddenNfts,\n    noGhostAnimation,\n    mediaIds,\n    mediaType,\n    mediaUrl,\n    mediaByIds,\n    blacklistedIds,\n    withAnimation: animationLevel > 0,\n  };\n})(MediaViewer));\n","import windowSize from './windowSize';\n\nexport function isElementInViewport(el: HTMLElement) {\n  if (el.style.display === 'none') {\n    return false;\n  }\n\n  const rect = el.getBoundingClientRect();\n  const { height: windowHeight } = windowSize.get();\n\n  return (rect.top <= windowHeight) && ((rect.top + rect.height) >= 0);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"TyYDeoPI\",\"standard\":\"ZzhmGZX8\",\"silver\":\"VOCPN2H2\",\"gold\":\"eIy_VriQ\",\"platinum\":\"ThB2aK4u\",\"black\":\"pSEqHC9v\",\"list\":\"VuKYnODy\",\"term\":\"De4BJ4HR\",\"icon\":\"WsbPBan7\",\"data\":\"SmGuh0xn\",\"button\":\"hn6cNzho\",\"currencyIcon\":\"uJl349yd\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiMtwCardType } from '../../api/types';\n\nimport { DEFAULT_FEE, TONCOIN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { fromDecimal } from '../../util/decimals';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\n\nimport styles from './CardPros.module.scss';\n\ninterface OwnProps {\n  type: ApiMtwCardType;\n  price?: number;\n  balance?: bigint;\n  isAvailable?: boolean;\n}\n\nfunction CardPros({ type, price, balance, isAvailable }: OwnProps) {\n  const { startCardMinting, showDialog } = getActions();\n\n  const lang = useLang();\n  const isEnoughBalance = price && balance ? fromDecimal(price, TONCOIN.decimals) + DEFAULT_FEE < balance : false;\n\n  const handleSubmit = useLastCallback(() => {\n    if (!isEnoughBalance) {\n      showDialog({\n        title: lang('Insufficient Balance'),\n        message: lang('Please top up your TON balance.'),\n      });\n\n      return;\n    }\n\n    startCardMinting({ type });\n  });\n\n  return (\n    <div className={buildClassName(styles.root, styles[type])}>\n      <dl className={styles.list}>\n        <dt className={styles.term}>\n          {lang('Unique')}\n          <i className={buildClassName(styles.icon, 'icon-diamond')} aria-hidden />\n        </dt>\n        <dd className={styles.data}>\n          {lang('Get a card with unique background and personalized palette for wallet interface.')}\n        </dd>\n\n        <dt className={styles.term}>\n          {lang('Transferable')}\n          <i className={buildClassName(styles.icon, 'icon-swap')} aria-hidden />\n        </dt>\n        <dd className={styles.data}>{lang('Easily send your upgraded card to any of your friends.')}</dd>\n\n        <dt className={styles.term}>\n          {lang('Tradable')}\n          <i className={buildClassName(styles.icon, 'icon-auction')} aria-hidden />\n        </dt>\n        <dd className={styles.data}>{lang('Sell or auction your card on third-party NFT marketplaces.')}</dd>\n      </dl>\n\n      {!!price && (\n        <Button\n          isPrimary\n          isDisabled={!isAvailable}\n          className={styles.button}\n          onClick={handleSubmit}\n        >\n          {lang('Upgrade for %currency% %amount%', {\n            amount: price,\n            currency: <i className={buildClassName(styles.currencyIcon, 'icon-ton')} aria-label=\"TON\" />,\n          })}\n        </Button>\n      )}\n    </div>\n  );\n}\n\nexport default memo(CardPros);\n","// extracted by mini-css-extract-plugin\nexport default {\"dialog\":\"CjwvIYmY\",\"transition\":\"Tv22S5Gs\",\"transitionSlide\":\"zUSYH0x7\",\"content\":\"LpuTVkiG\",\"slide\":\"ZfVQ8KGW\",\"standard\":\"k0gL3sAb\",\"black\":\"MUamKAQw\",\"slideInner\":\"k2_YXVBE\",\"video\":\"wpccVVfq\",\"cardType\":\"CzdRPvVS\",\"close\":\"IBwesrC_\",\"navigation\":\"cIoUkENQ\",\"navigationLeft\":\"GF_wLd9i\",\"navigationRight\":\"y5oAUrMg\",\"navigationIcon\":\"aSeq5lrl\",\"avaliability\":\"OGLS5EQO\",\"progress\":\"Q3dzQZod\",\"soldOut\":\"VyfNbKU1\",\"amount\":\"wozoyd4S\",\"amountInner\":\"ZgsWpsHL\",\"amountLeft\":\"XMt08mOm\",\"amountSold\":\"F8mchLc4\",\"dots\":\"HY5hRBmJ\",\"dot\":\"tOktKTIK\",\"dotActive\":\"ZMU4FK04\",\"sticker\":\"eto_LEBm\",\"resultWithTime\":\"hlrWLhQ2\",\"resultTimeIcon\":\"W1LXu50q\",\"mintCardBanner\":\"ccNpjwpK\"};","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiCardInfo, ApiCardsInfo, ApiMtwCardType } from '../../api/types';\nimport type { LangFn } from '../../hooks/useLang';\n\nimport { MTW_CARDS_MINT_BASE_URL } from '../../config';\nimport { selectCurrentToncoinBalance } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { captureEvents, SwipeDirection } from '../../util/captureEvents';\nimport { formatNumber } from '../../util/formatNumber';\nimport { round } from '../../util/round';\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport Transition from '../ui/Transition';\nimport CardPros from './CardPros';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './MintCardModal.module.scss';\n\nexport const MAP_CARD_TYPE_TO_NAME = {\n  standard: 'Standard Card',\n  silver: 'Silver Card',\n  gold: 'Gold Card',\n  platinum: 'Platinum Card',\n  black: 'Black Card',\n} as const;\n\ninterface OwnProps {\n  cardsInfo: ApiCardsInfo;\n}\n\ninterface StateProps {\n  tonBalance: bigint;\n}\n\nenum CardSlides {\n  Standard = 0,\n  Silver,\n  Gold,\n  Platinum,\n  Black,\n}\n\nconst TOTAL_SLIDES = Object.values(CardSlides).length / 2;\n\nfunction CardRoster({ cardsInfo, tonBalance }: OwnProps & StateProps) {\n  const { closeMintCardModal } = getActions();\n\n  const lang = useLang();\n\n  const transitionRef = useRef<HTMLDivElement>();\n  const [currentSlide, setCurrentSlide] = useState<CardSlides>(CardSlides.Standard);\n  const [nextKey, setNextKey] = useState<CardSlides>(CardSlides.Silver);\n\n  const showNextSlide = useLastCallback(() => {\n    setCurrentSlide((current) => (current === CardSlides.Black ? CardSlides.Standard : current + 1));\n    setNextKey((current) => (current === CardSlides.Black ? CardSlides.Standard : current + 1));\n  });\n\n  const showPrevSlide = useLastCallback(() => {\n    setCurrentSlide((current) => (current === CardSlides.Standard ? CardSlides.Black : current - 1));\n    setNextKey((current) => (current === CardSlides.Standard ? CardSlides.Black : current - 1));\n  });\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      return undefined;\n    }\n\n    return captureEvents(transitionRef.current!, {\n      onSwipe: (e, direction) => {\n        if (direction === SwipeDirection.Left) {\n          showNextSlide();\n          return true;\n        } else if (direction === SwipeDirection.Right) {\n          showPrevSlide();\n          return true;\n        }\n\n        return false;\n      },\n      selectorToPreventScroll: '.custom-scroll',\n    });\n  }, []);\n\n  function renderControls() {\n    return (\n      <>\n        <Button\n          isRound\n          className={buildClassName(styles.close, modalStyles.closeButton)}\n          ariaLabel={lang('Close')}\n          onClick={closeMintCardModal}\n        >\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </Button>\n        <button\n          className={buildClassName(styles.navigation, styles.navigationLeft)}\n          type=\"button\"\n          aria-label={lang('Prev')}\n          onClick={() => showPrevSlide()}\n        >\n          <i className={buildClassName(styles.navigationIcon, 'icon-chevron-left')} aria-hidden />\n        </button>\n        <button\n          className={buildClassName(styles.navigation, styles.navigationRight)}\n          type=\"button\"\n          onClick={() => showNextSlide()}\n          aria-label={lang('Next')}\n        >\n          <i className={buildClassName(styles.navigationIcon, 'icon-chevron-right')} aria-hidden />\n        </button>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: CardSlides) {\n    const defaultProps = {\n      lang,\n      tonBalance,\n      currentKey,\n    };\n\n    switch (currentKey) {\n      case CardSlides.Standard:\n        return renderMediaCard({\n          ...defaultProps,\n          title: MAP_CARD_TYPE_TO_NAME.standard,\n          type: 'standard',\n          cardInfo: cardsInfo?.standard,\n        });\n\n      case CardSlides.Silver:\n        return renderMediaCard({\n          ...defaultProps,\n          title: MAP_CARD_TYPE_TO_NAME.silver,\n          type: 'silver',\n          cardInfo: cardsInfo?.silver,\n        });\n\n      case CardSlides.Gold:\n        return renderMediaCard({\n          ...defaultProps,\n          title: MAP_CARD_TYPE_TO_NAME.gold,\n          type: 'gold',\n          cardInfo: cardsInfo?.gold,\n        });\n\n      case CardSlides.Platinum:\n        return renderMediaCard({\n          ...defaultProps,\n          title: MAP_CARD_TYPE_TO_NAME.platinum,\n          type: 'platinum',\n          cardInfo: cardsInfo?.platinum,\n        });\n\n      case CardSlides.Black:\n        return renderMediaCard({\n          ...defaultProps,\n          title: MAP_CARD_TYPE_TO_NAME.black,\n          type: 'black',\n          cardInfo: cardsInfo?.black,\n        });\n    }\n  }\n\n  return (\n    <>\n      {renderControls()}\n      <Transition\n        ref={transitionRef}\n        name=\"semiFade\"\n        className={buildClassName(styles.transition, 'custom-scroll')}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    tonBalance: selectCurrentToncoinBalance(global),\n  };\n})(CardRoster));\n\nfunction renderMediaCard({\n  lang,\n  title,\n  type,\n  cardInfo,\n  tonBalance,\n  currentKey,\n}: {\n  lang: LangFn;\n  title: string;\n  type: ApiMtwCardType;\n  cardInfo?: ApiCardInfo;\n  tonBalance?: bigint;\n  currentKey: number;\n}) {\n  return (\n    (\n      <div className={styles.content}>\n        <div className={buildClassName(styles.slide, styles[type])}>\n          <video\n            autoPlay\n            muted\n            loop\n            playsInline\n            poster={`${MTW_CARDS_MINT_BASE_URL}mtw_card_${type}.avif`}\n            className={styles.video}\n          >\n            <source\n              src={`${MTW_CARDS_MINT_BASE_URL}mtw_card_${type}.h264.mp4`}\n              type=\"video/mp4; codecs=avc1.4D401E,mp4a.40.2\"\n            />\n          </video>\n          <div className={styles.slideInner}>\n            {renderDots(currentKey)}\n            <div className={styles.cardType}>{title}</div>\n            {renderAvailability(lang, cardInfo)}\n          </div>\n        </div>\n        <CardPros type={type} price={cardInfo?.price} balance={tonBalance} isAvailable={Boolean(cardInfo?.notMinted)} />\n      </div>\n    )\n  );\n}\n\nfunction renderDots(currentKey: number) {\n  return (\n    <div className={styles.dots}>\n      {Array.from({ length: TOTAL_SLIDES }).map((_, index) => {\n        return (\n          <div key={index} className={buildClassName(styles.dot, index === currentKey && styles.dotActive)} />\n        );\n      })}\n    </div>\n  );\n}\n\nfunction renderAvailability(lang: LangFn, cardInfo?: ApiCardInfo) {\n  const { all, notMinted } = cardInfo || {};\n  if (!all || !notMinted) {\n    return (\n      <div className={styles.avaliability}>\n        <div className={styles.soldOut}>{lang('This card has been sold out')}</div>\n      </div>\n    );\n  }\n\n  const sold = all - notMinted;\n  const leftAmount = lang('%amount% left', { amount: formatNumber(notMinted) });\n  const soldAmount = lang('%amount% sold', { amount: formatNumber(sold) });\n\n  return (\n    <div className={styles.avaliability}>\n      <div\n        className={styles.progress}\n        style={`--progress: ${round(notMinted / all, 2)};}`}\n      >\n        <div className={buildClassName(styles.amount, styles.amountInner, styles.amountLeft)}>{leftAmount}</div>\n        <div className={buildClassName(styles.amount, styles.amountInner, styles.amountSold)}>{soldAmount}</div>\n      </div>\n      <div className={buildClassName(styles.amount, styles.amountLeft)}>{leftAmount}</div>\n      <div className={buildClassName(styles.amount, styles.amountSold)}>{soldAmount}</div>\n    </div>\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiCardsInfo, ApiMtwCardType } from '../../api/types';\nimport type { Theme } from '../../global/types';\nimport { MintCardState } from '../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport CardRoster, { MAP_CARD_TYPE_TO_NAME } from './CardRoster';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './MintCardModal.module.scss';\n\ninterface StateProps {\n  isOpen: boolean;\n  cardsInfo?: ApiCardsInfo;\n  isLoading?: boolean;\n  state?: MintCardState;\n  error?: string;\n  theme: Theme;\n  selectedCardType?: ApiMtwCardType;\n}\n\nfunction MintCardModal({\n  isOpen,\n  cardsInfo,\n  isLoading,\n  state,\n  error,\n  theme,\n  selectedCardType,\n}: StateProps) {\n  const {\n    closeMintCardModal, clearMintCardError, submitMintCard, submitMintCardHardware,\n  } = getActions();\n\n  const lang = useLang();\n  const appTheme = useAppTheme(theme);\n  const { renderingKey, nextKey } = useModalTransitionKeys(state ?? 0, isOpen);\n\n  const selectedCardName = selectedCardType ? MAP_CARD_TYPE_TO_NAME[selectedCardType] : '';\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    submitMintCard({ password });\n  });\n\n  const handleHardwareSubmit = useLastCallback(() => {\n    submitMintCardHardware();\n  });\n\n  function renderPasswordForm(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader\n          title={!getDoesUsePinPad() ? lang('Confirm Upgrading') : undefined}\n          onClose={getDoesUsePinPad() ? closeMintCardModal : undefined}\n          onBackButtonClick={!getDoesUsePinPad() ? closeMintCardModal : undefined}\n        />\n        <PasswordForm\n          isActive={isActive}\n          error={error}\n          isLoading={isLoading}\n          submitLabel={lang('Confirm')}\n          cancelLabel={lang('Cancel')}\n          onSubmit={handlePasswordSubmit}\n          onCancel={closeMintCardModal}\n          onUpdate={clearMintCardError}\n          operationType=\"mintCard\"\n          skipAuthScreen\n        >\n          <TransactionBanner\n            className={styles.mintCardBanner}\n            secondText={selectedCardName}\n          />\n        </PasswordForm>\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Card has been upgraded!')} onClose={closeMintCardModal} />\n\n        <div className={buildClassName(modalStyles.transitionContent, modalStyles.transitionContent_simple)}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n            previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n          />\n\n          <div className={buildClassName(styles.resultWithTime)}>\n            <AnimatedIconWithPreview\n              play={isActive}\n              size={ANIMATED_STICKER_TINY_ICON_PX}\n              className={styles.resultTimeIcon}\n              nonInteractive\n              noLoop={false}\n              tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockGray}\n              previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockGray}\n            />\n            <div>\n              {renderText(lang('$mint_card_result'))}\n            </div>\n          </div>\n\n          <div className={modalStyles.buttons}>\n            <Button\n              isPrimary\n              className={modalStyles.buttonFullWidth}\n              onClick={closeMintCardModal}\n            >\n              {lang('Done')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: MintCardState) {\n    switch (currentKey) {\n      case MintCardState.Initial:\n        return (<CardRoster cardsInfo={cardsInfo!} />);\n\n      case MintCardState.Password:\n        return renderPasswordForm(isActive);\n\n      case MintCardState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleHardwareSubmit}\n            onClose={closeMintCardModal}\n          />\n        );\n\n      case MintCardState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={closeMintCardModal}\n            onTryAgain={handleHardwareSubmit}\n          />\n        );\n\n      case MintCardState.Done:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      forceFullNative\n      nativeBottomSheetKey=\"mint-card\"\n      dialogClassName={styles.dialog}\n      onClose={closeMintCardModal}\n    >\n      <Transition\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        name={resolveSlideTransitionName()}\n        className={buildClassName(styles.transition, 'custom-scroll')}\n        slideClassName={styles.transitionSlide}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { currentMintCard } = global;\n  const { config } = selectCurrentAccountState(global) || {};\n  const { cardsInfo } = config || {};\n\n  return {\n    isOpen: currentMintCard?.state !== undefined,\n    cardsInfo,\n    isLoading: currentMintCard?.isLoading,\n    state: currentMintCard?.state,\n    error: currentMintCard?.error,\n    theme: global.settings.theme,\n    selectedCardType: currentMintCard?.type,\n  };\n})(MintCardModal));\n","import type { ChangeEvent } from 'react';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './Switcher.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  name?: string;\n  value?: string;\n  label?: string;\n  checked?: boolean;\n  className?: string;\n  onChange?: (e: ChangeEvent<HTMLInputElement>) => void;\n  onCheck?: (isChecked: boolean) => void;\n  shouldStopPropagation?: boolean;\n};\n\nfunction Switcher({\n  id,\n  name,\n  value,\n  label,\n  checked = false,\n  className,\n  onChange,\n  onCheck,\n  shouldStopPropagation,\n}: OwnProps) {\n  function handleChange(e: ChangeEvent<HTMLInputElement>) {\n    onChange?.(e);\n    onCheck?.(e.currentTarget.checked);\n  }\n\n  return (\n    <label\n      className={buildClassName(styles.container, className)}\n      title={label}\n      aria-label={label}\n      onClick={shouldStopPropagation ? (e) => e.stopPropagation() : undefined}\n      tabIndex={0}\n      role=\"button\"\n    >\n      <input\n        type=\"checkbox\"\n        id={id}\n        name={name}\n        value={value}\n        checked={checked}\n        className={styles.input}\n        onChange={handleChange}\n      />\n      <span className={styles.widget} />\n    </label>\n  );\n}\n\nexport default memo(Switcher);\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"pDx55knh\",\"input\":\"cLbaNjJ_\",\"widget\":\"tiLjiStY\"};","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"v8rRtn7B\",\"sticker\":\"CC8Q5sJb\",\"stickerHuge\":\"bQ7CA6_X\",\"error\":\"iEiAdwiC\",\"step\":\"TI5caump\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport { BiometricsState } from '../../../global/types';\n\nimport { ANIMATED_STICKER_HUGE_SIZE_PX } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../../hooks/useModalTransitionKeys';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport CreatePasswordForm from '../../ui/CreatePasswordForm';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport Transition from '../../ui/Transition';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './Biometrics.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  state: BiometricsState;\n  error?: string;\n  onClose: NoneToVoidFunction;\n  isLoading?: boolean;\n  isInsideModal?: boolean;\n}\n\nconst STICKER_SIZE = 180;\n\nfunction TurnOff({\n  isOpen, isLoading, isInsideModal, state, error, onClose,\n}: OwnProps) {\n  const { disableBiometrics } = getActions();\n\n  const lang = useLang();\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const handleSubmit = useLastCallback((password: string, isPasswordNumeric?: boolean) => {\n    disableBiometrics({ password, isPasswordNumeric });\n  });\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: BiometricsState) {\n    switch (currentKey) {\n      case BiometricsState.TurnOffBiometricConfirmation:\n        return (\n          <>\n            <ModalHeader title={lang('Biometric Confirmation')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n                previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n                play={isActive}\n                size={STICKER_SIZE}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n\n              {error ? (\n                <div className={styles.error}>{lang(error)}</div>\n              ) : (\n                <div className={styles.step}>{lang('Please verify the operation.')}</div>\n              )}\n\n              <div className={modalStyles.buttons}>\n                <Button onClick={onClose} className={modalStyles.customSubmitButton}>\n                  {lang('Cancel')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n\n      case BiometricsState.TurnOffCreatePassword:\n        return (\n          <>\n            <ModalHeader title={lang('Create Password')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n                previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n                play={isActive}\n                size={STICKER_SIZE}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n              <CreatePasswordForm\n                isActive={isActive}\n                isLoading={isLoading}\n                formId=\"biometrics-create-password\"\n                onSubmit={handleSubmit}\n                onCancel={onClose}\n              />\n            </div>\n          </>\n        );\n\n      case BiometricsState.TurnOffComplete:\n        return (\n          <>\n            <ModalHeader title={lang('Biometrics Disabled')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.yeee}\n                previewUrl={ANIMATED_STICKERS_PATHS.yeeePreview}\n                play={isActive}\n                size={ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n                noLoop={false}\n                className={buildClassName(styles.sticker, styles.stickerHuge)}\n              />\n\n              <div className={modalStyles.buttons}>\n                <Button isPrimary onClick={onClose} className={modalStyles.customSubmitButton}>\n                  {lang('Done')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      dialogClassName={styles.modalDialog}\n      onClose={onClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={buildClassName(isInsideModal && modalStyles.transitionSlide)}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(TurnOff);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  onClose: NoneToVoidFunction;\n}\n\nfunction TurnOffWaning({ isOpen, onClose }: OwnProps) {\n  const { openBiometricsTurnOff } = getActions();\n\n  const lang = useLang();\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      title={lang('Turn Off Biometrics')}\n      onClose={onClose}\n    >\n      <p className={modalStyles.text}>\n        {lang('If you turn off biometric protection, you will need to create a password.')}\n      </p>\n\n      <div className={buildClassName(modalStyles.buttons, modalStyles.buttonsNoExtraSpace)}>\n        <Button className={modalStyles.button} onClick={onClose}>\n          {lang('Cancel')}\n        </Button>\n        <Button isPrimary className={modalStyles.button} onClick={openBiometricsTurnOff}>\n          {lang('Continue')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(TurnOffWaning);\n","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport { BiometricsState } from '../../../global/types';\n\nimport { ANIMATED_STICKER_HUGE_SIZE_PX } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { IS_ELECTRON } from '../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../../hooks/useModalTransitionKeys';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './Biometrics.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  state: BiometricsState;\n  error?: string;\n  onClose: NoneToVoidFunction;\n  isLoading?: boolean;\n  isInsideModal?: boolean;\n}\n\nconst STICKER_SIZE = 180;\n\nfunction TurnOn({\n  isOpen, isLoading, isInsideModal, state, error, onClose,\n}: OwnProps) {\n  const { enableBiometrics } = getActions();\n\n  const lang = useLang();\n  const [localError, setLocalError] = useState<string | undefined>();\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n  const shouldDisablePasswordForm = Boolean(state !== BiometricsState.TurnOnPasswordConfirmation);\n\n  useEffect(() => {\n    if (isOpen) {\n      setLocalError('');\n    }\n  }, [isOpen]);\n\n  const handleClearError = useLastCallback(() => {\n    setLocalError(undefined);\n  });\n\n  const handleSubmit = useLastCallback((password: string) => {\n    if (shouldDisablePasswordForm) {\n      return;\n    }\n\n    try {\n      enableBiometrics({ password });\n    } catch (err: any) {\n      setLocalError(err.message || 'Unknown error.');\n    }\n  });\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: BiometricsState) {\n    switch (currentKey) {\n      case BiometricsState.TurnOnPasswordConfirmation:\n        return (\n          <>\n            <ModalHeader title={lang('Turn On Biometrics')} onClose={onClose} />\n            <PasswordForm\n              isActive={isActive}\n              isLoading={isLoading}\n              error={error || localError}\n              operationType=\"turnOnBiometrics\"\n              help={lang('Enabling biometric confirmation will reset the password.')}\n              submitLabel={lang('Continue')}\n              onSubmit={handleSubmit}\n              onCancel={onClose}\n              onUpdate={handleClearError}\n            />\n          </>\n        );\n\n      case BiometricsState.TurnOnRegistration:\n        return (\n          <>\n            <ModalHeader title={lang('Biometric Registration')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n                previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n                play={isActive}\n                size={STICKER_SIZE}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n\n              <div className={styles.step}>{lang('Step 1 of 2. Registration')}</div>\n\n              <div className={modalStyles.buttons}>\n                <Button onClick={onClose} className={modalStyles.customCancelButton}>\n                  {lang('Cancel')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n\n      case BiometricsState.TurnOnVerification:\n        return (\n          <>\n            <ModalHeader title={lang('Biometric Registration')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n                previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n                play={isActive}\n                size={STICKER_SIZE}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n\n              <div className={styles.step}>\n                {lang(IS_ELECTRON ? 'Verification' : 'Step 2 of 2. Verification')}\n              </div>\n\n              <div className={modalStyles.buttons}>\n                <Button onClick={onClose} className={modalStyles.customCancelButton}>\n                  {lang('Cancel')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n\n      case BiometricsState.TurnOnComplete:\n        return (\n          <>\n            <ModalHeader title={lang('Biometrics Enabled')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.yeee}\n                previewUrl={ANIMATED_STICKERS_PATHS.yeeePreview}\n                play={isActive}\n                size={ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n                noLoop={false}\n                className={buildClassName(styles.sticker, styles.stickerHuge)}\n              />\n\n              <div className={modalStyles.buttons}>\n                <Button isPrimary onClick={onClose} className={modalStyles.customSubmitButton}>\n                  {lang('Done')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      dialogClassName={styles.modalDialog}\n      onClose={onClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={buildClassName(isInsideModal && modalStyles.transitionSlide)}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(TurnOn);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { BiometricsState } from '../../../global/types';\n\nimport BiometricsTurnOff from './TurnOff';\nimport BiometricsTurnOffWarning from './TurnOffWarning';\nimport BiometricsTurnOn from './TurnOn';\n\ninterface StateProps {\n  state: BiometricsState;\n  error?: string;\n  isLoading?: boolean;\n  isInsideModal?: boolean;\n}\n\nfunction Biometrics({\n  state, error, isLoading, isInsideModal,\n}: StateProps) {\n  const { closeBiometricSettings } = getActions();\n\n  const isTurnOnBiometricsOpened = state === BiometricsState.TurnOnPasswordConfirmation\n    || state === BiometricsState.TurnOnRegistration\n    || state === BiometricsState.TurnOnVerification\n    || state === BiometricsState.TurnOnComplete;\n  const isTurnOffBiometricsOpened = state === BiometricsState.TurnOffBiometricConfirmation\n    || state === BiometricsState.TurnOffCreatePassword\n    || state === BiometricsState.TurnOffComplete;\n  const isTurnOffBiometricsWarningOpened = state === BiometricsState.TurnOffWarning;\n\n  return (\n    <>\n      <BiometricsTurnOn\n        isOpen={isTurnOnBiometricsOpened}\n        isLoading={isLoading}\n        isInsideModal={isInsideModal}\n        state={state}\n        error={error}\n        onClose={closeBiometricSettings}\n      />\n      <BiometricsTurnOff\n        isOpen={isTurnOffBiometricsOpened}\n        isLoading={isLoading}\n        isInsideModal={isInsideModal}\n        state={state}\n        error={error}\n        onClose={closeBiometricSettings}\n      />\n      <BiometricsTurnOffWarning isOpen={isTurnOffBiometricsWarningOpened} onClose={closeBiometricSettings} />\n    </>\n  );\n}\n\nexport default memo(withGlobal((global) => {\n  const { biometrics: { state, error } } = global;\n\n  return {\n    state,\n    error,\n    isLoading: global.auth.isLoading,\n  };\n})(Biometrics));\n","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { PIN_LENGTH } from '../../../config';\nimport { selectIsNativeBiometricAuthEnabled } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useEffectWithPrevDeps from '../../../hooks/useEffectWithPrevDeps';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport PinPad from '../../ui/PinPad';\n\nimport styles from '../Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInsideModal?: boolean;\n  handleBackClick: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isPinAccepted?: boolean;\n  error?: string;\n  isNativeBiometricsEnabled?: boolean;\n}\n\nfunction NativeBiometricsTurnOn({\n  isActive,\n  isInsideModal,\n  isPinAccepted,\n  error,\n  isNativeBiometricsEnabled,\n  handleBackClick,\n}: OwnProps & StateProps) {\n  const { enableNativeBiometrics, clearNativeBiometricsError } = getActions();\n\n  const lang = useLang();\n  const { isSmallHeight } = useDeviceScreen();\n  const [pin, setPin] = useState<string>('');\n  const pinPadType = pin.length !== PIN_LENGTH\n    ? undefined\n    : (isPinAccepted ? 'success' : (error ? 'error' : undefined));\n  const pinTitle = isPinAccepted\n    ? 'Correct'\n    : (error && pin.length === PIN_LENGTH ? error : 'Enter your code');\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  useEffect(() => {\n    if (!isActive) return;\n\n    setPin('');\n  }, [isActive]);\n\n  useEffectWithPrevDeps(([prevIsEnabled]) => {\n    if (isNativeBiometricsEnabled && !prevIsEnabled) {\n      handleBackClick();\n    }\n  }, [isNativeBiometricsEnabled, handleBackClick]);\n\n  const handleSubmit = useLastCallback((password: string) => {\n    enableNativeBiometrics({ password });\n  });\n\n  return (\n    <div className={styles.slide}>\n      <div className={buildClassName(styles.content, styles.contentFullSize)}>\n        <div className={styles.header}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n        </div>\n\n        <div className={styles.pinPadHeader}>\n          {!isInsideModal && (\n            <AnimatedIconWithPreview\n              play={isActive}\n              tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n              previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n              noLoop={false}\n              nonInteractive\n              className={styles.stickerNativeBiometric}\n            />\n          )}\n\n          {!isSmallHeight && <div className={styles.pinPadTitle}>{lang('Confirm Passcode')}</div>}\n        </div>\n\n        <PinPad\n          isActive={isActive}\n          onClearError={clearNativeBiometricsError}\n          title={lang(pinTitle)}\n          type={pinPadType}\n\n          length={PIN_LENGTH}\n          value={pin}\n          onChange={setPin}\n          onSubmit={handleSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { nativeBiometricsError, isPinAccepted } = global;\n\n  return {\n    isPinAccepted,\n    error: nativeBiometricsError,\n    isNativeBiometricsEnabled: selectIsNativeBiometricAuthEnabled(global),\n  };\n})(NativeBiometricsTurnOn));\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\nimport type { AnimationLevel, Theme } from '../../global/types';\n\nimport {\n  ANIMATION_LEVEL_MAX,\n  ANIMATION_LEVEL_MIN,\n  IS_CORE_WALLET,\n  MTW_CARDS_WEBSITE,\n} from '../../config';\nimport {\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsCurrentAccountViewMode,\n} from '../../global/selectors';\nimport { ACCENT_COLORS } from '../../util/accentColor/constants';\nimport buildClassName from '../../util/buildClassName';\nimport getAccentColorsFromNfts from '../../util/getAccentColorsFromNfts';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { openUrl } from '../../util/openUrl';\nimport switchAnimationLevel from '../../util/switchAnimationLevel';\nimport switchTheme from '../../util/switchTheme';\nimport { IS_ELECTRON, IS_WINDOWS } from '../../util/windowEnvironment';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Spinner from '../ui/Spinner';\nimport Switcher from '../ui/Switcher';\n\nimport styles from './Settings.module.scss';\n\nimport darkThemeImg from '../../assets/theme/theme_dark.png';\nimport lightThemeImg from '../../assets/theme/theme_light.png';\nimport systemThemeImg from '../../assets/theme/theme_system.png';\n\ninterface OwnProps {\n  isActive?: boolean;\n  theme: Theme;\n  handleBackClick: () => void;\n  animationLevel: AnimationLevel;\n  isInsideModal?: boolean;\n  isTrayIconEnabled: boolean;\n  onTrayIconEnabledToggle: VoidFunction;\n}\n\ninterface StateProps {\n  isViewMode: boolean;\n  accentColorIndex?: number;\n  nftsByAddress?: Record<string, ApiNft>;\n  nftAddresses?: string[];\n  isMintingCardsAvailable?: boolean;\n  isNftBuyingDisabled: boolean;\n}\n\nconst SWITCH_THEME_DURATION_MS = 300;\nconst THEME_OPTIONS = [{\n  value: 'light',\n  name: 'Light',\n  icon: lightThemeImg,\n}, {\n  value: 'system',\n  name: 'System',\n  icon: systemThemeImg,\n}, {\n  value: 'dark',\n  name: 'Dark',\n  icon: darkThemeImg,\n}];\n\nfunction SettingsAppearance({\n  isActive,\n  theme,\n  animationLevel,\n  accentColorIndex,\n  nftAddresses,\n  nftsByAddress,\n  isInsideModal,\n  isViewMode,\n  isTrayIconEnabled,\n  isMintingCardsAvailable,\n  isNftBuyingDisabled,\n  onTrayIconEnabledToggle,\n  handleBackClick,\n}: OwnProps & StateProps) {\n  const {\n    setTheme,\n    setAnimationLevel,\n    openMintCardModal,\n    installAccentColorFromNft,\n    clearAccentColorFromNft,\n    showNotification,\n  } = getActions();\n\n  const lang = useLang();\n  const [isAvailableAccentLoading, setIsAvailableAccentLoading] = useState(false);\n  const [availableAccentColorIds, setAvailableAccentColorIds] = useState<number[]>(MEMO_EMPTY_ARRAY);\n  const [nftByColorIndexes, setNftsByColorIndex] = useState<Record<number, ApiNft>>({});\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const appTheme = useAppTheme(theme);\n\n  useEffect(() => {\n    if (IS_CORE_WALLET) return;\n\n    void (async () => {\n      setIsAvailableAccentLoading(true);\n      const result = await getAccentColorsFromNfts(nftAddresses, nftsByAddress);\n      if (result) {\n        setAvailableAccentColorIds(result.availableAccentColorIds);\n        setNftsByColorIndex(result.nftsByColorIndex);\n      } else {\n        setAvailableAccentColorIds(MEMO_EMPTY_ARRAY);\n        setNftsByColorIndex({});\n      }\n      setIsAvailableAccentLoading(false);\n    })();\n  }, [nftsByAddress, nftAddresses]);\n\n  const sortedColors = useMemo(() => {\n    return ACCENT_COLORS[appTheme]\n      .map((color, index) => ({ color, index }))\n      .sort((a, b) => {\n        return Number(!availableAccentColorIds.includes(a.index)) - Number(!availableAccentColorIds.includes(b.index));\n      });\n  }, [appTheme, availableAccentColorIds]);\n\n  const handleThemeChange = useLastCallback((newTheme: string) => {\n    document.documentElement.classList.add('no-transitions');\n    setTheme({ theme: newTheme as Theme });\n    switchTheme(newTheme as Theme, isInsideModal);\n    setTimeout(() => {\n      document.documentElement.classList.remove('no-transitions');\n    }, SWITCH_THEME_DURATION_MS);\n  });\n\n  const handleAnimationLevelToggle = useLastCallback(() => {\n    const level = animationLevel === ANIMATION_LEVEL_MIN ? ANIMATION_LEVEL_MAX : ANIMATION_LEVEL_MIN;\n    setAnimationLevel({ level });\n    switchAnimationLevel(level);\n  });\n\n  function handleAccentColorClick(colorIndex?: number) {\n    const isLocked = colorIndex !== undefined ? !availableAccentColorIds.includes(colorIndex) : false;\n\n    if (isLocked) {\n      showNotification({ message: lang('Get a unique MyTonWallet Card to unlock new palettes.') });\n    } else if (colorIndex === undefined) {\n      clearAccentColorFromNft();\n    } else {\n      installAccentColorFromNft({ nft: nftByColorIndexes[colorIndex] });\n    }\n  }\n\n  const handleUnlockNewPalettesClick = useLastCallback(() => {\n    if (!isViewMode && isMintingCardsAvailable) {\n      openMintCardModal();\n    } else {\n      void openUrl(MTW_CARDS_WEBSITE);\n    }\n  });\n\n  function renderThemes() {\n    return THEME_OPTIONS.map(({ name, value, icon }) => {\n      return (\n        <div\n          key={value}\n          className={buildClassName(styles.theme, value === theme && styles.theme_active)}\n          onClick={() => handleThemeChange(value)}\n        >\n          <div className={buildClassName(styles.themeIcon, value === theme && styles.themeIcon_active)}>\n            <img src={icon} alt=\"\" className={styles.themeImg} aria-hidden />\n          </div>\n          <span>{lang(name)}</span>\n        </div>\n      );\n    });\n  }\n\n  function renderColorButton(color?: string, index?: number) {\n    const isSelected = accentColorIndex === index;\n    const isLocked = index !== undefined ? !availableAccentColorIds.includes(index) : false;\n\n    return (\n      <button\n        key={color || 'default'}\n        type=\"button\"\n        disabled={isSelected}\n        style={color ? `--current-accent-color: ${color}` : undefined}\n        className={buildClassName(styles.colorButton, isSelected && styles.colorButtonCurrent)}\n        aria-label={lang('Change Palette')}\n        onClick={() => handleAccentColorClick(index)}\n      >\n        {isAvailableAccentLoading && isLocked && <Spinner color=\"white\" />}\n        {!isAvailableAccentLoading && isLocked && (\n          <i\n            className={buildClassName(styles.iconLock, 'icon-lock', color === '#FFFFFF' && styles.iconLockInverted)}\n            aria-hidden\n          />\n        )}\n      </button>\n    );\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Appearance')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Appearance')}</span>\n        </div>\n      )}\n\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        <p className={styles.blockTitle}>{lang('Theme')}</p>\n        <div className={styles.settingsBlock}>\n          <div className={styles.themeWrapper}>\n            {renderThemes()}\n          </div>\n        </div>\n\n        {!IS_CORE_WALLET && !isNftBuyingDisabled && (\n          <>\n            <p className={styles.blockTitle}>{lang('Palette')}</p>\n            <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n              <div className={styles.colorList}>\n                {renderColorButton()}\n                {sortedColors.map(({ color, index }) => renderColorButton(color, index))}\n              </div>\n              <div\n                className={styles.subBlockAsButton}\n                role=\"button\"\n                tabIndex={0}\n                onClick={() => handleUnlockNewPalettesClick()}\n              >\n                {lang('Unlock New Palettes')}\n              </div>\n            </div>\n            <p className={styles.blockDescription}>{lang('Get a unique MyTonWallet Card to unlock new palettes.')}</p>\n          </>\n        )}\n\n        <p className={styles.blockTitle}>{lang('Other')}</p>\n        <div className={styles.settingsBlock}>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleAnimationLevelToggle}>\n            {lang('Enable Animations')}\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Enable Animations')}\n              checked={animationLevel !== ANIMATION_LEVEL_MIN}\n            />\n          </div>\n          {IS_ELECTRON && IS_WINDOWS && (\n            <div className={buildClassName(styles.item, styles.item_small)} onClick={onTrayIconEnabledToggle}>\n              {lang('Display Tray Icon')}\n\n              <Switcher\n                className={styles.menuSwitcher}\n                label={lang('Display Tray Icon')}\n                checked={isTrayIconEnabled}\n              />\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    orderedAddresses: nftAddresses,\n    byAddress: nftsByAddress,\n  } = selectCurrentAccountState(global)?.nfts || {};\n\n  const { config: { cardsInfo } = {} } = selectCurrentAccountState(global) || {};\n\n  return {\n    isViewMode: selectIsCurrentAccountViewMode(global),\n    accentColorIndex: selectCurrentAccountSettings(global)?.accentColorIndex,\n    nftAddresses,\n    nftsByAddress,\n    isMintingCardsAvailable: Boolean(cardsInfo),\n    isNftBuyingDisabled: global.restrictions.isNftBuyingDisabled,\n  };\n})(SettingsAppearance));\n","import type { ApiNft } from '../api/types';\n\nimport { MTW_CARDS_COLLECTION } from '../config';\nimport { getAccentColorIndexFromNft } from './accentColor';\nimport { compact, unique } from './iteratees';\nimport { logDebugError } from './logs';\n\nexport default async function getAccentColorsFromNfts(\n  nftAddresses?: string[],\n  nftsByAddress?: Record<string, ApiNft>,\n) {\n  try {\n    const nftCards = (nftAddresses || []).reduce((result, nftAddress) => {\n      const nft = nftsByAddress?.[nftAddress];\n      if (nft?.collectionAddress === MTW_CARDS_COLLECTION) {\n        result.push(nft);\n      }\n      return result;\n    }, [] as ApiNft[]);\n\n    if (!nftCards.length) {\n      return undefined;\n    }\n\n    const colors = await Promise.all(nftCards.map((nft) => getAccentColorIndexFromNft(nft)));\n    const nftsByColorIndex = colors.reduce((result, colorIndex, i) => {\n      if (colorIndex !== undefined) {\n        result[colorIndex] = nftCards[i];\n      }\n      return result;\n    }, {} as Record<number, ApiNft>);\n\n    const availableAccentColorIds = unique(compact(colors));\n\n    return {\n      availableAccentColorIds,\n      nftsByColorIndex,\n    };\n  } catch (err: any) {\n    logDebugError('[getAccentColorsFromNfts]: Error fetching accent colors', err);\n    return undefined;\n  }\n}\n","import React, {\n  memo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { UserToken } from '../../../global/types';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './DeleteTokenModal.module.scss';\n\ninterface OwnProps {\n  token?: UserToken;\n}\n\nfunction DeleteTokenModal({ token }: OwnProps) {\n  const {\n    deleteToken,\n  } = getActions();\n\n  const [isOpen, setIsOpen] = useState(false);\n  const lang = useLang();\n\n  useSyncEffect(() => {\n    if (token) {\n      setIsOpen(true);\n    }\n  }, [token]);\n\n  const handleClose = useLastCallback(() => {\n    setIsOpen(false);\n  });\n\n  const handleDeleteToken = useLastCallback(() => {\n    handleClose();\n    deleteToken({ slug: token!.slug });\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={handleClose}\n      title={lang('Delete Token')}\n      contentClassName={styles.content}\n    >\n      <p className={styles.description}>\n        {lang('Are you sure you want to delete?', { token: <strong>{token?.name}</strong> })}\n      </p>\n      <div className={modalStyles.buttons}>\n        <Button onClick={handleClose} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleDeleteToken} className={modalStyles.button}>\n          {lang('Delete')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(DeleteTokenModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"yflPd0zm\",\"description\":\"KH236kiH\"};","import { BottomSheet } from '@mytonwallet/native-bottom-sheet';\nimport type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  type ElementRef,\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport { clamp } from '../../util/math';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './Draggable.module.scss';\n\ntype TPoint = {\n  x: number;\n  y: number;\n};\n\ntype Offset = {\n  top?: number;\n  bottom?: number;\n  left?: number;\n  right?: number;\n};\n\ntype DraggableState = {\n  isDragging: boolean;\n  scrollTop: number;\n  origin: TPoint;\n  translation: TPoint;\n  width?: number;\n  height?: number;\n};\n\ntype OwnProps = {\n  children: TeactNode;\n  onDrag: (translation: TPoint, id: number | string) => void;\n  onDragEnd: NoneToVoidFunction;\n  id: number | string;\n  style?: string;\n  knobStyle?: string;\n  isDisabled?: boolean;\n  offset?: Offset;\n  parentRef?: ElementRef<HTMLDivElement>;\n  scrollRef?: ElementRef<HTMLDivElement>;\n  className?: string;\n  onClick: (e: React.MouseEvent | React.TouchEvent) => void;\n};\n\nconst ZERO_POINT: TPoint = { x: 0, y: 0 };\n\nconst DEFAULT_OFFSET: Offset = {\n  top: 0,\n  bottom: 0,\n  left: 0,\n  right: 0,\n};\n\nconst EDGE_THRESHOLD = 150;\n\nfunction Draggable({\n  children,\n  id,\n  onDrag,\n  onDragEnd,\n  style: externalStyle,\n  knobStyle,\n  isDisabled,\n  offset = DEFAULT_OFFSET,\n  parentRef,\n  scrollRef,\n  className,\n  onClick,\n}: OwnProps) {\n  const lang = useLang();\n  const ref = useRef<HTMLDivElement>();\n  const buttonRef = useRef<HTMLDivElement>();\n  const scrollIntervalId = useRef<number>();\n\n  const [state, setState] = useState<DraggableState>({\n    isDragging: false,\n    scrollTop: 0,\n    origin: ZERO_POINT,\n    translation: ZERO_POINT,\n  });\n\n  const lastMousePosition = useRef<TPoint>({ x: 0, y: 0 });\n\n  const updateDraggablePosition = () => {\n    if (!state.isDragging || !ref.current || !parentRef?.current || !scrollRef?.current) return;\n\n    const translation = calculateConstrainedTranslation(\n      state,\n      lastMousePosition.current,\n      scrollRef.current.scrollTop,\n      ref.current,\n      parentRef.current,\n      offset,\n    );\n\n    setState((current) => ({\n      ...current,\n      translation,\n    }));\n\n    onDrag(translation, id);\n  };\n\n  const stopContinuousScroll = () => {\n    if (scrollIntervalId.current !== undefined) {\n      cancelAnimationFrame(scrollIntervalId.current);\n      scrollIntervalId.current = undefined;\n    }\n  };\n\n  const startContinuousScroll = (scrollContainer: HTMLElement, speed: number) => {\n    const animateScroll = () => {\n      scrollContainer.scrollBy(0, speed);\n      updateDraggablePosition();\n      scrollIntervalId.current = requestAnimationFrame(animateScroll);\n    };\n\n    stopContinuousScroll();\n    animateScroll();\n  };\n\n  const setInitialState = (e: React.MouseEvent | TouchEvent) => {\n    const origin = getClientCoordinate(e);\n    const scrollTop = scrollRef?.current?.scrollTop ?? 0;\n\n    setState({\n      ...state,\n      isDragging: true,\n      origin,\n      scrollTop,\n      width: ref.current?.offsetWidth,\n      height: ref.current?.offsetHeight,\n    });\n  };\n\n  const handleMouseDown = (e: React.MouseEvent) => {\n    setInitialState(e);\n  };\n\n  const handleTouchStart = useLastCallback((e: TouchEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    setInitialState(e);\n\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      void BottomSheet.clearScrollPatch();\n    }\n  });\n\n  const handleMouseMove = useLastCallback((e: MouseEvent | TouchEvent) => {\n    if (!ref.current || !parentRef?.current || !scrollRef?.current) return;\n\n    const { x, y } = getClientCoordinate(e);\n    lastMousePosition.current = { x, y };\n\n    const translation = calculateConstrainedTranslation(\n      state,\n      lastMousePosition.current,\n      scrollRef.current.scrollTop,\n      ref.current,\n      parentRef.current,\n      offset,\n    );\n\n    const scrollRect = scrollRef.current.getBoundingClientRect();\n    const distanceFromTop = y - scrollRect.top;\n    const distanceFromBottom = scrollRect.bottom - y;\n\n    if (distanceFromTop < EDGE_THRESHOLD) {\n      startContinuousScroll(\n        scrollRef.current,\n        -scaledEase((EDGE_THRESHOLD - distanceFromTop) / EDGE_THRESHOLD),\n      );\n    } else if (distanceFromBottom < EDGE_THRESHOLD) {\n      startContinuousScroll(\n        scrollRef.current,\n        scaledEase((EDGE_THRESHOLD - distanceFromBottom) / EDGE_THRESHOLD),\n      );\n    } else {\n      stopContinuousScroll();\n    }\n\n    setState((current) => ({\n      ...current,\n      translation,\n    }));\n\n    onDrag(translation, id);\n  });\n\n  const handleMouseUp = useLastCallback(() => {\n    setState((current) => ({\n      ...current,\n      isDragging: false,\n      width: undefined,\n      height: undefined,\n    }));\n\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      void BottomSheet.applyScrollPatch();\n    }\n\n    onDragEnd();\n  });\n\n  const handleClick = useLastCallback((e: React.MouseEvent | React.TouchEvent) => {\n    if (state.isDragging) {\n      return;\n    }\n\n    onClick(e);\n  });\n\n  useEffect(() => {\n    const dragButtonRef = buttonRef.current;\n\n    if (dragButtonRef) {\n      dragButtonRef.addEventListener('touchstart', handleTouchStart, { passive: false });\n    }\n\n    if (state.isDragging) {\n      window.addEventListener('touchmove', handleMouseMove);\n      window.addEventListener('mousemove', handleMouseMove);\n      window.addEventListener('touchend', handleMouseUp);\n      window.addEventListener('touchcancel', handleMouseUp);\n      window.addEventListener('mouseup', handleMouseUp);\n    } else {\n      stopContinuousScroll();\n      window.removeEventListener('touchmove', handleMouseMove);\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('touchend', handleMouseUp);\n      window.removeEventListener('touchcancel', handleMouseUp);\n      window.removeEventListener('mouseup', handleMouseUp);\n\n      setState((current) => ({\n        ...current,\n        translation: ZERO_POINT,\n      }));\n    }\n\n    return () => {\n      if (state.isDragging) {\n        stopContinuousScroll();\n        window.removeEventListener('touchmove', handleMouseMove);\n        window.removeEventListener('mousemove', handleMouseMove);\n        window.removeEventListener('touchend', handleMouseUp);\n        window.removeEventListener('touchcancel', handleMouseUp);\n        window.removeEventListener('mouseup', handleMouseUp);\n\n        if (dragButtonRef) {\n          dragButtonRef.removeEventListener('touchstart', handleTouchStart);\n        }\n      }\n    };\n  }, [handleMouseMove, handleMouseUp, handleTouchStart, state.isDragging, buttonRef, isDisabled]);\n\n  const fullClassName = buildClassName(styles.container, className, state.isDragging && styles.isDragging);\n\n  const cssStyles = useMemo(() => {\n    return buildStyle(\n      state.isDragging && `transform: translate(${state.translation.x}px, ${state.translation.y}px)`,\n      state.width ? `width: ${state.width}px` : undefined,\n      state.height ? `height: ${state.height}px` : undefined,\n      externalStyle,\n    );\n  }, [externalStyle, state.height, state.isDragging, state.translation.x, state.translation.y, state.width]);\n\n  return (\n    <div style={cssStyles} className={fullClassName} ref={ref} onClick={handleClick}>\n      {!isDisabled && (\n        <div\n          ref={buttonRef}\n          aria-label={lang('i18n_dragToSort')}\n          tabIndex={0}\n          role=\"button\"\n          className={buildClassName(styles.knob, 'div-button', 'draggable-knob')}\n          onMouseDown={handleMouseDown}\n          style={knobStyle}\n        >\n          <i className=\"icon icon-sort\" aria-hidden />\n        </div>\n      )}\n      {children}\n    </div>\n  );\n}\n\nexport default memo(Draggable);\n\nfunction getClientCoordinate(e: MouseEvent | TouchEvent | React.MouseEvent | React.TouchEvent) {\n  let x;\n  let y;\n\n  if ('touches' in e) {\n    x = e.touches[0].clientX;\n    y = e.touches[0].clientY;\n  } else {\n    x = e.clientX;\n    y = e.clientY;\n  }\n\n  return { x, y };\n}\n\nfunction scaledEase(n: number) {\n  return 5 * (n ** 3) + 1;\n}\n\nfunction calculateConstrainedTranslation(\n  state: DraggableState,\n  lastMousePosition: TPoint,\n  lastScrollTop: number,\n  draggableElement: HTMLDivElement,\n  parentElement: HTMLDivElement,\n  offset: Offset,\n) {\n  const translation = {\n    x: lastMousePosition.x - state.origin.x,\n    y: lastMousePosition.y - state.origin.y + lastScrollTop - state.scrollTop,\n  };\n\n  const {\n    top = 0, right = 0, bottom = 0, left = 0,\n  } = offset;\n\n  const parentRect = parentElement.getBoundingClientRect();\n  const draggableRect = draggableElement.getBoundingClientRect();\n\n  const minX = -draggableElement.offsetLeft + left;\n  const maxX = parentRect.width - draggableRect.width - draggableElement.offsetLeft + right;\n  const minY = -draggableElement.offsetTop + top;\n  const maxY = parentRect.height - draggableRect.height - draggableElement.offsetTop + bottom;\n\n  return {\n    x: clamp(translation.x, minX, maxX),\n    y: clamp(translation.y, minY, maxY),\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"kWQHzIMD\",\"isDragging\":\"k0c5WDAy\",\"knob\":\"UpzQzcvs\"};","import React, {\n  type ElementRef,\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiBaseCurrency } from '../../api/types';\nimport { SettingsState, type UserToken } from '../../global/types';\n\nimport { DEFAULT_ENABLED_TOKEN_SLUGS } from '../../config';\nimport { bigintMultiplyToNumber } from '../../util/bigint';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport { isBetween } from '../../util/math';\n\nimport useEffectOnce from '../../hooks/useEffectOnce';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport TokenIcon from '../common/TokenIcon';\nimport DeleteTokenModal from '../main/modals/DeleteTokenModal';\nimport AnimatedCounter from '../ui/AnimatedCounter';\nimport Draggable from '../ui/Draggable';\nimport SensitiveData from '../ui/SensitiveData';\nimport Switcher from '../ui/Switcher';\n\nimport styles from './Settings.module.scss';\n\ninterface SortState {\n  orderedTokenSlugs?: string[];\n  dragOrderTokenSlugs?: string[];\n  draggedIndex?: number;\n}\n\ninterface OwnProps {\n  parentContainer: ElementRef<HTMLDivElement>;\n  tokens?: UserToken[];\n  orderedSlugs?: string[];\n  isSortByValueEnabled?: boolean;\n  baseCurrency?: ApiBaseCurrency;\n  withChainIcon?: boolean;\n  isSensitiveDataHidden?: true;\n}\n\nconst TOKEN_HEIGHT_PX = 64;\nconst TOP_OFFSET = 48;\n\nfunction SettingsTokens({\n  parentContainer,\n  tokens,\n  orderedSlugs,\n  isSortByValueEnabled,\n  baseCurrency,\n  withChainIcon,\n  isSensitiveDataHidden,\n}: OwnProps) {\n  const {\n    openSettingsWithState,\n    updateOrderedSlugs,\n    rebuildOrderedSlugs,\n    toggleTokenVisibility,\n  } = getActions();\n  const lang = useLang();\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n\n  const tokensRef = useRef<HTMLDivElement>();\n  const sortableContainerRef = useRef<HTMLDivElement>();\n\n  const [tokenToDelete, setTokenToDelete] = useState<UserToken | undefined>();\n  const [state, setState] = useState<SortState>({\n    orderedTokenSlugs: orderedSlugs,\n    dragOrderTokenSlugs: orderedSlugs,\n    draggedIndex: undefined,\n  });\n\n  useEffectOnce(() => {\n    rebuildOrderedSlugs();\n  });\n\n  useEffect(() => {\n    if (!arraysAreEqual(orderedSlugs, state.orderedTokenSlugs)) {\n      setState({\n        orderedTokenSlugs: orderedSlugs,\n        dragOrderTokenSlugs: orderedSlugs,\n        draggedIndex: undefined,\n      });\n    }\n  }, [orderedSlugs, state.orderedTokenSlugs]);\n\n  const handleOpenAddTokenPage = useLastCallback(() => {\n    openSettingsWithState({ state: SettingsState.SelectTokenList });\n  });\n\n  const handleDrag = useLastCallback((translation: { x: number; y: number }, id: string | number) => {\n    const delta = Math.round(translation.y / TOKEN_HEIGHT_PX);\n    const index = state.orderedTokenSlugs?.indexOf(id as string) ?? 0;\n    const dragOrderTokenSlugs = state.orderedTokenSlugs?.filter((tokenSlug) => tokenSlug !== id);\n\n    if (!dragOrderTokenSlugs || !isBetween(index + delta, 0, orderedSlugs?.length ?? 0)) {\n      return;\n    }\n\n    dragOrderTokenSlugs.splice(index + delta, 0, id as string);\n    setState((current) => ({\n      ...current,\n      draggedIndex: index,\n      dragOrderTokenSlugs,\n    }));\n  });\n\n  const handleDragEnd = useLastCallback(() => {\n    setState((current) => {\n      updateOrderedSlugs({\n        orderedSlugs: current.dragOrderTokenSlugs!,\n      });\n\n      return {\n        ...current,\n        orderedTokenSlugs: current.dragOrderTokenSlugs,\n        draggedIndex: undefined,\n      };\n    });\n  });\n\n  const handleTokenVisibility = useLastCallback((token: UserToken, e: React.MouseEvent | React.TouchEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    toggleTokenVisibility({ slug: token.slug, shouldShow: Boolean(token.isDisabled) });\n  });\n\n  const handleDeleteToken = useLastCallback((token: UserToken, e: React.MouseEvent<HTMLSpanElement>) => {\n    e.stopPropagation();\n    setTokenToDelete(token);\n  });\n\n  function renderToken(token: UserToken, index: number) {\n    const {\n      symbol, name, amount, price, slug, isDisabled,\n    } = token;\n\n    const totalAmount = bigintMultiplyToNumber(amount, price);\n    const isDragged = state.draggedIndex === index;\n\n    const draggedTop = isSortByValueEnabled ? getOffsetByIndex(index) : getOffsetBySlug(slug, state.orderedTokenSlugs);\n    const top = isSortByValueEnabled ? getOffsetByIndex(index) : getOffsetBySlug(slug, state.dragOrderTokenSlugs);\n\n    const style = `top: ${isDragged ? draggedTop : top}px;`;\n    const knobStyle = 'left: 1rem;';\n\n    const isDeleteButtonVisible = amount === 0n && !DEFAULT_ENABLED_TOKEN_SLUGS.includes(slug);\n\n    const isDragDisabled = isSortByValueEnabled || tokens!.length <= 1;\n\n    return (\n      <Draggable\n        key={slug}\n        id={slug}\n        onDrag={handleDrag}\n        onDragEnd={handleDragEnd}\n        style={style}\n        knobStyle={knobStyle}\n        isDisabled={isDragDisabled}\n        className={buildClassName(styles.item, styles.item_token, !isSortByValueEnabled && styles.draggable)}\n        offset={{ top: TOP_OFFSET }}\n        parentRef={tokensRef}\n        scrollRef={parentContainer}\n\n        onClick={(e) => handleTokenVisibility(token, e)}\n      >\n        <TokenIcon token={token} withChainIcon={withChainIcon} />\n        <div className={styles.tokenInfo}>\n          <div className={styles.tokenTitle}>\n            {name}\n          </div>\n          <div className={styles.tokenDescription}>\n            <SensitiveData\n              isActive={isSensitiveDataHidden}\n              cols={4 + (top % 6)}\n              rows={2}\n              cellSize={8}\n              contentClassName={styles.tokenAmount}\n            >\n              <AnimatedCounter text={formatCurrency(toDecimal(totalAmount, token.decimals, true), shortBaseSymbol)} />\n              <i className={styles.dot} aria-hidden />\n              <AnimatedCounter text={formatCurrency(toDecimal(amount, token.decimals), symbol)} />\n            </SensitiveData>\n            {isDeleteButtonVisible && (\n              <>\n                <i className={styles.dot} aria-hidden />\n                <span className={styles.deleteText} onClick={(e) => handleDeleteToken(token, e)}>\n                  {lang('Delete')}\n                </span>\n              </>\n            )}\n          </div>\n        </div>\n        <Switcher\n          className={styles.menuSwitcher}\n          checked={!isDisabled}\n        />\n      </Draggable>\n    );\n  }\n\n  return (\n    <>\n      <p className={styles.blockTitle}>{lang('My Tokens')}</p>\n      <div className={styles.contentRelative} ref={sortableContainerRef}>\n        <div\n          className={buildClassName(styles.settingsBlock, styles.sortableContainer)}\n          style={`height: ${(tokens?.length ?? 0) * TOKEN_HEIGHT_PX + TOP_OFFSET}px`}\n          ref={tokensRef}\n        >\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleOpenAddTokenPage}>\n            {lang('Add Token')}\n            <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n          </div>\n\n          {tokens?.map(renderToken)}\n        </div>\n      </div>\n\n      <DeleteTokenModal token={tokenToDelete} />\n    </>\n  );\n}\n\nfunction arraysAreEqual<T>(arr1: T[] = [], arr2: T[] = []) {\n  return arr1.length === arr2.length && arr1.every((value, index) => value === arr2[index]);\n}\n\nfunction getOffsetBySlug(slug: string, list: string[] = []) {\n  const realIndex = list.indexOf(slug);\n  const index = realIndex === -1 ? list.length : realIndex;\n  return getOffsetByIndex(index);\n}\n\nfunction getOffsetByIndex(index: number) {\n  return index * TOKEN_HEIGHT_PX + TOP_OFFSET;\n}\n\nexport default memo(SettingsTokens);\n","import React, {\n  memo, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiNft } from '../../api/types';\nimport { SettingsState, type UserToken } from '../../global/types';\n\nimport { CURRENCIES, DEFAULT_PRICE_CURRENCY, TINY_TRANSFER_MAX_COST } from '../../config';\nimport {\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport Dropdown, { type DropdownItem } from '../ui/Dropdown';\nimport IconWithTooltip from '../ui/IconWithTooltip';\nimport ModalHeader from '../ui/ModalHeader';\nimport Switcher from '../ui/Switcher';\nimport SettingsTokens from './SettingsTokens';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInsideModal?: boolean;\n  onBack: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isInvestorViewEnabled?: boolean;\n  isSortByValueEnabled?: boolean;\n  areTinyTransfersHidden?: boolean;\n  areTokensWithNoCostHidden?: boolean;\n  isSensitiveDataHidden?: true;\n  baseCurrency?: ApiBaseCurrency;\n  isMultichainAccount: boolean;\n  tokens?: UserToken[];\n  orderedSlugs?: string[];\n  nftsByAddress?: Record<string, ApiNft>;\n  blacklistedNftAddresses: string[];\n  whitelistedNftAddresses: string[];\n}\n\nfunction SettingsAssets({\n  isActive,\n  isInsideModal,\n  isInvestorViewEnabled,\n  isSortByValueEnabled,\n  isSensitiveDataHidden,\n  areTinyTransfersHidden,\n  areTokensWithNoCostHidden,\n  baseCurrency,\n  isMultichainAccount,\n  tokens,\n  orderedSlugs,\n  nftsByAddress,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  onBack,\n}: OwnProps & StateProps) {\n  const {\n    toggleTinyTransfersHidden,\n    toggleInvestorView,\n    toggleTokensWithNoCost,\n    toggleSortByValue,\n    changeBaseCurrency,\n    setSettingsState,\n  } = getActions();\n\n  const lang = useLang();\n\n  const scrollContainerRef = useRef<HTMLDivElement>();\n\n  useHistoryBack({ isActive, onBack });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const currencyItems = useMemo<DropdownItem<ApiBaseCurrency>[]>(() => (\n    Object.entries(CURRENCIES)\n      .map(([currency, { name }]) => ({ value: currency as keyof typeof CURRENCIES, name }))\n  ), []);\n\n  const handleTinyTransfersHiddenToggle = useLastCallback(() => {\n    toggleTinyTransfersHidden({ isEnabled: !areTinyTransfersHidden });\n  });\n\n  const handleInvestorViewToggle = useLastCallback(() => {\n    toggleInvestorView({ isEnabled: !isInvestorViewEnabled });\n  });\n\n  const handleOpenHiddenNfts = useLastCallback(() => {\n    setSettingsState({ state: SettingsState.HiddenNfts });\n  });\n\n  const handleTokensWithNoPriceToggle = useLastCallback(() => {\n    toggleTokensWithNoCost({ isEnabled: !areTokensWithNoCostHidden });\n  });\n\n  const handleSortByValueToggle = useLastCallback(() => {\n    toggleSortByValue({ isEnabled: !isSortByValueEnabled });\n  });\n\n  const [localBaseCurrency, setLocalBaseCurrency] = useState(baseCurrency);\n\n  const handleBaseCurrencyChange = useLastCallback((currency: ApiBaseCurrency) => {\n    setLocalBaseCurrency(currency);\n    changeBaseCurrency({ currency });\n  });\n\n  const {\n    shouldRenderHiddenNftsSection,\n    hiddenNftsCount,\n  } = useMemo(() => {\n    const nfts = Object.values(nftsByAddress || {});\n    const blacklistedAddressesSet = new Set(blacklistedNftAddresses);\n    const whitelistedAddressesSet = new Set(whitelistedNftAddresses);\n    const shouldRender = nfts.some((nft) => blacklistedAddressesSet.has(nft.address) || nft.isHidden);\n    const hiddenNfts = nfts.filter(\n      (nft) => !whitelistedAddressesSet.has(nft.address) && (blacklistedAddressesSet.has(nft.address) || nft.isHidden),\n    );\n\n    return {\n      shouldRenderHiddenNftsSection: shouldRender,\n      hiddenNftsCount: hiddenNfts.length,\n    };\n  }, [nftsByAddress, blacklistedNftAddresses, whitelistedNftAddresses]);\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Assets & Activity')}\n          withNotch={isScrolled}\n          onBackButtonClick={onBack}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={onBack} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Assets & Activity')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n        ref={scrollContainerRef}\n      >\n        <div className={styles.settingsBlock}>\n          <Dropdown\n            label={lang('Base Currency')}\n            items={currencyItems}\n            selectedValue={baseCurrency ?? DEFAULT_PRICE_CURRENCY}\n            theme=\"light\"\n            shouldTranslateOptions\n            className={buildClassName(styles.item, styles.item_small)}\n            onChange={handleBaseCurrencyChange}\n            isLoading={localBaseCurrency !== baseCurrency}\n          />\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleInvestorViewToggle}>\n            <div>\n              {lang('Investor View')}\n              {' '}\n              <IconWithTooltip\n                message={lang('Focus on asset value rather than current balance')}\n                iconClassName={styles.iconQuestion}\n              />\n            </div>\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Investor View')}\n              checked={isInvestorViewEnabled}\n            />\n          </div>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleTinyTransfersHiddenToggle}>\n            <div>\n              {lang('Hide Tiny Transfers')}\n              {' '}\n              <IconWithTooltip\n                message={\n                  lang(\n                    '$tiny_transfers_help',\n                    { value: TINY_TRANSFER_MAX_COST },\n                  ) as string\n                }\n                tooltipClassName={buildClassName(styles.wideTooltip)}\n                iconClassName={styles.iconQuestion}\n              />\n            </div>\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Hide Tiny Transfers')}\n              checked={areTinyTransfersHidden}\n            />\n          </div>\n        </div>\n        {\n          shouldRenderHiddenNftsSection && (\n            <div className={styles.settingsBlock}>\n              <div className={buildClassName(styles.item, styles.item_small)} onClick={handleOpenHiddenNfts}>\n                {lang('Hidden NFTs')}\n                <div className={styles.itemInfo}>\n                  {hiddenNftsCount}\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              </div>\n            </div>\n          )\n        }\n        <p className={styles.blockTitle}>{lang('Token Settings')}</p>\n        <div className={styles.settingsBlock}>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleSortByValueToggle}>\n            {lang('Sort By Cost')}\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Sort By Cost')}\n              checked={isSortByValueEnabled}\n            />\n          </div>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleTokensWithNoPriceToggle}>\n            <div>\n              {lang('Hide Tokens With No Cost')}\n              {' '}\n              <IconWithTooltip\n                message={\n                  lang(\n                    '$hide_tokens_no_cost_help',\n                    { value: TINY_TRANSFER_MAX_COST },\n                  ) as string\n                }\n                tooltipClassName={buildClassName(styles.wideTooltip)}\n                iconClassName={styles.iconQuestion}\n              />\n            </div>\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Hide Tokens With No Cost')}\n              checked={areTokensWithNoCostHidden}\n            />\n          </div>\n        </div>\n\n        <SettingsTokens\n          isSensitiveDataHidden={isSensitiveDataHidden}\n          parentContainer={scrollContainerRef}\n          tokens={tokens}\n          orderedSlugs={orderedSlugs}\n          isSortByValueEnabled={isSortByValueEnabled}\n          baseCurrency={baseCurrency}\n          withChainIcon={isMultichainAccount}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    isInvestorViewEnabled,\n    isSortByValueEnabled,\n    areTinyTransfersHidden,\n    areTokensWithNoCostHidden,\n    baseCurrency,\n    isSensitiveDataHidden,\n  } = global.settings;\n\n  const {\n    orderedSlugs,\n  } = selectCurrentAccountSettings(global) ?? {};\n\n  const {\n    blacklistedNftAddresses = MEMO_EMPTY_ARRAY,\n    whitelistedNftAddresses = MEMO_EMPTY_ARRAY,\n    nfts: {\n      byAddress: nftsByAddress,\n    } = {},\n  } = selectCurrentAccountState(global) || {};\n\n  return {\n    isInvestorViewEnabled,\n    isSortByValueEnabled,\n    areTinyTransfersHidden,\n    areTokensWithNoCostHidden,\n    baseCurrency,\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n    tokens: selectCurrentAccountTokens(global),\n    orderedSlugs,\n    nftsByAddress,\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n    isSensitiveDataHidden,\n  };\n})(SettingsAssets));\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"ofWxr4DU\",\"description\":\"XlFYElV7\",\"buttons\":\"gixyiSx7\",\"button\":\"Uez1mztb\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiDapp } from '../../../api/types';\n\nimport { getDappConnectionUniqueId } from '../../../util/getDappConnectionUniqueId';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport styles from './DisconnectDappModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  dapp?: ApiDapp;\n  onClose: NoneToVoidFunction;\n}\n\nfunction DisconnectDappModal({ isOpen, dapp, onClose }: OwnProps) {\n  const {\n    deleteAllDapps,\n    deleteDapp,\n  } = getActions();\n\n  const lang = useLang();\n\n  const handleDeleteAllDapps = useLastCallback(() => {\n    void deleteAllDapps();\n    onClose();\n  });\n\n  const handleDeleteDapp = useLastCallback(() => {\n    void deleteDapp({ url: dapp!.url, uniqueId: getDappConnectionUniqueId(dapp!) });\n    onClose();\n  });\n\n  const title = dapp ? lang('Disconnect Dapp') : lang('Disconnect Dapps');\n  const description = dapp\n    ? lang('Are you sure you want to disconnect?', { dappname: <strong>{dapp.name}</strong> })\n    : lang('Are you sure you want to disconnect all websites?');\n  const onDisconnect = dapp ? handleDeleteDapp : handleDeleteAllDapps;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={onClose}\n      title={title}\n      contentClassName={styles.content}\n    >\n      <p className={styles.description}>{description}</p>\n      <div className={styles.buttons}>\n        <Button onClick={onClose} className={styles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={onDisconnect} className={styles.button}>\n          {lang('Disconnect')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(DisconnectDappModal);\n","import React, { memo, useState } from '../../lib/teact/teact';\n\nimport type { ApiDapp } from '../../api/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX, APP_NAME } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { getDappConnectionUniqueId } from '../../util/getDappConnectionUniqueId';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFlag from '../../hooks/useFlag';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport DappInfo from '../dapps/DappInfo';\nimport DisconnectDappModal from '../main/modals/DisconnectDappModal';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  dapps: ApiDapp[];\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\nfunction SettingsDapps({\n  isActive,\n  dapps,\n  handleBackClick,\n  isInsideModal,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [isDisconnectModalOpen, openDisconnectModal, closeDisconnectModal] = useFlag();\n  const [dappToDelete, setDappToDelete] = useState<ApiDapp | undefined>();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const handleDisconnectDapp = useLastCallback((url: string) => {\n    const dapp = dapps.find((d) => d.url === url);\n    setDappToDelete(dapp);\n    openDisconnectModal();\n  });\n\n  const handleDisconnectAll = useLastCallback(() => {\n    setDappToDelete(undefined);\n    openDisconnectModal();\n  });\n\n  function renderDapps() {\n    return (\n      <div className={styles.dapps}>\n        <div className={styles.disconnectAllBlock}>\n          <Button\n            className={styles.disconnectButton}\n            isSimple\n            onClick={handleDisconnectAll}\n          >\n            {lang('Disconnect All Dapps')}\n          </Button>\n          <p className={styles.blockDescription}>{lang('$dapps-description', { app_name: APP_NAME })}</p>\n        </div>\n\n        <p className={styles.blockTitle}>{lang('Logged in with %app_name%', { app_name: APP_NAME })}</p>\n\n        <div className={styles.block}>\n          {dapps.map((dapp) => (\n            <DappInfo\n              key={`dapp-${dapp.url}-${getDappConnectionUniqueId(dapp)}`}\n              dapp={dapp}\n              className={styles.dapp}\n              onDisconnect={handleDisconnectDapp}\n            />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  function renderEmptyDappsMessage(isPlaying: boolean) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isPlaying}\n          tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n          previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n          noLoop={false}\n          nonInteractive\n        />\n        <p className={styles.emptyListTitle}>{lang('No active connections')}</p>\n      </div>\n    );\n  }\n\n  const content = dapps.length === 0\n    ? renderEmptyDappsMessage(isActive)\n    : renderDapps();\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Dapps')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Dapps')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        <Transition activeKey={dapps.length === 0 ? 0 : 1} name=\"fade\">\n          {content}\n        </Transition>\n      </div>\n      <DisconnectDappModal isOpen={isDisconnectModalOpen} onClose={closeDisconnectModal} dapp={dappToDelete} />\n    </div>\n  );\n}\n\nexport default memo(SettingsDapps);\n","import type { Platforms } from '@twa-dev/types';\n\nimport {\n  IS_AIR_APP,\n  IS_ANDROID_DIRECT,\n  IS_CAPACITOR,\n  IS_EXTENSION,\n  IS_FIREFOX_EXTENSION,\n  IS_OPERA_EXTENSION,\n  IS_PACKAGED_ELECTRON,\n  IS_TELEGRAM_APP,\n} from '../config';\nimport { getTelegramApp } from './telegram';\nimport { IS_ANDROID, IS_ELECTRON, IS_IOS } from './windowEnvironment';\n\nexport type BuildPlatform = Platforms\n  | 'web'\n  | 'extension'\n  | 'firefox-extension'\n  | 'opera-extension'\n  | 'electron'\n  | 'android'\n  | 'android-air'\n  | 'android-air-direct'\n  | 'android-direct'\n  | 'ios'\n  | 'ios-air'\n  | 'telegram-unknown';\n\nexport function getBuildPlatform(): BuildPlatform {\n  if (IS_FIREFOX_EXTENSION) return 'firefox-extension';\n  if (IS_OPERA_EXTENSION) return 'opera-extension';\n  if (IS_EXTENSION) return 'extension';\n\n  if (IS_CAPACITOR) {\n    if (IS_AIR_APP) {\n      if (IS_IOS) return 'ios-air';\n      if (IS_ANDROID_DIRECT) return 'android-air-direct';\n      if (IS_ANDROID) return 'android-air';\n    }\n    if (IS_ANDROID_DIRECT) return 'android-direct';\n    if (IS_ANDROID) return 'android';\n    if (IS_IOS) return 'ios';\n  }\n\n  if (IS_TELEGRAM_APP) {\n    return getTelegramApp()?.platform || 'telegram-unknown';\n  }\n\n  if (IS_ELECTRON) return 'electron';\n\n  return 'web';\n}\n\nexport function getFlagsValue() {\n  return {\n    IS_ANDROID_DIRECT,\n    IS_CAPACITOR,\n    IS_TELEGRAM_APP,\n    IS_EXTENSION,\n    IS_FIREFOX_EXTENSION,\n    IS_PACKAGED_ELECTRON,\n    IS_AIR_APP,\n    IS_ELECTRON,\n    IS_OPERA_EXTENSION,\n  };\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiNetwork } from '../../api/types';\nimport type { Account } from '../../global/types';\nimport type { DropdownItem } from '../ui/Dropdown';\n\nimport { APP_COMMIT_HASH, APP_ENV, APP_VERSION, IS_CORE_WALLET, IS_EXTENSION, IS_TELEGRAM_APP } from '../../config';\nimport { selectIsMultichainAccount } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { copyTextToClipboard } from '../../util/clipboard';\nimport { getBuildPlatform, getFlagsValue } from '../../util/getBuildPlatform';\nimport { getPlatform } from '../../util/getPlatform';\nimport { getLogs } from '../../util/logs';\nimport { getLogsFromNative } from '../../util/multitab';\nimport { shareFile } from '../../util/share';\nimport { IS_IOS } from '../../util/windowEnvironment';\nimport { callApi } from '../../api';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport Dropdown from '../ui/Dropdown';\nimport Modal from '../ui/Modal';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  isTestnet?: boolean;\n  isCopyStorageEnabled?: boolean;\n  onShowAllWalletVersions: () => void;\n  onClose: () => void;\n}\n\ninterface StateProps {\n  currentAccountId?: string;\n  accountsById?: Record<string, Account>;\n  canViewAllWalletVersions: boolean;\n}\n\nconst NETWORK_OPTIONS: DropdownItem<ApiNetwork>[] = [{\n  value: 'mainnet',\n  name: 'Mainnet',\n}, {\n  value: 'testnet',\n  name: 'Testnet',\n}];\n\n// iOS allows downloading files even in TMA, however, in other platforms,\n// downloading files from `blob:https://` schemes is limited by Telegram itself.\n// Also, file downloading is limited in extensions.\nconst CAN_DOWNLOAD_LOGS = IS_IOS || !(IS_EXTENSION || IS_TELEGRAM_APP);\n\nfunction SettingsDeveloperOptions({\n  isOpen,\n  isTestnet,\n  isCopyStorageEnabled,\n  onShowAllWalletVersions,\n  onClose,\n  currentAccountId,\n  accountsById,\n  canViewAllWalletVersions,\n}: OwnProps & StateProps) {\n  const {\n    startChangingNetwork,\n    closeSettings,\n    openAddAccountModal,\n    copyStorageData,\n    showNotification,\n  } = getActions();\n  const lang = useLang();\n  const currentNetwork = NETWORK_OPTIONS[isTestnet ? 1 : 0].value;\n\n  const handleNetworkChange = useLastCallback((newNetwork: ApiNetwork) => {\n    startChangingNetwork({ network: newNetwork });\n    onClose();\n  });\n\n  const handleAddTonOnlyWallet = useLastCallback(() => {\n    onClose();\n    closeSettings();\n    openAddAccountModal({ forceAddingTonOnlyAccount: true });\n  });\n\n  const handleDownloadLogs = useLastCallback(async () => {\n    const logsString = await getLogsString({ currentAccountId, accountsById });\n\n    if (!CAN_DOWNLOAD_LOGS) {\n      await copyTextToClipboard(logsString);\n      showNotification({ message: lang('Logs were copied!'), icon: 'icon-copy' });\n      onClose();\n    } else {\n      const filename = `${IS_CORE_WALLET ? 'tonwallet' : 'mytonwallet'}_logs_${new Date().toISOString()}.json`;\n      await shareFile(filename, logsString, 'application/json');\n    }\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      noBackdropClose\n      isCompact\n      title={lang('Developer Options')}\n    >\n      <div className={styles.settingsBlock}>\n        <Dropdown\n          label={lang('Network')}\n          items={NETWORK_OPTIONS}\n          selectedValue={currentNetwork}\n          theme=\"light\"\n          arrow=\"chevron\"\n          className={buildClassName(styles.item, styles.item_small)}\n          onChange={handleNetworkChange}\n        />\n\n        <div className={buildClassName(styles.item, styles.item_small)} onClick={handleAddTonOnlyWallet}>\n          {lang('Create TON-Only Wallet')}\n\n          <i className={buildClassName(styles.iconChevronRight, 'icon-plus')} aria-hidden />\n        </div>\n\n        <div\n          className={buildClassName(styles.item, styles.item_small, !canViewAllWalletVersions && styles.item_disabled)}\n          onClick={onShowAllWalletVersions}\n        >\n          {lang('All Wallet Versions')}\n\n          <div className={styles.itemInfo}>\n            {canViewAllWalletVersions ? (\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n\n            ) : (\n              <>\n                <span className={styles.small}>{lang('Multichain')}</span>\n                <i className={buildClassName(styles.iconChevronRight, 'icon-lock')} aria-hidden />\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {isCopyStorageEnabled && (\n        <>\n          <p className={styles.blockTitle}>{lang('Dangerous')}</p>\n          <div className={styles.settingsBlock}>\n            <div className={buildClassName(styles.item, styles.item_small)} onClick={() => copyStorageData()}>\n              {lang('Copy Storage Data')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-copy')} aria-hidden />\n            </div>\n          </div>\n        </>\n      )}\n\n      <div className={buildClassName(styles.settingsBlock)}>\n        <div className={buildClassName(styles.item, styles.item_small)} onClick={handleDownloadLogs}>\n          {\n            !CAN_DOWNLOAD_LOGS\n              ? (\n                <>\n                  {lang('Copy Logs')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-copy')} aria-hidden />\n                </>\n              ) : lang('Download Logs')\n          }\n        </div>\n      </div>\n\n      <Button\n        className={styles.developerCloseButton}\n        onClick={onClose}\n      >\n        {lang('Close')}\n      </Button>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const currentAccountId = global.currentAccountId;\n  const accountsById = global.accounts?.byId;\n  const canViewAllWalletVersions = !selectIsMultichainAccount(global, currentAccountId!);\n\n  return {\n    currentAccountId,\n    accountsById,\n    canViewAllWalletVersions,\n  };\n})(SettingsDeveloperOptions));\n\nasync function getLogsString({\n  currentAccountId,\n  accountsById,\n}: Partial<StateProps>) {\n  const accountsInfo = accountsById && Object.keys(accountsById).reduce((acc, accountId) => {\n    const { addressByChain, type } = accountsById[accountId];\n    acc[accountId] = {\n      type,\n      addressByChain,\n    };\n    return acc;\n  }, {} as any);\n\n  const [mainLogs, bottomSheetLogs, apiLogs = []] = await Promise.all([\n    getLogs(),\n    getLogsFromNative(),\n    callApi('getLogs'),\n  ]);\n\n  const time = new Date();\n  const timezoneOffset = -time.getTimezoneOffset();\n\n  return JSON.stringify(\n    {\n      time,\n      timezone: `UTC${timezoneOffset < 0 ? '-' : '+'}${Math.abs(timezoneOffset) / 60}`,\n      environment: APP_ENV,\n      version: APP_VERSION,\n      commit: APP_COMMIT_HASH,\n      platform: getPlatform(),\n      navigatorPlatform: navigator.platform,\n      userAgent: navigator.userAgent,\n      build: getBuildPlatform(),\n      flags: getFlagsValue(),\n      currentAccountId,\n      accountsInfo,\n      logs: [\n        ...mainLogs.map((log) => ({ ...log, context: 'main' })),\n        ...bottomSheetLogs.map((log) => ({ ...log, context: 'bottomSheet' })),\n        ...apiLogs.map((log) => ({ ...log, context: 'api' })),\n      ]\n        .sort((a, b) => a.time - b.time)\n        .map((log) => ({ ...log, time: new Date(log.time).toISOString() })),\n    },\n    undefined,\n    2,\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX, APP_NAME } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\nfunction SettingsDisclaimer({ isActive, handleBackClick, isInsideModal }: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title=\"\"\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n        </div>\n      )}\n      <div\n        className={buildClassName(\n          styles.content,\n          isInsideModal && 'custom-scroll',\n          !isInsideModal && styles.content_noScroll,\n        )}\n        onScroll={isInsideModal ? handleContentScroll : undefined}\n      >\n        <div className={styles.stickerAndTitle}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n            previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n            noLoop={false}\n            nonInteractive\n            size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n          />\n          <div className={styles.sideTitle}>{lang('Use Responsibly')}</div>\n        </div>\n        <div className={buildClassName(styles.blockAbout, !isInsideModal && 'custom-scroll')}>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description1', { app_name: APP_NAME }))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description2'))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description3', { app_name: APP_NAME }))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description4'))}</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsDisclaimer);\n","import { memo } from '../../../lib/teact/teact';\nimport React from '../../../lib/teact/teactn';\nimport { getActions } from '../../../global';\n\nimport { type ApiNft } from '../../../api/types';\nimport { MediaType } from '../../../global/types';\n\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON } from '../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useShowTransition from '../../../hooks/useShowTransition';\n\nimport Button from '../../ui/Button';\n\nimport styles from '../Settings.module.scss';\n\ninterface OwnProps {\n  nft: ApiNft;\n}\n\nfunction HiddenByUserNft({ nft }: OwnProps) {\n  const { openMediaViewer, removeNftSpecialStatus } = getActions();\n  const lang = useLang();\n\n  const [isNftHidden, , unmarkNftHidden] = useFlag(true);\n\n  const handleUnhide = useLastCallback(() => {\n    removeNftSpecialStatus({ address: nft.address });\n  });\n\n  const { ref } = useShowTransition({\n    isOpen: isNftHidden,\n    onCloseAnimationEnd: handleUnhide,\n  });\n\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait || IS_ELECTRON || IS_DELEGATING_BOTTOM_SHEET || IS_DELEGATED_BOTTOM_SHEET;\n\n  function handleNftClick() {\n    openMediaViewer({\n      mediaId: nft.address, mediaType: MediaType.Nft, noGhostAnimation: areSettingsInModal, hiddenNfts: 'user',\n    });\n  }\n\n  return (\n    <div\n      ref={ref}\n      className={styles.item}\n      onClick={handleNftClick}\n      key={nft.address}\n      role=\"button\"\n      tabIndex={0}\n      data-nft-address={!areSettingsInModal && nft.address}\n    >\n      <img className={styles.nftImage} src={nft.image} alt={nft.name} />\n      <div className={styles.nftPrimaryCell}>\n        <span className={styles.nftName}>{nft.name || lang('Untitled')}</span>\n        {\n          nft.collectionName && <span className={styles.nftCollection}>{nft.collectionName}</span>\n        }\n      </div>\n\n      <Button\n        isSmall\n        isPrimary\n        isText\n        className={styles.nftButtonUnhide}\n        onClick={unmarkNftHidden}\n        shouldStopPropagation\n      >\n        {lang('Unhide')}\n      </Button>\n    </div>\n  );\n}\n\nexport default memo(HiddenByUserNft);\n","import { memo } from '../../../lib/teact/teact';\nimport React from '../../../lib/teact/teactn';\nimport { getActions } from '../../../global';\n\nimport { type ApiNft } from '../../../api/types';\nimport { MediaType } from '../../../global/types';\n\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON } from '../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Switcher from '../../ui/Switcher';\n\nimport styles from '../Settings.module.scss';\n\ninterface OwnProps {\n  nft: ApiNft;\n  isWhitelisted?: boolean;\n}\n\nfunction ProbablyScamNft({ nft, isWhitelisted }: OwnProps) {\n  const { openMediaViewer, removeNftSpecialStatus, openUnhideNftModal } = getActions();\n  const lang = useLang();\n\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait || IS_ELECTRON || IS_DELEGATING_BOTTOM_SHEET || IS_DELEGATED_BOTTOM_SHEET;\n\n  const handleNftClick = useLastCallback(() => {\n    openMediaViewer({\n      mediaId: nft.address, mediaType: MediaType.Nft, noGhostAnimation: areSettingsInModal, hiddenNfts: 'scam',\n    });\n  });\n\n  const handleSwitcherClick = useLastCallback((e: React.ChangeEvent) => {\n    e.stopPropagation();\n    if (isWhitelisted) {\n      removeNftSpecialStatus({ address: nft.address });\n    } else {\n      openUnhideNftModal({ address: nft.address, name: nft.name! });\n    }\n  });\n\n  return (\n    <div\n      className={styles.item}\n      onClick={handleNftClick}\n      key={nft.address}\n      role=\"button\"\n      tabIndex={0}\n      data-nft-address={!areSettingsInModal && nft.address}\n    >\n      <img className={styles.nftImage} src={nft.image} alt={nft.name} />\n      <div className={styles.nftPrimaryCell}>\n        <span className={styles.nftName}>{nft.name}</span>\n        {nft.collectionName && <span className={styles.nftCollection}>{nft.collectionName}</span>}\n      </div>\n\n      <Switcher\n        className={styles.menuSwitcher}\n        label={lang('Show')}\n        checked={isWhitelisted}\n        onChange={handleSwitcherClick}\n        shouldStopPropagation\n      />\n    </div>\n  );\n}\n\nexport default memo(ProbablyScamNft);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\n\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON } from '../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport HiddenByUserNft from './nfts/HiddenByUserNft';\nimport ProbablyScamNft from './nfts/ProbablyScamNft';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  handleBackClick: NoneToVoidFunction;\n  isInsideModal?: boolean;\n}\n\ninterface StateProps {\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  orderedAddresses?: string[];\n  byAddress?: Record<string, ApiNft>;\n}\n\nfunction SettingsHiddenNfts({\n  isActive,\n  handleBackClick,\n  isInsideModal,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  orderedAddresses,\n  byAddress,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    isScrolled,\n    handleScroll: handleContentScroll,\n  } = useScrolledState();\n\n  const nfts = useMemo(() => {\n    if (!orderedAddresses || !byAddress) {\n      return undefined;\n    }\n\n    return orderedAddresses\n      .map((address) => byAddress[address])\n      .filter(Boolean);\n  }, [\n    byAddress, orderedAddresses,\n  ]);\n\n  const hiddenByUserNfts = useMemo(() => {\n    const blacklistedNftAddressesSet = new Set(blacklistedNftAddresses);\n    return nfts?.filter((nft) => blacklistedNftAddressesSet.has(nft.address));\n  }, [nfts, blacklistedNftAddresses]);\n\n  const probablyScamNfts = useMemo(() => {\n    return nfts?.filter((nft) => nft.isHidden);\n  }, [nfts]);\n\n  const whitelistedNftAddressesSet = useMemo(() => {\n    return new Set(whitelistedNftAddresses);\n  }, [whitelistedNftAddresses]);\n\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait || IS_ELECTRON || IS_DELEGATING_BOTTOM_SHEET || IS_DELEGATED_BOTTOM_SHEET;\n\n  function renderHiddenByUserNfts() {\n    return (\n      <>\n        <p className={styles.blockTitle}>{lang('Hidden By Me')}</p>\n        <div className={buildClassName(styles.block, !areSettingsInModal && 'hidden-nfts-user')}>\n          {hiddenByUserNfts!.map((nft) => <HiddenByUserNft key={nft.address} nft={nft} />)}\n        </div>\n      </>\n    );\n  }\n\n  function renderProbablyScamNfts() {\n    return (\n      <>\n        <p className={styles.blockTitle}>{lang('Probably Scam')}</p>\n        <div className={\n          buildClassName(styles.block, styles.settingsBlockWithDescription, !areSettingsInModal && 'hidden-nfts-scam')\n        }\n        >\n          {\n            probablyScamNfts!.map(\n              (nft) => (\n                <ProbablyScamNft\n                  key={nft.address}\n                  nft={nft}\n                  isWhitelisted={whitelistedNftAddressesSet.has(nft.address)}\n                />\n              ),\n            )\n          }\n        </div>\n        <p className={styles.blockDescription}>\n          {lang('$settings_nft_probably_scam_description')}\n        </p>\n      </>\n    );\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Hidden NFTs')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Hidden NFTs')}</span>\n        </div>\n      )}\n\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        {Boolean(hiddenByUserNfts?.length) && renderHiddenByUserNfts()}\n        {Boolean(probablyScamNfts?.length) && renderProbablyScamNfts()}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n  } = selectCurrentAccountState(global) ?? {};\n  const {\n    orderedAddresses,\n    byAddress,\n  } = selectCurrentAccountState(global)?.nfts ?? {};\n  return {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n    orderedAddresses,\n    byAddress,\n  };\n})(SettingsHiddenNfts));\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { LangCode } from '../../global/types';\n\nimport { LANG_LIST } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { setLanguage } from '../../util/langProvider';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\nimport checkmarkImg from '../../assets/settings/settings_checkmark.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n  langCode: LangCode;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\nfunction SettingsLanguage({\n  isActive,\n  langCode,\n  handleBackClick,\n  isInsideModal,\n}: OwnProps) {\n  const {\n    changeLanguage,\n  } = getActions();\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const handleLanguageChange = useLastCallback((newLangCode: LangCode) => {\n    void setLanguage(newLangCode, () => {\n      changeLanguage({ langCode: newLangCode });\n    });\n  });\n\n  function renderLanguages() {\n    return LANG_LIST.map(({ name, nativeName, langCode: lc }) => (\n      <div\n        key={lc}\n        className={buildClassName(styles.item, styles.item_lang)}\n        onClick={() => handleLanguageChange(lc)}\n      >\n        <div className={styles.languageInfo}>\n          <span className={styles.languageMain}>{name}</span>\n          <span className={styles.languageNative}>{nativeName}</span>\n        </div>\n\n        {langCode === lc && <img src={checkmarkImg} alt={name} />}\n      </div>\n    ));\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Language')}\n          onBackButtonClick={handleBackClick}\n          className={buildClassName(styles.modalHeader, styles.languageHeader)}\n        />\n      ) : (\n        <div className={styles.header}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Language')}</span>\n        </div>\n      )}\n      <div className={buildClassName(styles.content, 'custom-scroll')}>\n        <div className={styles.block}>\n          {renderLanguages()}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsLanguage);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { Account, AccountSettings, AccountType, GlobalState } from '../../global/types';\n\nimport { MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT } from '../../config';\nimport { selectNetworkAccounts } from '../../global/selectors';\nimport { getMainAccountAddress } from '../../util/account';\nimport buildClassName from '../../util/buildClassName';\nimport { isKeyCountGreater } from '../../util/isEmptyObject';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport AccountButton from '../common/AccountButton';\nimport AccountButtonWrapper from '../common/AccountButtonWrapper';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Switcher from '../ui/Switcher';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\ninterface StateProps {\n  accounts?: Record<string, Account>;\n  canPlaySounds?: boolean;\n  settingsByAccountId?: Record<string, AccountSettings>;\n  pushNotifications: GlobalState['pushNotifications'];\n}\n\nfunction SettingsPushNotifications({\n  isActive,\n  handleBackClick,\n  accounts,\n  canPlaySounds,\n  pushNotifications: {\n    enabledAccounts,\n    isAvailable: arePushNotificationsAvailable,\n  },\n  isInsideModal,\n  settingsByAccountId,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n\n  const { toggleNotifications, toggleNotificationAccount, toggleCanPlaySounds } = getActions();\n  const iterableAccounts = useMemo(() => Object.entries(accounts || {}), [accounts]);\n  const arePushNotificationsEnabled = Boolean(Object.keys(enabledAccounts).length);\n  const headerTitle = arePushNotificationsAvailable ? lang('Notifications & Sounds') : lang('Sounds');\n\n  const handlePushNotificationsToggle = useLastCallback(() => {\n    toggleNotifications({ isEnabled: !arePushNotificationsEnabled });\n  });\n\n  const handleCanPlaySoundToggle = useLastCallback(() => {\n    toggleCanPlaySounds({ isEnabled: !canPlaySounds });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  function renderAccount(\n    accountId: string,\n    addressByChain: Account['addressByChain'],\n    accountType: AccountType,\n    title?: string,\n  ) {\n    const onClick = !addressByChain.ton ? undefined : () => {\n      toggleNotificationAccount({ accountId });\n    };\n\n    const { cardBackgroundNft } = settingsByAccountId?.[accountId] || {};\n    const address = getMainAccountAddress(addressByChain) ?? '';\n\n    const isDisabled = enabledAccounts\n      && !enabledAccounts[accountId]\n      && isKeyCountGreater(enabledAccounts, MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT - 1);\n\n    return (\n      <AccountButton\n        className={buildClassName(\n          styles.account,\n          isDisabled ? styles.accountDisabled : undefined,\n        )}\n        key={accountId}\n        accountId={accountId}\n        address={address}\n        title={title}\n        ariaLabel={lang('Switch Account')}\n        accountType={accountType}\n        withCheckbox\n        isLoading={isDisabled}\n        isActive={Boolean(enabledAccounts && enabledAccounts[accountId])}\n\n        onClick={onClick}\n        cardBackgroundNft={cardBackgroundNft}\n      />\n    );\n  }\n\n  function renderAccounts() {\n    return (\n      <AccountButtonWrapper\n        accountLength={iterableAccounts.length}\n        className={styles.settingsBlock}\n      >\n        {iterableAccounts.map(\n          ([accountId, { title, addressByChain, type }]) => {\n            return renderAccount(accountId, addressByChain, type, title);\n          },\n        )}\n      </AccountButtonWrapper>\n    );\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={headerTitle}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{headerTitle}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        {arePushNotificationsAvailable && (\n          <>\n            <div className={styles.settingsBlock}>\n              <div className={buildClassName(styles.item, styles.item_small)} onClick={handlePushNotificationsToggle}>\n                {lang('Push Notifications')}\n\n                <Switcher\n                  className={styles.menuSwitcher}\n                  label={lang('Push Notifications')}\n                  checked={arePushNotificationsEnabled}\n                />\n              </div>\n            </div>\n            <p className={styles.blockTitle}>{\n              lang(\n                'Select up to %count% wallets for notifications',\n                { count: MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT },\n              )\n            }\n            </p>\n            {renderAccounts()}\n          </>\n        )}\n        <div className={styles.settingsBlock}>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleCanPlaySoundToggle}>\n            {lang('Play Sounds')}\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Play Sounds')}\n              checked={canPlaySounds}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n  return {\n    accounts,\n    canPlaySounds: global.settings.canPlaySounds,\n    pushNotifications: global.pushNotifications,\n    settingsByAccountId: global.settings.byAccountId,\n  };\n})(SettingsPushNotifications));\n","export var AndroidSettings;\r\n(function (AndroidSettings) {\r\n    /**\r\n     * Show settings for accessibility modules\r\n     */\r\n    AndroidSettings[\"Accessibility\"] = \"accessibility\";\r\n    /**\r\n     * Show add account screen for creating a new account\r\n     */\r\n    AndroidSettings[\"Account\"] = \"account\";\r\n    /**\r\n     * Show settings to allow entering/exiting airplane mode\r\n     */\r\n    AndroidSettings[\"AirplaneMode\"] = \"airplane_mode\";\r\n    /**\r\n     * Show settings to allow configuration of APNs\r\n     */\r\n    AndroidSettings[\"Apn\"] = \"apn\";\r\n    /**\r\n     * Show screen of details about a particular application\r\n     */\r\n    AndroidSettings[\"ApplicationDetails\"] = \"application_details\";\r\n    /**\r\n     * Show settings to allow configuration of application development-related settings\r\n     */\r\n    AndroidSettings[\"ApplicationDevelopment\"] = \"application_development\";\r\n    /**\r\n     * Show settings to allow configuration of application-related settings\r\n     */\r\n    AndroidSettings[\"Application\"] = \"application\";\r\n    /**\r\n     * Show settings to allow configuration of application-specific notifications\r\n     */\r\n    AndroidSettings[\"AppNotification\"] = \"app_notification\";\r\n    /**\r\n     * Show screen for controlling which apps can ignore battery optimizations\r\n     */\r\n    AndroidSettings[\"BatteryOptimization\"] = \"battery_optimization\";\r\n    /**\r\n     * Show settings to allow configuration of Bluetooth\r\n     */\r\n    AndroidSettings[\"Bluetooth\"] = \"bluetooth\";\r\n    /**\r\n     * Show settings for video captioning\r\n     */\r\n    AndroidSettings[\"Captioning\"] = \"captioning\";\r\n    /**\r\n     * Show settings to allow configuration of cast endpoints\r\n     */\r\n    AndroidSettings[\"Cast\"] = \"cast\";\r\n    /**\r\n     * Show settings for selection of 2G/3G/4G\r\n     */\r\n    AndroidSettings[\"DataRoaming\"] = \"data_roaming\";\r\n    /**\r\n     * Show settings to allow configuration of date and time\r\n     */\r\n    AndroidSettings[\"Date\"] = \"date\";\r\n    /**\r\n     * Show settings to allow configuration of display\r\n     */\r\n    AndroidSettings[\"Display\"] = \"display\";\r\n    /**\r\n     * Show Daydream settings\r\n     */\r\n    AndroidSettings[\"Dream\"] = \"dream\";\r\n    /**\r\n     * Show Home selection settings\r\n     */\r\n    AndroidSettings[\"Home\"] = \"home\";\r\n    /**\r\n     *    Show settings to configure input methods, in particular allowing the user to enable input methods\r\n     */\r\n    AndroidSettings[\"Keyboard\"] = \"keyboard\";\r\n    /**\r\n     * Show settings to enable/disable input method subtypes\r\n     */\r\n    AndroidSettings[\"KeyboardSubType\"] = \"keyboard_subtype\";\r\n    /**\r\n     * Show settings to allow configuration of locale\r\n     */\r\n    AndroidSettings[\"Locale\"] = \"locale\";\r\n    /**\r\n     * Show settings to allow configuration of current location sources\r\n     */\r\n    AndroidSettings[\"Location\"] = \"location\";\r\n    /**\r\n     *    Show settings to manage installed applications\r\n     */\r\n    AndroidSettings[\"ManageApplications\"] = \"manage_applications\";\r\n    /**\r\n     * Show settings to manage all applications\r\n     */\r\n    AndroidSettings[\"ManageAllApplications\"] = \"manage_all_applications\";\r\n    /**\r\n     * Show settings for memory card storage\r\n     */\r\n    AndroidSettings[\"MemoryCard\"] = \"memory_card\";\r\n    /**\r\n     * Show settings for selecting the network operator\r\n     */\r\n    AndroidSettings[\"Network\"] = \"network\";\r\n    /**\r\n     * Show NFC Sharing settings\r\n     */\r\n    AndroidSettings[\"NfcSharing\"] = \"nfcsharing\";\r\n    /**\r\n     * Show NFC Tap & Pay settings\r\n     */\r\n    AndroidSettings[\"NfcPayment\"] = \"nfc_payment\";\r\n    /**\r\n     * Show NFC settings\r\n     */\r\n    AndroidSettings[\"NfcSettings\"] = \"nfc_settings\";\r\n    /**\r\n     * Show the top level print settings\r\n     */\r\n    AndroidSettings[\"Print\"] = \"print\";\r\n    /**\r\n     * Show settings to allow configuration of privacy options\r\n     */\r\n    AndroidSettings[\"Privacy\"] = \"privacy\";\r\n    /**\r\n     * Show settings to allow configuration of quick launch shortcuts\r\n     */\r\n    AndroidSettings[\"QuickLaunch\"] = \"quick_launch\";\r\n    /**\r\n     * Show settings for global search\r\n     */\r\n    AndroidSettings[\"Search\"] = \"search\";\r\n    /**\r\n     * Show settings to allow configuration of security and location privacy\r\n     */\r\n    AndroidSettings[\"Security\"] = \"security\";\r\n    /**\r\n     * Show system settings\r\n     */\r\n    AndroidSettings[\"Settings\"] = \"settings\";\r\n    /**\r\n     * Show the regulatory information screen for the device\r\n     */\r\n    AndroidSettings[\"ShowRegulatoryInfo\"] = \"show_regulatory_info\";\r\n    /**\r\n     * Show settings to a llow configuration of sound and volume\r\n     */\r\n    AndroidSettings[\"Sound\"] = \"sound\";\r\n    /**\r\n     * Show settings for internal storage\r\n     */\r\n    AndroidSettings[\"Storage\"] = \"storage\";\r\n    /**\r\n     * Show settings to allow configuration of sync settings\r\n     */\r\n    AndroidSettings[\"Sync\"] = \"sync\";\r\n    /**\r\n     * Show settings to control access to usage information\r\n     */\r\n    AndroidSettings[\"Usage\"] = \"usage\";\r\n    /**\r\n     * Show settings to manage the user input dictionary\r\n     */\r\n    AndroidSettings[\"UserDictionary\"] = \"user_dictionary\";\r\n    /**\r\n     * Show settings to configure input methods, in particular allowing the user to enable input methods\r\n     */\r\n    AndroidSettings[\"VoiceInput\"] = \"voice_input\";\r\n    /**\r\n     * Show settings to allow configuration of Wi-Fi\r\n     */\r\n    AndroidSettings[\"Wifi\"] = \"wifi\";\r\n    /**\r\n     * Show settings to allow configuration of a static IP address for Wi-Fi\r\n     */\r\n    AndroidSettings[\"WifiIp\"] = \"wifi_ip\";\r\n    /**\r\n     * Show settings to allow configuration of wireless controls such as Wi-Fi, Bluetooth and Mobile networks\r\n     */\r\n    AndroidSettings[\"Wireless\"] = \"wireless\";\r\n    /**\r\n     * Zen mode settings.\r\n     */\r\n    AndroidSettings[\"ZenMode\"] = \"zen_mode\";\r\n    /**\r\n     * Zen mode priority settings.\r\n     * Note that this may not work on every single device.\r\n     * See: https://github.com/RaphaelWoude/capacitor-native-settings/pull/63\r\n     */\r\n    AndroidSettings[\"ZenModePriority\"] = \"zen_mode_priority\";\r\n    /**\r\n     * Zen mode blocked effects settings.\r\n     * Note that this may not work on every single device.\r\n     * See: https://github.com/RaphaelWoude/capacitor-native-settings/pull/63\r\n     */\r\n    AndroidSettings[\"ZenModeBlockedEffects\"] = \"zen_mode_blocked_effects\";\r\n})(AndroidSettings || (AndroidSettings = {}));\r\nexport var IOSSettings;\r\n(function (IOSSettings) {\r\n    /**\r\n     * Settings > About page\r\n     */\r\n    IOSSettings[\"About\"] = \"about\";\r\n    /**\r\n     * Opens your app-specific settings screen. Note that this is the only officially supported settings screen by Apple.\r\n     */\r\n    IOSSettings[\"App\"] = \"app\";\r\n    /**\r\n     * Opens app-specific notification settings screen for iOS 15.4+; opens general app-specific settings for earlier versions.\"\r\n     */\r\n    IOSSettings[\"AppNotification\"] = \"appNotification\";\r\n    /**\r\n     * Used to set if and when the screen should be automatically locked.\r\n     */\r\n    IOSSettings[\"AutoLock\"] = \"autoLock\";\r\n    /**\r\n     * Bluetooth settings. Allows the users to enable/disable bluetooth and to search for devices.\r\n     */\r\n    IOSSettings[\"Bluetooth\"] = \"bluetooth\";\r\n    /**\r\n     * Date and time settings.\r\n     */\r\n    IOSSettings[\"DateTime\"] = \"dateTime\";\r\n    /**\r\n     * FaceTime settings.\r\n     */\r\n    IOSSettings[\"FaceTime\"] = \"facetime\";\r\n    /**\r\n     * Opens iOS general settings screen.\r\n     */\r\n    IOSSettings[\"General\"] = \"general\";\r\n    /**\r\n     * Keyboard settings.\r\n     */\r\n    IOSSettings[\"Keyboard\"] = \"keyboard\";\r\n    /**\r\n     * iCloud settings.\r\n     */\r\n    IOSSettings[\"ICloud\"] = \"iCloud\";\r\n    /**\r\n     * iCloud Storage and Backup settings.\r\n     */\r\n    IOSSettings[\"ICloudStorageBackup\"] = \"iCloudStorageBackup\";\r\n    /**\r\n     * Language and region settings.\r\n     */\r\n    IOSSettings[\"International\"] = \"international\";\r\n    /**\r\n     * Show settings to allow configuration of current location sources\r\n     */\r\n    IOSSettings[\"LocationServices\"] = \"locationServices\";\r\n    /**\r\n     * Music settings.\r\n     */\r\n    IOSSettings[\"Music\"] = \"music\";\r\n    /**\r\n     * Notes settings.\r\n     */\r\n    IOSSettings[\"Notes\"] = \"notes\";\r\n    /**\r\n     * Notifications settings.\r\n     */\r\n    IOSSettings[\"Notifications\"] = \"notifications\";\r\n    /**\r\n     * Phone settings.\r\n     */\r\n    IOSSettings[\"Phone\"] = \"phone\";\r\n    /**\r\n     * Photos settings.\r\n     */\r\n    IOSSettings[\"Photos\"] = \"photos\";\r\n    /**\r\n     * Allows the user to manage configuration profiles that are installed on the phone.\r\n     */\r\n    IOSSettings[\"ManagedConfigurationList\"] = \"managedConfigurationList\";\r\n    /**\r\n     * Screen where the user can reset the phone to factory settings.\r\n     */\r\n    IOSSettings[\"Reset\"] = \"reset\";\r\n    /**\r\n     * Ringtone settings.\r\n     */\r\n    IOSSettings[\"Ringtone\"] = \"ringtone\";\r\n    /**\r\n     * Used to set phone volume, vibration settings, etc.\r\n     */\r\n    IOSSettings[\"Sounds\"] = \"sounds\";\r\n    /**\r\n     * Software update screen.\r\n     */\r\n    IOSSettings[\"SoftwareUpdate\"] = \"softwareUpdate\";\r\n    /**\r\n     * Store settings.\r\n     */\r\n    IOSSettings[\"Store\"] = \"store\";\r\n    /**\r\n     * Tracking settings.\r\n     */\r\n    IOSSettings[\"Tracking\"] = \"tracking\";\r\n    /**\r\n     * Wallpaper settings.\r\n     */\r\n    IOSSettings[\"Wallpaper\"] = \"wallpaper\";\r\n    /**\r\n     * WiFi settings.\r\n     */\r\n    IOSSettings[\"WiFi\"] = \"wifi\";\r\n    /**\r\n     * Tethering settings (used to create a hotspot with mobile data).\r\n     */\r\n    IOSSettings[\"Tethering\"] = \"tethering\";\r\n    /**\r\n     * Do Not Disturb settings.\r\n     */\r\n    IOSSettings[\"DoNotDisturb\"] = \"doNotDisturb\";\r\n    /**\r\n     * Touch id passcode settings.\r\n     */\r\n    IOSSettings[\"TouchIdPasscode\"] = \"touchIdPasscode\";\r\n    /**\r\n     * Screen Time settings.\r\n     */\r\n    IOSSettings[\"ScreenTime\"] = \"screenTime\";\r\n    /**\r\n     * Accessibility settings.\r\n     */\r\n    IOSSettings[\"Accessibility\"] = \"accessibility\";\r\n})(IOSSettings || (IOSSettings = {}));\r\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\r\nconst NativeSettings = registerPlugin('NativeSettings', {\r\n    web: () => import('./web').then((m) => new m.NativeSettingsWeb()),\r\n});\r\nexport * from './definitions';\r\nexport { NativeSettings };\r\n//# sourceMappingURL=index.js.map","import React, { memo } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useScrolledState from '../../../hooks/useScrolledState';\n\nimport Button from '../../ui/Button';\nimport ModalHeader from '../../ui/ModalHeader';\n\nimport styles from '../Settings.module.scss';\n\nimport privateKeyImg from '../../../assets/settings/settings_private-key.svg';\nimport secretWordsImg from '../../../assets/settings/settings_secret-words.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInsideModal?: boolean;\n  isMultichainAccount: boolean;\n  hasMnemonicWallet?: boolean;\n  onBackClick: () => void;\n  onOpenSecretWordsSafetyRules: () => void;\n  onOpenPrivateKeySafetyRules: () => void;\n  openSettingsSlide: () => void;\n}\n\nfunction Backup({\n  isActive,\n  isInsideModal,\n  isMultichainAccount,\n  hasMnemonicWallet,\n  onBackClick,\n  onOpenSecretWordsSafetyRules,\n  onOpenPrivateKeySafetyRules,\n  openSettingsSlide,\n}: OwnProps) {\n  const lang = useLang();\n  useHistoryBack({\n    isActive,\n    onBack: onBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          onBackButtonClick={openSettingsSlide}\n          className={styles.modalHeader}\n          withNotch={isScrolled}\n          title={lang('$back_up_security')}\n        />\n      ) : (\n        <div className={styles.header}>\n          <Button isSimple isText onClick={openSettingsSlide} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('$back_up_security')}</span>\n        </div>\n      )}\n\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        {hasMnemonicWallet && (\n          <>\n            <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n              <div className={buildClassName(styles.item)} onClick={onOpenSecretWordsSafetyRules}>\n                <img className={styles.menuIcon} src={secretWordsImg} alt={lang('View Secret Words')} />\n                {lang('View Secret Words')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n            {isMultichainAccount && (\n              <p className={styles.blockDescription}>\n                {lang('Can be imported to any multichain wallet supporting TON.')}\n              </p>\n            )}\n          </>\n        )}\n\n        {(isMultichainAccount || !hasMnemonicWallet) && (\n          <>\n            <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n              <div className={buildClassName(styles.item)} onClick={onOpenPrivateKeySafetyRules}>\n                <img className={styles.menuIcon} src={privateKeyImg} alt={lang('View TON Private Key')} />\n                {lang('View TON Private Key')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n            <p className={styles.blockDescription}>\n              {lang('Can be imported to non-multichain wallets for TON.')}\n            </p>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(Backup);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport InteractiveTextField from '../../ui/InteractiveTextField';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  privateKey?: string;\n  onSubmit: () => void;\n  buttonText: string;\n}\n\nfunction SecretWordsContent({\n  isActive,\n  privateKey,\n  onSubmit,\n  buttonText,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n        previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n        size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n        play={isActive}\n        nonInteractive\n        noLoop={false}\n        className={styles.modalSticker}\n      />\n      <p className={buildClassName(styles.info, styles.small)}>\n        {renderText(lang('$private_key_description'))}\n      </p>\n      <p className={styles.warning}>\n        {renderText(lang('$mnemonic_warning'))}\n      </p>\n      <InteractiveTextField\n        noExplorer\n        text={privateKey}\n        copyNotification={lang('Your private key was copied!')}\n      />\n\n      <div className={styles.buttonWrapper}>\n        <Button\n          isPrimary\n          className={styles.footerButton}\n          onClick={onSubmit}\n        >\n          {buttonText}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SecretWordsContent);\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"gDO3tqgH\",\"buttonWrapper\":\"SCRKWYe1\",\"footerButton\":\"_xKVE3tH\",\"modalSticker\":\"vnMzCftS\"};","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { callApi } from '../../../api';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useScrolledState from '../../../hooks/useScrolledState';\n\nimport PrivateKeyContent from '../../common/backup/PrivateKeyContent';\nimport Button from '../../ui/Button';\nimport ModalHeader from '../../ui/ModalHeader';\n\nimport settingsStyles from '../Settings.module.scss';\nimport styles from './Backup.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  currentAccountId: string;\n  enteredPassword?: string;\n  isBackupSlideActive?: boolean;\n  isInsideModal?: boolean;\n  onBackClick: () => void;\n  onSubmit: () => void;\n}\n\nfunction BackupPrivateKey({\n  isActive,\n  currentAccountId,\n  enteredPassword,\n  isBackupSlideActive,\n  isInsideModal,\n  onBackClick,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [privateKey, setPrivateKey] = useState<string | undefined>(undefined);\n\n  useEffect(() => {\n    async function loadPrivateKey() {\n      if (isBackupSlideActive && enteredPassword) {\n        const privateKeyResult = await callApi('fetchPrivateKey', currentAccountId, enteredPassword);\n\n        setPrivateKey(privateKeyResult);\n      } else {\n        setPrivateKey(undefined);\n      }\n    }\n    void loadPrivateKey();\n  }, [currentAccountId, enteredPassword, isBackupSlideActive]);\n\n  useHistoryBack({\n    isActive,\n    onBack: onBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={settingsStyles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Private Key')}\n          withNotch={isScrolled}\n          onBackButtonClick={onBackClick}\n          className={settingsStyles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(settingsStyles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={onBackClick} className={settingsStyles.headerBack}>\n            <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={settingsStyles.headerTitle}>{lang('Private Key')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(settingsStyles.content, styles.content)}\n        onScroll={handleContentScroll}\n      >\n        <PrivateKeyContent\n          isActive={isActive}\n          privateKey={privateKey}\n          buttonText={lang('Close')}\n          onSubmit={onSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(BackupPrivateKey);\n","import React, { memo, useState } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useScrolledState from '../../../hooks/useScrolledState';\n\nimport SafetyRulesContent from '../../common/backup/SafetyRulesContent';\nimport Button from '../../ui/Button';\nimport ModalHeader from '../../ui/ModalHeader';\n\nimport settingsStyles from '../Settings.module.scss';\nimport styles from './Backup.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  onBackClick: () => void;\n  onSubmit: () => void;\n  isInsideModal?: boolean;\n  backupType: 'key' | 'words';\n}\n\nfunction BackupSafetyRules({\n  isActive,\n  onBackClick,\n  isInsideModal,\n  onSubmit,\n  backupType,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [writedownAccepted, setWritedownAccepted] = useState(false);\n  const [openWalletAccepted, setOpenWalletAccepted] = useState(false);\n  const [canBeStolenAccepted, setCanBeStolenAccepted] = useState(false);\n\n  const handleBackClick = useLastCallback(() => {\n    setWritedownAccepted(false);\n    setOpenWalletAccepted(false);\n    setCanBeStolenAccepted(false);\n    onBackClick();\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: onBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={settingsStyles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Safety Rules')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={settingsStyles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(settingsStyles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={settingsStyles.headerBack}>\n            <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={settingsStyles.headerTitle}>{lang('Safety Rules')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(settingsStyles.content, styles.content)}\n        onScroll={handleContentScroll}\n      >\n        <SafetyRulesContent\n          isActive={isActive}\n          isFullSizeButton\n          textFirst={lang(\n            backupType === 'key'\n              ? '$safety_rules_private_key_one'\n              : '$safety_rules_one',\n          )}\n          textSecond={lang(\n            backupType === 'key'\n              ? '$safety_rules_private_key_two'\n              : '$safety_rules_two',\n          )}\n          textThird={lang(\n            backupType === 'key'\n              ? '$safety_rules_private_key_three'\n              : '$safety_rules_three',\n          )}\n          isFirstCheckboxSelected={writedownAccepted}\n          onFirstCheckboxClick={setWritedownAccepted}\n          isSecondCheckboxSelected={openWalletAccepted}\n          onSecondCheckboxClick={setOpenWalletAccepted}\n          isThirdCheckboxSelected={canBeStolenAccepted}\n          onThirdCheckboxClick={setCanBeStolenAccepted}\n          onSubmit={onSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(BackupSafetyRules);\n","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { callApi } from '../../../api';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useScrolledState from '../../../hooks/useScrolledState';\n\nimport SecretWordsContent from '../../common/backup/SecretWordsContent';\nimport Button from '../../ui/Button';\nimport ModalHeader from '../../ui/ModalHeader';\n\nimport settingsStyles from '../Settings.module.scss';\nimport styles from './Backup.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  currentAccountId: string;\n  enteredPassword?: string;\n  isInsideModal?: boolean;\n  isBackupSlideActive?: boolean;\n  onBackClick: () => void;\n  onSubmit: () => void;\n}\n\nfunction BackupSecretWords({\n  isActive,\n  currentAccountId,\n  enteredPassword,\n  isBackupSlideActive,\n  isInsideModal,\n  onBackClick,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [mnemonic, setMnemonic] = useState<string[] | undefined>(undefined);\n  const wordsCount = mnemonic?.length || 0;\n\n  useEffect(() => {\n    async function loadMnemonic() {\n      if (isBackupSlideActive && enteredPassword) {\n        const mnemonicResult = await callApi('fetchMnemonic', currentAccountId, enteredPassword);\n\n        setMnemonic(mnemonicResult);\n      } else {\n        setMnemonic(undefined);\n      }\n    }\n    void loadMnemonic();\n  }, [currentAccountId, enteredPassword, isBackupSlideActive]);\n\n  useHistoryBack({\n    isActive,\n    onBack: onBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={settingsStyles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('%1$d Secret Words', wordsCount) as string}\n          withNotch={isScrolled}\n          className={settingsStyles.modalHeader}\n          onBackButtonClick={onBackClick}\n        />\n      ) : (\n        <div className={buildClassName(settingsStyles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText className={settingsStyles.headerBack} onClick={onBackClick}>\n            <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={settingsStyles.headerTitle}>{lang('%1$d Secret Words', wordsCount) as string}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(settingsStyles.content, styles.content)}\n        onScroll={handleContentScroll}\n      >\n        <SecretWordsContent\n          isActive={isActive}\n          mnemonic={mnemonic}\n          onSubmit={onSubmit}\n          buttonText={lang('Close')}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(BackupSecretWords);\n","import { Dialog } from '@capacitor/dialog';\nimport React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport renderText from '../../../global/helpers/renderText';\nimport { selectIsNativeBiometricAuthEnabled } from '../../../global/selectors';\nimport {\n  getIsFaceIdAvailable,\n  getIsNativeBiometricAuthSupported,\n  getIsTouchIdAvailable,\n} from '../../../util/biometrics';\nimport buildClassName from '../../../util/buildClassName';\nimport { getIsTelegramBiometricsRestricted, getTelegramApp } from '../../../util/telegram';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_IOS } from '../../../util/windowEnvironment';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport Switcher from '../../ui/Switcher';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from '../Settings.module.scss';\n\nimport biometricsImg from '../../../assets/settings/settings_biometrics.svg';\nimport faceIdImg from '../../../assets/settings/settings_face-id.svg';\n\ninterface OwnProps {\n  onEnable: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isBiometricAuthEnabled: boolean;\n}\n\nfunction NativeBiometricsToggle({ isBiometricAuthEnabled, onEnable }: OwnProps & StateProps) {\n  const { disableNativeBiometrics } = getActions();\n  const isFaceId = getIsFaceIdAvailable() || (!getIsNativeBiometricAuthSupported() && IS_IOS);\n  const isTouchId = getIsTouchIdAvailable();\n\n  const lang = useLang();\n  const [isWarningModalOpen, openWarningModal, closeWarningModal] = useFlag();\n  const switcherTitle = isFaceId ? 'Face ID' : (isTouchId ? 'Touch ID' : lang('Biometric Authentication'));\n  const warningTitle = isFaceId\n    ? 'Turn Off Face ID'\n    : (isTouchId ? 'Turn Off Touch ID' : 'Turn Off Biometrics');\n  const warningDescription = isFaceId\n    ? 'Are you sure you want to disable Face ID?'\n    : (isTouchId ? 'Are you sure you want to disable Touch ID?' : 'Are you sure you want to disable biometrics?');\n\n  const icon = isFaceId ? faceIdImg : biometricsImg;\n\n  const handleConfirmDisableBiometrics = useLastCallback(() => {\n    closeWarningModal();\n    disableNativeBiometrics();\n  });\n\n  useSyncEffect(() => {\n    if (!IS_DELEGATED_BOTTOM_SHEET) return;\n\n    if (isWarningModalOpen) {\n      void Dialog.confirm({\n        title: lang(warningTitle),\n        message: lang(warningDescription),\n        okButtonTitle: lang('Yes'),\n        cancelButtonTitle: lang('Cancel'),\n      })\n        .then(({ value }) => {\n          if (value) {\n            handleConfirmDisableBiometrics();\n          }\n        })\n        .finally(closeWarningModal);\n    }\n  }, [handleConfirmDisableBiometrics, isWarningModalOpen, lang, warningDescription, warningTitle]);\n\n  const handleBiometricAuthToggle = useLastCallback(() => {\n    if (getIsTelegramBiometricsRestricted()) {\n      getTelegramApp()?.BiometricManager.openSettings();\n      return;\n    }\n\n    if (isBiometricAuthEnabled) {\n      openWarningModal();\n    } else {\n      onEnable();\n    }\n  });\n\n  function renderDisableNativeBiometricsWarning() {\n    if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    return (\n      <Modal\n        isCompact\n        isOpen={isWarningModalOpen}\n        title={lang(warningTitle)}\n        onClose={closeWarningModal}\n        dialogClassName={styles.stakingSafeDialog}\n      >\n        <p className={modalStyles.text}>\n          {renderText(lang(warningDescription))}\n        </p>\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={closeWarningModal}>{lang('Cancel')}</Button>\n          <Button onClick={handleConfirmDisableBiometrics}>{lang('Yes')}</Button>\n        </div>\n      </Modal>\n    );\n  }\n\n  return (\n    <>\n      <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n        <div className={styles.item} onClick={handleBiometricAuthToggle}>\n          <img className={styles.menuIcon} src={icon} alt=\"\" />\n          {switcherTitle}\n\n          <Switcher\n            className={styles.menuSwitcher}\n            label={switcherTitle}\n            checked={isBiometricAuthEnabled}\n          />\n        </div>\n        {renderDisableNativeBiometricsWarning()}\n      </div>\n      <p className={styles.blockDescription}>{\n        lang('To avoid entering the passcode every time, you can use biometrics.')\n      }\n      </p>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    isBiometricAuthEnabled: selectIsNativeBiometricAuthEnabled(global),\n  };\n})(NativeBiometricsToggle));\n","import { Dialog } from '@capacitor/dialog';\nimport { AndroidSettings, IOSSettings, NativeSettings } from 'capacitor-native-settings';\nimport React, {\n  memo, useEffect, useLayoutEffect, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { AutolockValueType } from '../../global/types';\nimport { SettingsState } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_BIG_SIZE_PX,\n  ANIMATED_STICKER_HUGE_SIZE_PX,\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  APP_NAME,\n  AUTO_CONFIRM_DURATION_MINUTES,\n  AUTOLOCK_OPTIONS_LIST,\n  DEFAULT_AUTOLOCK_OPTION,\n  IS_CAPACITOR,\n  PIN_LENGTH,\n} from '../../config';\nimport {\n  selectIsAllowSuspiciousActions,\n  selectIsBiometricAuthEnabled,\n  selectIsMnemonicAccount,\n  selectIsMultichainAccount,\n  selectIsNativeBiometricAuthEnabled,\n  selectIsPasswordPresent,\n} from '../../global/selectors';\nimport { getHasInMemoryPassword, getInMemoryPassword } from '../../util/authApi/inMemoryPasswordStore';\nimport { getDoesUsePinPad, getIsNativeBiometricAuthSupported } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { vibrateOnSuccess } from '../../util/haptics';\nimport isMnemonicPrivateKey from '../../util/isMnemonicPrivateKey';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { pause } from '../../util/schedulers';\nimport { getIsTelegramBiometricsRestricted } from '../../util/telegram';\nimport {\n  IS_BIOMETRIC_AUTH_SUPPORTED, IS_ELECTRON, IS_IOS, IS_IOS_APP,\n} from '../../util/windowEnvironment';\nimport { callApi } from '../../api';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePrevious from '../../hooks/usePrevious';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Collapsible from '../ui/Collapsible';\nimport CreatePasswordForm from '../ui/CreatePasswordForm';\nimport Dropdown, { type DropdownItem } from '../ui/Dropdown';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport PinPad from '../ui/PinPad';\nimport Switcher from '../ui/Switcher';\nimport Transition from '../ui/Transition';\nimport Backup from './backup/Backup';\nimport BackupPrivateKey from './backup/BackupPrivateKey';\nimport BackupSafetyRules from './backup/BackupSafetyRules';\nimport BackupSecretWords from './backup/BackupSecretWords';\nimport NativeBiometricsToggle from './biometrics/NativeBiometricsToggle';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Settings.module.scss';\n\nimport biometricsImg from '../../assets/settings/settings_biometrics.svg';\nimport backupImg from '../../assets/settings/settings_install-app.svg';\n\nexport const enum SLIDES {\n  password,\n  settings,\n  newPassword,\n  createNewPin,\n  confirmNewPin,\n  passwordChanged,\n  backup,\n  safetyRules,\n  privateKey,\n  secretWords,\n}\n\nconst SWITCH_CONFIRM_PASSCODE_PAUSE_MS = 500;\nconst CHANGE_PASSWORD_PAUSE_MS = 1500;\n\ninterface OwnProps {\n  isActive: boolean;\n  handleBackClick: NoneToVoidFunction;\n  isInsideModal?: boolean;\n  isAutoUpdateEnabled: boolean;\n  onAutoUpdateEnabledToggle: VoidFunction;\n  onSettingsClose: VoidFunction;\n}\n\ninterface StateProps {\n  isBiometricAuthEnabled: boolean;\n  isNativeBiometricAuthEnabled: boolean;\n  isPasswordNumeric?: boolean;\n  isPasswordPresent: boolean;\n  isMultichainAccount: boolean;\n  isAppLockEnabled?: boolean;\n  autolockValue?: AutolockValueType;\n  isAutoConfirmEnabled?: boolean;\n  isAllowSuspiciousActions?: boolean;\n  shouldShowBackup: boolean;\n  isLoading?: boolean;\n  currentAccountId: string;\n}\n\nconst INITIAL_CHANGE_PASSWORD_SLIDE = getDoesUsePinPad() ? SLIDES.createNewPin : SLIDES.newPassword;\n\nfunction SettingsSecurity({\n  isActive,\n  handleBackClick: navigateBackToSettings,\n  isInsideModal,\n  isBiometricAuthEnabled,\n  isNativeBiometricAuthEnabled,\n  isPasswordNumeric,\n  isPasswordPresent,\n  isMultichainAccount,\n  isAppLockEnabled,\n  autolockValue = DEFAULT_AUTOLOCK_OPTION,\n  isAutoConfirmEnabled,\n  isAllowSuspiciousActions,\n  isAutoUpdateEnabled,\n  currentAccountId,\n  onSettingsClose,\n  onAutoUpdateEnabledToggle,\n  isLoading,\n  shouldShowBackup,\n}: OwnProps & StateProps) {\n  const {\n    setIsPinAccepted,\n    clearIsPinAccepted,\n    disableNativeBiometrics,\n    enableNativeBiometrics,\n    openBiometricsTurnOffWarning,\n    openBiometricsTurnOn,\n    setSettingsState,\n    setAppLockValue,\n    setIsAutoConfirmEnabled,\n    setIsAllowSuspiciousActions,\n    setIsAuthLoading,\n    setInMemoryPassword,\n  } = getActions();\n\n  const lang = useLang();\n  const {\n    isScrolled,\n    handleScroll: handleContentScroll,\n  } = useScrolledState();\n\n  const [currentSlide, setCurrentSlide] = useState<SLIDES>(SLIDES.password);\n  const previousSlide = usePrevious(currentSlide);\n  const [nextKey, setNextKey] = useState<SLIDES | undefined>(SLIDES.settings);\n  const [passwordError, setPasswordError] = useState<string>();\n  const [password, setPassword] = useState<string>();\n  const [backupType, setBackupType] = useState<'key' | 'words' | undefined>(undefined);\n  const [hasMnemonicWallet, setHasMnemonicWallet] = useState<boolean>(false);\n\n  // For Capacitor only\n  const [pinValue, setPinValue] = useState<string>('');\n  const [confirmPinValue, setConfirmPinValue] = useState<string>('');\n\n  const clearPasswordError = useLastCallback(() => {\n    setPasswordError(undefined);\n  });\n\n  const cleanup = useLastCallback((shouldKeepCurrentPassword?: boolean) => {\n    if (!shouldKeepCurrentPassword) setPassword(undefined);\n    setPinValue('');\n    setConfirmPinValue('');\n    clearPasswordError();\n    clearIsPinAccepted();\n  });\n\n  const handleBackToSettingsClick = useLastCallback(() => {\n    navigateBackToSettings();\n    cleanup();\n  });\n\n  const openConfirmNewPinSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.confirmNewPin);\n    setNextKey(SLIDES.settings);\n  });\n\n  const openSettingsSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.settings);\n    setNextKey(undefined);\n    cleanup(true);\n  });\n\n  const openBackupPage = useLastCallback(() => {\n    if (!isMultichainAccount) {\n      openSettingsSlide();\n      return;\n    }\n\n    setCurrentSlide(SLIDES.backup);\n    setNextKey(SLIDES.safetyRules);\n  });\n\n  const openNewPasswordSlide = useLastCallback(() => {\n    setCurrentSlide(INITIAL_CHANGE_PASSWORD_SLIDE);\n    setNextKey(SLIDES.settings);\n  });\n\n  const openPasswordChangedSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.passwordChanged);\n    setNextKey(SLIDES.settings);\n  });\n\n  useLayoutEffect(() => {\n    if (password === undefined && isActive) setCurrentSlide(SLIDES.password);\n    else if (!isActive) cleanup();\n  }, [password, isActive]);\n\n  useHistoryBack({ isActive, onBack: handleBackToSettingsClick });\n\n  const handlePasswordSubmit = useLastCallback(async (enteredPassword: string) => {\n    const result = await callApi('verifyPassword', enteredPassword);\n\n    if (!result) {\n      setPasswordError('Wrong password, please try again.');\n      return;\n    }\n\n    if (getDoesUsePinPad()) {\n      setIsPinAccepted();\n      await vibrateOnSuccess(true);\n    }\n\n    openSettingsSlide();\n    setPassword(enteredPassword);\n  });\n\n  const handleNewPasswordSubmit = useLastCallback(async (enteredPassword: string) => {\n    await callApi('changePassword', password!, enteredPassword);\n    setIsAuthLoading({ isLoading: true });\n    setPassword(enteredPassword);\n    setInMemoryPassword({ password: enteredPassword });\n    if (isNativeBiometricAuthEnabled) {\n      disableNativeBiometrics();\n      enableNativeBiometrics({ password: enteredPassword });\n    }\n    if (getDoesUsePinPad()) {\n      openSettingsSlide();\n    } else {\n      openPasswordChangedSlide();\n    }\n    setIsAuthLoading({ isLoading: undefined });\n  });\n\n  const handlePinSubmit = useLastCallback(async (enteredPassword: string) => {\n    setPinValue(enteredPassword);\n    await vibrateOnSuccess(true);\n    await pause(SWITCH_CONFIRM_PASSCODE_PAUSE_MS);\n    openConfirmNewPinSlide();\n  });\n\n  const handleConfirmPinSubmit = useLastCallback(async (enteredPassword: string) => {\n    if (enteredPassword === pinValue) {\n      setPasswordError(lang('New code set successfully'));\n      await pause(CHANGE_PASSWORD_PAUSE_MS);\n      await handleNewPasswordSubmit(enteredPassword);\n    } else {\n      setPasswordError(lang('Codes dont match'));\n      await pause(CHANGE_PASSWORD_PAUSE_MS);\n      cleanup(true);\n      setCurrentSlide(SLIDES.createNewPin);\n    }\n  });\n\n  const handleChangePasswordClick = useLastCallback(() => {\n    setNextKey(INITIAL_CHANGE_PASSWORD_SLIDE);\n    openNewPasswordSlide();\n  });\n\n  const handleOpenPrivateKeySafetyRules = useLastCallback(() => {\n    setBackupType('key');\n    setCurrentSlide(SLIDES.safetyRules);\n    setNextKey(SLIDES.privateKey);\n  });\n\n  const handleOpenSecretWordsSafetyRules = useLastCallback(() => {\n    setBackupType('words');\n    setCurrentSlide(SLIDES.safetyRules);\n    setNextKey(SLIDES.secretWords);\n  });\n\n  const handleOpenBackupWallet = useLastCallback(() => {\n    if (!isMultichainAccount) {\n      if (hasMnemonicWallet) handleOpenSecretWordsSafetyRules();\n      else handleOpenPrivateKeySafetyRules();\n      return;\n    }\n\n    setCurrentSlide(SLIDES.backup);\n    // Resetting next key to undefined unmounts and destroys components with mnemonic and private key\n    setNextKey(undefined);\n  });\n\n  const handleOpenPrivateKey = useLastCallback(() => {\n    setCurrentSlide(SLIDES.privateKey);\n    setNextKey(SLIDES.backup);\n  });\n\n  const handleOpenSecretWords = useLastCallback(() => {\n    setCurrentSlide(SLIDES.secretWords);\n    setNextKey(SLIDES.backup);\n  });\n\n  const handleAppLockToggle = useLastCallback(() => {\n    setAppLockValue({ value: autolockValue, isEnabled: !isAppLockEnabled });\n  });\n\n  const handleAutolockChange = useLastCallback((value: AutolockValueType) => {\n    setAppLockValue({ value, isEnabled: true });\n  });\n\n  const handleAutoConfirmToggle = useLastCallback(() => {\n    setIsAutoConfirmEnabled({ isEnabled: !isAutoConfirmEnabled });\n  });\n\n  const handleAllowSuspiciousActionsToggle = useLastCallback(() => {\n    setIsAllowSuspiciousActions({ isEnabled: !isAllowSuspiciousActions });\n  });\n\n  // Biometrics\n  const handleBiometricAuthToggle = useLastCallback(() => {\n    if (isBiometricAuthEnabled) {\n      openBiometricsTurnOffWarning();\n    } else {\n      openBiometricsTurnOn();\n    }\n  });\n  const handleNativeBiometricsTurnOnOpen = useLastCallback(async () => {\n    if (getIsNativeBiometricAuthSupported()) {\n      setSettingsState({ state: SettingsState.NativeBiometricsTurnOn });\n      return;\n    }\n\n    const warningDescription = IS_IOS\n      ? 'To use this feature, first enable Face ID in your phone settings.'\n      : 'To use this feature, first enable biometrics in your phone settings.';\n\n    const { value } = await Dialog.confirm({\n      title: lang('Warning!'),\n      message: lang(warningDescription),\n      okButtonTitle: lang('Open Settings'),\n      cancelButtonTitle: lang('Cancel'),\n    });\n    if (value) {\n      await NativeSettings.open({\n        optionAndroid: AndroidSettings.ApplicationDetails,\n        optionIOS: IOSSettings.App,\n      });\n    }\n  });\n\n  useEffect(() => {\n    if (!password) return;\n\n    void callApi('fetchMnemonic', currentAccountId, password).then((mnemonic) => {\n      setHasMnemonicWallet(Boolean(mnemonic && !isMnemonicPrivateKey(mnemonic)));\n    });\n  }, [hasMnemonicWallet, currentAccountId, password]);\n\n  // The `getIsTelegramBiometricsRestricted` case is required to display a toggle switch.\n  // When activated, it will show a warning to the user indicating that they need to grant\n  // the appropriate permissions for biometric authentication to function properly.\n  const shouldRenderNativeBiometrics = isPasswordPresent\n    && (getIsNativeBiometricAuthSupported() || IS_IOS_APP || getIsTelegramBiometricsRestricted());\n  const shouldRenderMinifiedPinPad = isInsideModal && getDoesUsePinPad();\n\n  const isAutoConfirmAvailable = !isBiometricAuthEnabled;\n\n  function renderSettings() {\n    return (\n      <div className={styles.slide}>\n        {isInsideModal ? (\n          <ModalHeader\n            title={lang('Security')}\n            withNotch={isScrolled}\n            onBackButtonClick={handleBackToSettingsClick}\n            className={styles.modalHeader}\n          />\n        ) : (\n          <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n            <Button isSimple isText onClick={handleBackToSettingsClick} className={styles.headerBack}>\n              <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n              <span>{lang('Back')}</span>\n            </Button>\n            <span className={styles.headerTitle}>{lang('Security')}</span>\n          </div>\n        )}\n        <div\n          className={buildClassName(styles.content, 'custom-scroll')}\n          onScroll={handleContentScroll}\n        >\n          {shouldShowBackup && (\n            <div className={styles.settingsBlock}>\n              <div className={buildClassName(styles.item)} onClick={handleOpenBackupWallet}>\n                <img className={styles.menuIcon} src={backupImg} alt={lang('$back_up_security')} />\n                {lang('$back_up_security')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n\n          {shouldRenderNativeBiometrics && (\n            <NativeBiometricsToggle\n              onEnable={handleNativeBiometricsTurnOnOpen}\n            />\n          )}\n          {isPasswordPresent && IS_BIOMETRIC_AUTH_SUPPORTED && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <div className={styles.item} onClick={handleBiometricAuthToggle}>\n                  <img className={styles.menuIcon} src={biometricsImg} alt={lang('Biometric Authentication')} />\n                  {lang('Biometric Authentication')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Biometric Authentication')}\n                    checked={isBiometricAuthEnabled}\n                  />\n                </div>\n              </div>\n              <p className={styles.blockDescription}>{\n                lang('To avoid entering the passcode every time, you can use biometrics.')\n              }\n              </p>\n            </>\n          )}\n\n          {!(isBiometricAuthEnabled && !isNativeBiometricAuthEnabled) && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <Button\n                  className={styles.changePasswordButton}\n                  isSimple\n                  onClick={handleChangePasswordClick}\n                >\n                  {isPasswordNumeric ? lang('Change Passcode') : lang('Change Password')}\n                </Button>\n              </div>\n              <p className={styles.blockDescription}>{lang('The passcode will be changed for all your wallets.')}</p>\n            </>\n          )}\n\n          {isPasswordPresent && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <div className={buildClassName(styles.item, styles.itemSmall)} onClick={handleAppLockToggle}>\n                  {lang('App Lock')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Allow App Lock')}\n                    checked={isAppLockEnabled}\n                  />\n                </div>\n                <Collapsible isShown={!!isAppLockEnabled}>\n                  <Dropdown\n                    label={lang('Auto-Lock')}\n                    items={AUTOLOCK_OPTIONS_LIST as unknown as DropdownItem<AutolockValueType>[]}\n                    selectedValue={autolockValue}\n                    theme=\"light\"\n                    shouldTranslateOptions\n                    className={buildClassName(styles.item, styles.item_small, styles.itemAutoLock)}\n                    onChange={handleAutolockChange}\n                  />\n                </Collapsible>\n              </div>\n              <p className={styles.blockDescription}>{lang('$app_lock_description', { app_name: APP_NAME })}</p>\n            </>\n          )}\n\n          {isPasswordPresent && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <div\n                  className={buildClassName(\n                    styles.item,\n                    styles.itemSmall,\n                    !isAutoConfirmAvailable && styles.itemDisabled,\n                  )}\n                  onClick={isAutoConfirmAvailable ? handleAutoConfirmToggle : undefined}\n                >\n                  {isPasswordNumeric ? lang('Remember Passcode') : lang('Remember Password')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={isPasswordNumeric ? lang('Remember Passcode') : lang('Remember Password')}\n                    checked={isAutoConfirmAvailable && isAutoConfirmEnabled}\n                  />\n                </div>\n              </div>\n              <p className={styles.blockDescription}>\n                {\n                  lang(\n                    'App will not ask for signature for %1$d minutes after last entry.',\n                    AUTO_CONFIRM_DURATION_MINUTES,\n                  )\n                }\n                {!isAutoConfirmAvailable && ` ${lang('Not available with biometrics.')}`}\n              </p>\n            </>\n          )}\n\n          {IS_ELECTRON && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <div className={buildClassName(styles.item, styles.item_small)} onClick={onAutoUpdateEnabledToggle}>\n                  {lang('Auto-Updates')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Auto-Updates')}\n                    checked={isAutoUpdateEnabled}\n                  />\n                </div>\n              </div>\n              <p className={styles.blockDescription}>\n                {lang('Turn this off so you can manually download updates and verify signatures.')}\n              </p>\n            </>\n          )}\n\n          <>\n            <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n              <div\n                className={buildClassName(styles.item, styles.itemSmall)}\n                onClick={handleAllowSuspiciousActionsToggle}\n              >\n                {lang('Allow Suspicious Actions')}\n\n                <Switcher\n                  className={styles.menuSwitcher}\n                  label={lang('Allow Suspicious Actions')}\n                  checked={isAllowSuspiciousActions}\n                />\n              </div>\n            </div>\n            <p className={styles.blockDescription}>\n              {lang('$allow_suspicious_actions_description')}\n            </p>\n          </>\n        </div>\n      </div>\n    );\n  }\n\n  function renderContent(isSlideActive: boolean, isFrom: boolean, currentKey: SLIDES) {\n    switch (currentKey) {\n      case SLIDES.settings:\n        return renderSettings();\n      case SLIDES.password:\n        if (getHasInMemoryPassword()) {\n          setCurrentSlide(SLIDES.settings);\n          void getInMemoryPassword().then((memoizedPassword) => setPassword(memoizedPassword));\n\n          return undefined;\n        }\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                title={isPasswordNumeric ? lang('Confirm Passcode') : lang('Confirm Password')}\n                onBackButtonClick={handleBackToSettingsClick}\n                className={styles.modalHeader}\n              />\n            ) : (\n              <div className={styles.header}>\n                <Button isSimple isText onClick={handleBackToSettingsClick} className={styles.headerBack}>\n                  <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n                  <span>{lang('Back')}</span>\n                </Button>\n                <span className={styles.headerTitle}>{lang('Enter Password')}</span>\n              </div>\n            )}\n            <PasswordForm\n              isActive={isSlideActive && isActive}\n              error={passwordError}\n              containerClassName={IS_CAPACITOR ? styles.passwordFormContent : styles.passwordFormContentInModal}\n              forceBiometricsInMain={!isInsideModal}\n              placeholder={lang('Enter your current password')}\n              submitLabel={lang('Continue')}\n              onCancel={handleBackToSettingsClick}\n              onSubmit={handlePasswordSubmit}\n              onUpdate={clearPasswordError}\n            />\n          </>\n        );\n      case SLIDES.newPassword:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                title={lang('Change Password')}\n                onBackButtonClick={openSettingsSlide}\n                className={styles.modalHeader}\n              />\n            ) : (\n              <div className={styles.header}>\n                <Button isSimple isText onClick={openSettingsSlide} className={styles.headerBack}>\n                  <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n                  <span>{lang('Back')}</span>\n                </Button>\n                <span className={styles.headerTitle}>{lang('Change Password')}</span>\n              </div>\n            )}\n            <div className={buildClassName(\n              modalStyles.transitionContent,\n              styles.content,\n              isInsideModal && styles.contentInModal,\n            )}\n            >\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n                previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n                play={isSlideActive}\n                size={ANIMATED_STICKER_BIG_SIZE_PX}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n              <CreatePasswordForm\n                isActive={isSlideActive}\n                isLoading={isLoading}\n                onSubmit={handleNewPasswordSubmit}\n                onCancel={openSettingsSlide}\n                formId=\"auth-create-password\"\n              />\n            </div>\n          </>\n        );\n      case SLIDES.createNewPin:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                onBackButtonClick={openSettingsSlide}\n                className={styles.modalHeader}\n                title={shouldRenderMinifiedPinPad && lang('Change Passcode')}\n              />\n            ) : (\n              <div className={styles.header}>\n                <Button isSimple isText onClick={openSettingsSlide} className={styles.headerBack}>\n                  <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n                  <span>{lang('Back')}</span>\n                </Button>\n              </div>\n            )}\n\n            <div\n              className={buildClassName(styles.pinPadHeader, shouldRenderMinifiedPinPad && styles.pinPadHeaderMinified)}\n            >\n              <AnimatedIconWithPreview\n                play={isActive}\n                tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n                previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n                noLoop={false}\n                size={shouldRenderMinifiedPinPad ? ANIMATED_STICKER_SMALL_SIZE_PX : ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n              />\n              {!shouldRenderMinifiedPinPad && <div className={styles.pinPadTitle}>{lang('Change Passcode')}</div>}\n            </div>\n            <PinPad\n              isActive={isActive}\n              title={lang('Enter your new code')}\n              length={PIN_LENGTH}\n              value={pinValue}\n              onChange={setPinValue}\n              onSubmit={handlePinSubmit}\n              isMinified={shouldRenderMinifiedPinPad}\n            />\n          </>\n        );\n      case SLIDES.confirmNewPin:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                onBackButtonClick={openSettingsSlide}\n                className={styles.modalHeader}\n                title={shouldRenderMinifiedPinPad && (\n                  passwordError && pinValue === confirmPinValue\n                    ? lang('Passcode Changed!')\n                    : lang('Change Passcode')\n                )}\n              />\n            ) : (\n              <div className={styles.header}>\n                <Button isSimple isText onClick={openSettingsSlide} className={styles.headerBack}>\n                  <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n                  <span>{lang('Back')}</span>\n                </Button>\n              </div>\n            )}\n\n            <div\n              className={buildClassName(styles.pinPadHeader, shouldRenderMinifiedPinPad && styles.pinPadHeaderMinified)}\n            >\n              <AnimatedIconWithPreview\n                play={isActive}\n                tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n                previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n                noLoop={false}\n                size={shouldRenderMinifiedPinPad ? ANIMATED_STICKER_SMALL_SIZE_PX : ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n              />\n              {\n                !shouldRenderMinifiedPinPad && (\n                  <div className={styles.pinPadTitle}>\n                    {\n                      passwordError && pinValue === confirmPinValue\n                        ? lang('Passcode Changed!')\n                        : lang('Change Passcode')\n                    }\n                  </div>\n                )\n              }\n            </div>\n\n            <PinPad\n              isActive={isActive}\n              title={!passwordError ? lang('Re-enter your new code') : passwordError}\n              type={passwordError ? (pinValue === confirmPinValue ? 'success' : 'error') : undefined}\n              length={PIN_LENGTH}\n              value={confirmPinValue}\n              onChange={setConfirmPinValue}\n              onSubmit={handleConfirmPinSubmit}\n              isMinified={shouldRenderMinifiedPinPad}\n            />\n          </>\n        );\n      case SLIDES.passwordChanged:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                title={lang('Password Changed!')}\n                className={styles.modalHeader}\n              />\n            ) : (\n              <div className={buildClassName(styles.header, styles.onlyTextHeader)}>\n                <span className={styles.headerTitle}>{lang('Password Changed!')}</span>\n              </div>\n            )}\n            <div className={styles.content}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.yeee}\n                previewUrl={ANIMATED_STICKERS_PATHS.yeeePreview}\n                play={isActive}\n                size={ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n                noLoop={false}\n                className={buildClassName(styles.sticker, styles.stickerHuge)}\n              />\n\n              <div className={modalStyles.buttons}>\n                <Button isPrimary onClick={openSettingsSlide} className={modalStyles.customSubmitButton}>\n                  {lang('Done')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n      case SLIDES.backup:\n        return (\n          <Backup\n            isActive={isActive && isSlideActive}\n            isMultichainAccount={isMultichainAccount}\n            openSettingsSlide={openSettingsSlide}\n            isInsideModal={isInsideModal}\n            onOpenPrivateKeySafetyRules={handleOpenPrivateKeySafetyRules}\n            onOpenSecretWordsSafetyRules={handleOpenSecretWordsSafetyRules}\n            onBackClick={handleBackToSettingsClick}\n            hasMnemonicWallet={hasMnemonicWallet}\n          />\n        );\n      case SLIDES.safetyRules:\n        return (\n          <BackupSafetyRules\n            isActive={isActive && isSlideActive}\n            isInsideModal={isInsideModal}\n            backupType={backupType!}\n            onBackClick={openBackupPage}\n            onSubmit={\n              backupType === 'key'\n                ? handleOpenPrivateKey\n                : handleOpenSecretWords\n            }\n          />\n        );\n      case SLIDES.secretWords:\n        return (\n          <BackupSecretWords\n            isActive={isActive && isSlideActive}\n            isBackupSlideActive={currentKey === SLIDES.secretWords || currentKey === SLIDES.safetyRules}\n            isInsideModal={isInsideModal}\n            enteredPassword={password}\n            currentAccountId={currentAccountId}\n            onBackClick={openBackupPage}\n            onSubmit={onSettingsClose}\n          />\n        );\n      case SLIDES.privateKey:\n        return (\n          <BackupPrivateKey\n            isActive={isActive && isSlideActive}\n            isBackupSlideActive={currentKey === SLIDES.privateKey || currentKey === SLIDES.safetyRules}\n            isInsideModal={isInsideModal}\n            enteredPassword={password}\n            currentAccountId={currentAccountId}\n            onBackClick={openBackupPage}\n            onSubmit={onSettingsClose}\n          />\n        );\n    }\n  }\n\n  return (\n    <Transition\n      direction={previousSlide === SLIDES.password && currentSlide === SLIDES.settings ? 1 : 'auto'}\n      name={resolveSlideTransitionName()}\n      className={buildClassName(modalStyles.transition, 'custom-scroll')}\n      slideClassName={buildClassName(styles.slide, isInsideModal && modalStyles.transitionSlide)}\n      activeKey={currentSlide}\n      nextKey={nextKey}\n      shouldCleanup\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    isPasswordNumeric, autolockValue, isAppLockEnabled, isAutoConfirmEnabled,\n  } = global.settings;\n\n  const isBiometricAuthEnabled = selectIsBiometricAuthEnabled(global);\n  const isNativeBiometricAuthEnabled = selectIsNativeBiometricAuthEnabled(global);\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const isAllowSuspiciousActions = selectIsAllowSuspiciousActions(global, global.currentAccountId!);\n  const isMultichainAccount = selectIsMultichainAccount(global, global.currentAccountId!);\n  const isMnemonicAccount = selectIsMnemonicAccount(global);\n\n  return {\n    isBiometricAuthEnabled,\n    isNativeBiometricAuthEnabled,\n    isMultichainAccount,\n    isPasswordNumeric,\n    isPasswordPresent,\n    isAppLockEnabled,\n    autolockValue,\n    isAutoConfirmEnabled,\n    isAllowSuspiciousActions,\n    shouldShowBackup: isMnemonicAccount,\n    isLoading: global.auth.isLoading,\n    currentAccountId: global.currentAccountId!,\n  };\n})(SettingsSecurity));\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { UserSwapToken, UserToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport TokenSelector from '../common/TokenSelector';\nimport Button from '../ui/Button';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInsideModal?: boolean;\n  handleBackClick: NoneToVoidFunction;\n}\n\nfunction SettingsTokenList({\n  isActive,\n  isInsideModal,\n  handleBackClick,\n}: OwnProps) {\n  const { addToken } = getActions();\n\n  const lang = useLang();\n\n  const handleTokenSelect = useLastCallback((token: UserToken | UserSwapToken) => {\n    addToken({ token: token as UserToken });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  function renderHeader() {\n    return (\n      <div className={buildClassName(styles.header, isInsideModal && styles.headerInsideModal)}>\n        <Button\n          isSimple\n          isText\n          className={buildClassName(styles.headerBack, isInsideModal && styles.isInsideModal)}\n          onClick={handleBackClick}\n        >\n          <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n          <span>{lang('Back')}</span>\n        </Button>\n        <span className={styles.headerTitle}>{lang('Select Token')}</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.slide, styles.withTopSpace)}>\n      <TokenSelector\n        isActive={isActive}\n        shouldHideMyTokens\n        shouldHideNotSupportedTokens\n        header={renderHeader()}\n        onTokenSelect={handleTokenSelect}\n        onBack={handleBackClick}\n        onClose={handleBackClick}\n      />\n    </div>\n  );\n}\n\nexport default memo(SettingsTokenList);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiTonWalletVersion } from '../../api/chains/ton/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\nexport interface Wallet {\n  address: string;\n  version: ApiTonWalletVersion;\n  totalBalance: string;\n  tokens: string[];\n}\n\ninterface OwnProps {\n  isActive?: boolean;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n  wallets?: Wallet[];\n  currentVersion?: ApiTonWalletVersion;\n}\n\nfunction SettingsWalletVersion({\n  isActive,\n  handleBackClick,\n  isInsideModal,\n  currentVersion,\n  wallets,\n}: OwnProps) {\n  const {\n    closeSettings,\n    importAccountByVersion,\n  } = getActions();\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const handleAddWallet = useLastCallback((version: ApiTonWalletVersion) => {\n    closeSettings();\n    importAccountByVersion({ version });\n  });\n\n  function renderWallets() {\n    return wallets?.map((v) => {\n      return (\n        <div\n          key={v.address}\n          className={buildClassName(styles.item, styles.item_wallet_version)}\n          onClick={() => handleAddWallet(v.version)}\n        >\n          <div className={styles.walletVersionInfo}>\n            <span className={styles.walletVersionTitle}>{v.version}</span>\n            <span className={styles.walletVersionAddress}>{shortenAddress(v.address)}</span>\n          </div>\n          <div className={styles.walletVersionInfoRight}>\n            <span className={styles.walletVersionTokens}>\n              {v.tokens.join(', ')}\n            </span>\n            <span className={styles.walletVersionAmount}>\n              &thinsp;{v.totalBalance}\n            </span>\n          </div>\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      );\n    });\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Wallet Versions')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Wallet Versions')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        <div className={styles.blockWalletVersionText}>\n          <span>{lang('$current_wallet_version', { version: <strong>{currentVersion}</strong> })}</span>\n          <span>{lang('You have tokens on other versions of your wallet. You can import them from here.')}</span>\n        </div>\n        <div className={styles.block}>\n          {renderWallets()}\n        </div>\n        <div className={styles.blockWalletVersionReadMore}>\n          {lang('$read_more_about_wallet_version', {\n            ton_link: (\n              <a href=\"https://docs.ton.org/participate/wallets/contracts\" target=\"_blank\" rel=\"noreferrer\">\n                ton.org\n              </a>\n            ),\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsWalletVersion);\n","import React, { memo, useEffect, useMemo, useRef, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTonWalletVersion } from '../../api/chains/ton/types';\nimport type { ApiDapp, ApiWalletWithVersionInfo } from '../../api/types';\nimport type { Account, GlobalState, UserToken } from '../../global/types';\nimport type { LedgerWalletInfo } from '../../util/ledger/types';\nimport type { Wallet } from './SettingsWalletVersion';\nimport { SettingsState } from '../../global/types';\n\nimport {\n  APP_ENV_MARKER,\n  APP_NAME,\n  APP_VERSION,\n  IS_CAPACITOR,\n  IS_CORE_WALLET,\n  IS_EXTENSION,\n  LANG_LIST,\n  MTW_CARDS_WEBSITE,\n  MTW_TIPS_CHANNEL_NAME,\n  PROXY_HOSTS,\n  SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY,\n  SUPPORT_USERNAME,\n  TELEGRAM_WEB_URL,\n  TONCOIN,\n} from '../../config';\nimport { getHelpCenterUrl } from '../../global/helpers/getHelpCenterUrl';\nimport {\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsCurrentAccountViewMode,\n  selectIsPasswordPresent,\n  selectNetworkAccounts,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { openUrl } from '../../util/openUrl';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { captureControlledSwipe } from '../../util/swipeController';\nimport useTelegramMiniAppSwipeToClose from '../../util/telegram/hooks/useTelegramMiniAppSwipeToClose';\nimport {\n  IS_BIOMETRIC_AUTH_SUPPORTED,\n  IS_DAPP_SUPPORTED,\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_ELECTRON,\n  IS_LEDGER_SUPPORTED,\n  IS_TOUCH_ENV,\n  IS_WEB,\n} from '../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useFlag from '../../hooks/useFlag';\nimport useHideBottomBar from '../../hooks/useHideBottomBar';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport usePrevious2 from '../../hooks/usePrevious2';\nimport useScrolledState from '../../hooks/useScrolledState';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport { useStateRef } from '../../hooks/useStateRef';\n\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport LedgerSelectWallets from '../ledger/LedgerSelectWallets';\nimport LogOutModal from '../main/modals/LogOutModal';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Switcher from '../ui/Switcher';\nimport Transition from '../ui/Transition';\nimport Biometrics from './biometrics/Biometrics';\nimport SettingsNativeBiometricsTurnOn from './biometrics/NativeBiometricsTurnOn';\nimport SettingsAbout from './SettingsAbout';\nimport SettingsAppearance from './SettingsAppearance';\nimport SettingsAssets from './SettingsAssets';\nimport SettingsDapps from './SettingsDapps';\nimport SettingsDeveloperOptions from './SettingsDeveloperOptions';\nimport SettingsDisclaimer from './SettingsDisclaimer';\nimport SettingsHiddenNfts from './SettingsHiddenNfts';\nimport SettingsLanguage from './SettingsLanguage';\nimport SettingsPushNotifications from './SettingsPushNotifications';\nimport SettingsSecurity from './SettingsSecurity';\nimport SettingsTokenList from './SettingsTokenList';\nimport SettingsWalletVersion from './SettingsWalletVersion';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Settings.module.scss';\n\nimport aboutImg from '../../assets/settings/settings_about.svg';\nimport appearanceImg from '../../assets/settings/settings_appearance.svg';\nimport assetsActivityImg from '../../assets/settings/settings_assets-activity.svg';\nimport connectedDappsImg from '../../assets/settings/settings_connected-dapps.svg';\nimport disclaimerImg from '../../assets/settings/settings_disclaimer.svg';\nimport exitImg from '../../assets/settings/settings_exit.svg';\nimport helpcenterImg from '../../assets/settings/settings_helpcenter.svg';\nimport installAppImg from '../../assets/settings/settings_install-app.svg';\nimport installDesktopImg from '../../assets/settings/settings_install-desktop.svg';\nimport installMobileImg from '../../assets/settings/settings_install-mobile.svg';\nimport languageImg from '../../assets/settings/settings_language.svg';\nimport ledgerImg from '../../assets/settings/settings_ledger.svg';\nimport mtwCardsImg from '../../assets/settings/settings_mtw-cards.svg';\nimport upgradeImg from '../../assets/settings/settings_mytonwallet.svg';\nimport notifications from '../../assets/settings/settings_notifications.svg';\nimport securityImg from '../../assets/settings/settings_security.svg';\nimport supportImg from '../../assets/settings/settings_support.svg';\nimport telegramImg from '../../assets/settings/settings_telegram-menu.svg';\nimport tipsImg from '../../assets/settings/settings_tips.svg';\nimport tonLinksImg from '../../assets/settings/settings_ton-links.svg';\nimport tonMagicImg from '../../assets/settings/settings_ton-magic.svg';\nimport tonProxyImg from '../../assets/settings/settings_ton-proxy.svg';\nimport walletVersionImg from '../../assets/settings/settings_wallet-version.svg';\n\ntype OwnProps = {\n  isActive: boolean;\n  isInsideModal?: boolean;\n};\n\ntype StateProps = {\n  settings: GlobalState['settings'];\n  dapps: ApiDapp[];\n  isOpen?: boolean;\n  tokens?: UserToken[];\n  isPasswordPresent?: boolean;\n  currentVersion?: ApiTonWalletVersion;\n  versions?: ApiWalletWithVersionInfo[];\n  isCopyStorageEnabled?: boolean;\n  supportAccountsCount?: number;\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  arePushNotificationsAvailable?: boolean;\n  isNftBuyingDisabled?: boolean;\n  isViewMode: boolean;\n};\n\nconst AMOUNT_OF_CLICKS_FOR_DEVELOPERS_MODE = 5;\nconst SUPPORT_ACCOUNTS_COUNT_DEFAULT = 1;\n\nfunction Settings({\n  settings: {\n    state,\n    theme,\n    animationLevel,\n    isTestnet,\n    langCode,\n    isTonProxyEnabled,\n    isTonMagicEnabled,\n    isDeeplinkHookEnabled,\n    baseCurrency,\n  },\n  dapps,\n  isActive,\n  isOpen = false,\n  tokens,\n  isInsideModal,\n  isPasswordPresent,\n  currentVersion,\n  versions,\n  isCopyStorageEnabled,\n  supportAccountsCount = SUPPORT_ACCOUNTS_COUNT_DEFAULT,\n  accounts,\n  hardwareWallets,\n  arePushNotificationsAvailable,\n  isNftBuyingDisabled,\n  isViewMode,\n}: OwnProps & StateProps) {\n  const {\n    setSettingsState,\n    openSettingsHardwareWallet,\n    closeSettings,\n    toggleDeeplinkHook,\n    toggleTonProxy,\n    toggleTonMagic,\n    getDapps,\n    clearIsPinAccepted,\n    afterSelectHardwareWallets,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const transitionRef = useRef<HTMLDivElement>();\n  const { renderingKey } = useModalTransitionKeys(state, isOpen);\n  const { disableSwipeToClose, enableSwipeToClose } = useTelegramMiniAppSwipeToClose(isOpen);\n  const [clicksAmount, setClicksAmount] = useState<number>(isTestnet ? AMOUNT_OF_CLICKS_FOR_DEVELOPERS_MODE : 0);\n  const prevRenderingKeyRef = useStateRef(usePrevious2(renderingKey));\n\n  const [isDeveloperModalOpen, openDeveloperModal, closeDeveloperModal] = useFlag();\n  const [withAllWalletVersions, markWithAllWalletVersions] = useFlag();\n\n  const [isLogOutModalOpened, openLogOutModal, closeLogOutModal] = useFlag();\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n  const isInitialScreen = renderingKey === SettingsState.Initial;\n\n  const activeLang = useMemo(() => LANG_LIST.find((l) => l.langCode === langCode), [langCode]);\n\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n\n  const tonToken = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens]);\n\n  const wallets = useMemo(() => {\n    return versions\n      ?.filter((v) => v.lastTxId || v.version === 'W5' || withAllWalletVersions)\n      ?.map((v) => {\n        const tonBalance = formatCurrency(toDecimal(v.balance), tonToken?.symbol ?? '');\n        const balanceInCurrency = formatCurrency(\n          toBig(v.balance).mul(tonToken?.price ?? 0).round(tonToken?.decimals),\n          shortBaseSymbol,\n        );\n\n        const accountTokens = [tonBalance];\n\n        return {\n          address: v.address,\n          version: v.version,\n          totalBalance: balanceInCurrency,\n          tokens: accountTokens,\n        } satisfies Wallet;\n      }) ?? [];\n  }, [shortBaseSymbol, tonToken, versions, withAllWalletVersions]);\n\n  const {\n    shouldRender: isTelegramLinkRendered,\n    ref: telegramLinkRef,\n  } = useShowTransition({\n    isOpen: isTonMagicEnabled,\n    withShouldRender: true,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const handleSlideAnimationStop = useLastCallback(() => {\n    if (prevRenderingKeyRef.current === SettingsState.NativeBiometricsTurnOn) {\n      clearIsPinAccepted();\n    }\n  });\n\n  const handleCloseSettings = useLastCallback(() => {\n    closeSettings(undefined, { forceOnHeavyAnimation: true });\n    setSettingsState({ state: SettingsState.Initial });\n  });\n\n  useHistoryBack({\n    isActive: isActive && isInitialScreen,\n    onBack: handleCloseSettings,\n    shouldIgnoreForTelegram: isInsideModal,\n  });\n\n  useHideBottomBar(isOpen && !isInitialScreen);\n\n  const handlCloseDeveloperModal = useLastCallback(() => {\n    closeDeveloperModal();\n\n    if (IS_CORE_WALLET) {\n      handleCloseSettings();\n    }\n  });\n\n  const handleConnectedDappsOpen = useLastCallback(() => {\n    getDapps();\n    setSettingsState({ state: SettingsState.Dapps });\n  });\n\n  function handleAppearanceOpen() {\n    setSettingsState({ state: SettingsState.Appearance });\n  }\n\n  function handlePushNotificationsOpen() {\n    setSettingsState({ state: SettingsState.PushNotifications });\n  }\n\n  function handleSecurityOpen() {\n    setSettingsState({ state: SettingsState.Security });\n  }\n\n  function handleAssetsOpen() {\n    setSettingsState({ state: SettingsState.Assets });\n  }\n\n  function handleLanguageOpen() {\n    setSettingsState({ state: SettingsState.Language });\n  }\n\n  function handleAboutOpen() {\n    setSettingsState({ state: SettingsState.About });\n  }\n\n  function handleDisclaimerOpen() {\n    setSettingsState({ state: SettingsState.Disclaimer });\n  }\n\n  const handleBackClick = useLastCallback(() => {\n    switch (renderingKey as SettingsState) {\n      case SettingsState.HiddenNfts:\n      case SettingsState.SelectTokenList:\n        setSettingsState({ state: SettingsState.Assets });\n        break;\n\n      default:\n        setSettingsState({ state: SettingsState.Initial });\n    }\n  });\n\n  const handleBackClickToAssets = useLastCallback(() => {\n    setSettingsState({ state: SettingsState.Assets });\n  });\n\n  const handleOpenWalletVersion = useLastCallback(() => {\n    setSettingsState({ state: SettingsState.WalletVersion });\n  });\n\n  const handleDeeplinkHookToggle = useLastCallback(() => {\n    toggleDeeplinkHook({ isEnabled: !isDeeplinkHookEnabled });\n  });\n\n  const handleTonProxyToggle = useLastCallback(() => {\n    toggleTonProxy({ isEnabled: !isTonProxyEnabled });\n  });\n\n  const handleTonMagicToggle = useLastCallback(() => {\n    toggleTonMagic({ isEnabled: !isTonMagicEnabled });\n  });\n\n  function handleClickInstallApp() {\n    void openUrl('https://mytonwallet.io/get', { isExternal: true });\n  }\n\n  function handleClickInstallOnDesktop() {\n    void openUrl('https://mytonwallet.io/get/desktop', { isExternal: true });\n  }\n\n  function handleClickInstallOnMobile() {\n    void openUrl('https://mytonwallet.io/get/mobile', { isExternal: true });\n  }\n\n  const handleAddLedgerWallet = useLastCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: [hardwareWallets![0].index] });\n    handleCloseSettings();\n  });\n\n  const handleLedgerConnected = useLastCallback((isSingleWallet: boolean) => {\n    if (isSingleWallet) {\n      handleAddLedgerWallet();\n      return;\n    }\n    setSettingsState({ state: SettingsState.LedgerSelectWallets });\n  });\n\n  const [isTrayIconEnabled, setIsTrayIconEnabled] = useState(false);\n  useEffect(() => {\n    void window.electron?.getIsTrayIconEnabled().then(setIsTrayIconEnabled);\n  }, []);\n\n  const handleTrayIconEnabledToggle = useLastCallback(() => {\n    setIsTrayIconEnabled(!isTrayIconEnabled);\n    void window.electron?.setIsTrayIconEnabled(!isTrayIconEnabled);\n  });\n\n  const [isAutoUpdateEnabled, setIsAutoUpdateEnabled] = useState(false);\n  useEffect(() => {\n    void window.electron?.getIsAutoUpdateEnabled().then(setIsAutoUpdateEnabled);\n  }, []);\n\n  const handleAutoUpdateEnabledToggle = useLastCallback(() => {\n    setIsAutoUpdateEnabled(!isAutoUpdateEnabled);\n    void window.electron?.setIsAutoUpdateEnabled(!isAutoUpdateEnabled);\n  });\n\n  const handleBackOrCloseAction = useLastCallback(() => {\n    if (isInitialScreen) {\n      if (isInsideModal) handleCloseSettings();\n    } else {\n      handleBackClick();\n    }\n  });\n\n  const handleCloseLogOutModal = useLastCallback((shouldCloseSettings: boolean) => {\n    closeLogOutModal();\n    if (shouldCloseSettings) {\n      handleCloseSettings();\n    }\n  });\n\n  function handleOpenHardwareModal() {\n    openSettingsHardwareWallet();\n  }\n\n  const handleMultipleClick = () => {\n    if (clicksAmount + 1 >= AMOUNT_OF_CLICKS_FOR_DEVELOPERS_MODE) {\n      openDeveloperModal();\n    } else {\n      setClicksAmount(clicksAmount + 1);\n    }\n  };\n\n  const handleShowAllWalletVersions = useLastCallback(() => {\n    markWithAllWalletVersions();\n    handlCloseDeveloperModal();\n    handleOpenWalletVersion();\n  });\n\n  useEffect(\n    () => captureEscKeyListener(isInsideModal ? handleBackOrCloseAction : handleBackClick),\n    [isInsideModal],\n  );\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      return undefined;\n    }\n\n    return captureControlledSwipe(transitionRef.current!, {\n      onSwipeRightStart: () => {\n        if (IS_DELEGATED_BOTTOM_SHEET) {\n          handleBackClick();\n        } else {\n          handleBackOrCloseAction();\n        }\n\n        disableSwipeToClose();\n      },\n      onCancel: () => {\n        setSettingsState({ state: prevRenderingKeyRef.current! });\n\n        enableSwipeToClose();\n      },\n    });\n  }, [disableSwipeToClose, enableSwipeToClose, prevRenderingKeyRef]);\n\n  function renderHandleDeeplinkButton() {\n    return (\n      <div className={styles.item} onClick={handleDeeplinkHookToggle}>\n        <img className={styles.menuIcon} src={tonLinksImg} alt={lang('Handle ton:// links')} />\n        {lang('Handle ton:// links')}\n\n        <Switcher\n          className={styles.menuSwitcher}\n          label={lang('Handle ton:// links')}\n          checked={isDeeplinkHookEnabled}\n        />\n      </div>\n    );\n  }\n\n  function renderSettings() {\n    return (\n      <div className={styles.slide}>\n        {isInsideModal ? (\n          <ModalHeader\n            title={lang('Settings')}\n            withNotch={isScrolled}\n            onClose={!isPortrait ? handleCloseSettings : undefined}\n            className={styles.modalHeader}\n          />\n        ) : (\n          <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n            <Button\n              isSimple\n              isText\n              onClick={handleCloseSettings}\n              className={buildClassName(styles.headerBack, isPortrait && styles.hidden)}\n            >\n              <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n              <span>{lang('Back')}</span>\n            </Button>\n            <span className={styles.headerTitle}>{lang('Settings')}</span>\n          </div>\n        )}\n\n        <div\n          className={buildClassName(styles.content, 'custom-scroll', styles.withBottomSpace)}\n          onScroll={handleContentScroll}\n        >\n          {IS_CORE_WALLET && (\n            <div className={styles.block}>\n              <div className={styles.item} onClick={handleClickInstallApp}>\n                <img className={styles.menuIcon} src={upgradeImg} alt={lang('Upgrade to MyTonWallet')} />\n                {lang('Upgrade to MyTonWallet')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n          {!IS_CORE_WALLET && IS_WEB && (\n            <div className={styles.block}>\n              <div className={styles.item} onClick={handleClickInstallApp}>\n                <img className={styles.menuIcon} src={installAppImg} alt={lang('Install App')} />\n                {lang('Install App')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n          {IS_EXTENSION && (\n            <div className={styles.block}>\n              {PROXY_HOSTS && (\n                <div className={styles.item} onClick={handleTonProxyToggle}>\n                  <img className={styles.menuIcon} src={tonProxyImg} alt={lang('TON Proxy')} />\n                  {lang('TON Proxy')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Toggle TON Proxy')}\n                    checked={isTonProxyEnabled}\n                  />\n                </div>\n              )}\n              <div className={styles.item} onClick={handleTonMagicToggle}>\n                <img className={styles.menuIcon} src={tonMagicImg} alt={lang('TON Magic')} />\n                {lang('TON Magic')}\n\n                <Switcher\n                  className={styles.menuSwitcher}\n                  label={lang('Toggle TON Magic')}\n                  checked={isTonMagicEnabled}\n                />\n              </div>\n              {isTelegramLinkRendered && (\n                <div ref={telegramLinkRef} className={styles.item} onClick={handleOpenTelegramWeb}>\n                  <img className={styles.menuIcon} src={telegramImg} alt={lang('Open Telegram Web')} />\n                  {lang('Open Telegram Web')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              )}\n              {renderHandleDeeplinkButton()}\n            </div>\n          )}\n          {IS_ELECTRON && (\n            <div className={styles.block}>\n              {renderHandleDeeplinkButton()}\n            </div>\n          )}\n\n          <div className={styles.block}>\n            <div className={styles.item} onClick={handlePushNotificationsOpen}>\n              <img\n                className={styles.menuIcon}\n                src={notifications}\n                alt={arePushNotificationsAvailable ? lang('Notifications & Sounds') : lang('Sounds')}\n              />\n              {arePushNotificationsAvailable ? lang('Notifications & Sounds') : lang('Sounds')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n            <div className={styles.item} onClick={handleAppearanceOpen}>\n              <img className={styles.menuIcon} src={appearanceImg} alt={lang('Appearance')} />\n              {lang('Appearance')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n            {!SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY && (\n              <div className={styles.item} onClick={handleAssetsOpen}>\n                <img className={styles.menuIcon} src={assetsActivityImg} alt={lang('Assets & Activity')} />\n                {lang('Assets & Activity')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            )}\n            {isPasswordPresent && (\n              <div className={styles.item} onClick={handleSecurityOpen}>\n                <img className={styles.menuIcon} src={securityImg} alt={lang('Security')} />\n                {lang('Security')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            )}\n            {IS_DAPP_SUPPORTED && !isViewMode && (\n              <div className={styles.item} onClick={handleConnectedDappsOpen}>\n                <img className={styles.menuIcon} src={connectedDappsImg} alt={lang('Connected Dapps')} />\n                {lang('Connected Dapps')}\n\n                <div className={styles.itemInfo}>\n                  {dapps.length ? dapps.length : ''}\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              </div>\n            )}\n            {!IS_CORE_WALLET && (\n              <div className={styles.item} onClick={handleLanguageOpen}>\n                <img className={styles.menuIcon} src={languageImg} alt={lang('Language')} />\n                {lang('Language')}\n                <div className={styles.itemInfo}>\n                  {activeLang?.name}\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              </div>\n            )}\n          </div>\n\n          {(!!versions?.length || IS_LEDGER_SUPPORTED) && (\n            <div className={styles.block}>\n              {!!versions?.length && (\n                <div className={styles.item} onClick={handleOpenWalletVersion}>\n                  <img className={styles.menuIcon} src={walletVersionImg} alt={lang('Wallet Versions')} />\n                  {lang('Wallet Versions')}\n\n                  <div className={styles.itemInfo}>\n                    {currentVersion}\n                    <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                  </div>\n                </div>\n              )}\n              {IS_LEDGER_SUPPORTED && (\n                <div className={styles.item} onClick={handleOpenHardwareModal}>\n                  <img className={styles.menuIcon} src={ledgerImg} alt={lang('Connect Ledger')} />\n                  {lang('Connect Ledger')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              )}\n            </div>\n          )}\n\n          {!IS_CORE_WALLET && (\n            <>\n              {!isNftBuyingDisabled && (\n                <div className={styles.block}>\n                  <a\n                    href={MTW_CARDS_WEBSITE}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className={styles.item}\n                  >\n                    <img className={styles.menuIcon} src={mtwCardsImg} alt={lang('MyTonWallet Cards NFT')} />\n                    {lang('MyTonWallet Cards NFT')}\n\n                    <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                  </a>\n                </div>\n              )}\n              <div className={styles.block}>\n                <a\n                  href={`https://t.me/${MTW_TIPS_CHANNEL_NAME[langCode] ?? MTW_TIPS_CHANNEL_NAME.en}`}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className={styles.item}\n                >\n                  <img className={styles.menuIcon} src={tipsImg} alt={lang('MyTonWallet Tips')} />\n                  {lang('MyTonWallet Tips')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </a>\n                <a\n                  href={getHelpCenterUrl(langCode, 'home')}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className={styles.item}\n                >\n                  <img className={styles.menuIcon} src={helpcenterImg} alt={lang('Help Center')} />\n                  {lang('Help Center')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </a>\n                {supportAccountsCount > 0 && (\n                  <a\n                    href={`https://t.me/${SUPPORT_USERNAME}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className={styles.item}\n                  >\n                    <img className={styles.menuIcon} src={supportImg} alt={lang('Get Support')} />\n                    {lang('Get Support')}\n\n                    <div className={styles.itemInfo}>\n                      <span className={styles.small}>@{SUPPORT_USERNAME}</span>\n                      <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                    </div>\n                  </a>\n                )}\n              </div>\n            </>\n          )}\n\n          <div className={styles.block}>\n            <div className={styles.item} onClick={handleDisclaimerOpen}>\n              <img className={styles.menuIcon} src={disclaimerImg} alt={lang('Use Responsibly')} />\n              {lang('Use Responsibly')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n          </div>\n\n          {!IS_CORE_WALLET && IS_CAPACITOR && (\n            <div className={styles.block}>\n              <div className={styles.item} onClick={handleClickInstallOnDesktop}>\n                <img className={styles.menuIcon} src={installDesktopImg} alt={lang('Install on Desktop')} />\n                {lang('Install on Desktop')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n\n          {!IS_CORE_WALLET && IS_ELECTRON && (\n            <div className={styles.block}>\n              <div className={styles.item} onClick={handleClickInstallOnMobile}>\n                <img className={styles.menuIcon} src={installMobileImg} alt={lang('Install on Mobile')} />\n                {lang('Install on Mobile')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n\n          {!IS_CORE_WALLET && (\n            <div className={styles.block}>\n              {!IS_CORE_WALLET && IS_EXTENSION && (\n                <div className={styles.item} onClick={handleClickInstallApp}>\n                  <img className={styles.menuIcon} src={installAppImg} alt={lang('Install App')} />\n                  {lang('Install App')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              )}\n              {!IS_CORE_WALLET && (\n                <div className={styles.item} onClick={handleAboutOpen}>\n                  <img className={styles.menuIcon} src={aboutImg} alt=\"\" />\n                  {lang('About %app_name%', { app_name: APP_NAME })}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              )}\n            </div>\n          )}\n\n          <div className={styles.block}>\n            <div className={buildClassName(styles.item, styles.item_red)} onClick={openLogOutModal}>\n              <img className={styles.menuIcon} src={exitImg} alt={lang('Exit')} />\n              {lang('Exit')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n          </div>\n\n          <div className={styles.version} onClick={handleMultipleClick}>\n            {APP_NAME} {APP_VERSION} {APP_ENV_MARKER}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  function renderContent(isSlideActive: boolean, isFrom: boolean, currentKey: SettingsState) {\n    switch (currentKey) {\n      case SettingsState.Initial:\n        return renderSettings();\n      case SettingsState.PushNotifications:\n        return (\n          <SettingsPushNotifications\n            isActive={isActive && isSlideActive}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case SettingsState.Appearance:\n        return (\n          <SettingsAppearance\n            isActive={isActive && isSlideActive}\n            theme={theme}\n            animationLevel={animationLevel}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n            isTrayIconEnabled={isTrayIconEnabled}\n            onTrayIconEnabledToggle={handleTrayIconEnabledToggle}\n          />\n        );\n      case SettingsState.Assets:\n        return (\n          <SettingsAssets\n            isActive={isActive && isSlideActive}\n            isInsideModal={isInsideModal}\n            onBack={handleBackClick}\n          />\n        );\n      case SettingsState.Security:\n        return (\n          <SettingsSecurity\n            isActive={isActive && isSlideActive}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n            isAutoUpdateEnabled={isAutoUpdateEnabled}\n            onAutoUpdateEnabledToggle={handleAutoUpdateEnabledToggle}\n            onSettingsClose={handleCloseSettings}\n          />\n        );\n      case SettingsState.Dapps:\n        return (\n          <SettingsDapps\n            isActive={isActive && isSlideActive}\n            dapps={dapps}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case SettingsState.Language:\n        return (\n          <SettingsLanguage\n            isActive={isActive && isSlideActive}\n            langCode={langCode}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case SettingsState.About:\n        return (\n          <SettingsAbout\n            isActive={isActive && isSlideActive}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n            theme={theme}\n          />\n        );\n      case SettingsState.Disclaimer:\n        return (\n          <SettingsDisclaimer\n            isActive={isActive && isSlideActive}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case SettingsState.NativeBiometricsTurnOn:\n        return (\n          <SettingsNativeBiometricsTurnOn\n            isActive={isActive && isSlideActive}\n            isInsideModal={isInsideModal}\n            handleBackClick={handleBackClick}\n          />\n        );\n      case SettingsState.SelectTokenList:\n        return (\n          <SettingsTokenList\n            isActive={isActive && isSlideActive}\n            isInsideModal={isInsideModal}\n            handleBackClick={handleBackClickToAssets}\n          />\n        );\n      case SettingsState.WalletVersion:\n        return (\n          <SettingsWalletVersion\n            isActive={isActive && isSlideActive}\n            currentVersion={currentVersion}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n            wallets={wallets}\n          />\n        );\n      case SettingsState.LedgerConnectHardware:\n        return (\n          <div className={styles.slide}>\n            <LedgerConnect\n              isActive={isActive && isSlideActive}\n              isStatic={!isInsideModal}\n              className={styles.nestedTransition}\n              onBackButtonClick={handleBackClick}\n              onConnected={handleLedgerConnected}\n              onClose={handleBackOrCloseAction}\n            />\n          </div>\n        );\n      case SettingsState.LedgerSelectWallets:\n        return (\n          <div className={styles.slide}>\n            <LedgerSelectWallets\n              isActive={isActive && isSlideActive}\n              isStatic={!isInsideModal}\n              accounts={accounts}\n              hardwareWallets={hardwareWallets}\n              onBackButtonClick={handleBackClick}\n              onClose={handleBackOrCloseAction}\n            />\n          </div>\n        );\n      case SettingsState.HiddenNfts:\n        return (\n          <SettingsHiddenNfts\n            isActive={isActive && isSlideActive}\n            handleBackClick={handleBackClickToAssets}\n            isInsideModal={isInsideModal}\n          />\n        );\n    }\n  }\n\n  return (\n    <div className={styles.wrapper}>\n      <Transition\n        ref={transitionRef}\n        name={resolveSlideTransitionName()}\n        className={buildClassName(isInsideModal ? modalStyles.transition : styles.transitionContainer, 'custom-scroll')}\n        activeKey={renderingKey}\n        slideClassName={buildClassName(isInsideModal && modalStyles.transitionSlide)}\n        withSwipeControl\n        onStop={getDoesUsePinPad() ? handleSlideAnimationStop : undefined}\n      >\n        {renderContent}\n      </Transition>\n      <SettingsDeveloperOptions\n        isOpen={isDeveloperModalOpen}\n        isTestnet={isTestnet}\n        isCopyStorageEnabled={isCopyStorageEnabled}\n        onShowAllWalletVersions={handleShowAllWalletVersions}\n        onClose={handlCloseDeveloperModal}\n      />\n      <LogOutModal isOpen={isLogOutModalOpened} onClose={handleCloseLogOutModal} />\n      {IS_BIOMETRIC_AUTH_SUPPORTED && <Biometrics isInsideModal={isInsideModal} />}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const accounts = selectNetworkAccounts(global);\n  const { isCopyStorageEnabled, supportAccountsCount = 1, isNftBuyingDisabled } = global.restrictions;\n\n  const { currentVersion, byId: versionsById } = global.walletVersions ?? {};\n  const versions = versionsById?.[global.currentAccountId!];\n  const { dapps = MEMO_EMPTY_ARRAY } = selectCurrentAccountState(global) || {};\n  const { hardwareWallets } = global.hardware;\n\n  return {\n    settings: global.settings,\n    dapps,\n    isOpen: global.areSettingsOpen,\n    tokens: selectCurrentAccountTokens(global),\n    isPasswordPresent,\n    currentVersion,\n    versions,\n    isCopyStorageEnabled,\n    supportAccountsCount,\n    hardwareWallets,\n    accounts,\n    isNftBuyingDisabled,\n    arePushNotificationsAvailable: global.pushNotifications.isAvailable,\n    isViewMode: selectIsCurrentAccountViewMode(global),\n  };\n})(Settings));\n\nfunction handleOpenTelegramWeb() {\n  window.open(TELEGRAM_WEB_URL, '_blank', 'noopener');\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { IS_EXTENSION } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_ELECTRON } from '../../util/windowEnvironment';\n\nimport Modal from '../ui/Modal';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  children: TeactNode;\n  isOpen?: boolean;\n  onClose: () => void;\n}\n\ninterface StateProps {\n  isMediaViewerOpen?: boolean;\n}\n\nfunction SettingsModal({\n  children, isOpen, onClose, isMediaViewerOpen,\n}: OwnProps & StateProps) {\n  const fullDialogClassName = buildClassName(\n    styles.modalDialog,\n    !(IS_ELECTRON || IS_EXTENSION) && styles.modalDialogWeb,\n  );\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen && !isMediaViewerOpen}\n      dialogClassName={fullDialogClassName}\n      contentClassName={styles.modalContent}\n      nativeBottomSheetKey=\"settings\"\n      forceFullNative\n      onClose={onClose}\n    >\n      {children}\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    isMediaViewerOpen: Boolean(global.mediaViewer.mediaId),\n  };\n})(SettingsModal));\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { SwapState, SwapType, type UserSwapToken } from '../../global/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { readClipboardContent } from '../../util/clipboard';\nimport { vibrate } from '../../util/haptics';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\nimport { getIsMobileTelegramApp, IS_CLIPBOARDS_SUPPORTED, IS_IOS } from '../../util/windowEnvironment';\nimport { callApi } from '../../api';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useFlag from '../../hooks/useFlag';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useQrScannerSupport from '../../hooks/useQrScannerSupport';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Input from '../ui/Input';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  swapType?: SwapType;\n  toAddress?: string;\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n}\n\nconst SHORT_ADDRESS_SHIFT = 14;\nconst MIN_ADDRESS_LENGTH_TO_SHORTEN = SHORT_ADDRESS_SHIFT * 2;\n\nfunction SwapBlockchain({\n  isActive,\n  swapType,\n  toAddress = '',\n  tokenIn,\n  tokenOut,\n}: OwnProps) {\n  const {\n    cancelSwap,\n    setSwapCexAddress,\n    showNotification,\n    setSwapScreen,\n    requestOpenQrScanner,\n  } = getActions();\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const toAddressRef = useRef<HTMLInputElement>();\n\n  const [shouldRenderPasteButton, setShouldRenderPasteButton] = useState(IS_CLIPBOARDS_SUPPORTED);\n  const [isAddressFocused, markAddressFocused, unmarkAddressFocused] = useFlag();\n  const [hasToAddressError, setHasToAddressError] = useState(false);\n  const [canContinue, setCanContinue] = useState(swapType !== SwapType.CrosschainFromWallet);\n\n  const isQrScannerSupported = useQrScannerSupport();\n\n  const withPasteButton = shouldRenderPasteButton && toAddress === '';\n\n  const toAddressShort = toAddress.length > MIN_ADDRESS_LENGTH_TO_SHORTEN\n    ? shortenAddress(toAddress, SHORT_ADDRESS_SHIFT) || ''\n    : toAddress;\n\n  const handleCancelClick = useLastCallback(() => {\n    setHasToAddressError(false);\n    setCanContinue(false);\n    setSwapScreen({ state: isPortrait ? SwapState.Initial : SwapState.None });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleCancelClick,\n  });\n\n  const handleAddressFocus = useLastCallback(() => {\n    const el = toAddressRef.current!;\n\n    // `selectionStart` is only updated in the next frame after `focus` event\n    requestAnimationFrame(() => {\n      const caretPosition = el.selectionStart!;\n      markAddressFocused();\n\n      // Restore caret position after input field value has been focused and expanded\n      requestAnimationFrame(() => {\n        const newCaretPosition = caretPosition <= SHORT_ADDRESS_SHIFT + 3\n          ? caretPosition\n          : Math.max(0, el.value.length - (toAddressShort.length - caretPosition));\n\n        el.setSelectionRange(newCaretPosition, newCaretPosition);\n        if (newCaretPosition > SHORT_ADDRESS_SHIFT * 2) {\n          el.scrollLeft = el.scrollWidth - el.clientWidth;\n        }\n      });\n    });\n  });\n\n  const validateToAddress = useLastCallback(async (address: string) => {\n    if (!address.length) {\n      setHasToAddressError(false);\n      setCanContinue(false);\n      return;\n    }\n\n    const response = await callApi('swapCexValidateAddress', {\n      slug: tokenOut!.slug,\n      address,\n    });\n\n    if (!response) {\n      setHasToAddressError(false);\n      setCanContinue(false);\n      return;\n    }\n\n    setHasToAddressError(!response.result);\n    setCanContinue(response.result);\n  });\n\n  const handleAddressBlur = useLastCallback(() => {\n    unmarkAddressFocused();\n  });\n\n  const handleAddressInput = useLastCallback((newToAddress: string) => {\n    setSwapCexAddress({ toAddress: newToAddress.trim() });\n  });\n\n  const handlePasteClick = useLastCallback(async () => {\n    try {\n      const { type, text } = await readClipboardContent();\n\n      if (type === 'text/plain') {\n        setSwapCexAddress({ toAddress: text.trim() });\n        await validateToAddress(text.trim());\n      }\n    } catch (error) {\n      showNotification({\n        message: lang('Error reading clipboard'),\n      });\n      setShouldRenderPasteButton(false);\n    }\n  });\n\n  useEffect(() => {\n    void validateToAddress(toAddress);\n  }, [toAddress, validateToAddress]);\n\n  const submitPassword = useLastCallback(() => {\n    void vibrate();\n    setSwapScreen({ state: SwapState.Password });\n  });\n\n  const handleQrScanClick = useLastCallback(() => {\n    if (IS_IOS && getIsMobileTelegramApp()) {\n      alert('Scanning is temporarily not available');\n      return;\n    }\n\n    requestOpenQrScanner();\n    cancelSwap();\n  });\n\n  function renderInfo() {\n    const text = hasToAddressError\n      ? lang('Incorrect address.')\n      : lang('Please provide an address of your wallet in %blockchain% blockchain to receive bought tokens.', {\n        blockchain: getChainNetworkName(tokenOut?.chain),\n      });\n\n    return (\n      <Transition\n        name=\"fade\"\n        activeKey={hasToAddressError ? 0 : 1}\n        slideClassName={styles.blockchainHintWrapper}\n      >\n        <span className={buildClassName(\n          styles.blockchainHintText,\n          hasToAddressError && styles.blockchainHintTextError,\n        )}\n        >\n          {text}\n        </span>\n      </Transition>\n    );\n  }\n\n  function renderInputAddress() {\n    if (swapType !== SwapType.CrosschainFromWallet) return undefined;\n\n    return (\n      <>\n        <div className={styles.inputAddress}>\n          <Input\n            ref={toAddressRef}\n            isRequired\n            placeholder={lang('Your address on another blockchain')}\n            value={isAddressFocused ? toAddress : toAddressShort}\n            onInput={handleAddressInput}\n            onFocus={handleAddressFocus}\n            onBlur={handleAddressBlur}\n            wrapperClassName={styles.inputAddressWrapper}\n          >\n            {isQrScannerSupported && (\n              <Button\n                isSimple\n                className={buildClassName(styles.inputButton, withPasteButton && styles.inputButtonShifted)}\n                onClick={handleQrScanClick}\n                ariaLabel={lang('Scan QR Code')}\n              >\n                <i className=\"icon-qr-scanner-alt\" aria-hidden />\n              </Button>\n            )}\n            {withPasteButton && (\n              <Button isSimple className={styles.inputButton} onClick={handlePasteClick} ariaLabel={lang('Paste')}>\n                <i className=\"icon-paste\" aria-hidden />\n              </Button>\n            )}\n          </Input>\n        </div>\n        {renderInfo()}\n      </>\n    );\n  }\n\n  const title = lang('$swap_from_to', {\n    from: tokenIn?.symbol,\n    icon: <i className={buildClassName('icon-chevron-right', styles.swapArrowIcon)} aria-hidden />,\n    to: tokenOut?.symbol,\n  }) as TeactNode[];\n\n  return (\n    <>\n      <ModalHeader title={title} onClose={cancelSwap} />\n      <div className={buildClassName(styles.scrollContent, styles.selectBlockchainBlock, 'custom-scroll')}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          noLoop={false}\n          nonInteractive\n          tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n          previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n        />\n\n        {renderInputAddress()}\n\n        <div className={buildClassName(styles.blockchainButtons, modalStyles.footerButtons)}>\n          <Button onClick={handleCancelClick} className={modalStyles.buttonHalfWidth}>{lang('Close')}</Button>\n          <Button\n            isPrimary\n            isDisabled={!canContinue}\n            className={modalStyles.buttonHalfWidth}\n            onClick={submitPassword}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SwapBlockchain);\n","// extracted by mini-css-extract-plugin\nexport default {\"sticker\":\"TY_nyPoa\",\"buttons\":\"JuY14PzG\",\"button\":\"e8xjMuq6\",\"changellyInfoBlock\":\"n91WXWIY\",\"changellyDescription\":\"nOPyXt4f\",\"changellyDescriptionBold\":\"bTumpDcM\",\"changellyTextField\":\"qcMvwyr2\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { Account, UserSwapToken } from '../../global/types';\nimport { SwapType } from '../../global/types';\n\nimport { getIsInternalSwap, getIsSupportedChain } from '../../global/helpers';\nimport { selectCurrentAccount } from '../../global/selectors';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport SwapTokensInfo from './SwapTokensInfo';\n\nimport styles from './SwapResult.module.scss';\n\ninterface OwnProps {\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  amountIn?: string;\n  amountOut?: string;\n  playAnimation?: boolean;\n  firstButtonText?: string;\n  secondButtonText?: string;\n  swapType?: SwapType;\n  toAddress?: string;\n  onFirstButtonClick?: NoneToVoidFunction;\n  onSecondButtonClick?: NoneToVoidFunction;\n  isFirstButtonDisabled?: boolean;\n}\n\ninterface StateProps {\n  addressByChain?: Account['addressByChain'];\n  isSensitiveDataHidden?: true;\n}\n\nfunction SwapResult({\n  tokenIn,\n  tokenOut,\n  amountIn,\n  amountOut,\n  playAnimation,\n  firstButtonText,\n  secondButtonText,\n  swapType,\n  toAddress = '',\n  addressByChain,\n  isSensitiveDataHidden,\n  onFirstButtonClick,\n  onSecondButtonClick,\n  isFirstButtonDisabled,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n\n  const isInternalSwap = getIsInternalSwap({\n    from: tokenIn, to: tokenOut, toAddress, addressByChain,\n  });\n  const isToAddressInCurrentWallet = useMemo(() => {\n    return Boolean(toAddress && Object.values(addressByChain ?? {}).some((address) => address === toAddress));\n  }, [addressByChain, toAddress]);\n\n  function renderButtons() {\n    if (!firstButtonText && !secondButtonText) {\n      return undefined;\n    }\n\n    return (\n      <div className={styles.buttons}>\n        {firstButtonText && (\n          <Button\n            className={styles.button}\n            onClick={onFirstButtonClick}\n            isDisabled={isFirstButtonDisabled}\n          >\n            {firstButtonText}\n          </Button>\n        )}\n        {secondButtonText && (\n          <Button className={styles.button} onClick={onSecondButtonClick}>{secondButtonText}</Button>\n        )}\n      </div>\n    );\n  }\n\n  function renderSticker() {\n    if (swapType === SwapType.CrosschainFromWallet && !isInternalSwap) return undefined;\n\n    return (\n      <AnimatedIconWithPreview\n        play={playAnimation}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n        tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n        previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n      />\n    );\n  }\n\n  function renderTimeWarning() {\n    return (\n      <div className={styles.changellyInfoBlock}>\n        <span className={styles.changellyDescription}>\n          {lang('Please note that it may take up to a few hours for tokens to appear in your wallet.')}\n        </span>\n      </div>\n    );\n  }\n\n  function renderChangellyInfo() {\n    if (swapType !== SwapType.CrosschainFromWallet || isToAddressInCurrentWallet) {\n      return undefined;\n    }\n    const chain = getIsSupportedChain(tokenOut?.chain) ? tokenOut.chain : undefined;\n\n    return (\n      <div className={styles.changellyInfoBlock}>\n        <span className={styles.changellyDescription}>\n          {\n            lang('$swap_changelly_from_ton_description', {\n              blockchain: (\n                <span className={styles.changellyDescriptionBold}>\n                  {getChainNetworkName(tokenOut?.chain)}\n                </span>\n              ),\n            })\n          }\n        </span>\n        <InteractiveTextField\n          chain={chain}\n          address={toAddress}\n          copyNotification={lang('Address was copied!')}\n          noSavedAddress\n          noExplorer\n          className={styles.changellyTextField}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {renderSticker()}\n\n      <SwapTokensInfo\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        tokenIn={tokenIn}\n        amountIn={amountIn}\n        tokenOut={tokenOut}\n        amountOut={amountOut}\n      />\n\n      {swapType !== SwapType.OnChain && renderTimeWarning()}\n      {renderChangellyInfo()}\n\n      {renderButtons()}\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    addressByChain: selectCurrentAccount(global)?.addressByChain,\n    isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n  };\n})(SwapResult));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { SwapType, UserSwapToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport SwapResult from '../common/SwapResult';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  amountIn?: string;\n  amountOut?: string;\n  swapType?: SwapType;\n  toAddress?: string;\n  onInfoClick: NoneToVoidFunction;\n  onStartSwap: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n  isDetailsDisabled?: boolean;\n}\n\nfunction SwapComplete({\n  isActive,\n  tokenIn,\n  tokenOut,\n  amountIn,\n  amountOut,\n  swapType,\n  toAddress,\n  onInfoClick,\n  onStartSwap,\n  onClose,\n  isDetailsDisabled,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  return (\n    <>\n      <ModalHeader title={lang('Swap Placed')} onClose={onClose} />\n\n      <div className={buildClassName(styles.scrollContent, 'custom-scroll')}>\n        <SwapResult\n          tokenIn={tokenIn}\n          amountIn={amountIn}\n          tokenOut={tokenOut}\n          amountOut={amountOut}\n          swapType={swapType}\n          toAddress={toAddress}\n          playAnimation={isActive}\n          firstButtonText={lang('Details')}\n          secondButtonText={lang('Repeat')}\n          onFirstButtonClick={onInfoClick}\n          onSecondButtonClick={onStartSwap}\n          isFirstButtonDisabled={isDetailsDisabled}\n        />\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onClose} isPrimary>{lang('Close')}</Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SwapComplete);\n","import React, { memo, type TeactNode } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { IS_CAPACITOR } from '../../config';\nimport { getDoesUsePinPad } from '../../util/biometrics';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  error?: string;\n  children?: TeactNode;\n  onSubmit: (password: string) => void;\n  onBack: NoneToVoidFunction;\n}\n\nfunction SwapPassword({\n  isActive,\n  isLoading,\n  error,\n  children,\n  onSubmit,\n  onBack,\n}: OwnProps) {\n  const { cancelSwap, clearSwapError } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  return (\n    <>\n      {!getDoesUsePinPad() && <ModalHeader title={lang('Confirm Swap')} onClose={cancelSwap} />}\n      <PasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        withCloseButton={IS_CAPACITOR}\n        error={error}\n        operationType=\"swap\"\n        submitLabel={lang('Send')}\n        cancelLabel={lang('Back')}\n        onSubmit={onSubmit}\n        onCancel={onBack}\n        onUpdate={clearSwapError}\n        skipAuthScreen\n      >\n        {children}\n      </PasswordForm>\n    </>\n  );\n}\n\nexport default memo(SwapPassword);\n","import React, { memo, useMemo, useState } from '../../lib/teact/teact';\n\nimport type { ApiActivity } from '../../api/types';\nimport type { Account, UserSwapToken } from '../../global/types';\n\nimport {\n  CHANGELLY_LIVE_CHAT_URL, CHANGELLY_SUPPORT_EMAIL, CHANGELLY_WAITING_DEADLINE,\n} from '../../config';\nimport { getIsInternalSwap, getIsSupportedChain } from '../../global/helpers';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useQrCode from '../../hooks/useQrCode';\n\nimport Countdown from '../common/Countdown';\nimport SwapTokensInfo from '../common/SwapTokensInfo';\nimport Button from '../ui/Button';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  amountIn?: string;\n  amountOut?: string;\n  payinAddress?: string;\n  payoutAddress?: string;\n  payinExtraId?: string;\n  activity?: ApiActivity;\n  addressByChain?: Account['addressByChain'];\n  onClose: NoneToVoidFunction;\n}\n\nfunction SwapWaitTokens({\n  isActive,\n  tokenIn,\n  tokenOut,\n  amountIn,\n  amountOut,\n  payinAddress,\n  payoutAddress,\n  payinExtraId,\n  activity,\n  addressByChain,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [isExpired, setIsExpired] = useState(false);\n\n  const timestamp = useMemo(() => Date.now(), []);\n\n  const { qrCodeRef, isInitialized } = useQrCode({\n    address: payinAddress,\n    isActive,\n    hiddenClassName: styles.qrCodeHidden,\n    hideLogo: true,\n  });\n\n  const shouldShowQrCode = !payinExtraId;\n  const isInternalSwap = getIsInternalSwap({\n    from: tokenIn, to: tokenOut, toAddress: payoutAddress, addressByChain,\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  const handleTimeout = useLastCallback(() => {\n    setIsExpired(true);\n  });\n\n  function renderMemo() {\n    if (!payinExtraId) return undefined;\n\n    return (\n      <div className={styles.textFieldWrapperFullWidth}>\n        <span className={styles.textFieldLabel}>\n          {lang('Memo')}\n        </span>\n        <InteractiveTextField\n          chain=\"ton\"\n          address={payinExtraId}\n          copyNotification={lang('Memo was copied!')}\n          noSavedAddress\n          noExplorer\n          className={styles.changellyTextField}\n        />\n      </div>\n    );\n  }\n\n  function renderInfo() {\n    if (isExpired) {\n      const cexTransactionId = activity && 'cex' in activity ? activity.cex?.transactionId : undefined;\n\n      return (\n        <div className={styles.changellyInfoBlock}>\n          <span className={styles.changellyImportantRed}>\n            {lang('The time for sending coins is over.')}\n          </span>\n          <span className={styles.changellyDescription}>\n            {lang('$swap_changelly_support', {\n              livechat: (\n                <a\n                  href={CHANGELLY_LIVE_CHAT_URL}\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                  className={styles.changellyDescriptionBold}\n                >\n                  {lang('Changelly Live Chat')}\n                </a>\n              ),\n              email: (\n                <span className={styles.changellyDescriptionBold}>\n                  {CHANGELLY_SUPPORT_EMAIL}\n                </span>\n              ),\n            })}\n          </span>\n          {cexTransactionId && (\n            <InteractiveTextField\n              text={cexTransactionId}\n              copyNotification={lang('Transaction ID was copied!')}\n              noSavedAddress\n              noExplorer\n              className={styles.changellyTextField}\n            />\n          )}\n        </div>\n      );\n    }\n\n    if (isInternalSwap) {\n      return (\n        <div className={styles.changellyInfoBlock}>\n          <span className={styles.changellyDescription}>\n            {lang('Please note that it may take up to a few hours for tokens to appear in your wallet.')}\n          </span>\n        </div>\n      );\n    }\n\n    const chain = getIsSupportedChain(tokenIn?.chain) ? tokenIn.chain : undefined;\n\n    return (\n      <div className={styles.changellyInfoBlock}>\n        <span className={styles.changellyDescription}>{lang('$swap_changelly_to_ton_description1', {\n          value: (\n            <span className={styles.changellyDescriptionBold}>\n              {formatCurrencyExtended(Number(amountIn), tokenIn?.symbol ?? '', true)}\n            </span>\n          ),\n          blockchain: (\n            <span className={styles.changellyDescriptionBold}>\n              {getChainNetworkName(tokenIn?.chain)}\n            </span>\n          ),\n          time: (\n            <Countdown\n              timestamp={timestamp}\n              deadline={CHANGELLY_WAITING_DEADLINE}\n              onCompleted={handleTimeout}\n            />\n          ),\n        })}\n        </span>\n        <InteractiveTextField\n          chain={chain}\n          address={payinAddress}\n          copyNotification={lang('Address was copied!')}\n          noSavedAddress\n          noExplorer\n          noDimming\n          className={styles.changellyTextField}\n        />\n        {renderMemo()}\n        {shouldShowQrCode && (\n          <div className={buildClassName(styles.qrCode, !isInitialized && styles.qrCodeHidden)} ref={qrCodeRef} />\n        )}\n        <span className={styles.changellyDescription}>\n          {lang('Please note that it may take up to a few hours for tokens to appear in your wallet.')}\n        </span>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <ModalHeader\n        title={lang(isExpired ? 'Swap Expired' : (isInternalSwap ? 'Swapping' : 'Waiting for Payment'))}\n        onClose={onClose}\n      />\n\n      <div className={buildClassName(styles.scrollContent, styles.selectBlockchainBlock, 'custom-scroll')}>\n        <SwapTokensInfo\n          tokenIn={tokenIn}\n          amountIn={amountIn}\n          tokenOut={tokenOut}\n          amountOut={amountOut}\n        />\n\n        <Transition\n          name=\"fade\"\n          activeKey={isExpired ? 1 : 0}\n        >\n          {renderInfo()}\n        </Transition>\n\n        <div className={modalStyles.buttons}>\n          <Button isPrimary onClick={onClose}>{lang('Close')}</Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SwapWaitTokens);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiActivity } from '../../api/types';\nimport type { Account, GlobalState, UserSwapToken, UserToken } from '../../global/types';\nimport { SwapState, SwapType } from '../../global/types';\n\nimport {\n  selectCurrentAccount,\n  selectCurrentAccountState,\n  selectSwapTokens,\n  selectSwapType,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TokenSelector from '../common/TokenSelector';\nimport TransactionBanner from '../common/TransactionBanner';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\nimport SwapBlockchain from './SwapBlockchain';\nimport SwapComplete from './SwapComplete';\nimport SwapInitial from './SwapInitial';\nimport SwapPassword from './SwapPassword';\nimport SwapWaitTokens from './SwapWaitTokens';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface StateProps {\n  currentSwap: GlobalState['currentSwap'];\n  swapType: SwapType;\n  swapTokens?: UserSwapToken[];\n  activityById?: Record<string, ApiActivity>;\n  addressByChain?: Account['addressByChain'];\n}\n\nconst FULL_SIZE_NBS_STATES = [SwapState.Password, SwapState.SelectTokenFrom, SwapState.SelectTokenTo];\n\nfunction SwapModal({\n  currentSwap: {\n    state,\n    tokenInSlug,\n    tokenOutSlug,\n    amountIn = '0',\n    amountOut = '0',\n    isLoading,\n    error,\n    activityId,\n    toAddress,\n    payinAddress,\n    payoutAddress,\n    payinExtraId,\n    shouldResetOnClose,\n  },\n  swapType,\n  swapTokens,\n  activityById,\n  addressByChain,\n}: StateProps) {\n  const {\n    startSwap,\n    cancelSwap,\n    setSwapScreen,\n    submitSwap,\n    showActivityInfo,\n    submitSwapCex,\n    addSwapToken,\n    setSwapTokenIn,\n    setSwapTokenOut,\n  } = getActions();\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const isOpen = state !== SwapState.None;\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const tokenIn = useMemo(\n    () => swapTokens?.find((token) => token.slug === tokenInSlug),\n    [tokenInSlug, swapTokens],\n  );\n\n  const tokenOut = useMemo(\n    () => swapTokens?.find((token) => token.slug === tokenOutSlug),\n    [swapTokens, tokenOutSlug],\n  );\n\n  const [renderedSwapType, setRenderedSwapType] = useState(swapType);\n  const [renderedTransactionAmountIn, setRenderedTransactionAmountIn] = useState(amountIn);\n  const [renderedTransactionAmountOut, setRenderedTransactionAmountOut] = useState(amountOut);\n  const [renderedTransactionTokenIn, setRenderedTransactionTokenIn] = useState(tokenIn);\n  const [renderedTransactionTokenOut, setRenderedTransactionTokenOut] = useState(tokenOut);\n  const [renderedActivity, setRenderedActivity] = useState<ApiActivity | undefined>();\n\n  useEffect(() => {\n    if (!isOpen || !activityId || !activityById?.[activityId]) {\n      setRenderedActivity(undefined);\n      return;\n    }\n\n    const activity = activityById[activityId];\n    setRenderedActivity(activity);\n\n    if (activity.kind === 'swap' && swapType === SwapType.CrosschainToWallet) {\n      const status = activity.cex?.status;\n      if (status === 'exchanging' || status === 'confirming') {\n        setSwapScreen({ state: SwapState.Complete });\n      }\n    }\n  }, [activityById, activityId, isOpen, swapType]);\n\n  const handleTransferSubmit = useLastCallback((password: string) => {\n    setRenderedTransactionAmountIn(amountIn);\n    setRenderedTransactionAmountOut(amountOut);\n    setRenderedTransactionTokenIn(tokenIn);\n    setRenderedTransactionTokenOut(tokenOut);\n    setRenderedSwapType(swapType);\n\n    if (swapType === SwapType.OnChain) {\n      submitSwap({ password });\n      return;\n    }\n\n    submitSwapCex({ password });\n  });\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === SwapState.Password) {\n      if (swapType === SwapType.CrosschainFromWallet) {\n        setSwapScreen({ state: SwapState.Blockchain });\n      } else {\n        setSwapScreen({ state: isPortrait ? SwapState.Initial : SwapState.None });\n      }\n      return;\n    }\n\n    if (state === SwapState.SelectTokenTo || state === SwapState.SelectTokenFrom) {\n      setSwapScreen({ state: isPortrait ? SwapState.Initial : SwapState.None });\n    }\n\n    if (state === SwapState.Blockchain) {\n      setSwapScreen({ state: isPortrait ? SwapState.Initial : SwapState.None });\n    }\n  });\n\n  const handleTransactionInfoClick = useLastCallback(() => {\n    if (!activityId) return;\n\n    cancelSwap({ shouldReset: true });\n    showActivityInfo({ id: activityId });\n  });\n\n  const handleModalClose = useLastCallback(() => {\n    cancelSwap({ shouldReset: isPortrait || shouldResetOnClose });\n    updateNextKey();\n  });\n\n  const handleModalCloseWithReset = useLastCallback(() => {\n    cancelSwap({ shouldReset: true });\n  });\n\n  const handleTokenSelect = useLastCallback((token: UserSwapToken | UserToken) => {\n    addSwapToken({ token: token as UserSwapToken });\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n    const setToken = renderingKey === SwapState.SelectTokenTo ? setSwapTokenOut : setSwapTokenIn;\n    setToken({ tokenSlug: token.slug });\n  });\n\n  const handleStartSwap = useLastCallback(() => {\n    startSwap({\n      amountIn: renderedTransactionAmountIn,\n      tokenInSlug: renderedTransactionTokenIn?.slug,\n      tokenOutSlug: renderedTransactionTokenOut?.slug,\n    });\n  });\n\n  function renderSwapShortInfo() {\n    if (!tokenIn || !tokenOut || !amountIn || !amountOut) return undefined;\n\n    return (\n      <TransactionBanner\n        tokenIn={tokenIn}\n        withChainIcon\n        tokenOut={tokenOut}\n        text={formatCurrencyExtended(amountIn, tokenIn.symbol ?? '', true)}\n        secondText={formatCurrencyExtended(amountOut, tokenOut.symbol ?? '', true)}\n        className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n      />\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: SwapState) {\n    switch (currentKey) {\n      case SwapState.Initial:\n        return (\n          <>\n            <ModalHeader\n              title={lang('$swap_action')}\n              onClose={cancelSwap}\n            />\n            <SwapInitial isActive={isActive} />\n          </>\n        );\n      case SwapState.Blockchain:\n        return (\n          <SwapBlockchain\n            isActive={isActive}\n            toAddress={toAddress}\n            tokenIn={tokenIn}\n            tokenOut={tokenOut}\n            swapType={swapType}\n          />\n        );\n      case SwapState.WaitTokens:\n        return (\n          <SwapWaitTokens\n            isActive={isActive}\n            tokenIn={renderedTransactionTokenIn}\n            tokenOut={renderedTransactionTokenOut}\n            amountIn={renderedTransactionAmountIn}\n            amountOut={renderedTransactionAmountOut}\n            payinAddress={payinAddress}\n            payoutAddress={payoutAddress}\n            payinExtraId={payinExtraId}\n            addressByChain={addressByChain}\n            activity={renderedActivity}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n      case SwapState.Password:\n        return (\n          <SwapPassword\n            isActive={isActive}\n            isLoading={isLoading}\n            error={error}\n            onSubmit={handleTransferSubmit}\n            onBack={handleBackClick}\n          >\n            {renderSwapShortInfo()}\n          </SwapPassword>\n        );\n      case SwapState.Complete: {\n        return (\n          <SwapComplete\n            isActive={isActive}\n            tokenIn={renderedTransactionTokenIn}\n            tokenOut={renderedTransactionTokenOut}\n            amountIn={renderedTransactionAmountIn}\n            amountOut={renderedTransactionAmountOut}\n            swapType={renderedSwapType}\n            toAddress={toAddress}\n            onClose={handleModalCloseWithReset}\n            onInfoClick={handleTransactionInfoClick}\n            onStartSwap={handleStartSwap}\n            isDetailsDisabled={!activityId}\n          />\n        );\n      }\n      case SwapState.SelectTokenFrom:\n      case SwapState.SelectTokenTo:\n        return (\n          <TokenSelector\n            isActive={isActive}\n            shouldUseSwapTokens\n            shouldFilter={currentKey === SwapState.SelectTokenTo}\n            onTokenSelect={handleTokenSelect}\n            onBack={handleBackClick}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n    }\n  }\n\n  const forceFullNative = FULL_SIZE_NBS_STATES.includes(renderingKey)\n    // Crosschain exchanges have additional information that may cause the height of the modal to be insufficient\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n    || (renderingKey === SwapState.Complete && renderedSwapType !== SwapType.OnChain);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={cancelSwap}\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"swap\"\n      forceFullNative={forceFullNative}\n      hasCloseButton\n      onCloseAnimationEnd={handleModalClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n  const account = selectCurrentAccount(global);\n  const activityById = accountState?.activities?.byId;\n\n  return {\n    currentSwap: global.currentSwap,\n    swapType: selectSwapType(global),\n    swapTokens: selectSwapTokens(global),\n    activityById,\n    addressByChain: account?.addressByChain,\n  };\n})(SwapModal));\n","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport TransferResult from '../common/TransferResult';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport NftChips from './NftChips';\nimport NftInfo from './NftInfo';\n\nimport styles from '../common/TransferResult.module.scss';\nimport modalStyles from '../ui/Modal.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  amount?: bigint;\n  symbol: string;\n  txId?: string;\n  tokenSlug: string;\n  toAddress?: string;\n  comment?: string;\n  decimals?: number;\n  nfts?: ApiNft[];\n  onInfoClick: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction TransferComplete({\n  isActive,\n  amount,\n  symbol,\n  txId,\n  tokenSlug,\n  toAddress,\n  comment,\n  decimals,\n  nfts,\n  onInfoClick,\n  onClose,\n}: OwnProps) {\n  const { startTransfer } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const isNftTransfer = Boolean(nfts?.length);\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useEffect(() => {\n    return isActive\n      ? captureKeyboardListeners({ onEnter: onClose })\n      : undefined;\n  }, [isActive, onClose]);\n\n  const handleTransactionRepeatClick = useLastCallback(() => {\n    startTransfer({\n      isPortrait,\n      tokenSlug,\n      toAddress,\n      amount,\n      comment,\n    });\n  });\n\n  return (\n    <>\n      <ModalHeader title={lang(isNftTransfer ? 'NFT has been sent!' : 'Coins have been sent!')} onClose={onClose} />\n\n      <div className={modalStyles.transitionContent}>\n        {isNftTransfer ? (\n          <>\n            <AnimatedIconWithPreview\n              play={isActive}\n              noLoop={false}\n              nonInteractive\n              className={styles.sticker}\n              tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n              previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n            />\n            {nfts.length === 1 ? <NftInfo nft={nfts[0]} /> : <NftChips nfts={nfts} />}\n            {Boolean(txId) && (\n              <div className={buildClassName(styles.buttons, styles.buttonsAfterNft)}>\n                <Button className={styles.button} onClick={onInfoClick}>{lang('Details')}</Button>\n              </div>\n            )}\n          </>\n        ) : (\n          <TransferResult\n            playAnimation={isActive}\n            amount={amount ? -amount : undefined}\n            tokenSymbol={symbol}\n            firstButtonText={txId ? lang('Details') : undefined}\n            secondButtonText={lang('Repeat')}\n            onFirstButtonClick={onInfoClick}\n            onSecondButtonClick={handleTransactionRepeatClick}\n            decimals={decimals}\n          />\n        )}\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onClose} isPrimary>{lang('Close')}</Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(TransferComplete);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './AmountWithFeeTextField.module.scss';\n\ninterface OwnProps {\n  amount: string;\n  label: string;\n  currency?: string;\n  symbol?: string;\n  fractionDigits?: number;\n  feeText?: TeactNode;\n  className?: string;\n  labelClassName?: string;\n}\n\nfunction AmountWithFeeTextField({\n  amount,\n  label,\n  currency = '',\n  symbol,\n  fractionDigits,\n  feeText,\n  className,\n  labelClassName,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <>\n      <div className={buildClassName(styles.label, labelClassName)}>{label}</div>\n      <div className={buildClassName(styles.root, className)}>\n        {formatCurrencyExtended(amount, currency, true, fractionDigits)}\n        {symbol && <span className={styles.suffix}>{symbol}</span>}\n        {Boolean(feeText) && (\n          <>\n            <div className={styles.feeLabel}>{lang('Fee')}</div>\n            <span className={styles.feeConfirm}>\n              {feeText}\n            </span>\n          </>\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default memo(AmountWithFeeTextField);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ghrNkOZk\",\"suffix\":\"LPchTYAT\",\"label\":\"vEby849g\",\"feeLabel\":\"XPUDvAqg\",\"feeConfirm\":\"SkacqSTU\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiToken } from '../../api/types';\nimport type {\n  Account, GlobalState, SavedAddress, UserToken,\n} from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  BURN_ADDRESS,\n  BURN_CHUNK_DURATION_APPROX_SEC,\n  NFT_BATCH_SIZE,\n  NOTCOIN_EXCHANGERS,\n  STARS_SYMBOL,\n  TONCOIN,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { selectNetworkAccounts } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { explainApiTransferFee } from '../../util/fee/transferFee';\nimport { getLocalAddressName } from '../../util/getLocalAddressName';\nimport { vibrate } from '../../util/haptics';\nimport { getChainBySlug } from '../../util/tokens';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AmountWithFeeTextField from '../ui/AmountWithFeeTextField';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport IconWithTooltip from '../ui/IconWithTooltip';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport ModalHeader from '../ui/ModalHeader';\nimport NftChips from './NftChips';\nimport NftInfo from './NftInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  savedAddresses?: SavedAddress[];\n  token?: UserToken | ApiToken;\n  onBack: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  currentAccountId: string;\n  currentTransfer: GlobalState['currentTransfer'];\n  accounts?: Record<string, Account>;\n}\n\nfunction TransferConfirm({\n  currentTransfer: {\n    tokenSlug,\n    amount,\n    toAddress,\n    resolvedAddress,\n    fee,\n    realFee,\n    comment,\n    shouldEncrypt,\n    promiseId,\n    isLoading,\n    toAddressName,\n    isToNewAddress,\n    isScam,\n    binPayload,\n    nfts,\n    isGaslessWithStars,\n    diesel,\n    stateInit,\n  },\n  token,\n  currentAccountId,\n  accounts,\n  isActive,\n  savedAddresses,\n  onBack,\n  onClose,\n}: OwnProps & StateProps) {\n  const { submitTransferConfirm } = getActions();\n\n  const lang = useLang();\n\n  const isNftTransfer = Boolean(nfts?.length);\n  if (isNftTransfer) {\n    tokenSlug = TONCOIN.slug;\n  }\n\n  const chain = getChainBySlug(tokenSlug);\n  const localAddressName = useMemo(() => getLocalAddressName({\n    address: toAddress!,\n    chain,\n    currentAccountId,\n    accounts: accounts!,\n    savedAddresses,\n  }), [accounts, chain, currentAccountId, savedAddresses, toAddress]);\n  const addressName = localAddressName || toAddressName;\n  const isBurning = resolvedAddress === BURN_ADDRESS;\n  const isNotcoinBurning = resolvedAddress === NOTCOIN_EXCHANGERS[0];\n  const explainedFee = explainApiTransferFee({\n    fee,\n    realFee,\n    diesel,\n    tokenSlug,\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  const handleConfirm = useLastCallback(() => {\n    void vibrate();\n    submitTransferConfirm();\n  });\n\n  function renderNfts() {\n    if (nfts!.length === 1) {\n      return <NftInfo nft={nfts![0]} withMediaViewer />;\n    }\n\n    return <NftChips nfts={nfts!} />;\n  }\n\n  function renderAmountWithFee() {\n    if (!explainedFee.realFee || !token) {\n      return undefined;\n    }\n\n    const feeText = (\n      <Fee\n        terms={explainedFee.realFee.terms}\n        precision={explainedFee.realFee.precision}\n        token={token}\n        symbolClassName={styles.currencySymbol}\n      />\n    );\n\n    return isNftTransfer ? (\n      <>\n        <div className={styles.label}>{lang('Fee')}</div>\n        <div className={styles.inputReadOnly}>{feeText}</div>\n      </>\n    ) : (\n      <AmountWithFeeTextField\n        label={lang('Amount')}\n        amount={toDecimal(amount ?? 0n, token?.decimals)}\n        symbol={token?.symbol ?? ''}\n        feeText={feeText}\n        fractionDigits={token?.decimals}\n      />\n    );\n  }\n\n  function renderComment() {\n    if (binPayload || stateInit) {\n      return (\n        <>\n          {binPayload && (\n            <>\n              <div className={styles.label}>{lang('Signing Data')}</div>\n              <InteractiveTextField\n                text={binPayload}\n                copyNotification={lang('Data was copied!')}\n                className={styles.addressWidget}\n              />\n            </>\n          )}\n\n          {stateInit && (\n            <>\n              <div className={styles.label}>{lang('Contract Initialization Data')}</div>\n              <InteractiveTextField\n                text={stateInit}\n                copyNotification={lang('Data was copied!')}\n                className={styles.addressWidget}\n              />\n            </>\n          )}\n\n          <div className={styles.error}>\n            {renderText(lang('$signature_warning'))}\n          </div>\n        </>\n      );\n    }\n\n    if (!comment) {\n      return undefined;\n    }\n\n    return (\n      <>\n        <div className={styles.label}>{shouldEncrypt ? lang('Encrypted Message') : lang('Comment or Memo')}</div>\n        <div className={buildClassName(styles.inputReadOnly, styles.inputReadOnly_words, styles.commentInputWrapper)}>\n          {comment}\n        </div>\n      </>\n    );\n  }\n\n  const burningDurationMin = nfts?.length\n    ? (Math.ceil(nfts.length / NFT_BATCH_SIZE) * BURN_CHUNK_DURATION_APPROX_SEC) / 60\n    : undefined;\n\n  const submitBtnText = lang(\n    (isBurning || isNotcoinBurning)\n      ? (isNftTransfer ? 'Burn NFT' : 'Burn')\n      : isGaslessWithStars\n        ? 'Pay fee with %stars_symbol%'\n        : 'Confirm',\n    isGaslessWithStars ? { stars_symbol: STARS_SYMBOL } : undefined,\n  );\n\n  return (\n    <>\n      <ModalHeader title={lang('Is it all ok?')} onClose={onClose} />\n      <div className={modalStyles.transitionContent}>\n        {isNftTransfer ? renderNfts() : (\n          <AnimatedIconWithPreview\n            size={ANIMATED_STICKER_SMALL_SIZE_PX}\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={buildClassName(styles.sticker, styles.sticker_sizeSmall)}\n            tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n            previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n          />\n        )}\n        <div className={styles.label}>\n          {lang('Receiving Address')}\n          {' '}\n          {isToNewAddress && (\n            <IconWithTooltip\n              emoji=\"\"\n              size=\"small\"\n              message={lang('This address is new and never received transfers before.')}\n              tooltipClassName={styles.warningTooltipContainer}\n            />\n          )}\n        </div>\n        <InteractiveTextField\n          chain={chain}\n          address={resolvedAddress}\n          addressName={addressName}\n          isScam={isScam}\n          copyNotification={lang('Address was copied!')}\n          className={styles.addressWidget}\n        />\n\n        {renderAmountWithFee()}\n        {renderComment()}\n\n        {nfts && (isBurning || (isNotcoinBurning && nfts?.length > 1)) && (\n          <div className={styles.burnWarning}>\n            {(\n              nfts?.length === 1 ? (\n                renderText(lang('Are you sure you want to burn this NFT? It will be lost forever.'))\n              ) : ([\n                renderText(lang('$multi_burn_nft_warning', { amount: nfts.length })),\n                ' ',\n                renderText(lang('$multi_send_nft_warning', { duration: burningDurationMin })),\n              ])\n            )}\n          </div>\n        )}\n\n        <div className={buildClassName(modalStyles.buttons, modalStyles.buttonsInsideContentWithScroll)}>\n          <Button className={modalStyles.button} onClick={promiseId ? onClose : onBack}>\n            {promiseId ? lang('Cancel') : lang('Edit')}\n          </Button>\n          <Button\n            isPrimary\n            isLoading={isLoading}\n            isDestructive={isBurning || isScam}\n            className={modalStyles.button}\n            onClick={handleConfirm}\n          >\n            {submitBtnText}\n          </Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    currentAccountId: global.currentAccountId!,\n    currentTransfer: global.currentTransfer,\n    accounts: selectNetworkAccounts(global),\n  };\n})(TransferConfirm));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiNft } from '../../api/types';\n\nimport {\n  BURN_ADDRESS, BURN_CHUNK_DURATION_APPROX_SEC, NFT_BATCH_SIZE, NOTCOIN_EXCHANGERS,\n} from '../../config';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Spinner from '../ui/Spinner';\nimport NftChips from './NftChips';\nimport NftInfo from './NftInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface OwnProps {\n  nfts: ApiNft[];\n  sentNftsCount?: number;\n  toAddress?: string;\n  onClose: NoneToVoidFunction;\n}\n\nfunction TransferMultiNftProcess({\n  nfts,\n  sentNftsCount = 0,\n  toAddress,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  const isInProgress = sentNftsCount < nfts.length;\n  const isBurning = toAddress === BURN_ADDRESS;\n  const isNotcoinBurning = toAddress === NOTCOIN_EXCHANGERS[0];\n\n  const title = isInProgress ? lang(\n    `${(isBurning || isNotcoinBurning) ? 'Burning' : 'Sending'}: %n% of %m% NFTs...`,\n    { n: sentNftsCount, m: nfts.length },\n  ) : lang('Sent');\n  const duration = (Math.ceil(nfts.length / NFT_BATCH_SIZE) * BURN_CHUNK_DURATION_APPROX_SEC) / 60;\n\n  return (\n    <>\n      <ModalHeader title={title} />\n\n      <div className={modalStyles.transitionContent}>\n        {isInProgress && (\n          <>\n            <Spinner className={styles.spinner} />\n            <div className={styles.infoBox}>{lang('$multi_send_nft_warning', { duration })}</div>\n          </>\n        )}\n        {nfts.length === 1 ? <NftInfo nft={nfts[0]} /> : <NftChips nfts={nfts} />}\n        {!isInProgress && (\n          <div className={modalStyles.buttons}>\n            <Button onClick={onClose} isPrimary>{lang('Close')}</Button>\n          </div>\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default memo(TransferMultiNftProcess);\n","import React, { memo, type TeactNode } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { STARS_SYMBOL } from '../../config';\nimport { getDoesUsePinPad } from '../../util/biometrics';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  isBurning?: boolean;\n  error?: string;\n  children?: TeactNode;\n  onSubmit: (password: string) => void;\n  onCancel: NoneToVoidFunction;\n  isGaslessWithStars?: boolean;\n}\n\nfunction TransferPassword({\n  isActive, isLoading, isBurning, error, children, onSubmit, onCancel, isGaslessWithStars,\n}: OwnProps) {\n  const {\n    cancelTransfer,\n    clearTransferError,\n  } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel,\n  });\n\n  const title = isBurning ? 'Confirm Burning' : 'Confirm Sending';\n  const submitLabel = isGaslessWithStars\n    ? lang('Pay fee with %stars_symbol%', { stars_symbol: STARS_SYMBOL })\n    : lang('Send');\n\n  return (\n    <>\n      {!getDoesUsePinPad() && <ModalHeader title={lang(title)} onClose={cancelTransfer} />}\n      <PasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        withCloseButton={Boolean(children)}\n        operationType=\"transfer\"\n        error={error}\n        submitLabel={submitLabel}\n        cancelLabel={lang('Back')}\n        onSubmit={onSubmit}\n        onCancel={onCancel}\n        onUpdate={clearTransferError}\n      >\n        {children}\n      </PasswordForm>\n    </>\n  );\n}\n\nexport default memo(TransferPassword);\n","import React, {\n  memo, useEffect, useMemo,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState, SavedAddress, UserToken } from '../../global/types';\nimport { TransferState } from '../../global/types';\n\nimport { BURN_ADDRESS, NFT_BATCH_SIZE } from '../../config';\nimport {\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport usePrevious from '../../hooks/usePrevious';\nimport useWindowSize from '../../hooks/useWindowSize';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\nimport TransferComplete from './TransferComplete';\nimport TransferConfirm from './TransferConfirm';\nimport TransferInitial from './TransferInitial';\nimport TransferMultiNftProcess from './TransferMultiNftProcess';\nimport TransferPassword from './TransferPassword';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface StateProps {\n  currentTransfer: GlobalState['currentTransfer'];\n  tokens?: UserToken[];\n  savedAddresses?: SavedAddress[];\n  isMediaViewerOpen?: boolean;\n  isMultichainAccount: boolean;\n}\n\nconst SCREEN_HEIGHT_FOR_FORCE_FULLSIZE_NBS = 762; // Computed empirically\n\nfunction TransferModal({\n  currentTransfer: {\n    state,\n    amount,\n    toAddress,\n    comment,\n    error,\n    isLoading,\n    txId,\n    tokenSlug,\n    nfts,\n    sentNftsCount,\n    diesel,\n  },\n  tokens,\n  savedAddresses,\n  isMediaViewerOpen,\n  isMultichainAccount,\n}: StateProps) {\n  const {\n    submitTransferConfirm,\n    submitTransferPassword,\n    submitTransferHardware,\n    setTransferScreen,\n    cancelTransfer,\n    showActivityInfo,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const isOpen = state !== TransferState.None;\n\n  const { screenHeight } = useWindowSize();\n  const selectedToken = useMemo(() => tokens?.find((token) => token.slug === tokenSlug), [tokenSlug, tokens]);\n  const decimals = selectedToken?.decimals;\n  const renderedTransactionAmount = usePrevious(amount, true);\n  const symbol = selectedToken?.symbol || '';\n  const isNftTransfer = Boolean(nfts?.length);\n  const isBurning = toAddress === BURN_ADDRESS;\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  useEffect(() => (\n    state === TransferState.Confirm\n      ? captureKeyboardListeners({ onEnter: () => submitTransferConfirm() })\n      : undefined\n  ), [state, submitTransferConfirm]);\n\n  const handleTransferSubmit = useLastCallback((password: string) => {\n    submitTransferPassword({ password });\n  });\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === TransferState.Confirm) {\n      setTransferScreen({ state: TransferState.Initial });\n    }\n    if (state === TransferState.Password) {\n      setTransferScreen({ state: TransferState.Confirm });\n    }\n  });\n\n  const handleTransactionInfoClick = useLastCallback(() => {\n    cancelTransfer({ shouldReset: true });\n    showActivityInfo({ id: txId! });\n  });\n\n  const handleModalClose = useLastCallback(() => {\n    cancelTransfer({ shouldReset: isPortrait });\n    updateNextKey();\n  });\n\n  const handleModalCloseWithReset = useLastCallback(() => {\n    cancelTransfer({ shouldReset: true });\n  });\n\n  const handleLedgerConnect = useLastCallback(() => {\n    submitTransferHardware();\n  });\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: TransferState) {\n    switch (currentKey) {\n      case TransferState.Initial:\n        return (\n          <>\n            <ModalHeader title={lang(isNftTransfer ? 'Send NFT' : 'Send')} onClose={handleModalCloseWithReset} />\n            <TransferInitial />\n          </>\n        );\n      case TransferState.Confirm:\n        return (\n          <TransferConfirm\n            isActive={isActive}\n            token={selectedToken}\n            savedAddresses={savedAddresses}\n            onBack={isPortrait ? handleBackClick : handleModalClose}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n      case TransferState.Password:\n        return (\n          <TransferPassword\n            isActive={isActive}\n            isLoading={isLoading}\n            isBurning={isBurning}\n            error={error}\n            onSubmit={handleTransferSubmit}\n            onCancel={handleModalCloseWithReset}\n            isGaslessWithStars={diesel?.status === 'stars-fee'}\n          >\n            <TransactionBanner\n              tokenIn={selectedToken}\n              imageUrl={nfts?.[0]?.thumbnail}\n              withChainIcon={isMultichainAccount}\n              text={isNftTransfer\n                ? (nfts.length > 1 ? lang('%amount% NFTs', { amount: nfts.length }) : nfts[0]?.name || 'NFT')\n                : formatCurrency(toDecimal(amount!, decimals), symbol)}\n              className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n              secondText={shortenAddress(toAddress!)}\n            />\n          </TransferPassword>\n        );\n      case TransferState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleLedgerConnect}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n      case TransferState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={handleModalCloseWithReset}\n            onTryAgain={submitTransferHardware}\n          />\n        );\n      case TransferState.Complete:\n        return (nfts?.length || 0) <= NFT_BATCH_SIZE ? (\n          <TransferComplete\n            isActive={isActive}\n            nfts={nfts}\n            amount={renderedTransactionAmount}\n            symbol={symbol}\n            txId={txId}\n            tokenSlug={tokenSlug}\n            toAddress={toAddress}\n            comment={comment}\n            onInfoClick={handleTransactionInfoClick}\n            onClose={handleModalCloseWithReset}\n            decimals={decimals}\n          />\n        ) : (\n          <TransferMultiNftProcess\n            nfts={nfts!}\n            sentNftsCount={sentNftsCount}\n            toAddress={toAddress}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen && !isMediaViewerOpen}\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"transfer\"\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n      forceFullNative={screenHeight <= SCREEN_HEIGHT_FOR_FORCE_FULLSIZE_NBS || renderingKey === TransferState.Password}\n      onClose={handleModalCloseWithReset}\n      onCloseAnimationEnd={handleModalClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n\n  return {\n    currentTransfer: global.currentTransfer,\n    tokens: selectCurrentAccountTokens(global),\n    savedAddresses: accountState?.savedAddresses,\n    isMediaViewerOpen: Boolean(global.mediaViewer.mediaId),\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n  };\n})(TransferModal));\n","import React, { memo, useRef } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { requestMeasure } from '../../lib/fasterdom/fasterdom';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useSyncEffect from '../../hooks/useSyncEffect';\nimport useWindowSize from '../../hooks/useWindowSize';\n\nimport styles from './ConfettiContainer.module.scss';\n\ntype StateProps = {\n  lastRequestedAt?: number;\n};\n\ninterface Confetti {\n  pos: {\n    x: number;\n    y: number;\n  };\n  velocity: {\n    x: number;\n    y: number;\n  };\n  size: number;\n  color: string;\n  flicker: number;\n  flickerFrequency: number;\n  rotation: number;\n  lastDrawnAt: number;\n  frameCount: number;\n}\n\nconst CONFETTI_FADEOUT_TIMEOUT = 10000;\nconst DEFAULT_CONFETTI_SIZE = 10;\nconst CONFETTI_COLORS = ['#E8BC2C', '#D0049E', '#02CBFE', '#5723FD', '#FE8C27', '#6CB859'];\n\nfunction ConfettiContainer({ lastRequestedAt }: StateProps) {\n  const canvasRef = useRef<HTMLCanvasElement>();\n  const confettiRef = useRef<Confetti[]>([]);\n  const isRafStartedRef = useRef(false);\n  const windowSize = useWindowSize();\n  const forceUpdate = useForceUpdate();\n  const { isPortrait } = useDeviceScreen();\n\n  const defaultConfettiAmount = isPortrait ? 50 : 100;\n\n  const invokeGenerateConfetti = useLastCallback((w: number, h: number) => {\n    generateConfetti(confettiRef, w, h, defaultConfettiAmount);\n  });\n\n  const updateCanvas = useLastCallback(() => {\n    if (!canvasRef.current || !isRafStartedRef.current) {\n      return;\n    }\n    const canvas = canvasRef.current;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n      return;\n    }\n\n    const { width: canvasWidth, height: canvasHeight } = canvas;\n    ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n\n    const confettiToRemove = new Set<Confetti>([]);\n    confettiRef.current.forEach((c, i) => {\n      const {\n        pos,\n        velocity,\n        size,\n        color,\n        flicker,\n        flickerFrequency,\n        rotation,\n        lastDrawnAt,\n        frameCount,\n      } = c;\n      const diff = (Date.now() - lastDrawnAt) / 1000;\n\n      const newPos = {\n        x: pos.x + velocity.x * diff,\n        y: pos.y + velocity.y * diff,\n      };\n\n      const newVelocity = {\n        x: velocity.x * 0.98, // Air Resistance\n        y: velocity.y += diff * 1000, // Gravity\n      };\n\n      const newFlicker = size * Math.abs(Math.sin(frameCount * flickerFrequency));\n      const newRotation = 5 * frameCount * flickerFrequency * (Math.PI / 180);\n\n      const newFrameCount = frameCount + 1;\n      const newLastDrawnAt = Date.now();\n\n      const shouldRemove = newPos.y > canvasHeight + c.size;\n      if (shouldRemove) {\n        confettiToRemove.add(c);\n        return;\n      }\n\n      confettiRef.current[i] = {\n        ...c,\n        pos: newPos,\n        velocity: newVelocity,\n        flicker: newFlicker,\n        rotation: newRotation,\n        lastDrawnAt: newLastDrawnAt,\n        frameCount: newFrameCount,\n      };\n      ctx.fillStyle = color;\n      ctx.beginPath();\n      ctx.ellipse(\n        pos.x,\n        pos.y,\n        size,\n        flicker,\n        rotation,\n        0,\n        2 * Math.PI,\n      );\n      ctx.fill();\n    });\n\n    confettiRef.current = confettiRef.current.filter((c) => !confettiToRemove.has(c));\n    if (confettiRef.current.length) {\n      requestMeasure(updateCanvas);\n    } else {\n      isRafStartedRef.current = false;\n    }\n  });\n\n  useSyncEffect(([prevConfettiTime]) => {\n    let hideTimeout: number;\n    if (lastRequestedAt && prevConfettiTime !== lastRequestedAt) {\n      invokeGenerateConfetti(windowSize.width, windowSize.height);\n      hideTimeout = window.setTimeout(forceUpdate, CONFETTI_FADEOUT_TIMEOUT);\n\n      if (!isRafStartedRef.current) {\n        isRafStartedRef.current = true;\n        requestMeasure(updateCanvas);\n      }\n    }\n\n    return () => {\n      window.clearTimeout(hideTimeout);\n    };\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps -- Old timeout should be cleared only if new confetti is generated\n  }, [lastRequestedAt, forceUpdate, updateCanvas]);\n\n  if (!lastRequestedAt || Date.now() - lastRequestedAt > CONFETTI_FADEOUT_TIMEOUT) {\n    return undefined;\n  }\n  return (\n    <div id=\"Confetti\" className={styles.root}>\n      <canvas ref={canvasRef} width={windowSize.width} height={windowSize.height} />\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    lastRequestedAt: global.confettiRequestedAt,\n  };\n})(ConfettiContainer));\n\nfunction generateConfetti(confettiRef: { current: Confetti[] }, width: number, height: number, amount: number) {\n  for (let i = 0; i < amount; i++) {\n    const leftSide = i % 2;\n    const pos = {\n      x: width * (leftSide ? -0.1 : 1.1),\n      y: height * 0.75,\n    };\n    const randomX = Math.random() * width * 1.5;\n    const randomY = -height / 2 - Math.random() * height;\n    const velocity = {\n      x: leftSide ? randomX : randomX * -1,\n      y: randomY,\n    };\n\n    const randomColor = CONFETTI_COLORS[Math.floor(Math.random() * CONFETTI_COLORS.length)];\n    const size = DEFAULT_CONFETTI_SIZE;\n    confettiRef.current.push({\n      pos,\n      size,\n      color: randomColor,\n      velocity,\n      flicker: size,\n      flickerFrequency: Math.random() * 0.2,\n      rotation: 0,\n      lastDrawnAt: Date.now(),\n      frameCount: 0,\n    });\n  }\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"NEu40vNs\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { TransferState } from '../../global/types';\n\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Portal from './Portal';\nimport Spinner from './Spinner';\n\nimport styles from './LoadingOverlay.module.scss';\n\ntype StateProps = {\n  isOpen?: boolean;\n};\n\nfunction LoadingOverlay({ isOpen }: StateProps) {\n  const { closeLoadingOverlay } = getActions();\n\n  const { shouldRender, ref } = useShowTransition({\n    isOpen,\n    withShouldRender: true,\n  });\n\n  if (!shouldRender) return undefined;\n\n  return (\n    <Portal>\n      <div ref={ref} className={styles.root} onClick={() => closeLoadingOverlay()}>\n        <Spinner color=\"white\" />\n      </div>\n    </Portal>\n  );\n}\n\nexport default memo(withGlobal(\n  (global) => {\n    const isDpppModalOpen = (\n      global.dappConnectRequest?.state !== undefined || global.currentDappTransfer.state !== TransferState.None\n    );\n\n    return {\n      isOpen: global.isLoadingOverlayOpen && !isDpppModalOpen,\n    };\n  },\n)(LoadingOverlay));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"JqqCZr7K\"};","// extracted by mini-css-extract-plugin\nexport default {\"containerInner\":\"_8bq050R\",\"appSlide\":\"xYgMXl3B\",\"appSlide_fastTransition\":\"cumlVCAy\",\"appSlideFastTransition\":\"cumlVCAy\",\"appSlideTransparent\":\"ZZvRsvlT\",\"appSlideContent\":\"BY5oYr5T\",\"transitionContainer\":\"XDsN0suQ\",\"loading\":\"VPmyx3Yj\"};","import React, { memo, useEffect, useLayoutEffect } from '../lib/teact/teact';\nimport { getActions, withGlobal } from '../global';\n\nimport type { Theme } from '../global/types';\nimport { AppState } from '../global/types';\n\nimport {\n  APP_NAME,\n  INACTIVE_MARKER,\n  IS_ANDROID_DIRECT,\n  IS_CAPACITOR,\n  IS_CORE_WALLET,\n} from '../config';\nimport { selectCurrentAccountSettings } from '../global/selectors';\nimport { useAccentColor } from '../util/accentColor';\nimport { setActiveTabChangeListener } from '../util/activeTabMonitor';\nimport buildClassName from '../util/buildClassName';\nimport { MINUTE } from '../util/dateFormat';\nimport { closeThisTab } from '../util/ledger/tab';\nimport { resolveRender } from '../util/renderPromise';\nimport {\n  IS_ANDROID, IS_DELEGATED_BOTTOM_SHEET, IS_ELECTRON, IS_IOS, IS_LEDGER_EXTENSION_TAB, IS_LINUX,\n} from '../util/windowEnvironment';\nimport { updateSizes } from '../util/windowSize';\nimport { callApi } from '../api';\nimport IFrameBrowser from './ui/IFrameBrowser';\n\nimport { useAppIntersectionObserver } from '../hooks/useAppIntersectionObserver';\nimport useAppTheme from '../hooks/useAppTheme';\nimport useBackgroundMode from '../hooks/useBackgroundMode';\nimport { useDeviceScreen } from '../hooks/useDeviceScreen';\nimport useFlag from '../hooks/useFlag';\nimport useInterval from '../hooks/useInterval';\nimport useSyncEffect from '../hooks/useSyncEffect';\nimport useTimeout from '../hooks/useTimeout';\n\nimport AppInactive from './AppInactive';\nimport AppLocked from './appLocked/AppLocked';\nimport Auth from './auth/Auth';\nimport AuthImportWalletModal from './auth/AuthImportWalletModal';\nimport DappConnectModal from './dapps/DappConnectModal';\nimport DappSignDataModal from './dapps/DappSignDataModal';\nimport DappTransferModal from './dapps/DappTransferModal';\nimport Dialogs from './Dialogs';\nimport ElectronHeader from './electron/ElectronHeader';\nimport Explore from './explore/Explore';\nimport LedgerModal from './ledger/LedgerModal';\nimport Main from './main/Main';\nimport AddAccountModal from './main/modals/AddAccountModal';\nimport BackupModal from './main/modals/BackupModal';\nimport NftAttributesModal from './main/modals/NftAttributesModal';\nimport OnRampWidgetModal from './main/modals/OnRampWidgetModal';\nimport QrScannerModal from './main/modals/QrScannerModal';\nimport SignatureModal from './main/modals/SignatureModal';\nimport SwapActivityModal from './main/modals/SwapActivityModal';\nimport TransactionModal from './main/modals/TransactionModal';\nimport UnhideNftModal from './main/modals/UnhideNftModal';\nimport Notifications from './main/Notifications';\nimport BottomBar from './main/sections/Actions/BottomBar';\nimport MediaViewer from './mediaViewer/MediaViewer';\nimport MintCardModal from './mintCard/MintCardModal';\nimport Settings from './settings/Settings';\nimport SettingsModal from './settings/SettingsModal';\nimport SwapModal from './swap/SwapModal';\nimport TransferModal from './transfer/TransferModal';\nimport ConfettiContainer from './ui/ConfettiContainer';\nimport InAppBrowser from './ui/InAppBrowser';\nimport LoadingOverlay from './ui/LoadingOverlay';\nimport Transition from './ui/Transition';\n\n// import Test from './components/test/TestNoRedundancy';\nimport styles from './App.module.scss';\n\ninterface StateProps {\n  appState: AppState;\n  accountId?: string;\n  isBackupWalletModalOpen?: boolean;\n  isQrScannerOpen?: boolean;\n  isHardwareModalOpen?: boolean;\n  isExploreOpen?: boolean;\n  isFullscreen: boolean;\n  areSettingsOpen?: boolean;\n  theme: Theme;\n  accentColorIndex?: number;\n}\n\nconst APP_STATES_WITH_BOTTOM_BAR = new Set([AppState.Main, AppState.Settings, AppState.Explore]);\nconst APP_UPDATE_INTERVAL = (IS_ELECTRON && !IS_LINUX) || IS_ANDROID_DIRECT\n  ? 5 * MINUTE\n  : undefined;\nconst PRERENDER_MAIN_DELAY = 1200;\nlet mainKey = 0;\n\nconst APP_STATE_RENDER_COUNT = Object.keys(AppState).length / 2;\n\nfunction App({\n  appState,\n  accountId,\n  isBackupWalletModalOpen,\n  isHardwareModalOpen,\n  isQrScannerOpen,\n  isExploreOpen,\n  isFullscreen,\n  areSettingsOpen,\n  theme,\n  accentColorIndex,\n}: StateProps) {\n  const {\n    closeBackupWalletModal,\n    closeHardwareWalletModal,\n    closeSettings,\n    cancelCaching,\n    closeQrScanner,\n    checkAppVersion,\n  } = getActions();\n\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait;\n\n  const [isInactive, markInactive] = useFlag(false);\n  const [canPrerenderMain, prerenderMain] = useFlag();\n\n  const renderingKey = isInactive\n    ? AppState.Inactive\n    : areSettingsOpen && !areSettingsInModal\n      ? AppState.Settings\n      : isExploreOpen && isPortrait\n        ? AppState.Explore : appState;\n  const withBottomBar = isPortrait && APP_STATES_WITH_BOTTOM_BAR.has(renderingKey);\n  const transitionName = withBottomBar\n    ? 'semiFade'\n    : isPortrait\n      ? (IS_ANDROID ? 'slideFadeAndroid' : IS_IOS ? 'slideLayers' : 'slideFade')\n      : 'semiFade';\n\n  useTimeout(\n    prerenderMain,\n    renderingKey === AppState.Auth && !canPrerenderMain ? PRERENDER_MAIN_DELAY : undefined,\n  );\n\n  useInterval(checkAppVersion, IS_CORE_WALLET ? undefined : APP_UPDATE_INTERVAL);\n\n  useEffect(() => {\n    document.documentElement.classList.toggle('with-bottombar', withBottomBar);\n  }, [withBottomBar]);\n\n  useEffect(() => {\n    updateSizes();\n    setActiveTabChangeListener(() => {\n      document.title = `${APP_NAME} ${INACTIVE_MARKER}`;\n\n      markInactive();\n      closeSettings();\n      cancelCaching();\n    });\n  }, [markInactive]);\n\n  useBackgroundMode(() => {\n    void callApi('setIsAppFocused', false);\n  }, () => {\n    void callApi('setIsAppFocused', true);\n  }, IS_LEDGER_EXTENSION_TAB);\n\n  useLayoutEffect(() => {\n    document.documentElement.classList.add('is-rendered');\n    resolveRender();\n  }, []);\n  useLayoutEffect(() => {\n    document.documentElement.classList.toggle('is-fullscreen', isFullscreen);\n    requestAnimationFrame(updateSizes);\n  }, [isFullscreen]);\n\n  useSyncEffect(() => {\n    if (accountId) {\n      mainKey += 1;\n    }\n  }, [accountId]);\n\n  const appTheme = useAppTheme(theme);\n  useAccentColor('body', appTheme, accentColorIndex);\n\n  useAppIntersectionObserver();\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: AppState) {\n    switch (currentKey) {\n      case AppState.Auth:\n        return <Auth />;\n      case AppState.Main: {\n        const slideFullClassName = buildClassName(\n          styles.appSlide,\n          styles.appSlideContent,\n          'custom-scroll',\n          'app-slide-content',\n        );\n        return (\n          <Transition\n            name=\"semiFade\"\n            activeKey={mainKey}\n            shouldCleanup\n            nextKey={renderingKey === AppState.Auth && canPrerenderMain ? mainKey + 1 : undefined}\n            slideClassName={slideFullClassName}\n          >\n            <Main\n              key={mainKey}\n              isActive={isActive}\n            />\n          </Transition>\n        );\n      }\n      case AppState.Explore:\n        return <Explore isActive={isActive} />;\n      case AppState.Settings:\n        return <Settings isActive={isActive} />;\n      case AppState.Ledger:\n        return <LedgerModal isOpen noBackdropClose onClose={closeThisTab} />;\n      case AppState.Inactive:\n        return <AppInactive />;\n    }\n  }\n\n  return (\n    <>\n      {IS_ELECTRON && !IS_LINUX && <ElectronHeader withTitle />}\n\n      <Transition\n        name={transitionName}\n        activeKey={renderingKey}\n        renderCount={APP_STATE_RENDER_COUNT}\n        shouldCleanup={!withBottomBar}\n        className={styles.transitionContainer}\n        slideClassName={\n          buildClassName(styles.appSlide, withBottomBar && styles.appSlide_fastTransition, 'custom-scroll')\n        }\n      >\n        {renderContent}\n      </Transition>\n\n      {areSettingsInModal && (\n        <SettingsModal\n          isOpen={areSettingsOpen}\n          onClose={closeSettings}\n        >\n          <Settings isActive={!!areSettingsOpen} isInsideModal />\n        </SettingsModal>\n      )}\n      <AppLocked />\n      <MediaViewer />\n      {!isInactive && (\n        <>\n          <AuthImportWalletModal />\n          <LedgerModal isOpen={isHardwareModalOpen} onClose={closeHardwareWalletModal} />\n          <BackupModal\n            isOpen={isBackupWalletModalOpen}\n            onClose={closeBackupWalletModal}\n          />\n          <TransferModal />\n          {!IS_CORE_WALLET && (\n            <>\n              <SwapModal />\n              <MintCardModal />\n            </>\n          )}\n          <SignatureModal />\n          <TransactionModal />\n          <SwapActivityModal />\n          <DappConnectModal />\n          <DappSignDataModal />\n          <DappTransferModal />\n          <AddAccountModal />\n          <OnRampWidgetModal />\n          <UnhideNftModal />\n          <NftAttributesModal />\n          {IS_CAPACITOR && (\n            <QrScannerModal\n              isOpen={isQrScannerOpen}\n              onClose={closeQrScanner}\n            />\n          )}\n          {!IS_DELEGATED_BOTTOM_SHEET && (\n            <>\n              <Notifications />\n              <Dialogs />\n              <ConfettiContainer />\n              {IS_CAPACITOR ? <InAppBrowser /> : <IFrameBrowser />}\n              <LoadingOverlay />\n            </>\n          )}\n        </>\n      )}\n      {withBottomBar && <BottomBar />}\n    </>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    appState: global.appState,\n    accountId: global.currentAccountId,\n    isBackupWalletModalOpen: global.isBackupWalletModalOpen,\n    isHardwareModalOpen: global.isHardwareModalOpen,\n    isExploreOpen: global.isExploreOpen,\n    areSettingsOpen: global.areSettingsOpen,\n    isQrScannerOpen: global.isQrScannerOpen,\n    isFullscreen: Boolean(global.isFullscreen),\n    theme: global.settings.theme,\n    accentColorIndex: selectCurrentAccountSettings(global)?.accentColorIndex,\n  };\n})(App));\n","import { ElectronEvent } from '../electron/types';\n\nimport { processDeeplink } from './deeplink';\n\nexport function initElectron() {\n  window.electron?.on(ElectronEvent.DEEPLINK, ({ url }: { url: string }) => {\n    void processDeeplink(url);\n  });\n}\n","import './global/actions';\nimport './global/init';\nimport './util/handleError';\nimport './util/bigintPatch';\n\nimport React from './lib/teact/teact';\nimport TeactDOM from './lib/teact/teact-dom';\nimport { getActions, getGlobal } from './global';\n\nimport {\n  DEBUG, IS_CAPACITOR, IS_TELEGRAM_APP, STRICTERDOM_ENABLED,\n} from './config';\nimport { requestMutation } from './lib/fasterdom/fasterdom';\nimport { enableStrict } from './lib/fasterdom/stricterdom';\nimport { betterView } from './util/betterView';\nimport { fixIosAppStorage, initCapacitor, processCapacitorLaunchDeeplink } from './util/capacitor';\nimport { initElectron } from './util/electron';\nimport { initFocusScrollController } from './util/focusScroll';\nimport { forceLoadFonts } from './util/fonts';\nimport { logDebug, logSelfXssWarnings } from './util/logs';\nimport { initMultitab } from './util/multitab';\nimport { initTelegramApp } from './util/telegram';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON, IS_IOS_APP, IS_LEDGER_EXTENSION_TAB,\n} from './util/windowEnvironment';\n\nimport App from './components/App';\n\nimport './styles/index.scss';\n\nif (DEBUG) {\n  // eslint-disable-next-line no-console\n  console.log('>>> INIT');\n}\n\nif (STRICTERDOM_ENABLED) {\n  enableStrict();\n}\n\nif (IS_CAPACITOR) {\n  void initCapacitor();\n}\n\nif (IS_ELECTRON) {\n  void initElectron();\n}\n\nif (IS_TELEGRAM_APP) {\n  void initTelegramApp();\n}\n\nif (IS_DELEGATING_BOTTOM_SHEET) {\n  initMultitab({ noPubGlobal: true });\n} else if (IS_DELEGATED_BOTTOM_SHEET) {\n  initMultitab();\n}\n\ninitFocusScrollController();\n\nvoid (async () => {\n  if (IS_IOS_APP) {\n    await fixIosAppStorage();\n  }\n\n  await window.electron?.restoreStorage();\n\n  getActions().init();\n\n  // Connecting to the API from remote tabs creates excessive polling in the API.\n  // The remote tab doesn't need the API anyway.\n  if (!IS_LEDGER_EXTENSION_TAB) {\n    getActions().initApi();\n  } else {\n    logDebug('API was not initialized because it was connected from a detached tab');\n  }\n\n  if (IS_CAPACITOR) {\n    await processCapacitorLaunchDeeplink();\n  }\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log('>>> START INITIAL RENDER');\n  }\n\n  requestMutation(() => {\n    TeactDOM.render(\n      <App />,\n      document.getElementById('root')!,\n    );\n\n    forceLoadFonts();\n    betterView();\n  });\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log('>>> FINISH INITIAL RENDER');\n  }\n\n  document.addEventListener('dblclick', () => {\n    // eslint-disable-next-line no-console\n    console.warn('GLOBAL STATE', getGlobal());\n  });\n\n  if (window.top === window) {\n    logSelfXssWarnings();\n  }\n})();\n","import { requestMutation } from '../lib/fasterdom/fasterdom';\n\nexport function forceLoadFonts() {\n  const el = document.createElement('div');\n  el.textContent = '';\n  el.classList.add('visually-hidden');\n  document.body.appendChild(el);\n\n  requestMutation(() => {\n    document.body.removeChild(el);\n  });\n}\n"],"names":["leafPrototypes","getProto","inProgress","dataWebpackPrefix","BarcodeFormat","BarcodeValueType","Resolution","LensFacing","GoogleBarcodeScannerModuleInstallState","AddressType","EmailFormatType","PhoneFormatType","WifiEncryptionType","exports","read","buffer","offset","isLE","mLen","nBytes","e","m","eLen","eMax","eBias","nBits","i","d","s","NaN","Infinity","Math","pow","write","value","c","rt","abs","isNaN","floor","log","LN2","Big","RM","NE","PE","ten","fromDecimal","decimals","BigInt","mul","TONCOIN","round","toString","toDecimal","noFloor","arguments","length","undefined","toBig","div","roundHalfUp","roundDecimal","BIGINT_PREFIX","bigintReviver","key","startsWith","slice","bigintAbs","bigintDivideToNumber","num","ONE_TON","bigintMultiplyToNumber","bigintMax","value0","value1","bigintMin","IS_EXTENSION_PAGE_SCRIPT","IS_EXTENSION","includes","self","location","protocol","shouldShowAlert","APP_ENV","window","throttledAlert","throttle","message","alert","SECOND","handleErrorEvent","ErrorEvent","preventDefault","handleError","error","reason","err","logDebugError","stack","endsWith","DEBUG_ALERT_MSG","addEventListener","TOKEN_TRANSFER_FORWARD_AMOUNT","NFT_TRANSFER_AMOUNT","NFT_TRANSFER_FORWARD_AMOUNT","TON_GAS","stakeNominators","unstakeNominators","stakeLiquid","unstakeLiquid","stakeJettonsForward","JettonStakingGas","STAKE_JETTONS","stakeJettons","unstakeJettons","UNSTAKE_JETTONS","claimJettons","JETTON_TRANSFER","SIMPLE_UPDATE_REQUEST","changeDns","stakeEthena","TOKEN_TRANSFER_AMOUNT","stakeEthenaForward","unstakeEthena","unstakeEthenaForward","unstakeEthenaLocked","unstakeEthenaLockedForward","TON_GAS_REAL","STAKE_COMMENT","UNSTAKE_COMMENT","DEFAULT_DECIMALS","DEFAULT_IS_BOUNCEABLE","WALLET_IS_BOUNCEABLE","Workchain","WORKCHAIN","BaseChain","TRANSFER_TIMEOUT_SEC","DEFAULT_MAX_MESSAGES","LEDGER_MAX_MESSAGES","W5_MAX_MESSAGES","OpCode","JettonOpCode","DnsOpCode","TeleitemOpCode","ContractType","DnsCategory","Excesses","Ok","Wallet","Staking","ConnectorClass","requestStates","Map","requestStatesByCallback","constructor","target","onUpdate","channel","shouldUseJson","targetOrigin","destroy","init","_len","args","Array","_key","this","postMessage","type","request","messageData","messageId","generateUniqueId","payload","requestState","promise","Promise","resolve","reject","Object","assign","withCallback","callback","pop","set","catch","finally","delete","cancelCallback","progressCallback","isCanceled","get","onMessage","data","decodeExtensionMessage","update","response","_requestState$callbac","call","callbackArgs","_data$error","_data$error2","Error","rawData","encodeExtensionMessage","createConnector","worker","connector","handleMessage","_ref","removeEventListener","Deferred","resolved","deferred","MINUTE","HOUR","DAY","YEAR","formatDayToStringWithCache","withCache","langCode","dayStartAt","noYear","monthFormat","noDay","withTime","Date","toLocaleString","year","month","day","hour","minute","hourCycle","formatRelativeHumanDateTime","total","now","minutes","hours","days","rtf","Intl","RelativeTimeFormat","localeMatcher","numeric","style","result","daysPlural","daysValue","formatToParts","reverse","push","replace","hoursPlural","hoursValue","minutesPlural","minutesValue","join","formatHumanDay","lang","datetime","getDayStartAt","isToday","yesterday","setDate","getDate","isYesterday","formatFullDay","code","date","today","getDayStart","getFullYear","formatShortDay","todayStartAt","noDate","targetAt","setSeconds","getMinuteStart","getTime","formatTime","String","getHours","padStart","getMinutes","getCountDaysToDate","ceil","setHours","ApiLiquidUnstakeMode","random","ExceptionCode","CapacitorException","super","Capacitor","win","capCustomPlatform","CapacitorCustomPlatform","cap","Plugins","getPlatform","name","_a","_b","androidBridge","webkit","messageHandlers","bridge","getPlatformId","getPluginHeader","pluginName","PluginHeaders","find","h","registeredPlugins","convertFileSrc","filePath","console","isNativePlatform","isPluginAvailable","plugin","platforms","has","registerPlugin","jsImplementations","registeredPlugin","warn","proxy","platform","pluginHeader","jsImplementation","createPluginMethodWrapper","prop","remove","wrapper","p","async","loadPluginImplementation","then","impl","fn","bind","Unimplemented","methodHeader","methods","rtype","options","nativePromise","nativeCallback","createPluginMethod","defineProperty","writable","configurable","addListener","removeListener","addListenerNative","eventName","callbackId","Proxy","_","Set","keys","Exception","DEBUG","isLoggingEnabled","createCapacitor","initCapacitorGlobal","globalThis","g","WebPlugin","listeners","retainedEventArguments","windowListeners","listenerFunc","firstListener","windowListener","registered","addWindowListener","sendRetainedArgumentsForEvent","removeAllListeners","listener","removeWindowListener","notifyListeners","retainUntilConsumed","forEach","hasListeners","registerWindowListener","windowEventName","pluginEventName","handler","event","unimplemented","msg","unavailable","Unavailable","index","indexOf","splice","handle","arg","encode","str","encodeURIComponent","decodeURIComponent","escape","decode","CapacitorCookiesPluginWeb","getCookies","cookies","document","cookie","cookieMap","split","trim","setCookie","encodedKey","encodedValue","expires","path","domain","url","deleteCookie","clearCookies","toUTCString","clearAllCookies","web","buildRequestInit","extra","output","method","headers","originalKeys","map","k","toLocaleLowerCase","reduce","acc","normalizeHttpHeaders","body","params","URLSearchParams","entries","FormData","form","append","Headers","JSON","stringify","CapacitorHttpPluginWeb","requestInit","webFetchExtra","urlParams","shouldEncode","accumulator","entry","item","isArray","substr","buildUrlParams","shouldEncodeUrlParams","fetch","contentType","blob","responseType","ok","reader","FileReader","onload","base64String","onerror","readAsDataURL","readBlobAsBase64","json","text","status","post","put","patch","cache","WeakMap","fnCache","cacheKey","cached","newValue","animate","tick","schedulerFn","animateInstantly","timingFunctions","linear","t","easeIn","easeOut","easeInOut","sin","PI","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","animateNumber","timing","duration","onEnd","from","to","t0","t1","min","progress","f","requestMeasure","applyStyles","element","css","ImpactStyle","NotificationType","UNDEFINED_PREFIX","extensionMessageReplacer","extensionMessageReviver","parse","process","IS_CORE_WALLET","APP_NAME","APP_VERSION","APP_COMMIT_HASH","APP_ENV_MARKER","DEBUG_MORE","DEBUG_API","DEBUG_VIEW_ACCOUNTS","IS_PRODUCTION","IS_TEST","IS_FIREFOX_EXTENSION","IS_OPERA_EXTENSION","env","IS_PACKAGED_ELECTRON","IS_CAPACITOR","IS_ANDROID_DIRECT","IS_AIR_APP","IS_TELEGRAM_APP","ELECTRON_HOST_URL","INACTIVE_MARKER","PRODUCTION_URL","BETA_URL","APP_INSTALL_URL","APP_REPO_URL","BOT_USERNAME","STRICTERDOM_ENABLED","PIN_LENGTH","NATIVE_BIOMETRICS_USERNAME","NATIVE_BIOMETRICS_SERVER","IS_BIP39_MNEMONIC_ENABLED","MNEMONIC_COUNT","MNEMONIC_COUNTS","PRIVATE_KEY_HEX_LENGTH","MNEMONIC_CHECK_COUNT","MOBILE_SCREEN_MAX_WIDTH","ANIMATION_END_DELAY","ANIMATED_STICKER_TINY_ICON_PX","ANIMATED_STICKER_ICON_PX","ANIMATED_STICKER_TINY_SIZE_PX","ANIMATED_STICKER_SMALL_SIZE_PX","ANIMATED_STICKER_MIDDLE_SIZE_PX","ANIMATED_STICKER_BIG_SIZE_PX","ANIMATED_STICKER_HUGE_SIZE_PX","DEFAULT_LANDSCAPE_ACTION_TAB_ID","TRANSACTION_ADDRESS_SHIFT","WHOLE_PART_DELIMITER","DEFAULT_SLIPPAGE_VALUE","GLOBAL_STATE_CACHE_DISABLED","GLOBAL_STATE_CACHE_KEY","ANIMATION_LEVEL_MIN","ANIMATION_LEVEL_MED","ANIMATION_LEVEL_MAX","ANIMATION_LEVEL_DEFAULT","THEME_DEFAULT","MAIN_ACCOUNT_ID","TONCENTER_MAINNET_URL","TONCENTER_TESTNET_URL","FRACTION_DIGITS","SHORT_FRACTION_DIGITS","MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT","SUPPORT_USERNAME","MTW_TIPS_CHANNEL_NAME","en","ru","NFT_MARKETPLACE_TITLES","getgems","fragment","MTW_STATIC_BASE_URL","MTW_CARDS_BASE_URL","MTW_CARDS_MINT_BASE_URL","MYTONWALLET_PROMO_URL","MYTONWALLET_MULTISEND_DAPP_URL","TELEGRAM_WEB_URL","NFT_MARKETPLACE_URL","NFT_MARKETPLACE_TITLE","GETGEMS_BASE_MAINNET_URL","GETGEMS_BASE_TESTNET_URL","EMPTY_HASH_VALUE","IFRAME_WHITELIST","SUBPROJECT_URL_MASK","CHANGELLY_SUPPORT_EMAIL","CHANGELLY_LIVE_CHAT_URL","CHANGELLY_SECURITY_EMAIL","CHANGELLY_TERMS_OF_USE","CHANGELLY_PRIVACY_POLICY","CHANGELLY_AML_KYC","CHANGELLY_WAITING_DEADLINE","PROXY_HOSTS","TINY_TRANSFER_MAX_COST","IMAGE_CACHE_NAME","LANG_CACHE_NAME","LANG_LIST","nativeName","rtl","IS_STAKING_DISABLED","VALIDATION_PERIOD_MS","DEFAULT_FEE","LIQUID_POOL","LIQUID_JETTON","STAKING_MIN_AMOUNT","NOMINATORS_STAKING_MIN_AMOUNT","MIN_ACTIVE_STAKING_REWARDS","TONCONNECT_PROTOCOL_VERSION","TONCONNECT_WALLET_JSBRIDGE_KEY","EMBEDDED_DAPP_BRIDGE_CHANNEL","NFT_FRAGMENT_COLLECTIONS","TELEGRAM_GIFTS_SUPER_COLLECTION","MTW_CARDS_WEBSITE","MTW_CARDS_COLLECTION","TON_DNS_COLLECTION","TON_DNS_RENEWAL_WARNING_DAYS","TON_DNS_RENEWAL_NFT_WARNING_DAYS","symbol","slug","chain","cmcSlug","TRX","MYCOIN","minterAddress","MYCOIN_TESTNET","CHAIN_CONFIG","ton","isMemoSupported","isDnsSupported","addressRegex","addressPrefixRegex","nativeToken","tron","mainnet","apiUrl","usdtAddress","testnet","TRC20_USDT_MAINNET_SLUG","TRC20_USDT_TESTNET_SLUG","TON_USDT_SLUG","STAKED_TON_SLUG","TRX_SWAP_COUNT_FEE_ADDRESS","ETHENA_STAKING_VAULT","ETHENA_STAKING_MIN_AMOUNT","ETHENA_ELIGIBILITY_CHECK_URL","STON_PTON_SLUG","TRC20_USDT","TON_USDT","tokenAddress","TON_USDE","image","TON_TSUSDE","ALL_STAKING_POOLS","DEFAULT_ENABLED_TOKEN_SLUGS","DEFAULT_ENABLED_TOKEN_COUNT","PRIORITY_TOKEN_SLUGS","COMMON_TOKEN","isFromBackend","price","priceUsd","percentChange24h","TOKEN_INFO","toncoin","trx","TOKEN_WITH_LABEL","INIT_SWAP_ASSETS","isPopular","DEFAULT_TRX_SWAP_FIRST_TOKEN_SLUG","DEFAULT_SWAP_FIRST_TOKEN_SLUG","DEFAULT_SWAP_SECOND_TOKEN_SLUG","DEFAULT_TRANSFER_TOKEN_SLUG","DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG","SWAP_DEX_LABELS","dedust","ston","MULTITAB_DATA_CHANNEL_NAME","ACTIVE_TAB_STORAGE_KEY","WINDOW_PROVIDER_CHANNEL","SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY","PORTRAIT_MIN_ASSETS_TAB_VIEW","LANDSCAPE_MIN_ASSETS_TAB_VIEW","DEFAULT_PRICE_CURRENCY","CURRENCIES","USD","shortSymbol","EUR","RUB","CNY","BTC","BURN_ADDRESS","POPULAR_WALLET_VERSIONS","DEFAULT_TIMEOUT","DEFAULT_RETRIES","DEFAULT_ERROR_PAUSE","HISTORY_PERIODS","BROWSER_HISTORY_LIMIT","NFT_BATCH_SIZE","NOTCOIN_VOUCHERS_ADDRESS","BURN_CHUNK_DURATION_APPROX_SEC","NOTCOIN_EXCHANGERS","CLAIM_ADDRESS","CLAIM_AMOUNT","CLAIM_COMMENT","MINT_CARD_ADDRESS","MINT_CARD_COMMENT","MINT_CARD_REFUND_COMMENT","STARS_SYMBOL","GIVEAWAY_CHECKIN_URL","AUTOLOCK_OPTIONS_LIST","selectedName","period","AUTO_CONFIRM_DURATION_MINUTES","PRICELESS_TOKEN_HASHES","STAKED_TOKEN_SLUGS","DEFAULT_OUR_SWAP_FEE","DEFAULT_STAKING_STATE","id","tokenSlug","annualYield","yieldType","balance","pool","tokenBalance","unstakeRequestAmount","instantAvailable","start","end","DEFAULT_NOMINATORS_STAKING_STATE","pendingDepositAmount","JVAULT_URL","HELP_CENTER_URL","home","domainScam","seedScam","ethenaStaking","ALL_TON_DNS_ZONES","suffixes","baseFormat","resolver","collectionName","isTelemint","isUnofficial","TON_DNS_ZONES","filter","DEFAULT_AUTOLOCK_OPTION","WRONG_ATTEMPTS_BEFORE_LOG_OUT_SUGGESTION","UNKNOWN_TOKEN","userAgent","navigator","test","maxTouchPoints","Directory","Encoding","pause","ms","setTimeout","debounce","waitingTimeout","shouldRunFirst","shouldRunLast","clearTimeout","isRunning","scheduleFn","runFn","localArgs","_len2","_args","_key2","throttleWithTickEnd","throttleWith","onTickEnd","waiting","_len3","_key3","FAST_RAF_TIMEOUT_FALLBACK_MS","fastRafCallbacks","fastRafFallbackCallbacks","fastRafFallbackTimeout","onTickEndCallbacks","fastRaf","withTimeoutFallback","add","requestAnimationFrame","currentCallbacks","cb","currentTimeoutCallbacks","IDLE_TIMEOUT","onIdleCallbacks","beforeUnloadCallbacks","onIdle","requestIdleCallback","deadline","shift","timeRemaining","concat","timeout","onBeforeUnload","isLast","unshift","waitFor","interval","attempts","setCancellableTimeout","timeoutId","ApiBaseError","displayError","ApiUserRejectsError","ApiServerError","statusCode","ApiCommonError","ServerError","ApiUnsupportedVersionError","UnsupportedVersion","ApiHardwareBlindSigningNotEnabled","ApiTransactionError","HardwareBlindSigningNotEnabled","handleServerError","MAX_WORKERS","hardwareConcurrency","instances","launchMediaWorkers","fill","Worker","URL","requestMediaWorker","base64","ieee754","customInspectSymbol","Symbol","Buffer","INSPECT_MAX_BYTES","K_MAX_LENGTH","createBuffer","RangeError","buf","Uint8Array","setPrototypeOf","prototype","encodingOrOffset","TypeError","allocUnsafe","string","encoding","isEncoding","byteLength","actual","fromString","ArrayBuffer","isView","arrayView","isInstance","copy","fromArrayBuffer","byteOffset","fromArrayLike","fromArrayView","SharedArrayBuffer","valueOf","b","obj","isBuffer","len","checked","numberIsNaN","fromObject","toPrimitive","assertSize","size","array","mustMatch","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","n","bidirectionalIndexOf","val","dir","arrayIndexOf","lastIndexOf","arr","indexSize","arrLength","valLength","readUInt16BE","foundIndex","found","j","hexWrite","Number","remaining","strLen","parsed","parseInt","utf8Write","blitBuffer","asciiWrite","byteArray","charCodeAt","asciiToBytes","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","apply","decodeCodePointsArray","TYPED_ARRAY_SUPPORT","proto","foo","typedArraySupport","enumerable","poolSize","alloc","allocUnsafeSlow","_isBuffer","compare","a","x","y","list","pos","swap16","swap32","swap64","equals","inspect","max","thisStart","thisEnd","thisCopy","targetCopy","isFinite","toJSON","_arr","ret","out","hexSliceLookupTable","bytes","checkOffset","ext","checkInt","wrtBigUInt64LE","checkIntBI","wrtBigUInt64BE","checkIEEE754","writeFloat","littleEndian","noAssert","writeDouble","newBuf","subarray","readUintLE","readUIntLE","readUintBE","readUIntBE","readUint8","readUInt8","readUint16LE","readUInt16LE","readUint16BE","readUint32LE","readUInt32LE","readUint32BE","readUInt32BE","readBigUInt64LE","defineBigIntMethod","validateNumber","first","last","boundsError","readBigUInt64BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readBigInt64LE","readBigInt64BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUintLE","writeUIntLE","writeUintBE","writeUIntBE","writeUint8","writeUInt8","writeUint16LE","writeUInt16LE","writeUint16BE","writeUInt16BE","writeUint32LE","writeUInt32LE","writeUint32BE","writeUInt32BE","writeBigUInt64LE","writeBigUInt64BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeBigInt64LE","writeBigInt64BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","errors","E","sym","getMessage","Base","addNumericalSeparator","range","ERR_OUT_OF_RANGE","checkBounds","ERR_INVALID_ARG_TYPE","ERR_BUFFER_OUT_OF_BOUNDS","input","received","isInteger","INVALID_BASE64_RE","leadSurrogate","toByteArray","base64clean","src","dst","alphabet","table","i16","BufferBigIntNotDefined","MAX_DP","NAME","INVALID","INVALID_DP","INVALID_RM","DIV_BY_ZERO","P","UNDEFINED","NUMERIC","sd","rm","more","xc","doExponential","isNonzero","charAt","cmp","isneg","yc","l","dp","DP","bl","bt","ri","bz","ai","al","r","rl","q","qc","qi","eq","gt","gte","lt","lte","minus","xlty","plus","xe","ye","mod","ygtx","times","neg","one","prec","sqrt","half","toExponential","toFixed","for","toNumber","strict","toPrecision","_Big_","nl","search","substring","roundDown","roundHalfEven","roundUp","SAFE_EXEC_ENABLED","safeExec","rescue","always","shouldIgnoreError","DETACHED_TAB_URL","ledgerTabId","openLedgerTab","tab","chrome","tabs","create","active","windows","windowId","focused","createLedgerTab","closeLedgerTab","query","closeThisTab","getCurrent","onLedgerTabClose","onClose","closedTabId","onRemoved","callbackState","createPostMessageInterface","api","sendToOrigin","transferables","_e$data","_e$error","_e$error2","_e$reason","_e$reason2","handleErrors","createReverseIFrameInterface","_e$data2","origin","_api$init","lastArg","ImageBitmap","arrayBuffer","MAX_LOG_LENGTH","logs","errorReplacer","metadata","AssertionError","addLog","time","getLogs","level","logDebug","logDebugApi","obj1","obj2","debug","logSelfXssWarnings","selfXssWarnings","es","zh","language","ApiAuthError","ApiTransactionDraftError","randomBytes","crypto","getRandomValues","JettonStakingOpCodes","GET_STATIC_DATA","REPORT_STATIC_DATA","GET_STORAGE_DATA","REPORT_STORAGE_DATA","EXCESSES","TRANSFER_JETTON","INTERNAL_TRANSFER","TRANSFER_NOTIFICATION","PROVIDE_WALLET_ADDRESS","TAKE_WALLET_ADDRESS","BURN_JETTON","ADD_REWARDS","SEND_CLAIMED_REWARDS","SEND_UNSTAKED_JETTONS","APPROVE_STAKE","CANCEL_STAKE","ADD_REWARD_JETTONS","CLAIM_COMMISSIONS","REQUEST_UPDATE_REWARDS","CLAIM_REWARDS","RECEIVE_JETTONS","UNSTAKE_REQUEST","CANCEL_UNSTAKE_REQUEST","UPDATE_REWARDS","CONFIRM_TRANSFER","DEPLOY_NEW_POOL","SEND_COMMISSIONS","SET_CODE","CHANGE_CREATION_FEE","CHANGE_CONTENT","UPDATE_CODES","MIN_RESERVE","DEPLOY_POOL","NOTIFICATION","BURN_JETTONS","CANCEL_UNSTAKE","APPROVE_TRANSFER","SAVE_UPDATED_REWARDS","MIN_EXCESS","SEND_STAKED_JETTONS","Dividers","COMMISSION_DIVIDER","REWARDS_DIVIDER","DISTRIBUTION_SPEED_DIVIDER","DISTRIBUTED_REWARDS_DIVIDER","cachedSetTimeout","cachedClearTimeout","module","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","run","marker","runClearTimeout","Item","noop","nextTick","title","browser","argv","version","versions","on","once","off","emit","prependListener","prependOnceListener","binding","cwd","chdir","umask","pendingMeasureTasks","pendingMutationTasks","pendingForceReflowTasks","runUpdatePassOnRaf","currentMeasureTasks","task","setPhase","currentMutationTasks","pendingForceReflowMutationTasks","mutationTask","throttledFn","requestMutation","requestForcedReflow","isDnsDomain","getDnsDomainZone","zone","suffix","base","isTonDnsNft","nft","collectionAddress","getTonDnsExpirationDate","dnsExpiration","address","filterExpiringDomains","nftAddresses","nftByAddress","expiringDomains","getDomainsExpirationDate","nfts","minDate","nftOrAddress","expirationDate","b64","lens","getLens","validLen","placeHoldersLen","tmp","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","parts","maxChunkLength","len2","encodeChunk","lookup","Element","props","HTMLElement","VisualViewport","Document","HTMLInputElement","MouseEvent","Range","onError","nativeMethods","observer","phase","isStrict","newPhase","enableStrict","LAYOUT_CAUSES","causes","entity","_Object$getOwnPropert","nativeGetter","getOwnPropertyDescriptor","onMeasure","nativeMethod","MutationObserver","mutations","_ref3","attributeName","contains","forcedMutationAllowedFor","contentEditable","clear","observe","childList","attributes","subtree","characterData","forceMeasure","forceMutation","nodes","node","suppressStrict","_observer","disconnect","_ref2","propName","HEALTH_CHECK_TIMEOUT","HEALTH_CHECK_MIN_DELAY","updateCallback","isInitialized","initApi","initArgs","windowMethods","createWindowProvider","IS_IOS","ensureWorkerPing","callApi","fnName","callApiWithThrow","startedAt","isResolved","race","_worker","terminate","TELEGRAM_MOBILE_PLATFORM","IS_PWA","matchMedia","matches","standalone","referrer","PLATFORM_ENV","IS_MAC_OS","IS_WINDOWS","IS_LINUX","IS_ANDROID","IS_SAFARI","IS_OPERA","IS_EDGE","IS_FIREFOX","IS_TOUCH_ENV","IS_CHROME_EXTENSION","Boolean","_window$chrome","system","IS_ELECTRON","electron","IS_WEB","DEFAULT_LANG_CODE","USER_AGENT_LANG_CODE","some","getBrowserLanguage","DPR","devicePixelRatio","IS_LEDGER_SUPPORTED","IS_LEDGER_EXTENSION_TAB","global","hash","IS_BIOMETRIC_AUTH_SUPPORTED","credentials","IS_DELEGATED_BOTTOM_SHEET","IS_DELEGATING_BOTTOM_SHEET","isIPad","IS_MULTITAB_SUPPORTED","IS_DAPP_SUPPORTED","IS_IOS_APP","IS_ANDROID_APP","IS_CLIPBOARDS_SUPPORTED","REM","getComputedStyle","documentElement","fontSize","STICKY_CARD_INTERSECTION_THRESHOLD","setScrollbarWidthProperty","el","createElement","cssText","classList","appendChild","width","offsetWidth","clientWidth","setProperty","getIsMobileTelegramApp","_window$Telegram","Telegram","WebApp","parseAccountId","accountId","network","buildAccountId","account","getMainAccountAddress","addressByChain","values","getAccountTitle","shortenAddress","buildCollectionByKey","collection","byKey","member","groupBy","groupKey","mapValues","newByKey","pick","object","pickTruthy","omit","stringKeys","omitUndefined","stringKey","orderBy","orderRule","mode","compareValues","currentOrderRule","isAsc","aValue","bValue","mode1","mode2","orderRule1","orderRule2","isAsc1","isAsc2","sort","unique","compact","areSortedArraysEqual","array1","array2","every","cloneDeep","isObject","isLiteralObject","findLast","predicate","cursor","extractKey","findDifference","set2","diff","filterValues","swapKeysAndValues","MEANINGFUL_CHAR_LENGTH","fromRight","FILLER","SecureStoragePlugin","resolvePromise","capacitorStorageGetItem","_await$get$catch","capacitorStorageSetItem","capacitorStorageRemoveItem","capacitorStorageClear","capacitorStorageKeys","localStorageGetItem","localStorage","getItem","localStorageSetItem","setItem","localStorageRemoveItem","removeItem","localStorageClear","localStorageGetAll","localStorageGetMany","localStorageSetMany","items","MAX_COMMENT_SIZE","BROKEN_CONNECTION_ERRORS","isValidLedgerComment","comment","isAscii","isLedgerCommentLengthValid","isLedgerConnectionBroken","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","getPrototypeOf","ns","def","current","getOwnPropertyNames","definition","o","chunkId","all","promises","u","miniCssF","Function","hasOwnProperty","done","script","needAttach","scripts","getElementsByTagName","getAttribute","charset","nc","setAttribute","onScriptComplete","prev","doneFns","parentNode","removeChild","head","toStringTag","scriptUrl","importScripts","currentScript","tagName","toUpperCase","baseURI","href","installedChunks","installedChunkData","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","runtime","chunkLoadingGlobal","arePropsShallowEqual","currentProps","newProps","currentKeys","currentKeysLength","logUnequalProps","debugKey","KEYS_TO_IGNORE","counters","renderCountersThrottled","loggerEl","clearEl","innerText","setupOverlay","halfSecondAgo","maxRenders","maxDuration","innerHTML","lastUpdateAt","content","background","textContent","parent","factor","incrementOverlayCounter","createCallbackManager","callbacks","removeCallback","runCallbacks","addCallback","hasCallbacks","SIGNAL_MARK","isSignal","unsubscribesByEffect","createSignal","defaultValue","state","effects","subscribe","effect","unsubscribe","unsubscribes","unsub","counter","counterBlocking","getIsAnimating","setIsAnimating","getIsBlockingAnimating","setIsBlockingAnimating","getIsHeavyAnimating","beginHeavyAnimation","isBlocking","hasEnded","onFullyIdle","VirtualType","MountState","Fragment","DEBUG_SILENT_RENDERS_FOR","renderingInstance","lastComponentId","isParentElement","$element","Tag","Component","source","children","buildChildren","buildFragmentElement","componentInstance","mountState","Unmounted","buildComponentElement","createComponentInstance","tag","buildTagElement","noEmpty","cleanChildren","isEmptyPlaceholder","dropEmptyTail","newChildren","child","buildChildElement","Empty","Text","DEBUG_components","TOTAL","renders","DEBUG_memos","avgRenderTime","calls","hitRate","instancesPendingUpdate","idsToExcludeFromUpdate","pendingEffects","pendingCleanups","pendingLayoutEffects","pendingLayoutCleanups","areImmediateEffectsCaptured","runImmediateEffects","captureImmediateEffects","instancesToUpdate","currentCleanups","currentEffects","prepareComponentForFrame","instance","currentElement","renderComponent","forceUpdateComponent","runCapturedImmediateEffects","currentLayoutCleanups","currentLayoutEffects","newRenderedValue","DEBUG_startAt","hooks","memos","refs","componentName","DEBUG_resolveComponentName","performance","renderedValue","Mounted","hasElementChanged","$old","$new","unmountComponent","_componentInstance$ho","byCursor","_effect$releaseSignal","cleanup","releaseSignals","hook","schedule","dependencies","nextValue","setter","onChange","helpGc","_componentInstance$ho2","useState","initial","useEffectBase","isLayout","effectConfig","_byCursor$cursor","cleanupsContainer","effectsContainer","effectId","runEffectCleanup","runEffect","scheduleEffect","dependency","causedBy","prevValue","cleanups","signal","setupSignals","useEffect","useLayoutEffect","useMemo","debugHitRateKey","DEBUG_state","instanceKey","misses","useCallback","newCallback","useRef","useSignal","signalRef","memo","TeactMemoWrapper","DEBUG_contentComponentName","useForceUpdate","setTrigger","trigger","next","shouldSkipUndefined","ref","useSyncEffect","prevDeps","usePrevious","cleanupRef","_cleanupRef$current","useEffectOnce","_cleanupRef$current2","useUniqueId","prefix","idRef","DEBUG_currentRandomId","currentGlobal","isInited","DEBUG_invalidateGlobalOnTickEnd","actionHandlers","container","containers","mapStateToProps","ownProps","mappedProps","forceUpdate","activateContainer","newMappedProps","DEBUG_componentName","DEBUG_updates","updateTime","actions","runCallbacksThrottled","forceOnHeavyAnimation","setUntypedGlobal","newGlobal","forceOutdated","DEBUG_randomId","forceSyncOnIOs","getUntypedGlobal","getUntypedActions","forceOnHeavyAnimationOnce","actionQueue","activationFn","stuckTo","stickTo","getGlobal","setGlobal","getActions","typed","TeactNContainer","useUnmountCleanup","React","_extends","addActionHandler","_actionHandlers$name","handleAction","withGlobal","isEmptyObject","isKeyCountGreater","countToOutnumber","keyCount","isViewAccount","accountType","memoize","ttlSeconds","isCacheDisabled","isDisabledUntil","isStale","lastTime","lastArgs","lastResult","disableCache","seconds","selectAccounts","_global$accounts","accounts","byId","selectNetworkAccountsMemoized","accountsById","fromEntries","selectNetworkAccounts","_global$accounts2","selectCurrentNetwork","settings","isTestnet","selectCurrentAccount","selectAccount","currentAccountId","_selectAccounts","selectAccountOrAuthAccount","auth","firstNetworkAccount","secondNetworkAccount","selectCurrentAccountState","selectAccountState","byAccountId","selectAccountSettings","selectCurrentAccountSettings","isHardwareAccount","selectIsHardwareAccount","selectAllHardwareAccounts","selectIsOneAccount","selectEnabledTokensCountMemoizedFor","tokens","isDisabled","isMnemonicAccount","selectIsMnemonicAccount","selectIsPasswordPresentMemoized","selectIsPasswordPresent","selectVestingPartsReadyToUnfreeze","_selectAccountState","vesting","info","currentVesting","part","partId","selectAccountNftByAddress","nftAddress","_selectAccountState2","byAddress","selectIsMultichainAccount","_selectAccount","selectIsBiometricAuthEnabled","authConfig","kind","selectIsNativeBiometricAuthEnabled","selectIsAllowSuspiciousActions","accountSettings","isAllowSuspiciousActions","selectIsCurrentAccountViewMode","isNftTransferPayload","isTokenTransferPayload","selectCurrentDappTransferTotalsMemoized","transactions","amountsBySlug","addSlugAmount","amount","isScam","isDangerous","nftCount","transaction","networkFee","selectDappTransferInsufficientTokensMemoized","balances","tokensBySlug","insufficientTokens","requiredAmount","token","selectCurrentDappTransferTotals","currentDappTransfer","selectDappTransferInsufficientTokens","_accountState$balance","accountState","bySlug","tokenInfo","precision","roundingMode","selectAccountTokensMemoizedFor","balancesBySlug","isSortByValueEnabled","areTokensWithNoCostHidden","isNewAccount","getIsNewAccount","_accountSettings$dele","deletedSlugs","_accountSettings$alwa","_accountSettings$alwa2","color","codeHash","balanceBig","totalValue","hasCost","isPricelessTokenWithBalance","alwaysShownSlugs","alwaysHiddenSlugs","change24h","tokenA","tokenB","orderedSlugs","priorityA","priorityB","selectCurrentAccountTokens","selectAccountTokens","selectCurrentAccountTokenBalance","_selectCurrentAccount","selectCurrentToncoinBalance","selectTokenAddress","selectToken","selectMycoin","selectChainTokenWithMaxBalanceSlow","maxToken","currentToken","compareActivities","getIsActivityPending","timestamp","getKey","getFromCache","updatePoisoningCache","tx","fromAddress","addToCache","getIsTransactionWithPoisoning","clearPoisoningCache","TRANSACTION_TYPE_TITLES","stake","unstake","unstakeRequest","callContract","excess","contractDeploy","bounced","mint","burn","auctionBid","dnsChangeAddress","dnsChangeSite","dnsChangeSubdomains","dnsChangeStorage","dnsDelete","dnsRenew","liquidityDeposit","liquidityWithdraw","STAKING_TRANSACTION_TYPES","DNS_TRANSACTION_TYPES","parseTxId","txId","subId","getIsTxIdLocal","getIsBackendSwapId","getActivityTokenSlugs","activity","getIsActivitySuitableForFetchingTimestamp","getTransactionTitle","tense","translate","titles","isIncoming","isScamTransaction","_transaction$metadata","shouldShowTransactionComment","encryptedComment","getTransactionAmountDisplayMode","shouldShowTransactionAddress","toAddress","marketplace","isOurStakingTransaction","shouldShowTransactionAnnualYield","getActivityIdReplacements","prevActivities","nextActivities","prevLocalActivities","prevChainActivities","getLocalActivityIdReplacements","getChainActivityIdReplacements","idReplacements","nextActivityIds","nextChainActivities","localActivity","prevId","chainActivity","doesLocalActivityMatch","nextActivitiesByMessageHash","externalMsgHashNorm","nextSubActivities","_localActivity$extra","withW5Gasless","normalizedAddress","fromAmount","shouldHide","selectNewestActivityTimestamps","activities","newestActivitiesBySlug","selectLocalActivitiesSlow","_global$byAccountId$a","localActivityIds","selectPendingActivitiesSlow","_global$byAccountId$a2","pendingActivityIds","ids","selectIsHistoryEndReached","isMainHistoryEndReached","isHistoryEndReachedBySlug","AppState","AuthState","BiometricsState","TransferState","ScamWarningType","SignDataState","DomainRenewalState","DomainLinkingState","SwapState","SwapInputSource","SwapErrorType","SwapType","DappConnectState","HardwareConnectState","StakingState","VestingUnfreezeState","SettingsState","MintCardState","ActiveTab","ContentTab","MediaType","LoadMoreDirection","getChainConfig","findChainConfig","chainByNativeSlug","getIsNativeToken","getIsTonToken","withNative","getNativeToken","getChainBySlug","getIsServiceToken","buildUserToken","createTokenList","swapTokenInfo","sortFn","filterFn","keywords","canSwap","selectPopularTokensMemoizedFor","popularTokenOrder","orderMap","selectSwapTokensMemoizedFor","localeCompare","selectAccountTokensForSwapMemoizedFor","selectSwapTokens","_selectCurrentAccount3","selectCurrentSwapTokenIn","tokenInSlug","currentSwap","selectCurrentSwapTokenOut","tokenOutSlug","selectSwapType","tokenInChain","tokenOutChain","OnChain","CrosschainFromWallet","CrosschainToWallet","selectIsSwapDisabled","restrictions","isSwapDisabled","explainApiTransferFee","diesel","shouldUseDiesel","dieselKey","realFeeInDiesel","exampleFromAmount","exampleToAmount","exchangeRate","convertFee","realFee","nativeAmount","dieselRealFee","nativeRealFee","isGasless","canTransferFullBalance","fullFee","terms","native","remainingFee","nativeSum","excessFee","explainGaslessTransferFee","fee","explainGasfullTransferFee","getMaxTransferAmount","getDieselTokenAmount","isValidAddressOrDomain","allowPrefix","config","selectCurrentTransferMaxAmount","currentTransfer","selectTokenMatchingCurrentTransferAddressSlow","currentTokenSlug","currentChain","isCheckingPrefix","availableChains","selectAccountStakingStatesMemoizedFor","stateDefault","stateById","states","selectAccountStakingStates","staking","stakingDefault","selectAccountStakingStatesBySlugMemoizedFor","stakingStates","selectAccountStakingStatesBySlug","selectAccountStakingState","stakingId","shouldUseNominators","selectAccountStakingHistory","stakingHistory","selectIsStakingDisabled","selectTonDnsLinkedAddress","linkedAddressByAddress","accountIds","apiUpdate","isElectron","isNativeBottomSheet","isIosApp","isAndroidApp","newestActivityTimestamps","isDefaultEnabled","areAllDisabled","toggleTonMagic","isEnabled","toggleTonProxy","toggleDeeplinkHook","changeBaseCurrency","currency","BiometryType","BiometricAuthError","NativeBiometric","NativeBiometricWeb","WINDOW_RESIZE_THROTTLE_MS","WINDOW_ORIENTATION_CHANGE_THROTTLE_MS","SAFE_AREA_INITIALIZATION_DELAY","initialHeight","innerHeight","virtualKeyboardOpenListeners","currentWindowSize","updateSizes","patchVh","toggleSafeAreaClasses","safeAreaTop","safeAreaBottom","getWindowSize","updateSafeAreaValues","innerWidth","height","screenHeight","screen","getSafeAreaTop","getSafeAreaBottom","Keyboard","adjustBodyPaddingForKeyboard","keyboardHeight","visualViewport","pageTop","vh","paddingBottom","getPropertyValue","toggle","webApp","isBiometricInited","isNativeBiometricAuthSupported","isFaceIdAvailable","isTouchIdAvailable","disableSwipeRequests","getIsTelegramBiometricsRestricted","_webApp2","biometricManager","BiometricManager","isBiometricAvailable","isAccessGranted","isAccessRequested","getTelegramApp","getTelegramAppAsync","updateSafeAreaProperties","top","left","right","bottom","safeAreaInset","contentTop","contentLeft","contentRight","contentBottom","contentSafeAreaInset","updateFullscreenState","isFullscreen","openFullscreen","disableTelegramMiniAppSwipeToClose","closeFullscreen","enableTelegramMiniAppSwipeToClose","onFullscreenFailed","_webApp3","disableVerticalSwipes","_webApp4","enableVerticalSwipes","requestBiometricAccess","requestAccess","accessGranted","setBiometricCredentials","password","updateBiometricToken","updated","verifyIdentity","authenticate","success","PubkeyAlg","RP_NAME","USER_NAME","createCredential","rpId","hostname","userHandle","credBlob","publicKey","challenge","rp","user","displayName","pubKeyCredParams","alg","ES256","RS256","Ed25519","authenticatorSelection","requireResidentKey","userVerification","extensions","hmacCreateSecret","excludeCredentials","credential","getClientExtensionResults","verify","transports","getTransports","credentialId","rawId","allowCredentials","getCredBlob","assertion","getPassword","AbortController","aborted","webAuthn","_window$electron","encryptedPassword","encryptPassword","setTelegramBiometricCredentials","setCredentials","username","server","deleteCredentials","_window$electron2","decryptPassword","isVerified","verifyTelegramBiometricsIdentity","subtitle","isWeakAuthenticatorAllowed","maxAttempts","getCredentials","App","AppWeb","SplashScreen","SplashScreenWeb","SafeArea","SafeAreaWeb","AppLauncher","AppLauncherWeb","BottomSheet","stopEvent","stopPropagation","listenOnce","handleEvent","_navigator","userAgentData","devicePlatform","initConnectorString","bridgeKey","tonConnectProperties","TON_CONNECT_BRIDGE_METHODS","updateHandlers","sanitizeUrl","open","close","closest","tonconnect","listen","initTonConnect","CONNECT_EVENT_ERROR_CODES","SEND_TRANSACTION_ERROR_CODES","requestId","buildConnectError","UNKNOWN_ERROR","buildDappRequest","isUrlEnsured","buildBridgeApi","pageUrl","closeBrowser","tonConnectApi","openLoadingOverlay","closeLoadingOverlay","connect","protocolVersion","BAD_REQUEST_ERROR","_request$items","manifestUrl","verifyConnectRequest","restoreConnection","send","_global$byAccountId$d","dapps","dapp","UNKNOWN_APP_ERROR","dappRequest","applyScrollPatch","anyRequest","buildTonConnectBridgeApi","prefixedTonConnectApi","newEntries","v","prefixApi","openDeeplinkOrUrl","isExternal","isFromInAppBrowser","useStateRef","useLastCallback","_ref$current","InAppBrowserPostMessageAdapter","inAppBrowser","executeScript","URL_REGEX","VALID_PROTOCOLS","EXPLORER_CONFIGURATIONS","explorer","getHostnameFromUrl","getExplorerName","getExplorerBaseUrl","getExplorerTransactionUrl","transactionHash","getExplorerAddressUrl","getExplorerNftUrl","isTelegramUrl","getCardNftImageUrl","mtwCardId","SIMPLE_MARKDOWN_REGEX","renderText","filters","entities","match","entityResult","splittenParts","line","trimmedLine","trimStart","indentLength","repeat","cacheApi","caches","cacheName","SHORT_SYMBOLS","formatNumber","fractionDigits","noTruncate","bigValue","isNegative","formatted","wholePart","fractionPart","applyThousandsGrouping","formatCurrency","addCurrency","formatCurrencyExtended","noSign","isZeroNegative","numericValue","formatCurrencySimple","getShortCurrencySymbol","formatBaseCurrencyAmount","baseCurrency","defaultLangPack","defaultLangPackJson","SUBSTITUTION_REGEX","PLURAL_OPTIONS","PLURAL_RULES","de","pl","th","tr","uk","langPack","currentLangCode","createLangFn","format","pluralValue","_langPack","cacheValue","langString","preferredPluralOption","optionIndex","getPluralOption","template","otherValue","formattedValue","translationSlices","initialValue","processTemplate","processedTemplate","RegExp","tokenValue","processTemplateJsx","processTranslation","getTranslation","setLanguage","newLangPack","Request","remote","cacheData","Blob","Response","fetchRemote","langInfo","isRtl","langName","useLang","langProvider","buildClassName","clamp","isBetween","SwipeDirection","getDistance","hypot","pageX","pageY","getTouchCenter","lastClickTime","lethargy","stability","sensitivity","tolerance","delay","lastUpDeltas","lastDownDeltas","deltasTimestamp","check","lastDelta","originalEvent","wheelDelta","deltaY","detail","isInertia","direction","lastDeltas","lastDeltasOld","lastDeltasNew","oldSum","newSum","oldAverage","newAverage","captureEvents","captureEvent","hasMoved","hasSwiped","isZooming","initialDistance","wheelZoom","initialZoom","initialDragOffset","isDragCanceled","windowSize","initialSwipeAxis","initialTouchCenter","minZoom","maxZoom","onCapture","_options$onCapture","excludedClosestSelector","includedClosestSelector","withNativeDrag","withCursor","onDrag","onMove","onRelease","passive","touches","selectorToPreventScroll","querySelectorAll","scrollable","overflow","onDoubleClick","centerX","centerY","onClick","button","newWindowSize","onZoom","endDistance","touchCenter","dragOffsetX","dragOffsetY","zoomFactor","initialCenterX","initialCenterY","currentCenterX","currentCenterY","shouldPreventScroll","onSwipe","xAbs","yAbs","threshold","swipeThreshold","axis","currentSwipeAxis","offsets","Left","Right","Up","Down","processSwipe","releaseWheelDrag","releaseWheelZoom","onWheelCapture","onWheel","doubleTapZoom","is","deltaX","ctrlKey","metaKeyPressed","metaKey","shiftKey","delta","zoom","onWheelZoom","isUserEvent","sign","dx","dy","onWheelDrag","withWheelDrag","isNotPassive","keyToHandlerName","Enter","Backspace","Delete","Esc","Escape","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","handlers","onEnter","onDelete","onBackspace","onEsc","onUp","onDown","onLeft","onRight","onTab","captureKeyboardListeners","hasActiveHandlers","handleKeyDown","handlerName","option","currentEventHandlers","findIndex","releaseKeyboardListener","keyHandlers","handlerOrOptions","noStopPropagation","shouldPreventDefault","disableSwipeToClose","enableSwipeToClose","trapFocus","focusableElements","currentFocusedIndex","em","isSameNode","activeElement","newFocusedIndex","focus","cssColorToHex","cssColor","parseFloat","Style","Animation","StatusBar","NavigationBarPluginEvents","NavigationBar","NavigationBarWeb","prefersDark","currentTheme","forcedDarkStatusBarBackground","switchTheme","theme","isInModal","setThemeValue","setStatusBarStyle","_document$querySelect","querySelector","_getTelegramApp","isDarkTheme","colorScheme","handlePrefersColorSchemeChange","_getTelegramApp2","_getTelegramApp3","_getTelegramApp4","hexColor","setHeaderColor","setBackgroundColor","setBottomBarColor","forceDarkBackground","currentAppTheme","isSystemDark","isModalOpen","Dark","Light","setStyle","setColor","darkButtons","switchStatusBar","onThemeChanged","telegramApp","onEvent","queriesMap","createQueryEntry","mql","dispatchers","useMediaQuery","setState","initializeWithValue","getInitialState","querySubscribe","queryUnsubscribe","isPortrait","useDeviceScreen","isSmallHeight","isLandscape","getIsPortrait","useEffectWithPrevDeps","prevDepsRef","controlledByMain","textInputTypes","safeAreaCache","safeAreaPromise","getSafeAreaInsets","insets","currentKey","isForcedFullSize","useOpenFromMainBottomSheet","isInput","isContentEditable","_controlledByMain$get","globalJson","dispatchEvent","Event","controlledByNative","prepare","_controlledByNative$g","closeCurrent","lastOpenCall","runDebounce","isGlobalHandlerAttached","uniqueId","updateBackButtonState","backButton","BackButton","show","handleBackButtonClick","hide","offClick","PATH_BASE","pathname","historyUniqueSessionId","historyState","historyCursor","isAlteringHistory","deferredHistoryOperations","deferredPopstateOperations","applyDeferredHistoryOperations","goOperations","op","stateOperations","goCount","history","go","processStateOperations","deferHistoryOperation","historyOperation","resetHistory","onBack","back","replaceState","cleanupClosed","countClosed","isClosed","cleanupTrashedState","_historyState$i$onBac","_historyState$i","useHistoryBack","isActive","shouldBeReplaced","shouldIgnoreForTelegram","lastOnBack","indexRef","telegramIdRef","wasReplaced","isFirstRender","pushState","shouldReplace","previousRecord","_previousRecord$markR","markReplaced","processBack","prevIsActive","registerTelegramCallback","unregisterTelegramCallback","TEST_getHistoryState","TEST_getHistoryCursor","previousUniqueSessionId","alreadyClosedCount","_historyState$i$onBac2","_historyState$i2","NON_BUBBLEABLE_EVENTS","documentEventCounters","delegationRegistryByEventType","delegatedEventTypesByElement","resolveEventType","eventType","canUseEventDelegation","realEventType","asCapture","removeDelegatedListener","realEvent","events","furtherCallsPrevented","Reflect","documentListenersCount","delegatedHandlersCount1","delegationRegistriesCount","delegatedHandlersCount2","delegationRegistry","delegationElementsCount","delegatedEventTypesCount","eventTypes","SVG_NAMESPACE","FILTERED_ATTRIBUTES","HTML_ATTRIBUTES","CONTROLLABLE_TAGS","MAPPED_ATTRIBUTES","autoCapitalize","autoComplete","autoCorrect","autoPlay","spellCheck","INDEX_KEY_PREFIX","SELECTION_STATE_ATTRIBUTE","headsByElement","extraClasses","extraStyles","renderWithVirtual","parentEl","$current","$parent","currentContext","_$new","_$new2","_$new3","skipComponentUpdate","nextSibling","namespace","isCurrentComponent","isNewComponent","$newAsReal","isCurrentFragment","isNewFragment","xmlns","updateComponent","setupComponentUpdateListener","newTarget","initComponent","context","mountChildren","firstChild","createNode","insertBefore","setElementRef","remount","getNextSibling","renderChildren","forceMoveToEnd","$currentAsReal","currentTarget","$newAsTag","processControlled","currentEntries","currentValue","removeAttribute","updateAttributes","Mounting","mountComponent","fragmentEl","placeholderTarget","createComment","$child","$renderedChild","createTextNode","createElementNS","defaultChecked","processUncontrolledOnMount","componentNextSibling","isComponent","isFragment","unmountChildren","replaceChild","unmountRealTree","_fragment$placeholder","removeAllDelegatedListeners","currentEl","DEBUG_checkKeyUniqueness","teactFastList","currentChildren","newKeys","$newChild","currentRemainingIndex","remainingByKey","$currentChild","isKeyPresent","newChildKey","orderKey","teactOrderKey","fragmentIndex","fragmentSize","currentPreservedIndex","currentChildInfo","renderFragment","newOrderKey","shouldMoveNode","isMovingDown","childNodes","renderFastListChildren","currentFragment","newFragment","_currentFragment$plac","siblingAfterFragment","currentChildrenLength","newChildrenLength","maxLength","createDocumentFragment","lastCurrentChild","fragmentNextSibling","_ref$onChange","isValueControlled","isCheckedControlled","onInput","onBlur","selectionStart","selectionEnd","isCaretAtEnd","setSelectionRange","selectionState","dataset","updateClassName","inputEl","selectionStateJson","updateStyle","__html","resolveDelegationRegistry","existing","newSet","resolveDelegatedEventTypes","addDelegatedListener","htmlElement","className","extraArray","applyExtraStyles","addExtraClass","removeExtraClass","toggleExtraClass","force","_extraClasses$get","setExtraStyles","styles","standardStyles","$head","useSignalEffect","isFirstRun","_unsubscribesByEffect","cleanupEffect","resolverOrDependency","isAsync","getValue","setValue","resolverRef","runCurrentResolver","currentResolver","resolverOrSignal","valueRef","isSync","useLayoutEffectWithPrevDeps","CLOSE_DURATION","useShowTransition","isOpen","noMountTransition","noOpenTransition","noCloseTransition","closeDuration","shouldForceOpen","onCloseAnimationEnd","localRef","closingTimeoutRef","getState","optionsRef","onCloseEndLast","useSyncEffectWithPrevDeps","prevIsOpen","applyClassNames","shouldRender","hasOpenClass","isClosing","withShouldRender","useDerivedState","getIsClosing","useDerivedSignal","useToggleClass","isDoubled","ariaLabel","forFormId","isSubmit","isPrimary","isSecondary","isSmall","isSimple","isText","isLoading","isRound","isDestructive","shouldStopPropagation","onMouseDown","onContextMenu","isClicked","setIsClicked","handleClick","loadingClassName","loadingInit","loadingStart","primary","secondary","sizeSmall","disabled","destructive","clicked","LoadingDots","loadingDots","containerId","elementRef","TeactDOM","CLOSE_DURATION_PORTRAIT","getModalCloseSignal","setModalCloseSignal","openNativeBottomSheetModals","FreezeWhenClosedModal","dialogRef","dialogClassName","titleClassName","contentClassName","doesWantToBeOpened","isTemporarilyClosed","isCompact","nativeBottomSheetKey","forceFullNative","forceBottomSheet","isInAppLock","noResetFullNativeOnBlur","noBackdrop","noBackdropClose","header","hasCloseButton","onCloseProp","modalRef","localDialogRef","swipeDownDateRef","getInAppBrowser","enable","useHideBrowser","animationDuration","isSlideUp","toggleSelfFullSize","isFullSize","isBrowserHidden","setIsBrowserHidden","isDelegatingToNative","isDelegating","shouldOpen","prevShouldOpen","_closeCurrent","closeNext","delegate","release","useDelegatingBottomSheet","noResetHeightOnBlur","dialogEl","openSelf","offsetHeight","backgroundColor","closeSelf","isDelegatedAndOpen","safeArea","setSafeArea","maxHeight","_ref4","prevForceFullNative","blurTimeout","onFocus","opacity","scrollTop","useDelegatedBottomSheet","lastScrollRef","scrollEl","getCanCloseModal","fullClassName","modal","slideUpAnimation","inAppLock","backdropFullClass","backdrop","contentFullClassName","contentCompact","Portal","tabIndex","role","dialog","header_wideContent","header_noClose","singleTitle","Button","closeButton","closeIcon","isAppLockActive","currentBrowserOptions","animationLevel","setupDappBridge","cleanupDappBridge","useInAppBrowserBridgeProvider","bridgeInjectionCode","features","maxMessages","types","appName","appVersion","maxProtocolVersion","tonConnectGetDeviceInfo","handleBrowserClose","openBrowser","isShown","disable","browserTitle","browserSubtitle","ADDITIONAL_INAPP_BROWSER_OPTIONS","cordova","InAppBrowser","INAPP_BROWSER_OPTIONS","originalHide","originalShow","originalClose","closedPromise","_inAppBrowser","closeAllOverlays","_getInAppBrowser","closeAnyModal","closeMediaViewer","replaceActivityId","oldId","replaceMap","SUBPROJECT_HOST_ENDING","openUrl","isSubproject","allowedOrigin","isInIframeWhitelist","couldOpenApp","completed","openAppSafe","host","handleUrlClick","resolveRenderPromise","renderPromise","TON_PROTOCOL","TONCONNECT_PROTOCOL","TONCONNECT_PROTOCOL_SELF","SELF_PROTOCOL","SELF_UNIVERSAL_URLS","TONCONNECT_UNIVERSAL_URL","CHECKIN_URL","DeeplinkCommand","urlAfterSignIn","urlOptions","isTonDeeplink","isTonConnectDeeplink","isSelfDeeplink","processDeeplink","returnUrl","processTonConnectDeeplink","deeplink","convertSelfDeeplinkToSelfUrl","searchParams","command","isLedger","ledger","CheckinWithR","_pathname$match","Giveaway","_pathname$match2","giveawayId","Swap","showError","startSwap","amountIn","toNumberOrEmptyString","BuyWithCrypto","BuyWithCard","openOnRampWidgetModal","Stake","startStaking","Transfer","processTonDeeplink","convertSelfUrlToTonDeeplink","Explore","closeSettings","openExplore","setActiveContentTab","_getGlobal$exploreDat","matchingSite","exploreData","sites","processSelfDeeplink","startTransferParams","parseTonDeeplink","startTransfer","setLandscapeActionsActiveTabIndex","adaptedDeeplink","getDeeplinkSearchParam","binPayload","jettonAddress","stateInit","exp","supportedParams","hasUnsupportedParams","param","replaceAllSpacesWithPlus","rawParseTonDeeplink","transferParams","globalToken","minter","selectTokenByMinterAddress","accountToken","accountTokens","selectAccountTokenBySlug","accountNft","selectCurrentAccountNftByAddress","omitProtocol","forceHttpsProtocol","parseDeeplinkTransferParams","tonDeeplink","selfUniversalUrl","PushNotifications","selectNotificationTonAddressesSlow","maxCount","resultCount","getCapacitorPlatform","nextUpdatePushNotifications","handlePushNotificationActionPerformed","notification","showAnyAccountTx","showAnyAccountTokenActivity","openAnyAccountStakingInfo","switchAccountAndOpenUrl","openDomainRenewalModal","notificationData","action","requiredAccount","selectAccountIdByAddress","domainAddress","addresses","handlePushNotificationRegistration","userToken","registerNotifications","notificationAccounts","pushNotifications","enabledAccounts","capture","statusBarHeight","capacitorAppLaunchDeeplinkProcessedAt","safeAreaInsets","getIsNativeBiometricAuthSupported","getIsFaceIdAvailable","getIsTouchIdAvailable","getDoesUsePinPad","ClipboardWeb","clipboard","writeText","ClipboardItem","clipboardItemInput","readText","clipboardItems","clipboardBlob","getType","_getBlobData","readAsText","onloadend","Clipboard","Haptics","HapticsWeb","vibrate","HapticFeedback","impactOccurred","impact","vibrateOnError","notificationOccurred","Medium","vibrateOnSuccess","withPauseOnEnd","textCopyEl","copyTextToClipboard","readClipboardContent","readTextFromClipboard","isMnemonicPrivateKey","mnemonic","EQUAL","DELETE","__delete","DELETE_ALL_CHILDREN","__deleteAllChildren","deepDiff","value2","object1","object2","keys1","keys2","subValue1","subValue2","subDiff","deepMerge","oldValue","reduceDiff","getIsInBackgroundLocal","setIsInBackground","hasFocus","getIsInBackground","handleBlur","handleFocus","useBackgroundMode","lastOnBlur","lastOnFocus","isBackgroundModeActive","BroadcastChannel","initMultitab","noPubGlobal","onGlobalChange","handleGlobalChange","handleMultitabMessage","omitLocalOnlyKeys","callActionInMain","callActionInNative","INITIAL_STATE","appState","Auth","none","biometrics","None","hardware","hardwareState","Connect","currentDomainRenewal","currentDomainLinking","slippage","currentDappSignData","currentStaking","tokenPriceHistory","Initial","areTinyTransfersHidden","canPlaySounds","isAppLockEnabled","autolockValue","dialogs","notifications","stateVersion","isLimitedRegion","isOnRampDisabled","isNftBuyingDisabled","mediaViewer","areDeepEqual","type1","isArray1","member1","key1","key2","isPartialDeepEqual","newPartial","updateAuth","authUpdate","updateAccounts","setIsPinAccepted","isPinAccepted","clearIsPinAccepted","createAccount","partial","titlePostfix","isMnemonicImported","importedAt","shouldForceAccountEdit","_account$title","accountAmount","isMainnet","viewWalletsCount","titlePrefix","postfix","count","updateAccount","createAccountsFromGlobal","updateCurrentAccountState","updateAccountState","withDeepCompare","doesAccountExist","updateSettings","settingsUpdate","updateAccountSettings","updateCurrentAccountSettings","updateBiometrics","biometricsUpdate","updateCurrentAccountId","shouldAvoidSwapEstimation","isEstimating","Blockchain","Password","isSwapEstimateInputEqual","swap1","swap2","amountKey","inputSource","In","isMaxAmount","isSwapFormFilled","getSwapEstimateResetParams","amountOut","amountOutMin","priceImpact","limits","dieselStatus","estimates","bestRateDexLabel","realNetworkFee","swapFee","swapFeePercent","ourFee","ourFeePercent","dieselFee","rawUpdateCurrentSwap","updateCurrentSwap","doAvoidEstimation","globalBefore","globalAfter","doesSwapChangeRequireEstimation","_ref5","doesSwapChangeRequireDexUnselect","isDexLabelChanged","clearCurrentSwap","updateCurrentTransferByCheckResult","preserveMaxTransferAmount","updateCurrentTransfer","toAddressName","addressName","clearCurrentTransfer","prevGlobal","nextGlobal","previousMaxAmount","updateCurrentTransferLoading","setCurrentTransferAddress","updateCurrentSignature","currentSignature","updateCurrentStaking","updateAccountStaking","updateDappConnectRequest","dappConnectRequest","clearDappConnectRequest","updateCurrentDappTransfer","clearCurrentDappTransfer","updateCurrentDappSignData","clearCurrentDappSignData","addNewActivities","newActivities","idsBySlug","idsMain","mergeSortedActivityIds","newIdsBySlug","buildActivityIdsBySlug","_pendingActivityIds","mergeIdsBySlug","getNewestActivitiesBySlug","addPastActivities","pastActivities","isEndReached","removeActivities","_ids","_idsMain","_localActivityIds","affectedTokenSlugs","activityIds","tokenSlugs","getActivityListTokenSlugs","pendingIds","ids0","ids1","id0","id1","newestActivityId","oldIdsBySlug","activityById","newIds","addNft","shouldAppendToEnd","orderedAddresses","updateNft","_nfts$byAddress","updateAccountSettingsBackgroundNft","_settings$cardBackgro","cardBackgroundNft","updateVesting","updateMintCards","currentMintCard","updateCurrentDomainRenewal","updateCurrentDomainLinking","updateHardware","hardwareUpdate","resetHardware","switchAccount","newNetwork","switchAccountAndClearGlobal","changeNetwork","selectMnemonicForCheck","worldsCount","rnd","reduceGlobalForDebug","reduced","_ref15","getIsTinyOrScamTransaction","resolveSwapAssetId","asset","resolveSwapAsset","anyId","getIsSupportedChain","getIsInternalSwap","isMultichain","updateTokenInfo","Main","isFirstAccount","isPasswordPresent","nextAuthState","createBackup","createWallet","createPin","createBiometrics","createPassword","checkPassword","promiseCalls","forceAddingTonOnlyAccount","mnemonicCheckIndexes","afterCreatePassword","requestConfetti","importWalletConfirmBiometrics","confirmBiometrics","biometricsStep","pin","isImporting","importWalletConfirmPin","confirmPin","importWalletCreateNativeBiometrics","createNativeBiometrics","skipCreateNativeBiometrics","importWalletCreatePin","isPasswordNumeric","createHardwareAccounts","withCredential","authApi","isAddAccountModalOpen","afterConfirmDisclaimer","disclaimer","disclaimerAndBackup","hardwareSelectedIndices","ledgerApi","wallets","wallet","importLedgerWallet","addHardwareAccounts","_ref6","_wallets$","nextActiveAccountId","updatedGlobal","walletInfo","driver","areSettingsOpen","hardwareWallet","tryAddNotificationAccount","afterSignIn","resetApiSettings","_ref7","isBackupRequired","importWalletCheckPassword","importWallet","about","_ref8","InvalidMnemonic","hasAccounts","importWalletCreateBiometrics","importWalletCreatePassword","confirmDisclaimer","ready","_ref9","_ref0","_ref1","TurnOnRegistration","TurnOnVerification","TurnOnPasswordConfirmation","TurnOnComplete","setInMemoryPassword","_ref10","oldPassword","TurnOffComplete","TurnOffWarning","TurnOffBiometricConfirmation","TurnOffCreatePassword","_ref11","nativeBiometricsError","verifyTelegramBiometricIdentity","safetyRules","mnemonicPage","checkWords","isBackupCreated","afterCheckMnemonic","accountConfigJson","storageData","showNotification","Unexpected","_ref12","isNew","currentWalletTitle","ledgerInfo","_ref13","_ref14","resolvedAddresses","closeAddAccountModal","importViewAccount","isImportModalOpen","pastActivityThrottle","initialActivityWaitingByAccountId","fetchPastActivities","waitInitialActivityLoading","fetchedActivities","toTimestamp","selectLastActivityTimestamp","shouldFetchMore","filteredResult","getTonOperationFees","operation","gas","real","getTonStakingFees","claim","getUnstakeTime","unlockTime","getStakingTitle","stakingType","getStakingStateStatus","getIsActiveStakingState","unclaimedRewards","getIsLongUnstake","getFullStakingBalance","shouldLoadWithBudget","throttleKey","isMnemonicChecked","promiseId","isSigned","_global$tokenInfo","importedSlugs","_global$tokenInfo$byS","importToken","apiToken","shouldUpdateBalance","changeBalance","reconnectLedger","showDialog","verifyAddress","activeContentTab","apiSwapAsset","_global$walletVersion","currentVersion","walletVersions","getDappConnectionUniqueId","_sseOptions","_sse","sseOptions","appClientId","sse","cancelDappOperation","callInMain","clearState","submitDappOperationPassword","updateState","apiUpdateDappOperation","isStateActive","currentPromiseId","isAnyDappModalActive","connectionType","explainSwapFee","shouldSwapBeGasless","nativeTokenBalance","getBigNativeTokenInBalance","getExcessFee","shouldShowOurFee","isExact","networkTerms","addOurFeeToTerms","networkFeeCoveredByDiesel","bigMax","realNetworkTerms","explainGaslessSwapFee","isNativeIn","explainGasfullSwapFee","getMaxSwapAmount","swapType","tokenInBalance","tokenIn","fullNetworkFee","maxAmount","isInsufficientNative","_findChainConfig3","nativeTokenInBalance","isOurFeeNative","stakingState","StakeInitial","UnstakeInitial","isUnstaking","UnstakeConnectHardware","UnstakePassword","tokenAmount","StakeConnectHardware","StakePassword","unstakeAmount","isLongUnstakeRequested","UnstakeComplete","StakeComplete","UnstakeConfirmHardware","StakeConfirmHardware","stakingBalance","submitLedgerUnstake","submitLedgerStake","clearCurrentStaking","changeCurrentStaking","openStakingInfo","isStakingInfoModalOpen","shouldReopenModal","openStakingInfoOrStart","ClaimConnectHardware","ClaimPassword","_getTonStakingFees$cl","isEthenaStaking","ClaimComplete","ClaimConfirmHardware","_getTonStakingFees$cl2","submitLedgerStakingClaimOrUnlock","permissions","isPasswordRequired","getDapps","connectAccountId","proof","ConfirmHardware","signature","signLedgerProof","submitDappConnectHardware","vestingAddress","signedMessages","signLedgerTransactions","isTonConnect","submitDappTransferHardware2","brokenDapp","deleteDapp","updateConnectedDapps","dappLastOpenedDatesByUrl","clearConnectedDapps","connectedDapps","removeConnectedDapp","Info","isAddressRequired","addSiteToBrowserHistory","emulation","closeDappTransfer","WarningHardware","payloadToSign","closeDappSignData","isSse","_global$dappConnectRe","pairsCache","CACHE_DURATION","SERVER_ERRORS_MAP","NotEnoughLiquidity","InvalidPair","TooSmallAmount","buildSwapBuildRequest","_findChainConfig","currentDexLabel","tokenOut","toAmount","nativeTokenIn","toMinAmount","shouldTryDiesel","dexLabel","requiredState","swapId","requiredTokenInSlug","requiredTokenOutSlug","withResetAmount","shouldReset","shouldResetOnClose","swapBuildRequest","buildResult","swapHistoryItem","hashes","Complete","transfers","activityId","isMutlichainAccount","supportedChains","getSupportedChains","shouldSendTonTransaction","shouldSendTronTransaction","shouldSendTransaction","shouldSendTokenToExternalWallet","tonAddress","swapTransactionRequest","swapItem","WaitTokens","payinAddress","cex","payoutAddress","payinExtraId","transferOptions","transferResult","_transferResult","newTokenInSlug","newTokenIn","adjustedAmountIn","newTokenOutSlug","newTokenOut","adjustedAmountOut","Out","initialGlobal","isEstimatingSwap","isEstimateInputIntact","swapUpdate","shouldStop","_global$swapPairs2","isLoaded","assetId","pairs","isTonTokenIn","pair","isTonTokenOut","countTonTokens","isReverseProhibited","swapPairs","loadSwapPairs","_global$swapPairs","isFromAmountMax","processNativeMaxSwap","estimateAmount","toncoinBalance","estimate","UnexpectedError","NotEnoughForFee","other","buildSwapEstimates","currentEstimate","newEstimates","proposedBestDexLabel","_findChainConfig2","selectedEstimate","availableEstimates","variant","networkFeeBigint","dieselFeeBigint","canAffordSwapEstimateVariant","chooseSwapEstimate","estimateDexSwap","onLine","txDraft","convertTransferFeesToSwapFees","fromMin","fromMax","ChangellyMinSwap","ChangellyMaxSwap","estimateCexSwap","finalGlobal","estimateSwapConcurrently","swaps","nonExistentIds","nonExistentSwaps","newEstimate","updateTokenPriceHistory","SCAM_DOMAIN_ADDRESS_REGEX","shouldShowDomainScamWarning","shouldEncrypt","withDiesel","isGaslessWithStars","isNftTransfer","isBase64Data","allowGasless","_result","_result2","Confirm","resolvedAddress","isToNewAddress","isToAddressNew","InsufficientBalance","_global$currentTransf","currentAccount","transferTokenChain","shouldShowSeedPhraseScamWarning","scamWarningType","SeedPhrase","DomainLike","_global$currentTransf2","_explainedFee$fullFee","_explainedFee$realFee","explainedFee","fullNativeFee","realNativeFee","chunks","chunk","batchResult","sentNftsCount","dieselAmount","noFeeCheck","_result3","_explainedFee$realFee2","rawPayload","parsedPayload","signedMessage","currentResult","submitLedgerNftTransfer","submitLedgerTransfer","isDieselAuthorizationStarted","NBS_INIT_TIMEOUT","createTransferOptions","globalState","cardsInfo","cardInfo","handleTransferResult","Done","isCardMinting","isNotcoinVouchers","submitTransferInitial","blacklistedNftAddresses","whitelistedNftAddresses","isUnhideNftModalOpen","selectedNftToUnhide","isCollection","selectedNftsToHide","currentNftForAttributes","unfreezeRequestedIds","isConfirmRequested","openVestingModal","unfreezeState","transferError","_settings$accentColor","cardBackgroundNftAddress","accentColorNftAddress","accentColorNft","isCardBackgroundNftOwned","isAccentColorNftOwned","accentColorIndex","createAbortableFunction","toReturnOnAbort","abort","deleteNotificationAccount","currentEnabledAccounts","deleted","newEnabledAccounts","deleteAllNotificationAccounts","createNotificationAccount","abortableSubscribeNotifications","abortableUnsubscribeNotifications","handleDomainOperationResult","prepareHardwareOperation","verifyPasswordAndUpdateState","operationType","createResult","notificationAddresses","addressKeys","withAbort","pushNotificationsAccount","updateNotificationAccount","isAvailable","newAccountId","shouldLoadDetails","newActivity","updateActivity","nftsByAddress","subResult","_selectCurrentAccount2","renewResult","submitLedgerDnsRenewal","currentAddress","walletAddress","checkAddressResult","_selectCurrentAccount4","submitLedgerDnsChangeWallet","walletAddressName","resolvedWalletAddress","chainBalances","_selectAccountSetting","newBalances","currentBalances","currentBalance","forcedSlugs","updateBalances","totalProfit","updateStakingDefault","stateWithBiggestBalance","state0","state1","nominators","existingTokens","existingToken","updateTokens","_global$swapTokenInfo","currentTokens","updateSwapTokens","shouldAppend","currentNfts","newOrderedAddresses","isTelegramGift","addCollectionTab","isAuto","checkCardNftOwnership","newOwnerAddress","sentNft","selectedAddresses","removedNft","removeNft","ownerAddress","setCardBackgroundNft","installAccentColorFromNft","isOnSale","accountUpdate","domainByChain","isLimited","isCopyStorageEnabled","supportAccountsCount","countryCode","isAppUpdateRequired","shouldRestrictSwapsAndOnRamp","updateRestrictions","apiUpdateWalletVersions","isIncorrectTimeNotificationReceived","showIncorrectTimeError","vestingInfo","updateVestingInfo","isUpdating","secondAddress","secondAccountId","isTonProxyEnabled","isTonMagicEnabled","accountConfig","_selectAccountState3","expirationByAddress","updatedNfts","existingNft","addUnorderedNfts","NativeAudio","NativeAudioWeb","DEBOUNCE_MS","audioContext","AudioContext","webkitAudioContext","audioBuffer","isSoundInitialized","initializeSounds","resume","audioSettings","assetPath","audioChannelNum","isUrl","isPreloaded","preload","incomingTransactionSound","decodeAudioData","decodedAudioBuffer","loadSound","playIncomingTransactionSound","play","createBufferSource","destination","mainActivities","areInitialActivitiesLoaded","fromTimestamp","mergeActivityIdsToMaxTime","newAreInitialActivitiesLoaded","areAllInitialActivitiesLoaded","addInitialActivities","preloadTopTokenHistory","localActivities","chainActivities","_global$byAccountId$a3","selectRecentNonLocalActivitiesSlow","hideOutdatedLocalActivities","fetchTransferDieselState","noForward","newConfirmedActivities","pendingActivities","replacedIds","replacePendingActivities","currentActivityId","replaceCurrentActivityId","replaceCurrentSwapId","replaceCurrentDomainRenewalId","replaceCurrentDomainLinkingId","replaceCurrentTransferId","notifyAboutNewActivities","mintCardActivity","_activity$nft","refundActivity","processCardMintingActivity","dataHex","clearCurrentSignature","apiUpdateDappConnect","_global$currentDappTr","apiUpdateDappLoading","apiUpdateDappCloseLoading","apiUpdateDappSendTransaction","apiUpdateDappSignData","ANIMATION_LEVEL_OPTIONS","switchAnimationLevel","levelClassName","currentLevel","afterInit","langCachePrefix","langCacheVersion","clearPreviousLangpacks","isNativeBiometricAuthEnabled","biometricsAvailableResult","useFallback","biometryType","FACE_ID","TOUCH_ID","isPushNotificationsAvailable","notificationStatus","checkPermissions","receive","requestPermissions","register","initNotificationsWithGlobal","initCapacitorWithGlobal","requestFullscreen","initTelegramWithGlobal","resetAuth","_global$settings$auth","newDialogs","existingMessageIndex","isToncoin","setDefaultSwapParams","changeTransferToken","currentActivityToken","isDefaultFirstTokenOutSwap","InvalidAmount","InvalidAddress","InvalidToAddress","InvalidStateInit","DomainNotResolved","WalletNotInitialized","InvalidAddressFormat","PartialTransactionFailure","IncorrectDeviceTime","UnsuccesfulTransfer","InactiveContract","NotSupportedHardwareOperation","DebugError","icon","newNotifications","existingNotificationIndex","toggleDeeplinkHandler","isDeeplinkHookEnabled","isFromAllAccounts","otherNetwork","otherNetworkAccountIds","nextAccountId","settingsById","afterSignOut","prevAccountId","nextNewestActivityTimestamps","settingsByAccountId","BarcodeScanner","BarcodeScannerWeb","APP_VERSION_REGEX","IGNORE_TAGS","useHotkeys","hotkeys","shouldFireEvent","hotkey","alt","ctrl","meta","altKey","pressedKey","isExactHotkey","modifiers","reservedKeys","parseHotkey","getHotkeyMatcher","useThrottledCallback","deps","msOrSchedulerFn","noFirst","fnMemo","useDebouncedCallback","noLast","useWindowSize","initialWidth","initialScreenHeight","setWidth","setHeight","setScreenHeight","isResizing","setIsResizing","setIsResizingDebounced","throttledSetIsResizing","throttledSetSize","newWidth","newHeight","newScreenHeight","handleResize","getEncryptedPasswordSignal","setEncryptedPasswordSignal","encryptionKey","isMainStore","initEncryptionKey","subtle","generateKey","getHasInMemoryPassword","getInMemoryPassword","encryptedData","decryptedData","decrypt","iv","ciphertext","TextDecoder","setInMemoryPasswordSignal","_clearTimeout","startTime","intervalId","isCleared","clearInterval","setInterval","setReliableTimeout","passwordData","TextEncoder","encrypt","encrypted","ANIMATED_STICKERS_PATHS","hello","snitch","bill","thumbUp","holdTon","happy","noData","forge","wait","yeee","guard","helloPreview","snitchPreview","billPreview","thumbUpPreview","holdTonPreview","happyPreview","noDataPreview","forgePreview","waitPreview","runPreview","yeeePreview","guardPreview","coreWalletLogo","coreWalletLogoPreview","light","iconAdd","iconAddLight","iconClock","iconClockLight","iconClockBlue","iconClockLightBlue","iconClockGray","iconClockLightGray","iconClockGreen","iconClockLightGreen","iconClockPurple","iconClockLightPurple","iconClockPurpleWhite","iconClockLightPurpleWhite","iconClockRed","iconClockLightRed","iconEarn","iconEarnLight","iconEarnPurple","iconEarnLightPurple","iconSend","iconSendLight","iconSwap","iconSwapLight","preview","iconClockPreviewLight","iconClockPreviewLightBlue","iconClockPreviewLightGray","iconClockPreviewLightGreen","iconClockPreviewLightPurple","iconClockPreviewLightPurpleWhite","iconClockPreviewLightRed","dark","iconAddDark","iconClockDark","iconClockDarkBlue","iconClockDarkGray","iconClockDarkGreen","iconClockDarkPurple","iconClockDarkPurpleWhite","iconClockDarkRed","iconEarnDark","iconEarnDarkPurple","iconSendDark","iconSwapDark","iconClockPreviewDark","iconClockPreviewDarkBlue","iconClockPreviewDarkGray","iconClockPreviewDarkGreen","iconClockPreviewDarkPurple","iconClockPreviewDarkPurpleWhite","iconClockPreviewDarkRed","useFocusAfterAnimation","useMatchCount","countRef","prevPredicateRef","handleChange","currentAccountState","hasManyAccounts","accountStates","signOut","isLogOutFromAllAccounts","setIsLogOutFromAllAccounts","accountsWithoutBackups","_accountStates$id","handleLogOut","handleClose","shouldRenderWarningForAnotherAccounts","shouldRenderWarningForCurrentAccount","cancelButtonClassNames","modalStyles","shortButton","Modal","text_noExtraMargin","Checkbox","links","idx","buttons","buildStyle","useMediaTransition","mediaData","isMediaReady","RLottie","ensureRLottie","default","getRLottie","hex2rgb","hex","rgbToLab","rgb","z","startCallbacks","endCallbacks","useHeavyAnimation","onStart","lastOnStart","lastOnEnd","elementObserverMap","renderId","tgsUrl","playSegment","speed","noLoop","shouldStretch","quality","isLowPriority","forceInBackground","sharedCanvas","sharedCanvasCoords","onLoad","onEnded","onLoop","containerRef","viewId","animation","setAnimation","animationRef","playKey","playRef","playSegmentRef","rgbColor","isUnmountedRef","newAnimation","coords","setSpeed","throttledInit","refOrElement","onIntersectionChange","onIntersectionChangeRef","callbackManager","IntersectionObserver","unobserve","useSharedIntersectionObserver","_animationRef$current","removeView","playAnimation","shouldRestart","isFrozen","playAnimationOnRaf","pauseAnimation","isPlaying","prevNoLoop","setNoLoop","prevSharedCanvasCoords","setSharedCanvasCoords","changeData","usePriorityPlaybackCheck","noTransition","nonInteractive","otherProps","isAnimationLoaded","markAnimationLoaded","useFlag","handleLoad","setPlayKey","AnimatedSticker","loadedPreviewUrls","DEFAULT_SIZE","noAnimation","previewUrl","iconPreviewClass","thumbDataUri","noPreviewTransition","isPreviewLoaded","markPreviewLoaded","isAnimationReady","markAnimationReady","markAnimationNotReady","handlePreviewLoad","AnimatedIcon","label","placeholder","valueOverlay","inputMode","isRequired","isMultiline","hasError","inputArg","wrapperClassName","isStatic","enterKeyHint","onKeyDown","isPasswordVisible","setIsPasswordVisible","markHasFocus","unmarkHasFocus","showValueOverlay","handleInput","finalType","inputFullClass","input_password","input_withvalueOverlay","labelFullClass","label_forPassword","label_error","htmlFor","inputContainer","scrollHeight","required","static","visibilityToggle","visibilityToggle_push","handleTogglePasswordVisibility","label_errorBottom","waitForAnimationEnd","animationName","fallbackMs","waitForEndEvent","detailedName","isHandled","handleAnimationEnd","TransitionEvent","propertyName","AnimationEvent","INERTIA_EASING","SWIPE_DISABLED_CLASS_NAME","swipeOffsets","cancelCurrentReleaseAnimation","isSwipeActive","captureControlledSwipe","_options$onSwipeLeftS","onSwipeLeftStart","_options$onSwipeRight","onSwipeRightStart","_onDrag","_onRelease","onCancel","updateAnimationProgress","elements","getAnimations","flat","currentTime","getTiming","extractPositionFromTransform","transformRule","FALLBACK_ANIMATION_END","CLASSES","ACTIVE_SLIDE_CLASS_NAME","TO_SLIDE_CLASS_NAME","activeKey","nextKey","prevKey","renderCount","shouldRestoreHeight","shouldCleanup","cleanupExceptionKey","shouldWrap","wrapExceptionKey","slideClassName","withSwipeControl","onStop","onContainerClick","onScroll","currentKeyRef","shouldDisableAnimation","rendersRef","prevActiveKey","isAnimatingRef","isSwipeJustCancelledRef","hasActiveKeyChanged","isBackwards","preservedRender","isSlideOptimized","prevActiveIndex","activeIndex","childElements","childElement","transition","transform","toSlide","fromSlide","endHeavyAnimation","clientHeight","performSlideOptimized","onAnimationEnd","watchedNode","giveUpAnimationEnd","currentSlide","nextSlide","onCancelForTransition","_cancelCurrentRelease","targetPosition","KeyframeEffect","keyframe","getKeyframes","position","extractAnimationEndPosition","currentDirection","animationTimingFunction","initialPositionPx","distance","dragOffset","newProgress","onCancelForClient","isRevertSwipe","cancel","releaseProgress","allowSwipeControlForTransition","flexBasis","asFastList","contents","render","rendered","DEFAULT_PIN_LENGTH","RESET_STATE_DELAY_MS","stickToFirst","resetStateDelayMs","isMinified","topContent","onBiometricsClick","onClearError","onSubmit","onLogOutClick","isFaceId","canRenderBackspace","isSuccess","prevIsPinAccepted","arePinButtonsDisabled","shouldSuggestLogout","clearScrollPatch","char","handleBackspaceClick","dotsClassName","renderDots","PinPadButton","Transition","STICKER_SIZE","getHandleBiometricsSignal","setHandleBiometricsSignal","triggerPasswordFormHandleBiometrics","isAutoConfirmEnabled","isBiometricAuthEnabled","cancelLabel","submitLabel","stickerSize","help","containerClassName","pinPadClassName","withCloseButton","noAnimatedIcon","inputWrapperClassName","forceBiometricsInMain","skipAuthScreen","openSettings","setIsAutoConfirmEnabled","memoizedPasswordRef","hasInMemoryPassword","inMemoryPasswordRef","useInMemoryPassword","showOnlyConfirmScreen","passwordRef","setPassword","localError","setLocalError","wrongAttempts","setWrongAttempts","isResetBiometricsWarningOpen","openResetBiometricsWarning","closeResetBiometricsWarning","isSubmitDisabled","canUsePinPad","isLogOutModalOpened","openLogOutModal","closeLogOutModal","showStorageClearedDialog","support_link","rel","confirm","useStorageClearedDialog","submitCallback","passwordToReturn","enteredPassword","passwordVerified","handleSubmit","handleBiometrics","biometricPassword","handleClearError","handleOpenSettings","handleAutoConfirmChange","handleOpenLogOutModal","shouldRenderFullWidthButton","footerButtonsClassName","footerButtons","footerButtonFullWidth","renderFooterButtons","buttonHalfWidth","buttonFullWidth","renderAutoConfirmCheckbox","autoConfirmCheckbox","shouldRenderAutoConfirmCheckbox","getPinPadTitle","actionName","pinPadHeader","AnimatedIconWithPreview","PinPad","LogOutModal","transitionContent","sticker","renderingError","renderBiometricPrompt","Input","errorMessage","logOutWrapper","logOutButton","detailsIcon","setTheme","preloadedImageUrls","loading","isSlow","imageClassName","fallback","markIsLoaded","markHasError","shouldShowFallback","divRef","draggable","referrerPolicy","appTheme","useAppTheme","logoPath","coreWalletLogoPath","logoLightPath","logoDarkPath","Image","innerContentTopPosition","shouldHideBiometrics","passwordError","setPasswordError","handleSubmitPassword","handlePasswordChange","PasswordForm","Logo","handleChangeSlideForBiometricAuth","ACTIVATION_EVENT_NAMES","ACTIVATION_EVENT_OPTIONS","SLIDES","getActivitySignal","setActivitySignal","isNonNativeBiometricAuthEnabled","canRender","isManualLockActive","appLockHideBiometrics","submitAppLockActivityEvent","setIsManualLockActive","setIsAppLockActive","isLocked","lock","unlock","lockReason","isFirstRunRef","isLockedRef","lockReasonRef","useAppLockState","shouldRenderUi","showUi","hideUi","lastActivityTime","unfixSlide","slideForBiometricAuth","setSlideForBiometricAuth","getDefaultSlideForBiometricAuth","passwordForm","setInnerContentTopPosition","isFixedState","isFixingSlideEnv","fixSlide","innerContent","getBoundingClientRect","useContentSlide","handleActivity","handleActivityThrottled","afterUnlockCallback","autolockPeriod","transitionRef","forceLockApp","_getInAppBrowser2","blur","handleLock","handleLockScreenHotkey","transitionKey","handleUnlockIntent","Space","UnlockButtonSlide","PasswordFormSlide","APP_VERSION_URL","showActivityInfo","showTokenActivity","savedAddresses","currentTokenPeriod","isAuthFlow","isMnemonicImport","addAccount2","authState","startImportingWallet","startCreatingWallet","renameAccount","renameNotificationAccount","isBackupWalletModalOpen","isInvestorViewEnabled","landscapeActionsActiveTabIndex","isSecurityWarningHidden","_ref16","_ref17","shouldShow","alwaysShownSlugsSet","alwaysHiddenSlugsSet","_ref18","_accountSettings$orde","_accountSettings$impo","remoteVersion","sanitizedRemoteVersion","getIsAppUpdateNeeded","isAppUpdateAvailable","latestAppVersion","confettiRequestedAt","showScanQrPopup","closeScanQrPopup","handleQrCode","currentQrScan","camera","isQrScannerOpen","_ref19","linkParams","plainAddressData","qrData","newChain","getChainFromAddress","parsePlainAddressQr","_ref20","_ref21","chainForOnRampWidgetModal","_ref22","mediaId","mediaType","hiddenNfts","noGhostAnimation","_ref23","receiveModalChain","isReceiveModalOpen","invoiceTokenSlug","isInvoiceModalOpen","isLoadingOverlayOpen","_ref24","isExploreOpen","_ref25","isHidden","isSensitiveDataHidden","_ref26","areAssetsActive","Assets","isWalletTabActive","closeExplore","closeSiteCategory","_ref27","layout","changeAppLayout","clearDappConnectRequestError","transactionIdx","viewTransactionOnIdx","inMemoryPassword","ConnectHardware","submitDappTransferPassword","browserHistory","_accountState$browser","newHistory","currentUrl","currentSiteCategoryId","submitDappSignDataPassword","connectLedger","transport","noRetry","noRemoteTab","Connecting","hardwareWallets","isLedgerConnected","isTonAppConnected","_global$hardware$avai","Failed","availableTransports","lastUsedTransport","WaitingForRemoteTab","popup","connectLedgerViaRemoteTab","waitLedgerTonApp","lastIndex","hardwareAccounts","hardwareAccountIndexes","selectLedgerAccountIndexToImport","currentHardwareAddresses","getNextLedgerWallets","getLedgerWallets","nextHardwareState","ConnectedWithSingleWallet","ConnectedWithSeveralWallets","isLedgerDisconnected","Ledger","isHardwareModalOpen","isBluetoothAvailable","isUsbAvailable","detectAvailableTransports","hasUsbDevice","initializeHardwareWalletConnection","oldHardwareWallets","prevSettings","isFinalCall","LedgerConnectHardware","currentCollectionAddress","addToSelectedAddresses","whitelistedNftAddressesSet","blacklistedNftAddressesSet","accountNfts","removeFromSelectedAddresses","wasTelegramGiftsAutoAdded","existingCollectionTabs","collectionTabs","isVestingModalOpen","allSlugs","newOrderedSlugs","Activity","_payload$nfts","rest","nftTokenSlug","previousFeeTokenSlug","nextFeeTokenSlug","shouldClearFee","newToken","submitTransferPassword","isExists","ACCENT_COLORS","excludedIndices","useAccentColor","elementRefOrBody","accentColor","getAccentColorIndexFromNft","mtwCardType","mtwCardBorderShineType","UPDATE_THROTTLE","updateCacheThrottled","updateCache","updateCacheForced","unsubscribeFromBeforeUnload","preloadedData","isCaching","clearCaching","_unsubscribeFromBefor","getUsedTokenSlugs","reducedGlobal","usedTokenSlugs","_reducedGlobal$byAcco","transactionId","reduceByAccountId","_state$nfts","_state$stakingHistory","accountTokenSlugs","getAccountTokenSlugs","reducedIdsMain","pickVisibleActivities","reducedIdsBySlug","reducedNewestActivitiesBySlug","reducedIds","reduceAccountActivities","_Object$values$","reduceAccountStaking","visibleIdCount","shouldCacheActivity","initialState","timeEnd","_cached$tokenInfo","backupWallet","newId","testnetAccountId","clearActivities","areTokensWithNoBalanceHidden","areTokensWithNoPriceHidden","exceptionSlugs","_cached$accounts","isHardware","quote","dappLastOpenedDatesByOrigin","migrateCache","loadMemoryCache","loadCache","initLedgerPage","selectHasSession","isImproved","testAndImprove","frames","lastFrameAt","mean","containerEl","boosterEl","improveView","ElectronEvent","focusScroller","originalFocus","isProgrammaticFocus","patchedFocus","_originalFocus","preventScroll","scrollToActiveElement","install","uninstall","createFocusScroller","enforceInstantScroll","scrollTarget","scrollPosition","focusScrollPosition","scrollIntoView","block","behavior","IS_DISABLED","tabKey","Filesystem","FilesystemWeb","Share","ShareWeb","shareUrl","shareData","tryCapacitorShare","tryNavigatorShare","share","useCurrentOrPrev","shouldForceCurrent","shouldUseSelectedName","shouldTranslate","iconClassName","iconOverlayClassName","fontIconClassName","itemClassName","itemDescriptionClassName","displayedName","dangerous","itemIcon","itemMainIcon","overlayIcon","itemOverlayIcon","fontIcon","itemName","description","itemDescription","captureEscKeyListener","captureKeyboardListener","POSITIONING","EMPTY_RECT","applyStaticOptions","bubbleRef","anchor","positionX","positionY","transformOriginX","transformOriginY","bubbleStyle","bubbleEl","finalStyle","transformOrigin","ANIMATION_DURATION","menuRef","bubbleClassName","autoClose","shouldSkipTransition","withPortal","noCloseOnBackdrop","onMouseEnter","onMouseLeave","positionOptions","options2","isDynamicPositionOptions","staticOptions","getRootElement","getMenuElement","getTriggerElement","getLayout","withMaxHeight","triggerRect","rootRect","menuDimensions","triggerEl","rootEl","menuEl","extraMarginTop","menuElMinWidth","marginTop","gatherBounds","menuWidth","preferredPositionX","determineHorizontalPosition","menuHeight","topShiftY","extraTopPadding","isDense","doNotCoverTrigger","preferredPositionY","hasSpaceBelow","hasSpaceAbove","yWithTopShift","determineVerticalPosition","finalCoordinates","coordinates","shouldAvoidNegativePosition","centerHorizontally","leftWithPossibleNegative","addedXForMenuPositioning","applyBoundaryConstraints","positionResult","portalOffset","offsetX","offsetY","calculateTransformOrigin","processDynamically","useMenuPosition","menu","useVirtualBackdrop","fullBubbleClassName","bubble","inPortal","selectedValue","menuAnchor","menuPositionX","menuPositionY","shouldTranslateOptions","buttonClassName","onSelect","menuPositionOptions","handleItemClick","Menu","fullButtonClassName","item_with_icon","withDelimiter","delimiter","withDelimiterAfter","delimiterAfter","item_selected","DropdownItemContent","withNotch","closeClassName","menuItems","onBackButtonClick","onMenuItemClick","menuButtonRef","setMenuAnchor","hasMenu","isMenuOpen","closeMenu","handleMenuButtonClick","header_back","header_backIcon","menuButton","menuIcon","DropdownMenu","TITLES","MENU_ITEMS","iframeRef","iframe","contentWindow","useIFrameBridgeProvider","renderingTitle","handleMenuItemClick","frame","ModalHeader","allow","useIntersectionObserver","rootCallback","rootRef","throttleMs","throttleScheduler","debounceMs","shouldSkipFirst","margin","controllerRef","rootCallbackRef","freezeFlagsRef","onUnfreezeRef","freeze","unfreeze","targetCallback","entriesAccumulator","observerCallback","observerCallbackSync","root","rootMargin","initController","controller","useGetIsIntersecting","targetRef","getIsIntersecting","setIsIntersecting","lastCallback","useOnIntersect","isIntersecting","observeIntersection","savedCallback","handleReload","reload","appInactivePathWebP","appInactivePathPng","app_name","useScrolledState","isAtBeginning","setIsAtBeginning","isAtEnd","setIsAtEnd","isScrolled","handleScroll","PATH_BY_EMOJI","loadedImages","markLoaded","isInsideModal","headerClassName","handleBackClick","handleContentScroll","aboutExtensionTitle","slide","modalHeader","headerBack","iconChevron","headerTitle","content_noScroll","logo","titleLink","blockAbout","heading","Emoji","ninja","unicorn","extension_link","github","github_link","telegram","community_link","aboutFooterWrapper","aboutFooterContent","dotLarge","cleanAuthError","addAccount","container_scrollable","suggestions","suggest","embedded","suggestion","nextId","labelText","suggestionsPosition","markFocus","unmarkFocus","setHasError","filteredSuggestions","setFilteredSuggestions","activeSuggestionIndex","setActiveSuggestionIndex","areSuggestionsShown","setAreSuggestionsShown","wordlist","setWordlist","shouldRenderSuggestions","words","noError","isCorrectMnemonic","processSuggestions","userInput","unLinked","handleEnter","suggestedValue","nextInput","getElementById","select","wrapper_focus","wrapper_error","SuggestionList","touched","onPaste","pastedValue","clipboardData","getData","_checkIndexes$map","checkIndexes","descriptionClassName","formClassName","errorClassName","setWords","hasMnemonicError","setHasMnemonicError","handleMnemonicCheckSubmit","answer","handleSetWord","InputMnemonic","closeCheckWordsPage","CheckWordsForm","openMnemonicPage","headerBackBlock","CheckWordsContent","START_BIOMETRICS_CONFIRMATION_DELAY_MS","afterCreateBiometrics","cancelCreateBiometrics","useTimeout","shouldRenderSteps","shouldRenderError","biometricsError","buttons__inner","btn","btnHalfWidth","cancelConfirmPin","pinConfirm","setPinConfirm","setError","isConfirmed","setIsConfirmed","containerFullSize","skipCheckMnemonic","openAuthBackupWalletModal","canSkipMnemonicCheck","info__space","btn_wide","btn_single","btn_push","startCreatingBiometrics","skipCreateBiometrics","btn_text","afterCreateNativeBiometrics","isTouchId","faceIdSvg","touchIdSvg","biometricsIcon","biometricsTitle","biometricsSubtitle","SPECIAL_CHARS_REGEX","formId","isMobile","firstInputRef","isJustSubmitted","setIsJustSubmitted","firstPassword","setFirstPassword","secondPassword","setSecondPassword","isPasswordFocused","markPasswordFocused","unmarkPasswordFocused","isWeakPasswordModalOpen","openWeakPasswordModal","closeWeakPasswordModal","isPasswordsNotEqual","setIsPasswordsNotEqual","isSecondPasswordFocused","markSecondPasswordFocused","unmarkSecondPasswordFocused","canSubmit","validation","requiredMinLength","requiredLength","isOnlyNumbers","invalidLength","setInvalidLength","noNumber","setNoNumber","noUpperCase","setNoUpperCase","noLowerCase","setNoLowerCase","noSpecialChar","setNoSpecialChar","noEqual","setNoEqual","isInvalidLength","usePasswordValidation","handleFirstPasswordChange","handleSecondPasswordChange","isWeakPassword","rule","formWidgets","passwordRules","getValidationRuleClass","renderErrors","buttonsNoExtraSpace","ruleHasError","passwordRule","invalid","valid","getFormId","withDescription","titleSmallMargin","CreatePasswordForm","setPin","INTERVAL","markOne","two","markTwo","three","markThree","oneRef","twoRef","threeRef","counterTitle","counterDigit","onSkip","handleBackupClick","disclaimerBackupDialog","backupNotice","backupNoticeButtons","btn_mini","isImport","cancelDisclaimer","isInformationConfirmed","markInformationConfirmed","unmarkInformationConfirmed","setIsInformationConfirmed","handleCloseBackupWarningModal","handleSkipMnemonic","stickerAndTitle","infoBlock","informationCheckbox","informationCheckboxContent","AuthBackupWarning","MNEMONIC_INPUTS","MAX_LENGTH","afterImportMnemonic","setMnemonic","handleMnemonicSet","pastedMnemonic","_document$activeEleme","handlePasteMnemonic","pastedText","_document$activeEleme2","parsePastedText","useClipboardPaste","handlePaste","mnemonicValues","handleCancel","title_afterSmallSticker","infoSmallFont","infoPull","importingContent","getSuggestPosition","footerError","footerButton","w","inputRef","isInvalidAddress","setIsInvalidAddress","transitionContentWrapper","_inputRef$current","isValid","viewModeSticker","customStickerClassName","customButtonWrapperClassName","isFullSizeButton","isFirstCheckboxSelected","isSecondCheckboxSelected","isThirdCheckboxSelected","textFirst","textSecond","textThird","onFirstCheckboxClick","onSecondCheckboxClick","onThirdCheckboxClick","openCreateBackUpPage","firstChecked","setFirstChecked","secondChecked","setSecondChecked","thirdChecked","setThirdChecked","SafetyRulesContent","word","buttonText","SecretWordsList","openCheckWordsPage","wordsCount","containerAlignTop","SecretWordsContent","openAbout","openHardwareWalletModal","openAuthImportWalletModal","isLogoReady","markLogoReady","logoRef","btn_about","importButtonsBlock","importButtonsBlockSimple","importText","importButtons","RENDER_COUNT","closeAbout","closeImportViewAccount","renderingAuthState","setPrevKey","setNextKey","updateRenderingKeys","renderAuthScreen","isFrom","AuthStart","AuthCreatingWallet","AuthCheckPassword","AuthCreatePin","AuthConfirmPin","AuthCreateBiometrics","AuthConfirmBiometrics","AuthCreateNativeBiometrics","AuthCreatePassword","AuthCreateBackup","AuthDisclaimer","AuthImportMnemonic","SettingsAbout","aboutHeader","AuthSafetyRules","AuthSecretWords","AuthCheckWords","AuthImportViewAccount","transitionContainer","transitionSlide","spinner","inner","Spinner","rightItem","startImportViewAccount","closeAuthImportWalletModal","handleSecretWordsClick","handleImportHardwareWalletClick","handleImportViewAccountClick","importModalContent","actionsSection","ListItem","resolveSlideTransitionName","useModalTransitionKeys","renderingKey","updateNextKey","useCachedImage","imageUrl","useAsync","setIsLoading","setResult","wasCancelled","cachedResponse","createObjectURL","statusText","clone","getCachedImageUrl","revokeObjectURL","useCardCustomization","cardNft","mtwCardTextType","withTextGradient","mtwCardTextTypeClass","backgroundImageUrl","classNames","borderShineType","canEditAccount","onEdit","isViewMode","addressOrMultichain","mtwCardClassNames","withCheckbox","customCard","account_current","account_disabled","account_inactive","accountName","accountFooter","accountAddress","accountCheckMark","accountCheckMark_active","accountLength","accounts_single","accounts_two","ConfirmTransactionState","onTryAgain","activeState","setActiveState","Waiting","renderContent","isActiveSlide","textBlock","textBlock_small","actionBlock","actionBlock_single","button_single","renderWaitingConfirm","isErrorDetailed","declinedLabel","declinedLabelDetailed","renderTryAgain","DEFAULT_ARROW","DEFAULT_MENU_POSITION_X","menuClassName","arrow","buttonPrefix","openMenu","withMenu","isFullyInteractive","selectedItem","handleSelect","interactive","wide","buttonFullClassName","buttonSuffix","buttonIcon","TRANSPORT_NAMES","usb","bluetooth","onConnected","initializeHardwareWalletModal","selectedTransport","setSelectedTransport","isLedgerFailed","isTonAppFailed","isConnected","isConnecting","isWaitingForRemoteTab","shouldCloseOnCancel","renderingAvailableTransports","shouldRenderAvailableTransports","availableTransportsRef","prevLastUsedTransport","handleConnected","isSingleWallet","handleCloseWithRemoteTab","closeAction","getLedgerIconSrc","iconData","desktop","ledgerDesktopDarkSrc","ledgerDesktopSrc","mobileUsb","ledgerMobileUsbDarkSrc","ledgerMobileUsbSrc","ios","ledgerIosDarkSrc","ledgerIosSrc","mobileBluetooth","ledgerMobileBluetoothDarkSrc","ledgerMobileBluetoothSrc","renderScreen","settingsStyles","containerStatic","iconBlock","mobile","iconBlockSlideStatic","iconBlockSlide","ledgerIcon","textBlock_gap","textIcon","textBlock_success","text_failed","text_connected","text_success","dropdownBlock","Dropdown","item_small","isFailed","renderButtons","ARROW_WIDTH","GAP","emoji","tooltipClassName","tooltipContainerRef","colorClassName","iconRef","tooltipRef","tooltipStyle","arrowStyle","randomTooltipKey","handleClickOutside","tooltipWidth","tooltipHeight","tooltipCenter","arrowPosition","horizontalOffset","tooltipVerticalStyle","tooltipHorizontalStyle","arrowHorizontalStyle","arrowVerticalStyle","tooltip","commonClassName","renderIcon","onDisconnect","iconUrl","shouldShowDisconnect","handleDisconnect","IconWithTooltip","browserButton","hasConnectRequest","requiredPermissions","requiredProof","submitDappConnectRequestConfirm","submitDappConnectRequestConfirmHardware","cancelDappConnectRequestConfirm","setDappConnectRequestState","resetHardwareWalletConnect","selectedAccount","setSelectedAccount","isConfirmOpen","openConfirm","closeConfirm","iterableAccounts","shouldRenderAccounts","handlePasswordCancel","submitDappConnectRequestHardware","handlePasswordSubmit","renderAccounts","AccountButtonWrapper","AccountButton","renderAccount","Skeleton","DappInfo","renderDappInfo","DappPassword","LedgerConnect","LedgerConfirmOperation","dappname","_accounts$currentAcco","customTokenBalance","customTokenSymbol","customTokenDecimals","displayBalance","displaySymbol","displayDecimals","rows","renderRow","isLarge","hasFee","skeletonRows","submitDappSignDataConfirm","renderingPayloadToSign","isDappLoading","DappSkeletonWithContent","DappInfoWithAccount","cell","schema","renderSignDataByType","setDappSignDataScreen","clearDappSignDataError","cancelDappSignData","handleResetSignData","DappSignDataInitial","renderPassword","DappTransferComplete","getPseudoRandomNumber","seed","numberSeed","stringToNumberSeed","randomFraction","FIAT","getCurrencyPriority","getSwapRate","fromToken","toToken","shouldTrimLargeNumber","firstCurrencySymbol","secondCurrencySymbol","fromAmountBig","toAmountBig","fromPriority","ratio","isLargeNumber","CHAIN_ICON_MAP","avalanche","avalancheBlockchainIcon","bitcoin","bitcoinBlockchainIcon","bitcoin_cash","bitcoincashBlockchainIcon","binance_smart_chain","bnbBlockchainIcon","binance_dex","cardano","cosmos","dash","doge","eos","ethereum","ethereum_classic","internet_computer","iota","litecoin","monero","polkadot","ripple","solana","stellar","zcash","getChainNetworkIcon","networkName","ASSET_LOGO_PATHS","btc","usdt","my","withChainIcon","isLoadingError","markLoadingError","fallbackIcon","blockchainIcon","STEPS","FROM","SKIN_COLORS","lightTheme","darkTheme","cardLightText","cardDarkText","cardGoldText","purple","green","sample","cols","cellSize","skin","canvasRef","cellSizeDpr","animationStateRef","opacityValues","steps","lastSpeedChangeAt","isRendered","getIsInBackground2","getShouldAnimate","canvas","ctx","getContext","renderOptions","frameDuration","shouldChangeSpeed","clearRect","row","col","nextOpacity","fillStyle","fillRect","renderFrame","align","maskSkin","shouldHoldSize","maskClassName","setIsSensitiveDataHidden","contentRef","shouldRenderSpoiler","spoilerRef","spoilerClassName","spoiler","wrapperStyle","fixedWidth","SensitiveDataMask","isPending","isError","shouldRenderClock","clockRef","clockIconName","CHANGELLY_PENDING_STATUSES","CHANGELLY_EXPIRED_STATUSES","ONCHAIN_ERROR_STATUSES","isFuture","isHold","amountCols","isFromToncoin","isInternalSwap","statusClass","pendingIndicatorColor","ActivityStatusIcon","SensitiveData","TokenIcon","renderAmount","cexStatus","renderStatusAndDate","rate","priceWhole","priceFraction","renderCurrency","getLocalAddressName","_savedAddresses$find","otherAccount","_accounts$accountId$a","OUT_TRANSACTION_TYPES","doesNftExist","openNftAttributesModal","isStaking","isDnsOperation","dnsIconText","getDnsIconText","attachmentsTakeSubheader","shouldAttachmentTakeSubheader","isNoSubheaderLeft","getIsNoSubheaderLeft","titleTense","operationColorClass","handleNftClick","iconName","scamImg","amountDisplayMode","dexName","dex","marketplaceName","annual_yield","renderAddressAndDate","renderBaseCurrencyAmount","thumbnail","renderComment","getIsNoSubheaderRight","swapTokensBySlug","stakingStateBySlug","Transaction","getActivityHeight","getTransactionHeight","cancelDappTransfer","setDappTransferScreen","handleAgree","withTonExplorer","withMediaViewer","openMediaViewer","tonExplorerTitle","ton_explorer_name","handleClickInfo","Nft","DEFAULT_THRESHOLD","removeFromSavedAddress","handleDeleteSavedAddress","menuBackdropShouldRender","menuBackdropRef","MENU_ITEM_HEIGHT_PX","COMFORT_MARGIN_PX","isMultichainAccount","addressUrl","isTransaction","spoilerRevealText","spoilerCallback","copyNotification","noSavedAddress","noExplorer","textClassName","noDimming","withShareInMenu","addSavedAddress","addressNameRef","isSaveAddressModalOpen","openSaveAddressModal","closeSaveAddressModal","isDeleteSavedAddressModalOpen","openDeletedSavedAddressModal","closeDeleteSavedAddressModal","savedAddressName","setSavedAddressName","isConcealedWithSpoiler","revealSpoiler","isAddressAlreadySaved","savedAddress","saveAddressTitle","explorerTitle","withSavedAddresses","withExplorer","handleSaveAddressSubmit","handleCopy","handleShare","handleTonExplorerOpen","isActionsMenuOpen","handleMenuShow","handleMenuItemSelect","closeActionsMenu","menuHandlers","setMenuPositionY","isWalletAddress","withShare","_menuHandlers$value","changedTouches","clientX","useDropdownMenu","addressBook","shouldUseMenu","longPressHandlers","isLongPressActive","isPressed","timerId","canProcessEvent","onMouseUp","onTouchStart","onTouchEnd","onTouchCancel","useLongPress","handleRevealSpoiler","renderedContent","suffixStart","middle","meaningfulPart","dimmedPart","scam","scamImage","chainIcon","shortAddress","MenuBackdrop","isConcealed","commentContainer","button_spoiler","renderContentOrSpoiler","iconCaretDown","menuItem","iconStar","iconShare","renderActions","nameInput","DeleteSavedAddressModal","amountTerms","totalCost","sum","getTotalCost","payloadRef","isPayloadExpanded","expandPayload","payloadElement","scrollWidth","record","category","votingAddress","vote","renderPayload","_transaction$payload","renderPayloadLabel","DappTransactionContent","amountBySlug","tonAmount","feeBySlug","NftInfo","InteractiveTextField","displayedToAddress","DappAmountField","DappTransactionPayload","PRECISION_PREFIX","exact","approximate","lessThan","STARS_TOKEN","TOKEN_ICONS","shouldPreferIcons","termClassName","symbolClassName","termList","firstDefinedTerm","tokenType","term","convertTermsObjectToList","symbolNode","keepDetailsButtonWithoutFee","onDetailsClick","Fee","FeeLineContainer","_accountState$nfts","totalAmountsBySlug","_renderingTransaction","showDappTransferTransaction","submitDappTransferConfirm","renderingTransactions","sortedTransactions","sortingCost","getTransactionCostForSorting","transaction0","transaction1","sortTransactions","hasSufficientBalance","tokenToDisplay","sufficientTokens","availableBalance","insufficientAmount","insufficientUsdValue","transactionUsdValue","maxInsufficientToken","maxTransactionToken","calculateTokenToDisplay","renderTransactionRow","amountText","hasAmount","renderTransactions","_emulation$activities","FeeLine","renderEmulation","cost","isMediaViewerOpen","clearDappTransferError","submitDappTransferHardware","needsExtraHeight","shouldForceFullScreen","handleTransferPasswordSubmit","handleLedgerConnect","handleResetTransfer","DappTransferInitial","DappLedgerWarning","DappTransaction","Dialog","DialogWeb","_dialog$buttons","_buttons$cancel","dismissDialog","openModal","closeModal","hasCancel","confirmTitle","cancelTitle","isNativeDialog","openSystemBluetoothSettings","executeDialogAction","okButtonTitle","cancelButtonTitle","buttonTitle","isElectronUpdateDownloaded","setIsElectronUpdateDownloaded","isElectronAutoUpdateEnabled","setIsElectronAutoUpdateEnabled","_window$electron3","removeUpdateErrorListener","UPDATE_ERROR","removeUpdateDownloadedListener","UPDATE_DOWNLOADED","getIsAutoUpdateEnabled","_window$electron4","installUpdate","withTitle","isDragging","screenX","screenY","handleMousedown","handleDrag","handleDoubleClick","useElectronDrag","handleMinimize","minimize","handleMaximize","getIsMaximized","unmaximize","maximize","_window$electron5","_window$electron6","UpdateApp","useTelegramMiniAppSwipeToClose","isSwipeDisabledRef","openSite","originalUrl","validProtocols","urlObject","isValidUrl","contentSelector","scrollLeft","usePrevious2","prevRef","lastRef","openSiteCategory","bigSites","smallSites","handleCategoryClick","site","MEMO_EMPTY_ARRAY","RERENDER_DAPPS_FEED_DELAY_MS","REPLACEMENTS_BY_URL","replacementUrl","updateDappLastOpenedAt","openDapp","dappStyles","HIDDEN_FROM_FEED_DAPP_URLS","dappsFromState","openSettingsWithState","sortedDapps","lastOpenedAt","compareDapps","seen","isPillMode","iconWrapperClassName","useHorizontalScroll","exploreStyles","sectionHeader","DappFeedItem","renderDapp","Dapps","aLastOpened","bLastOpened","connectedAt","clickArg","extendedIcon","withBorder","badgeText","isTrending","isInList","extended","trending","imageWrapper","imageWrapperScalable","trendingImage","infoWrapper","badgeLabel","badge","_searchSuggestions$hi","_searchSuggestions$si","isSuggestionsVisible","searchSuggestions","searchValue","onSiteClick","onSiteClear","isEmpty","suggestionsMenu","MenuItem","suggestionIcon","suggestionAddress","clearSuggestion","Site","_global$exploreData","categories","categoryId","CategoryHeader","shouldRestrict","originalSites","loadExploreSites","removeSiteFromBrowserHistory","suggestionsTimeoutRef","trendingContainerRef","setSearchValue","isSearchFocused","markSearchFocused","unmarkSearchFocused","showSuggestions","hideSuggestions","prevSiteCategoryIdRef","filteredSites","canBeRestricted","filterSites","historyResult","sitesResult","generateSearchSuggestions","trendingSites","allSites","isFeatured","trendingList","filteredCategories","_allSites$category$id","safeShowSuggestions","safeHideSuggestions","prevIsSearchFocused","handleSiteClick","targetUrl","handleSiteClear","handleSearchValueChange","handleMenuClose","handleSearchSubmit","isContentActive","main","searchWrapper","searchContainer","searchIcon","searchInput","ExploreSearchSuggestions","DappFeed","trendingSection","landscapeList","Category","currentSiteCategory","SiteList","emptyList","emptyListLoading","emptyListTitle","rootSlide","afterSelectHardwareWallets","loadMoreHardwareWallets","selectedAccountIndices","setSelectedAccountIndices","handleAccountToggle","handleAddLedgerWallets","alreadyConnectedList","handleAddWalletClick","_list","areAccountsSelected","isActiveAccount","accountCurrencyIcon","addAccountContainer","addAccountIcon","LedgerModalState","setCurrentSlide","SelectWallets","handleAddLedgerWallet","handleLedgerModalClose","LedgerSelectWallets","modalDialog","modalDialogInsideSettings","calcSafeAreaTop","useElementVisibility","isVisible","setIsVisible","metaViewport","defaultViewportContent","allowedZoomViewportContent","secondText","twoIcons","isNftTransaction","imageUrls","tokenIcon","nftIcon","stacked","bold","nftTitle","isQrScannerSupported","useQrScannerSupport","isSupported","supported","isSavedAddress","deleteLabel","onDeleteClick","handleDeleteClick","otherAccountIds","onAddressSelect","onSavedAddressDelete","renderedSavedAddresses","doesSavedAddressFitSearch","AddressBookItem","renderedOtherAccounts","addressesToBeIgnored","uniqueAddresses","addressChain","searchQuery","INPUT_CLEAR_BUTTON_ID","withQrScan","addressBookChain","validateAddress","requestOpenQrScanner","addressBookTimeoutRef","addressForDeletion","setAddressForDeletion","chainForDeletion","setChainForDeletion","isAddressBookOpen","openAddressBook","closeAddressBook","isFocused","markFocused","unmarkFocused","shouldRenderPasteButton","setShouldRenderPasteButton","inputId","isAddressValid","addressBookAccountIds","shouldUseAddressBook","localAddressName","withPasteButton","withQrButton","withButton","addressOverlay","renderedAddressName","addressShort","SHORT_SINGLE_ADDRESS_SHIFT","handlePasteClick","handleAddressCheck","handleQrScanClick","handleAddressFocus","handleAddressBlur","_e$relatedTarget","relatedTarget","handleAddressBookClose","addressToCheck","handleAddressClear","handleDeleteSavedAddressClick","handleDeleteSavedAddressModalClose","handleAddressBookItemSelect","renderInputActions","AddressBook","FULL_NATIVE_STATES","domainNft","currentLinkedWalletAddress","tonBalance","currentTonAddress","startDomainLinking","cancelDomainLinking","clearDomainLinkingError","submitDomainLinking","submitDomainLinkingHardware","checkDomainLinkingDraft","checkLinkingAddress","setDomainLinkingWalletAddress","isInsufficientBalance","feeTerms","modalTitle","handleWalletAddressInput","newToAddress","handleHardwareSubmit","handleInfoClick","AddressInput","TransactionBanner","renderPasswordForm","renderComplete","isCollapsed","expand","shouldRenderExpander","LIMIT","renderedNfts","startDomainsRenewal","cancelDomainsRenewal","clearDomainsRenewalError","submitDomainsRenewal","submitDomainsRenewalHardware","checkDomainsRenewalDraft","domainNfts","newExpireTimestamp","domainNftThumbnails","useInterval","NftChips","_domainNfts$","_domainNfts$2","formatTransferUrl","noChainIcon","minWidth","CHARACTER_WIDTH","BUTTON_WIDTH","useSelectorWidth","buttonTransitionKeyRef","tokenToRender","NETWORK_NAMES_EXCEPTIONS","getChainNetworkName","SearchState","EMPTY_ARRAY","EMPTY_OBJECT","pairsBySlug","userTokens","selectAvailableUserForSwapTokens","popularTokens","selectPopularTokens","swapTokens","userTokensProp","popularTokensProp","shouldFilter","shouldUseSwapTokens","shouldHideMyTokens","shouldHideNotSupportedTokens","selectedChain","onTokenSelect","resetImportToken","shortBaseSymbol","scrollContainerRef","searchInputRef","isResetButtonVisible","setIsResetButtonVisible","setRenderingKey","searchTokenList","setSearchTokenList","filterTokens","_pairsBySlug$tokenInS","filterAndSortTokens","filterSupportedTokens","allTokens","userTokensWithFilter","popularTokensWithFilter","swapTokensWithFilter","filteredTokenList","tokensToFilter","untrimmedSearchValue","lowerCaseSearchValue","filteredTokens","isName","isSymbol","isKeyword","sortFactors","searchResultToken","factors","tickerExactMatch","tickerMatchLength","nameMatchLength","specialOrder","tokenSymbol","tokenName","comparisonResult","compareTokens","resetSearch","isValidAddress","newRenderingKey","Loading","TokenByAddress","Search","isSwap","handleTokenClick","selectedToken","_searchInputRef$curre","renderToken","descriptionText","tokenPrice","Token","renderTokenGroup","shouldShowSettings","tokenGroupContainer","tokenGroupHeader","tokenGroupTitle","tokenGroupAdditionalTitle","renderTokenSkeleton","tokenContainer","tokenContainerDisabled","tokenLogoContainer","logoContainer","tokenLogoSkeleton","tokenNetworkLogoSkeleton","nameContainer","tokenNameSkeleton","tokenValueSkeleton","tokenPriceContainer","rotateSkeleton","renderSearchResults","tokenToImport","tokenNotFound","tokenNotFoundTitle","tokenNotFoundDesc","tokenSelectInputWrapper","tokenSelectSearchIcon","tokenSelectInput","tokenSelectSearchResetWrapper","tokenSelectSearchReset","tokenSelectSearchResetIcon","tokenSelectContent","tokenLogo","tokenLogoDisabled","tokenTextDisabled","tokenNetwork","isFilterActive","buildContentHtml","withRadix","sanitizeHtml","hasDot","formattedWholePart","fractionStr","suffixStr","fractional","tempEl","shouldGetParentWidth","isFontChangedRef","measureEl","updateFontScale","offsetParent","parentElement","paddingLeft","paddingRight","cloneNode","scale","clearText","inputClassName","labelClassName","valueClassName","cornerClassName","onPressEnter","onInputClick","placeholderRef","useFontScale","textRef","updateHtml","newText","html","restoreCaretPosition","prefixLength","_clearedValue$","selection","getSelection","rangeCount","getRangeAt","setStart","clearedValue","NODE_TYPE","NodeFilter","SHOW_TEXT","treeWalker","createTreeWalker","elem","FILTER_REJECT","FILTER_ACCEPT","nextNode","currentNode","getTextNodeAtPosition","removeAllRanges","newRange","setEnd","addRange","saveCaretPosition","inputWrapperFullClass","input__wrapper","inputWrapperStatic","input__wrapper_hasFocus","large","labelTextClassName","cornerFullClass","swapCorner","swapCorner_error","rich","rich__value","rich__placeholder","focusAtTheEnd","createRange","selectNodeContents","collapse","changeInvoiceToken","closeInvoiceModal","isTokenSelectorOpen","openTokenSelector","closeTokenSelector","amountValue","setAmountValue","setComment","invoiceUrl","handleTokenSelect","contentTitle","RichNumberInput","SelectTokenButton","tokenButton","invoiceComment","labelForInvoice","invoiceLinkField","Selector","TokenSelector","stopById","onActiveClick","SCROLL_DURATION","CLIP_PATH_CONTAINER_CLASS_NAME","activeTab","overlayClassName","onSwitchTab","onActiveTabClick","appWidth","activeTabElement","offsetLeft","activeTabOffsetLeft","activeTabOffsetWidth","newLeft","containerWidth","scrollId","remainingPath","isStopped","scrollSnapType","startAt","currentPath","animateHorizontalScroll","useActiveTabCentering","_containerRef$current","clipPath","paddingTop","clipLeft","rightPosition","leftPosition","calculateClipPath","openInvoiceModal","closeReceiveModal","isSwapAllowed","isOnRampAllowed","handleBuyFiat","handleSwapClick","handleReceiveClick","qrCode","useQrCode","hiddenClassName","hideLogo","withFormatTransferUrl","setIsInitialized","logoUrl","qrCodeRef","QrCodeStyling","dotsOptions","cornersSquareOptions","imageOptions","imageSize","crossOrigin","qrOptions","errorCorrectionLevel","_qrCode","_options","verifyHardwareAddress","qrCodeHidden","qrClassNames","qrCodeStatic","contentTitleQr","copyButtonStatic","addressWrapper","contentTitleLedger","contentTitleLedgerStatic","dottedLink","TonActions","canBuyWithCard","TronActions","setReceiveActiveTab","tabTon","tabTron","handleSwitchTab","tabId","TonContent","TronContent","currentTab","TabList","tabsInModal","tabsOverlay","tronActive","contentWrapper","contentStatic","iosModalDialog","receiveHeader","receiveHeaderNoTabs","Content","firstButtonText","secondButtonText","onFirstButtonClick","onSecondButtonClick","amountString","amountFraction","amountSymbol","getHelpCenterUrl","_HELP_CENTER_URL$type","useAmountInputState","onAmountChange","isBaseCurrency","switchCurrency","tokenAmountBI","isAmountReadonly","onTokenChange","setToken","setIsBaseCurrency","tokenAmountRef","currencyAmountRef","currencyDecimals","setAmountsFromToken","tokenAmountToCurrencyAmount","setAndReportAmountFromPrice","newTokenAmount","currencyAmountToTokenAmount","formalizeStringAmount","tokenAmountToBigInt","onInputChange","currencyAmount","inputValue","alternativeValue","useCurrencySwitch","onMaxAmountClick","onAlternativeAmountClick","tokenDecimals","useTokenDropdown","tokenBySlug","selectedStakingId","selectableTokens","hasNominatorsStake","hasLiquidStake","getStakingTokens","useTransitionActiveKey","isAllMode","onAmountClick","EMPTY_TOKEN_LIST","isInMode","buttonPrefixText","getTokenId","tokenToDropdownItem","tokenById","selectedTokenId","dropdown","isMaxAmountLoading","isMaxAmountAllMode","renderBottomRight","onInputFocus","onInputBlur","keepInputFocus","cancelFocusTimer","_cancelFocusTimer$cur","_cancelFocusTimer$cur2","useKeepInputFocus","handleMaxAmountClick","AmountInputMaxButton","TokenDropdown","renderInput","renderAlternativeAmount","getNumberRegex","zeroValue","isSensitiveData","sensitiveDataMaskSkin","prevValueRef","renderValue","noFallbackToPrev","contentEl","valueRegex","mask","BottomRightSlide","ACTIVE_STATES","runThrottled","_accountState$staking","apiError","submitStakingInitial","fetchStakingFee","cancelStaking","isSafeInfoModalOpen","openSafeInfoModal","closeSafeInfoModal","setAmount","isIncorrectAmount","isInsufficientFee","isBelowMinimumAmount","annualYieldText","tvl","dailyReward","apr","calcJettonStakingApr","annualYieldStandard","annualYieldVerified","isNativeToken","nativeSlug","nativeBalance","minAmount","getStakingMinAmount","doubleNetworkFee","shouldLeaveForUnstake","handleHelpCenterClick","handleCheckEligibility","errorTransitionKey","InsufficientFee","BelowMinimumAmount","ApiError","balanceError","amountBottomRight","amountBottomRight_error","amountBottomRight_slide","handleChangeStaking","amountInputProps","welcome","welcome_static","sticker_static","welcomeInformation","welcomeInformation_static","stakingApy","textButton","AmountInput","amountBig","currentAmount","balanceResult","balanceResultWrapper","balanceResultWrapper__slide","RichNumberField","balanceResultInput","balanceResultLabel","renderStakingResult","stakingSafeDialog","jvault_link","renderSafeDescription","renderSafeInfoModal","IS_OPEN_STATES","setStakingScreen","clearStakingError","submitStakingPassword","submitStakingHardware","renderedStakingAmount","setRenderedStakingAmount","handleTransferSubmit","handleViewStakingInfoClick","StakingInitial","transactionBanner","renderTransactionBanner","TransferResult","submitStakingClaim","submitStakingClaimHardware","cancelStakingClaim","rewardAmount","isNativeEnough","withModalHeader","feeClassName","renderInfo","tonToken","profit","selectAccountStakingTotalProfit","startUnstaking","startStakingClaim","fetchStakingHistory","unstakeTime","canBeClaimed","hasHistory","shouldRenderSpinner","spinnerRef","shouldRenderTotalAmount","totalAmountRef","handleStakeClick","handleUnstakeClick","handleClaimClick","stakingResult","renderUnstakeDescription","unstakeTime_purple","unstakeTimeIcon","stakingInfo","stakingInfo_modal","stakingInfoNoHistory","stakingTransition","stakingInfoClose","balanceStakedLabel","balanceStakedResult","stakingInfoLoading","stakingInfoLoadingAnimation","stakingInfoButtons","stakingInfoButtonsAdaptiveWidth","stakingInfoButtonsWithMargin","stakingInfoButton","checkEligibilityButton","rewardString","renderRewards","history_static","historyTotal","historyTotalValue","historyTitle","historyList","historyList_static","StakingProfitItem","withBackground","stakingInfoModalContent","StakingInfoContent","FULL_SIZE_NBS_STATES","isNominators","hasAmountError","isOnlyFullAmount","setUnstakeAmount","successUnstakeAmount","setSuccessUnstakeAmount","isLongUnstake","unstakeDate","setUnstakeDate","isUnstakeDisabled","refreshUnstakeDate","handleStartUnstakeClick","renderUnstakeTimer","unstakeDateText","shouldShowInfo","unstakeInfoTransition","unstakeInfo","renderUnstakeInfo","newAppVersion","calcVestingAmountByStatus","statuses","currentAcc","isUnfreezeRequested","mycoin","closeVestingModal","startClaimingVesting","currentlyFrozenAmount","currentlyReadyToUnfreezeAmount","isDisabledUnfreeze","handleStartClaimingVesting","volume","initialAmount","isInteractive","endsAt","submitClaimingVesting","submitClaimingVestingHardware","cancelClaimingVesting","clearVestingError","claimAmount","SEND_CONTEXT_MENU_ITEMS","handleSendMenuItemClick","restProps","FeeDetailsContent","realFeePrecision","excessFeePrecision","extraContent","full_fee","excess_symbol","chain_name","BUTTON_ANIMATION_DURATION","isSending","isNotEnoughNative","isPriceImpactError","isErrorExist","shouldSendingBeVisible","errorMsgByType","isTouched","textStr","transitionKeyRef","renderThrottled","throttledResolver","useThrottledResolver","useThrottledSignal","renderedText","swapArrowIcon","footerButtonWrapper","footerButtonInner","IS_WHOLE_PART_BIG_REGEX","setSwapDex","selectedDexLabel","setSelectedDexLabel","renderedDexItems","renderedCurrentDexLabel","renderedBestRateDexLabel","isBestRateSelected","confirmLabel","dex_name","handleDexConfirm","shouldRenderBenefit","benefitAmount","bestRateEstimate","otherEstimate","isDirectSwap","ourFeeValue","benefit","calculateBenefitAmount","renderedAmounts","formattedAmount","regex","getNumberParts","wholePartRaw","dotPart","formatDexItemAmount","buttonContent","DedustPath","StonfiPath","renderedDexItem","SLIPPAGE_VALUES","SwapSettings","showFullNetworkFee","onNetworkFeeClick","setSlippage","canEditSlippage","currentSlippage","setCurrentSlippage","priceImpactError","slippageError","handleSave","handleInputChange","stringValue","advancedInput","slippageList","advancedSlippageButton","balanceLink","dot","advancedSlippageContainer","advancedSlippage","renderSlippageValues","Tooltip","slippageLabel","advancedSlippageError","advancedBlock","advancedRow","advancedDescription","advancedValue","ValuePlaceholder","renderRate","actualFee","feeElement","advancedLink","advancedLinkIcon","renderNetworkFee","percent","advancedError","SwapSettingsModal","advancedPlaceholder","advancedTooltip","advancedTooltipContainer","_explainedFee$fullFee2","_explainedFee$fullFee3","setSwapAmountIn","setSwapAmountOut","switchSwapTokens","estimateSwap","setSwapScreen","setSwapCexAddress","authorizeDiesel","inputInRef","inputOutRef","currentTokenInSlug","currentTokenOutSlug","nativeTokenInSlug","nativeUserTokenIn","amountInBigint","amountOutBigint","balanceIn","isEnoughBalance","swapAmountInBigint","networkNativeFeeBigint","isBalanceSufficientForSwap","isEnoughNative","isDieselNotAuthorized","hasAmountInError","amountOutValue","hasInsufficientFeeError","isCrosschain","isBuyAmountInputDisabled","handleBuyAmountInputClick","_pairsBySlug$currentT","useReverseProhibited","handleEstimateSwap","debounceSetAmountIn","debounceSetAmountOut","currentSubModal","openSettingsModal","openFeeModal","closeSubModal","_explainedFee$realFee3","isFeeModalAvailable","currentModal","setCurrentModal","useSubModals","handleAmountInChange","handleSelectTokenInModalOpen","SelectTokenFrom","handleSelectTokenOutModalOpen","SelectTokenTo","handleAmountOutChange","handleSwitchTokens","amountInput","inputLabel","amountInputInner","swapCornerTop","swapCornerStaticTop","swapButtonWrapper","swapButtonWrapperStatic","AnimatedArrows","amountInputBuy","swapCornerBottom","swapCornerStaticBottom","SwapDexChooser","footerBlock","footerBlockStatic","feeLine","renderFee","priceImpactStatic","priceImpactSticker","priceImpactContent","priceImpactTitle","priceImpactArrow","priceImpactDescription","renderPriceImpactWarning","changellyInfo","changellyInfoStatic","changellyInfoTitle","changellyIcon","changellyInfoDescription","policy","kyc","renderChangellyInfo","SwapSubmitButton","FeeDetailsModal","shouldAnimate","hasAnimation","startAnimation","stopAnimation","renderArrow","isInverted","arrowContainer","arrowContainerInverted","arrowOld","animateDisappear","arrowNew","animateAppear","swapButton","trimStringByMaxBytes","maxBytes","decoder","sliced","COMMENT_DROPDOWN_ITEMS","isCommentRequired","isEncryptedCommentSupported","onCommentChange","setTransferShouldEncrypt","handleCommentOptionsChange","dropdownItems","AUTHORIZE_DIESEL_INTERVAL_MS","isMemoRequired","fetchTransferFee","fetchNftFee","setTransferAmount","setTransferToAddress","setTransferComment","cancelTransfer","checkTransferAddress","dismissTransferScamWarning","transferToken","renderedScamWarningType","isDisabledDebounce","doesSupportComment","handleAddressInput","isValueReplaced","shouldDisableClearButton","transferAmount","isFullTokenTransfer","tokenRequiredAmount","nativeTokenRequiredAmount","isBalanceSufficientForTransfer","isAmountMissing","authorizeDieselInterval","updateDieselState","runFunction","handleTokenChange","clearForm","handleClear","handleScamWarningModalClose","handleCommentChange","isAmountGreaterThanBalance","isFeeModalOpen","closeFeeModal","useFeeModal","tokensToSelect","selectedTokenSlug","isSelectableToken","handleAmountChange","AmountInputSection","CommentSection","scamWarning","help_center_link","getScamWarning","fluidButton","isMenuDisabled","shouldDisableOnLink","shouldDisableOnLongTap","shouldDisablePropagation","isContextMenuOpen","setIsContextMenuOpen","contextMenuAnchor","setContextMenuAnchor","contextMenuTarget","setContextMenuTarget","handleBeforeContextMenu","handleContextMenu","clientY","handleContextMenuClose","handleContextMenuHide","handleTouchMove","timer","clearLongPressTimer","clearLongPressTimerAndStopEvent","origialEvent","startLongPressTimer","emulateContextMenuEvent","WithContextMenu","onItemClick","buttonRef","useContextMenuHandlers","TABS","Receive","STAKING_TAB_TEXT_VARIANTS","inactive","unstakeRequested","readyToClaim","activeTabIndex","isStakingDisabled","stakingStatus","setActiveTabIndex","transferSlideClassName","renderedBgHelpers","contentBackgroundClassName","contentBgRef","contentFooterRef","lastHeightRef","adjustBg","_transitionRef$curren","_transitionRef$curren2","activeSlideSelector","transferQuery","rect","shouldRenderWithoutTransition","contentBgStyle","contentFooterStyle","componentObserver","ResizeObserver","contentBg","contentFooter","useTabHeightAnimation","slideContent","contentSlideStaked","areNotAllTabs","isLastTab","isAddBuyAnimating","playAddBuyAnimation","stopAddBuyAnimation","isSendAnimating","playSendAnimation","stopSendAnimation","isSwapAnimating","playSwapAnimation","stopSwapAnimation","isStakeAnimating","playStakeAnimation","stopStakeAnimation","stickerPaths","renderCurrentTab","slideContentAddBuy","slideContentTransfer","TransferInitial","SwapInitial","handleSelectTab","notAllTabs","tabIcon","tabText","tabDecoration","restButtonProps","withContextMenu","tabDelimiter","tab_purple","tab_purpleText","contentHeader","firstActive","lastActive","contentHeaderInner","onEarnClick","openReceiveModal","addBuyButtonName","handleStartSwap","handleStartTransfer","handleAddBuyClick","handleEarnClick","buttonProps","calcBigChangeValue","currentPrice","changeFactor","calculateFullBalance","primaryValue","stakingAmount","primaryWholePart","primaryFractionPart","changeValue","changePercent","changePrefix","useUpdateIndicator","updateStartedAtKey","setIsUpdating","updateStartedAt","timeElapsedSinceLastUpdateStarted","svgMaskId","viewBox","cx","cy","dur","repeatCount","hasCardsInfo","openMintCardModal","shouldRenderMintCardsButton","mintCardsButtonRef","ClockIcon","scheduledAnimationsCounter","resetCounterOnTickEnd","prevText","characters","textLength","prevTextLength","charIndex","prevTextCharIndex","renderAnimatedCharacters","chains","chainDropdownItems","hasDomain","handleCopyAddress","handleDomainClick","handleExplorerClick","closeTimeoutRef","handleMouseEnter","handleMouseLeave","addressContainer","addressLabel","multichainIconSrc","multichainIcon","addressMenuBubble","fullItemClassName","menuStyles","separator","menuItemName","domainText","addressText","menuFontIcon","menuExplorerIcon","displayText","explorerButton","currentCurrency","excludedCurrency","currencyList","handleBaseCurrencyChange","currencySwitcherMenu","_nft$metadata","isSticky","noShowAnimation","onTransitionEnd","cardClassName","rootClassName","sticky","loaded","withShadow","shadow","onCardChange","prevNftRef","prevNft","prevNftAddress","isMountRef","handleTransitionEnd","CustomCardBackground","TOKEN_CARD_COLORS","orange","pink","red","sea","tegro","blue","TOKEN_EXCEPTION_COLORS","prices","selectedIndex","imgClassName","onSelectIndex","boundingPoints","priceValues","points","scaleX","scaleY","getBasisPoint","indexesCount","point","tangent","firstPoint","getCurvePath","pCurrent","pMinus1","pMinus2","handleMouseMove","containerX","nextIndex","onMouseMove","onTouchMove","activePoint","partialPath","getPath","renderSvg","ITEMS","currentPeriod","setCurrentTokenPeriod","handlePeriodChange","OFFLINE_TIMEOUT","DEFAULT_PERIOD","historyPeriods","onYieldClick","loadPriceHistory","isCurrencyMenuOpen","openCurrencyMenu","closeCurrencyMenu","isHistoryMenuOpen","openHistoryMenu","closeHistoryMenu","shouldUseDefaultCurrency","currencySymbol","selectedHistoryIndex","setSelectedHistoryIndex","prevHistoryIndex","lastPrice","bestState","refreshHistory","newPeriod","handleCurrencyChange","tokenLastUpdatedAt","tokenLastHistoryPrice","selectedHistoryPoint","tokenChangePrice","dateStr","initialPrice","_history$find","valueBig","change","amountChange","withChange","historyStartDay","withExplorerButton","shouldHideChartPeriodSwitcher","closestColor","smallestDistance","tokenRgbColor","colorName","colorValue","rgbA","rgbB","l1","a1","b1","l2","a2","b2","c1","deltaC","deltaA","deltaB","deltaLKlsl","deltaCkcsc","deltaHkhsh","deltaE","calculateTokenCardColor","tokenCard","tokenInfoHeader","currencySwitcher","iconCaretSmall","CurrencySwitcherMenu","tokenInfoSubheader","tokenTitle","apy","tokenChange","tokenChangeSensitiveData","tokenChangeSpoiler","TokenPriceChart","chart","chartImg","tokenHistoryPrice","tokenPriceDate","center","periodChooser","periodChooserHidden","ChartHistorySwitcher","tokenCurrentPrice","getTokenExplorerBaseUrl","getExplorerTokenUrl","tokenExplorerButton","renderExplorerLink","onTokenCardClose","amountRef","customCardClassName","setCustomCardClassName","setWithTextGradient","screenWidth","screenWidthDep","renderedToken","shouldRenderTokenCard","tokenCardRef","getSensitiveDataMaskSkinFromCardNft","handleCardChange","hasGradient","containerWrapper","loadingDotsContainer","backstage","CustomCardManager","containerInner","iconCaretClassNames","iconCaretFraction","iconCaret","noAnimationCounter","balanceTransition","balanceSlide","blurred","AnimatedCounter","changeSpoiler","renderBalance","CardAddress","MintCardButton","TokenCard","getScrollableContainer","selector","getScrollableContainerSelector","getScrollContainerClosestSelector","addNftsToBlacklist","closeNftCollection","closeHideNftModal","handleHide","number","getViewportSlice","sourceIds","listSlice","offsetId","indexForDirection","Forwards","newViewportIds","areSomeLocal","areAllLocal","Backwards","newIsOnTop","loadMoreBackwards","listIds","_currentStateRef$curr","withResetOnInactive","currentStateRef","viewportIds","isOnTop","prevSlug","resetScroll","prevListIds","prevIsDisabled","oldViewportIds","oldIsOnTop","newListIds","sliceLength","getViewportSliceAfterListChange","getMore","DEFAULT_LIST_SELECTOR","DEFAULT_PRELOAD_BACKWARDS","DEFAULT_SENSITIVE_AREA","itemSelector","preloadBackwards","sensitiveArea","withAbsolutePositioning","noScrollRestore","noScrollRestoreOnTop","noFastList","cacheBuster","beforeChildren","scrollContainerClosest","onLoadMore","onDragOver","onDragLeave","stateRef","loadMoreForwards","scrollContainer","prevItems","listItemElements","newScrollTop","currentAnchor","newAnchorTop","currentAnchorTop","nextAnchor","isScrollTopJustUpdated","listLength","isNearTop","offsetTop","isNearBottom","isUpdated","nextAnchorTop","closestScrollContainer","handleNativeScroll","cleanupAnimation","topOffset","withAnimation","prevTopOffset","animateOpacity","animateMove","useActivityListEntry","SCROLL_THRESHOLD","DATE_ID_PREFIX","EMPTY_DICTIONARY","isHistoryEndReached","allActivityIds","selectActivityHistoryIds","totalTokensAmount","shouldShowSeparateAssetsPanel","hasUserScrolledRef","listItemIds","_tokensBySlug$activit","filterActivityIds","lastActivityDayStart","activityDayStart","addDatesToActivityIds","firstListItemId","loadMore","useInfiniteScroll","getListItemKey","keyByIdRef","oldActivityById","keyById","oldActivities","newActivityId","oldActivityId","newActivityIds","itemId","_keyByIdRef$current","useListItemKeys","shouldUseAnimations","itemPositionById","currentContainerHeight","lastViewportId","activityOffset","_prevItemPositionById","_itemPositionById$anc","prevItemPositionById","anchorId","prevTop","nextTop","scrollBy","usePreventScrolledListShift","handleActivityClick","InfiniteScroll","_itemPositionById$ite","itemContent","dateValue","isFirst","formattedDate","dateWithLoader","renderDate","isActivityActive","isLastInDay","ActivityListItem","renderHistory","NewWalletGreeting","UNFREEZE_DANGER_DURATION","OPEN_CONTEXT_MENU_CLASS_NAME","vestingStatus","unfreezeEndDate","isInvestorView","isStakingAvailable","isVesting","renderedAmount","changeClassName","change_up","change_down","withYield","withLabel","getTokenName","fiatAmountCols","shouldRenderYield","yieldRef","isContextMenuShown","isBackdropRendered","toggleTokenVisibility","isServiceToken","hasUnclaimedRewards","mandatoryItems","useTokenContextMenu","renderYield","apyLabel","apyLabel_staked","renderChangeIcon","iconArrow","renderStakingIcon","wrapperVisible","vestingIcon","primaryCell","nameText","chainLabel","secondaryCell","secondaryValue","secondaryValue_staked","secondaryValue_vesting","secondaryValue_vestingUnfreeze","totalAmount","canRenderYield","renderDefaultView","_accountState$vesting","isSeparatePanel","onTokenClick","onStakedTokenClick","renderedTokens","renderedMycoin","userMycoin","activeStates","stakedTokens","shouldRenderStakedTokens","vestingTokenRef","shouldRenderVestingToken","vestingAmount","onVestingTokenClick","loadMycoin","hasVesting","isMycoinLoaded","useVesting","viewportSlugs","viewportIndex","handleOpenTokenSettings","stateByTokenSlug","wrapperLoading","emptyListSeparate","indexInViewport","isSwapAvailable","noTokens","noTokensText","noTokensHeader","noTokensDescription","openSettingsButton","selectNfts","burnNfts","openHideNftModal","removeCollectionTab","isTelegramGifts","collectionNfts","dnsExpireInDays","isInTabs","isOnFragment","getgemsBaseUrl","nftCollectionAddress","getExplorerNftCollectionUrl","handleMenuOpen","isChecked","usePrevDuringAnimationSimple","durationMs","setPrev","ON_SALE_ITEM","TON_DNS_ITEM","SEND_ITEM","FRAGMENT_ITEM","GETGEMS_ITEM","TON_EXPLORER_ITEM","COLLECTION_ITEM","HIDE_ITEM","RENEW_ITEM","NOT_SCAM","UNHIDE","BURN_ITEM","SELECT_ITEM","INSTALL_CARD","RESET_CARD","INSTALL_ACCENT_COLOR","RESET_ACCENT_COLOR","LINK_TO_ADDRESS","CHANGE_LINKED_ADDRESS","useNftMenu","linkedAddress","isNftBlacklisted","isNftWhitelisted","isNftInstalled","isNftAccentColorInstalled","openNftCollection","addNftsToWhitelist","closeNftAttributesModal","openUnhideNftModal","clearCardBackgroundNft","clearAccentColorFromNft","openDomainLinkingModal","closeOverlays","fragmentUrl","isTonDns","isCard","isContextMenuMode","onOpen","tonDnsExpiration","clearNftSelection","isLottie","shouldPlay","markHover","unmarkHover","lottie","useIsIntersecting","isHover","useLottie","isSelectionEnabled","isSelected","isDnsExpireSoon","shouldRenderWarning","warningRef","handleRenewDomainClick","handleOpenContextMenu","handleOpenMenu","handleCloseMenu","renderDnsExpireWarning","Radio","NftMenu","fetchNftsFromCollection","clearNftsSelection","hasSelection","setIsScrolled","_containerRef$current2","nft_marketplace","selectAllNfts","allSelectedIsTonDnsNft","tonDnsMultiSelected","handleSendClick","handleBurnClick","handleHideClick","MAIN_CONTENT_TABS_LENGTH","activeNftKey","_vesting$info","tokensCount","doesSupportNft","selectDoesAccountSupportNft","onTabsStuck","tabsRef","hasNftSelection","numberOfStaking","handleNftsMenuButtonClick","HiddenNfts","nftCollections","hasTelegramGifts","itemsByAddress","shouldRenderHiddenNftsSection","blacklistedAddressesSet","mainContentTabsCount","mainContentTabs","contentTransitionKey","nftCollectionIndex","handleScrollToTop","scrollTo","updateScrolledState","intersectionRootMarginTop","handleTabIntersection","isStuck","intersectionRatio","tabsContainerStuck","_e$target","handleClickAsset","handleContentTransitionStop","portraitContainer","landscapeContainer","Nfts","assetsPanel","contentPanel","landscapeContentPanel","headerTransitionKey","tabsContainer","tabsContainerForNftCollection","tabsContent","tabsSlide","NftSelectionHeader","NftCollectionHeader","slides","HideNftModal","newName","setNewName","currentWalletVersion","forceClose","accountClassName","accountSelectorClassName","withAccountSelector","withBalance","openAddAccountModal","openAccountSelector","closeAccountSelector","isEdit","openEdit","closeEdit","shouldRenderDialog","dialogContainerRef","isBip39Account","hasTonWallet","withAddW5Button","accountsAmount","balanceValues","handleSwitchAccount","handleAddV5WalletClick","WalletVersion","accountTitleClassName","accountTitle","accountTitleInteractive","renderAccountsSelector","dialogFullClassName","dialog_compact","renderButton","createAccountButton","createAccountIcon","balanceCurrency","balanceCurrencyPrefix","balanceFractionPart","handleOpenAccountSelector","accountTitleInner","arrowIcon","AccountRenameModal","handleManualLock","handleFullscreenToggle","exitFullscreen","setAppLayout","handleAppLayoutToggle","handleSensitiveDataToggle","areTabsStuck","canToggleAppLayout","iconsAmount","QrScannerButton","AccountSelector","AppLockButton","ToggleSensitiveDataButton","ToggleFullscreenButton","ToggleLayoutButton","SettingsButton","getThemeColorMetaElement","isLight","metaThemeColor","onOpenBackupWallet","lightColor","darkColor","metaElementLight","metaElementDark","lightContent","darkContent","useBrowserUiColor","wrapper_landscape","isOpenRef","setShouldRender","prevIsShown","hideTimeoutRef","toggleOpen","ignoredAddressForRenewal","nftForRenewal","renderedNftForRenewal","expireInDays","expiredDomains","Collapsible","wrapperFlex","previewNfts","domainPreviewWrapper","domainPreview","renderPreview","renderWarningMessage","closeSecurityWarning","IS_UNSAFE_WEB","testnetWarning","BackupWarning","RenewDomainWarning","SecurityWarning","_global$mediaViewer","openBackupWalletModal","closeStakingInfo","updatePendingSwaps","cardRef","portraitContainerRef","landscapeContainerRef","markIsFocused","unmarkIsFocused","setAreTabsStuck","usePreventPinchZoomGesture","isPageAtTop","shouldHideBalanceInHeader","handleTokenCardClose","Warnings","Header","Card","PortraitActions","LandscapeActions","StakeModal","StakingInfoModal","ReceiveModal","InvoiceModal","UnstakeModal","StakingClaimModal","VestingModal","VestingPasswordModal","RenewDomainModal","LinkingDomainModal","UpdateAvailable","RenderingState","versionById","withOtherWalletVersions","clearAccountError","clearAccountLoading","isNewAccountImporting","setIsNewAccountImporting","handleModalClose","handleNewAccountClick","handleImportAccountClick","handleViewModeWalletClick","ViewMode","handleHardwareWalletConnected","SelectAccountsHardware","handleOpenSettingWalletVersion","AddAccountPasswordModal","buttonLabel","small","onNext","mnemonicContainer","privateKeyHex","privateKey","writedownAccepted","setWritedownAccepted","openWalletAccepted","setOpenWalletAccepted","canBeStolenAccepted","setCanBeStolenAccepted","modalSticker","setIsBackupRequired","setCheckIndexes","mnemonicRef","handleSafetyConfirm","handleBackupErrorUpdate","handleCheckMnemonic","_mnemonicRef$current","handleRestartCheckMnemonic","handleCheckMnemonicSubmit","SafetyRules","MnemonicPrivateKey","MnemonicList","MnemonicCheck","renderedNft","attributesCount","isFolded","setIsFolded","isNoData","FOLD_LIMIT","handleExpand","handleCollectionClick","actionIcon","nftInfo","nftName","collectionNameIcon","attributesList","renderAttributeRow","attribute","trait_type","attributeValue","expandButton","expandButtonIcon","closeOnRampWidgetModal","animationTimeoutRef","isAnimationInProgress","setIsAnimationInProgress","iframeSrc","setIframeSrc","onIframeLoaded","frameBorder","START_SCAN_DELAY_MS","MODAL_ANIMATION_DURATION_MS","DESTROY_SCANNER_DELAY_MS","isFlashlightAvailable","setIsFlashlightAvailable","isFlashlightEnabled","setIsFlashlightEnabled","isScannerStarted","setIsScannerStarted","flashlightRef","flashlightShouldRender","scanSquareRef","stopScan","startScan","formats","QrCode","scanAreaCoordinates","scanSquareRect","scaledRect","getDomNodeDimensions","barcodes","barcode","qrCodeCoordinates","cornerPoints","topHalf","bottomHalf","sortCoordinatesClockwise","scanArea","isQrCodeOutsideScanArea","rawValue","isTorchAvailable","available","isTorchEnabled","enabled","startScanTimeoutId","documentClassModifyTimeoutId","handleFlashlightClick","disableTorch","enableTorch","flashlightButtonClassName","submitSignature","clearSignatureError","cancelSignature","complete","handleConfirm","transferStyles","transitionContent_simple","usePrevDuringAnimation","timeoutRef","isCurrentPresent","isPrevPresent","onCompleted","initialSeconds","secondsLeft","setSecondsLeft","shouldShowWarning","clearTimer","pad","remainingSeconds","formattedTime","amountInCols","amountOutCols","renderTokenInfo","isReceived","amountWithSign","infoRow","noIcon","noCurrency","infoRowIcon","infoRowToken","infoRowAmount","infoRowAmountGreen","infoRowAmountError","infoRowChain","infoRowCurrency","infoRowCurrencyValue","infoSeparator","infoSeparatorIcon","infoSeparatorIconError","TransactionFee","CHANGELLY_EXPIRE_CHECK_STATUSES","CHANGELLY_ERROR_STATUSES","_accountState$activit","fetchActivityDetails","closeActivityInfo","renderedActivity","titleBadge","shouldRenderCexInfo","isCex","isCexError","isCexHold","isCexWaiting","isCexPending","isExpired","cexTransactionId","isTitleBadgeWarning","cexErrorMessage","isCountdownFinished","transactionUrl","shouldShowQrCode","renderMemo","textFieldWrapper","textFieldLabel","transactionHeader","headerTitle__badge","warning","headerDate","SwapTokensInfo","changellyInfoBlock","changellyDescription","changellyDescriptionBold","blockchain","Countdown","renderAddress","renderSwapInfo","email","swapSupportBlock","errorCexMessage","livechat","footer","isButtonVisible","renderFooterButton","typeClass","withStatus","renderedTransaction","isActivityWithHash","_activity$extra","isOurStaking","isOurUnstaking","isTransactionWithPoisoning","canDecryptComment","decryptedComment","setDecryptedComment","shouldRenderTransactionId","transactionIdRef","startOfStakingCycle","endOfStakingCycle","shouldRenderUnstakeTimer","unstakeTimerRef","clearPasswordError","openPasswordSlide","closePasswordSlide","handleStartStakingClick","handleUnstakeMoreClick","openHiddenComment","renderHeader","TransactionAmount","copyButtonWrapper","scamAddress","feeField","changellyTextField","canUnstake","buttonWide","renderFooter","renderTransactionContent","passwordFormContent","passwordFormContentInModal","unstakeModal","closeUnhideNftModal","handleUnhide","onDismiss","setIsOpen","timerRef","closeAndDismiss","dismissNotification","Notification","bottomBarHideCounter","bottomBarListeners","getIsBottomBarHidden","notifyBottomBarListeners","showBottomBar","wasHidden","switchToWallet","switchToExplore","switchToSettings","setIsHidden","OCCUPIED_HEIGHT","getNode","_container","createGhost","_source$parentElement","ghost","img","oncontextmenu","HTMLImageElement","applyShape","isOpening","isCustom","shouldAnimateFirstRender","externalRef","prevChildren","fromChildrenRef","SHOULD_CLOSE_VIEWER_HANDLERS","descriptionUrl","useSignalRef","getZoomChange","setZoomChange","useZoomChange","whitelistedMediaIds","isNftWhiteListed","SLIDES_GAP","cancelAnimation","cancelZoomAnimation","selectMedia","getMediaId","activeSlideRef","leftSlideRef","rightSlideRef","lastTransformRef","swipeDirectionRef","initialContentRectRef","isReleasedRef","prevZoomChangeRef","isMouseDown","setIsMouseDown","getTransform","setTransform","transformRef","getActiveMediaId","setActiveMediaId","activeMediaIdRef","isScaled","activeMediaId","windowHeight","windowWidth","selectMediaDebounced","clearSwipeDirectionDebounced","clickXThreshold","getTransformStyle","changeSlide","dryRun","lastTransform","mId","handleNextSlide","handlePrevSlide","lastDragOffset","lastZoomCenter","panDelta","lastGestureTime","setLastGestureTime","changeSlideOnClick","calculateOffsetBoundaries","initialContentRect","inBoundsX","inBoundsY","minOffsetX","maxOffsetX","minOffsetY","maxOffsetY","absX","absY","s1","scaleFactor","x1","y1","Vx","Vy","dirX","cancelDrag","absOffsetX","absOffsetY","Vertical","Horizontal","SWIPE_X_THRESHOLD","SWIPE_Y_THRESHOLD","MIN_ZOOM","MAX_ZOOM","scaledCenterX","scaledCenterY","scaleOffsetX","scaleOffsetY","isInThreshold","hasNextSlide","zoomChange","hasZoomChanged","wheelEvent","WheelEvent","nextMediaId","prevMediaId","hasPrev","hasNext","isMoving","Media","_global$settings","mediaUrl","mediaByIds","mediaIds","blacklistedIds","prevTxId","prevHiddenNfts","prevNoGhostAnimation","headerAnimation","shouldAnimateOpening","shouldAnimateClosing","renderedMediaIds","media","selectedMediaIndex","fromId","fromImage","mediaWidth","mediaHeight","getImageDimension","availableHeight","toWidth","toHeight","availableWidth","aspectRatio","calculatedWidth","calculateDimensions","toLeft","toTop","fromTop","fromLeft","fromWidth","fromHeight","fromTranslateX","fromTranslateY","fromScaleX","fromScaleY","clearShape","animateOpening","toImage","targetTop","display","isElementInViewport","existingGhost","ghostStyles","animateClosing","ShowTransition","MediaInfo","Actions","Slides","startCardMinting","currencyIcon","MAP_CARD_TYPE_TO_NAME","standard","silver","gold","platinum","black","CardSlides","TOTAL_SLIDES","closeMintCardModal","Standard","Silver","showNextSlide","Black","showPrevSlide","defaultProps","renderMediaCard","Gold","Platinum","navigation","navigationLeft","navigationIcon","navigationRight","muted","loop","playsInline","poster","video","slideInner","dots","dotActive","cardType","notMinted","avaliability","soldOut","sold","leftAmount","soldAmount","amountInner","amountLeft","amountSold","renderAvailability","CardPros","selectedCardType","clearMintCardError","submitMintCard","submitMintCardHardware","selectedCardName","CardRoster","mintCardBanner","resultWithTime","resultTimeIcon","onCheck","disableBiometrics","customSubmitButton","openBiometricsTurnOff","enableBiometrics","shouldDisablePasswordForm","customCancelButton","closeBiometricSettings","isTurnOnBiometricsOpened","isTurnOffBiometricsOpened","isTurnOffBiometricsWarningOpened","BiometricsTurnOn","BiometricsTurnOff","BiometricsTurnOffWarning","isNativeBiometricsEnabled","enableNativeBiometrics","clearNativeBiometricsError","pinPadType","pinTitle","prevIsEnabled","contentFullSize","stickerNativeBiometric","pinPadTitle","THEME_OPTIONS","darkThemeImg","isMintingCardsAvailable","isTrayIconEnabled","onTrayIconEnabledToggle","setAnimationLevel","isAvailableAccentLoading","setIsAvailableAccentLoading","availableAccentColorIds","setAvailableAccentColorIds","nftByColorIndexes","setNftsByColorIndex","nftCards","colors","nftsByColorIndex","colorIndex","getAccentColorsFromNfts","sortedColors","handleThemeChange","newTheme","handleAnimationLevelToggle","handleUnlockNewPalettesClick","renderColorButton","colorButton","colorButtonCurrent","iconLock","iconLockInverted","blockTitle","settingsBlock","themeWrapper","theme_active","themeIcon","themeIcon_active","themeImg","settingsBlockWithDescription","colorList","subBlockAsButton","blockDescription","Switcher","menuSwitcher","deleteToken","handleDeleteToken","ZERO_POINT","DEFAULT_OFFSET","EDGE_THRESHOLD","onDragEnd","externalStyle","knobStyle","parentRef","scrollRef","scrollIntervalId","translation","lastMousePosition","stopContinuousScroll","cancelAnimationFrame","startContinuousScroll","animateScroll","updateDraggablePosition","calculateConstrainedTranslation","setInitialState","_scrollRef$current","_ref$current2","getClientCoordinate","handleTouchStart","scrollRect","distanceFromTop","distanceFromBottom","scaledEase","handleMouseUp","dragButtonRef","cssStyles","lastScrollTop","draggableElement","parentRect","draggableRect","minX","maxX","minY","maxY","getOffsetBySlug","realIndex","getOffsetByIndex","parentContainer","updateOrderedSlugs","rebuildOrderedSlugs","tokensRef","sortableContainerRef","tokenToDelete","setTokenToDelete","orderedTokenSlugs","dragOrderTokenSlugs","draggedIndex","arr1","arr2","arraysAreEqual","handleOpenAddTokenPage","SelectTokenList","_state$orderedTokenSl","_state$orderedTokenSl2","handleDragEnd","handleTokenVisibility","contentRelative","sortableContainer","iconChevronRight","isDragged","draggedTop","isDeleteButtonVisible","isDragDisabled","Draggable","item_token","tokenDescription","deleteText","DeleteTokenModal","toggleTinyTransfersHidden","toggleInvestorView","toggleTokensWithNoCost","toggleSortByValue","setSettingsState","currencyItems","handleTinyTransfersHiddenToggle","handleInvestorViewToggle","handleOpenHiddenNfts","handleTokensWithNoPriceToggle","handleSortByValueToggle","localBaseCurrency","setLocalBaseCurrency","hiddenNftsCount","whitelistedAddressesSet","iconQuestion","wideTooltip","itemInfo","SettingsTokens","deleteAllDapps","handleDeleteAllDapps","handleDeleteDapp","isDisconnectModalOpen","openDisconnectModal","closeDisconnectModal","dappToDelete","setDappToDelete","handleDisconnectDapp","handleDisconnectAll","disconnectAllBlock","disconnectButton","DisconnectDappModal","getBuildPlatform","NETWORK_OPTIONS","CAN_DOWNLOAD_LOGS","canViewAllWalletVersions","onShowAllWalletVersions","startChangingNetwork","copyStorageData","currentNetwork","handleNetworkChange","handleAddTonOnlyWallet","handleDownloadLogs","logsString","accountsInfo","mainLogs","bottomSheetLogs","apiLogs","timezoneOffset","getTimezoneOffset","timezone","environment","commit","navigatorPlatform","build","flags","toISOString","getLogsString","filename","fileLocation","directory","Cache","file","writeFile","UTF8","uri","deleteFile","File","files","link","download","click","shareFile","item_disabled","developerCloseButton","sideTitle","removeNftSpecialStatus","isNftHidden","unmarkNftHidden","areSettingsInModal","nftImage","nftPrimaryCell","nftCollection","nftButtonUnhide","isWhitelisted","handleSwitcherClick","hiddenByUserNfts","probablyScamNfts","HiddenByUserNft","ProbablyScamNft","changeLanguage","handleLanguageChange","newLangCode","languageHeader","lc","item_lang","languageInfo","languageMain","languageNative","checkmarkImg","arePushNotificationsAvailable","toggleNotifications","toggleNotificationAccount","toggleCanPlaySounds","arePushNotificationsEnabled","handlePushNotificationsToggle","handleCanPlaySoundToggle","accountDisabled","AndroidSettings","IOSSettings","NativeSettings","NativeSettingsWeb","hasMnemonicWallet","onBackClick","onOpenSecretWordsSafetyRules","onOpenPrivateKeySafetyRules","openSettingsSlide","secretWordsImg","privateKeyImg","isBackupSlideActive","setPrivateKey","privateKeyResult","loadPrivateKey","PrivateKeyContent","backupType","mnemonicResult","loadMnemonic","onEnable","disableNativeBiometrics","isWarningModalOpen","openWarningModal","closeWarningModal","switcherTitle","warningTitle","warningDescription","faceIdImg","biometricsImg","handleConfirmDisableBiometrics","handleBiometricAuthToggle","renderDisableNativeBiometricsWarning","INITIAL_CHANGE_PASSWORD_SLIDE","createNewPin","newPassword","shouldShowBackup","navigateBackToSettings","isAutoUpdateEnabled","onSettingsClose","onAutoUpdateEnabledToggle","openBiometricsTurnOffWarning","openBiometricsTurnOn","setAppLockValue","setIsAllowSuspiciousActions","setIsAuthLoading","previousSlide","setBackupType","setHasMnemonicWallet","pinValue","setPinValue","confirmPinValue","setConfirmPinValue","shouldKeepCurrentPassword","handleBackToSettingsClick","openConfirmNewPinSlide","confirmNewPin","openBackupPage","backup","openNewPasswordSlide","openPasswordChangedSlide","passwordChanged","handleNewPasswordSubmit","handlePinSubmit","handleConfirmPinSubmit","handleChangePasswordClick","handleOpenPrivateKeySafetyRules","handleOpenSecretWordsSafetyRules","secretWords","handleOpenBackupWallet","handleOpenPrivateKey","handleOpenSecretWords","handleAppLockToggle","handleAutolockChange","handleAutoConfirmToggle","handleAllowSuspiciousActionsToggle","handleNativeBiometricsTurnOnOpen","NativeBiometricsTurnOn","optionAndroid","ApplicationDetails","optionIOS","shouldRenderNativeBiometrics","shouldRenderMinifiedPinPad","isAutoConfirmAvailable","isSlideActive","backupImg","NativeBiometricsToggle","changePasswordButton","itemSmall","itemAutoLock","itemDisabled","memoizedPassword","contentInModal","pinPadHeaderMinified","onlyTextHeader","stickerHuge","Backup","BackupSafetyRules","BackupSecretWords","BackupPrivateKey","addToken","withTopSpace","headerInsideModal","importAccountByVersion","handleAddWallet","blockWalletVersionText","item_wallet_version","walletVersionInfo","walletVersionTitle","walletVersionAddress","walletVersionInfoRight","walletVersionTokens","walletVersionAmount","totalBalance","blockWalletVersionReadMore","ton_link","SUPPORT_ACCOUNTS_COUNT_DEFAULT","versionsById","openSettingsHardwareWallet","clicksAmount","setClicksAmount","prevRenderingKeyRef","isDeveloperModalOpen","openDeveloperModal","closeDeveloperModal","withAllWalletVersions","markWithAllWalletVersions","isInitialScreen","activeLang","_versions$filter","lastTxId","balanceInCurrency","isTelegramLinkRendered","telegramLinkRef","handleSlideAnimationStop","handleCloseSettings","hideBottomBar","handlCloseDeveloperModal","handleConnectedDappsOpen","handleAppearanceOpen","Appearance","handlePushNotificationsOpen","handleSecurityOpen","Security","handleAssetsOpen","handleLanguageOpen","Language","handleAboutOpen","About","handleDisclaimerOpen","Disclaimer","handleBackClickToAssets","handleOpenWalletVersion","handleDeeplinkHookToggle","handleTonProxyToggle","handleTonMagicToggle","handleClickInstallApp","handleClickInstallOnDesktop","handleClickInstallOnMobile","handleLedgerConnected","setIsTrayIconEnabled","getIsTrayIconEnabled","handleTrayIconEnabledToggle","setIsAutoUpdateEnabled","handleAutoUpdateEnabledToggle","handleBackOrCloseAction","handleCloseLogOutModal","shouldCloseSettings","handleOpenHardwareModal","handleMultipleClick","handleShowAllWalletVersions","renderHandleDeeplinkButton","tonLinksImg","hidden","withBottomSpace","upgradeImg","installAppImg","tonProxyImg","tonMagicImg","handleOpenTelegramWeb","telegramImg","appearanceImg","assetsActivityImg","securityImg","connectedDappsImg","languageImg","walletVersionImg","ledgerImg","mtwCardsImg","tipsImg","helpcenterImg","supportImg","disclaimerImg","installDesktopImg","installMobileImg","aboutImg","item_red","exitImg","SettingsPushNotifications","SettingsAppearance","SettingsAssets","SettingsSecurity","SettingsDapps","SettingsLanguage","SettingsDisclaimer","SettingsNativeBiometricsTurnOn","SettingsTokenList","SettingsWalletVersion","nestedTransition","SettingsHiddenNfts","SettingsDeveloperOptions","Biometrics","fullDialogClassName","modalDialogWeb","modalContent","cancelSwap","toAddressRef","isAddressFocused","markAddressFocused","unmarkAddressFocused","hasToAddressError","setHasToAddressError","canContinue","setCanContinue","toAddressShort","SHORT_ADDRESS_SHIFT","handleCancelClick","caretPosition","newCaretPosition","validateToAddress","submitPassword","scrollContent","selectBlockchainBlock","inputAddress","inputAddressWrapper","inputButton","inputButtonShifted","blockchainHintWrapper","blockchainHintText","blockchainHintTextError","renderInputAddress","blockchainButtons","isFirstButtonDisabled","isToAddressInCurrentWallet","renderSticker","onInfoClick","onStartSwap","isDetailsDisabled","SwapResult","clearSwapError","setIsExpired","handleTimeout","_activity$cex","changellyImportantRed","textFieldWrapperFullWidth","submitSwap","submitSwapCex","addSwapToken","setSwapTokenIn","setSwapTokenOut","renderedSwapType","setRenderedSwapType","renderedTransactionAmountIn","setRenderedTransactionAmountIn","renderedTransactionAmountOut","setRenderedTransactionAmountOut","renderedTransactionTokenIn","setRenderedTransactionTokenIn","renderedTransactionTokenOut","setRenderedTransactionTokenOut","setRenderedActivity","handleTransactionInfoClick","handleModalCloseWithReset","SwapBlockchain","SwapWaitTokens","SwapPassword","renderSwapShortInfo","SwapComplete","handleTransactionRepeatClick","buttonsAfterNft","feeText","submitTransferConfirm","isBurning","isNotcoinBurning","burningDurationMin","submitBtnText","stars_symbol","AmountWithFeeTextField","renderAmountWithFee","buttonsInsideContentWithScroll","isInProgress","clearTransferError","submitTransferHardware","setTransferScreen","renderedTransactionAmount","_nfts$","_nfts$2","TransferConfirm","TransferPassword","TransferComplete","TransferMultiNftProcess","CONFETTI_COLORS","lastRequestedAt","confettiRef","isRafStartedRef","defaultConfettiAmount","invokeGenerateConfetti","leftSide","randomX","velocity","randomColor","flicker","flickerFrequency","rotation","lastDrawnAt","frameCount","generateConfetti","updateCanvas","canvasWidth","canvasHeight","confettiToRemove","newPos","newVelocity","newFlicker","newRotation","newFrameCount","newLastDrawnAt","beginPath","ellipse","hideTimeout","prevConfettiTime","isDpppModalOpen","APP_STATES_WITH_BOTTOM_BAR","Settings","APP_UPDATE_INTERVAL","mainKey","APP_STATE_RENDER_COUNT","closeBackupWalletModal","closeHardwareWalletModal","cancelCaching","closeQrScanner","checkAppVersion","isInactive","markInactive","canPrerenderMain","prerenderMain","Inactive","withBottomBar","transitionName","slideFullClassName","LedgerModal","AppInactive","useAppIntersectionObserver","ElectronHeader","SettingsModal","AppLocked","MediaViewer","AuthImportWalletModal","BackupModal","TransferModal","SwapModal","MintCardModal","SignatureModal","TransactionModal","SwapActivityModal","DappConnectModal","DappSignDataModal","DappTransferModal","AddAccountModal","OnRampWidgetModal","UnhideNftModal","NftAttributesModal","QrScannerModal","Notifications","Dialogs","ConfettiContainer","IFrameBrowser","LoadingOverlay","BottomBar","newPlatform","getStatusBarHeight","fadeOutDuration","canGoBack","exitApp","initCapacitor","DEEPLINK","lockOrientation","SecondaryButton","setParams","isStateStable","_webApp","biometricType","initTelegramAppBiometric","viewportHeight","handleViewportResize","hasAttribute","isFocusable","initForVisualViewport","storageMethods","isLocalStorageDataExists","isApiStorageDataExists","fixIosAppStorage","restoreStorage","_await$App$getLaunchU","launchUrl","getLaunchUrl","processCapacitorLaunchDeeplink","forceLoadFonts","lastFocusAt","setupInterval","betterView"],"sourceRoot":""}